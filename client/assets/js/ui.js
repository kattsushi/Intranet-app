/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
/*
 AngularJS v1.4.5
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(N,W,u){'use strict';function G(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.4.5/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=d(e)}return Error(c)}}function Da(b){if(null==b||Ya(b))return!1;var a="length"in Object(b)&&b.length;
return b.nodeType===pa&&a?!0:H(b)||K(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function n(b,a,c){var d,e;if(b)if(B(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(K(b)||Da(b)){var f="object"!==typeof b;d=0;for(e=b.length;d<e;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==n)b.forEach(a,c,b);else if(lc(b))for(d in b)a.call(c,b[d],d,b);else if("function"===typeof b.hasOwnProperty)for(d in b)b.hasOwnProperty(d)&&
a.call(c,b[d],d,b);else for(d in b)Na.call(b,d)&&a.call(c,b[d],d,b);return b}function mc(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function nc(b){return function(a,c){b(c,a)}}function Ud(){return++mb}function oc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function Mb(b,a,c){for(var d=b.$$hashKey,e=0,f=a.length;e<f;++e){var g=a[e];if(D(g)||B(g))for(var h=Object.keys(g),l=0,k=h.length;l<k;l++){var m=h[l],q=g[m];c&&D(q)?ca(q)?b[m]=new Date(q.valueOf()):Oa(q)?
b[m]=new RegExp(q):(D(b[m])||(b[m]=K(q)?[]:{}),Mb(b[m],[q],!0)):b[m]=q}}oc(b,d);return b}function Q(b){return Mb(b,xa.call(arguments,1),!1)}function Vd(b){return Mb(b,xa.call(arguments,1),!0)}function Y(b){return parseInt(b,10)}function Nb(b,a){return Q(Object.create(b),a)}function v(){}function Za(b){return b}function qa(b){return function(){return b}}function pc(b){return B(b.toString)&&b.toString!==Object.prototype.toString}function y(b){return"undefined"===typeof b}function x(b){return"undefined"!==
typeof b}function D(b){return null!==b&&"object"===typeof b}function lc(b){return null!==b&&"object"===typeof b&&!qc(b)}function H(b){return"string"===typeof b}function X(b){return"number"===typeof b}function ca(b){return"[object Date]"===sa.call(b)}function B(b){return"function"===typeof b}function Oa(b){return"[object RegExp]"===sa.call(b)}function Ya(b){return b&&b.window===b}function $a(b){return b&&b.$evalAsync&&b.$watch}function ab(b){return"boolean"===typeof b}function rc(b){return!(!b||!(b.nodeName||
b.prop&&b.attr&&b.find))}function Wd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function ta(b){return I(b.nodeName||b[0]&&b[0].nodeName)}function bb(b,a){var c=b.indexOf(a);0<=c&&b.splice(c,1);return c}function fa(b,a,c,d){if(Ya(b)||$a(b))throw Ea("cpws");if(sc.test(sa.call(a)))throw Ea("cpta");if(a){if(b===a)throw Ea("cpi");c=c||[];d=d||[];D(b)&&(c.push(b),d.push(a));var e;if(K(b))for(e=a.length=0;e<b.length;e++)a.push(fa(b[e],null,c,d));else{var f=a.$$hashKey;K(a)?
a.length=0:n(a,function(b,c){delete a[c]});if(lc(b))for(e in b)a[e]=fa(b[e],null,c,d);else if(b&&"function"===typeof b.hasOwnProperty)for(e in b)b.hasOwnProperty(e)&&(a[e]=fa(b[e],null,c,d));else for(e in b)Na.call(b,e)&&(a[e]=fa(b[e],null,c,d));oc(a,f)}}else if(a=b,D(b)){if(c&&-1!==(f=c.indexOf(b)))return d[f];if(K(b))return fa(b,[],c,d);if(sc.test(sa.call(b)))a=new b.constructor(b);else if(ca(b))a=new Date(b.getTime());else if(Oa(b))a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=
b.lastIndex;else return e=Object.create(qc(b)),fa(b,e,c,d);d&&(c.push(b),d.push(a))}return a}function ia(b,a){if(K(b)){a=a||[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}else if(D(b))for(c in a=a||{},b)if("$"!==c.charAt(0)||"$"!==c.charAt(1))a[c]=b[c];return a||b}function ka(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(K(b)){if(!K(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ka(b[d],a[d]))return!1;return!0}}else{if(ca(b))return ca(a)?
ka(b.getTime(),a.getTime()):!1;if(Oa(b))return Oa(a)?b.toString()==a.toString():!1;if($a(b)||$a(a)||Ya(b)||Ya(a)||K(a)||ca(a)||Oa(a))return!1;c=ga();for(d in b)if("$"!==d.charAt(0)&&!B(b[d])){if(!ka(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!(d in c||"$"===d.charAt(0)||a[d]===u||B(a[d])))return!1;return!0}return!1}function cb(b,a,c){return b.concat(xa.call(a,c))}function tc(b,a){var c=2<arguments.length?xa.call(arguments,2):[];return!B(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?
a.apply(b,cb(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Xd(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?c=u:Ya(a)?c="$WINDOW":a&&W===a?c="$DOCUMENT":$a(a)&&(c="$SCOPE");return c}function db(b,a){if("undefined"===typeof b)return u;X(a)||(a=a?2:null);return JSON.stringify(b,Xd,a)}function uc(b){return H(b)?JSON.parse(b):b}function vc(b,a){var c=Date.parse("Jan 01, 1970 00:00:00 "+b)/6E4;return isNaN(c)?a:c}function Ob(b,
a,c){c=c?-1:1;var d=vc(a,b.getTimezoneOffset());a=b;b=c*(d-b.getTimezoneOffset());a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function ua(b){b=z(b).clone();try{b.empty()}catch(a){}var c=z("<div>").append(b).html();try{return b[0].nodeType===Pa?I(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+I(b)})}catch(d){return I(c)}}function wc(b){try{return decodeURIComponent(b)}catch(a){}}function xc(b){var a={};n((b||"").split("&"),function(b){var d,e,f;b&&(e=
b=b.replace(/\+/g,"%20"),d=b.indexOf("="),-1!==d&&(e=b.substring(0,d),f=b.substring(d+1)),e=wc(e),x(e)&&(f=x(f)?wc(f):!0,Na.call(a,e)?K(a[e])?a[e].push(f):a[e]=[a[e],f]:a[e]=f))});return a}function Pb(b){var a=[];n(b,function(b,d){K(b)?n(b,function(b){a.push(ma(d,!0)+(!0===b?"":"="+ma(b,!0)))}):a.push(ma(d,!0)+(!0===b?"":"="+ma(b,!0)))});return a.length?a.join("&"):""}function nb(b){return ma(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ma(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Yd(b,a){var c,d,e=Qa.length;for(d=0;d<e;++d)if(c=Qa[d]+a,H(c=b.getAttribute(c)))return c;return null}function Zd(b,a){var c,d,e={};n(Qa,function(a){a+="app";!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))});n(Qa,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==Yd(c,"strict-di"),
a(c,d?[d]:[],e))}function yc(b,a,c){D(c)||(c={});c=Q({strictDi:!1},c);var d=function(){b=z(b);if(b.injector()){var d=b[0]===W?"document":ua(b);throw Ea("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);a.unshift("ng");d=eb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;N&&e.test(N.name)&&(c.debugInfoEnabled=!0,N.name=N.name.replace(e,""));if(N&&!f.test(N.name))return d();N.name=N.name.replace(f,"");aa.resumeBootstrap=function(b){n(b,function(b){a.push(b)});return d()};B(aa.resumeDeferredBootstrap)&&aa.resumeDeferredBootstrap()}function $d(){N.name="NG_ENABLE_DEBUG_INFO!"+N.name;N.location.reload()}function ae(b){b=aa.element(b).injector();if(!b)throw Ea("test");return b.get("$$testability")}
function zc(b,a){a=a||"_";return b.replace(be,function(b,d){return(d?a:"")+b.toLowerCase()})}function ce(){var b;if(!Ac){var a=ob();la=N.jQuery;x(a)&&(la=null===a?u:N[a]);la&&la.fn.on?(z=la,Q(la.fn,{scope:Ra.scope,isolateScope:Ra.isolateScope,controller:Ra.controller,injector:Ra.injector,inheritedData:Ra.inheritedData}),b=la.cleanData,la.cleanData=function(a){var d;if(Qb)Qb=!1;else for(var e=0,f;null!=(f=a[e]);e++)(d=la._data(f,"events"))&&d.$destroy&&la(f).triggerHandler("$destroy");b(a)}):z=R;aa.element=
z;Ac=!0}}function pb(b,a,c){if(!b)throw Ea("areq",a||"?",c||"required");return b}function Sa(b,a,c){c&&K(b)&&(b=b[b.length-1]);pb(B(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Ta(b,a){if("hasOwnProperty"===b)throw Ea("badname",a);}function Bc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&B(b)?tc(e,b):b}function qb(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;
if(!a)break;c.push(a)}while(a!==b);return z(c)}function ga(){return Object.create(null)}function de(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=G("$injector"),d=G("ng");b=a(b,"angular",Object);b.$$minErr=b.$$minErr||G;return a(b,"module",function(){var b={};return function(f,g,h){if("hasOwnProperty"===f)throw d("badname","module");g&&b.hasOwnProperty(f)&&(b[f]=null);return a(b,f,function(){function a(b,c,e,f){f||(f=d);return function(){f[e||"push"]([b,c,arguments]);return E}}function b(a,c){return function(b,
e){e&&B(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return E}}if(!g)throw c("nomod",f);var d=[],e=[],s=[],t=a("$injector","invoke","push",e),E={_invokeQueue:d,_configBlocks:e,_runBlocks:s,requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider",
"register"),directive:b("$compileProvider","directive"),config:t,run:function(a){s.push(a);return this}};h&&t(h);return E})}})}function ee(b){Q(b,{bootstrap:yc,copy:fa,extend:Q,merge:Vd,equals:ka,element:z,forEach:n,injector:eb,noop:v,bind:tc,toJson:db,fromJson:uc,identity:Za,isUndefined:y,isDefined:x,isString:H,isFunction:B,isObject:D,isNumber:X,isElement:rc,isArray:K,version:fe,isDate:ca,lowercase:I,uppercase:rb,callbacks:{counter:0},getTestability:ae,$$minErr:G,$$csp:Fa,reloadWithDebugInfo:$d});
Rb=de(N);Rb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:ge});a.provider("$compile",Cc).directive({a:he,input:Dc,textarea:Dc,form:ie,script:je,select:ke,style:le,option:me,ngBind:ne,ngBindHtml:oe,ngBindTemplate:pe,ngClass:qe,ngClassEven:re,ngClassOdd:se,ngCloak:te,ngController:ue,ngForm:ve,ngHide:we,ngIf:xe,ngInclude:ye,ngInit:ze,ngNonBindable:Ae,ngPluralize:Be,ngRepeat:Ce,ngShow:De,ngStyle:Ee,ngSwitch:Fe,ngSwitchWhen:Ge,ngSwitchDefault:He,ngOptions:Ie,ngTransclude:Je,ngModel:Ke,
ngList:Le,ngChange:Me,pattern:Ec,ngPattern:Ec,required:Fc,ngRequired:Fc,minlength:Gc,ngMinlength:Gc,maxlength:Hc,ngMaxlength:Hc,ngValue:Ne,ngModelOptions:Oe}).directive({ngInclude:Pe}).directive(sb).directive(Ic);a.provider({$anchorScroll:Qe,$animate:Re,$animateCss:Se,$$animateQueue:Te,$$AnimateRunner:Ue,$browser:Ve,$cacheFactory:We,$controller:Xe,$document:Ye,$exceptionHandler:Ze,$filter:Jc,$$forceReflow:$e,$interpolate:af,$interval:bf,$http:cf,$httpParamSerializer:df,$httpParamSerializerJQLike:ef,
$httpBackend:ff,$location:gf,$log:hf,$parse:jf,$rootScope:kf,$q:lf,$$q:mf,$sce:nf,$sceDelegate:of,$sniffer:pf,$templateCache:qf,$templateRequest:rf,$$testability:sf,$timeout:tf,$window:uf,$$rAF:vf,$$jqLite:wf,$$HashMap:xf,$$cookieReader:yf})}])}function fb(b){return b.replace(zf,function(a,b,d,e){return e?d.toUpperCase():d}).replace(Af,"Moz$1")}function Kc(b){b=b.nodeType;return b===pa||!b||9===b}function Lc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Sb.test(b)){c=c||e.appendChild(a.createElement("div"));
d=(Bf.exec(b)||["",""])[1].toLowerCase();d=na[d]||na._default;c.innerHTML=d[1]+b.replace(Cf,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=cb(f,c.childNodes);c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";n(f,function(a){e.appendChild(a)});return e}function R(b){if(b instanceof R)return b;var a;H(b)&&(b=T(b),a=!0);if(!(this instanceof R)){if(a&&"<"!=b.charAt(0))throw Tb("nosel");return new R(b)}if(a){a=W;var c;b=(c=Df.exec(b))?[a.createElement(c[1])]:
(c=Lc(b,a))?c.childNodes:[]}Mc(this,b)}function Ub(b){return b.cloneNode(!0)}function tb(b,a){a||ub(b);if(b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++)ub(c[d])}function Nc(b,a,c,d){if(x(d))throw Tb("offargs");var e=(d=vb(b))&&d.events,f=d&&d.handle;if(f)if(a)n(a.split(" "),function(a){if(x(c)){var d=e[a];bb(d||[],c);if(d&&0<d.length)return}b.removeEventListener(a,f,!1);delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function ub(b,
a){var c=b.ng339,d=c&&gb[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Nc(b)),delete gb[c],b.ng339=u))}function vb(b,a){var c=b.ng339,c=c&&gb[c];a&&!c&&(b.ng339=c=++Ef,c=gb[c]={events:{},data:{},handle:u});return c}function Vb(b,a,c){if(Kc(b)){var d=x(c),e=!d&&a&&!D(a),f=!a;b=(b=vb(b,!e))&&b.data;if(d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];Q(b,a)}}}function wb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+
a+" "):!1}function xb(b,a){a&&b.setAttribute&&n(a.split(" "),function(a){b.setAttribute("class",T((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+T(a)+" "," ")))})}function yb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");n(a.split(" "),function(a){a=T(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",T(c))}}function Mc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"===typeof c&&a.window!==
a){if(c)for(var d=0;d<c;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Oc(b,a){return zb(b,"$"+(a||"ngController")+"Controller")}function zb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=K(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=z.data(b,a[d]))!==u)return c;b=b.parentNode||11===b.nodeType&&b.host}}function Pc(b){for(tb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Wb(b,a){a||tb(b);var c=b.parentNode;c&&c.removeChild(b)}function Ff(b,a){a=a||N;if("complete"===a.document.readyState)a.setTimeout(b);
else z(a).on("load",b)}function Qc(b,a){var c=Ab[a.toLowerCase()];return c&&Rc[ta(b)]&&c}function Gf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Sc[a]}function Hf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=a[e||c.type],g=f?f.length:0;if(g){if(y(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=
function(){return!0===c.immediatePropagationStopped};1<g&&(f=ia(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};c.elem=b;return c}function wf(){this.$get=function(){return Q(R,{hasClass:function(b,a){b.attr&&(b=b[0]);return wb(b,a)},addClass:function(b,a){b.attr&&(b=b[0]);return yb(b,a)},removeClass:function(b,a){b.attr&&(b=b[0]);return xb(b,a)}})}}function Ga(b,a){var c=b&&b.$$hashKey;if(c)return"function"===typeof c&&(c=b.$$hashKey()),c;c=typeof b;return c="function"==
c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Ud)():c+":"+b}function Ua(b,a){if(a){var c=0;this.nextUid=function(){return++c}}n(b,this.put,this)}function If(b){return(b=b.toString().replace(Tc,"").match(Uc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function eb(b,a){function c(a){return function(b,c){if(D(b))n(b,nc(a));else return a(b,c)}}function d(a,b){Ta(a,"service");if(B(b)||K(b))b=s.instantiate(b);if(!b.$get)throw Ha("pget",a);return q[a+"Provider"]=b}function e(a,b){return function(){var c=
E.invoke(b,this);if(y(c))throw Ha("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function g(a){pb(y(a)||K(a),"modulesToLoad","not an array");var b=[],c;n(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=s.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{H(a)?(c=Rb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):B(a)?b.push(s.invoke(a)):K(a)?b.push(s.invoke(a)):Sa(a,"module")}catch(e){throw K(a)&&
(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ha("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Ha("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f;}finally{k.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[],k=eb.$$annotate(b,a,g),l,s,m;s=0;for(l=k.length;s<l;s++){m=k[s];if("string"!==
typeof m)throw Ha("itkn",m);h.push(f&&f.hasOwnProperty(m)?f[m]:d(m,g))}K(b)&&(b=b[l]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((K(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return D(a)||B(a)?a:d},get:d,annotate:eb.$$annotate,has:function(a){return q.hasOwnProperty(a+"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],m=new Ua([],!0),q={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),
value:c(function(a,b){return f(a,qa(b),!1)}),constant:c(function(a,b){Ta(a,"constant");q[a]=b;t[a]=b}),decorator:function(a,b){var c=s.get(a+"Provider"),d=c.$get;c.$get=function(){var a=E.invoke(d,c);return E.invoke(b,null,{$delegate:a})}}}},s=q.$injector=h(q,function(a,b){aa.isString(b)&&k.push(b);throw Ha("unpr",k.join(" <- "));}),t={},E=t.$injector=h(t,function(a,b){var c=s.get(a+"Provider",b);return E.invoke(c.$get,c,u,a)});n(g(b),function(a){a&&E.invoke(a)});return E}function Qe(){var b=!0;this.disableAutoScrolling=
function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ta(a))return b=a,!0});return b}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset;B(c)?c=c():rc(c)?(c=c[0],c="fixed"!==a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):X(c)||(c=0);c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function g(a){a=H(a)?a:c.hash();var b;a?(b=h.getElementById(a))?f(b):
(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Ff(function(){d.$evalAsync(g)})});return g}]}function hb(b,a){if(!b&&!a)return"";if(!b)return a;if(!a)return b;K(b)&&(b=b.join(" "));K(a)&&(a=a.join(" "));return b+" "+a}function Jf(b){H(b)&&(b=b.split(" "));var a=ga();n(b,function(b){b.length&&(a[b]=!0)});return a}function Ia(b){return D(b)?b:{}}function Kf(b,a,c,d){function e(a){try{a.apply(null,xa.call(arguments,
1))}finally{if(E--,0===E)for(;L.length;)try{L.pop()()}catch(b){c.error(b)}}}function f(){g();h()}function g(){a:{try{w=m.state;break a}catch(a){}w=void 0}w=y(w)?null:w;ka(w,F)&&(w=F);F=w}function h(){if(A!==l.url()||p!==w)A=l.url(),p=w,n(O,function(a){a(l.url(),w)})}var l=this,k=b.location,m=b.history,q=b.setTimeout,s=b.clearTimeout,t={};l.isMock=!1;var E=0,L=[];l.$$completeOutstandingRequest=e;l.$$incOutstandingRequestCount=function(){E++};l.notifyWhenNoOutstandingRequests=function(a){0===E?a():
L.push(a)};var w,p,A=k.href,r=a.find("base"),M=null;g();p=w;l.url=function(a,c,e){y(e)&&(e=null);k!==b.location&&(k=b.location);m!==b.history&&(m=b.history);if(a){var f=p===e;if(A===a&&(!d.history||f))return l;var h=A&&Ja(A)===Ja(a);A=a;p=e;if(!d.history||h&&f){if(!h||M)M=a;c?k.replace(a):h?(c=k,e=a.indexOf("#"),a=-1===e?"":a.substr(e),c.hash=a):k.href=a}else m[c?"replaceState":"pushState"](e,"",a),g(),p=w;return l}return M||k.href.replace(/%27/g,"'")};l.state=function(){return w};var O=[],J=!1,F=
null;l.onUrlChange=function(a){if(!J){if(d.history)z(b).on("popstate",f);z(b).on("hashchange",f);J=!0}O.push(a);return a};l.$$applicationDestroyed=function(){z(b).off("hashchange popstate",f)};l.$$checkUrlChange=h;l.baseHref=function(){var a=r.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};l.defer=function(a,b){var c;E++;c=q(function(){delete t[c];e(a)},b||0);t[c]=!0;return c};l.defer.cancel=function(a){return t[a]?(delete t[a],s(a),e(v),!0):!1}}function Ve(){this.$get=["$window",
"$log","$sniffer","$document",function(b,a,c,d){return new Kf(b,d,a,c)}]}function We(){this.$get=function(){function b(b,d){function e(a){a!=q&&(s?s==a&&(s=a.n):s=a,f(a.n,a.p),f(a,q),q=a,q.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw G("$cacheFactory")("iid",b);var g=0,h=Q({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,m={},q=null,s=null;return a[b]={put:function(a,b){if(!y(b)){if(k<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in l||g++;l[a]=b;g>k&&this.remove(s.key);
return b}},get:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;b==q&&(q=b.p);b==s&&(s=b.n);f(b.n,b.p);delete m[a]}delete l[a];g--},removeAll:function(){l={};g=0;m={};q=s=null},destroy:function(){m=h=l=null;delete a[b]},info:function(){return Q({},h,{size:g})}}}var a={};b.info=function(){var b={};n(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function qf(){this.$get=
["$cacheFactory",function(b){return b("templates")}]}function Cc(b,a){function c(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,e={};n(a,function(a,f){var g=a.match(d);if(!g)throw ea("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}});return e}function d(a){var b=a.charAt(0);if(!b||b!==I(b))throw ea("baddir",a);if(a!==a.trim())throw ea("baddir",a);}var e={},f=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,
g=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=Wd("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,k=/^(on[a-z]+|formaction)$/;this.directive=function s(a,f){Ta(a,"directive");H(a)?(d(a),pb(f,"directiveFactory"),e.hasOwnProperty(a)||(e[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,d){var f=[];n(e[a],function(e,g){try{var h=b.invoke(e);B(h)?h={compile:qa(h)}:!h.compile&&h.link&&(h.compile=qa(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||a;h.require=h.require||
h.controller&&h.name;h.restrict=h.restrict||"EA";var l=h,k=h,s=h.name,m={isolateScope:null,bindToController:null};D(k.scope)&&(!0===k.bindToController?(m.bindToController=c(k.scope,s,!0),m.isolateScope={}):m.isolateScope=c(k.scope,s,!1));D(k.bindToController)&&(m.bindToController=c(k.bindToController,s,!0));if(D(m.bindToController)){var S=k.controller,E=k.controllerAs;if(!S)throw ea("noctrl",s);var ha;a:if(E&&H(E))ha=E;else{if(H(S)){var n=Vc.exec(S);if(n){ha=n[3];break a}}ha=void 0}if(!ha)throw ea("noident",
s);}var r=l.$$bindings=m;D(r.isolateScope)&&(h.$$isolateBindings=r.isolateScope);h.$$moduleName=e.$$moduleName;f.push(h)}catch(u){d(u)}});return f}])),e[a].push(f)):n(a,nc(s));return this};this.aHrefSanitizationWhitelist=function(b){return x(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return x(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(a){return x(a)?
(m=a,this):m};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,d,w,p,A,r,M,O,J){function F(a,b){try{a.addClass(b)}catch(c){}}function V(a,b,c,d,e){a instanceof z||(a=z(a));n(a,function(b,c){b.nodeType==Pa&&b.nodeValue.match(/\S+/)&&(a[c]=z(b).wrap("<span></span>").parent()[0])});var f=S(a,b,a,c,d,e);V.$$addScopeClass(a);var g=null;return function(b,c,d){pb(b,"scope");d=d||{};
var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ta(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==g?z(Xb(g,z("<div>").append(a).html())):c?Ra.clone.call(a):a;if(h)for(var k in h)d.data("$"+k+"Controller",h[k].instance);V.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,e);return d}}function S(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,s,t,O;if(p)for(O=Array(c.length),m=0;m<
h.length;m+=3)f=h[m],O[f]=c[f];else O=c;m=0;for(s=h.length;m<s;)if(k=O[h[m++]],c=h[m++],f=h[m++],c){if(c.scope){if(l=a.$new(),V.$$addScopeInfo(z(k),l),t=c.$$destroyBindings)c.$$destroyBindings=null,l.$on("$destroyed",t)}else l=a;t=c.transcludeOnThisElement?P(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?P(a,b):null;c(f,l,k,d,t,c)}else f&&f(a,k.childNodes,u,e)}for(var h=[],k,l,m,s,p,t=0;t<a.length;t++){k=new aa;l=ha(a[t],[],k,0===t?d:u,e);(f=l.length?C(l,a[t],k,b,c,null,[],[],f):null)&&f.scope&&
V.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[t].childNodes)||!m.length?null:S(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(t,f,k),s=!0,p=p||f;f=null}return s?g:null}function P(a,b,c){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function ha(a,b,c,d,e){var h=c.$attr,k;switch(a.nodeType){case pa:x(b,va(ta(a)),"E",d,e);for(var l,m,s,p=a.attributes,
t=0,O=p&&p.length;t<O;t++){var L=!1,J=!1;l=p[t];k=l.name;m=T(l.value);l=va(k);if(s=ia.test(l))k=k.replace(Xc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var S=l.replace(/(Start|End)$/,"");G(S)&&l===S+"Start"&&(L=k,J=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));l=va(k.toLowerCase());h[l]=k;if(s||!c.hasOwnProperty(l))c[l]=m,Qc(a,l)&&(c[l]=!0);X(a,b,m,l,s);x(b,l,"A",d,e,L,J)}a=a.className;D(a)&&(a=a.animVal);if(H(a)&&""!==a)for(;k=g.exec(a);)l=va(k[2]),x(b,l,"C",d,
e)&&(c[l]=T(k[3])),a=a.substr(k.index+k[0].length);break;case Pa:if(11===Va)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Pa;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);wa(b,a.nodeValue);break;case 8:try{if(k=f.exec(a.nodeValue))l=va(k[1]),x(b,l,"M",d,e)&&(c[l]=T(k[2]))}catch(E){}}b.sort(za);return b}function ya(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ea("uterdir",b,c);a.nodeType==pa&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&
e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return z(d)}function Wc(a,b,c){return function(d,e,f,g,h){e=ya(e[0],b,c);return a(d,e,f,g,h)}}function C(a,b,d,e,f,g,h,k,m){function s(a,b,c,d){if(a){c&&(a=Wc(a,c,d));a.require=C.require;a.directiveName=x;if(P===C||C.$$isolateScope)a=Z(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=Wc(b,c,d));b.require=C.require;b.directiveName=x;if(P===C||C.$$isolateScope)b=Z(b,{isolateScope:!0});k.push(b)}}function t(a,b,c,d){var e;if(H(b)){var f=b.match(l);b=
b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;e||(d="$"+b+"Controller",e=g?c.inheritedData(d):c.data(d));if(!e&&!f)throw ea("ctreq",b,a);}else if(K(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=t(a,b[g],c,d);return e||null}function O(a,b,c,d,e,f){var g=ga(),h;for(h in d){var k=d[h],l={$scope:k===P||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"==m&&(m=b[k.name]);l=p(m,l,!0,k.controllerAs);g[k.name]=l;r||a.data("$"+k.name+
"Controller",l.instance)}return g}function L(a,c,e,f,g,l){function m(a,b,c){var d;$a(a)||(c=b,b=a,a=u);r&&(d=A);c||(c=r?ja.parent():ja);return g(a,b,d,c,ya)}var s,p,J,E,A,ha,ja;b===e?(f=d,ja=d.$$element):(ja=z(e),f=new aa(ja,d));P&&(E=c.$new(!0));g&&(ha=m,ha.$$boundTransclude=g);w&&(A=O(ja,f,ha,w,E,c));P&&(V.$$addScopeInfo(ja,E,!0,!(F&&(F===P||F===P.$$originalDirective))),V.$$addScopeClass(ja,!0),E.$$isolateBindings=P.$$isolateBindings,Y(c,f,E,E.$$isolateBindings,P,E));if(A){var n=P||S,M;n&&A[n.name]&&
(p=n.$$bindings.bindToController,(J=A[n.name])&&J.identifier&&p&&(M=J,l.$$destroyBindings=Y(c,f,J.instance,p,n)));for(s in A){J=A[s];var C=J();C!==J.instance&&(J.instance=C,ja.data("$"+s+"Controller",C),J===M&&(l.$$destroyBindings(),l.$$destroyBindings=Y(c,f,C,p,n)))}}s=0;for(l=h.length;s<l;s++)p=h[s],$(p,p.isolateScope?E:c,ja,f,p.require&&t(p.directiveName,p.require,ja,A),ha);var ya=c;P&&(P.template||null===P.templateUrl)&&(ya=E);a&&a(ya,e.childNodes,u,g);for(s=k.length-1;0<=s;s--)p=k[s],$(p,p.isolateScope?
E:c,ja,f,p.require&&t(p.directiveName,p.require,ja,A),ha)}m=m||{};for(var J=-Number.MAX_VALUE,S=m.newScopeDirective,w=m.controllerDirectives,P=m.newIsolateScopeDirective,F=m.templateDirective,A=m.nonTlbTranscludeDirective,n=!1,M=!1,r=m.hasElementTranscludeDirective,ba=d.$$element=z(b),C,x,v,y=e,za,wa=0,G=a.length;wa<G;wa++){C=a[wa];var Bb=C.$$start,I=C.$$end;Bb&&(ba=ya(b,Bb,I));v=u;if(J>C.priority)break;if(v=C.scope)C.templateUrl||(D(v)?(N("new/isolated scope",P||S,C,ba),P=C):N("new/isolated scope",
P,C,ba)),S=S||C;x=C.name;!C.templateUrl&&C.controller&&(v=C.controller,w=w||ga(),N("'"+x+"' controller",w[x],C,ba),w[x]=C);if(v=C.transclude)n=!0,C.$$tlb||(N("transclusion",A,C,ba),A=C),"element"==v?(r=!0,J=C.priority,v=ba,ba=d.$$element=z(W.createComment(" "+x+": "+d[x]+" ")),b=ba[0],U(f,xa.call(v,0),b),y=V(v,e,J,g&&g.name,{nonTlbTranscludeDirective:A})):(v=z(Ub(b)).contents(),ba.empty(),y=V(v,e));if(C.template)if(M=!0,N("template",F,C,ba),F=C,v=B(C.template)?C.template(ba,d):C.template,v=fa(v),
C.replace){g=C;v=Sb.test(v)?Yc(Xb(C.templateNamespace,T(v))):[];b=v[0];if(1!=v.length||b.nodeType!==pa)throw ea("tplrt",x,"");U(f,ba,b);G={$attr:{}};v=ha(b,[],G);var Q=a.splice(wa+1,a.length-(wa+1));P&&Zc(v);a=a.concat(v).concat(Q);$c(d,G);G=a.length}else ba.html(v);if(C.templateUrl)M=!0,N("template",F,C,ba),F=C,C.replace&&(g=C),L=Lf(a.splice(wa,a.length-wa),ba,d,f,n&&y,h,k,{controllerDirectives:w,newScopeDirective:S!==C&&S,newIsolateScopeDirective:P,templateDirective:F,nonTlbTranscludeDirective:A}),
G=a.length;else if(C.compile)try{za=C.compile(ba,d,y),B(za)?s(null,za,Bb,I):za&&s(za.pre,za.post,Bb,I)}catch(R){c(R,ua(ba))}C.terminal&&(L.terminal=!0,J=Math.max(J,C.priority))}L.scope=S&&!0===S.scope;L.transcludeOnThisElement=n;L.templateOnThisElement=M;L.transclude=y;m.hasElementTranscludeDirective=r;return L}function Zc(a){for(var b=0,c=a.length;b<c;b++)a[b]=Nb(a[b],{$$isolateScope:!0})}function x(b,d,f,g,h,k,l){if(d===h)return null;h=null;if(e.hasOwnProperty(d)){var m;d=a.get(d+"Directive");for(var p=
0,t=d.length;p<t;p++)try{m=d[p],(g===u||g>m.priority)&&-1!=m.restrict.indexOf(f)&&(k&&(m=Nb(m,{$$start:k,$$end:l})),b.push(m),h=m)}catch(J){c(J)}}return h}function G(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;d<f;d++)if(b=c[d],b.multiElement)return!0;return!1}function $c(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;n(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});n(b,function(b,f){"class"==f?(F(e,b),a["class"]=(a["class"]?
a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function Lf(a,b,c,e,f,g,h,k){var l=[],m,s,p=b[0],t=a.shift(),J=Nb(t,{templateUrl:null,transclude:null,replace:null,$$originalDirective:t}),O=B(t.templateUrl)?t.templateUrl(b,c):t.templateUrl,E=t.templateNamespace;b.empty();d(O).then(function(d){var L,w;d=fa(d);if(t.replace){d=Sb.test(d)?Yc(Xb(E,T(d))):[];L=d[0];if(1!=d.length||L.nodeType!==
pa)throw ea("tplrt",t.name,O);d={$attr:{}};U(e,b,L);var A=ha(L,[],d);D(t.scope)&&Zc(A);a=A.concat(a);$c(c,d)}else L=p,b.html(d);a.unshift(J);m=C(a,L,c,f,b,t,g,h,k);n(e,function(a,c){a==L&&(e[c]=b[0])});for(s=S(b[0].childNodes,f);l.length;){d=l.shift();w=l.shift();var M=l.shift(),V=l.shift(),A=b[0];if(!d.$$destroyed){if(w!==p){var ya=w.className;k.hasElementTranscludeDirective&&t.replace||(A=Ub(L));U(M,z(w),A);F(z(A),ya)}w=m.transcludeOnThisElement?P(d,m.transclude,V):V;m(s,d,A,e,w,m)}}l=null});return function(a,
b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(m.transcludeOnThisElement&&(a=P(b,m.transclude,e)),m(s,b,c,d,a,m)))}}function za(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function N(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ea("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ua(d));}function wa(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&V.$$addBindingClass(a);
return function(a,c){var e=c.parent();b||V.$$addBindingClass(e);V.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xb(a,b){a=I(a||"html");switch(a){case "svg":case "math":var c=W.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==b)return M.HTML;var c=ta(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return M.RESOURCE_URL}function X(a,c,d,e,
f){var g=R(a,e);f=h[e]||f;var l=b(d,!0,g,f);if(l){if("multiple"===e&&"select"===ta(a))throw ea("selmulti",ua(a));c.push({priority:100,compile:function(){return{pre:function(a,c,h){c=h.$$observers||(h.$$observers={});if(k.test(e))throw ea("nodomevents");var m=h[e];m!==d&&(l=m&&b(m,!0,g,f),d=m);l&&(h[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)}))}}}})}}function U(a,b,c){var d=b[0],e=b.length,
f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=W.createDocumentFragment();a.appendChild(d);z.hasData(d)&&(z(c).data(z(d).data()),la?(Qb=!0,la.cleanData([d])):delete z.cache[d[z.expando]]);d=1;for(e=b.length;d<e;d++)f=b[d],z(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Z(a,b){return Q(function(){return a.apply(null,
arguments)},a,b)}function $(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ua(d))}}function Y(a,c,d,e,f,g){var h;n(e,function(e,g){var k=e.attrName,l=e.optional,m,s,p,L;switch(e.mode){case "@":l||Na.call(c,k)||(d[g]=c[k]=void 0);c.$observe(k,function(a){H(a)&&(d[g]=a)});c.$$observers[k].$$scope=a;H(c[k])&&(d[g]=b(c[k])(a));break;case "=":if(!Na.call(c,k)){if(l)break;c[k]=void 0}if(l&&!c[k])break;s=w(c[k]);L=s.literal?ka:function(a,b){return a===b||a!==a&&b!==b};p=s.assign||function(){m=d[g]=s(a);throw ea("nonassign",
c[k],f.name);};m=d[g]=s(a);l=function(b){L(b,d[g])||(L(b,m)?p(a,b=d[g]):d[g]=b);return m=b};l.$stateful=!0;l=e.collection?a.$watchCollection(c[k],l):a.$watch(w(c[k],l),null,s.literal);h=h||[];h.push(l);break;case "&":s=c.hasOwnProperty(k)?w(c[k]):v;if(s===v&&l)break;d[g]=function(b){return s(a,b)}}});e=h?function(){for(var a=0,b=h.length;a<b;++a)h[a]()}:v;return g&&e!==v?(g.$on("$destroy",e),v):e}var aa=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr=
{};this.$$element=a};aa.prototype={$normalize:va,$addClass:function(a){a&&0<a.length&&O.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&O.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=ad(a,b);c&&c.length&&O.addClass(this.$$element,c);(c=ad(b,a))&&c.length&&O.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=this.$$element[0],g=Qc(f,a),h=Gf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,f=h);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=
e=zc(a,"-"));g=ta(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a)this[a]=b=J(b,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",h=T(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(h)?k:/(,)/,h=h.split(k),k=Math.floor(h.length/2),l=0;l<k;l++)var m=2*l,g=g+J(T(h[m]),!0),g=g+(" "+T(h[m+1]));h=T(h[2*l]).split(/\s/);g+=J(T(h[0]),!0);2===h.length&&(g+=" "+T(h[1]));this[a]=b=g}!1!==d&&(null===b||b===u?this.$$element.removeAttr(e):this.$$element.attr(e,b));(a=this.$$observers)&&
n(a[f],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ga()),e=d[a]||(d[a]=[]);e.push(b);A.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||y(c[a])||b(c[a])});return function(){bb(e,b)}}};var ca=b.startSymbol(),da=b.endSymbol(),fa="{{"==ca||"}}"==da?Za:function(a){return a.replace(/\{\{/g,ca).replace(/}}/g,da)},ia=/^ngAttr[A-Z]/;V.$$addBindingInfo=m?function(a,b){var c=a.data("$binding")||[];K(b)?c=c.concat(b):c.push(b);a.data("$binding",
c)}:v;V.$$addBindingClass=m?function(a){F(a,"ng-binding")}:v;V.$$addScopeInfo=m?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:v;V.$$addScopeClass=m?function(a,b){F(a,b?"ng-isolate-scope":"ng-scope")}:v;return V}]}function va(b){return fb(b.replace(Xc,""))}function ad(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Yc(b){b=z(b);var a=b.length;
if(1>=a)return b;for(;a--;)8===b[a].nodeType&&Mf.call(b,a,1);return b}function Xe(){var b={},a=!1;this.register=function(a,d){Ta(a,"controller");D(a)?Q(b,a):b[a]=d};this.allowGlobals=function(){a=!0};this.$get=["$injector","$window",function(c,d){function e(a,b,c,d){if(!a||!D(a.$scope))throw G("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,l){var k,m,q;h=!0===h;l&&H(l)&&(q=l);if(H(f)){l=f.match(Vc);if(!l)throw Nf("ctrlfmt",f);m=l[1];q=q||l[3];f=b.hasOwnProperty(m)?b[m]:Bc(g.$scope,
m,!0)||(a?Bc(d,m,!0):u);Sa(f,m,!0)}if(h)return h=(K(f)?f[f.length-1]:f).prototype,k=Object.create(h||null),q&&e(g,q,k,m||f.name),Q(function(){var a=c.invoke(f,k,g,m);a!==k&&(D(a)||B(a))&&(k=a,q&&e(g,q,k,m||f.name));return k},{instance:k,identifier:q});k=c.instantiate(f,g,m);q&&e(g,q,k,m||f.name);return k}}]}function Ye(){this.$get=["$window",function(b){return z(b.document)}]}function Ze(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Yb(b){return D(b)?
ca(b)?b.toISOString():db(b):b}function df(){this.$get=function(){return function(b){if(!b)return"";var a=[];mc(b,function(b,d){null===b||y(b)||(K(b)?n(b,function(b,c){a.push(ma(d)+"="+ma(Yb(b)))}):a.push(ma(d)+"="+ma(Yb(b))))});return a.join("&")}}}function ef(){this.$get=function(){return function(b){function a(b,e,f){null===b||y(b)||(K(b)?n(b,function(b,c){a(b,e+"["+(D(b)?c:"")+"]")}):D(b)&&!ca(b)?mc(b,function(b,c){a(b,e+(f?"":"[")+c+(f?"":"]"))}):c.push(ma(e)+"="+ma(Yb(b))))}if(!b)return"";var c=
[];a(b,"",!0);return c.join("&")}}}function Zb(b,a){if(H(b)){var c=b.replace(Of,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(bd))||(d=(d=c.match(Pf))&&Qf[d[0]].test(c));d&&(b=uc(c))}}return b}function cd(b){var a=ga(),c;H(b)?n(b.split("\n"),function(b){c=b.indexOf(":");var e=I(T(b.substr(0,c)));b=T(b.substr(c+1));e&&(a[e]=a[e]?a[e]+", "+b:b)}):D(b)&&n(b,function(b,c){var f=I(c),g=T(b);f&&(a[f]=a[f]?a[f]+", "+g:g)});return a}function dd(b){var a;return function(c){a||(a=cd(b));return c?
(c=a[I(c)],void 0===c&&(c=null),c):a}}function ed(b,a,c,d){if(B(d))return d(b,a,c);n(d,function(d){b=d(b,a,c)});return b}function cf(){var b=this.defaults={transformResponse:[Zb],transformRequest:[function(a){return D(a)&&"[object File]"!==sa.call(a)&&"[object Blob]"!==sa.call(a)&&"[object FormData]"!==sa.call(a)?db(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ia($b),put:ia($b),patch:ia($b)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},
a=!1;this.useApplyAsync=function(b){return x(b)?(a=!!b,this):a};var c=!0;this.useLegacyPromiseExtensions=function(a){return x(a)?(c=!!a,this):c};var d=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(e,f,g,h,l,k){function m(a){function d(a){var b=Q({},a);b.data=a.data?ed(a.data,a.headers,a.status,f.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:l.reject(b)}function e(a,b){var c,d={};n(a,function(a,e){B(a)?(c=a(b),null!=
c&&(d[e]=c)):d[e]=a});return d}if(!aa.isObject(a))throw G("$http")("badreq",a);var f=Q({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse,paramSerializer:b.paramSerializer},a);f.headers=function(a){var c=b.headers,d=Q({},a.headers),f,g,h,c=Q({},c.common,c[I(a.method)]);a:for(f in c){g=I(f);for(h in d)if(I(h)===g)continue a;d[f]=c[f]}return e(d,ia(a))}(a);f.method=rb(f.method);f.paramSerializer=H(f.paramSerializer)?k.get(f.paramSerializer):f.paramSerializer;var g=
[function(a){var c=a.headers,e=ed(a.data,dd(c),u,a.transformRequest);y(e)&&n(c,function(a,b){"content-type"===I(b)&&delete c[b]});y(a.withCredentials)&&!y(b.withCredentials)&&(a.withCredentials=b.withCredentials);return q(a,e).then(d,d)},u],h=l.when(f);for(n(E,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError);(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){a=g.shift();var m=g.shift(),h=h.then(a,m)}c?(h.success=function(a){Sa(a,"fn");h.then(function(b){a(b.data,
b.status,b.headers,f)});return h},h.error=function(a){Sa(a,"fn");h.then(null,function(b){a(b.data,b.status,b.headers,f)});return h}):(h.success=fd("success"),h.error=fd("error"));return h}function q(c,d){function g(b,c,d,e){function f(){k(c,b,d,e)}F&&(200<=b&&300>b?F.put(P,[b,c,cd(d),e]):F.remove(P));a?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function k(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?O.resolve:O.reject)({data:a,status:b,headers:dd(d),config:c,statusText:e})}function q(a){k(a.data,a.status,
ia(a.headers()),a.statusText)}function E(){var a=m.pendingRequests.indexOf(c);-1!==a&&m.pendingRequests.splice(a,1)}var O=l.defer(),J=O.promise,F,n,S=c.headers,P=s(c.url,c.paramSerializer(c.params));m.pendingRequests.push(c);J.then(E,E);!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(F=D(c.cache)?c.cache:D(b.cache)?b.cache:t);F&&(n=F.get(P),x(n)?n&&B(n.then)?n.then(q,q):K(n)?k(n[1],n[0],ia(n[2]),n[3]):k(n,200,{},"OK"):F.put(P,J));y(n)&&((n=gd(c.url)?f()[c.xsrfCookieName||
b.xsrfCookieName]:u)&&(S[c.xsrfHeaderName||b.xsrfHeaderName]=n),e(c.method,P,d,g,S,c.timeout,c.withCredentials,c.responseType));return J}function s(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var t=g("$http");b.paramSerializer=H(b.paramSerializer)?k.get(b.paramSerializer):b.paramSerializer;var E=[];n(d,function(a){E.unshift(H(a)?k.get(a):k.invoke(a))});m.pendingRequests=[];(function(a){n(arguments,function(a){m[a]=function(b,c){return m(Q({},c||{},{method:a,url:b}))}})})("get","delete",
"head","jsonp");(function(a){n(arguments,function(a){m[a]=function(b,c,d){return m(Q({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=b;return m}]}function Rf(){return new N.XMLHttpRequest}function ff(){this.$get=["$browser","$window","$document",function(b,a,c){return Sf(b,Rf,b.defer,a.angular.callbacks,c[0])}]}function Sf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",
m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,t="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),t=a.type,g="error"===a.type?404:200);c&&c(g,t)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,l,k,m,q,s,t){function E(){p&&p();A&&A.abort()}function L(a,d,e,f,g){M!==u&&c.cancel(M);p=A=null;a(d,e,f,g);b.$$completeOutstandingRequest(v)}b.$$incOutstandingRequestCount();h=h||b.url();if("jsonp"==
I(e)){var w="_"+(d.counter++).toString(36);d[w]=function(a){d[w].data=a;d[w].called=!0};var p=f(h.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(a,b){L(k,a,d[w].data,"",b);d[w]=v})}else{var A=a();A.open(e,h,!0);n(m,function(a,b){x(a)&&A.setRequestHeader(b,a)});A.onload=function(){var a=A.statusText||"",b="response"in A?A.response:A.responseText,c=1223===A.status?204:A.status;0===c&&(c=b?200:"file"==Aa(h).protocol?404:0);L(k,c,b,A.getAllResponseHeaders(),a)};e=function(){L(k,-1,null,null,
"")};A.onerror=e;A.onabort=e;s&&(A.withCredentials=!0);if(t)try{A.responseType=t}catch(r){if("json"!==t)throw r;}A.send(l)}if(0<q)var M=c(E,q);else q&&B(q.then)&&q.then(E)}}function af(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,b).replace(q,a)}function h(f,h,m,q){function w(a){try{var b=a;a=m?e.getTrusted(m,
b):e.valueOf(b);var c;if(q&&!x(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=db(a)}c=a}return c}catch(g){d(Ka.interr(f,g))}}q=!!q;for(var p,n,r=0,M=[],O=[],J=f.length,F=[],V=[];r<J;)if(-1!=(p=f.indexOf(b,r))&&-1!=(n=f.indexOf(a,p+l)))r!==p&&F.push(g(f.substring(r,p))),r=f.substring(p+l,n),M.push(r),O.push(c(r,w)),r=n+k,V.push(F.length),F.push("");else{r!==J&&F.push(g(f.substring(r)));break}m&&1<F.length&&Ka.throwNoconcat(f);if(!h||M.length){var S=
function(a){for(var b=0,c=M.length;b<c;b++){if(q&&y(a[b]))return;F[V[b]]=a[b]}return F.join("")};return Q(function(a){var b=0,c=M.length,e=Array(c);try{for(;b<c;b++)e[b]=O[b](a);return S(e)}catch(g){d(Ka.interr(f,g))}},{exp:f,expressions:M,$$watchDelegate:function(a,b){var c;return a.$watchGroup(O,function(d,e){var f=S(d);B(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=b.length,k=a.length,m=new RegExp(b.replace(/./g,f),"g"),q=new RegExp(a.replace(/./g,f),"g");h.startSymbol=function(){return b};h.endSymbol=
function(){return a};return h}]}function bf(){this.$get=["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,h,l,k){var m=4<arguments.length,q=m?xa.call(arguments,4):[],s=a.setInterval,t=a.clearInterval,E=0,L=x(k)&&!k,w=(L?d:c).defer(),p=w.promise;l=x(l)?l:0;p.then(null,null,m?function(){e.apply(null,q)}:e);p.$$intervalId=s(function(){w.notify(E++);0<l&&E>=l&&(w.resolve(E),t(p.$$intervalId),delete f[p.$$intervalId]);L||b.$apply()},h);f[p.$$intervalId]=w;return p}var f={};e.cancel=function(b){return b&&
b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}function ac(b){b=b.split("/");for(var a=b.length;a--;)b[a]=nb(b[a]);return b.join("/")}function hd(b,a){var c=Aa(b);a.$$protocol=c.protocol;a.$$host=c.hostname;a.$$port=Y(c.port)||Tf[c.protocol]||null}function id(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Aa(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);a.$$search=
xc(d.search);a.$$hash=decodeURIComponent(d.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ja(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Cb(b){return b.replace(/(#.+)|#$/,"$1")}function bc(b,a,c){this.$$html5=!0;c=c||"";hd(b,this);this.$$parse=function(b){var c=ra(a,b);if(!H(c))throw Db("ipthprfx",b,a);id(c,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var b=
Pb(this.$$search),c=this.$$hash?"#"+nb(this.$$hash):"";this.$$url=ac(this.$$path)+(b?"?"+b:"")+c;this.$$absUrl=a+this.$$url.substr(1)};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;(f=ra(b,d))!==u?(g=f,g=(f=ra(c,f))!==u?a+(ra("/",f)||f):b+g):(f=ra(a,d))!==u?g=a+f:a==d+"/"&&(g=a);g&&this.$$parse(g);return!!g}}function cc(b,a,c){hd(b,this);this.$$parse=function(d){var e=ra(b,d)||ra(a,d),f;y(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",y(e)&&(b=d,this.replace())):
(f=ra(c,e),y(f)&&(f=e));id(f,this);d=this.$$path;var e=b,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));g.exec(f)||(d=(f=g.exec(d))?f[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var a=Pb(this.$$search),e=this.$$hash?"#"+nb(this.$$hash):"";this.$$url=ac(this.$$path)+(a?"?"+a:"")+e;this.$$absUrl=b+(this.$$url?c+this.$$url:"")};this.$$parseLinkUrl=function(a,c){return Ja(b)==Ja(a)?(this.$$parse(a),!0):!1}}function jd(b,a,c){this.$$html5=!0;cc.apply(this,arguments);this.$$parseLinkUrl=
function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;b==Ja(d)?f=d:(g=ra(a,d))?f=b+c+g:a===d+"/"&&(f=a);f&&this.$$parse(f);return!!f};this.$$compose=function(){var a=Pb(this.$$search),e=this.$$hash?"#"+nb(this.$$hash):"";this.$$url=ac(this.$$path)+(a?"?"+a:"")+e;this.$$absUrl=b+c+this.$$url}}function Eb(b){return function(){return this[b]}}function kd(b,a){return function(c){if(y(c))return this[b];this[b]=a(c);this.$$compose();return this}}function gf(){var b="",a={enabled:!1,requireBase:!0,
rewriteLinks:!0};this.hashPrefix=function(a){return x(a)?(b=a,this):b};this.html5Mode=function(b){return ab(b)?(a.enabled=b,this):D(b)?(ab(b.enabled)&&(a.enabled=b.enabled),ab(b.requireBase)&&(a.requireBase=b.requireBase),ab(b.rewriteLinks)&&(a.rewriteLinks=b.rewriteLinks),this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g;}}function l(a,
b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,m;m=d.baseHref();var q=d.url(),s;if(a.enabled){if(!m&&a.requireBase)throw Db("nobase");s=q.substring(0,q.indexOf("/",q.indexOf("//")+2))+(m||"/");m=e.history?bc:jd}else s=Ja(q),m=cc;var t=s.substr(0,Ja(s).lastIndexOf("/")+1);k=new m(s,t,"#"+b);k.$$parseLinkUrl(q,q);k.$$state=d.state();var E=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&2!=b.which&&2!=b.button){for(var e=
z(b.target);"a"!==ta(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),l=e.attr("href")||e.attr("xlink:href");D(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Aa(h.animVal).href);E.test(h)||!h||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(h,l)||(b.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});Cb(k.absUrl())!=Cb(q)&&d.url(k.absUrl(),!0);var L=!0;d.onUrlChange(function(a,b){y(ra(t,a))?g.location.href=a:(c.$evalAsync(function(){var d=
k.absUrl(),e=k.$$state,f;k.$$parse(a);k.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,h(d,!1,e)):(L=!1,l(d,e)))}),c.$$phase||c.$digest())});c.$watch(function(){var a=Cb(d.url()),b=Cb(k.absUrl()),f=d.state(),g=k.$$replace,m=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(L||m)L=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=
f):(m&&h(b,g,f===k.$$state?null:k.$$state),l(a,f)))});k.$$replace=!1});return k}]}function hf(){var b=!0,a=this;this.debugEnabled=function(a){return x(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||v;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=
[];n(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function Wa(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw da("isecfld",a);return b}function Ba(b,a){if(b){if(b.constructor===b)throw da("isecfn",a);if(b.window===b)throw da("isecwindow",
a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw da("isecdom",a);if(b===Object)throw da("isecobj",a);}return b}function ld(b,a){if(b){if(b.constructor===b)throw da("isecfn",a);if(b===Uf||b===Vf||b===Wf)throw da("isecff",a);}}function Xf(b,a){return"undefined"!==typeof b?b:a}function md(b,a){return"undefined"===typeof b?a:"undefined"===typeof a?b:b+a}function U(b,a){var c,d;switch(b.type){case r.Program:c=!0;n(b.body,function(b){U(b.expression,a);c=c&&b.expression.constant});b.constant=
c;break;case r.Literal:b.constant=!0;b.toWatch=[];break;case r.UnaryExpression:U(b.argument,a);b.constant=b.argument.constant;b.toWatch=b.argument.toWatch;break;case r.BinaryExpression:U(b.left,a);U(b.right,a);b.constant=b.left.constant&&b.right.constant;b.toWatch=b.left.toWatch.concat(b.right.toWatch);break;case r.LogicalExpression:U(b.left,a);U(b.right,a);b.constant=b.left.constant&&b.right.constant;b.toWatch=b.constant?[]:[b];break;case r.ConditionalExpression:U(b.test,a);U(b.alternate,a);U(b.consequent,
a);b.constant=b.test.constant&&b.alternate.constant&&b.consequent.constant;b.toWatch=b.constant?[]:[b];break;case r.Identifier:b.constant=!1;b.toWatch=[b];break;case r.MemberExpression:U(b.object,a);b.computed&&U(b.property,a);b.constant=b.object.constant&&(!b.computed||b.property.constant);b.toWatch=[b];break;case r.CallExpression:c=b.filter?!a(b.callee.name).$stateful:!1;d=[];n(b.arguments,function(b){U(b,a);c=c&&b.constant;b.constant||d.push.apply(d,b.toWatch)});b.constant=c;b.toWatch=b.filter&&
!a(b.callee.name).$stateful?d:[b];break;case r.AssignmentExpression:U(b.left,a);U(b.right,a);b.constant=b.left.constant&&b.right.constant;b.toWatch=[b];break;case r.ArrayExpression:c=!0;d=[];n(b.elements,function(b){U(b,a);c=c&&b.constant;b.constant||d.push.apply(d,b.toWatch)});b.constant=c;b.toWatch=d;break;case r.ObjectExpression:c=!0;d=[];n(b.properties,function(b){U(b.value,a);c=c&&b.value.constant;b.value.constant||d.push.apply(d,b.value.toWatch)});b.constant=c;b.toWatch=d;break;case r.ThisExpression:b.constant=
!1,b.toWatch=[]}}function nd(b){if(1==b.length){b=b[0].expression;var a=b.toWatch;return 1!==a.length?a:a[0]!==b?a:u}}function od(b){return b.type===r.Identifier||b.type===r.MemberExpression}function pd(b){if(1===b.body.length&&od(b.body[0].expression))return{type:r.AssignmentExpression,left:b.body[0].expression,right:{type:r.NGValueParameter},operator:"="}}function qd(b){return 0===b.body.length||1===b.body.length&&(b.body[0].expression.type===r.Literal||b.body[0].expression.type===r.ArrayExpression||
b.body[0].expression.type===r.ObjectExpression)}function rd(b,a){this.astBuilder=b;this.$filter=a}function sd(b,a){this.astBuilder=b;this.$filter=a}function Fb(b){return"constructor"==b}function dc(b){return B(b.valueOf)?b.valueOf():Yf.call(b)}function jf(){var b=ga(),a=ga();this.$get=["$filter",function(c){function d(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=dc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function e(a,b,c,e,f){var g=e.inputs,h;if(1===g.length){var k=d,g=g[0];return a.$watch(function(a){var b=
g(a);d(b,k)||(h=e(a,u,u,[b]),k=b&&dc(b));return h},b,c,f)}for(var l=[],m=[],q=0,n=g.length;q<n;q++)l[q]=d,m[q]=null;return a.$watch(function(a){for(var b=!1,c=0,f=g.length;c<f;c++){var k=g[c](a);if(b||(b=!d(k,l[c])))m[c]=k,l[c]=k&&dc(k)}b&&(h=e(a,u,u,m));return h},b,c,f)}function f(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;B(b)&&b.apply(this,arguments);x(a)&&d.$$postDigest(function(){x(f)&&e()})},c)}function g(a,b,c,d){function e(a){var b=!0;n(a,function(a){x(a)||
(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;B(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function h(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){B(b)&&b.apply(this,arguments);e()},c)}function l(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==g&&c!==f?function(c,d,e,f){e=a(c,d,e,f);return b(e,c,d)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return x(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==
e?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=e,c.inputs=a.inputs?a.inputs:[a]);return c}var k=Fa().noUnsafeEval,m={csp:k,expensiveChecks:!1},q={csp:k,expensiveChecks:!0};return function(d,k,E){var n,w,p;switch(typeof d){case "string":p=d=d.trim();var r=E?a:b;n=r[p];n||(":"===d.charAt(0)&&":"===d.charAt(1)&&(w=!0,d=d.substring(2)),E=E?q:m,n=new ec(E),n=(new fc(n,c,E)).parse(d),n.constant?n.$$watchDelegate=h:w?n.$$watchDelegate=n.literal?g:f:n.inputs&&(n.$$watchDelegate=e),
r[p]=n);return l(n,k);case "function":return l(d,k);default:return v}}}]}function lf(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return td(function(a){b.$evalAsync(a)},a)}]}function mf(){this.$get=["$browser","$exceptionHandler",function(b,a){return td(function(a){b.defer(a)},a)}]}function td(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}
function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending;c.processScheduled=!1;c.pending=u;for(var f=0,g=e.length;f<g;++f){d=e[f][0];b=e[f][c.status];try{B(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),a(h)}}}))}function g(){this.promise=new d;this.resolve=e(this,this.resolve);this.reject=e(this,this.reject);this.notify=e(this,this.notify)}var h=G("$q",TypeError);Q(d.prototype,{then:function(a,b,c){if(y(a)&&
y(b)&&y(c))return this;var d=new g;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&f(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}});Q(g.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(h("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,
this.$$reject);try{if(D(b)||B(b))d=b&&b.then;B(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,
e,f=0,g=d.length;f<g;f++){e=d[f][0];b=d[f][3];try{e.notify(B(b)?b(c):c)}catch(h){a(h)}}})}});var l=function(a,b){var c=new g;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{B(c)&&(d=c())}catch(e){return l(e,!1)}return d&&B(d.then)?d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},m=function(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d)},q=function t(a){if(!B(a))throw h("norslvr",a);if(!(this instanceof t))return new t(a);var b=new g;
a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};q.defer=function(){return new g};q.reject=function(a){var b=new g;b.reject(a);return b.promise};q.when=m;q.resolve=m;q.all=function(a){var b=new g,c=0,d=K(a)?[]:{};n(a,function(a,e){c++;m(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return q}function vf(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||
b.webkitRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function kf(){function b(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++mb;this.$$ChildScope=null}b.prototype=a;
return b}var a=10,c=G("$rootScope"),d=null,e=null;this.digestTtl=function(b){arguments.length&&(a=b);return a};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(f,g,h,l){function k(a){a.currentScope.$$destroyed=!0}function m(){this.$id=++mb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=
null}function q(a){if(p.$$phase)throw c("inprog",p.$$phase);p.$$phase=a}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function t(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function r(){}function L(){for(;M.length;)try{M.shift()()}catch(a){g(a)}e=null}function w(){null===e&&(e=l.defer(function(){p.$apply(L)}))}m.prototype={constructor:m,$new:function(a,c){var d;c=c||this;a?(d=new m,d.$root=this.$root):(this.$$ChildScope||
(this.$$ChildScope=b(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(a||c!=this)&&d.$on("$destroy",k);return d},$watch:function(a,b,c,e){var f=h(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,c,f,a);var g=this,k=g.$$watchers,l={fn:b,last:r,get:f,exp:e||a,eq:!!c};d=null;B(b)||(l.fn=v);k||(k=g.$$watchers=[]);k.unshift(l);s(this,1);return function(){0<=bb(k,l)&&s(g,-1);d=null}},
$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});n(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=
a;var b,d,g,h;if(!y(e)){if(D(e))if(Da(e))for(f!==q&&(f=q,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==s&&(f=s={},t=0,l++);a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)e.hasOwnProperty(b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,g,k=1<b.length,l=0,m=h(a,c),q=[],s={},p=!0,t=0;return this.$watch(m,
function(){p?(p=!1,b(e,e,d)):b(e,g,d);if(k)if(D(e))if(Da(e)){g=Array(e.length);for(var a=0;a<e.length;a++)g[a]=e[a]}else for(a in g={},e)Na.call(e,a)&&(g[a]=e[a]);else g=e})},$digest:function(){var b,f,h,k,m,s,t=a,n,w=[],C,M;q("$digest");l.$$checkUrlChange();this===p&&null!==e&&(l.defer.cancel(e),L());d=null;do{s=!1;for(n=this;u.length;){try{M=u.shift(),M.scope.$eval(M.expression,M.locals)}catch(v){g(v)}d=null}a:do{if(k=n.$$watchers)for(m=k.length;m--;)try{if(b=k[m])if((f=b.get(n))!==(h=b.last)&&
!(b.eq?ka(f,h):"number"===typeof f&&"number"===typeof h&&isNaN(f)&&isNaN(h)))s=!0,d=b,b.last=b.eq?fa(f,null):f,b.fn(f,h===r?f:h,n),5>t&&(C=4-t,w[C]||(w[C]=[]),w[C].push({msg:B(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,newVal:f,oldVal:h}));else if(b===d){s=!1;break a}}catch(y){g(y)}if(!(k=n.$$watchersCount&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(k=n.$$nextSibling);)n=n.$parent}while(n=k);if((s||u.length)&&!t--)throw p.$$phase=null,c("infdig",a,w);}while(s||u.length);for(p.$$phase=
null;x.length;)try{x.shift()()}catch(z){g(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===p&&l.$$applicationDestroyed();s(this,-this.$$watchersCount);for(var b in this.$$listenerCount)t(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&
(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=v;this.$on=this.$watch=this.$watchGroup=function(){return v};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(a,b){return h(a)(this,b)},$evalAsync:function(a,b){p.$$phase||u.length||l.defer(function(){u.length&&p.$digest()});u.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){x.push(a)},
$apply:function(a){try{q("$apply");try{return this.$eval(a)}finally{p.$$phase=null}}catch(b){g(b)}finally{try{p.$digest()}catch(c){throw g(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&M.push(b);w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,t(e,1,a))}},$emit:function(a,
b){var c=[],d,e=this,f=!1,h={name:a,targetScope:e,stopPropagation:function(){f=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=cb([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(q){g(q)}else d.splice(l,1),l--,m--;if(f)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=
!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var f=cb([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,f)}catch(l){g(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var p=new m,u=p.$$asyncQueue=[],x=p.$$postDigestQueue=[],M=p.$$applyAsyncQueue=[];return p}]}function ge(){var b=
/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return x(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return x(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;f=Aa(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function Zf(b){if("self"===b)return b;if(H(b)){if(-1<b.indexOf("***"))throw Ca("iwcard",b);b=ud(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+
b+"$")}if(Oa(b))return new RegExp("^"+b.source+"$");throw Ca("imatcher");}function vd(b){var a=[];x(b)&&n(b,function(b){a.push(Zf(b))});return a}function of(){this.SCE_CONTEXTS=oa;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=vd(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=vd(b));return a};this.$get=["$injector",function(c){function d(a,b){return"self"===a?gd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=
function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw Ca("unsafe");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};h[oa.HTML]=e(g);h[oa.CSS]=e(g);h[oa.URL]=e(g);h[oa.JS]=e(g);h[oa.RESOURCE_URL]=e(h[oa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ca("icontext",a,b);if(null===b||b===
u||""===b)return b;if("string"!==typeof b)throw Ca("itype",a);return new c(b)},getTrusted:function(c,e){if(null===e||e===u||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(c===oa.RESOURCE_URL){var g=Aa(e.toString()),q,s,t=!1;q=0;for(s=b.length;q<s;q++)if(d(b[q],g)){t=!0;break}if(t)for(q=0,s=a.length;q<s;q++)if(d(a[q],g)){t=!1;break}if(t)return e;throw Ca("insecurl",e.toString());}if(c===oa.HTML)return f(e);throw Ca("unsafe");},valueOf:function(a){return a instanceof
g?a.$$unwrapTrustedValue():a}}}]}function nf(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Va)throw Ca("iequirks");var d=ia(oa);d.isEnabled=function(){return b};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=Za);d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,
f=d.getTrusted,g=d.trustAs;n(oa,function(a,b){var c=I(b);d[fb("parse_as_"+c)]=function(b){return e(a,b)};d[fb("get_trusted_"+c)]=function(b){return f(a,b)};d[fb("trust_as_"+c)]=function(b){return g(a,b)}});return d}]}function pf(){this.$get=["$window","$document",function(b,a){var c={},d=Y((/android (\d+)/.exec(I((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,m=!1;if(l){for(var q in l)if(k=
h.exec(q)){g=k[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");k=!!("transition"in l||g+"Transition"in l);m=!!("animation"in l||g+"Animation"in l);!d||k&&m||(k=H(l.webkitTransition),m=H(l.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Va)return!1;if(y(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Fa(),vendorPrefix:g,transitions:k,animations:m,android:d}}]}function rf(){this.$get=
["$templateCache","$http","$q","$sce",function(b,a,c,d){function e(f,g){e.totalPendingRequests++;H(f)&&b.get(f)||(f=d.getTrustedResourceUrl(f));var h=a.defaults&&a.defaults.transformResponse;K(h)?h=h.filter(function(a){return a!==Zb}):h===Zb&&(h=null);return a.get(f,{cache:b,transformResponse:h})["finally"](function(){e.totalPendingRequests--}).then(function(a){b.put(f,a.data);return a.data},function(a){if(!g)throw ea("tpload",f,a.status,a.statusText);return c.reject(a)})}e.totalPendingRequests=0;
return e}]}function sf(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];n(a,function(a){var d=aa.element(a).data("$binding");d&&n(d,function(d){c?(new RegExp("(^|\\s)"+ud(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var l=a.querySelectorAll("["+g[h]+"model"+(c?"=":"*=")+'"'+b+'"]');
if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function tf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){B(f)||(k=l,l=f,f=v);var m=xa.call(arguments,3),q=x(k)&&!k,s=(q?d:c).defer(),t=s.promise,n;n=a.defer(function(){try{s.resolve(f.apply(null,m))}catch(a){s.reject(a),e(a)}finally{delete g[t.$$timeoutId]}q||
b.$apply()},l);t.$$timeoutId=n;g[n]=s;return t}var g={};f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return f}]}function Aa(b){Va&&(Z.setAttribute("href",b),b=Z.href);Z.setAttribute("href",b);return{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port,pathname:"/"===
Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname}}function gd(b){b=H(b)?Aa(b):b;return b.protocol===wd.protocol&&b.host===wd.host}function uf(){this.$get=qa(N)}function xd(b){function a(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=b[0]||{},d={},e="";return function(){var b,g,h,l,k;b=c.cookie||"";if(b!==e)for(e=b,b=e.split("; "),d={},h=0;h<b.length;h++)g=b[h],l=g.indexOf("="),0<l&&(k=a(g.substring(0,l)),d[k]===u&&(d[k]=a(g.substring(l+1))));return d}}function yf(){this.$get=xd}function Jc(b){function a(c,
d){if(D(c)){var e={};n(c,function(b,c){e[c]=a(c,b)});return e}return b.factory(c+"Filter",d)}this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];a("currency",yd);a("date",zd);a("filter",$f);a("json",ag);a("limitTo",bg);a("lowercase",cg);a("number",Ad);a("orderBy",Bd);a("uppercase",dg)}function $f(){return function(b,a,c){if(!Da(b)){if(null==b)return b;throw G("filter")("notarray",b);}var d;switch(gc(a)){case "function":break;case "boolean":case "null":case "number":case "string":d=
!0;case "object":a=eg(a,c,d);break;default:return b}return Array.prototype.filter.call(b,a)}}function eg(b,a,c){var d=D(b)&&"$"in b;!0===a?a=ka:B(a)||(a=function(a,b){if(y(a))return!1;if(null===a||null===b)return a===b;if(D(b)||D(a)&&!pc(a))return!1;a=I(""+a);b=I(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!D(e)?La(e,b.$,a,!1):La(e,b,a,c)}}function La(b,a,c,d,e){var f=gc(b),g=gc(a);if("string"===g&&"!"===a.charAt(0))return!La(b,a.substring(1),c,d);if(K(b))return b.some(function(b){return La(b,
a,c,d)});switch(f){case "object":var h;if(d){for(h in b)if("$"!==h.charAt(0)&&La(b[h],a,c,!0))return!0;return e?!1:La(b,a,c,!1)}if("object"===g){for(h in a)if(e=a[h],!B(e)&&!y(e)&&(f="$"===h,!La(f?b:b[h],e,c,f,f)))return!1;return!0}return c(b,a);case "function":return!1;default:return c(b,a)}}function gc(b){return null===b?"null":typeof b}function yd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){y(d)&&(d=a.CURRENCY_SYM);y(e)&&(e=a.PATTERNS[1].maxFrac);return null==b?b:Cd(b,a.PATTERNS[1],a.GROUP_SEP,
a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function Ad(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:Cd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Cd(b,a,c,d,e){if(D(b))return"";var f=0>b;b=Math.abs(b);var g=Infinity===b;if(!g&&!isFinite(b))return"";var h=b+"",l="",k=!1,m=[];g&&(l="\u221e");if(!g&&-1!==h.indexOf("e")){var q=h.match(/([\d\.]+)e(-?)(\d+)/);q&&"-"==q[2]&&q[3]>e+1?b=0:(l=h,k=!0)}if(g||k)0<e&&1>b&&(l=b.toFixed(e),b=parseFloat(l));else{g=(h.split(Dd)[1]||"").length;
y(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);var g=(""+b).split(Dd),h=g[0],g=g[1]||"",q=0,s=a.lgSize,t=a.gSize;if(h.length>=s+t)for(q=h.length-s,k=0;k<q;k++)0===(q-k)%t&&0!==k&&(l+=c),l+=h.charAt(k);for(k=q;k<h.length;k++)0===(h.length-k)%s&&0!==k&&(l+=c),l+=h.charAt(k);for(;g.length<e;)g+="0";e&&"0"!==e&&(l+=d+g.substr(0,e))}0===b&&(f=!1);m.push(f?a.negPre:a.posPre,l,f?a.negSuf:a.posSuf);return m.join("")}function Gb(b,a,c){var d="";
0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Gb(e,a,d)}}function Hb(b,a){return function(c,d){var e=c["get"+b](),f=rb(a?"SHORT"+b:b);return d[f][e]}}function Ed(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function Fd(b){return function(a){var c=Ed(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-
+c;a=1+Math.round(a/6048E5);return Gb(a,b)}}function hc(b,a){return 0>=b.getFullYear()?a.ERAS[0]:a.ERAS[1]}function zd(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Y(b[9]+b[10]),g=Y(b[9]+b[11]));h.call(a,Y(b[1]),Y(b[2])-1,Y(b[3]));f=Y(b[4]||0)-f;g=Y(b[5]||0)-g;h=Y(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));l.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,e,f){var g="",h=[],l,k;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;H(c)&&(c=fg.test(c)?Y(c):a(c));X(c)&&(c=new Date(c));if(!ca(c)||!isFinite(c.getTime()))return c;for(;e;)(k=gg.exec(e))?(h=cb(h,k,1),e=h.pop()):(h.push(e),e=null);var m=c.getTimezoneOffset();f&&(m=vc(f,c.getTimezoneOffset()),c=Ob(c,f,!0));n(h,function(a){l=hg[a];g+=l?l(c,b.DATETIME_FORMATS,m):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function ag(){return function(b,a){y(a)&&(a=2);return db(b,a)}}function bg(){return function(b,
a,c){a=Infinity===Math.abs(Number(a))?Number(a):Y(a);if(isNaN(a))return b;X(b)&&(b=b.toString());if(!K(b)&&!H(b))return b;c=!c||isNaN(c)?0:Y(c);c=0>c&&c>=-b.length?b.length+c:c;return 0<=a?b.slice(c,c+a):0===c?b.slice(a,b.length):b.slice(Math.max(0,c+a),c)}}function Bd(b){function a(a,c){c=c?-1:1;return a.map(function(a){var d=1,h=Za;if(B(a))h=a;else if(H(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))d="-"==a.charAt(0)?-1:1,a=a.substring(1);if(""!==a&&(h=b(a),h.constant))var l=h(),h=function(a){return a[l]}}return{get:h,
descending:d*c}})}function c(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}return function(b,e,f){if(!Da(b))return b;K(e)||(e=[e]);0===e.length&&(e=["+"]);var g=a(e,f);g.push({get:function(){return{}},descending:f?-1:1});b=Array.prototype.map.call(b,function(a,b){return{value:a,predicateValues:g.map(function(d){var e=d.get(a);d=typeof e;if(null===e)d="string",e="null";else if("string"===d)e=e.toLowerCase();else if("object"===d)a:{if("function"===typeof e.valueOf&&
(e=e.valueOf(),c(e)))break a;if(pc(e)&&(e=e.toString(),c(e)))break a;e=b}return{value:e,type:d}})}});b.sort(function(a,b){for(var c=0,d=0,e=g.length;d<e;++d){var c=a.predicateValues[d],f=b.predicateValues[d],t=0;c.type===f.type?c.value!==f.value&&(t=c.value<f.value?-1:1):t=c.type<f.type?-1:1;if(c=t*g[d].descending)break}return c});return b=b.map(function(a){return a.value})}}function Ma(b){B(b)&&(b={link:b});b.restrict=b.restrict||"AC";return qa(b)}function Gd(b,a,c,d,e){var f=this,g=[],h=f.$$parentForm=
b.parent().controller("form")||Ib;f.$error={};f.$$success={};f.$pending=u;f.$name=e(a.name||a.ngForm||"")(c);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;h.$addControl(f);f.$rollbackViewValue=function(){n(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){n(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ta(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a)};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=
b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];n(f.$pending,function(b,c){f.$setValidity(c,null,a)});n(f.$error,function(b,c){f.$setValidity(c,null,a)});n(f.$$success,function(b,c){f.$setValidity(c,null,a)});bb(g,a)};Hd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(bb(d,c),0===d.length&&delete a[b])},parentForm:h,$animate:d});f.$setDirty=function(){d.removeClass(b,Xa);d.addClass(b,Jb);
f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=function(){d.setClass(b,Xa,Jb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;n(g,function(a){a.$setPristine()})};f.$setUntouched=function(){n(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){d.addClass(b,"ng-submitted");f.$submitted=!0;h.$setSubmitted()}}function ic(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString()})}function ib(b,a,c,d,e,f){var g=I(a[0].type);if(!e.android){var h=!1;a.on("compositionstart",
function(a){h=!0});a.on("compositionend",function(){h=!1;l()})}var l=function(b){k&&(f.defer.cancel(k),k=null);if(!h){var e=a.val();b=b&&b.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=T(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))a.on("paste cut",
m)}a.on("change",l);d.$render=function(){var b=d.$isEmpty(d.$viewValue)?"":d.$viewValue;a.val()!==b&&a.val(b)}}function Kb(b,a){return function(c,d){var e,f;if(ca(c))return c;if(H(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(ig.test(c))return new Date(c);b.lastIndex=0;if(e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,
mm:0,ss:0,sss:0},n(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function jb(b,a,c,d){return function(e,f,g,h,l,k,m){function q(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return x(a)?ca(a)?a:c(a):u}Id(e,f,g,h);ib(e,f,g,h,l,k);var t=h&&h.$options&&h.$options.timezone,n;h.$$parserName=b;h.$parsers.push(function(b){return h.$isEmpty(b)?null:a.test(b)?(b=c(b,n),t&&(b=Ob(b,t)),b):u});h.$formatters.push(function(a){if(a&&
!ca(a))throw kb("datefmt",a);if(q(a))return(n=a)&&t&&(n=Ob(n,t,!0)),m("date")(a,d,t);n=null;return""});if(x(g.min)||g.ngMin){var r;h.$validators.min=function(a){return!q(a)||y(r)||c(a)>=r};g.$observe("min",function(a){r=s(a);h.$validate()})}if(x(g.max)||g.ngMax){var w;h.$validators.max=function(a){return!q(a)||y(w)||c(a)<=w};g.$observe("max",function(a){w=s(a);h.$validate()})}}}function Id(b,a,c,d){(d.$$hasNativeValidators=D(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};
return c.badInput&&!c.typeMismatch?u:b})}function Jd(b,a,c,d,e){if(x(d)){b=b(d);if(!b.constant)throw kb("constexpr",c,d);return b(a)}return e}function jc(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){var b=[];return K(a)?(n(a,function(a){b=b.concat(e(a))}),b):H(a)?a.split(" "):D(a)?(n(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",
link:function(f,g,h){function l(a,b){var c=g.data("$classCounts")||ga(),d=[];n(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var n=l(k,1);h.$addClass(n)}else if(!ka(b,m)){var r=e(m),n=d(k,r),k=d(r,k),n=l(n,1),k=l(k,-1);n&&n.length&&c.addClass(g,n);k&&k.length&&c.removeClass(g,k)}}m=ia(b)}var m;f.$watch(h[b],k,!0);h.$observe("class",function(a){k(f.$eval(h[b]))});"ngClass"!==
b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var k=e(f.$eval(h[b]));g===a?(g=l(k,1),h.$addClass(g)):(g=l(k,-1),h.$removeClass(g))}})}}}]}function Hd(b){function a(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+zc(b,"-"):"";a(lb+b,!0===c);a(Kd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},g=b.set,h=b.unset,l=b.parentForm,k=b.$animate;f[Kd]=!(f[lb]=e.hasClass(lb));d.$setValidity=function(b,e,f){e===u?(d.$pending||(d.$pending={}),g(d.$pending,
b,f)):(d.$pending&&h(d.$pending,b,f),Ld(d.$pending)&&(d.$pending=u));ab(e)?e?(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),h(d.$$success,b,f));d.$pending?(a(Md,!0),d.$valid=d.$invalid=u,c("",null)):(a(Md,!1),d.$valid=Ld(d.$error),d.$invalid=!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[b]?u:d.$error[b]?!1:d.$$success[b]?!0:null;c(b,e);l.$setValidity(b,e,d)}}function Ld(b){if(b)for(var a in b)if(b.hasOwnProperty(a))return!1;return!0}var jg=/^\/(.+)\/([a-z]*)$/,
I=function(b){return H(b)?b.toLowerCase():b},Na=Object.prototype.hasOwnProperty,rb=function(b){return H(b)?b.toUpperCase():b},Va,z,la,xa=[].slice,Mf=[].splice,kg=[].push,sa=Object.prototype.toString,qc=Object.getPrototypeOf,Ea=G("ng"),aa=N.angular||(N.angular={}),Rb,mb=0;Va=W.documentMode;v.$inject=[];Za.$inject=[];var K=Array.isArray,sc=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,T=function(b){return H(b)?b.trim():b},ud=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08")},Fa=function(){if(!x(Fa.rules)){var b=W.querySelector("[ng-csp]")||W.querySelector("[data-ng-csp]");if(b){var a=b.getAttribute("ng-csp")||b.getAttribute("data-ng-csp");Fa.rules={noUnsafeEval:!a||-1!==a.indexOf("no-unsafe-eval"),noInlineStyle:!a||-1!==a.indexOf("no-inline-style")}}else{b=Fa;try{new Function(""),a=!1}catch(c){a=!0}b.rules={noUnsafeEval:a,noInlineStyle:!1}}}return Fa.rules},ob=function(){if(x(ob.name_))return ob.name_;var b,a,c=Qa.length,d,e;for(a=0;a<
c;++a)if(d=Qa[a],b=W.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return ob.name_=e},Qa=["ng-","data-ng-","ng:","x-ng-"],be=/[A-Z]/g,Ac=!1,Qb,pa=1,Pa=3,fe={full:"1.4.5",major:1,minor:4,dot:5,codeName:"permanent-internship"};R.expando="ng339";var gb=R.cache={},Ef=1;R._data=function(b){return this.cache[b[this.expando]]||{}};var zf=/([\:\-\_]+(.))/g,Af=/^moz([A-Z])/,lg={mouseleave:"mouseout",mouseenter:"mouseover"},Tb=G("jqLite"),Df=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Sb=/<|&#?\w+;/,
Bf=/<([\w:]+)/,Cf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,na={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};na.optgroup=na.option;na.tbody=na.tfoot=na.colgroup=na.caption=na.thead;na.th=na.td;var Ra=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=
!1;"complete"===W.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),R(N).on("load",a))},toString:function(){var b=[];n(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?z(this[b]):z(this[this.length+b])},length:0,push:kg,sort:[].sort,splice:[].splice},Ab={};n("multiple selected checked disabled readOnly required open".split(" "),function(b){Ab[I(b)]=b});var Rc={};n("input select option textarea button form details".split(" "),function(b){Rc[b]=!0});var Sc=
{ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};n({data:Vb,removeData:ub,hasData:function(b){for(var a in gb[b.ng339])return!0;return!1}},function(b,a){R[a]=b});n({data:Vb,inheritedData:zb,scope:function(b){return z.data(b,"$scope")||zb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return z.data(b,"$isolateScope")||z.data(b,"$isolateScopeNoTemplate")},controller:Oc,injector:function(b){return zb(b,"$injector")},removeAttr:function(b,
a){b.removeAttribute(a)},hasClass:wb,css:function(b,a,c){a=fb(a);if(x(c))b.style[a]=c;else return b.style[a]},attr:function(b,a,c){var d=b.nodeType;if(d!==Pa&&2!==d&&8!==d)if(d=I(a),Ab[d])if(x(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||v).specified?d:u;else if(x(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?u:b},prop:function(b,a,c){if(x(c))b[a]=c;else return b[a]},text:function(){function b(a,
b){if(y(b)){var d=a.nodeType;return d===pa||d===Pa?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(y(a)){if(b.multiple&&"select"===ta(b)){var c=[];n(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(y(a))return b.innerHTML;tb(b,!0);b.innerHTML=a},empty:Pc},function(b,a){R.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==Pc&&(2==b.length&&b!==wb&&b!==Oc?a:d)===u){if(D(a)){for(e=0;e<
g;e++)if(b===Vb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===u?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});n({removeData:ub,on:function a(c,d,e,f){if(x(f))throw Tb("onargs");if(Kc(c)){var g=vb(c,!0);f=g.events;var h=g.handle;h||(h=g.handle=Hf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],l=g.length;l--;){d=g[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,lg[d],function(a){var c=
a.relatedTarget;c&&(c===this||this.contains(c))||h(a,d)}):"$destroy"!==d&&c.addEventListener(d,h,!1),k=f[d]);k.push(e)}}},off:Nc,one:function(a,c,d){a=z(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;tb(a);n(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];n(a.childNodes,function(a){a.nodeType===pa&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||
[]},append:function(a,c){var d=a.nodeType;if(d===pa||11===d){c=new R(c);for(var d=0,e=c.length;d<e;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===pa){var d=a.firstChild;n(new R(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=z(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:Wb,detach:function(a){Wb(a,!0)},after:function(a,c){var d=a,e=a.parentNode;c=new R(c);for(var f=0,g=c.length;f<g;f++){var h=c[f];e.insertBefore(h,d.nextSibling);
d=h}},addClass:yb,removeClass:xb,toggleClass:function(a,c,d){c&&n(c.split(" "),function(c){var f=d;y(f)&&(f=!wb(a,c));(f?yb:xb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Ub,triggerHandler:function(a,c,d){var e,f,g=c.type||c,h=vb(a);if(h=(h=h&&h.events)&&h[g])e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===
this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:v,type:g,target:a},c.type&&(e=Q(e,c)),c=ia(h),f=d?[e].concat(d):[e],n(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)})}},function(a,c){R.prototype[c]=function(c,e,f){for(var g,h=0,l=this.length;h<l;h++)y(g)?(g=a(this[h],c,e,f),x(g)&&(g=z(g))):Mc(g,a(this[h],c,e,f));return x(g)?g:this};R.prototype.bind=
R.prototype.on;R.prototype.unbind=R.prototype.off});Ua.prototype={put:function(a,c){this[Ga(a,this.nextUid)]=c},get:function(a){return this[Ga(a,this.nextUid)]},remove:function(a){var c=this[a=Ga(a,this.nextUid)];delete this[a];return c}};var xf=[function(){this.$get=[function(){return Ua}]}],Uc=/^[^\(]*\(\s*([^\)]*)\)/m,mg=/,/,ng=/^\s*(_?)(\S+?)\1\s*$/,Tc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ha=G("$injector");eb.$$annotate=function(a,c,d){var e;if("function"===typeof a){if(!(e=a.$inject)){e=[];if(a.length){if(c)throw H(d)&&
d||(d=a.name||If(a)),Ha("strictdi",d);c=a.toString().replace(Tc,"");c=c.match(Uc);n(c[1].split(mg),function(a){a.replace(ng,function(a,c,d){e.push(d)})})}a.$inject=e}}else K(a)?(c=a.length-1,Sa(a[c],"fn"),e=a.slice(0,c)):Sa(a,"fn",!0);return e};var Nd=G("$animate"),Ue=function(){this.$get=["$q","$$rAF",function(a,c){function d(){}d.all=v;d.chain=v;d.prototype={end:v,cancel:v,resume:v,pause:v,complete:v,then:function(d,f){return a(function(a){c(function(){a()})}).then(d,f)}};return d}]},Te=function(){var a=
new Ua,c=[];this.$get=["$$AnimateRunner","$rootScope",function(d,e){function f(d,f,l){var k=a.get(d);k||(a.put(d,k={}),c.push(d));d=function(a,c){var d=!1;a&&(a=H(a)?a.split(" "):K(a)?a:[],n(a,function(a){a&&(d=!0,k[a]=c)}));return d};f=d(f,!0);l=d(l,!1);!f&&!l||1<c.length||e.$$postDigest(function(){n(c,function(c){var d=a.get(c);if(d){var e=Jf(c.attr("class")),f="",g="";n(d,function(a,c){a!==!!e[c]&&(a?f+=(f.length?" ":"")+c:g+=(g.length?" ":"")+c)});n(c,function(a){f&&yb(a,f);g&&xb(a,g)});a.remove(c)}});
c.length=0})}return{enabled:v,on:v,off:v,pin:v,push:function(a,c,e,k){k&&k();e=e||{};e.from&&a.css(e.from);e.to&&a.css(e.to);(e.addClass||e.removeClass)&&f(a,e.addClass,e.removeClass);return new d}}}]},Re=["$provide",function(a){var c=this;this.$$registeredAnimations=Object.create(null);this.register=function(d,e){if(d&&"."!==d.charAt(0))throw Nd("notcsel",d);var f=d+"-animation";c.$$registeredAnimations[d.substr(1)]=f;a.factory(f,e)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=
a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Nd("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function c(a,d,e){if(e){var l;a:{for(l=0;l<e.length;l++){var k=e[l];if(1===k.nodeType){l=k;break a}}l=void 0}!l||l.parentNode||l.previousElementSibling||(e=null)}e?e.after(a):d.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(f,g,h,l){g=
g&&z(g);h=h&&z(h);g=g||h.parent();c(f,g,h);return a.push(f,"enter",Ia(l))},move:function(f,g,h,l){g=g&&z(g);h=h&&z(h);g=g||h.parent();c(f,g,h);return a.push(f,"move",Ia(l))},leave:function(c,e){return a.push(c,"leave",Ia(e),function(){c.remove()})},addClass:function(c,e,h){h=Ia(h);h.addClass=hb(h.addclass,e);return a.push(c,"addClass",h)},removeClass:function(c,e,h){h=Ia(h);h.removeClass=hb(h.removeClass,e);return a.push(c,"removeClass",h)},setClass:function(c,e,h,l){l=Ia(l);l.addClass=hb(l.addClass,
e);l.removeClass=hb(l.removeClass,h);return a.push(c,"setClass",l)},animate:function(c,e,h,l,k){k=Ia(k);k.from=k.from?Q(k.from,e):e;k.to=k.to?Q(k.to,h):h;k.tempClasses=hb(k.tempClasses,l||"ng-inline-animate");return a.push(c,"animate",k)}}}]}],Se=function(){this.$get=["$$rAF","$q",function(a,c){var d=function(){};d.prototype={done:function(a){this.defer&&this.defer[!0===a?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){this.defer||(this.defer=
c.defer());return this.defer.promise},then:function(a,c){return this.getPromise().then(a,c)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)}};return function(c,f){function g(){a(function(){f.addClass&&(c.addClass(f.addClass),f.addClass=null);f.removeClass&&(c.removeClass(f.removeClass),f.removeClass=null);f.to&&(c.css(f.to),f.to=null);h||l.done();h=!0});return l}f.from&&(c.css(f.from),f.from=null);var h,l=new d;return{start:g,
end:g}}}]},ea=G("$compile");Cc.$inject=["$provide","$$sanitizeUriProvider"];var Xc=/^((?:x|data)[\:\-_])/i,Nf=G("$controller"),Vc=/^(\S+)(\s+as\s+(\w+))?$/,$e=function(){this.$get=["$document",function(a){return function(c){c?!c.nodeType&&c instanceof z&&(c=c[0]):c=a[0].body;return c.offsetWidth+1}}]},bd="application/json",$b={"Content-Type":bd+";charset=utf-8"},Pf=/^\[|^\{(?!\{)/,Qf={"[":/]$/,"{":/}$/},Of=/^\)\]\}',?\n/,og=G("$http"),fd=function(a){return function(){throw og("legacy",a);}},Ka=aa.$interpolateMinErr=
G("$interpolate");Ka.throwNoconcat=function(a){throw Ka("noconcat",a);};Ka.interr=function(a,c){return Ka("interr",a,c.toString())};var pg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Tf={http:80,https:443,ftp:21},Db=G("$location"),qg={$$html5:!1,$$replace:!1,absUrl:Eb("$$absUrl"),url:function(a){if(y(a))return this.$$url;var c=pg.exec(a);(c[1]||""===a)&&this.path(decodeURIComponent(c[1]));(c[2]||c[1]||""===a)&&this.search(c[3]||"");this.hash(c[5]||"");return this},protocol:Eb("$$protocol"),host:Eb("$$host"),
port:Eb("$$port"),path:kd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(H(a)||X(a))a=a.toString(),this.$$search=xc(a);else if(D(a))a=fa(a,{}),n(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Db("isrcharg");break;default:y(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:kd("$$hash",function(a){return null!==a?a.toString():
""}),replace:function(){this.$$replace=!0;return this}};n([jd,cc,bc],function(a){a.prototype=Object.create(qg);a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==bc||!this.$$html5)throw Db("nostate");this.$$state=y(c)?null:c;return this}});var da=G("$parse"),Uf=Function.prototype.call,Vf=Function.prototype.apply,Wf=Function.prototype.bind,Lb=ga();n("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Lb[a]=!0});var rg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v",
"'":"'",'"':'"'},ec=function(a){this.options=a};ec.prototype={constructor:ec,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+
this.peek(),d=c+this.peek(2),e=Lb[c],f=Lb[d];Lb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===
a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=x(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw da("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=I(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&
this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var c=this.text.charAt(this.index);if(!this.isIdent(c)&&!this.isNumber(c))break;this.index++}this.tokens.push({index:a,
text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=rg[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,constant:!0,
value:d});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var r=function(a,c){this.lexer=a;this.options=c};r.Program="Program";r.ExpressionStatement="ExpressionStatement";r.AssignmentExpression="AssignmentExpression";r.ConditionalExpression="ConditionalExpression";r.LogicalExpression="LogicalExpression";r.BinaryExpression="BinaryExpression";r.UnaryExpression="UnaryExpression";r.CallExpression="CallExpression";r.MemberExpression="MemberExpression";r.Identifier="Identifier";r.Literal=
"Literal";r.ArrayExpression="ArrayExpression";r.Property="Property";r.ObjectExpression="ObjectExpression";r.ThisExpression="ThisExpression";r.NGValueParameter="NGValueParameter";r.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:r.Program,
body:a}},expressionStatement:function(){return{type:r.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:r.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),c,d;return this.expect("?")&&(c=this.expression(),this.consume(":"))?
(d=this.expression(),{type:r.ConditionalExpression,test:a,alternate:c,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:r.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:r.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),c;c=this.expect("==","!=","===","!==");)a={type:r.BinaryExpression,
operator:c.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),c;c=this.expect("<",">","<=",">=");)a={type:r.BinaryExpression,operator:c.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a={type:r.BinaryExpression,operator:c.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a={type:r.BinaryExpression,operator:c.text,
left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:r.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=fa(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():
this.throwError("not a primary expression",this.peek());for(var c;c=this.expect("(","[",".");)"("===c.text?(a={type:r.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===c.text?(a={type:r.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===c.text?a={type:r.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var c={type:r.CallExpression,callee:this.identifier(),
arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:r.Identifier,name:a.text}},constant:function(){return{type:r.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;
a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:r.ArrayExpression,elements:a}},object:function(){var a=[],c;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;c={type:r.Property,kind:"init"};this.peek().constant?c.key=this.constant():this.peek().identifier?c.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");c.value=this.expression();a.push(c)}while(this.expect(","))}this.consume("}");return{type:r.ObjectExpression,properties:a}},
throwError:function(a,c){throw da("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},consume:function(a){if(0===this.tokens.length)throw da("ueoe",this.text);var c=this.expect(a);c||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return c},peekToken:function(){if(0===this.tokens.length)throw da("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];
var g=a.text;if(g===c||g===d||g===e||g===f||!(c||d||e||f))return a}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},constants:{"true":{type:r.Literal,value:!0},"false":{type:r.Literal,value:!1},"null":{type:r.Literal,value:null},undefined:{type:r.Literal,value:u},"this":{type:r.ThisExpression}}};rd.prototype={compile:function(a,c){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:c,fn:{vars:[],body:[],own:{}},assign:{vars:[],
body:[],own:{}},inputs:[]};U(e,d.$filter);var f="",g;this.stage="assign";if(g=pd(e))this.state.computing="assign",f=this.nextId(),this.recurse(g,f),f="fn.assign="+this.generateFunction("assign","s,v,l");g=nd(e.body);d.stage="inputs";n(g,function(a,c){var e="fn"+c;d.state[e]={vars:[],body:[],own:{}};d.state.computing=e;var f=d.nextId();d.recurse(a,f);d.return_(f);d.state.inputs.push(e);a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(e);f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+
"var fn="+this.generateFunction("fn","s,l,a,i")+f+this.watchFns()+"return fn;";f=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",f))(this.$filter,Wa,Ba,ld,Xf,md,a);this.state=this.stage=u;f.literal=qd(e);f.constant=e.constant;return f},USE:"use",STRICT:"strict",watchFns:function(){var a=[],c=this.state.inputs,d=this;n(c,function(c){a.push("var "+c+"="+d.generateFunction(c,"s"))});c.length&&a.push("fn.inputs=["+c.join(",")+"];");return a.join("")},
generateFunction:function(a,c){return"function("+c+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],c=this;n(this.state.filters,function(d,e){a.push(d+"=$filter("+c.escape(e)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,c,d,e,f,g){var h,l,k=this,m,q;e=e||v;if(!g&&x(a.watchId))c=c||this.nextId(),this.if_("i",
this.lazyAssign(c,this.computedMember("i",a.watchId)),this.lazyRecurse(a,c,d,e,f,!0));else switch(a.type){case r.Program:n(a.body,function(c,d){k.recurse(c.expression,u,u,function(a){l=a});d!==a.body.length-1?k.current().body.push(l,";"):k.return_(l)});break;case r.Literal:q=this.escape(a.value);this.assign(c,q);e(q);break;case r.UnaryExpression:this.recurse(a.argument,u,u,function(a){l=a});q=a.operator+"("+this.ifDefined(l,0)+")";this.assign(c,q);e(q);break;case r.BinaryExpression:this.recurse(a.left,
u,u,function(a){h=a});this.recurse(a.right,u,u,function(a){l=a});q="+"===a.operator?this.plus(h,l):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(l,0):"("+h+")"+a.operator+"("+l+")";this.assign(c,q);e(q);break;case r.LogicalExpression:c=c||this.nextId();k.recurse(a.left,c);k.if_("&&"===a.operator?c:k.not(c),k.lazyRecurse(a.right,c));e(c);break;case r.ConditionalExpression:c=c||this.nextId();k.recurse(a.test,c);k.if_(c,k.lazyRecurse(a.alternate,c),k.lazyRecurse(a.consequent,c));e(c);
break;case r.Identifier:c=c||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);Wa(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){f&&1!==f&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(c,k.nonComputedMember("s",a.name))})},c&&k.lazyAssign(c,k.nonComputedMember("l",
a.name)));(k.state.expensiveChecks||Fb(a.name))&&k.addEnsureSafeObject(c);e(c);break;case r.MemberExpression:h=d&&(d.context=this.nextId())||this.nextId();c=c||this.nextId();k.recurse(a.object,h,u,function(){k.if_(k.notNull(h),function(){if(a.computed)l=k.nextId(),k.recurse(a.property,l),k.addEnsureSafeMemberName(l),f&&1!==f&&k.if_(k.not(k.computedMember(h,l)),k.lazyAssign(k.computedMember(h,l),"{}")),q=k.ensureSafeObject(k.computedMember(h,l)),k.assign(c,q),d&&(d.computed=!0,d.name=l);else{Wa(a.property.name);
f&&1!==f&&k.if_(k.not(k.nonComputedMember(h,a.property.name)),k.lazyAssign(k.nonComputedMember(h,a.property.name),"{}"));q=k.nonComputedMember(h,a.property.name);if(k.state.expensiveChecks||Fb(a.property.name))q=k.ensureSafeObject(q);k.assign(c,q);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(c,"undefined")});e(c)},!!f);break;case r.CallExpression:c=c||this.nextId();a.filter?(l=k.filter(a.callee.name),m=[],n(a.arguments,function(a){var c=k.nextId();k.recurse(a,c);m.push(c)}),q=l+
"("+m.join(",")+")",k.assign(c,q),e(c)):(l=k.nextId(),h={},m=[],k.recurse(a.callee,l,h,function(){k.if_(k.notNull(l),function(){k.addEnsureSafeFunction(l);n(a.arguments,function(a){k.recurse(a,k.nextId(),u,function(a){m.push(k.ensureSafeObject(a))})});h.name?(k.state.expensiveChecks||k.addEnsureSafeObject(h.context),q=k.member(h.context,h.name,h.computed)+"("+m.join(",")+")"):q=l+"("+m.join(",")+")";q=k.ensureSafeObject(q);k.assign(c,q)},function(){k.assign(c,"undefined")});e(c)}));break;case r.AssignmentExpression:l=
this.nextId();h={};if(!od(a.left))throw da("lval");this.recurse(a.left,u,h,function(){k.if_(k.notNull(h.context),function(){k.recurse(a.right,l);k.addEnsureSafeObject(k.member(h.context,h.name,h.computed));q=k.member(h.context,h.name,h.computed)+a.operator+l;k.assign(c,q);e(c||q)})},1);break;case r.ArrayExpression:m=[];n(a.elements,function(a){k.recurse(a,k.nextId(),u,function(a){m.push(a)})});q="["+m.join(",")+"]";this.assign(c,q);e(q);break;case r.ObjectExpression:m=[];n(a.properties,function(a){k.recurse(a.value,
k.nextId(),u,function(c){m.push(k.escape(a.key.type===r.Identifier?a.key.name:""+a.key.value)+":"+c)})});q="{"+m.join(",")+"}";this.assign(c,q);e(q);break;case r.ThisExpression:this.assign(c,"s");e("s");break;case r.NGValueParameter:this.assign(c,"v"),e("v")}},getHasOwnProperty:function(a,c){var d=a+"."+c,e=this.current().own;e.hasOwnProperty(d)||(e[d]=this.nextId(!1,a+"&&("+this.escape(c)+" in "+a+")"));return e[d]},assign:function(a,c){if(a)return this.current().body.push(a,"=",c,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||
(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,c){return"ifDefined("+a+","+this.escape(c)+")"},plus:function(a,c){return"plus("+a+","+c+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,c,d){if(!0===a)c();else{var e=this.current().body;e.push("if(",a,"){");c();e.push("}");d&&(e.push("else{"),d(),e.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,c){return a+
"."+c},computedMember:function(a,c){return a+"["+c+"]"},member:function(a,c,d){return d?this.computedMember(a,c):this.nonComputedMember(a,c)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+
a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},lazyRecurse:function(a,c,d,e,f,g){var h=this;return function(){h.recurse(a,c,d,e,f,g)}},lazyAssign:function(a,c){var d=this;return function(){d.assign(a,c)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(H(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(X(a))return a.toString();if(!0===a)return"true";
if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw da("esc");},nextId:function(a,c){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(c?"="+c:""));return d},current:function(){return this.state[this.state.computing]}};sd.prototype={compile:function(a,c){var d=this,e=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=c;U(e,d.$filter);var f,g;if(f=pd(e))g=this.recurse(f);f=nd(e.body);var h;f&&(h=[],n(f,function(a,c){var e=d.recurse(a);
a.input=e;h.push(e);a.watchId=c}));var l=[];n(e.body,function(a){l.push(d.recurse(a.expression))});f=0===e.body.length?function(){}:1===e.body.length?l[0]:function(a,c){var d;n(l,function(e){d=e(a,c)});return d};g&&(f.assign=function(a,c,d){return g(a,d,c)});h&&(f.inputs=h);f.literal=qd(e);f.constant=e.constant;return f},recurse:function(a,c,d){var e,f,g=this,h;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case r.Literal:return this.value(a.value,c);case r.UnaryExpression:return f=
this.recurse(a.argument),this["unary"+a.operator](f,c);case r.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,c);case r.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,c);case r.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),c);case r.Identifier:return Wa(a.name,g.expression),g.identifier(a.name,g.expensiveChecks||Fb(a.name),
c,d,g.expression);case r.MemberExpression:return e=this.recurse(a.object,!1,!!d),a.computed||(Wa(a.property.name,g.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,c,d,g.expression):this.nonComputedMember(e,f,g.expensiveChecks,c,d,g.expression);case r.CallExpression:return h=[],n(a.arguments,function(a){h.push(g.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,d,e,g){for(var n=
[],t=0;t<h.length;++t)n.push(h[t](a,d,e,g));a=f.apply(u,n,g);return c?{context:u,name:u,value:a}:a}:function(a,d,e,q){var n=f(a,d,e,q),t;if(null!=n.value){Ba(n.context,g.expression);ld(n.value,g.expression);t=[];for(var r=0;r<h.length;++r)t.push(Ba(h[r](a,d,e,q),g.expression));t=Ba(n.value.apply(n.context,t),g.expression)}return c?{value:t}:t};case r.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,d,h,q){var n=e(a,d,h,q);a=f(a,d,h,q);Ba(n.value,g.expression);
n.context[n.name]=a;return c?{value:a}:a};case r.ArrayExpression:return h=[],n(a.elements,function(a){h.push(g.recurse(a))}),function(a,d,e,f){for(var g=[],n=0;n<h.length;++n)g.push(h[n](a,d,e,f));return c?{value:g}:g};case r.ObjectExpression:return h=[],n(a.properties,function(a){h.push({key:a.key.type===r.Identifier?a.key.name:""+a.key.value,value:g.recurse(a.value)})}),function(a,d,e,f){for(var g={},n=0;n<h.length;++n)g[h[n].key]=h[n].value(a,d,e,f);return c?{value:g}:g};case r.ThisExpression:return function(a){return c?
{value:a}:a};case r.NGValueParameter:return function(a,d,e,f){return c?{value:e}:e}}},"unary+":function(a,c){return function(d,e,f,g){d=a(d,e,f,g);d=x(d)?+d:0;return c?{value:d}:d}},"unary-":function(a,c){return function(d,e,f,g){d=a(d,e,f,g);d=x(d)?-d:0;return c?{value:d}:d}},"unary!":function(a,c){return function(d,e,f,g){d=!a(d,e,f,g);return c?{value:d}:d}},"binary+":function(a,c,d){return function(e,f,g,h){var l=a(e,f,g,h);e=c(e,f,g,h);l=md(l,e);return d?{value:l}:l}},"binary-":function(a,c,d){return function(e,
f,g,h){var l=a(e,f,g,h);e=c(e,f,g,h);l=(x(l)?l:0)-(x(e)?e:0);return d?{value:l}:l}},"binary*":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)*c(e,f,g,h);return d?{value:e}:e}},"binary/":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)/c(e,f,g,h);return d?{value:e}:e}},"binary%":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)%c(e,f,g,h);return d?{value:e}:e}},"binary===":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)===c(e,f,g,h);return d?{value:e}:e}},"binary!==":function(a,
c,d){return function(e,f,g,h){e=a(e,f,g,h)!==c(e,f,g,h);return d?{value:e}:e}},"binary==":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)==c(e,f,g,h);return d?{value:e}:e}},"binary!=":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)!=c(e,f,g,h);return d?{value:e}:e}},"binary<":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)<c(e,f,g,h);return d?{value:e}:e}},"binary>":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)>c(e,f,g,h);return d?{value:e}:e}},"binary<=":function(a,c,d){return function(e,
f,g,h){e=a(e,f,g,h)<=c(e,f,g,h);return d?{value:e}:e}},"binary>=":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)>=c(e,f,g,h);return d?{value:e}:e}},"binary&&":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)&&c(e,f,g,h);return d?{value:e}:e}},"binary||":function(a,c,d){return function(e,f,g,h){e=a(e,f,g,h)||c(e,f,g,h);return d?{value:e}:e}},"ternary?:":function(a,c,d,e){return function(f,g,h,l){f=a(f,g,h,l)?c(f,g,h,l):d(f,g,h,l);return e?{value:f}:f}},value:function(a,c){return function(){return c?
{context:u,name:u,value:a}:a}},identifier:function(a,c,d,e,f){return function(g,h,l,k){g=h&&a in h?h:g;e&&1!==e&&g&&!g[a]&&(g[a]={});h=g?g[a]:u;c&&Ba(h,f);return d?{context:g,name:a,value:h}:h}},computedMember:function(a,c,d,e,f){return function(g,h,l,k){var m=a(g,h,l,k),q,n;null!=m&&(q=c(g,h,l,k),Wa(q,f),e&&1!==e&&m&&!m[q]&&(m[q]={}),n=m[q],Ba(n,f));return d?{context:m,name:q,value:n}:n}},nonComputedMember:function(a,c,d,e,f,g){return function(h,l,k,m){h=a(h,l,k,m);f&&1!==f&&h&&!h[c]&&(h[c]={});
l=null!=h?h[c]:u;(d||Fb(c))&&Ba(l,g);return e?{context:h,name:c,value:l}:l}},inputs:function(a,c){return function(d,e,f,g){return g?g[c]:a(d,e,f)}}};var fc=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d;this.ast=new r(this.lexer);this.astCompiler=d.csp?new sd(this.ast,c):new rd(this.ast,c)};fc.prototype={constructor:fc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};ga();ga();var Yf=Object.prototype.valueOf,Ca=G("$sce"),oa={HTML:"html",CSS:"css",URL:"url",
RESOURCE_URL:"resourceUrl",JS:"js"},ea=G("$compile"),Z=W.createElement("a"),wd=Aa(N.location.href);xd.$inject=["$document"];Jc.$inject=["$provide"];yd.$inject=["$locale"];Ad.$inject=["$locale"];var Dd=".",hg={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:Hb("Month"),MMM:Hb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",
1),sss:$("Milliseconds",3),EEEE:Hb("Day"),EEE:Hb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a,c,d){a=-1*d;return a=(0<=a?"+":"")+(Gb(Math[0<a?"floor":"ceil"](a/60),2)+Gb(Math.abs(a%60),2))},ww:Fd(2),w:Fd(1),G:hc,GG:hc,GGG:hc,GGGG:function(a,c){return 0>=a.getFullYear()?c.ERANAMES[0]:c.ERANAMES[1]}},gg=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,fg=/^\-?\d+$/;zd.$inject=["$locale"];var cg=qa(I),dg=qa(rb);Bd.$inject=
["$parse"];var he=qa({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref)return function(a,c){if("a"===c[0].nodeName.toLowerCase()){var f="[object SVGAnimatedString]"===sa.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}}),sb={};n(Ab,function(a,c){function d(a,d,f){a.$watch(f[e],function(a){f.$set(c,!!a)})}if("multiple"!=a){var e=va("ng-"+c),f=d;"checked"===a&&(f=function(a,c,f){f.ngModel!==f[e]&&d(a,c,f)});sb[e]=function(){return{restrict:"A",
priority:100,link:f}}}});n(Sc,function(a,c){sb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(jg))){f.$set("ngPattern",new RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});n(["src","srcset","href"],function(a){var c=va("ng-"+a);sb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===sa.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",
g=null);f.$observe(c,function(c){c?(f.$set(h,c),Va&&g&&e.prop(g,f[h])):"href"===a&&f.$set(h,null)})}}}});var Ib={$addControl:v,$$renameControl:function(a,c){a.$name=c},$removeControl:v,$setValidity:v,$setDirty:v,$setPristine:v,$setSubmitted:v};Gd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Od=function(a){return["$timeout","$parse",function(c,d){function e(a){return""===a?d('this[""]').assign:d(a).assign||v}return{name:"form",restrict:a?"EAC":"E",controller:Gd,compile:function(d,
g){d.addClass(Xa).addClass(lb);var h=g.name?"name":a&&g.ngForm?"ngForm":!1;return{pre:function(a,d,f,g){if(!("action"in f)){var n=function(c){a.$apply(function(){g.$commitViewValue();g.$setSubmitted()});c.preventDefault()};d[0].addEventListener("submit",n,!1);d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",n,!1)},0,!1)})}var t=g.$$parentForm,r=h?e(g.$name):v;h&&(r(a,g),f.$observe(h,function(c){g.$name!==c&&(r(a,u),t.$$renameControl(g,c),r=e(g.$name),r(a,g))}));d.on("$destroy",
function(){t.$removeControl(g);r(a,u);Q(g,Ib)})}}}}}]},ie=Od(),ve=Od(!0),ig=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,sg=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,tg=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ug=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Pd=/^(\d{4})-(\d{2})-(\d{2})$/,Qd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,kc=/^(\d{4})-W(\d\d)$/,
Rd=/^(\d{4})-(\d\d)$/,Sd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Td={text:function(a,c,d,e,f,g){ib(a,c,d,e,f,g);ic(e)},date:jb("date",Pd,Kb(Pd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":jb("datetimelocal",Qd,Kb(Qd,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:jb("time",Sd,Kb(Sd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:jb("week",kc,function(a,c){if(ca(a))return a;if(H(a)){kc.lastIndex=0;var d=kc.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,h=0,l=0,k=Ed(e),f=7*(f-1);
c&&(d=c.getHours(),g=c.getMinutes(),h=c.getSeconds(),l=c.getMilliseconds());return new Date(e,0,k.getDate()+f,d,g,h,l)}}return NaN},"yyyy-Www"),month:jb("month",Rd,Kb(Rd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){Id(a,c,d,e);ib(a,c,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:ug.test(a)?parseFloat(a):u});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!X(a))throw kb("numfmt",a);a=a.toString()}return a});if(x(d.min)||d.ngMin){var h;e.$validators.min=
function(a){return e.$isEmpty(a)||y(h)||a>=h};d.$observe("min",function(a){x(a)&&!X(a)&&(a=parseFloat(a,10));h=X(a)&&!isNaN(a)?a:u;e.$validate()})}if(x(d.max)||d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||y(l)||a<=l};d.$observe("max",function(a){x(a)&&!X(a)&&(a=parseFloat(a,10));l=X(a)&&!isNaN(a)?a:u;e.$validate()})}},url:function(a,c,d,e,f,g){ib(a,c,d,e,f,g);ic(e);e.$$parserName="url";e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||sg.test(d)}},email:function(a,
c,d,e,f,g){ib(a,c,d,e,f,g);ic(e);e.$$parserName="email";e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||tg.test(d)}},radio:function(a,c,d,e){y(d.name)&&c.attr("name",++mb);c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,g,h,l){var k=Jd(l,a,"ngTrueValue",d.ngTrueValue,!0),m=Jd(l,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,
a&&a.type)});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return!1===a};e.$formatters.push(function(a){return ka(a,k)});e.$parsers.push(function(a){return a?k:m})},hidden:v,button:v,submit:v,reset:v,file:v},Dc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,h,l){l[0]&&(Td[I(h.type)]||Td.text)(f,g,h,l[0],c,a,d,e)}}}}],vg=/^(true|false|\d+)$/,Ne=function(){return{restrict:"A",priority:100,compile:function(a,
c){return vg.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},ne=["$compile",function(a){return{restrict:"AC",compile:function(c){a.$$addBindingClass(c);return function(c,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];c.$watch(f.ngBind,function(a){e.textContent=a===u?"":a})}}}}],pe=["$interpolate","$compile",function(a,c){return{compile:function(d){c.$$addBindingClass(d);return function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate));
c.$$addBindingInfo(f,d.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===u?"":a})}}}}],oe=["$sce","$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),h=c(f.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(e);return function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml);c.$watch(h,function(){e.html(a.getTrustedHtml(g(c))||"")})}}}}],Me=qa({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),
qe=jc("",!0),se=jc("Odd",0),re=jc("Even",1),te=Ma({compile:function(a,c){c.$set("ngCloak",u);a.removeClass("ng-cloak")}}),ue=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ic={},wg={blur:!0,focus:!0};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=va("ng-"+a);Ic[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var h=
d(g[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){h(c,{$event:d})};wg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var xe=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,l,k;c.$watch(e.ngIf,function(c){c?l||g(function(c,f){l=f;c[c.length++]=W.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),h&&(k=
qb(h.clone),a.leave(k).then(function(){k=null}),h=null))})}}}],ye=["$templateRequest","$anchorScroll","$animate",function(a,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:aa.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",l=f.autoscroll;return function(e,f,n,s,r){var u=0,v,w,p,A=function(){w&&(w.remove(),w=null);v&&(v.$destroy(),v=null);p&&(d.leave(p).then(function(){w=null}),w=p,p=null)};e.$watch(g,function(g){var n=function(){!x(l)||l&&!e.$eval(l)||
c()},q=++u;g?(a(g,!0).then(function(a){if(q===u){var c=e.$new();s.template=a;a=r(c,function(a){A();d.enter(a,null,f).then(n)});v=c;p=a;v.$emit("$includeContentLoaded",g);e.$eval(h)}},function(){q===u&&(A(),e.$emit("$includeContentError",g))}),e.$emit("$includeContentRequested",g)):(A(),s.template=null)})}}}}],Pe=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Lc(f.template,W).childNodes)(c,function(a){d.append(a)},
{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],ze=Ma({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Le=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,h=g?T(f):f;e.$parsers.push(function(a){if(!y(a)){var c=[];a&&n(a.split(h),function(a){a&&c.push(g?T(a):a)});return c}});e.$formatters.push(function(a){return K(a)?a.join(f):u});e.$isEmpty=function(a){return!a||
!a.length}}}},lb="ng-valid",Kd="ng-invalid",Xa="ng-pristine",Jb="ng-dirty",Md="ng-pending",kb=G("ngModel"),xg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,h,l,k,m){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=u;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;
this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=u;this.$name=m(d.name||"",!1)(a);var q=f(d.ngModel),s=q.assign,r=q,E=s,L=null,w,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");r=function(a){var d=q(a);B(d)&&(d=c(a));return d};E=function(a,c){B(q(a))?g(a,{$$$p:p.$modelValue}):s(a,p.$modelValue)}}else if(!q.assign)throw kb("nonassign",d.ngModel,ua(e));};this.$render=v;this.$isEmpty=function(a){return y(a)||
""===a||null===a||a!==a};var A=e.inheritedData("$formController")||Ib,z=0;Hd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},parentForm:A,$animate:g});this.$setPristine=function(){p.$dirty=!1;p.$pristine=!0;g.removeClass(e,Jb);g.addClass(e,Xa)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;g.removeClass(e,Xa);g.addClass(e,Jb);A.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=
function(){p.$touched=!0;p.$untouched=!1;g.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){h.cancel(L);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!X(p.$modelValue)||!isNaN(p.$modelValue)){var a=p.$$rawModelValue,c=p.$valid,d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$runValidators(a,p.$$lastCommittedViewValue,function(f){e||c===f||(p.$modelValue=f?a:u,p.$modelValue!==d&&p.$$writeModelToScope())})}};this.$$runValidators=
function(a,c,d){function e(){var d=!0;n(p.$validators,function(e,f){var h=e(a,c);d=d&&h;g(f,h)});return d?!0:(n(p.$asyncValidators,function(a,c){g(c,null)}),!1)}function f(){var d=[],e=!0;n(p.$asyncValidators,function(f,h){var k=f(a,c);if(!k||!B(k.then))throw kb("$asyncValidators",k);g(h,u);d.push(k.then(function(){g(h,!0)},function(a){e=!1;g(h,!1)}))});d.length?k.all(d).then(function(){h(e)},v):h(!0)}function g(a,c){l===z&&p.$setValidity(a,c)}function h(a){l===z&&d(a)}z++;var l=z;(function(){var a=
p.$$parserName||"parse";if(w===u)g(a,null);else return w||(n(p.$validators,function(a,c){g(c,null)}),n(p.$asyncValidators,function(a,c){g(c,null)})),g(a,w),w;return!0})()?e()?f():h(!1):h(!1)};this.$commitViewValue=function(){var a=p.$viewValue;h.cancel(L);if(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var c=p.$$lastCommittedViewValue;if(w=y(c)?u:!0)for(var d=
0;d<p.$parsers.length;d++)if(c=p.$parsers[d](c),y(c)){w=!1;break}X(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=r(a));var e=p.$modelValue,f=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=c;f&&(p.$modelValue=c,p.$modelValue!==e&&p.$$writeModelToScope());p.$$runValidators(c,p.$$lastCommittedViewValue,function(a){f||(p.$modelValue=a?c:u,p.$modelValue!==e&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){E(a,p.$modelValue);n(p.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};
this.$setViewValue=function(a,c){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(c)};this.$$debounceViewValueCommit=function(c){var d=0,e=p.$options;e&&x(e.debounce)&&(e=e.debounce,X(e)?d=e:X(e[c])?d=e[c]:X(e["default"])&&(d=e["default"]));h.cancel(L);d?L=h(function(){p.$commitViewValue()},d):l.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var c=r(a);if(c!==p.$modelValue&&(p.$modelValue===p.$modelValue||c===c)){p.$modelValue=
p.$$rawModelValue=c;w=u;for(var d=p.$formatters,e=d.length,f=c;e--;)f=d[e](f);p.$viewValue!==f&&(p.$viewValue=p.$$lastCommittedViewValue=f,p.$render(),p.$$runValidators(c,f,v))}return c})}],Ke=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:xg,priority:1,compile:function(c){c.addClass(Xa).addClass("ng-untouched").addClass(lb);return{pre:function(a,c,f,g){var h=g[0],l=g[1]||Ib;h.$$setOptions(g[2]&&g[2].$options);l.$addControl(h);f.$observe("name",
function(a){h.$name!==a&&l.$$renameControl(h,a)});a.$on("$destroy",function(){l.$removeControl(h)})},post:function(c,e,f,g){var h=g[0];if(h.$options&&h.$options.updateOn)e.on(h.$options.updateOn,function(a){h.$$debounceViewValueCommit(a&&a.type)});e.on("blur",function(e){h.$touched||(a.$$phase?c.$evalAsync(h.$setTouched):c.$apply(h.$setTouched))})}}}}}],yg=/(\s+|^)default(\s+|$)/,Oe=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=fa(a.$eval(c.ngModelOptions));
this.$options.updateOn!==u?(this.$options.updateOnDefault=!1,this.$options.updateOn=T(this.$options.updateOn.replace(yg,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Ae=Ma({terminal:!0,priority:1E3}),zg=G("ngOptions"),Ag=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
Ie=["$compile","$parse",function(a,c){function d(a,d,e){function f(a,c,d,e,g){this.selectValue=a;this.viewValue=c;this.label=d;this.group=e;this.disabled=g}function m(a){var c;if(!r&&Da(a))c=a;else{c=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&c.push(d)}return c}var n=a.match(Ag);if(!n)throw zg("iexp",a,ua(d));var s=n[5]||n[7],r=n[6];a=/ as /.test(n[0])&&n[1];var u=n[9];d=c(n[2]?n[1]:s);var v=a&&c(a)||d,w=u&&c(u),p=u?function(a,c){return w(e,c)}:function(a){return Ga(a)},A=function(a,
c){return p(a,B(a,c))},x=c(n[2]||n[1]),z=c(n[3]||""),y=c(n[4]||""),J=c(n[8]),F={},B=r?function(a,c){F[r]=c;F[s]=a;return F}:function(a){F[s]=a;return F};return{trackBy:u,getTrackByValue:A,getWatchables:c(J,function(a){var c=[];a=a||[];for(var d=m(a),f=d.length,g=0;g<f;g++){var h=a===d?g:d[g],k=B(a[h],h),h=p(a[h],k);c.push(h);if(n[2]||n[1])h=x(e,k),c.push(h);n[4]&&(k=y(e,k),c.push(k))}return c}),getOptions:function(){for(var a=[],c={},d=J(e)||[],g=m(d),h=g.length,n=0;n<h;n++){var q=d===g?n:g[n],s=
B(d[q],q),r=v(e,s),q=p(r,s),t=x(e,s),w=z(e,s),s=y(e,s),r=new f(q,r,t,w,s);a.push(r);c[q]=r}return{items:a,selectValueMap:c,getOptionFromViewValue:function(a){return c[A(a)]},getViewValueFromOption:function(a){return u?aa.copy(a.viewValue):a.viewValue}}}}}var e=W.createElement("option"),f=W.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(c,h,l,k){function m(a,c){a.element=c;c.disabled=a.disabled;a.value!==c.value&&(c.value=a.selectValue);a.label!==
c.label&&(c.label=a.label,c.textContent=a.label)}function q(a,c,d,e){c&&I(c.nodeName)===d?d=c:(d=e.cloneNode(!1),c?a.insertBefore(d,c):a.appendChild(d));return d}function s(a){for(var c;a;)c=a.nextSibling,Wb(a),a=c}function r(a){var c=p&&p[0],d=J&&J[0];if(c||d)for(;a&&(a===c||a===d);)a=a.nextSibling;return a}function u(){var a=F&&w.readValue();F=D.getOptions();var c={},d=h[0].firstChild;O&&h.prepend(p);d=r(d);F.items.forEach(function(a){var g,k;a.group?(g=c[a.group],g||(g=q(h[0],d,"optgroup",f),d=
g.nextSibling,g.label=a.group,g=c[a.group]={groupElement:g,currentOptionElement:g.firstChild}),k=q(g.groupElement,g.currentOptionElement,"option",e),m(a,k),g.currentOptionElement=k.nextSibling):(k=q(h[0],d,"option",e),m(a,k),d=k.nextSibling)});Object.keys(c).forEach(function(a){s(c[a].currentOptionElement)});s(d);v.$render();if(!v.$isEmpty(a)){var g=w.readValue();(D.trackBy?ka(a,g):a===g)||(v.$setViewValue(g),v.$render())}}var v=k[1];if(v){var w=k[0];k=l.multiple;for(var p,x=0,y=h.children(),B=y.length;x<
B;x++)if(""===y[x].value){p=y.eq(x);break}var O=!!p,J=z(e.cloneNode(!1));J.val("?");var F,D=d(l.ngOptions,h,c);k?(v.$isEmpty=function(a){return!a||0===a.length},w.writeValue=function(a){F.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){(a=F.getOptionFromViewValue(a))&&!a.disabled&&(a.element.selected=!0)})},w.readValue=function(){var a=h.val()||[],c=[];n(a,function(a){(a=F.selectValueMap[a])&&!a.disabled&&c.push(F.getViewValueFromOption(a))});return c},D.trackBy&&c.$watchCollection(function(){if(K(v.$viewValue))return v.$viewValue.map(function(a){return D.getTrackByValue(a)})},
function(){v.$render()})):(w.writeValue=function(a){var c=F.getOptionFromViewValue(a);c&&!c.disabled?h[0].value!==c.selectValue&&(J.remove(),O||p.remove(),h[0].value=c.selectValue,c.element.selected=!0,c.element.setAttribute("selected","selected")):null===a||O?(J.remove(),O||h.prepend(p),h.val(""),p.prop("selected",!0),p.attr("selected",!0)):(O||p.remove(),h.prepend(J),h.val("?"),J.prop("selected",!0),J.attr("selected",!0))},w.readValue=function(){var a=F.selectValueMap[h.val()];return a&&!a.disabled?
(O||p.remove(),J.remove(),F.getViewValueFromOption(a)):null},D.trackBy&&c.$watch(function(){return D.getTrackByValue(v.$viewValue)},function(){v.$render()}));O?(p.remove(),a(p)(c),p.removeClass("ng-scope")):p=z(e.cloneNode(!1));u();c.$watchCollection(D.getWatchables,u)}}}}],Be=["$locale","$interpolate","$log",function(a,c,d){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,l){function k(a){h.text(a||"")}var m=l.count,q=l.$attr.when&&h.attr(l.$attr.when),s=l.offset||0,r=g.$eval(q)||{},u=
{},x=c.startSymbol(),w=c.endSymbol(),p=x+m+"-"+s+w,A=aa.noop,z;n(l,function(a,c){var d=f.exec(c);d&&(d=(d[1]?"-":"")+I(d[2]),r[d]=h.attr(l.$attr[c]))});n(r,function(a,d){u[d]=c(a.replace(e,p))});g.$watch(m,function(c){var e=parseFloat(c),f=isNaN(e);f||e in r||(e=a.pluralCat(e-s));e===z||f&&X(z)&&isNaN(z)||(A(),f=u[e],y(f)?(null!=c&&d.debug("ngPluralize: no rule defined for '"+e+"' in "+q),A=v,k()):A=g.$watch(f,k),z=e)})}}}],Ce=["$parse","$animate",function(a,c){var d=G("ngRepeat"),e=function(a,c,
d,e,k,m,n){a[d]=e;k&&(a[k]=m);a.$index=c;a.$first=0===c;a.$last=c===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,l=W.createComment(" end ngRepeat: "+h+" "),k=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",h);var m=k[1],q=k[2],r=k[3],t=k[4],k=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);
if(!k)throw d("iidexp",m);var v=k[3]||k[1],x=k[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw d("badident",r);var w,p,A,y,B={$id:Ga};t?w=a(t):(A=function(a,c){return Ga(c)},y=function(a){return a});return function(a,f,g,k,m){w&&(p=function(c,d,e){x&&(B[x]=c);B[v]=d;B.$index=e;return w(a,B)});var t=ga();a.$watchCollection(q,function(g){var k,q,w=f[0],B,D=ga(),F,H,K,G,M,I,N;r&&(a[r]=g);if(Da(g))M=
g,q=p||A;else for(N in q=p||y,M=[],g)g.hasOwnProperty(N)&&"$"!==N.charAt(0)&&M.push(N);F=M.length;N=Array(F);for(k=0;k<F;k++)if(H=g===M?k:M[k],K=g[H],G=q(H,K,k),t[G])I=t[G],delete t[G],D[G]=I,N[k]=I;else{if(D[G])throw n(N,function(a){a&&a.scope&&(t[a.id]=a)}),d("dupes",h,G,K);N[k]={id:G,scope:u,clone:u};D[G]=!0}for(B in t){I=t[B];G=qb(I.clone);c.leave(G);if(G[0].parentNode)for(k=0,q=G.length;k<q;k++)G[k].$$NG_REMOVED=!0;I.scope.$destroy()}for(k=0;k<F;k++)if(H=g===M?k:M[k],K=g[H],I=N[k],I.scope){B=
w;do B=B.nextSibling;while(B&&B.$$NG_REMOVED);I.clone[0]!=B&&c.move(qb(I.clone),null,z(w));w=I.clone[I.clone.length-1];e(I.scope,k,v,K,x,H,F)}else m(function(a,d){I.scope=d;var f=l.cloneNode(!1);a[a.length++]=f;c.enter(a,null,z(w));w=f;I.clone=a;D[I.id]=I;e(I.scope,k,v,K,x,H,F)});t=D})}}}}],De=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],we=["$animate",
function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ee=Ma(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&n(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Fe=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],h=[],l=[],k=[],m=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||
e.on,function(c){var d,e;d=0;for(e=l.length;d<e;++d)a.cancel(l[d]);d=l.length=0;for(e=k.length;d<e;++d){var r=qb(h[d].clone);k[d].$destroy();(l[d]=a.leave(r)).then(m(l,d))}h.length=0;k.length=0;(g=f.cases["!"+c]||f.cases["?"])&&n(g,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=W.createComment(" end ngSwitchWhen: ");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Ge=Ma({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,
f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),He=Ma({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Je=Ma({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw G("ngTransclude")("orphan",ua(c));f(function(a){c.empty();c.append(a)})}}),je=["$templateCache",function(a){return{restrict:"E",terminal:!0,
compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Bg={$setViewValue:v,$render:v},Cg=["$element","$scope","$attrs",function(a,c,d){var e=this,f=new Ua;e.ngModelCtrl=Bg;e.unknownOption=z(W.createElement("option"));e.renderUnknownOption=function(c){c="? "+Ga(c)+" ?";e.unknownOption.val(c);a.prepend(e.unknownOption);a.val(c)};c.$on("$destroy",function(){e.renderUnknownOption=v});e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.readValue=
function(){e.removeUnknownOption();return a.val()};e.writeValue=function(c){e.hasOption(c)?(e.removeUnknownOption(),a.val(c),""===c&&e.emptyOption.prop("selected",!0)):null==c&&e.emptyOption?(e.removeUnknownOption(),a.val("")):e.renderUnknownOption(c)};e.addOption=function(a,c){Ta(a,'"option value"');""===a&&(e.emptyOption=c);var d=f.get(a)||0;f.put(a,d+1)};e.removeOption=function(a){var c=f.get(a);c&&(1===c?(f.remove(a),""===a&&(e.emptyOption=u)):f.put(a,c-1))};e.hasOption=function(a){return!!f.get(a)}}],
ke=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cg,link:function(a,c,d,e){var f=e[1];if(f){var g=e[0];g.ngModelCtrl=f;f.$render=function(){g.writeValue(f.$viewValue)};c.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})});if(d.multiple){g.readValue=function(){var a=[];n(c.find("option"),function(c){c.selected&&a.push(c.value)});return a};g.writeValue=function(a){var d=new Ua(a);n(c.find("option"),function(a){a.selected=x(d.get(a.value))})};var h,
l=NaN;a.$watch(function(){l!==f.$viewValue||ka(h,f.$viewValue)||(h=ia(f.$viewValue),f.$render());l=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}}}},me=["$interpolate",function(a){function c(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}return{restrict:"E",priority:100,compile:function(d,e){if(y(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=d.parent(),m=k.data("$selectController")||k.parent().data("$selectController");m&&m.ngModelCtrl&&
(f?a.$watch(f,function(a,f){e.$set("value",a);f!==a&&m.removeOption(f);m.addOption(a,d);m.ngModelCtrl.$render();c(d)}):(m.addOption(e.value,d),m.ngModelCtrl.$render(),c(d)),d.on("$destroy",function(){m.removeOption(e.value);m.ngModelCtrl.$render()}))}}}}],le=qa({restrict:"E",terminal:!1}),Fc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},
Ec=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){H(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw G("ngPattern")("noregexp",g,a,ua(c));f=a||u;e.$validate()});e.$validators.pattern=function(a,c){return e.$isEmpty(c)||y(f)||f.test(c)}}}}},Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=Y(a);f=isNaN(a)?-1:a;e.$validate()});
e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(c)||c.length<=f}}}}},Gc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=Y(a)||0;e.$validate()});e.$validators.minlength=function(a,c){return e.$isEmpty(c)||c.length>=f}}}}};N.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(ce(),ee(aa),aa.module("ngLocale",[],["$provide",function(a){function c(a){a+="";var c=a.indexOf(".");return-1==
c?0:a.length-c-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",
medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",pluralCat:function(a,e){var f=a|0,g=e;u===g&&(g=Math.min(c(a),3));Math.pow(10,g);return 1==
f&&0==g?"one":"other"}})}]),z(W).ready(function(){Zd(W,yc)}))})(window,document);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.4.5
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(p,c,C){'use strict';function v(r,h,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,f,b,d,y){function z(){k&&(g.cancel(k),k=null);l&&(l.$destroy(),l=null);m&&(k=g.leave(m),k.then(function(){k=null}),m=null)}function x(){var b=r.current&&r.current.locals;if(c.isDefined(b&&b.$template)){var b=a.$new(),d=r.current;m=y(b,function(b){g.enter(b,null,m||f).then(function(){!c.isDefined(t)||t&&!a.$eval(t)||h()});z()});l=d.scope=b;l.$emit("$viewContentLoaded");
l.$eval(w)}else z()}var l,m,k,t=b.autoscroll,w=b.onload||"";a.$on("$routeChangeSuccess",x);x()}}}function A(c,h,g){return{restrict:"ECA",priority:-400,link:function(a,f){var b=g.current,d=b.locals;f.html(d.$template);var y=c(f.contents());b.controller&&(d.$scope=a,d=h(b.controller,d),b.controllerAs&&(a[b.controllerAs]=d),f.data("$ngControllerController",d),f.children().data("$ngControllerController",d));y(a)}}}p=c.module("ngRoute",["ng"]).provider("$route",function(){function r(a,f){return c.extend(Object.create(a),
f)}function h(a,c){var b=c.caseInsensitiveMatch,d={originalPath:a,regexp:a},g=d.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,c,b,d){a="?"===d?d:null;d="*"===d?d:null;g.push({name:b,optional:!!a});c=c||"";return""+(a?"":c)+"(?:"+(a?c:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");d.regexp=new RegExp("^"+a+"$",b?"i":"");return d}var g={};this.when=function(a,f){var b=c.copy(f);c.isUndefined(b.reloadOnSearch)&&(b.reloadOnSearch=!0);
c.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=c.extend(b,a&&h(a,b));if(a){var d="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";g[d]=c.extend({redirectTo:a},h(d,b))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(a,f,b,d,h,p,x){function l(b){var e=s.current;
(v=(n=k())&&e&&n.$$route===e.$$route&&c.equals(n.pathParams,e.pathParams)&&!n.reloadOnSearch&&!w)||!e&&!n||a.$broadcast("$routeChangeStart",n,e).defaultPrevented&&b&&b.preventDefault()}function m(){var u=s.current,e=n;if(v)u.params=e.params,c.copy(u.params,b),a.$broadcast("$routeUpdate",u);else if(e||u)w=!1,(s.current=e)&&e.redirectTo&&(c.isString(e.redirectTo)?f.path(t(e.redirectTo,e.params)).search(e.params).replace():f.url(e.redirectTo(e.pathParams,f.path(),f.search())).replace()),d.when(e).then(function(){if(e){var a=
c.extend({},e.resolve),b,f;c.forEach(a,function(b,e){a[e]=c.isString(b)?h.get(b):h.invoke(b,null,null,e)});c.isDefined(b=e.template)?c.isFunction(b)&&(b=b(e.params)):c.isDefined(f=e.templateUrl)&&(c.isFunction(f)&&(f=f(e.params)),c.isDefined(f)&&(e.loadedTemplateUrl=x.valueOf(f),b=p(f)));c.isDefined(b)&&(a.$template=b);return d.all(a)}}).then(function(f){e==s.current&&(e&&(e.locals=f,c.copy(e.params,b)),a.$broadcast("$routeChangeSuccess",e,u))},function(b){e==s.current&&a.$broadcast("$routeChangeError",
e,u,b)})}function k(){var a,b;c.forEach(g,function(d,g){var q;if(q=!b){var h=f.path();q=d.keys;var l={};if(d.regexp)if(h=d.regexp.exec(h)){for(var k=1,m=h.length;k<m;++k){var n=q[k-1],p=h[k];n&&p&&(l[n.name]=p)}q=l}else q=null;else q=null;q=a=q}q&&(b=r(d,{params:c.extend({},f.search(),a),pathParams:a}),b.$$route=d)});return b||g[null]&&r(g[null],{params:{},pathParams:{}})}function t(a,b){var d=[];c.forEach((a||"").split(":"),function(a,c){if(0===c)d.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),
g=f[1];d.push(b[g]);d.push(f[2]||"");delete b[g]}});return d.join("")}var w=!1,n,v,s={routes:g,reload:function(){w=!0;a.$evalAsync(function(){l();m()})},updateParams:function(a){if(this.current&&this.current.$$route)a=c.extend({},this.current.params,a),f.path(t(this.current.$$route.originalPath,a)),f.search(a);else throw B("norout");}};a.$on("$locationChangeStart",l);a.$on("$locationChangeSuccess",m);return s}]});var B=c.$$minErr("ngRoute");p.provider("$routeParams",function(){this.$get=function(){return{}}});
p.directive("ngView",v);p.directive("ngView",A);v.$inject=["$route","$anchorScroll","$animate"];A.$inject=["$compile","$controller","$route"]})(window,window.angular);
//# sourceMappingURL=angular-route.min.js.map

/*
 AngularJS v1.4.5
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,x,Z){'use strict';function ua(a,b,c){if(!a)throw ngMinErr("areq",b||"?",c||"required");return a}function va(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;$(a)&&(a=a.join(" "));$(b)&&(b=b.join(" "));return a+" "+b}function Ea(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function V(a,b,c){var d="";a=$(a)?a:a&&M(a)&&a.length?a.split(/\s+/):[];q(a,function(a,y){a&&0<a.length&&(d+=0<y?" ":"",d+=c?b+a:a+b)});return d}function Fa(a){if(a instanceof I)switch(a.length){case 0:return[];
case 1:if(1===a[0].nodeType)return a;break;default:return I(ma(a))}if(1===a.nodeType)return I(a)}function ma(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1==c.nodeType)return c}}function Ga(a,b,c){q(b,function(b){a.addClass(b,c)})}function Ha(a,b,c){q(b,function(b){a.removeClass(b,c)})}function Q(a){return function(b,c){c.addClass&&(Ga(a,b,c.addClass),c.addClass=null);c.removeClass&&(Ha(a,b,c.removeClass),c.removeClass=null)}}function ia(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
L;a.domOperation=function(){a.$$domOperationFired=!0;b();b=L};a.$$prepared=!0}return a}function ea(a,b){wa(a,b);xa(a,b)}function wa(a,b){b.from&&(a.css(b.from),b.from=null)}function xa(a,b){b.to&&(a.css(b.to),b.to=null)}function R(a,b,c){var d=(b.addClass||"")+" "+(c.addClass||""),e=(b.removeClass||"")+" "+(c.removeClass||"");a=Ia(a.attr("class"),d,e);c.preparationClasses&&(b.preparationClasses=W(c.preparationClasses,b.preparationClasses),delete c.preparationClasses);d=b.domOperation!==L?b.domOperation:
null;ya(b,c);d&&(b.domOperation=d);b.addClass=a.addClass?a.addClass:null;b.removeClass=a.removeClass?a.removeClass:null;return b}function Ia(a,b,c){function d(a){M(a)&&(a=a.split(" "));var b={};q(a,function(a){a.length&&(b[a]=!0)});return b}var e={};a=d(a);b=d(b);q(b,function(a,b){e[b]=1});c=d(c);q(c,function(a,b){e[b]=1===e[b]?null:-1});var y={addClass:"",removeClass:""};q(e,function(b,c){var e,d;1===b?(e="addClass",d=!a[c]):-1===b&&(e="removeClass",d=a[c]);d&&(y[e].length&&(y[e]+=" "),y[e]+=c)});
return y}function G(a){return a instanceof x.element?a[0]:a}function Ja(a,b,c){var d="";b&&(d=V(b,"ng-",!0));c.addClass&&(d=W(d,V(c.addClass,"-add")));c.removeClass&&(d=W(d,V(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function ja(a,b){var c=b?"-"+b+"s":"";fa(a,[ga,c]);return[ga,c]}function na(a,b){var c=b?"paused":"",d=X+"PlayState";fa(a,[d,c]);return[d,c]}function fa(a,b){a.style[b[0]]=b[1]}function W(a,b){return a?b?a+" "+b:a:b}function za(a,b,c){var d=Object.create(null),
e=a.getComputedStyle(b)||{};q(c,function(a,b){var c=e[a];if(c){var l=c.charAt(0);if("-"===l||"+"===l||0<=l)c=Ka(c);0===c&&(c=null);d[b]=c}});return d}function Ka(a){var b=0;a=a.split(/\s*,\s*/);q(a,function(a){"s"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function oa(a){return 0===a||null!=a}function Aa(a,b){var c=N,d=a+"s";b?c+="Duration":d+=" linear all";return[c,d]}function Ba(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},
count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}var L=x.noop,ya=x.extend,I=x.element,q=x.forEach,$=x.isArray,M=x.isString,pa=x.isObject,La=x.isUndefined,Ma=x.isDefined,Ca=x.isFunction,qa=x.isElement,N,ra,X,sa;F.ontransitionend===Z&&F.onwebkittransitionend!==Z?(N="WebkitTransition",ra="webkitTransitionEnd transitionend"):(N="transition",ra="transitionend");F.onanimationend===Z&&F.onwebkitanimationend!==
Z?(X="WebkitAnimation",sa="webkitAnimationEnd animationend"):(X="animation",sa="animationend");var ka=X+"Delay",ta=X+"Duration",ga=N+"Delay";F=N+"Duration";var Na={transitionDuration:F,transitionDelay:ga,transitionProperty:N+"Property",animationDuration:ta,animationDelay:ka,animationIterationCount:X+"IterationCount"},Oa={transitionDuration:F,transitionDelay:ga,animationDuration:ta,animationDelay:ka};x.module("ngAnimate",[]).provider("$$body",function(){this.$get=["$document",function(a){return I(a[0].body)}]}).directive("ngAnimateChildren",
[function(){return function(a,b,c){a=c.ngAnimateChildren;x.isString(a)&&0===a.length?b.data("$$ngAnimateChildren",!0):c.$observe("ngAnimateChildren",function(a){b.data("$$ngAnimateChildren","on"===a||"true"===a)})}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),v=0;v<b.length;v++)b[v]();e||a(function(){e||c()})}}var d,e;d=b.queue=[];b.waitUntilQuiet=function(b){e&&e();e=a(function(){e=null;b();c()})};return b}]).factory("$$AnimateRunner",
["$q","$sniffer","$$animateAsyncRun",function(a,b,c){function d(a){this.setHost(a);this._doneCallbacks=[];this._runInAnimationFrame=c();this._state=0}d.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};d.all=function(a,b){function c(v){l=l&&v;++d===a.length&&b(l)}var d=0,l=!0;q(a,function(a){a.done(c)})};d.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:L,getPromise:function(){if(!this.promise){var b=
this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},
complete:function(a){var b=this;0===b._state&&(b._state=1,b._runInAnimationFrame(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return d}]).factory("$$animateAsyncRun",["$$rAF",function(a){function b(b){c.push(b);1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;b(function(){a=!0});return function(c){a?c():b(c)}}}]).provider("$$animateQueue",
["$animateProvider",function(a){function b(a,b,c,q){return d[a].some(function(a){return a(b,c,q)})}function c(a,b){a=a||{};var c=0<(a.addClass||"").length,d=0<(a.removeClass||"").length;return b?c&&d:c||d}var d=this.rules={skip:[],cancel:[],join:[]};d.join.push(function(a,b,d){return!b.structural&&c(b.options)});d.skip.push(function(a,b,d){return!b.structural&&!c(b.options)});d.skip.push(function(a,b,c){return"leave"==c.event&&b.structural});d.skip.push(function(a,b,c){return c.structural&&2===c.state&&
!b.structural});d.cancel.push(function(a,b,c){return c.structural&&b.structural});d.cancel.push(function(a,b,c){return 2===c.state&&b.structural});d.cancel.push(function(a,b,c){a=b.options;c=c.options;return a.addClass&&a.addClass===c.removeClass||a.removeClass&&a.removeClass===c.addClass});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$body","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(d,y,v,z,l,s,O,x,t,la,E){function h(a,b){var c=
G(a),f=[],g=w[b];g&&q(g,function(a){a.node.contains(c)&&f.push(a.callback)});return f}function S(a,b,c,f){d(function(){q(h(b,a),function(a){a(b,c,f)})})}function u(a,g,m){function d(b,c,g,f){S(c,a,g,f);b.progress(c,g,f)}function w(b){var c=a,g=m;g.preparationClasses&&(c.removeClass(g.preparationClasses),g.preparationClasses=null);g.activeClasses&&(c.removeClass(g.activeClasses),g.activeClasses=null);Da(a,m);ea(a,m);m.domOperation();e.complete(!b)}var B,h;if(a=Fa(a))B=G(a),h=a.parent();m=ia(m);var e=
new x;$(m.addClass)&&(m.addClass=m.addClass.join(" "));m.addClass&&!M(m.addClass)&&(m.addClass=null);$(m.removeClass)&&(m.removeClass=m.removeClass.join(" "));m.removeClass&&!M(m.removeClass)&&(m.removeClass=null);m.from&&!pa(m.from)&&(m.from=null);m.to&&!pa(m.to)&&(m.to=null);if(!B)return w(),e;var k=[B.className,m.addClass,m.removeClass].join(" ");if(!C(k))return w(),e;var l=0<=["enter","move","leave"].indexOf(g),u=!H||U.get(B),k=!u&&A.get(B)||{},v=!!k.state;u||v&&1==k.state||(u=!p(a,h,g));if(u)return w(),
e;l&&J(a);h={structural:l,element:a,event:g,close:w,options:m,runner:e};if(v){if(b("skip",a,h,k)){if(2===k.state)return w(),e;R(a,k.options,m);return k.runner}if(b("cancel",a,h,k))if(2===k.state)k.runner.end();else if(k.structural)k.close();else return R(a,k.options,h.options),k.runner;else if(b("join",a,h,k))if(2===k.state)R(a,m,{});else return Ja(a,l?g:null,m),g=h.event=k.event,m=R(a,k.options,h.options),k.runner}else R(a,m,{});(v=h.structural)||(v="animate"===h.event&&0<Object.keys(h.options.to||
{}).length||c(h.options));if(!v)return w(),f(a),e;var t=(k.counter||0)+1;h.counter=t;r(a,1,h);y.$$postDigest(function(){var b=A.get(B),h=!b,b=b||{},J=0<(a.parent()||[]).length&&("animate"===b.event||b.structural||c(b.options));if(h||b.counter!==t||!J){h&&(Da(a,m),ea(a,m));if(h||l&&b.event!==g)m.domOperation(),e.end();J||f(a)}else g=!b.structural&&c(b.options,!0)?"setClass":b.event,r(a,2),b=O(a,g,b.options),b.done(function(b){w(!b);(b=A.get(B))&&b.counter===t&&f(G(a));d(e,g,"close",{})}),e.setHost(b),
d(e,g,"start",{})});return e}function J(a){a=G(a).querySelectorAll("[data-ng-animate]");q(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate")),c=A.get(a);switch(b){case 2:c.runner.end();case 1:c&&A.remove(a)}})}function f(a){a=G(a);a.removeAttribute("data-ng-animate");A.remove(a)}function B(a,b){return G(a)===G(b)}function p(a,b,c){c=B(a,l)||"HTML"===a[0].nodeName;var g=B(a,v),f=!1,d;for((a=a.data("$ngAnimatePin"))&&(b=a);b&&b.length;){g||(g=B(b,v));a=b[0];if(1!==a.nodeType)break;var w=
A.get(a)||{};f||(f=w.structural||U.get(a));if(La(d)||!0===d)a=b.data("$$ngAnimateChildren"),Ma(a)&&(d=a);if(f&&!1===d)break;g||(g=B(b,v),g||(a=b.data("$ngAnimatePin"))&&(b=a));c||(c=B(b,l));b=b.parent()}return(!f||d)&&g&&c}function r(a,b,c){c=c||{};c.state=b;a=G(a);a.setAttribute("data-ng-animate",b);c=(b=A.get(a))?ya(b,c):c;A.put(a,c)}var A=new s,U=new s,H=null,g=y.$watch(function(){return 0===t.totalPendingRequests},function(a){a&&(g(),y.$$postDigest(function(){y.$$postDigest(function(){null===
H&&(H=!0)})}))}),w={},k=a.classNameFilter(),C=k?function(a){return k.test(a)}:function(){return!0},Da=Q(la);return{on:function(a,b,c){b=ma(b);w[a]=w[a]||[];w[a].push({node:b,callback:c})},off:function(a,b,c){function g(a,b,c){var f=ma(b);return a.filter(function(a){return!(a.node===f&&(!c||a.callback===c))})}var f=w[a];f&&(w[a]=1===arguments.length?null:g(f,b,c))},pin:function(a,b){ua(qa(a),"element","not an element");ua(qa(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,
b,c,g){c=c||{};c.domOperation=g;return u(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!H;else if(qa(a)){var g=G(a),f=U.get(g);1===c?b=!f:(b=!!b)?f&&U.remove(g):U.put(g,!0)}else b=H=!!a;return b}}}]}]).provider("$$animation",["$animateProvider",function(a){function b(a){return a.data("$$animationRunner")}var c=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,e,y,v,z,l){function s(a){function b(a){if(a.processed)return a;
a.processed=!0;var f=a.domNode,d=f.parentNode;e.put(f,a);for(var h;d;){if(h=e.get(d)){h.processed||(h=b(h));break}d=d.parentNode}(h||c).children.push(a);return a}var c={children:[]},d,e=new z;for(d=0;d<a.length;d++){var l=a[d];e.put(l.domNode,a[d]={domNode:l.domNode,fn:l.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var h=0,e=[];for(d=0;d<c.length;d++){var l=c[d];0>=a&&(a=h,h=0,b.push(e),e=[]);e.push(l.fn);
l.children.forEach(function(a){h++;c.push(a)});a--}e.length&&b.push(e);return b}(c)}var O=[],x=Q(a);return function(t,z,E){function h(a){a=a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");var b=[];q(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function S(a){var b=[],c={};q(a,function(a,g){var d=G(a.element),f=0<=["enter","move"].indexOf(a.event),d=a.structural?h(d):[];if(d.length){var e=f?"to":"from";q(d,function(a){var b=a.getAttribute("ng-animate-ref");
c[b]=c[b]||{};c[b][e]={animationID:g,element:I(a)}})}else b.push(a)});var d={},f={};q(c,function(c,e){var h=c.from,r=c.to;if(h&&r){var J=a[h.animationID],k=a[r.animationID],B=h.animationID.toString();if(!f[B]){var l=f[B]={structural:!0,beforeStart:function(){J.beforeStart();k.beforeStart()},close:function(){J.close();k.close()},classes:u(J.classes,k.classes),from:J,to:k,anchors:[]};l.classes.length?b.push(l):(b.push(J),b.push(k))}f[B].anchors.push({out:h.element,"in":r.element})}else h=h?h.animationID:
r.animationID,r=h.toString(),d[r]||(d[r]=!0,b.push(a[h]))});return b}function u(a,b){a=a.split(" ");b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var f=a[d];if("ng-"!==f.substring(0,3))for(var h=0;h<b.length;h++)if(f===b[h]){c.push(f);break}}return c.join(" ")}function J(a){for(var b=c.length-1;0<=b;b--){var d=c[b];if(y.has(d)&&(d=y.get(d)(a)))return d}}function f(a,c){a.from&&a.to?(b(a.from.element).setHost(c),b(a.to.element).setHost(c)):b(a.element).setHost(c)}function B(){var a=b(t);!a||"leave"===
z&&E.$$domOperationFired||a.end()}function p(b){t.off("$destroy",B);t.removeData("$$animationRunner");x(t,E);ea(t,E);E.domOperation();H&&a.removeClass(t,H);t.removeClass("ng-animate");A.complete(!b)}E=ia(E);var r=0<=["enter","move","leave"].indexOf(z),A=new v({end:function(){p()},cancel:function(){p(!0)}});if(!c.length)return p(),A;t.data("$$animationRunner",A);var U=va(t.attr("class"),va(E.addClass,E.removeClass)),H=E.tempClasses;H&&(U+=" "+H,E.tempClasses=null);O.push({element:t,classes:U,event:z,
structural:r,options:E,beforeStart:function(){t.addClass("ng-animate");H&&a.addClass(t,H)},close:p});t.on("$destroy",B);if(1<O.length)return A;e.$$postDigest(function(){var a=[];q(O,function(c){b(c.element)?a.push(c):c.close()});O.length=0;var c=S(a),d=[];q(c,function(a){d.push({domNode:G(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var c,d=a.close;if(b(a.anchors?a.from.element||a.to.element:a.element)){var g=J(a);g&&(c=g.start)}c?(c=c(),c.done(function(a){d(!a)}),f(a,c)):d()}})});
l(s(d))});return A}}]}]).provider("$animateCss",["$animateProvider",function(a){var b=Ba(),c=Ba();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(a,e,y,v,z,l,s,O){function x(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++S))+"-"+a.getAttribute("class")+"-"+b}function t(h,f,l,p){var r;0<b.count(l)&&(r=c.get(l),r||(f=V(f,"-stagger"),e.addClass(h,f),r=za(a,h,p),r.animationDuration=Math.max(r.animationDuration,
0),r.transitionDuration=Math.max(r.transitionDuration,0),e.removeClass(h,f),c.put(l,r)));return r||{}}function la(a){u.push(a);s.waitUntilQuiet(function(){b.flush();c.flush();for(var a=z(),d=0;d<u.length;d++)u[d](a);u.length=0})}function E(c,f,h){f=b.get(h);f||(f=za(a,c,Na),"infinite"===f.animationIterationCount&&(f.animationIterationCount=1));b.put(h,f);c=f;h=c.animationDelay;f=c.transitionDelay;c.maxDelay=h&&f?Math.max(h,f):h||f;c.maxDuration=Math.max(c.animationDuration*c.animationIterationCount,
c.transitionDuration);return c}var h=Q(e),S=0,u=[];return function(a,c){function d(){r()}function p(){r(!0)}function r(b){if(!(s||S&&z)){s=!0;z=!1;c.$$skipPreparationClasses||e.removeClass(a,aa);e.removeClass(a,Z);na(g,!1);ja(g,!1);q(w,function(a){g.style[a[0]]=""});h(a,c);ea(a,c);if(c.onDone)c.onDone();m&&m.complete(!b)}}function A(a){n.blockTransition&&ja(g,a);n.blockKeyframeAnimation&&na(g,!!a)}function u(){m=new y({end:d,cancel:p});la(L);r();return{$$willAnimate:!1,start:function(){return m},
end:d}}function H(){function b(){if(!s){A(!1);q(w,function(a){g.style[a[0]]=a[1]});h(a,c);e.addClass(a,Z);if(n.recalculateTimingStyles){ha=g.className+" "+aa;ba=x(g,ha);D=E(g,ha,ba);Y=D.maxDelay;I=Math.max(Y,0);K=D.maxDuration;if(0===K){r();return}n.hasTransitions=0<D.transitionDuration;n.hasAnimations=0<D.animationDuration}n.applyAnimationDelay&&(Y="boolean"!==typeof c.delay&&oa(c.delay)?parseFloat(c.delay):Y,I=Math.max(Y,0),D.animationDelay=Y,da=[ka,Y+"s"],w.push(da),g.style[da[0]]=da[1]);M=1E3*
I;Q=1E3*K;if(c.easing){var k,p=c.easing;n.hasTransitions&&(k=N+"TimingFunction",w.push([k,p]),g.style[k]=p);n.hasAnimations&&(k=X+"TimingFunction",w.push([k,p]),g.style[k]=p)}D.transitionDuration&&m.push(ra);D.animationDuration&&m.push(sa);H=Date.now();var u=M+1.5*Q;k=H+u;var p=a.data("$$animateCss")||[],z=!0;if(p.length){var C=p[0];(z=k>C.expectedEndTime)?v.cancel(C.timer):p.push(r)}z&&(u=v(d,u,!1),p[0]={timer:u,expectedEndTime:k},p.push(r),a.data("$$animateCss",p));a.on(m.join(" "),l);xa(a,c)}}
function d(){var b=a.data("$$animateCss");if(b){for(var c=1;c<b.length;c++)b[c]();a.removeData("$$animateCss")}}function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-H,0)>=M&&b>=K&&(S=!0,r())}if(!s)if(g.parentNode){var H,m=[],k=function(a){if(S)z&&a&&(z=!1,r());else if(z=!a,D.animationDuration)if(a=na(g,z),z)w.push(a);else{var b=w,c=b.indexOf(a);0<=a&&b.splice(c,1)}},p=0<W&&(D.transitionDuration&&
0===T.transitionDuration||D.animationDuration&&0===T.animationDuration)&&Math.max(T.animationDelay,T.transitionDelay);p?v(b,Math.floor(p*W*1E3),!1):b();F.resume=function(){k(!0)};F.pause=function(){k(!1)}}else r()}var g=G(a);if(!g||!g.parentNode||!O.enabled())return u();c=ia(c);var w=[],k=a.attr("class"),C=Ea(c),s,z,S,m,F,I,M,K,Q;if(0===c.duration||!l.animations&&!l.transitions)return u();var ca=c.event&&$(c.event)?c.event.join(" "):c.event,R="",P="";ca&&c.structural?R=V(ca,"ng-",!0):ca&&(R=ca);c.addClass&&
(P+=V(c.addClass,"-add"));c.removeClass&&(P.length&&(P+=" "),P+=V(c.removeClass,"-remove"));c.applyClassesEarly&&P.length&&h(a,c);var aa=[R,P].join(" ").trim(),ha=k+" "+aa,Z=V(aa,"-active"),k=C.to&&0<Object.keys(C.to).length;if(!(0<(c.keyframeStyle||"").length||k||aa))return u();var ba,T;0<c.stagger?(C=parseFloat(c.stagger),T={transitionDelay:C,animationDelay:C,transitionDuration:0,animationDuration:0}):(ba=x(g,ha),T=t(g,aa,ba,Oa));c.$$skipPreparationClasses||e.addClass(a,aa);c.transitionStyle&&(C=
[N,c.transitionStyle],fa(g,C),w.push(C));0<=c.duration&&(C=0<g.style[N].length,C=Aa(c.duration,C),fa(g,C),w.push(C));c.keyframeStyle&&(C=[X,c.keyframeStyle],fa(g,C),w.push(C));var W=T?0<=c.staggerIndex?c.staggerIndex:b.count(ba):0;(ca=0===W)&&!c.skipBlocking&&ja(g,9999);var D=E(g,ha,ba),Y=D.maxDelay;I=Math.max(Y,0);K=D.maxDuration;var n={};n.hasTransitions=0<D.transitionDuration;n.hasAnimations=0<D.animationDuration;n.hasTransitionAll=n.hasTransitions&&"all"==D.transitionProperty;n.applyTransitionDuration=
k&&(n.hasTransitions&&!n.hasTransitionAll||n.hasAnimations&&!n.hasTransitions);n.applyAnimationDuration=c.duration&&n.hasAnimations;n.applyTransitionDelay=oa(c.delay)&&(n.applyTransitionDuration||n.hasTransitions);n.applyAnimationDelay=oa(c.delay)&&n.hasAnimations;n.recalculateTimingStyles=0<P.length;if(n.applyTransitionDuration||n.applyAnimationDuration)K=c.duration?parseFloat(c.duration):K,n.applyTransitionDuration&&(n.hasTransitions=!0,D.transitionDuration=K,C=0<g.style[N+"Property"].length,w.push(Aa(K,
C))),n.applyAnimationDuration&&(n.hasAnimations=!0,D.animationDuration=K,w.push([ta,K+"s"]));if(0===K&&!n.recalculateTimingStyles)return u();if(null!=c.delay){var da=parseFloat(c.delay);n.applyTransitionDelay&&w.push([ga,da+"s"]);n.applyAnimationDelay&&w.push([ka,da+"s"])}null==c.duration&&0<D.transitionDuration&&(n.recalculateTimingStyles=n.recalculateTimingStyles||ca);M=1E3*I;Q=1E3*K;c.skipBlocking||(n.blockTransition=0<D.transitionDuration,n.blockKeyframeAnimation=0<D.animationDuration&&0<T.animationDelay&&
0===T.animationDuration);wa(a,c);n.blockTransition||n.blockKeyframeAnimation?A(K):c.skipBlocking||ja(g,!1);return{$$willAnimate:!0,end:d,start:function(){if(!s)return F={end:d,cancel:p,resume:null,pause:null},m=new y(F),la(H),m}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$$body","$sniffer","$$jqLite",function(a,c,d,e,y,v,z){function l(a){return a.replace(/\bng-\S+\b/g,
"")}function s(a,b){M(a)&&(a=a.split(" "));M(b)&&(b=b.split(" "));return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function O(c,e,u){function v(a){var b={},c=G(a).getBoundingClientRect();q(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=F.scrollTop;break;case "left":d+=F.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function f(){var c=l(u.attr("class")||""),d=s(c,r),c=s(r,c),d=a(p,{to:v(u),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});
return d.$$willAnimate?d:null}function z(){p.remove();e.removeClass("ng-animate-shim");u.removeClass("ng-animate-shim")}var p=I(G(e).cloneNode(!0)),r=l(p.attr("class")||"");e.addClass("ng-animate-shim");u.addClass("ng-animate-shim");p.addClass("ng-anchor");E.append(p);var A;c=function(){var c=a(p,{addClass:"ng-anchor-out",delay:!0,from:v(e)});return c.$$willAnimate?c:null}();if(!c&&(A=f(),!A))return z();var t=c||A;return{start:function(){function a(){c&&c.end()}var b,c=t.start();c.done(function(){c=
null;if(!A&&(A=f()))return c=A.start(),c.done(function(){c=null;z();b.complete()}),c;z();b.complete()});return b=new d({end:a,cancel:a})}}}function x(a,b,c,e){var f=t(a,L),l=t(b,L),p=[];q(e,function(a){(a=O(c,a.out,a["in"]))&&p.push(a)});if(f||l||0!==p.length)return{start:function(){function a(){q(b,function(a){a.end()})}var b=[];f&&b.push(f.start());l&&b.push(l.start());q(p,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function t(c){var d=
c.element,e=c.options||{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=!0,"leave"===c.event&&(e.onDone=e.domOperation));e.preparationClasses&&(e.event=W(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!v.animations&&!v.transitions)return L;var F=G(y);c=G(e);var E=I(F.parentNode===c?F:c);Q(z);return function(a){return a.from&&a.to?x(a.from,a.to,a.classes,a.anchors):t(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=["$injector",
"$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=$(c)?c:c.split(" ");for(var d=[],e={},s=0;s<c.length;s++){var q=c[s],y=a.$$registeredAnimations[q];y&&!e[q]&&(d.push(b.get(y)),e[q]=!0)}return d}var y=Q(d);return function(a,b,d,s){function x(){s.domOperation();y(a,s)}function F(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,E,h,f];break;case "addClass":b=[b,E,f];break;case "removeClass":b=[b,h,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,b))if(Ca(a.start)&&
(a=a.start()),a instanceof c)a.done(f);else if(Ca(a))return a;return L}function t(a,b,d,e,f){var g=[];q(e,function(e){var h=e[f];h&&g.push(function(){var e,g,f=!1,l=function(a){f||(f=!0,(g||L)(a),e.complete(!a))};e=new c({end:function(){l()},cancel:function(){l(!0)}});g=F(h,a,b,d,function(a){l(!1===a)});return e})});return g}function G(a,b,d,e,f){var g=t(a,b,d,e,f);if(0===g.length){var h,k;"beforeSetClass"===f?(h=t(a,"removeClass",d,e,"beforeRemoveClass"),k=t(a,"addClass",d,e,"beforeAddClass")):"setClass"===
f&&(h=t(a,"removeClass",d,e,"removeClass"),k=t(a,"addClass",d,e,"addClass"));h&&(g=g.concat(h));k&&(g=g.concat(k))}if(0!==g.length)return function(a){var b=[];g.length&&q(g,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){q(b,function(b){a?b.cancel():b.end()})}}}3===arguments.length&&pa(d)&&(s=d,d=null);s=ia(s);d||(d=a.attr("class")||"",s.addClass&&(d+=" "+s.addClass),s.removeClass&&(d+=" "+s.removeClass));var E=s.addClass,h=s.removeClass,I=e(d),u,J;if(I.length){var f,B;"leave"==
b?(B="leave",f="afterLeave"):(B="before"+b.charAt(0).toUpperCase()+b.substr(1),f=b);"enter"!==b&&"move"!==b&&(u=G(a,b,s,I,B));J=G(a,b,s,I,f)}if(u||J)return{start:function(){function b(c){f=!0;x();ea(a,s);h.complete(c)}var d,e=[];u&&e.push(function(a){d=u(a)});e.length?e.push(function(a){x();a(!0)}):x();J&&e.push(function(a){d=J(a)});var f=!1,h=new c({end:function(){f||((d||L)(void 0),b(void 0))},cancel:function(){f||((d||L)(!0),b(!0))}});c.chain(e,b);return h}}}}]}]).provider("$$animateJsDriver",
["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),v=d(a.to);if(b||v)return{start:function(){function a(){return function(){q(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());v&&d.push(v.start());c.all(d,function(a){e.complete(a)});var e=new c({end:a(),cancel:a()});return e}}}else return d(a)}}]}])})(window,
window.angular);
//# sourceMappingURL=angular-animate.min.js.map

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
//# sourceMappingURL=underscore-min.map
/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.4 - 2015-09-03
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(a){return{link:function(b,c,d){function e(){c.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),a.addClass(c,"in",{to:{height:c[0].scrollHeight+"px"}}).then(f)}function f(){c.removeClass("collapsing"),c.css({height:"auto"})}function g(){return c.hasClass("collapse")||c.hasClass("in")?(c.css({height:c[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void a.removeClass(c,"in",{to:{height:"0"}}).then(h)):h()}function h(){c.css({height:"0"}),c.removeClass("collapsing"),c.addClass("collapse")}b.$watch(d.collapse,function(a){a?g():e()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion.html"}}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass,a.$watch("isOpen",function(c){b.toggleClass(a.openClass,c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable=!!b.close,this.close=a.close}]).directive("alert",function(){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).value("$bindHtmlUnsafeSuppressDeprecated",!1).directive("bindHtmlUnsafe",["$log","$bindHtmlUnsafeSuppressDeprecated",function(a,b){return function(c,d,e){b||a.warn("bindHtmlUnsafe is now deprecated. Use ngBindHtml instead"),d.addClass("ng-binding").data("$binding",e.bindHtmlUnsafe),c.$watch(e.bindHtmlUnsafe,function(a){d.html(a||"")})}}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(a,b,c,d){var e=d[0],f=d[1];b.find("input").css({display:"none"}),f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){if(!c.disabled){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})}})}}}).directive("btnCheckbox",["$document",function(a){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(b,c,d,e){function f(){return h(d.btnCheckboxTrue,!0)}function g(){return h(d.btnCheckboxFalse,!1)}function h(a,c){var d=b.$eval(a);return angular.isDefined(d)?d:c}var i=e[0],j=e[1];c.find("input").css({display:"none"}),j.$render=function(){c.toggleClass(i.activeClass,angular.equals(j.$modelValue,f()))},c.bind(i.toggleEvent,function(){d.disabled||b.$apply(function(){j.$setViewValue(c.hasClass(i.activeClass)?g():f()),j.$render()})}),c.on("keypress",function(e){d.disabled||32!==e.which||a[0].activeElement!==c[0]||b.$apply(function(){j.$setViewValue(c.hasClass(i.activeClass)?g():f()),j.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$element","$interval","$animate",function(a,b,c,d){function e(b,c,e){r||(angular.extend(b,{direction:e,active:!0}),angular.extend(l.currentSlide||{},{direction:e,active:!1}),d.enabled()&&!a.noTransition&&!a.$currentTransition&&b.$element&&l.slides.length>1&&(b.$element.data(p,b.direction),l.currentSlide&&l.currentSlide.$element&&l.currentSlide.$element.data(p,b.direction),a.$currentTransition=!0,n?d.on("addClass",b.$element,function(b,c){"close"===c&&(a.$currentTransition=null,d.off("addClass",b))}):b.$element.one("$animate:close",function(){a.$currentTransition=null})),l.currentSlide=b,q=c,g())}function f(a){if(angular.isUndefined(m[a].index))return m[a];var b;m.length;for(b=0;b<m.length;++b)if(m[b].index==a)return m[b]}function g(){h();var b=+a.interval;!isNaN(b)&&b>0&&(j=c(i,b))}function h(){j&&(c.cancel(j),j=null)}function i(){var b=+a.interval;k&&!isNaN(b)&&b>0&&m.length?a.next():a.pause()}var j,k,l=this,m=l.slides=a.slides=[],n=angular.version.minor>=4,o="uib-noTransition",p="uib-slideDirection",q=-1;l.currentSlide=null;var r=!1;l.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>l.getCurrentIndex()?"next":"prev"),b&&b!==l.currentSlide&&!a.$currentTransition&&e(b,d,c)},a.$on("$destroy",function(){r=!0}),l.getCurrentIndex=function(){return l.currentSlide&&angular.isDefined(l.currentSlide.index)?+l.currentSlide.index:q},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:m.indexOf(a)},a.next=function(){var b=(l.getCurrentIndex()+1)%m.length;return 0===b&&a.noWrap()?void a.pause():l.select(f(b),"next")},a.prev=function(){var b=l.getCurrentIndex()-1<0?m.length-1:l.getCurrentIndex()-1;return a.noWrap()&&b===m.length-1?void a.pause():l.select(f(b),"prev")},a.isActive=function(a){return l.currentSlide===a},a.$watch("interval",g),a.$on("$destroy",h),a.play=function(){k||(k=!0,g())},a.pause=function(){a.noPause||(k=!1,h())},l.addSlide=function(b,c){b.$element=c,m.push(b),1===m.length||b.active?(l.select(m[m.length-1]),1==m.length&&a.play()):b.active=!1},l.removeSlide=function(a){angular.isDefined(a.index)&&m.sort(function(a,b){return+a.index>+b.index});var b=m.indexOf(a);m.splice(b,1),m.length>0&&a.active?b>=m.length?l.select(m[b-1]):l.select(m[b]):q>b&&q--,0===m.length&&(l.currentSlide=null)},a.$watch("noTransition",function(a){b.data(o,a)})}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(a,b){return b.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$injector","$animate",function(a,b){function c(a,b,c){a.removeClass(b),c&&c()}var d="uib-noTransition",e="uib-slideDirection",f=null;return a.has("$animateCss")&&(f=a.get("$animateCss")),{beforeAddClass:function(a,g,h){if("active"==g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k+" "+j,h);return a.addClass(j),f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()},beforeRemoveClass:function(a,g,h){if("active"===g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k,h);return f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split("");return angular.forEach(g,function(c,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+c.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),b.push({index:f,apply:c.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var f=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var g={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},MMM:{regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:b.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},hh:{regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},h:{regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},a:{regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}}};this.parse=function(c,g,h){if(!angular.isString(c)||!g)return c;g=b.DATETIME_FORMATS[g]||g,g=g.replace(f,"\\$&"),this.parsers[g]||(this.parsers[g]=d(g));var i=this.parsers[g],j=i.regex,k=i.map,l=c.match(j);if(l&&l.length){var m,n;angular.isDate(h)&&!isNaN(h.getTime())?m={year:h.getFullYear(),month:h.getMonth(),date:h.getDate(),hours:h.getHours(),minutes:h.getMinutes(),seconds:h.getSeconds(),milliseconds:h.getMilliseconds()}:(h&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,p=l.length;p>o;o++){var q=k[o-1];q.apply&&q.apply.call(m,l[o])}return e(m.year,m.month,m.date)&&(n=new Date(m.year,m.month,m.date,m.hours,m.minutes,m.seconds,m.milliseconds||0)),n}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig","$datepickerSuppressError",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=g[d]?new Date(g[d]):null}),angular.forEach(["minMode","maxMode"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){i[d]=angular.isDefined(c)?c:b[d],a[d]=i[d],("minMode"==d&&i.modes.indexOf(a.datepickerMode)<i.modes.indexOf(i[d])||"maxMode"==d&&i.modes.indexOf(a.datepickerMode)>i.modes.indexOf(i[d]))&&(a.datepickerMode=i[d])}):(i[d]=g[d]||null,a[d]=i[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity("dateDisabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},this.fixTimeZone=function(a){var b=a.getHours();a.setHours(23===b?b+2:0)},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){i.element[0].focus()};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){for(var c,d=new Array(b),f=new Date(a),g=0;b>g;)c=new Date(f),e.fixTimeZone(c),d[g++]=c,f.setDate(f.getDate()+1);return d}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=(11-e.startingDay)%7,p=b.rows.length,q=0;p>q;q++)b.weekNumbers.push(h(b.rows[q][o].date))}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c,d=new Array(12),f=e.activeDate.getFullYear(),g=0;12>g;g++)c=new Date(f,g,1),e.fixTimeZone(c),d[g]=angular.extend(e.createDateObject(c,e.formatMonth),{uid:b.uniqueId+"-"+g});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(d,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b,c=new Array(f),g=0,h=e(d.activeDate.getFullYear());f>g;g++)b=new Date(h+g,0,1),d.fixTimeZone(b),c[g]=angular.extend(d.createDateObject(b,d.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=d.split(c,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).directive("datepickerPopup",["$compile","$parse","$document","$rootScope","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(a){if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=g.parse(a,q,j.date);return isNaN(b)?void 0:b}return void 0}return null}function p(a,b){var c=a||b;if(!l.ngRequired&&!c)return!0;if(angular.isNumber(c)&&(c=new Date(c)),c){if(angular.isDate(c)&&!isNaN(c))return!0;if(angular.isString(c)){var d=g.parse(c,q);return!isNaN(d)}return!1}return!0}var q,r=angular.isDefined(l.closeOnDateSelection)?j.$parent.$eval(l.closeOnDateSelection):h.closeOnDateSelection,s=angular.isDefined(l.datepickerAppendToBody)?j.$parent.$eval(l.datepickerAppendToBody):h.appendToBody,t=angular.isDefined(l.onOpenFocus)?j.$parent.$eval(l.onOpenFocus):h.onOpenFocus,u=angular.isDefined(l.datepickerPopupTemplateUrl)?l.datepickerPopupTemplateUrl:h.datepickerPopupTemplateUrl,v=angular.isDefined(l.datepickerTemplateUrl)?l.datepickerTemplateUrl:h.datepickerTemplateUrl,w={};j.showButtonBar=angular.isDefined(l.showButtonBar)?j.$parent.$eval(l.showButtonBar):h.showButtonBar,j.getText=function(a){return j[a+"Text"]||h[a+"Text"]},j.isDisabled=function(a){return"today"===a&&(a=new Date),j.watchData.minDate&&j.compare(a,w.minDate)<0||j.watchData.maxDate&&j.compare(a,w.maxDate)>0},j.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())};var x=!1;if(h.html5Types[l.type]?(q=h.html5Types[l.type],x=!0):(q=l.datepickerPopup||h.datepickerPopup,l.$observe("datepickerPopup",function(a,b){var c=a||h.datepickerPopup;if(c!==q&&(q=c,m.$modelValue=null,!q))throw new Error("datepickerPopup must have a date format specified.")})),!q)throw new Error("datepickerPopup must have a date format specified.");if(x&&l.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var y=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");y.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":u});var z=angular.element(y.children()[0]);if(z.attr("template-url",v),x&&"month"===l.type&&(z.attr("datepicker-mode",'"month"'),z.attr("min-mode","month")),l.datepickerOptions){var A=j.$parent.$eval(l.datepickerOptions);A&&A.initDate&&(j.initDate=A.initDate,z.attr("init-date","initDate"),delete A.initDate),angular.forEach(A,function(a,b){z.attr(n(b),a)})}j.watchData={},angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(l[a]){var c=b(l[a]);if(j.$parent.$watch(c,function(b){j.watchData[a]=b,("minDate"===a||"maxDate"===a)&&(w[a]=new Date(b))}),z.attr(n(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;j.$watch("watchData."+a,function(a,b){angular.isFunction(d)&&a!==b&&d(j.$parent,a)})}}}),l.dateDisabled&&z.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),l.showWeeks&&z.attr("show-weeks",l.showWeeks),l.customClass&&z.attr("custom-class","customClass({ date: date, mode: mode })"),x?m.$formatters.push(function(a){return j.date=a,a}):(m.$$parserName="date",m.$validators.date=p,m.$parsers.unshift(o),m.$formatters.push(function(a){return j.date=a,m.$isEmpty(a)?a:f(a,q)})),j.dateSelection=function(a){angular.isDefined(a)&&(j.date=a);var b=j.date?f(j.date,q):null;k.val(b),m.$setViewValue(b),r&&(j.isOpen=!1,k[0].focus())},m.$viewChangeListeners.push(function(){j.date=g.parse(m.$viewValue,q,j.date)});var B=function(a){!j.isOpen||k[0].contains(a.target)||y[0].contains(a.target)||j.$apply(function(){j.isOpen=!1})},C=function(a){27===a.which&&j.isOpen?(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!1}),k[0].focus()):40!==a.which||j.isOpen||(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!0}))};k.bind("keydown",C),j.keydown=function(a){27===a.which&&(j.isOpen=!1,k[0].focus())},j.$watch("isOpen",function(a){a?(j.position=s?e.offset(k):e.position(k),j.position.top=j.position.top+k.prop("offsetHeight"),i(function(){t&&j.$broadcast("datepicker.focus"),c.bind("click",B)},0,!1)):c.unbind("click",B)}),j.select=function(a){if("today"===a){var b=new Date;angular.isDate(j.date)?(a=new Date(j.date),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}j.dateSelection(a)},j.close=function(){j.isOpen=!1,k[0].focus()};var D=a(y)(j);y.remove(),s?c.find("body").append(D):k.after(D),j.$on("$destroy",function(){j.isOpen===!0&&(d.$$phase||j.$apply(function(){j.isOpen=!1})),D.remove(),k.unbind("keydown",C),c.unbind("click",B)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&/(38|40)/.test(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j){var k,l,m=this,n=a.$new(),o=d.openClass,p=angular.noop,q=b.onToggle?c(b.onToggle):angular.noop,r=!1,s=!1,t=h.find("body");this.init=function(d){m.$element=d,b.isOpen&&(l=c(b.isOpen),p=l.assign,a.$watch(l,function(a){n.isOpen=!!a})),r=angular.isDefined(b.dropdownAppendToBody),s=angular.isDefined(b.keyboardNav),r&&m.dropdownMenu&&(t.append(m.dropdownMenu),t.addClass("dropdown"),d.on("$destroy",function(){m.dropdownMenu.remove()}))},this.toggle=function(a){return n.isOpen=arguments.length?!!a:!n.isOpen},this.isOpen=function(){return n.isOpen},n.getToggleElement=function(){return m.toggleElement},n.getAutoClose=function(){return b.autoClose||"always"},n.getElement=function(){return m.$element},n.isKeynavEnabled=function(){return s},n.focusDropdownEntry=function(a){var b=m.dropdownMenu?angular.element(m.dropdownMenu).find("a"):angular.element(m.$element).find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(m.selectedOption)?m.selectedOption=m.selectedOption===b.length-1?m.selectedOption:m.selectedOption+1:m.selectedOption=0;break;case 38:angular.isNumber(m.selectedOption)?m.selectedOption=0===m.selectedOption?0:m.selectedOption-1:m.selectedOption=b.length-1}b[m.selectedOption].focus()},n.getDropdownElement=function(){return m.dropdownMenu},n.focusToggleElement=function(){m.toggleElement&&m.toggleElement[0].focus()},n.$watch("isOpen",function(b,c){if(r&&m.dropdownMenu){var d=g.positionElements(m.$element,m.dropdownMenu,"bottom-left",!0),h={top:d.top+"px",display:b?"block":"none"},l=m.dropdownMenu.hasClass("dropdown-menu-right");l?(h.left="auto",h.right=window.innerWidth-(d.left+m.$element.prop("offsetWidth"))+"px"):(h.left=d.left+"px",h.right="auto"),m.dropdownMenu.css(h)}var s=r?t:m.$element;if(f[b?"addClass":"removeClass"](s,o).then(function(){angular.isDefined(b)&&b!==c&&q(a,{open:!!b})}),b)m.dropdownMenuTemplateUrl&&j(m.dropdownMenuTemplateUrl).then(function(a){k=n.$new(),i(a.trim())(k,function(a){var b=a;m.dropdownMenu.replaceWith(b),m.dropdownMenu=b})}),n.focusToggleElement(),e.open(n);else{if(m.dropdownMenuTemplateUrl){k&&k.$destroy();var u=angular.element('<ul class="dropdown-menu"></ul>');m.dropdownMenu.replaceWith(u),m.dropdownMenu=u}e.close(n),m.selectedOption=null}angular.isFunction(p)&&p(a,b)}),a.$on("$locationChangeSuccess",function(){"disabled"!==n.getAutoClose()&&(n.isOpen=!1)});var u=a.$on("$destroy",function(){
n.$destroy()});n.$on("$destroy",u)}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b),b.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){if(d){var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(a,b,c,d){b.bind("keydown",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=d.dropdownMenu.find("a");switch(a.which){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===b.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=b.length-1}b[d.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).directive("modalBackdrop",["$animate","$injector","$modalStack",function(a,b,c){function d(b,d,f){f.modalInClass&&(e?e(d,{addClass:f.modalInClass}).start():a.addClass(d,f.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var g=c();e?e(d,{removeClass:f.modalInClass}).start().then(g):a.removeClass(d,f.modalInClass).then(g)}))}var e=null;return b.has("$animateCss")&&(e=b.get("$animateCss")),{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector",function(a,b,c,d){var e=null;return d.has("$animateCss")&&(e=d.get("$animateCss")),{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(d,f,g){f.addClass(g.windowClass||""),d.size=g.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},d.$isRendered=!0;var h=b.defer();g.$observe("modalRender",function(a){"true"==a&&h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=e?e(f,{addClass:g.modalInClass}).start():c.addClass(f,g.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();e?e(f,{removeClass:g.modalInClass}).start().then(d):c.removeClass(f,g.modalInClass).then(d)})),b.when(h).then(function(){var a=f[0].querySelectorAll("[autofocus]");a.length?a[0].focus():f[0].focus()});var i=a.getTop();i&&a.modalRendered(i.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h,i){function j(){for(var a=-1,b=t.keys(),c=0;c<b.length;c++)t.get(b[c]).value.backdrop&&(a=c);return a}function k(a,b){var d=c.find("body").eq(0),e=t.get(a).value;t.remove(a),m(e.modalDomEl,e.modalScope,function(){var b=e.openedClass||s;u.remove(b,a),d.toggleClass(b,u.hasKey(b))}),l(),b&&b.focus?b.focus():d.focus()}function l(){if(p&&-1==j()){var a=q;m(p,q,function(){a=null}),p=void 0,q=void 0}}function m(b,c,d){function e(){e.done||(e.done=!0,o?o(b,{event:"leave"}).start().then(function(){b.remove()}):a.leave(b),c.$destroy(),d&&d())}var g,h=null,i=function(){return g||(g=f.defer(),h=g.promise),function(){g.resolve()}};return c.$broadcast(v.NOW_CLOSING_EVENT,i),f.when(h).then(e)}function n(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var o=null;g.has("$animateCss")&&(o=g.get("$animateCss"));var p,q,r,s="modal-open",t=i.createNew(),u=h.createNew(),v={NOW_CLOSING_EVENT:"modal.stack.now-closing"},w=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(j,function(a){q&&(q.index=a)}),c.bind("keydown",function(a){if(a.isDefaultPrevented())return a;var b=t.top();if(b&&b.value.keyboard)switch(a.which){case 27:a.preventDefault(),e.$apply(function(){v.dismiss(b.key,"escape key press")});break;case 9:v.loadFocusElementList(b);var c=!1;a.shiftKey?v.isFocusInFirstItem(a)&&(c=v.focusLastFocusableElement()):v.isFocusInLastItem(a)&&(c=v.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}),v.open=function(a,b){var f=c[0].activeElement,g=b.openedClass||s;t.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard,openedClass:b.openedClass}),u.put(g,a);var h=c.find("body").eq(0),i=j();if(i>=0&&!p){q=e.$new(!0),q.index=i;var k=angular.element('<div modal-backdrop="modal-backdrop"></div>');k.attr("backdrop-class",b.backdropClass),b.animation&&k.attr("modal-animation","true"),p=d(k)(q),h.append(p)}var l=angular.element('<div modal-window="modal-window"></div>');l.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:t.length()-1,animate:"animate"}).html(b.content),b.animation&&l.attr("modal-animation","true");var m=d(l)(b.scope);t.top().value.modalDomEl=m,t.top().value.modalOpener=f,h.append(m),h.addClass(g),v.clearFocusListCache()},v.close=function(a,b){var c=t.get(a);return c&&n(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},v.dismiss=function(a,b){var c=t.get(a);return c&&n(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},v.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},v.getTop=function(){return t.top()},v.modalRendered=function(a){var b=t.get(a);b&&b.value.renderDeferred.resolve()},v.focusFirstFocusableElement=function(){return r.length>0?(r[0].focus(),!0):!1},v.focusLastFocusableElement=function(){return r.length>0?(r[r.length-1].focus(),!0):!1},v.isFocusInFirstItem=function(a){return r.length>0?(a.target||a.srcElement)==r[0]:!1},v.isFocusInLastItem=function(a){return r.length>0?(a.target||a.srcElement)==r[r.length-1]:!1},v.clearFocusListCache=function(){r=[],w=0},v.loadFocusElementList=function(a){if((void 0===r||!r.length0)&&a){var b=a.value.modalDomEl;b&&b.length&&(r=b[0].querySelectorAll(x))}},v}]).provider("$modal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(b,c,d,e,f,g){function h(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function i(a){var c=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?c.push(d.when(b.invoke(a))):angular.isString(a)?c.push(d.when(b.get(a))):c.push(d.when(a))}),c}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(b){var e=d.defer(),j=d.defer(),l=d.defer(),m={result:e.promise,opened:j.promise,rendered:l.promise,close:function(a){return g.close(m,a)},dismiss:function(a){return g.dismiss(m,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var n,o=d.all([h(b)].concat(i(b.resolve)));return n=k=d.all([k]).then(function(){return o},function(){return o}).then(function(a){var d=(b.scope||c).$new();d.$close=m.close,d.$dismiss=m.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var h,i={},k=1;b.controller&&(i.$scope=d,i.$modalInstance=m,angular.forEach(b.resolve,function(b,c){i[c]=a[k++]}),h=f(b.controller,i),b.controllerAs&&(b.bindToController&&angular.extend(h,d),d[b.controllerAs]=h)),g.open(m,{scope:d,deferred:e,renderDeferred:l,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size,openedClass:b.openedClass}),j.resolve(!0)},function(a){j.reject(a),e.reject(a)})["finally"](function(){k===n&&(k=null)}),m},j}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate","$rootScope","$parse",function(e,f,g,h,i,j,k,l){return function(e,m,n,o){function p(a){var b=(a||o.trigger||n).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}o=angular.extend({},b,d,o);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(o.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){I.isOpen?q():n()}function n(){(!H||a.$eval(d[m+"Enable"]))&&(v(),I.popupDelay?D||(D=g(r,I.popupDelay,!1)):r())}function q(){s(),k.$$phase||k.$digest()}function r(){return D=null,C&&(g.cancel(C),C=null),(o.useContentExp?I.contentExp():I.content)?(t(),I.isOpen=!0,K&&K.assign(I.origScope,I.isOpen),k.$$phase||I.$apply(),A.css({display:"block"}),void L()):angular.noop}function s(){I.isOpen=!1,K&&K.assign(I.origScope,I.isOpen),g.cancel(D),D=null,g.cancel(E),E=null,I.animation?C||(C=g(u,500)):u()}function t(){A&&u(),B=I.$new(),A=c(B,function(a){F?h.find("body").append(a):b.after(a)}),o.useContentExp&&(B.$watch("contentExp()",function(a){!a&&I.isOpen&&s()}),B.$watch(function(){J||(J=!0,B.$$postDigest(function(){J=!1,I.isOpen&&L()}))}))}function u(){C=null,A&&(A.remove(),A=null),B&&(B.$destroy(),B=null)}function v(){w(),x(),y()}function w(){I.popupClass=d[m+"Class"]}function x(){var a=d[m+"Placement"];I.placement=angular.isDefined(a)?a:o.placement}function y(){var a=d[m+"PopupDelay"],b=parseInt(a,10);I.popupDelay=isNaN(b)?o.popupDelay:b}function z(){var a=d[m+"Trigger"];M(),G=p(a),"none"!==G.show&&G.show.forEach(function(a,c){a===G.hide[c]?b[0].addEventListener(a,j):a&&(b[0].addEventListener(a,n),b[0].addEventListener(G.hide[c],q))})}var A,B,C,D,E,F=angular.isDefined(o.appendToBody)?o.appendToBody:!1,G=p(void 0),H=angular.isDefined(d[m+"Enable"]),I=a.$new(!0),J=!1,K=angular.isDefined(d[m+"IsOpen"])?l(d[m+"IsOpen"]):!1,L=function(){A&&(E||(E=g(function(){A.css({top:0,left:0,width:"auto",height:"auto"});var a=i.position(A),c=i.positionElements(b,A,I.placement,F);c.top+="px",c.left+="px",c.width=a.width+"px",c.height=a.height+"px",A.css(c),E=null},0,!1)))};I.origScope=a,I.isOpen=!1,I.contentExp=function(){return a.$eval(d[e])},o.useContentExp||d.$observe(e,function(a){I.content=a,!a&&I.isOpen?s():L()}),d.$observe("disabled",function(a){D&&a&&(g.cancel(D),D=null),a&&I.isOpen&&s()}),d.$observe(m+"Title",function(a){I.title=a,L()}),d.$observe(m+"Placement",function(){I.isOpen&&(x(),L())}),K&&a.$watch(K,function(a){a!==I.isOpen&&j()});var M=function(){G.show.forEach(function(a){b.unbind(a,n)}),G.hide.forEach(function(a){b.unbind(a,q)})};z();var N=a.$eval(d[m+"Animation"]);I.animation=angular.isDefined(N)?!!N:o.animation;var O=a.$eval(d[m+"AppendToBody"]);F=angular.isDefined(O)?O:F,F&&a.$on("$locationChangeSuccess",function(){I.isOpen&&s()}),a.$on("$destroy",function(){g.cancel(C),g.cancel(D),g.cancel(E),M(),u(),I=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.tooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(a,b,c){return b||c.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html"}}).directive("popoverHtml",["$tooltip",function(a){return a("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){b.percent=+(100*b.value/b.max).toFixed(2);var a=d.bars.reduce(function(a,b){return a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("progress",["$log","$progressSuppressWarning",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html",link:function(){b&&a.warn("progress is now deprecated. Use uib-progress instead")}}}]).directive("uibBar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("bar",["$log","$progressSuppressWarning",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(c,d,e,f){b&&a.warn("bar is now deprecated. Use uib-bar instead"),f.addBar(c,d)}}}]).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse","$log",function(a,b){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(c,d,e,f,g){c.$watch("active",function(a){a&&f.select(c)}),c.disabled=!1,e.disable&&c.$parent.$watch(a(e.disable),function(a){c.disabled=!!a}),e.disabled&&(b.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),c.$parent.$watch(a(e.disabled),function(a){c.disabled=!!a})),c.select=function(){c.disabled||(c.active=!0)},f.addTab(c),c.$on("$destroy",function(){f.removeTab(c)}),c.$transcludeFn=g}}}]).directive("tabHeadingTransclude",function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===q[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function j(a){k(),p.$setViewValue(new Date(o)),l(a)}function k(){p.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=o.getHours(),d=o.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),"m"!==b&&(a.minutes=i(d)),a.meridian=o.getHours()<12?q[0]:q[1]}function m(a,b){var c=new Date(a.getTime()+6e4*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes()),d}function n(a){o=m(o,a),j()}var o=new Date,p={$setViewValue:angular.noop},q=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){p=c,p.$render=this.render,p.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g);var i=angular.isDefined(b.arrowkeys)?a.$parent.$eval(b.arrowkeys):f.arrowkeys;i&&this.setupArrowkeyEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var r=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){r=parseInt(a,10)});var s=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){s=parseInt(a,10)});var t;a.$parent.$watch(c(b.min),function(a){var b=new Date(a);t=isNaN(b)?void 0:b});var u;a.$parent.$watch(c(b.max),function(a){var b=new Date(a);u=isNaN(b)?void 0:b}),a.noIncrementHours=function(){var a=m(o,60*r);return a>u||o>a&&t>a},a.noDecrementHours=function(){var a=m(o,60*-r);return t>a||a>o&&a>u},a.noIncrementMinutes=function(){var a=m(o,s);return a>u||o>a&&t>a},a.noDecrementMinutes=function(){var a=m(o,-s);return t>a||a>o&&a>u},a.noToggleMeridian=function(){return o.getHours()<13?m(o,720)>u:m(o,-720)<t},a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,p.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(o.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){p.$setViewValue(null),p.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g(),b=h();angular.isDefined(a)&&angular.isDefined(b)?(o.setHours(a),t>o||o>u?d(!0):j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h(),b=g();angular.isDefined(a)&&angular.isDefined(b)?(o.setMinutes(a),t>o||o>u?d(void 0,!0):j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var b=p.$viewValue;isNaN(b)?(p.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(o=b),t>o||o>u?(p.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):k(),l())},a.showSpinners=angular.isDefined(b.showSpinners)?a.$parent.$eval(b.showSpinners):f.showSpinners,a.incrementHours=function(){a.noIncrementHours()||n(60*r)},a.decrementHours=function(){a.noDecrementHours()||n(60*-r)},a.incrementMinutes=function(){a.noIncrementMinutes()||n(s)},a.decrementMinutes=function(){a.noDecrementMinutes()||n(-s)},a.toggleMeridian=function(){a.noToggleMeridian()||n(720*(o.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||"template/timepicker/timepicker.html"},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(a,b,c,d,e){function f(a){for(var b in a)if(void 0!==h.style[b])return a[b]}e||d.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var g=function(d,e,f){f=f||{};var h=a.defer(),i=g[f.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(e)?d.addClass(e):angular.isFunction(e)?e(d):angular.isObject(e)&&d.css(e),i||h.resolve(d)}),h.promise.cancel=function(){
i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},h=document.createElement("trans"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},j={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return g.transitionEndEventName=f(i),g.animationEndEventName=f(j),g}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function(a,b,c,d,e,f,g,h,i){var j=[9,13,27,38,40],k=200;return{require:["ngModel","^?ngModelOptions"],link:function(l,m,n,o){function p(){K.moveInProgress||(K.moveInProgress=!0,K.$digest()),S&&d.cancel(S),S=d(function(){K.matches.length&&q(),K.moveInProgress=!1,K.$digest()},k)}function q(){K.position=D?h.offset(m):h.position(m),K.position.top+=m.prop("offsetHeight")}var r=o[0],s=o[1],t=l.$eval(n.typeaheadMinLength);t||0===t||(t=1);var u,v,w=l.$eval(n.typeaheadWaitMs)||0,x=l.$eval(n.typeaheadEditable)!==!1,y=b(n.typeaheadLoading).assign||angular.noop,z=b(n.typeaheadOnSelect),A=angular.isDefined(n.typeaheadSelectOnBlur)?l.$eval(n.typeaheadSelectOnBlur):!1,B=b(n.typeaheadNoResults).assign||angular.noop,C=n.typeaheadInputFormatter?b(n.typeaheadInputFormatter):void 0,D=n.typeaheadAppendToBody?l.$eval(n.typeaheadAppendToBody):!1,E=l.$eval(n.typeaheadFocusFirst)!==!1,F=n.typeaheadSelectOnExact?l.$eval(n.typeaheadSelectOnExact):!1,G=b(n.ngModel),H=b(n.ngModel+"($$$p)"),I=function(a,b){return angular.isFunction(G(l))&&s&&s.$options&&s.$options.getterSetter?H(a,{$$$p:b}):G.assign(a,b)},J=i.parse(n.typeahead),K=l.$new(),L=l.$on("$destroy",function(){K.$destroy()});K.$on("$destroy",L);var M="typeahead-"+K.$id+"-"+Math.floor(1e4*Math.random());m.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var N=angular.element("<div typeahead-popup></div>");N.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(n.typeaheadTemplateUrl)&&N.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&N.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var O=function(){K.matches=[],K.activeIdx=-1,m.attr("aria-expanded",!1)},P=function(a){return M+"-option-"+a};K.$watch("activeIdx",function(a){0>a?m.removeAttr("aria-activedescendant"):m.attr("aria-activedescendant",P(a))});var Q=function(a,b){return K.matches.length>b&&a?a.toUpperCase()===K.matches[b].label.toUpperCase():!1},R=function(a){var b={$viewValue:a};y(l,!0),B(l,!1),c.when(J.source(l,b)).then(function(c){var d=a===r.$viewValue;if(d&&u)if(c&&c.length>0){K.activeIdx=E?0:-1,B(l,!1),K.matches.length=0;for(var e=0;e<c.length;e++)b[J.itemName]=c[e],K.matches.push({id:P(e),label:J.viewMapper(K,b),model:c[e]});K.query=a,q(),m.attr("aria-expanded",!0),F&&1===K.matches.length&&Q(a,0)&&K.select(0)}else O(),B(l,!0);d&&y(l,!1)},function(){O(),y(l,!1),B(l,!0)})};D&&(angular.element(f).bind("resize",p),e.find("body").bind("scroll",p));var S;K.moveInProgress=!1,O(),K.query=void 0;var T,U=function(a){T=d(function(){R(a)},w)},V=function(){T&&d.cancel(T)};r.$parsers.unshift(function(a){return u=!0,0===t||a&&a.length>=t?w>0?(V(),U(a)):R(a):(y(l,!1),V(),O()),x?a:a?void r.$setValidity("editable",!1):(r.$setValidity("editable",!0),null)}),r.$formatters.push(function(a){var b,c,d={};return x||r.$setValidity("editable",!0),C?(d.$model=a,C(l,d)):(d[J.itemName]=a,b=J.viewMapper(l,d),d[J.itemName]=void 0,c=J.viewMapper(l,d),b!==c?b:a)}),K.select=function(a){var b,c,e={};v=!0,e[J.itemName]=c=K.matches[a].model,b=J.modelMapper(l,e),I(l,b),r.$setValidity("editable",!0),r.$setValidity("parse",!0),z(l,{$item:c,$model:b,$label:J.viewMapper(l,e)}),O(),K.$eval(n.typeaheadFocusOnSelect)!==!1&&d(function(){m[0].focus()},0,!1)},m.bind("keydown",function(a){if(0!==K.matches.length&&-1!==j.indexOf(a.which)){if(-1===K.activeIdx&&(9===a.which||13===a.which))return O(),void K.$digest();a.preventDefault(),40===a.which?(K.activeIdx=(K.activeIdx+1)%K.matches.length,K.$digest()):38===a.which?(K.activeIdx=(K.activeIdx>0?K.activeIdx:K.matches.length)-1,K.$digest()):13===a.which||9===a.which?K.$apply(function(){K.select(K.activeIdx)}):27===a.which&&(a.stopPropagation(),O(),K.$digest())}}),m.bind("blur",function(){A&&K.matches.length&&-1!==K.activeIdx&&!v&&(v=!0,K.$apply(function(){K.select(K.activeIdx)})),u=!1,v=!1});var W=function(a){m[0]!==a.target&&3!==a.which&&0!==K.matches.length&&(O(),g.$$phase||K.$digest())};e.bind("click",W),l.$on("$destroy",function(){e.unbind("click",W),D&&X.remove(),N.remove()});var X=a(N)(K);D?e.find("body").append(X):m.after(X)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close($event)">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n    modal-in-class="in"\n	ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" ></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | typeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');
/*! jQuery spinner - v0.1.6 - 2015-03-09
* https://github.com/xixilive/jquery-spinner
* Copyright (c) 2015 xixilive; Licensed MIT */
!function(a){"use strict";var b,c=function(b,d){return d=a.extend({},d),this.$el=b,this.options=a.extend({},c.rules.defaults,c.rules[d.rule]||{},d),this.min=parseFloat(this.options.min)||0,this.max=parseFloat(this.options.max)||0,this.$el.on("focus.spinner",a.proxy(function(b){b.preventDefault(),a(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this)).on("change.spinner",a.proxy(function(a){a.preventDefault(),this.value(this.$el.val())},this)).on("keydown.spinner",a.proxy(function(a){var b={38:"up",40:"down"}[a.which];b&&(a.preventDefault(),this.spin(b))},this)),this.oldValue=this.value(),this.value(this.$el.val()),this};c.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},c.prototype={spin:function(b){if("disabled"!==this.$el.attr("disabled")){this.oldValue=this.value();var c=a.isFunction(this.options.step)?this.options.step.call(this,b):this.options.step;switch(b){case"up":this.value(this.oldValue+Number(c,10));break;case"down":this.value(this.oldValue-Number(c,10))}}},value:function(c){if(null===c||void 0===c)return this.numeric(this.$el.val());c=this.numeric(c);var e=this.validate(c);0!==e&&(c=-1===e?this.min:this.max),this.$el.val(c.toFixed(this.options.precision)),this.oldValue!==this.value()&&(this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(b),b=setTimeout(a.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),d.delay))},numeric:function(a){return a=this.options.precision>0?parseFloat(a,10):parseInt(a,10),!isNaN(parseFloat(a))&&isFinite(a)?a:a||this.options.min||0},validate:function(a){return null!==this.options.min&&a<this.min?-1:null!==this.options.max&&a>this.max?1:0}};var d=function(b,d){d=a.extend({},d),this.$el=b,this.$spinning=a("[data-spin='spinner']",this.$el),0===this.$spinning.length&&(this.$spinning=a(":input[type='text']",this.$el)),this.spinning=new c(this.$spinning,a.extend(this.$spinning.data(),d)),this.$el.on("click.spinner","[data-spin='up'],[data-spin='down']",a.proxy(this.spin,this)).on("mousedown.spinner","[data-spin='up'],[data-spin='down']",a.proxy(this.spin,this)),a(document).on("mouseup.spinner",a.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),d.delay&&this.delay(d.delay),d.changed&&this.changed(d.changed),d.changing&&this.changing(d.changing)};d.delay=500,d.prototype={constructor:d,spin:function(b){var c=a(b.currentTarget).data("spin");switch(b.type){case"click":b.preventDefault(),this.spinning.spin(c);break;case"mousedown":1===b.which&&(this.spinTimeout=setTimeout(a.proxy(this.beginSpin,this,c),300))}},delay:function(a){var b=parseInt(a,10);b>=0&&(this.constructor.delay=b+100)},value:function(){return this.spinning.value()},changed:function(a){this.bindHandler("changed.spinner",a)},changing:function(a){this.bindHandler("changing.spinner",a)},bindHandler:function(b,c){a.isFunction(c)?this.$spinning.on(b,c):this.$spinning.off(b)},beginSpin:function(b){this.spinInterval=setInterval(a.proxy(this.spinning.spin,this.spinning,b),100)}},a.fn.spinner=function(b,c){return this.each(function(){var e=a(this),f=e.data("spinner");f||e.data("spinner",f=new d(e,a.extend({},e.data(),b))),("delay"===b||"changed"===b||"changing"===b)&&f[b](c),"step"===b&&c&&(f.spinning.step=c),"spin"===b&&c&&f.spinning.spin(c)})},a(function(){a('[data-trigger="spinner"]').spinner()})}(jQuery);
/*! =======================================================
                      VERSION  5.1.1              
========================================================= */
/*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(a,b){if("function"==typeof define&&define.amd)define(["jquery"],b);else if("object"==typeof module&&module.exports){var c;try{c=require("jquery")}catch(d){c=null}module.exports=b(c)}else a.Slider=b(a.jQuery)}(this,function(a){var b;return function(a){"use strict";function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function c(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var f=Object.keys(this.defaultOptions),g=0;g<f.length;g++){var h=f[g],i=c[h];i="undefined"!=typeof i?i:d(this.element,h),i=null!==i?i:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=i}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");if(r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",n=document.createElement("div"),n.className="slider-handle max-slider-handle",r.appendChild(k),r.appendChild(j),r.appendChild(l),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(g=0;g<this.options.ticks.length;g++){var s=document.createElement("div");s.className="slider-tick",this.ticks.push(s),r.appendChild(s)}j.className+=" tick-slider-selection"}if(r.appendChild(m),r.appendChild(n),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",g=0;g<this.options.ticks_labels.length;g++){var t=document.createElement("div");t.className="slider-tick-label",t.innerHTML=this.options.ticks_labels[g],this.tickLabels.push(t),this.tickLabelContainer.appendChild(t)}var u=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},v=document.createElement("div");v.className="tooltip tooltip-main",u(v);var w=document.createElement("div");w.className="tooltip tooltip-min",u(w);var x=document.createElement("div");x.className="tooltip tooltip-max",u(x),this.sliderElem.appendChild(r),this.sliderElem.appendChild(v),this.sliderElem.appendChild(w),this.sliderElem.appendChild(x),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),e[this.options.scale]&&(this.options.scale=e[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),g=0;g<this.ticks.length;g++)this._removeClass(this.ticks[g],"round triangle hide");var y=["round","triangle","custom"],z=-1!==y.indexOf(this.options.handle);if(z)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),g=0;g<this.ticks.length;g++)this._addClass(this.ticks[g],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var d={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var c,d,e,f=0,g=0;g<this.options.ticks_positions.length;g++)if(a<=this.options.ticks_positions[g]){c=g>0?this.options.ticks[g-1]:0,e=g>0?this.options.ticks_positions[g-1]:0,d=this.options.ticks[g],f=this.options.ticks_positions[g];break}if(g>0){var h=(a-e)/(f-e);b=c+h*(d-c)}}var i=this.options.min+Math.round(b/this.options.step)*this.options.step;return i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};if(b=function(a,b){return c.call(this,a,b),this},b.prototype={_init:function(){},constructor:b,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var f=this.options.range?this._state.value:this._state.value[0];return b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this._setDataVal(f),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),c.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.handle2.removeEventListener("focus",this.handle2Keydown,!1),this.handle2.removeEventListener("blur",this.handle2Keydown,!1),this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var c=this.eventToCallbackMap[a];if(void 0!==c)for(var d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle2.style[this.stylePos]=a[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b=Math.max.apply(Math,this.options.ticks),c=Math.min.apply(Math,this.options.ticks),d="vertical"===this.options.orientation?"height":"width",e="vertical"===this.options.orientation?"marginTop":"marginLeft",f=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var g=0;if(0===this.options.ticks_positions.length)this.tickLabelContainer.style[e]=-f/2+"px",g=this.tickLabelContainer.offsetHeight;else for(h=0;h<this.tickLabelContainer.childNodes.length;h++)this.tickLabelContainer.childNodes[h].offsetHeight>g&&(g=this.tickLabelContainer.childNodes[h].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=g+"px")}for(var h=0;h<this.options.ticks.length;h++){var i=this.options.ticks_positions[h]||100*(this.options.ticks[h]-c)/(b-c);this.ticks[h].style[this.stylePos]=i+"%",this._removeClass(this.ticks[h],"in-selection"),this.options.range?i>=a[0]&&i<=a[1]&&this._addClass(this.ticks[h],"in-selection"):"after"===this.options.selection&&i>=a[0]?this._addClass(this.ticks[h],"in-selection"):"before"===this.options.selection&&i<=a[0]&&this._addClass(this.ticks[h],"in-selection"),this.tickLabels[h]&&(this.tickLabels[h].style[d]=f+"px",void 0!==this.options.ticks_positions[h]&&(this.tickLabels[h].style.position="absolute",this.tickLabels[h].style[this.stylePos]=this.options.ticks_positions[h]+"%",this.tickLabels[h].style[e]=-f/2+"px"))}}var j;if(this.options.range){j=this.options.formatter(this._state.value),this._setText(this.tooltipInner,j),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var k=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,k);var l=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,l),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else j=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,j),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var m=this.tooltip_min.getBoundingClientRect(),n=this.tooltip_max.getBoundingClientRect();m.right>n.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b);this._state.dragged=d>c?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this._state.value[a]+c*this.options.step;return this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a);b=b?b-1:0;var c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=d/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(d.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(d.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.innerText?a.innerText=b:"undefined"!=typeof a.textContent&&(a.textContent=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop;return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b=this.options.tooltip_position||"right",c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))}else a.forEach("bottom"===this.options.tooltip_position?function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this):function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a){var f=a.fn.slider?"bootstrapSlider":"slider";a.bridget(f,b)}}(a),b});
/*! 
 * jQuery Steps v1.1.0 - 09/04/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-steps.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){function c(a,b){o(a).push(b)}function d(d,e,f){var g=d.children(e.headerTag),h=d.children(e.bodyTag);g.length>h.length?R(Z,"contents"):g.length<h.length&&R(Z,"titles");var i=e.startIndex;if(f.stepCount=g.length,e.saveState&&a.cookie){var j=a.cookie(U+q(d)),k=parseInt(j,0);!isNaN(k)&&k<f.stepCount&&(i=k)}f.currentIndex=i,g.each(function(e){var f=a(this),g=h.eq(e),i=g.data("mode"),j=null==i?$.html:r($,/^\s*$/.test(i)||isNaN(i)?i:parseInt(i,0)),k=j===$.html||g.data("url")===b?"":g.data("url"),l=j!==$.html&&"1"===g.data("loaded"),m=a.extend({},bb,{title:f.html(),content:j===$.html?g.html():"",contentUrl:k,contentMode:j,contentLoaded:l});c(d,m)})}function e(a){a.triggerHandler("canceled")}function f(a,b){return a.currentIndex-b}function g(b,c){var d=i(b);b.unbind(d).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(d),b.removeClass(c.clearFixCssClass+" vertical");var e=b.find(".content > *");e.removeData("loaded").removeData("mode").removeData("url"),e.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),b.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var f=a('<{0} class="{1}"></{0}>'.format(b.get(0).tagName,b.attr("class"))),g=b._id();return null!=g&&""!==g&&f._id(g),f.html(b.find(".content").html()),b.after(f),b.remove(),f}function h(a,b){var c=a.find(".steps li").eq(b.currentIndex);a.triggerHandler("finishing",[b.currentIndex])?(c.addClass("done").removeClass("error"),a.triggerHandler("finished",[b.currentIndex])):c.addClass("error")}function i(a){var b=a.data("eventNamespace");return null==b&&(b="."+q(a),a.data("eventNamespace",b)),b}function j(a,b){var c=q(a);return a.find("#"+c+V+b)}function k(a,b){var c=q(a);return a.find("#"+c+W+b)}function l(a,b){var c=q(a);return a.find("#"+c+X+b)}function m(a){return a.data("options")}function n(a){return a.data("state")}function o(a){return a.data("steps")}function p(a,b){var c=o(a);return(0>b||b>=c.length)&&R(Y),c[b]}function q(a){var b=a.data("uid");return null==b&&(b=a._id(),null==b&&(b="steps-uid-".concat(T),a._id(b)),T++,a.data("uid",b)),b}function r(a,c){if(S("enumType",a),S("keyOrValue",c),"string"==typeof c){var d=a[c];return d===b&&R("The enum key '{0}' does not exist.",c),d}if("number"==typeof c){for(var e in a)if(a[e]===c)return c;R("Invalid enum value '{0}'.",c)}else R("Invalid key or value type.")}function s(a,b,c){return B(a,b,c,v(c,1))}function t(a,b,c){return B(a,b,c,f(c,1))}function u(a,b,c,d){if((0>d||d>=c.stepCount)&&R(Y),!(b.forceMoveForward&&d<c.currentIndex)){var e=c.currentIndex;return a.triggerHandler("stepChanging",[c.currentIndex,d])?(c.currentIndex=d,O(a,b,c),E(a,b,c,e),D(a,b,c),A(a,b,c),P(a,b,c,d,e,function(){a.triggerHandler("stepChanged",[d,e])})):a.find(".steps li").eq(e).addClass("error"),!0}}function v(a,b){return a.currentIndex+b}function w(b){var c=a.extend(!0,{},cb,b);return this.each(function(){var b=a(this),e={currentIndex:c.startIndex,currentStep:null,stepCount:0,transitionElement:null};b.data("options",c),b.data("state",e),b.data("steps",[]),d(b,c,e),J(b,c,e),G(b,c),c.autoFocus&&0===T&&j(b,c.startIndex).focus(),b.triggerHandler("init",[c.startIndex])})}function x(b,c,d,e,f){(0>e||e>d.stepCount)&&R(Y),f=a.extend({},bb,f),y(b,e,f),d.currentIndex!==d.stepCount&&d.currentIndex>=e&&(d.currentIndex++,O(b,c,d)),d.stepCount++;var g=b.find(".content"),h=a("<{0}>{1}</{0}>".format(c.headerTag,f.title)),i=a("<{0}></{0}>".format(c.bodyTag));return(null==f.contentMode||f.contentMode===$.html)&&i.html(f.content),0===e?g.prepend(i).prepend(h):k(b,e-1).after(i).after(h),K(b,d,i,e),N(b,c,d,h,e),F(b,c,d,e),e===d.currentIndex&&E(b,c,d),D(b,c,d),b}function y(a,b,c){o(a).splice(b,0,c)}function z(b){var c=a(this),d=m(c),e=n(c);if(d.suppressPaginationOnFocus&&c.find(":focus").is(":input"))return b.preventDefault(),!1;var f={left:37,right:39};b.keyCode===f.left?(b.preventDefault(),t(c,d,e)):b.keyCode===f.right&&(b.preventDefault(),s(c,d,e))}function A(b,c,d){if(d.stepCount>0){var e=d.currentIndex,f=p(b,e);if(!c.enableContentCache||!f.contentLoaded)switch(r($,f.contentMode)){case $.iframe:b.find(".content > .body").eq(d.currentIndex).empty().html('<iframe src="'+f.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case $.async:var g=k(b,e)._aria("busy","true").empty().append(M(c.loadingTemplate,{text:c.labels.loading}));a.ajax({url:f.contentUrl,cache:!1}).done(function(a){g.empty().html(a)._aria("busy","false").data("loaded","1"),b.triggerHandler("contentLoaded",[e])})}}}function B(a,b,c,d){var e=c.currentIndex;if(d>=0&&d<c.stepCount&&!(b.forceMoveForward&&d<c.currentIndex)){var f=j(a,d),g=f.parent(),h=g.hasClass("disabled");return g._enableAria(),f.click(),e===c.currentIndex&&h?(g._enableAria(!1),!1):!0}return!1}function C(b){b.preventDefault();var c=a(this),d=c.parent().parent().parent().parent(),f=m(d),g=n(d),i=c.attr("href");switch(i.substring(i.lastIndexOf("#")+1)){case"cancel":e(d);break;case"finish":h(d,g);break;case"next":s(d,f,g);break;case"previous":t(d,f,g)}}function D(a,b,c){if(b.enablePagination){var d=a.find(".actions a[href$='#finish']").parent(),e=a.find(".actions a[href$='#next']").parent();if(!b.forceMoveForward){var f=a.find(".actions a[href$='#previous']").parent();f._enableAria(c.currentIndex>0)}b.enableFinishButton&&b.showFinishButtonAlways?(d._enableAria(c.stepCount>0),e._enableAria(c.stepCount>1&&c.stepCount>c.currentIndex+1)):(d._showAria(b.enableFinishButton&&c.stepCount===c.currentIndex+1),e._showAria(0===c.stepCount||c.stepCount>c.currentIndex+1)._enableAria(c.stepCount>c.currentIndex+1||!b.enableFinishButton))}}function E(b,c,d,e){var f=j(b,d.currentIndex),g=a('<span class="current-info audible">'+c.labels.current+" </span>"),h=b.find(".content > .title");if(null!=e){var i=j(b,e);i.parent().addClass("done").removeClass("error")._selectAria(!1),h.eq(e).removeClass("current").next(".body").removeClass("current"),g=i.find(".current-info"),f.focus()}f.prepend(g).parent()._selectAria().removeClass("done")._enableAria(),h.eq(d.currentIndex).addClass("current").next(".body").addClass("current")}function F(a,b,c,d){for(var e=q(a),f=d;f<c.stepCount;f++){var g=e+V+f,h=e+W+f,i=e+X+f,j=a.find(".title").eq(f)._id(i);a.find(".steps a").eq(f)._id(g)._aria("controls",h).attr("href","#"+i).html(M(b.titleTemplate,{index:f+1,title:j.html()})),a.find(".body").eq(f)._id(h)._aria("labelledby",i)}}function G(a,b){var c=i(a);a.bind("canceled"+c,b.onCanceled),a.bind("contentLoaded"+c,b.onContentLoaded),a.bind("finishing"+c,b.onFinishing),a.bind("finished"+c,b.onFinished),a.bind("init"+c,b.onInit),a.bind("stepChanging"+c,b.onStepChanging),a.bind("stepChanged"+c,b.onStepChanged),b.enableKeyNavigation&&a.bind("keyup"+c,z),a.find(".actions a").bind("click"+c,C)}function H(a,b,c,d){return 0>d||d>=c.stepCount||c.currentIndex===d?!1:(I(a,d),c.currentIndex>d&&(c.currentIndex--,O(a,b,c)),c.stepCount--,l(a,d).remove(),k(a,d).remove(),j(a,d).parent().remove(),0===d&&a.find(".steps li").first().addClass("first"),d===c.stepCount&&a.find(".steps li").eq(d).addClass("last"),F(a,b,c,d),D(a,b,c),!0)}function I(a,b){o(a).splice(b,1)}function J(b,c,d){var e='<{0} class="{1}">{2}</{0}>',f=r(_,c.stepsOrientation),g=f===_.vertical?" vertical":"",h=a(e.format(c.contentContainerTag,"content "+c.clearFixCssClass,b.html())),i=a(e.format(c.stepsContainerTag,"steps "+c.clearFixCssClass,'<ul role="tablist"></ul>')),j=h.children(c.headerTag),k=h.children(c.bodyTag);b.attr("role","application").empty().append(i).append(h).addClass(c.cssClass+" "+c.clearFixCssClass+g),k.each(function(c){K(b,d,a(this),c)}),j.each(function(e){N(b,c,d,a(this),e)}),E(b,c,d),L(b,c,d)}function K(a,b,c,d){var e=q(a),f=e+W+d,g=e+X+d;c._id(f).attr("role","tabpanel")._aria("labelledby",g).addClass("body")._showAria(b.currentIndex===d)}function L(a,b,c){if(b.enablePagination){var d='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',e='<li><a href="#{0}" role="menuitem">{1}</a></li>',f="";b.forceMoveForward||(f+=e.format("previous",b.labels.previous)),f+=e.format("next",b.labels.next),b.enableFinishButton&&(f+=e.format("finish",b.labels.finish)),b.enableCancelButton&&(f+=e.format("cancel",b.labels.cancel)),a.append(d.format(b.actionContainerTag,b.clearFixCssClass,b.labels.pagination,f)),D(a,b,c),A(a,b,c)}}function M(a,c){for(var d=a.match(/#([a-z]*)#/gi),e=0;e<d.length;e++){var f=d[e],g=f.substring(1,f.length-1);c[g]===b&&R("The key '{0}' does not exist in the substitute collection!",g),a=a.replace(f,c[g])}return a}function N(b,c,d,e,f){var g=q(b),h=g+V+f,j=g+W+f,k=g+X+f,l=b.find(".steps > ul"),m=M(c.titleTemplate,{index:f+1,title:e.html()}),n=a('<li role="tab"><a id="'+h+'" href="#'+k+'" aria-controls="'+j+'">'+m+"</a></li>");n._enableAria(c.enableAllSteps||d.currentIndex>f),d.currentIndex>f&&n.addClass("done"),e._id(k).attr("tabindex","-1").addClass("title"),0===f?l.prepend(n):l.find("li").eq(f-1).after(n),0===f&&l.find("li").removeClass("first").eq(f).addClass("first"),f===d.stepCount-1&&l.find("li").removeClass("last").eq(f).addClass("last"),n.children("a").bind("click"+i(b),Q)}function O(b,c,d){c.saveState&&a.cookie&&a.cookie(U+q(b),d.currentIndex)}function P(b,c,d,e,f,g){var h=b.find(".content > .body"),i=r(ab,c.transitionEffect),j=c.transitionEffectSpeed,k=h.eq(e),l=h.eq(f);switch(i){case ab.fade:case ab.slide:var m=i===ab.fade?"fadeOut":"slideUp",o=i===ab.fade?"fadeIn":"slideDown";d.transitionElement=k,l[m](j,function(){var b=a(this)._showAria(!1).parent().parent(),c=n(b);c.transitionElement&&(c.transitionElement[o](j,function(){a(this)._showAria()}).promise().done(g),c.transitionElement=null)});break;case ab.slideLeft:var p=l.outerWidth(!0),q=e>f?-p:p,s=e>f?p:-p;a.when(l.animate({left:q},j,function(){a(this)._showAria(!1)}),k.css("left",s+"px")._showAria().animate({left:0},j)).done(g);break;default:a.when(l._showAria(!1),k._showAria()).done(g)}}function Q(b){b.preventDefault();var c=a(this),d=c.parent().parent().parent().parent(),e=m(d),f=n(d),g=f.currentIndex;if(c.parent().is(":not(.disabled):not(.current)")){var h=c.attr("href"),i=parseInt(h.substring(h.lastIndexOf("-")+1),0);u(d,e,f,i)}return g===f.currentIndex?(j(d,g).focus(),!1):void 0}function R(a){throw arguments.length>1&&(a=a.format(Array.prototype.slice.call(arguments,1))),new Error(a)}function S(a,b){null==b&&R("The argument '{0}' is null or undefined.",a)}a.fn.extend({_aria:function(a,b){return this.attr("aria-"+a,b)},_removeAria:function(a){return this.removeAttr("aria-"+a)},_enableAria:function(a){return null==a||a?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(a){return null==a||a?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(a){return null==a||a?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var b=1===arguments.length&&a.isArray(arguments[0])?arguments[0]:arguments,c=this,d=0;d<b.length;d++){var e=new RegExp("\\{"+d+"\\}","gm");c=c.replace(e,b[d])}return c});var T=0,U="jQu3ry_5teps_St@te_",V="-t-",W="-p-",X="-h-",Y="Index out of range.",Z="One or more corresponding step {0} are missing.";a.fn.steps=function(b){return a.fn.steps[b]?a.fn.steps[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.steps"):w.apply(this,arguments)},a.fn.steps.add=function(a){var b=n(this);return x(this,m(this),b,b.stepCount,a)},a.fn.steps.destroy=function(){return g(this,m(this))},a.fn.steps.finish=function(){h(this,n(this))},a.fn.steps.getCurrentIndex=function(){return n(this).currentIndex},a.fn.steps.getCurrentStep=function(){return p(this,n(this).currentIndex)},a.fn.steps.getStep=function(a){return p(this,a)},a.fn.steps.insert=function(a,b){return x(this,m(this),n(this),a,b)},a.fn.steps.next=function(){return s(this,m(this),n(this))},a.fn.steps.previous=function(){return t(this,m(this),n(this))},a.fn.steps.remove=function(a){return H(this,m(this),n(this),a)},a.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},a.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var $=a.fn.steps.contentMode={html:0,iframe:1,async:2},_=a.fn.steps.stepsOrientation={horizontal:0,vertical:1},ab=a.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},bb=a.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:$.html,contentLoaded:!1},cb=a.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:_.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:ab.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery);
!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=u(t)),v)}function i(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){w=e}function s(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var i=m();v||n(i),l(e,i,t)||d(i)}function c(t){var i=m();return v||n(i),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function d(t){for(var n=v.children(),i=n.length-1;i>=0;i--)l(e(n[i]),t)}function l(t,n,i){var o=i&&i.force?i.force:!1;return t&&(o||0===e(":focus",t).length)?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0):!1}function u(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function f(e){w&&w(e)}function g(t){function i(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(){r(),d(),l(),u(),p(),c()}function s(){y.hover(b,O),!x.onclick&&x.tapToDismiss&&y.click(w),x.closeButton&&k&&k.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),w(!0)}),x.onclick&&y.click(function(e){x.onclick(e),w()})}function a(){y.hide(),y[x.showMethod]({duration:x.showDuration,easing:x.showEasing,complete:x.onShown}),x.timeOut>0&&(H=setTimeout(w,x.timeOut),q.maxHideTime=parseFloat(x.timeOut),q.hideEta=(new Date).getTime()+q.maxHideTime,x.progressBar&&(q.intervalId=setInterval(D,10)))}function r(){t.iconClass&&y.addClass(x.toastClass).addClass(E)}function c(){x.newestOnTop?v.prepend(y):v.append(y)}function d(){t.title&&(I.append(x.escapeHtml?i(t.title):t.title).addClass(x.titleClass),y.append(I))}function l(){t.message&&(M.append(x.escapeHtml?i(t.message):t.message).addClass(x.messageClass),y.append(M))}function u(){x.closeButton&&(k.addClass("toast-close-button").attr("role","button"),y.prepend(k))}function p(){x.progressBar&&(B.addClass("toast-progress"),y.prepend(B))}function g(e,t){if(e.preventDuplicates){if(t.message===C)return!0;C=t.message}return!1}function w(t){var n=t&&x.closeMethod!==!1?x.closeMethod:x.hideMethod,i=t&&x.closeDuration!==!1?x.closeDuration:x.hideDuration,o=t&&x.closeEasing!==!1?x.closeEasing:x.hideEasing;return!e(":focus",y).length||t?(clearTimeout(q.intervalId),y[n]({duration:i,easing:o,complete:function(){h(y),x.onHidden&&"hidden"!==j.state&&x.onHidden(),j.state="hidden",j.endTime=new Date,f(j)}})):void 0}function O(){(x.timeOut>0||x.extendedTimeOut>0)&&(H=setTimeout(w,x.extendedTimeOut),q.maxHideTime=parseFloat(x.extendedTimeOut),q.hideEta=(new Date).getTime()+q.maxHideTime)}function b(){clearTimeout(H),q.hideEta=0,y.stop(!0,!0)[x.showMethod]({duration:x.showDuration,easing:x.showEasing})}function D(){var e=(q.hideEta-(new Date).getTime())/q.maxHideTime*100;B.width(e+"%")}var x=m(),E=t.iconClass||x.iconClass;if("undefined"!=typeof t.optionsOverride&&(x=e.extend(x,t.optionsOverride),E=t.optionsOverride.iconClass||E),!g(x,t)){T++,v=n(x,!0);var H=null,y=e("<div/>"),I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),k=e(x.closeHtml),q={intervalId:null,hideEta:null,maxHideTime:null},j={toastId:T,state:"visible",startTime:new Date,options:x,map:t};return o(),a(),s(),f(j),x.debug&&console&&console.log(j),y}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),C=void 0))}var v,w,C,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:i,options:{},subscribe:o,success:s,version:"2.1.2",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});
//# sourceMappingURL=toastr.js.map
/*
  Bootstrap - File Input
  ======================

  This is meant to convert all file input tags into a set of elements that displays consistently in all browsers.

  Converts all
  <input type="file">
  into Bootstrap buttons
  <a class="btn">Browse</a>

*/
(function($) {

$.fn.bootstrapFileInput = function() {

  this.each(function(i,elem){

    var $elem = $(elem);

    // Maybe some fields don't need to be standardized.
    if (typeof $elem.attr('data-bfi-disabled') != 'undefined') {
      return;
    }

    // Set the word to be displayed on the button
    var buttonWord = 'Browse';

    if (typeof $elem.attr('title') != 'undefined') {
      buttonWord = $elem.attr('title');
    }

    var className = '';

    if (!!$elem.attr('class')) {
      className = ' ' + $elem.attr('class');
    }

    // Now we're going to wrap that input field with a Bootstrap button.
    // The input will actually still be there, it will just be float above and transparent (done with the CSS).
    $elem.wrap('<a class="file-input-wrapper btn btn-default ' + className + '"></a>').parent().prepend($('<span></span>').html(buttonWord));
  })

  // After we have found all of the file inputs let's apply a listener for tracking the mouse movement.
  // This is important because the in order to give the illusion that this is a button in FF we actually need to move the button from the file input under the cursor. Ugh.
  .promise().done( function(){

    // As the cursor moves over our new Bootstrap button we need to adjust the position of the invisible file input Browse button to be under the cursor.
    // This gives us the pointer cursor that FF denies us
    $('.file-input-wrapper').mousemove(function(cursor) {

      var input, wrapper,
        wrapperX, wrapperY,
        inputWidth, inputHeight,
        cursorX, cursorY;

      // This wrapper element (the button surround this file input)
      wrapper = $(this);
      // The invisible file input element
      input = wrapper.find("input");
      // The left-most position of the wrapper
      wrapperX = wrapper.offset().left;
      // The top-most position of the wrapper
      wrapperY = wrapper.offset().top;
      // The with of the browsers input field
      inputWidth= input.width();
      // The height of the browsers input field
      inputHeight= input.height();
      //The position of the cursor in the wrapper
      cursorX = cursor.pageX;
      cursorY = cursor.pageY;

      //The positions we are to move the invisible file input
      // The 20 at the end is an arbitrary number of pixels that we can shift the input such that cursor is not pointing at the end of the Browse button but somewhere nearer the middle
      moveInputX = cursorX - wrapperX - inputWidth + 20;
      // Slides the invisible input Browse button to be positioned middle under the cursor
      moveInputY = cursorY- wrapperY - (inputHeight/2);

      // Apply the positioning styles to actually move the invisible file input
      input.css({
        left:moveInputX,
        top:moveInputY
      });
    });

    $('body').on('change', '.file-input-wrapper input[type=file]', function(){

      var fileName;
      fileName = $(this).val();

      // Remove any previous file names
      $(this).parent().next('.file-input-name').remove();
      if (!!$(this).prop('files') && $(this).prop('files').length > 1) {
        fileName = $(this)[0].files.length+' files';
        //$(this).parent().after('<span class="file-input-name">'+$(this)[0].files.length+' files</span>');
      }
      else {
        // var fakepath = 'C:\\fakepath\\';
        // fileName = $(this).val().replace('C:\\fakepath\\','');
        fileName = fileName.substring(fileName.lastIndexOf('\\')+1,fileName.length);
      }

      var selectedFileNamePlacement = $(this).data('filename-placement') || 'outside';
      if (selectedFileNamePlacement === 'inside') {
        // Print the fileName inside
        $(this).siblings('span').html(fileName);
        $(this).attr('title', fileName);
      } else if (selectedFileNamePlacement === 'outside') {
        // Print the fileName aside (right after the the button)
        $(this).parent().after('<span class="file-input-name">'+fileName+'</span>');
      } else {
        console.log('Error in bootstrap-file-input plugin : unknown placement [' + selectedFileNamePlacement + '] for selected filename');
      }
    });

  });

};

// Add the styles before the first stylesheet
// This ensures they can be easily overridden with developer styles
var cssHtml = '<style>'+
  '.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }'+
  '.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }'+
  '.file-input-name { margin-left: 8px; }'+
  '</style>';
$('link[rel=stylesheet]').eq(0).before(cssHtml);

})(jQuery);

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.6
 *
 */
(function(e){e.fn.extend({slimScroll:function(g){var a=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);this.each(function(){function v(d){if(r){d=d||window.event;
var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);e(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,e,g){k=!1;var f=d,h=b.outerHeight()-c.outerHeight();e&&(f=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),f=Math.min(Math.max(f,0),h),f=0<d?Math.ceil(f):Math.floor(f),c.css({top:f+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());
f=l*(b[0].scrollHeight-b.outerHeight());g&&(f=d,d=f/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"}));b.scrollTop(f);b.trigger("slimscrolling",~~f);w();p()}function x(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),30);c.css({height:u+"px"});var a=u==b.outerHeight()?"none":"block";c.css({display:a})}function w(){x();clearTimeout(B);l==~~l?(k=a.allowPageScroll,C!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;C=l;u>=b.outerHeight()?k=!0:(c.stop(!0,
!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(B=setTimeout(function(){a.disableFadeOut&&r||y||z||(c.fadeOut("slow"),h.fadeOut("slow"))},1E3))}var r,y,z,B,A,u,l,C,k=!1,b=e(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.closest("."+a.barClass),h=b.closest("."+a.railClass);x();if(e.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",
q);b.css("height",q)}if("scrollTo"in g)n=parseInt(a.scrollTo);else if("scrollBy"in g)n+=parseInt(a.scrollBy);else if("destroy"in g){c.remove();h.remove();b.unwrap();return}m(n,!1,!0)}}else if(!(e.isPlainObject(g)&&"destroy"in g)){a.height="auto"==a.height?b.parent().height():a.height;n=e("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var h=e("<div></div>").addClass(a.railClass).css({width:a.size,
height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=e("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?
{right:a.distance}:{left:a.distance};h.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(h);a.railDraggable&&c.bind("mousedown",function(a){var b=e(document);z=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});b.bind("mouseup.slimscroll",function(a){z=!1;p();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});
h.hover(function(){w()},function(){p()});c.hover(function(){y=!0},function(){y=!1});b.hover(function(){r=!0;w();p()},function(){r=!1;p()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(A=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(m((A-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),A=b.originalEvent.touches[0].pageY)});x();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),
m(0,!0)):"top"!==a.start&&(m(e(a.start).position().top,null,!0),a.alwaysVisible||c.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",v,!1),this.addEventListener("mousewheel",v,!1)):document.attachEvent("onmousewheel",v)}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);
/*!

Holder - client side image placeholders
Version 2.8.2+c34r9
 2015 Ivan Malopinsky - http://imsky.co

Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT

*/
(function (window) {
  if (!window.document) return;
  var document = window.document;

  //https://github.com/inexorabletash/polyfill/blob/master/web.js
    if (!document.querySelectorAll) {
      document.querySelectorAll = function (selectors) {
        var style = document.createElement('style'), elements = [], element;
        document.documentElement.firstChild.appendChild(style);
        document._qsa = [];

        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';
        window.scrollBy(0, 0);
        style.parentNode.removeChild(style);

        while (document._qsa.length) {
          element = document._qsa.shift();
          element.style.removeAttribute('x-qsa');
          elements.push(element);
        }
        document._qsa = null;
        return elements;
      };
    }

    if (!document.querySelector) {
      document.querySelector = function (selectors) {
        var elements = document.querySelectorAll(selectors);
        return (elements.length) ? elements[0] : null;
      };
    }

    if (!document.getElementsByClassName) {
      document.getElementsByClassName = function (classNames) {
        classNames = String(classNames).replace(/^|\s+/g, '.');
        return document.querySelectorAll(classNames);
      };
    }

  //https://github.com/inexorabletash/polyfill
  // ES5 15.2.3.14 Object.keys ( O )
  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys
  if (!Object.keys) {
    Object.keys = function (o) {
      if (o !== Object(o)) { throw TypeError('Object.keys called on non-object'); }
      var ret = [], p;
      for (p in o) {
        if (Object.prototype.hasOwnProperty.call(o, p)) {
          ret.push(p);
        }
      }
      return ret;
    };
  }

  // ES5 15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )
  // From https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach
  if (!Array.prototype.forEach) {
    Array.prototype.forEach = function (fun /*, thisp */) {
      if (this === void 0 || this === null) { throw TypeError(); }

      var t = Object(this);
      var len = t.length >>> 0;
      if (typeof fun !== "function") { throw TypeError(); }

      var thisp = arguments[1], i;
      for (i = 0; i < len; i++) {
        if (i in t) {
          fun.call(thisp, t[i], i, t);
        }
      }
    };
  }

  //https://github.com/inexorabletash/polyfill/blob/master/web.js
  (function (global) {
    var B64_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
    global.atob = global.atob || function (input) {
      input = String(input);
      var position = 0,
          output = [],
          buffer = 0, bits = 0, n;

      input = input.replace(/\s/g, '');
      if ((input.length % 4) === 0) { input = input.replace(/=+$/, ''); }
      if ((input.length % 4) === 1) { throw Error('InvalidCharacterError'); }
      if (/[^+/0-9A-Za-z]/.test(input)) { throw Error('InvalidCharacterError'); }

      while (position < input.length) {
        n = B64_ALPHABET.indexOf(input.charAt(position));
        buffer = (buffer << 6) | n;
        bits += 6;

        if (bits === 24) {
          output.push(String.fromCharCode((buffer >> 16) & 0xFF));
          output.push(String.fromCharCode((buffer >>  8) & 0xFF));
          output.push(String.fromCharCode(buffer & 0xFF));
          bits = 0;
          buffer = 0;
        }
        position += 1;
      }

      if (bits === 12) {
        buffer = buffer >> 4;
        output.push(String.fromCharCode(buffer & 0xFF));
      } else if (bits === 18) {
        buffer = buffer >> 2;
        output.push(String.fromCharCode((buffer >> 8) & 0xFF));
        output.push(String.fromCharCode(buffer & 0xFF));
      }

      return output.join('');
    };

    global.btoa = global.btoa || function (input) {
      input = String(input);
      var position = 0,
          out = [],
          o1, o2, o3,
          e1, e2, e3, e4;

      if (/[^\x00-\xFF]/.test(input)) { throw Error('InvalidCharacterError'); }

      while (position < input.length) {
        o1 = input.charCodeAt(position++);
        o2 = input.charCodeAt(position++);
        o3 = input.charCodeAt(position++);

        // 111111 112222 222233 333333
        e1 = o1 >> 2;
        e2 = ((o1 & 0x3) << 4) | (o2 >> 4);
        e3 = ((o2 & 0xf) << 2) | (o3 >> 6);
        e4 = o3 & 0x3f;

        if (position === input.length + 2) {
          e3 = 64; e4 = 64;
        }
        else if (position === input.length + 1) {
          e4 = 64;
        }

        out.push(B64_ALPHABET.charAt(e1),
                 B64_ALPHABET.charAt(e2),
                 B64_ALPHABET.charAt(e3),
                 B64_ALPHABET.charAt(e4));
      }

      return out.join('');
    };
  }(window));

  //https://gist.github.com/jimeh/332357
  if (!Object.prototype.hasOwnProperty){
      /*jshint -W001, -W103 */
      Object.prototype.hasOwnProperty = function(prop) {
      var proto = this.__proto__ || this.constructor.prototype;
      return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);
    };
      /*jshint +W001, +W103 */
  }

  // @license http://opensource.org/licenses/MIT
  // copyright Paul Irish 2015


  // Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill
  //   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js
  // as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values

  // if you want values similar to what you'd get with real perf.now, place this towards the head of the page
  // but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed


  (function(){

    if ('performance' in window === false) {
        window.performance = {};
    }
    
    Date.now = (Date.now || function () {  // thanks IE8
      return new Date().getTime();
    });

    if ('now' in window.performance === false){
      
      var nowOffset = Date.now();
      
      if (performance.timing && performance.timing.navigationStart){
        nowOffset = performance.timing.navigationStart;
      }

      window.performance.now = function now(){
        return Date.now() - nowOffset;
      };
    }

  })();

  //requestAnimationFrame polyfill for older Firefox/Chrome versions
  if (!window.requestAnimationFrame) {
    if (window.webkitRequestAnimationFrame) {
    //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-webkit.js
    (function (global) {
      // window.requestAnimationFrame
      global.requestAnimationFrame = function (callback) {
        return webkitRequestAnimationFrame(function () {
          callback(global.performance.now());
        });
      };

      // window.cancelAnimationFrame
      global.cancelAnimationFrame = webkitCancelAnimationFrame;
    }(window));
    } else if (window.mozRequestAnimationFrame) {
      //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-moz.js
    (function (global) {
      // window.requestAnimationFrame
      global.requestAnimationFrame = function (callback) {
        return mozRequestAnimationFrame(function () {
          callback(global.performance.now());
        });
      };

      // window.cancelAnimationFrame
      global.cancelAnimationFrame = mozCancelAnimationFrame;
    }(window));
    } else {
    (function (global) {
      global.requestAnimationFrame = function (callback) {
      return global.setTimeout(callback, 1000 / 60);
      };

      global.cancelAnimationFrame = global.clearTimeout;
    })(window);
    }
  }
})(this);

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define(factory);
	else if(typeof exports === 'object')
		exports["Holder"] = factory();
	else
		root["Holder"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	/*
	Holder.js - client side image placeholders
	(c) 2012-2015 Ivan Malopinsky - http://imsky.co
	*/

	module.exports = __webpack_require__(1);


/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {/*
	Holder.js - client side image placeholders
	(c) 2012-2015 Ivan Malopinsky - http://imsky.co
	*/

	//Libraries and functions
	var onDomReady = __webpack_require__(2);
	var querystring = __webpack_require__(3);

	var SceneGraph = __webpack_require__(4);
	var utils = __webpack_require__(5);
	var SVG = __webpack_require__(6);
	var DOM = __webpack_require__(7);
	var Color = __webpack_require__(8);
	var constants = __webpack_require__(9);

	var svgRenderer = __webpack_require__(10);

	var extend = utils.extend;
	var dimensionCheck = utils.dimensionCheck;

	//Constants and definitions
	var SVG_NS = constants.svg_ns;

	var Holder = {
	    version: constants.version,

	    /**
	     * Adds a theme to default settings
	     *
	     * @param {string} name Theme name
	     * @param {Object} theme Theme object, with foreground, background, size, font, and fontweight properties.
	     */
	    addTheme: function(name, theme) {
	        name != null && theme != null && (App.settings.themes[name] = theme);
	        delete App.vars.cache.themeKeys;
	        return this;
	    },

	    /**
	     * Appends a placeholder to an element
	     *
	     * @param {string} src Placeholder URL string
	     * @param el A selector or a reference to a DOM node
	     */
	    addImage: function(src, el) {
	        //todo: use jquery fallback if available for all QSA references
	        var nodes = DOM.getNodeArray(el);
	        nodes.forEach(function (node) {
	            var img = DOM.newEl('img');
	            var domProps = {};
	            domProps[App.setup.dataAttr] = src;
	            DOM.setAttr(img, domProps);
	            node.appendChild(img);
	        });
	        return this;
	    },

	    /**
	     * Sets whether or not an image is updated on resize.
	     * If an image is set to be updated, it is immediately rendered.
	     *
	     * @param {Object} el Image DOM element
	     * @param {Boolean} value Resizable update flag value
	     */
	    setResizeUpdate: function(el, value) {
	        if (el.holderData) {
	            el.holderData.resizeUpdate = !!value;
	            if (el.holderData.resizeUpdate) {
	                updateResizableElements(el);
	            }
	        }
	    },

	    /**
	     * Runs Holder with options. By default runs Holder on all images with "holder.js" in their source attributes.
	     *
	     * @param {Object} userOptions Options object, can contain domain, themes, images, and bgnodes properties
	     */
	    run: function(userOptions) {
	        //todo: split processing into separate queues
	        userOptions = userOptions || {};
	        var engineSettings = {};
	        var options = extend(App.settings, userOptions);

	        App.vars.preempted = true;
	        App.vars.dataAttr = options.dataAttr || App.setup.dataAttr;
	        App.vars.lineWrapRatio = options.lineWrapRatio || App.setup.lineWrapRatio;

	        engineSettings.renderer = options.renderer ? options.renderer : App.setup.renderer;
	        if (App.setup.renderers.join(',').indexOf(engineSettings.renderer) === -1) {
	            engineSettings.renderer = App.setup.supportsSVG ? 'svg' : (App.setup.supportsCanvas ? 'canvas' : 'html');
	        }

	        var images = DOM.getNodeArray(options.images);
	        var bgnodes = DOM.getNodeArray(options.bgnodes);
	        var stylenodes = DOM.getNodeArray(options.stylenodes);
	        var objects = DOM.getNodeArray(options.objects);

	        engineSettings.stylesheets = [];
	        engineSettings.svgXMLStylesheet = true;
	        engineSettings.noFontFallback = options.noFontFallback ? options.noFontFallback : false;

	        stylenodes.forEach(function (styleNode) {
	            if (styleNode.attributes.rel && styleNode.attributes.href && styleNode.attributes.rel.value == 'stylesheet') {
	                var href = styleNode.attributes.href.value;
	                //todo: write isomorphic relative-to-absolute URL function
	                var proxyLink = DOM.newEl('a');
	                proxyLink.href = href;
	                var stylesheetURL = proxyLink.protocol + '//' + proxyLink.host + proxyLink.pathname + proxyLink.search;
	                engineSettings.stylesheets.push(stylesheetURL);
	            }
	        });

	        bgnodes.forEach(function (bgNode) {
	            //Skip processing background nodes if getComputedStyle is unavailable, since only modern browsers would be able to use canvas or SVG to render to background
	            if (!global.getComputedStyle) return;
	            var backgroundImage = global.getComputedStyle(bgNode, null).getPropertyValue('background-image');
	            var dataBackgroundImage = bgNode.getAttribute('data-background-src');
	            var rawURL = dataBackgroundImage || backgroundImage;

	            var holderURL = null;
	            var holderString = options.domain + '/';
	            var holderStringIndex = rawURL.indexOf(holderString);

	            if (holderStringIndex === 0) {
	                holderURL = rawURL;
	            } else if (holderStringIndex === 1 && rawURL[0] === '?') {
	                holderURL = rawURL.slice(1);
	            } else {
	                var fragment = rawURL.substr(holderStringIndex).match(/([^\"]*)"?\)/);
	                if (fragment !== null) {
	                    holderURL = fragment[1];
	                } else if (rawURL.indexOf('url(') === 0) {
	                    throw 'Holder: unable to parse background URL: ' + rawURL;
	                }
	            }

	            if (holderURL != null) {
	                var holderFlags = parseURL(holderURL, options);
	                if (holderFlags) {
	                    prepareDOMElement({
	                        mode: 'background',
	                        el: bgNode,
	                        flags: holderFlags,
	                        engineSettings: engineSettings
	                    });
	                }
	            }
	        });

	        objects.forEach(function (object) {
	            var objectAttr = {};

	            try {
	                objectAttr.data = object.getAttribute('data');
	                objectAttr.dataSrc = object.getAttribute(App.vars.dataAttr);
	            } catch (e) {}

	            var objectHasSrcURL = objectAttr.data != null && objectAttr.data.indexOf(options.domain) === 0;
	            var objectHasDataSrcURL = objectAttr.dataSrc != null && objectAttr.dataSrc.indexOf(options.domain) === 0;

	            if (objectHasSrcURL) {
	                prepareImageElement(options, engineSettings, objectAttr.data, object);
	            } else if (objectHasDataSrcURL) {
	                prepareImageElement(options, engineSettings, objectAttr.dataSrc, object);
	            }
	        });

	        images.forEach(function (image) {
	            var imageAttr = {};

	            try {
	                imageAttr.src = image.getAttribute('src');
	                imageAttr.dataSrc = image.getAttribute(App.vars.dataAttr);
	                imageAttr.rendered = image.getAttribute('data-holder-rendered');
	            } catch (e) {}

	            var imageHasSrc = imageAttr.src != null;
	            var imageHasDataSrcURL = imageAttr.dataSrc != null && imageAttr.dataSrc.indexOf(options.domain) === 0;
	            var imageRendered = imageAttr.rendered != null && imageAttr.rendered == 'true';

	            if (imageHasSrc) {
	                if (imageAttr.src.indexOf(options.domain) === 0) {
	                    prepareImageElement(options, engineSettings, imageAttr.src, image);
	                } else if (imageHasDataSrcURL) {
	                    //Image has a valid data-src and an invalid src
	                    if (imageRendered) {
	                        //If the placeholder has already been render, re-render it
	                        prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);
	                    } else {
	                        //If the placeholder has not been rendered, check if the image exists and render a fallback if it doesn't
	                        (function(src, options, engineSettings, dataSrc, image) {
	                            utils.imageExists(src, function(exists) {
	                                if (!exists) {
	                                    prepareImageElement(options, engineSettings, dataSrc, image);
	                                }
	                            });
	                        })(imageAttr.src, options, engineSettings, imageAttr.dataSrc, image);
	                    }
	                }
	            } else if (imageHasDataSrcURL) {
	                prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);
	            }
	        });

	        return this;
	    }
	};

	var App = {
	    settings: {
	        domain: 'holder.js',
	        images: 'img',
	        objects: 'object',
	        bgnodes: 'body .holderjs',
	        stylenodes: 'head link.holderjs',
	        themes: {
	            'gray': {
	                background: '#EEEEEE',
	                foreground: '#AAAAAA'
	            },
	            'social': {
	                background: '#3a5a97',
	                foreground: '#FFFFFF'
	            },
	            'industrial': {
	                background: '#434A52',
	                foreground: '#C2F200'
	            },
	            'sky': {
	                background: '#0D8FDB',
	                foreground: '#FFFFFF'
	            },
	            'vine': {
	                background: '#39DBAC',
	                foreground: '#1E292C'
	            },
	            'lava': {
	                background: '#F8591A',
	                foreground: '#1C2846'
	            }
	        }
	    },
	    defaults: {
	        size: 10,
	        units: 'pt',
	        scale: 1 / 16
	    }
	};

	/**
	 * Processes provided source attribute and sets up the appropriate rendering workflow
	 *
	 * @private
	 * @param options Instance options from Holder.run
	 * @param renderSettings Instance configuration
	 * @param src Image URL
	 * @param el Image DOM element
	 */
	function prepareImageElement(options, engineSettings, src, el) {
	    var holderFlags = parseURL(src.substr(src.lastIndexOf(options.domain)), options);
	    if (holderFlags) {
	        prepareDOMElement({
	            mode: null,
	            el: el,
	            flags: holderFlags,
	            engineSettings: engineSettings
	        });
	    }
	}

	/**
	 * Processes a Holder URL and extracts configuration from query string
	 *
	 * @private
	 * @param url URL
	 * @param instanceOptions Instance options from Holder.run
	 */
	function parseURL(url, instanceOptions) {
	    var holder = {
	        theme: extend(App.settings.themes.gray, null),
	        stylesheets: instanceOptions.stylesheets,
	        instanceOptions: instanceOptions
	    };

	    var parts = url.split('?');
	    var basics = parts[0].split('/');

	    holder.holderURL = url;

	    var dimensions = basics[1];
	    var dimensionData = dimensions.match(/([\d]+p?)x([\d]+p?)/);

	    if (!dimensionData) return false;

	    holder.fluid = dimensions.indexOf('p') !== -1;

	    holder.dimensions = {
	        width: dimensionData[1].replace('p', '%'),
	        height: dimensionData[2].replace('p', '%')
	    };

	    if (parts.length === 2) {
	        var options = querystring.parse(parts[1]);

	        // Colors

	        if (options.bg) {
	            holder.theme.background = utils.parseColor(options.bg);
	        }

	        if (options.fg) {
	            holder.theme.foreground = utils.parseColor(options.fg);
	        }

	        //todo: add automatic foreground to themes without foreground
	        if (options.bg && !options.fg) {
	            holder.autoFg = true;
	        }

	        if (options.theme && holder.instanceOptions.themes.hasOwnProperty(options.theme)) {
	            holder.theme = extend(holder.instanceOptions.themes[options.theme], null);
	        }

	        // Text

	        if (options.text) {
	            holder.text = options.text;
	        }

	        if (options.textmode) {
	            holder.textmode = options.textmode;
	        }

	        if (options.size) {
	            holder.size = options.size;
	        }

	        if (options.font) {
	            holder.font = options.font;
	        }

	        if (options.align) {
	            holder.align = options.align;
	        }

	        holder.nowrap = utils.truthy(options.nowrap);

	        // Miscellaneous

	        holder.auto = utils.truthy(options.auto);

	        holder.outline = utils.truthy(options.outline);

	        if (utils.truthy(options.random)) {
	            App.vars.cache.themeKeys = App.vars.cache.themeKeys || Object.keys(holder.instanceOptions.themes);
	            var _theme = App.vars.cache.themeKeys[0 | Math.random() * App.vars.cache.themeKeys.length];
	            holder.theme = extend(holder.instanceOptions.themes[_theme], null);
	        }
	    }

	    return holder;
	}

	/**
	 * Modifies the DOM to fit placeholders and sets up resizable image callbacks (for fluid and automatically sized placeholders)
	 *
	 * @private
	 * @param settings DOM prep settings
	 */
	function prepareDOMElement(prepSettings) {
	    var mode = prepSettings.mode;
	    var el = prepSettings.el;
	    var flags = prepSettings.flags;
	    var _engineSettings = prepSettings.engineSettings;
	    var dimensions = flags.dimensions,
	        theme = flags.theme;
	    var dimensionsCaption = dimensions.width + 'x' + dimensions.height;
	    mode = mode == null ? (flags.fluid ? 'fluid' : 'image') : mode;

	    if (flags.text != null) {
	        theme.text = flags.text;

	        //<object> SVG embedding doesn't parse Unicode properly
	        if (el.nodeName.toLowerCase() === 'object') {
	            var textLines = theme.text.split('\\n');
	            for (var k = 0; k < textLines.length; k++) {
	                textLines[k] = utils.encodeHtmlEntity(textLines[k]);
	            }
	            theme.text = textLines.join('\\n');
	        }
	    }

	    var holderURL = flags.holderURL;
	    var engineSettings = extend(_engineSettings, null);

	    if (flags.font) {
	        /*
	        If external fonts are used in a <img> placeholder rendered with SVG, Holder falls back to canvas.

	        This is done because Firefox and Chrome disallow embedded SVGs from referencing external assets.
	        The workaround is either to change the placeholder tag from <img> to <object> or to use the canvas renderer.
	        */
	        theme.font = flags.font;
	        if (!engineSettings.noFontFallback && el.nodeName.toLowerCase() === 'img' && App.setup.supportsCanvas && engineSettings.renderer === 'svg') {
	            engineSettings = extend(engineSettings, {
	                renderer: 'canvas'
	            });
	        }
	    }

	    //Chrome and Opera require a quick 10ms re-render if web fonts are used with canvas
	    if (flags.font && engineSettings.renderer == 'canvas') {
	        engineSettings.reRender = true;
	    }

	    if (mode == 'background') {
	        if (el.getAttribute('data-background-src') == null) {
	            DOM.setAttr(el, {
	                'data-background-src': holderURL
	            });
	        }
	    } else {
	        var domProps = {};
	        domProps[App.vars.dataAttr] = holderURL;
	        DOM.setAttr(el, domProps);
	    }

	    flags.theme = theme;

	    //todo consider using all renderSettings in holderData
	    el.holderData = {
	        flags: flags,
	        engineSettings: engineSettings
	    };

	    if (mode == 'image' || mode == 'fluid') {
	        DOM.setAttr(el, {
	            'alt': (theme.text ? theme.text + ' [' + dimensionsCaption + ']' : dimensionsCaption)
	        });
	    }

	    var renderSettings = {
	        mode: mode,
	        el: el,
	        holderSettings: {
	            dimensions: dimensions,
	            theme: theme,
	            flags: flags
	        },
	        engineSettings: engineSettings
	    };

	    if (mode == 'image') {
	        if (!flags.auto) {
	            el.style.width = dimensions.width + 'px';
	            el.style.height = dimensions.height + 'px';
	        }

	        if (engineSettings.renderer == 'html') {
	            el.style.backgroundColor = theme.background;
	        } else {
	            render(renderSettings);

	            if (flags.textmode == 'exact') {
	                el.holderData.resizeUpdate = true;
	                App.vars.resizableImages.push(el);
	                updateResizableElements(el);
	            }
	        }
	    } else if (mode == 'background' && engineSettings.renderer != 'html') {
	        render(renderSettings);
	    } else if (mode == 'fluid') {
	        el.holderData.resizeUpdate = true;

	        if (dimensions.height.slice(-1) == '%') {
	            el.style.height = dimensions.height;
	        } else if (flags.auto == null || !flags.auto) {
	            el.style.height = dimensions.height + 'px';
	        }
	        if (dimensions.width.slice(-1) == '%') {
	            el.style.width = dimensions.width;
	        } else if (flags.auto == null || !flags.auto) {
	            el.style.width = dimensions.width + 'px';
	        }
	        if (el.style.display == 'inline' || el.style.display === '' || el.style.display == 'none') {
	            el.style.display = 'block';
	        }

	        setInitialDimensions(el);

	        if (engineSettings.renderer == 'html') {
	            el.style.backgroundColor = theme.background;
	        } else {
	            App.vars.resizableImages.push(el);
	            updateResizableElements(el);
	        }
	    }
	}

	/**
	 * Core function that takes output from renderers and sets it as the source or background-image of the target element
	 *
	 * @private
	 * @param renderSettings Renderer settings
	 */
	function render(renderSettings) {
	    var image = null;
	    var mode = renderSettings.mode;
	    var el = renderSettings.el;
	    var holderSettings = renderSettings.holderSettings;
	    var engineSettings = renderSettings.engineSettings;

	    switch (engineSettings.renderer) {
	        case 'svg':
	            if (!App.setup.supportsSVG) return;
	            break;
	        case 'canvas':
	            if (!App.setup.supportsCanvas) return;
	            break;
	        default:
	            return;
	    }

	    //todo: move generation of scene up to flag generation to reduce extra object creation
	    var scene = {
	        width: holderSettings.dimensions.width,
	        height: holderSettings.dimensions.height,
	        theme: holderSettings.theme,
	        flags: holderSettings.flags
	    };

	    var sceneGraph = buildSceneGraph(scene);

	    function getRenderedImage() {
	        var image = null;
	        switch (engineSettings.renderer) {
	            case 'canvas':
	                image = sgCanvasRenderer(sceneGraph, renderSettings);
	                break;
	            case 'svg':
	                image = svgRenderer(sceneGraph, renderSettings);
	                break;
	            default:
	                throw 'Holder: invalid renderer: ' + engineSettings.renderer;
	        }

	        return image;
	    }

	    image = getRenderedImage();

	    if (image == null) {
	        throw 'Holder: couldn\'t render placeholder';
	    }

	    //todo: add <object> canvas rendering
	    if (mode == 'background') {
	        el.style.backgroundImage = 'url(' + image + ')';
	        el.style.backgroundSize = scene.width + 'px ' + scene.height + 'px';
	    } else {
	        if (el.nodeName.toLowerCase() === 'img') {
	            DOM.setAttr(el, {
	                'src': image
	            });
	        } else if (el.nodeName.toLowerCase() === 'object') {
	            DOM.setAttr(el, {
	                'data': image
	            });
	            DOM.setAttr(el, {
	                'type': 'image/svg+xml'
	            });
	        }
	        if (engineSettings.reRender) {
	            global.setTimeout(function () {
	                var image = getRenderedImage();
	                if (image == null) {
	                    throw 'Holder: couldn\'t render placeholder';
	                }
	                //todo: refactor this code into a function
	                if (el.nodeName.toLowerCase() === 'img') {
	                    DOM.setAttr(el, {
	                        'src': image
	                    });
	                } else if (el.nodeName.toLowerCase() === 'object') {
	                    DOM.setAttr(el, {
	                        'data': image
	                    });
	                    DOM.setAttr(el, {
	                        'type': 'image/svg+xml'
	                    });
	                }
	            }, 150);
	        }
	    }
	    //todo: account for re-rendering
	    DOM.setAttr(el, {
	        'data-holder-rendered': true
	    });
	}

	/**
	 * Core function that takes a Holder scene description and builds a scene graph
	 *
	 * @private
	 * @param scene Holder scene object
	 */
	//todo: make this function reusable
	//todo: merge app defaults and setup properties into the scene argument
	function buildSceneGraph(scene) {
	    var fontSize = App.defaults.size;
	    if (parseFloat(scene.theme.size)) {
	        fontSize = scene.theme.size;
	    } else if (parseFloat(scene.flags.size)) {
	        fontSize = scene.flags.size;
	    }

	    scene.font = {
	        family: scene.theme.font ? scene.theme.font : 'Arial, Helvetica, Open Sans, sans-serif',
	        size: textSize(scene.width, scene.height, fontSize, App.defaults.scale),
	        units: scene.theme.units ? scene.theme.units : App.defaults.units,
	        weight: scene.theme.fontweight ? scene.theme.fontweight : 'bold'
	    };

	    scene.text = scene.theme.text || Math.floor(scene.width) + 'x' + Math.floor(scene.height);

	    scene.noWrap = scene.theme.nowrap || scene.flags.nowrap;

	    scene.align = scene.theme.align || scene.flags.align || 'center';

	    switch (scene.flags.textmode) {
	        case 'literal':
	            scene.text = scene.flags.dimensions.width + 'x' + scene.flags.dimensions.height;
	            break;
	        case 'exact':
	            if (!scene.flags.exactDimensions) break;
	            scene.text = Math.floor(scene.flags.exactDimensions.width) + 'x' + Math.floor(scene.flags.exactDimensions.height);
	            break;
	    }

	    var sceneGraph = new SceneGraph({
	        width: scene.width,
	        height: scene.height
	    });

	    var Shape = sceneGraph.Shape;

	    var holderBg = new Shape.Rect('holderBg', {
	        fill: scene.theme.background
	    });

	    holderBg.resize(scene.width, scene.height);
	    sceneGraph.root.add(holderBg);

	    if (scene.flags.outline) {
	        var outlineColor = new Color(holderBg.properties.fill);
	        outlineColor = outlineColor.lighten(outlineColor.lighterThan('7f7f7f') ? -0.1 : 0.1);
	        holderBg.properties.outline = {
	            fill: outlineColor.toHex(true),
	            width: 2
	        };
	    }

	    var holderTextColor = scene.theme.foreground;

	    if (scene.flags.autoFg) {
	        var holderBgColor = new Color(holderBg.properties.fill);
	        var lightColor = new Color('fff');
	        var darkColor = new Color('000', {
	            'alpha': 0.285714
	        });

	        holderTextColor = holderBgColor.blendAlpha(holderBgColor.lighterThan('7f7f7f') ? darkColor : lightColor).toHex(true);
	    }

	    var holderTextGroup = new Shape.Group('holderTextGroup', {
	        text: scene.text,
	        align: scene.align,
	        font: scene.font,
	        fill: holderTextColor
	    });

	    holderTextGroup.moveTo(null, null, 1);
	    sceneGraph.root.add(holderTextGroup);

	    var tpdata = holderTextGroup.textPositionData = stagingRenderer(sceneGraph);
	    if (!tpdata) {
	        throw 'Holder: staging fallback not supported yet.';
	    }
	    holderTextGroup.properties.leading = tpdata.boundingBox.height;

	    var textNode = null;
	    var line = null;

	    function finalizeLine(parent, line, width, height) {
	        line.width = width;
	        line.height = height;
	        parent.width = Math.max(parent.width, line.width);
	        parent.height += line.height;
	    }

	    var sceneMargin = scene.width * App.vars.lineWrapRatio;
	    var maxLineWidth = sceneMargin;

	    if (tpdata.lineCount > 1) {
	        var offsetX = 0;
	        var offsetY = 0;
	        var lineIndex = 0;
	        var lineKey;
	        line = new Shape.Group('line' + lineIndex);

	        //Double margin so that left/right-aligned next is not flush with edge of image
	        if (scene.align === 'left' || scene.align === 'right') {
	            maxLineWidth = scene.width * (1 - (1 - (App.vars.lineWrapRatio)) * 2);
	        }

	        for (var i = 0; i < tpdata.words.length; i++) {
	            var word = tpdata.words[i];
	            textNode = new Shape.Text(word.text);
	            var newline = word.text == '\\n';
	            if (!scene.noWrap && (offsetX + word.width >= maxLineWidth || newline === true)) {
	                finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);
	                holderTextGroup.add(line);
	                offsetX = 0;
	                offsetY += holderTextGroup.properties.leading;
	                lineIndex += 1;
	                line = new Shape.Group('line' + lineIndex);
	                line.y = offsetY;
	            }
	            if (newline === true) {
	                continue;
	            }
	            textNode.moveTo(offsetX, 0);
	            offsetX += tpdata.spaceWidth + word.width;
	            line.add(textNode);
	        }

	        finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);
	        holderTextGroup.add(line);

	        if (scene.align === 'left') {
	            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);
	        } else if (scene.align === 'right') {
	            for (lineKey in holderTextGroup.children) {
	                line = holderTextGroup.children[lineKey];
	                line.moveTo(scene.width - line.width, null, null);
	            }

	            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);
	        } else {
	            for (lineKey in holderTextGroup.children) {
	                line = holderTextGroup.children[lineKey];
	                line.moveTo((holderTextGroup.width - line.width) / 2, null, null);
	            }

	            holderTextGroup.moveTo((scene.width - holderTextGroup.width) / 2, null, null);
	        }

	        holderTextGroup.moveTo(null, (scene.height - holderTextGroup.height) / 2, null);

	        //If the text exceeds vertical space, move it down so the first line is visible
	        if ((scene.height - holderTextGroup.height) / 2 < 0) {
	            holderTextGroup.moveTo(null, 0, null);
	        }
	    } else {
	        textNode = new Shape.Text(scene.text);
	        line = new Shape.Group('line0');
	        line.add(textNode);
	        holderTextGroup.add(line);

	        if (scene.align === 'left') {
	            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);
	        } else if (scene.align === 'right') {
	            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);
	        } else {
	            holderTextGroup.moveTo((scene.width - tpdata.boundingBox.width) / 2, null, null);
	        }

	        holderTextGroup.moveTo(null, (scene.height - tpdata.boundingBox.height) / 2, null);
	    }

	    //todo: renderlist
	    return sceneGraph;
	}

	/**
	 * Adaptive text sizing function
	 *
	 * @private
	 * @param width Parent width
	 * @param height Parent height
	 * @param fontSize Requested text size
	 * @param scale Proportional scale of text
	 */
	function textSize(width, height, fontSize, scale) {
	    var stageWidth = parseInt(width, 10);
	    var stageHeight = parseInt(height, 10);

	    var bigSide = Math.max(stageWidth, stageHeight);
	    var smallSide = Math.min(stageWidth, stageHeight);

	    var newHeight = 0.8 * Math.min(smallSide, bigSide * scale);
	    return Math.round(Math.max(fontSize, newHeight));
	}

	/**
	 * Iterates over resizable (fluid or auto) placeholders and renders them
	 *
	 * @private
	 * @param element Optional element selector, specified only if a specific element needs to be re-rendered
	 */
	function updateResizableElements(element) {
	    var images;
	    if (element == null || element.nodeType == null) {
	        images = App.vars.resizableImages;
	    } else {
	        images = [element];
	    }
	    for (var i = 0, l = images.length; i < l; i++) {
	        var el = images[i];
	        if (el.holderData) {
	            var flags = el.holderData.flags;
	            var dimensions = dimensionCheck(el);
	            if (dimensions) {
	                if (!el.holderData.resizeUpdate) {
	                    continue;
	                }

	                if (flags.fluid && flags.auto) {
	                    var fluidConfig = el.holderData.fluidConfig;
	                    switch (fluidConfig.mode) {
	                        case 'width':
	                            dimensions.height = dimensions.width / fluidConfig.ratio;
	                            break;
	                        case 'height':
	                            dimensions.width = dimensions.height * fluidConfig.ratio;
	                            break;
	                    }
	                }

	                var settings = {
	                    mode: 'image',
	                    holderSettings: {
	                        dimensions: dimensions,
	                        theme: flags.theme,
	                        flags: flags
	                    },
	                    el: el,
	                    engineSettings: el.holderData.engineSettings
	                };

	                if (flags.textmode == 'exact') {
	                    flags.exactDimensions = dimensions;
	                    settings.holderSettings.dimensions = flags.dimensions;
	                }

	                render(settings);
	            } else {
	                setInvisible(el);
	            }
	        }
	    }
	}

	/**
	 * Sets up aspect ratio metadata for fluid placeholders, in order to preserve proportions when resizing
	 *
	 * @private
	 * @param el Image DOM element
	 */
	function setInitialDimensions(el) {
	    if (el.holderData) {
	        var dimensions = dimensionCheck(el);
	        if (dimensions) {
	            var flags = el.holderData.flags;

	            var fluidConfig = {
	                fluidHeight: flags.dimensions.height.slice(-1) == '%',
	                fluidWidth: flags.dimensions.width.slice(-1) == '%',
	                mode: null,
	                initialDimensions: dimensions
	            };

	            if (fluidConfig.fluidWidth && !fluidConfig.fluidHeight) {
	                fluidConfig.mode = 'width';
	                fluidConfig.ratio = fluidConfig.initialDimensions.width / parseFloat(flags.dimensions.height);
	            } else if (!fluidConfig.fluidWidth && fluidConfig.fluidHeight) {
	                fluidConfig.mode = 'height';
	                fluidConfig.ratio = parseFloat(flags.dimensions.width) / fluidConfig.initialDimensions.height;
	            }

	            el.holderData.fluidConfig = fluidConfig;
	        } else {
	            setInvisible(el);
	        }
	    }
	}

	/**
	 * Iterates through all current invisible images, and if they're visible, renders them and removes them from further checks. Runs every animation frame.
	 *
	 * @private
	 */
	function visibilityCheck() {
	    var renderableImages = [];
	    var keys = Object.keys(App.vars.invisibleImages);
	    var el;

	    keys.forEach(function (key) {
	        el = App.vars.invisibleImages[key];
	        if (dimensionCheck(el) && el.nodeName.toLowerCase() == 'img') {
	            renderableImages.push(el);
	            delete App.vars.invisibleImages[key];
	        }
	    });

	    if (renderableImages.length) {
	        Holder.run({
	            images: renderableImages
	        });
	    }

	    // Done to prevent 100% CPU usage via aggressive calling of requestAnimationFrame
	    setTimeout(function () {
	        global.requestAnimationFrame(visibilityCheck);
	    }, 10);
	}

	/**
	 * Starts checking for invisible placeholders if not doing so yet. Does nothing otherwise.
	 *
	 * @private
	 */
	function startVisibilityCheck() {
	    if (!App.vars.visibilityCheckStarted) {
	        global.requestAnimationFrame(visibilityCheck);
	        App.vars.visibilityCheckStarted = true;
	    }
	}

	/**
	 * Sets a unique ID for an image detected to be invisible and adds it to the map of invisible images checked by visibilityCheck
	 *
	 * @private
	 * @param el Invisible DOM element
	 */
	function setInvisible(el) {
	    if (!el.holderData.invisibleId) {
	        App.vars.invisibleId += 1;
	        App.vars.invisibleImages['i' + App.vars.invisibleId] = el;
	        el.holderData.invisibleId = App.vars.invisibleId;
	    }
	}

	//todo: see if possible to convert stagingRenderer to use HTML only
	var stagingRenderer = (function() {
	    var svg = null,
	        stagingText = null,
	        stagingTextNode = null;
	    return function(graph) {
	        var rootNode = graph.root;
	        if (App.setup.supportsSVG) {
	            var firstTimeSetup = false;
	            var tnode = function(text) {
	                return document.createTextNode(text);
	            };
	            if (svg == null || svg.parentNode !== document.body) {
	                firstTimeSetup = true;
	            }

	            svg = SVG.initSVG(svg, rootNode.properties.width, rootNode.properties.height);
	            //Show staging element before staging
	            svg.style.display = 'block';

	            if (firstTimeSetup) {
	                stagingText = DOM.newEl('text', SVG_NS);
	                stagingTextNode = tnode(null);
	                DOM.setAttr(stagingText, {
	                    x: 0
	                });
	                stagingText.appendChild(stagingTextNode);
	                svg.appendChild(stagingText);
	                document.body.appendChild(svg);
	                svg.style.visibility = 'hidden';
	                svg.style.position = 'absolute';
	                svg.style.top = '-100%';
	                svg.style.left = '-100%';
	                //todo: workaround for zero-dimension <svg> tag in Opera 12
	                //svg.setAttribute('width', 0);
	                //svg.setAttribute('height', 0);
	            }

	            var holderTextGroup = rootNode.children.holderTextGroup;
	            var htgProps = holderTextGroup.properties;
	            DOM.setAttr(stagingText, {
	                'y': htgProps.font.size,
	                'style': utils.cssProps({
	                    'font-weight': htgProps.font.weight,
	                    'font-size': htgProps.font.size + htgProps.font.units,
	                    'font-family': htgProps.font.family
	                })
	            });

	            //Get bounding box for the whole string (total width and height)
	            stagingTextNode.nodeValue = htgProps.text;
	            var stagingTextBBox = stagingText.getBBox();

	            //Get line count and split the string into words
	            var lineCount = Math.ceil(stagingTextBBox.width / (rootNode.properties.width * App.vars.lineWrapRatio));
	            var words = htgProps.text.split(' ');
	            var newlines = htgProps.text.match(/\\n/g);
	            lineCount += newlines == null ? 0 : newlines.length;

	            //Get bounding box for the string with spaces removed
	            stagingTextNode.nodeValue = htgProps.text.replace(/[ ]+/g, '');
	            var computedNoSpaceLength = stagingText.getComputedTextLength();

	            //Compute average space width
	            var diffLength = stagingTextBBox.width - computedNoSpaceLength;
	            var spaceWidth = Math.round(diffLength / Math.max(1, words.length - 1));

	            //Get widths for every word with space only if there is more than one line
	            var wordWidths = [];
	            if (lineCount > 1) {
	                stagingTextNode.nodeValue = '';
	                for (var i = 0; i < words.length; i++) {
	                    if (words[i].length === 0) continue;
	                    stagingTextNode.nodeValue = utils.decodeHtmlEntity(words[i]);
	                    var bbox = stagingText.getBBox();
	                    wordWidths.push({
	                        text: words[i],
	                        width: bbox.width
	                    });
	                }
	            }

	            //Hide staging element after staging
	            svg.style.display = 'none';

	            return {
	                spaceWidth: spaceWidth,
	                lineCount: lineCount,
	                boundingBox: stagingTextBBox,
	                words: wordWidths
	            };
	        } else {
	            //todo: canvas fallback for measuring text on android 2.3
	            return false;
	        }
	    };
	})();

	var sgCanvasRenderer = (function() {
	    var canvas = DOM.newEl('canvas');
	    var ctx = null;

	    return function(sceneGraph) {
	        if (ctx == null) {
	            ctx = canvas.getContext('2d');
	        }
	        var root = sceneGraph.root;
	        canvas.width = App.dpr(root.properties.width);
	        canvas.height = App.dpr(root.properties.height);
	        ctx.textBaseline = 'middle';

	        var bg = root.children.holderBg;
	        var bgWidth = App.dpr(bg.width);
	        var bgHeight = App.dpr(bg.height);
	        //todo: parametrize outline width (e.g. in scene object)
	        var outlineWidth = 2;
	        var outlineOffsetWidth = outlineWidth / 2;

	        ctx.fillStyle = bg.properties.fill;
	        ctx.fillRect(0, 0, bgWidth, bgHeight);

	        if (bg.properties.outline) {
	            //todo: abstract this into a method
	            ctx.strokeStyle = bg.properties.outline.fill;
	            ctx.lineWidth = bg.properties.outline.width;
	            ctx.moveTo(outlineOffsetWidth, outlineOffsetWidth);
	            // TL, TR, BR, BL
	            ctx.lineTo(bgWidth - outlineOffsetWidth, outlineOffsetWidth);
	            ctx.lineTo(bgWidth - outlineOffsetWidth, bgHeight - outlineOffsetWidth);
	            ctx.lineTo(outlineOffsetWidth, bgHeight - outlineOffsetWidth);
	            ctx.lineTo(outlineOffsetWidth, outlineOffsetWidth);
	            // Diagonals
	            ctx.moveTo(0, outlineOffsetWidth);
	            ctx.lineTo(bgWidth, bgHeight - outlineOffsetWidth);
	            ctx.moveTo(0, bgHeight - outlineOffsetWidth);
	            ctx.lineTo(bgWidth, outlineOffsetWidth);
	            ctx.stroke();
	        }

	        var textGroup = root.children.holderTextGroup;
	        ctx.font = textGroup.properties.font.weight + ' ' + App.dpr(textGroup.properties.font.size) + textGroup.properties.font.units + ' ' + textGroup.properties.font.family + ', monospace';
	        ctx.fillStyle = textGroup.properties.fill;

	        for (var lineKey in textGroup.children) {
	            var line = textGroup.children[lineKey];
	            for (var wordKey in line.children) {
	                var word = line.children[wordKey];
	                var x = App.dpr(textGroup.x + line.x + word.x);
	                var y = App.dpr(textGroup.y + line.y + word.y + (textGroup.properties.leading / 2));

	                ctx.fillText(word.properties.text, x, y);
	            }
	        }

	        return canvas.toDataURL('image/png');
	    };
	})();

	//Helpers

	/**
	 * Prevents a function from being called too often, waits until a timer elapses to call it again
	 *
	 * @param fn Function to call
	 */
	function debounce(fn) {
	    if (!App.vars.debounceTimer) fn.call(this);
	    if (App.vars.debounceTimer) global.clearTimeout(App.vars.debounceTimer);
	    App.vars.debounceTimer = global.setTimeout(function() {
	        App.vars.debounceTimer = null;
	        fn.call(this);
	    }, App.setup.debounce);
	}

	/**
	 * Holder-specific resize/orientation change callback, debounced to prevent excessive execution
	 */
	function resizeEvent() {
	    debounce(function() {
	        updateResizableElements(null);
	    });
	}

	//Set up flags

	for (var flag in App.flags) {
	    if (!App.flags.hasOwnProperty(flag)) continue;
	    App.flags[flag].match = function(val) {
	        return val.match(this.regex);
	    };
	}

	//Properties set once on setup

	App.setup = {
	    renderer: 'html',
	    debounce: 100,
	    ratio: 1,
	    supportsCanvas: false,
	    supportsSVG: false,
	    lineWrapRatio: 0.9,
	    dataAttr: 'data-src',
	    renderers: ['html', 'canvas', 'svg']
	};

	App.dpr = function(val) {
	    return val * App.setup.ratio;
	};

	//Properties modified during runtime

	App.vars = {
	    preempted: false,
	    resizableImages: [],
	    invisibleImages: {},
	    invisibleId: 0,
	    visibilityCheckStarted: false,
	    debounceTimer: null,
	    cache: {}
	};

	//Pre-flight

	(function() {
	    var devicePixelRatio = 1,
	        backingStoreRatio = 1;

	    var canvas = DOM.newEl('canvas');
	    var ctx = null;

	    if (canvas.getContext) {
	        if (canvas.toDataURL('image/png').indexOf('data:image/png') != -1) {
	            App.setup.renderer = 'canvas';
	            ctx = canvas.getContext('2d');
	            App.setup.supportsCanvas = true;
	        }
	    }

	    if (App.setup.supportsCanvas) {
	        devicePixelRatio = global.devicePixelRatio || 1;
	        backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;
	    }

	    App.setup.ratio = devicePixelRatio / backingStoreRatio;

	    if (!!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect) {
	        App.setup.renderer = 'svg';
	        App.setup.supportsSVG = true;
	    }
	})();

	//Starts checking for invisible placeholders
	startVisibilityCheck();

	if (onDomReady) {
	    onDomReady(function() {
	        if (!App.vars.preempted) {
	            Holder.run();
	        }
	        if (global.addEventListener) {
	            global.addEventListener('resize', resizeEvent, false);
	            global.addEventListener('orientationchange', resizeEvent, false);
	        } else {
	            global.attachEvent('onresize', resizeEvent);
	        }

	        if (typeof global.Turbolinks == 'object') {
	            global.document.addEventListener('page:change', function() {
	                Holder.run();
	            });
	        }
	    });
	}

	module.exports = Holder;

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	/*!
	 * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license
	 *
	 * Specially modified to work with Holder.js
	 */

	function _onDomReady(win) {
	    //Lazy loading fix for Firefox < 3.6
	    //http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html
	    if (document.readyState == null && document.addEventListener) {
	        document.addEventListener("DOMContentLoaded", function DOMContentLoaded() {
	            document.removeEventListener("DOMContentLoaded", DOMContentLoaded, false);
	            document.readyState = "complete";
	        }, false);
	        document.readyState = "loading";
	    }
	    
	    var doc = win.document,
	        docElem = doc.documentElement,
	    
	        LOAD = "load",
	        FALSE = false,
	        ONLOAD = "on"+LOAD,
	        COMPLETE = "complete",
	        READYSTATE = "readyState",
	        ATTACHEVENT = "attachEvent",
	        DETACHEVENT = "detachEvent",
	        ADDEVENTLISTENER = "addEventListener",
	        DOMCONTENTLOADED = "DOMContentLoaded",
	        ONREADYSTATECHANGE = "onreadystatechange",
	        REMOVEEVENTLISTENER = "removeEventListener",
	    
	        // W3C Event model
	        w3c = ADDEVENTLISTENER in doc,
	        _top = FALSE,
	    
	        // isReady: Is the DOM ready to be used? Set to true once it occurs.
	        isReady = FALSE,
	    
	        // Callbacks pending execution until DOM is ready
	        callbacks = [];
	    
	    // Handle when the DOM is ready
	    function ready( fn ) {
	        if ( !isReady ) {
	    
	            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
	            if ( !doc.body ) {
	                return defer( ready );
	            }
	    
	            // Remember that the DOM is ready
	            isReady = true;
	    
	            // Execute all callbacks
	            while ( fn = callbacks.shift() ) {
	                defer( fn );
	            }
	        }
	    }
	    
	    // The ready event handler
	    function completed( event ) {
	        // readyState === "complete" is good enough for us to call the dom ready in oldIE
	        if ( w3c || event.type === LOAD || doc[READYSTATE] === COMPLETE ) {
	            detach();
	            ready();
	        }
	    }
	    
	    // Clean-up method for dom ready events
	    function detach() {
	        if ( w3c ) {
	            doc[REMOVEEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );
	            win[REMOVEEVENTLISTENER]( LOAD, completed, FALSE );
	        } else {
	            doc[DETACHEVENT]( ONREADYSTATECHANGE, completed );
	            win[DETACHEVENT]( ONLOAD, completed );
	        }
	    }
	    
	    // Defers a function, scheduling it to run after the current call stack has cleared.
	    function defer( fn, wait ) {
	        // Allow 0 to be passed
	        setTimeout( fn, +wait >= 0 ? wait : 1 );
	    }
	    
	    // Attach the listeners:
	    
	    // Catch cases where onDomReady is called after the browser event has already occurred.
	    // we once tried to use readyState "interactive" here, but it caused issues like the one
	    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
	    if ( doc[READYSTATE] === COMPLETE ) {
	        // Handle it asynchronously to allow scripts the opportunity to delay ready
	        defer( ready );
	    
	    // Standards-based browsers support DOMContentLoaded
	    } else if ( w3c ) {
	        // Use the handy event callback
	        doc[ADDEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );
	    
	        // A fallback to window.onload, that will always work
	        win[ADDEVENTLISTENER]( LOAD, completed, FALSE );
	    
	    // If IE event model is used
	    } else {
	        // Ensure firing before onload, maybe late but safe also for iframes
	        doc[ATTACHEVENT]( ONREADYSTATECHANGE, completed );
	    
	        // A fallback to window.onload, that will always work
	        win[ATTACHEVENT]( ONLOAD, completed );
	    
	        // If IE and not a frame
	        // continually check to see if the document is ready
	        try {
	            _top = win.frameElement == null && docElem;
	        } catch(e) {}
	    
	        if ( _top && _top.doScroll ) {
	            (function doScrollCheck() {
	                if ( !isReady ) {
	                    try {
	                        // Use the trick by Diego Perini
	                        // http://javascript.nwbox.com/IEContentLoaded/
	                        _top.doScroll("left");
	                    } catch(e) {
	                        return defer( doScrollCheck, 50 );
	                    }
	    
	                    // detach all dom ready events
	                    detach();
	    
	                    // and execute any waiting functions
	                    ready();
	                }
	            })();
	        }
	    }
	    
	    function onDomReady( fn ) {
	        // If DOM is ready, execute the function (async), otherwise wait
	        isReady ? defer( fn ) : callbacks.push( fn );
	    }
	    
	    // Add version
	    onDomReady.version = "1.4.0";
	    // Add method to check if DOM is ready
	    onDomReady.isReady = function(){
	        return isReady;
	    };

	    return onDomReady;
	}

	module.exports = typeof window !== "undefined" && _onDomReady(window);

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	//Modified version of component/querystring
	//Changes: updated dependencies, dot notation parsing, JSHint fixes
	//Fork at https://github.com/imsky/querystring

	/**
	 * Module dependencies.
	 */

	var encode = encodeURIComponent;
	var decode = decodeURIComponent;
	var trim = __webpack_require__(11);
	var type = __webpack_require__(12);

	var arrayRegex = /(\w+)\[(\d+)\]/;
	var objectRegex = /\w+\.\w+/;

	/**
	 * Parse the given query `str`.
	 *
	 * @param {String} str
	 * @return {Object}
	 * @api public
	 */

	exports.parse = function(str){
	  if ('string' !== typeof str) return {};

	  str = trim(str);
	  if ('' === str) return {};
	  if ('?' === str.charAt(0)) str = str.slice(1);

	  var obj = {};
	  var pairs = str.split('&');
	  for (var i = 0; i < pairs.length; i++) {
	    var parts = pairs[i].split('=');
	    var key = decode(parts[0]);
	    var m, ctx, prop;

	    if (m = arrayRegex.exec(key)) {
	      obj[m[1]] = obj[m[1]] || [];
	      obj[m[1]][m[2]] = decode(parts[1]);
	      continue;
	    }

	    if (m = objectRegex.test(key)) {
	      m = key.split('.');
	      ctx = obj;
	      
	      while (m.length) {
	        prop = m.shift();

	        if (!prop.length) continue;

	        if (!ctx[prop]) {
	          ctx[prop] = {};
	        } else if (ctx[prop] && typeof ctx[prop] !== 'object') {
	          break;
	        }

	        if (!m.length) {
	          ctx[prop] = decode(parts[1]);
	        }

	        ctx = ctx[prop];
	      }

	      continue;
	    }

	    obj[parts[0]] = null == parts[1] ? '' : decode(parts[1]);
	  }

	  return obj;
	};

	/**
	 * Stringify the given `obj`.
	 *
	 * @param {Object} obj
	 * @return {String}
	 * @api public
	 */

	exports.stringify = function(obj){
	  if (!obj) return '';
	  var pairs = [];

	  for (var key in obj) {
	    var value = obj[key];

	    if ('array' == type(value)) {
	      for (var i = 0; i < value.length; ++i) {
	        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));
	      }
	      continue;
	    }

	    pairs.push(encode(key) + '=' + encode(obj[key]));
	  }

	  return pairs.join('&');
	};


/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var SceneGraph = function(sceneProperties) {
	    var nodeCount = 1;

	    //todo: move merge to helpers section
	    function merge(parent, child) {
	        for (var prop in child) {
	            parent[prop] = child[prop];
	        }
	        return parent;
	    }

	    var SceneNode = function(name) {
	        nodeCount++;
	        this.parent = null;
	        this.children = {};
	        this.id = nodeCount;
	        this.name = 'n' + nodeCount;
	        if (typeof name !== 'undefined') {
	            this.name = name;
	        }
	        this.x = this.y = this.z = 0;
	        this.width = this.height = 0;
	    };

	    SceneNode.prototype.resize = function(width, height) {
	        if (width != null) {
	            this.width = width;
	        }
	        if (height != null) {
	            this.height = height;
	        }
	    };

	    SceneNode.prototype.moveTo = function(x, y, z) {
	        this.x = x != null ? x : this.x;
	        this.y = y != null ? y : this.y;
	        this.z = z != null ? z : this.z;
	    };

	    SceneNode.prototype.add = function(child) {
	        var name = child.name;
	        if (typeof this.children[name] === 'undefined') {
	            this.children[name] = child;
	            child.parent = this;
	        } else {
	            throw 'SceneGraph: child already exists: ' + name;
	        }
	    };

	    var RootNode = function() {
	        SceneNode.call(this, 'root');
	        this.properties = sceneProperties;
	    };

	    RootNode.prototype = new SceneNode();

	    var Shape = function(name, props) {
	        SceneNode.call(this, name);
	        this.properties = {
	            'fill': '#000000'
	        };
	        if (typeof props !== 'undefined') {
	            merge(this.properties, props);
	        } else if (typeof name !== 'undefined' && typeof name !== 'string') {
	            throw 'SceneGraph: invalid node name';
	        }
	    };

	    Shape.prototype = new SceneNode();

	    var Group = function() {
	        Shape.apply(this, arguments);
	        this.type = 'group';
	    };

	    Group.prototype = new Shape();

	    var Rect = function() {
	        Shape.apply(this, arguments);
	        this.type = 'rect';
	    };

	    Rect.prototype = new Shape();

	    var Text = function(text) {
	        Shape.call(this);
	        this.type = 'text';
	        this.properties.text = text;
	    };

	    Text.prototype = new Shape();

	    var root = new RootNode();

	    this.Shape = {
	        'Rect': Rect,
	        'Text': Text,
	        'Group': Group
	    };

	    this.root = root;
	    return this;
	};

	module.exports = SceneGraph;


/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	/**
	 * Shallow object clone and merge
	 *
	 * @param a Object A
	 * @param b Object B
	 * @returns {Object} New object with all of A's properties, and all of B's properties, overwriting A's properties
	 */
	exports.extend = function(a, b) {
	    var c = {};
	    for (var x in a) {
	        if (a.hasOwnProperty(x)) {
	            c[x] = a[x];
	        }
	    }
	    if (b != null) {
	        for (var y in b) {
	            if (b.hasOwnProperty(y)) {
	                c[y] = b[y];
	            }
	        }
	    }
	    return c;
	};

	/**
	 * Takes a k/v list of CSS properties and returns a rule
	 *
	 * @param props CSS properties object
	 */
	exports.cssProps = function(props) {
	    var ret = [];
	    for (var p in props) {
	        if (props.hasOwnProperty(p)) {
	            ret.push(p + ':' + props[p]);
	        }
	    }
	    return ret.join(';');
	};

	/**
	 * Encodes HTML entities in a string
	 *
	 * @param str Input string
	 */
	exports.encodeHtmlEntity = function(str) {
	    var buf = [];
	    var charCode = 0;
	    for (var i = str.length - 1; i >= 0; i--) {
	        charCode = str.charCodeAt(i);
	        if (charCode > 128) {
	            buf.unshift(['&#', charCode, ';'].join(''));
	        } else {
	            buf.unshift(str[i]);
	        }
	    }
	    return buf.join('');
	};

	/**
	 * Checks if an image exists
	 *
	 * @param src URL of image
	 * @param callback Callback to call once image status has been found
	 */
	exports.imageExists = function(src, callback) {
	    var image = new Image();
	    image.onerror = function() {
	        callback.call(this, false);
	    };
	    image.onload = function() {
	        callback.call(this, true);
	    };
	    image.src = src;
	};

	/**
	 * Decodes HTML entities in a string
	 *
	 * @param str Input string
	 */
	exports.decodeHtmlEntity = function(str) {
	    return str.replace(/&#(\d+);/g, function(match, dec) {
	        return String.fromCharCode(dec);
	    });
	};


	/**
	 * Returns an element's dimensions if it's visible, `false` otherwise.
	 *
	 * @param el DOM element
	 */
	exports.dimensionCheck = function(el) {
	    var dimensions = {
	        height: el.clientHeight,
	        width: el.clientWidth
	    };

	    if (dimensions.height && dimensions.width) {
	        return dimensions;
	    } else {
	        return false;
	    }
	};


	/**
	 * Returns true if value is truthy or if it is "semantically truthy"
	 * @param val
	 */
	exports.truthy = function(val) {
	    if (typeof val === 'string') {
	        return val === 'true' || val === 'yes' || val === '1' || val === 'on' || val === '';
	    }
	    return !!val;
	};

	/**
	 * Parses input into a well-formed CSS color
	 * @param val
	 */
	exports.parseColor = function(val) {
	    var hexre = /(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i;
	    var rgbre = /^rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;
	    var rgbare = /^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0\.\d{1,}|1)\)$/;

	    var match = val.match(hexre);
	    var retval;

	    if (match !== null) {
	        retval = match[1] || match[2];
	        if (retval[0] !== '#') {
	            return '#' + retval;
	        } else {
	            return retval;
	        }
	    }

	    match = val.match(rgbre);

	    if (match !== null) {
	        retval = 'rgb(' + match.slice(1).join(',') + ')';
	        return retval;
	    }

	    match = val.match(rgbare);

	    if (match !== null) {
	        retval = 'rgba(' + match.slice(1).join(',') + ')';
	        return retval;
	    }

	    return null;
	};

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {var DOM = __webpack_require__(7);

	var SVG_NS = 'http://www.w3.org/2000/svg';
	var NODE_TYPE_COMMENT = 8;

	/**
	 * Generic SVG element creation function
	 *
	 * @param svg SVG context, set to null if new
	 * @param width Document width
	 * @param height Document height
	 */
	exports.initSVG = function(svg, width, height) {
	    var defs, style, initialize = false;

	    if (svg && svg.querySelector) {
	        style = svg.querySelector('style');
	        if (style === null) {
	            initialize = true;
	        }
	    } else {
	        svg = DOM.newEl('svg', SVG_NS);
	        initialize = true;
	    }

	    if (initialize) {
	        defs = DOM.newEl('defs', SVG_NS);
	        style = DOM.newEl('style', SVG_NS);
	        DOM.setAttr(style, {
	            'type': 'text/css'
	        });
	        defs.appendChild(style);
	        svg.appendChild(defs);
	    }

	    //IE throws an exception if this is set and Chrome requires it to be set
	    if (svg.webkitMatchesSelector) {
	        svg.setAttribute('xmlns', SVG_NS);
	    }

	    //Remove comment nodes
	    for (var i = 0; i < svg.childNodes.length; i++) {
	        if (svg.childNodes[i].nodeType === NODE_TYPE_COMMENT) {
	            svg.removeChild(svg.childNodes[i]);
	        }
	    }

	    //Remove CSS
	    while (style.childNodes.length) {
	        style.removeChild(style.childNodes[0]);
	    }

	    DOM.setAttr(svg, {
	        'width': width,
	        'height': height,
	        'viewBox': '0 0 ' + width + ' ' + height,
	        'preserveAspectRatio': 'none'
	    });

	    return svg;
	};

	/**
	 * Converts serialized SVG to a string suitable for data URI use
	 * @param svgString Serialized SVG string
	 * @param [base64] Use base64 encoding for data URI
	 */
	exports.svgStringToDataURI = function() {
	    var rawPrefix = 'data:image/svg+xml;charset=UTF-8,';
	    var base64Prefix = 'data:image/svg+xml;charset=UTF-8;base64,';

	    return function(svgString, base64) {
	        if (base64) {
	            return base64Prefix + btoa(global.unescape(encodeURIComponent(svgString)));
	        } else {
	            return rawPrefix + encodeURIComponent(svgString);
	        }
	    };
	}();

	/**
	 * Returns serialized SVG with XML processing instructions
	 *
	 * @param svg SVG context
	 * @param stylesheets CSS stylesheets to include
	 */
	exports.serializeSVG = function(svg, engineSettings) {
	    if (!global.XMLSerializer) return;
	    var serializer = new XMLSerializer();
	    var svgCSS = '';
	    var stylesheets = engineSettings.stylesheets;

	    //External stylesheets: Processing Instruction method
	    if (engineSettings.svgXMLStylesheet) {
	        var xml = DOM.createXML();
	        //Add <?xml-stylesheet ?> directives
	        for (var i = stylesheets.length - 1; i >= 0; i--) {
	            var csspi = xml.createProcessingInstruction('xml-stylesheet', 'href="' + stylesheets[i] + '" rel="stylesheet"');
	            xml.insertBefore(csspi, xml.firstChild);
	        }

	        xml.removeChild(xml.documentElement);
	        svgCSS = serializer.serializeToString(xml);
	    }

	    var svgText = serializer.serializeToString(svg);
	    svgText = svgText.replace(/\&amp;(\#[0-9]{2,}\;)/g, '&$1');
	    return svgCSS + svgText;
	};

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {/**
	 * Generic new DOM element function
	 *
	 * @param tag Tag to create
	 * @param namespace Optional namespace value
	 */
	exports.newEl = function(tag, namespace) {
	    if (!global.document) return;

	    if (namespace == null) {
	        return global.document.createElement(tag);
	    } else {
	        return global.document.createElementNS(namespace, tag);
	    }
	};

	/**
	 * Generic setAttribute function
	 *
	 * @param el Reference to DOM element
	 * @param attrs Object with attribute keys and values
	 */
	exports.setAttr = function (el, attrs) {
	    for (var a in attrs) {
	        el.setAttribute(a, attrs[a]);
	    }
	};

	/**
	 * Creates a XML document
	 * @private
	 */
	exports.createXML = function() {
	    if (!global.DOMParser) return;
	    return new DOMParser().parseFromString('<xml />', 'application/xml');
	};

	/**
	 * Converts a value into an array of DOM nodes
	 *
	 * @param val A string, a NodeList, a Node, or an HTMLCollection
	 */
	exports.getNodeArray = function(val) {
	    var retval = null;
	    if (typeof(val) == 'string') {
	        retval = document.querySelectorAll(val);
	    } else if (global.NodeList && val instanceof global.NodeList) {
	        retval = val;
	    } else if (global.Node && val instanceof global.Node) {
	        retval = [val];
	    } else if (global.HTMLCollection && val instanceof global.HTMLCollection) {
	        retval = val;
	    } else if (val instanceof Array) {
	        retval = val;
	    } else if (val === null) {
	        retval = [];
	    }

	    retval = Array.prototype.slice.call(retval);

	    return retval;
	};

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	var Color = function(color, options) {
	    //todo: support rgba, hsla, and rrggbbaa notation
	    //todo: use CIELAB internally
	    //todo: add clamp function (with sign)
	    if (typeof color !== 'string') return;

	    this.original = color;

	    if (color.charAt(0) === '#') {
	        color = color.slice(1);
	    }

	    if (/[^a-f0-9]+/i.test(color)) return;

	    if (color.length === 3) {
	        color = color.replace(/./g, '$&$&');
	    }

	    if (color.length !== 6) return;

	    this.alpha = 1;

	    if (options && options.alpha) {
	        this.alpha = options.alpha;
	    }

	    this.set(parseInt(color, 16));
	};

	//todo: jsdocs
	Color.rgb2hex = function(r, g, b) {
	    function format (decimal) {
	        var hex = (decimal | 0).toString(16);
	        if (decimal < 16) {
	            hex = '0' + hex;
	        }
	        return hex;
	    }

	    return [r, g, b].map(format).join('');
	};

	//todo: jsdocs
	Color.hsl2rgb = function (h, s, l) {
	    var H = h / 60;
	    var C = (1 - Math.abs(2 * l - 1)) * s;
	    var X = C * (1 - Math.abs(parseInt(H) % 2 - 1));
	    var m = l - (C / 2);

	    var r = 0, g = 0, b = 0;

	    if (H >= 0 && H < 1) {
	        r = C;
	        g = X;
	    } else if (H >= 1 && H < 2) {
	        r = X;
	        g = C;
	    } else if (H >= 2 && H < 3) {
	        g = C;
	        b = X;
	    } else if (H >= 3 && H < 4) {
	        g = X;
	        b = C;
	    } else if (H >= 4 && H < 5) {
	        r = X;
	        b = C;
	    } else if (H >= 5 && H < 6) {
	        r = C;
	        b = X;
	    }

	    r += m;
	    g += m;
	    b += m;

	    r = parseInt(r * 255);
	    g = parseInt(g * 255);
	    b = parseInt(b * 255);

	    return [r, g, b];
	};

	/**
	 * Sets the color from a raw RGB888 integer
	 * @param raw RGB888 representation of color
	 */
	//todo: refactor into a static method
	//todo: factor out individual color spaces
	//todo: add HSL, CIELAB, and CIELUV
	Color.prototype.set = function (val) {
	    this.raw = val;

	    var r = (this.raw & 0xFF0000) >> 16;
	    var g = (this.raw & 0x00FF00) >> 8;
	    var b = (this.raw & 0x0000FF);

	    // BT.709
	    var y = 0.2126 * r + 0.7152 * g + 0.0722 * b;
	    var u = -0.09991 * r - 0.33609 * g + 0.436 * b;
	    var v = 0.615 * r - 0.55861 * g - 0.05639 * b;

	    this.rgb = {
	        r: r,
	        g: g,
	        b: b
	    };

	    this.yuv = {
	        y: y,
	        u: u,
	        v: v
	    };

	    return this;
	};

	/**
	 * Lighten or darken a color
	 * @param multiplier Amount to lighten or darken (-1 to 1)
	 */
	Color.prototype.lighten = function(multiplier) {
	    var cm = Math.min(1, Math.max(0, Math.abs(multiplier))) * (multiplier < 0 ? -1 : 1);
	    var bm = (255 * cm) | 0;
	    var cr = Math.min(255, Math.max(0, this.rgb.r + bm));
	    var cg = Math.min(255, Math.max(0, this.rgb.g + bm));
	    var cb = Math.min(255, Math.max(0, this.rgb.b + bm));
	    var hex = Color.rgb2hex(cr, cg, cb);
	    return new Color(hex);
	};

	/**
	 * Output color in hex format
	 * @param addHash Add a hash character to the beginning of the output
	 */
	Color.prototype.toHex = function(addHash) {
	    return (addHash ? '#' : '') + this.raw.toString(16);
	};

	/**
	 * Returns whether or not current color is lighter than another color
	 * @param color Color to compare against
	 */
	Color.prototype.lighterThan = function(color) {
	    if (!(color instanceof Color)) {
	        color = new Color(color);
	    }

	    return this.yuv.y > color.yuv.y;
	};

	/**
	 * Returns the result of mixing current color with another color
	 * @param color Color to mix with
	 * @param multiplier How much to mix with the other color
	 */
	/*
	Color.prototype.mix = function (color, multiplier) {
	    if (!(color instanceof Color)) {
	        color = new Color(color);
	    }

	    var r = this.rgb.r;
	    var g = this.rgb.g;
	    var b = this.rgb.b;
	    var a = this.alpha;

	    var m = typeof multiplier !== 'undefined' ? multiplier : 0.5;

	    //todo: write a lerp function
	    r = r + m * (color.rgb.r - r);
	    g = g + m * (color.rgb.g - g);
	    b = b + m * (color.rgb.b - b);
	    a = a + m * (color.alpha - a);

	    return new Color(Color.rgbToHex(r, g, b), {
	        'alpha': a
	    });
	};
	*/

	/**
	 * Returns the result of blending another color on top of current color with alpha
	 * @param color Color to blend on top of current color, i.e. "Ca"
	 */
	//todo: see if .blendAlpha can be merged into .mix
	Color.prototype.blendAlpha = function(color) {
	    if (!(color instanceof Color)) {
	        color = new Color(color);
	    }

	    var Ca = color;
	    var Cb = this;

	    //todo: write alpha blending function
	    var r = Ca.alpha * Ca.rgb.r + (1 - Ca.alpha) * Cb.rgb.r;
	    var g = Ca.alpha * Ca.rgb.g + (1 - Ca.alpha) * Cb.rgb.g;
	    var b = Ca.alpha * Ca.rgb.b + (1 - Ca.alpha) * Cb.rgb.b;

	    return new Color(Color.rgb2hex(r, g, b));
	};

	module.exports = Color;


/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = {
	  'version': '2.8.2',
	  'svg_ns': 'http://www.w3.org/2000/svg'
	};

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {var SVG = __webpack_require__(6);
	var DOM = __webpack_require__(7);
	var utils = __webpack_require__(5);
	var constants = __webpack_require__(9);

	var SVG_NS = constants.svg_ns;

	var generatorComment = '\n' +
	    'Created with Holder.js ' + constants.version + '.\n' +
	    'Learn more at http://holderjs.com\n' +
	    '(c) 2012-2015 Ivan Malopinsky - http://imsky.co\n';

	module.exports = (function() {
	    //Prevent IE <9 from initializing SVG renderer
	    if (!global.XMLSerializer) return;
	    var xml = DOM.createXML();
	    var svg = SVG.initSVG(null, 0, 0);
	    var bgEl = DOM.newEl('rect', SVG_NS);
	    svg.appendChild(bgEl);

	    //todo: create a reusable pool for textNodes, resize if more words present

	    return function(sceneGraph, renderSettings) {
	        var root = sceneGraph.root;

	        SVG.initSVG(svg, root.properties.width, root.properties.height);

	        var groups = svg.querySelectorAll('g');

	        for (var i = 0; i < groups.length; i++) {
	            groups[i].parentNode.removeChild(groups[i]);
	        }

	        var holderURL = renderSettings.holderSettings.flags.holderURL;
	        var holderId = 'holder_' + (Number(new Date()) + 32768 + (0 | Math.random() * 32768)).toString(16);
	        var sceneGroupEl = DOM.newEl('g', SVG_NS);
	        var textGroup = root.children.holderTextGroup;
	        var tgProps = textGroup.properties;
	        var textGroupEl = DOM.newEl('g', SVG_NS);
	        var tpdata = textGroup.textPositionData;
	        var textCSSRule = '#' + holderId + ' text { ' +
	            utils.cssProps({
	                'fill': tgProps.fill,
	                'font-weight': tgProps.font.weight,
	                'font-family': tgProps.font.family + ', monospace',
	                'font-size': tgProps.font.size + tgProps.font.units
	            }) + ' } ';
	        var commentNode = xml.createComment('\n' + 'Source URL: ' + holderURL + generatorComment);
	        var holderCSS = xml.createCDATASection(textCSSRule);
	        var styleEl = svg.querySelector('style');
	        var bg = root.children.holderBg;

	        DOM.setAttr(sceneGroupEl, {
	            id: holderId
	        });

	        svg.insertBefore(commentNode, svg.firstChild);
	        styleEl.appendChild(holderCSS);

	        sceneGroupEl.appendChild(bgEl);

	        //todo: abstract this into a cross-browser SVG outline method
	        if (bg.properties.outline) {
	            var outlineEl = DOM.newEl('path', SVG_NS);
	            var outlineWidth = bg.properties.outline.width;
	            var outlineOffsetWidth = outlineWidth / 2;
	            DOM.setAttr(outlineEl, {
	                'd': [
	                    'M', outlineOffsetWidth, outlineOffsetWidth,
	                    'H', bg.width - outlineOffsetWidth,
	                    'V', bg.height - outlineOffsetWidth,
	                    'H', outlineOffsetWidth,
	                    'V', 0,
	                    'M', 0, outlineOffsetWidth,
	                    'L', bg.width, bg.height - outlineOffsetWidth,
	                    'M', 0, bg.height - outlineOffsetWidth,
	                    'L', bg.width, outlineOffsetWidth
	                ].join(' '),
	                'stroke-width': bg.properties.outline.width,
	                'stroke': bg.properties.outline.fill,
	                'fill': 'none'
	            });
	            sceneGroupEl.appendChild(outlineEl);
	        }

	        sceneGroupEl.appendChild(textGroupEl);
	        svg.appendChild(sceneGroupEl);

	        DOM.setAttr(bgEl, {
	            'width': bg.width,
	            'height': bg.height,
	            'fill': bg.properties.fill
	        });

	        textGroup.y += tpdata.boundingBox.height * 0.8;

	        for (var lineKey in textGroup.children) {
	            var line = textGroup.children[lineKey];
	            for (var wordKey in line.children) {
	                var word = line.children[wordKey];
	                var x = textGroup.x + line.x + word.x;
	                var y = textGroup.y + line.y + word.y;

	                var textEl = DOM.newEl('text', SVG_NS);
	                var textNode = document.createTextNode(null);

	                DOM.setAttr(textEl, {
	                    'x': x,
	                    'y': y
	                });

	                textNode.nodeValue = word.properties.text;
	                textEl.appendChild(textNode);
	                textGroupEl.appendChild(textEl);
	            }
	        }

	        //todo: factor the background check up the chain, perhaps only return reference
	        var svgString = SVG.svgStringToDataURI(SVG.serializeSVG(svg, renderSettings.engineSettings), renderSettings.mode === 'background');
	        return svgString;
	    };
	})();
	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	
	exports = module.exports = trim;

	function trim(str){
	  return str.replace(/^\s*|\s*$/g, '');
	}

	exports.left = function(str){
	  return str.replace(/^\s*/, '');
	};

	exports.right = function(str){
	  return str.replace(/\s*$/, '');
	};


/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	/**
	 * toString ref.
	 */

	var toString = Object.prototype.toString;

	/**
	 * Return the type of `val`.
	 *
	 * @param {Mixed} val
	 * @return {String}
	 * @api public
	 */

	module.exports = function(val){
	  switch (toString.call(val)) {
	    case '[object Date]': return 'date';
	    case '[object RegExp]': return 'regexp';
	    case '[object Arguments]': return 'arguments';
	    case '[object Array]': return 'array';
	    case '[object Error]': return 'error';
	  }

	  if (val === null) return 'null';
	  if (val === undefined) return 'undefined';
	  if (val !== val) return 'nan';
	  if (val && val.nodeType === 1) return 'element';

	  val = val.valueOf
	    ? val.valueOf()
	    : Object.prototype.valueOf.apply(val)

	  return typeof val;
	};


/***/ }
/******/ ])
});
;
(function(ctx, isMeteorPackage) {
    if (isMeteorPackage) {
        Holder = ctx.Holder;
    }
})(this, typeof Meteor !== 'undefined' && typeof Package !== 'undefined');

/* @license
morris.js v0.5.0
Copyright 2014 Olly Smith All rights reserved.
Licensed under the BSD-2-Clause License.
*/


(function() {
  var $, Morris, minutesSpecHelper, secondsSpecHelper,
    __slice = [].slice,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  Morris = window.Morris = {};

  $ = jQuery;

  Morris.EventEmitter = (function() {
    function EventEmitter() {}

    EventEmitter.prototype.on = function(name, handler) {
      if (this.handlers == null) {
        this.handlers = {};
      }
      if (this.handlers[name] == null) {
        this.handlers[name] = [];
      }
      this.handlers[name].push(handler);
      return this;
    };

    EventEmitter.prototype.fire = function() {
      var args, handler, name, _i, _len, _ref, _results;
      name = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
      if ((this.handlers != null) && (this.handlers[name] != null)) {
        _ref = this.handlers[name];
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          handler = _ref[_i];
          _results.push(handler.apply(null, args));
        }
        return _results;
      }
    };

    return EventEmitter;

  })();

  Morris.commas = function(num) {
    var absnum, intnum, ret, strabsnum;
    if (num != null) {
      ret = num < 0 ? "-" : "";
      absnum = Math.abs(num);
      intnum = Math.floor(absnum).toFixed(0);
      ret += intnum.replace(/(?=(?:\d{3})+$)(?!^)/g, ',');
      strabsnum = absnum.toString();
      if (strabsnum.length > intnum.length) {
        ret += strabsnum.slice(intnum.length);
      }
      return ret;
    } else {
      return '-';
    }
  };

  Morris.pad2 = function(number) {
    return (number < 10 ? '0' : '') + number;
  };

  Morris.Grid = (function(_super) {
    __extends(Grid, _super);

    function Grid(options) {
      this.resizeHandler = __bind(this.resizeHandler, this);
      var _this = this;
      if (typeof options.element === 'string') {
        this.el = $(document.getElementById(options.element));
      } else {
        this.el = $(options.element);
      }
      if ((this.el == null) || this.el.length === 0) {
        throw new Error("Graph container element not found");
      }
      if (this.el.css('position') === 'static') {
        this.el.css('position', 'relative');
      }
      this.options = $.extend({}, this.gridDefaults, this.defaults || {}, options);
      if (typeof this.options.units === 'string') {
        this.options.postUnits = options.units;
      }
      this.raphael = new Raphael(this.el[0]);
      this.elementWidth = null;
      this.elementHeight = null;
      this.dirty = false;
      this.selectFrom = null;
      if (this.init) {
        this.init();
      }
      this.setData(this.options.data);
      this.el.bind('mousemove', function(evt) {
        var left, offset, right, width, x;
        offset = _this.el.offset();
        x = evt.pageX - offset.left;
        if (_this.selectFrom) {
          left = _this.data[_this.hitTest(Math.min(x, _this.selectFrom))]._x;
          right = _this.data[_this.hitTest(Math.max(x, _this.selectFrom))]._x;
          width = right - left;
          return _this.selectionRect.attr({
            x: left,
            width: width
          });
        } else {
          return _this.fire('hovermove', x, evt.pageY - offset.top);
        }
      });
      this.el.bind('mouseleave', function(evt) {
        if (_this.selectFrom) {
          _this.selectionRect.hide();
          _this.selectFrom = null;
        }
        return _this.fire('hoverout');
      });
      this.el.bind('touchstart touchmove touchend', function(evt) {
        var offset, touch;
        touch = evt.originalEvent.touches[0] || evt.originalEvent.changedTouches[0];
        offset = _this.el.offset();
        return _this.fire('hovermove', touch.pageX - offset.left, touch.pageY - offset.top);
      });
      this.el.bind('click', function(evt) {
        var offset;
        offset = _this.el.offset();
        return _this.fire('gridclick', evt.pageX - offset.left, evt.pageY - offset.top);
      });
      if (this.options.rangeSelect) {
        this.selectionRect = this.raphael.rect(0, 0, 0, this.el.innerHeight()).attr({
          fill: this.options.rangeSelectColor,
          stroke: false
        }).toBack().hide();
        this.el.bind('mousedown', function(evt) {
          var offset;
          offset = _this.el.offset();
          return _this.startRange(evt.pageX - offset.left);
        });
        this.el.bind('mouseup', function(evt) {
          var offset;
          offset = _this.el.offset();
          _this.endRange(evt.pageX - offset.left);
          return _this.fire('hovermove', evt.pageX - offset.left, evt.pageY - offset.top);
        });
      }
      if (this.options.resize) {
        $(window).bind('resize', function(evt) {
          if (_this.timeoutId != null) {
            window.clearTimeout(_this.timeoutId);
          }
          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);
        });
      }
      this.el.css('-webkit-tap-highlight-color', 'rgba(0,0,0,0)');
      if (this.postInit) {
        this.postInit();
      }
    }

    Grid.prototype.gridDefaults = {
      dateFormat: null,
      axes: true,
      grid: true,
      gridLineColor: '#aaa',
      gridStrokeWidth: 0.5,
      gridTextColor: '#888',
      gridTextSize: 12,
      gridTextFamily: 'sans-serif',
      gridTextWeight: 'normal',
      hideHover: false,
      yLabelFormat: null,
      xLabelAngle: 0,
      numLines: 5,
      padding: 25,
      parseTime: true,
      postUnits: '',
      preUnits: '',
      ymax: 'auto',
      ymin: 'auto 0',
      goals: [],
      goalStrokeWidth: 1.0,
      goalLineColors: ['#666633', '#999966', '#cc6666', '#663333'],
      events: [],
      eventStrokeWidth: 1.0,
      eventLineColors: ['#005a04', '#ccffbb', '#3a5f0b', '#005502'],
      rangeSelect: null,
      rangeSelectColor: '#eef',
      resize: false
    };

    Grid.prototype.setData = function(data, redraw) {
      var e, idx, index, maxGoal, minGoal, ret, row, step, total, y, ykey, ymax, ymin, yval, _ref;
      if (redraw == null) {
        redraw = true;
      }
      this.options.data = data;
      if ((data == null) || data.length === 0) {
        this.data = [];
        this.raphael.clear();
        if (this.hover != null) {
          this.hover.hide();
        }
        return;
      }
      ymax = this.cumulative ? 0 : null;
      ymin = this.cumulative ? 0 : null;
      if (this.options.goals.length > 0) {
        minGoal = Math.min.apply(Math, this.options.goals);
        maxGoal = Math.max.apply(Math, this.options.goals);
        ymin = ymin != null ? Math.min(ymin, minGoal) : minGoal;
        ymax = ymax != null ? Math.max(ymax, maxGoal) : maxGoal;
      }
      this.data = (function() {
        var _i, _len, _results;
        _results = [];
        for (index = _i = 0, _len = data.length; _i < _len; index = ++_i) {
          row = data[index];
          ret = {
            src: row
          };
          ret.label = row[this.options.xkey];
          if (this.options.parseTime) {
            ret.x = Morris.parseDate(ret.label);
            if (this.options.dateFormat) {
              ret.label = this.options.dateFormat(ret.x);
            } else if (typeof ret.label === 'number') {
              ret.label = new Date(ret.label).toString();
            }
          } else {
            ret.x = index;
            if (this.options.xLabelFormat) {
              ret.label = this.options.xLabelFormat(ret);
            }
          }
          total = 0;
          ret.y = (function() {
            var _j, _len1, _ref, _results1;
            _ref = this.options.ykeys;
            _results1 = [];
            for (idx = _j = 0, _len1 = _ref.length; _j < _len1; idx = ++_j) {
              ykey = _ref[idx];
              yval = row[ykey];
              if (typeof yval === 'string') {
                yval = parseFloat(yval);
              }
              if ((yval != null) && typeof yval !== 'number') {
                yval = null;
              }
              if (yval != null) {
                if (this.cumulative) {
                  total += yval;
                } else {
                  if (ymax != null) {
                    ymax = Math.max(yval, ymax);
                    ymin = Math.min(yval, ymin);
                  } else {
                    ymax = ymin = yval;
                  }
                }
              }
              if (this.cumulative && (total != null)) {
                ymax = Math.max(total, ymax);
                ymin = Math.min(total, ymin);
              }
              _results1.push(yval);
            }
            return _results1;
          }).call(this);
          _results.push(ret);
        }
        return _results;
      }).call(this);
      if (this.options.parseTime) {
        this.data = this.data.sort(function(a, b) {
          return (a.x > b.x) - (b.x > a.x);
        });
      }
      this.xmin = this.data[0].x;
      this.xmax = this.data[this.data.length - 1].x;
      this.events = [];
      if (this.options.events.length > 0) {
        if (this.options.parseTime) {
          this.events = (function() {
            var _i, _len, _ref, _results;
            _ref = this.options.events;
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              e = _ref[_i];
              _results.push(Morris.parseDate(e));
            }
            return _results;
          }).call(this);
        } else {
          this.events = this.options.events;
        }
        this.xmax = Math.max(this.xmax, Math.max.apply(Math, this.events));
        this.xmin = Math.min(this.xmin, Math.min.apply(Math, this.events));
      }
      if (this.xmin === this.xmax) {
        this.xmin -= 1;
        this.xmax += 1;
      }
      this.ymin = this.yboundary('min', ymin);
      this.ymax = this.yboundary('max', ymax);
      if (this.ymin === this.ymax) {
        if (ymin) {
          this.ymin -= 1;
        }
        this.ymax += 1;
      }
      if (((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'y') || this.options.grid === true) {
        if (this.options.ymax === this.gridDefaults.ymax && this.options.ymin === this.gridDefaults.ymin) {
          this.grid = this.autoGridLines(this.ymin, this.ymax, this.options.numLines);
          this.ymin = Math.min(this.ymin, this.grid[0]);
          this.ymax = Math.max(this.ymax, this.grid[this.grid.length - 1]);
        } else {
          step = (this.ymax - this.ymin) / (this.options.numLines - 1);
          this.grid = (function() {
            var _i, _ref1, _ref2, _results;
            _results = [];
            for (y = _i = _ref1 = this.ymin, _ref2 = this.ymax; step > 0 ? _i <= _ref2 : _i >= _ref2; y = _i += step) {
              _results.push(y);
            }
            return _results;
          }).call(this);
        }
      }
      this.dirty = true;
      if (redraw) {
        return this.redraw();
      }
    };

    Grid.prototype.yboundary = function(boundaryType, currentValue) {
      var boundaryOption, suggestedValue;
      boundaryOption = this.options["y" + boundaryType];
      if (typeof boundaryOption === 'string') {
        if (boundaryOption.slice(0, 4) === 'auto') {
          if (boundaryOption.length > 5) {
            suggestedValue = parseInt(boundaryOption.slice(5), 10);
            if (currentValue == null) {
              return suggestedValue;
            }
            return Math[boundaryType](currentValue, suggestedValue);
          } else {
            if (currentValue != null) {
              return currentValue;
            } else {
              return 0;
            }
          }
        } else {
          return parseInt(boundaryOption, 10);
        }
      } else {
        return boundaryOption;
      }
    };

    Grid.prototype.autoGridLines = function(ymin, ymax, nlines) {
      var gmax, gmin, grid, smag, span, step, unit, y, ymag;
      span = ymax - ymin;
      ymag = Math.floor(Math.log(span) / Math.log(10));
      unit = Math.pow(10, ymag);
      gmin = Math.floor(ymin / unit) * unit;
      gmax = Math.ceil(ymax / unit) * unit;
      step = (gmax - gmin) / (nlines - 1);
      if (unit === 1 && step > 1 && Math.ceil(step) !== step) {
        step = Math.ceil(step);
        gmax = gmin + step * (nlines - 1);
      }
      if (gmin < 0 && gmax > 0) {
        gmin = Math.floor(ymin / step) * step;
        gmax = Math.ceil(ymax / step) * step;
      }
      if (step < 1) {
        smag = Math.floor(Math.log(step) / Math.log(10));
        grid = (function() {
          var _i, _results;
          _results = [];
          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {
            _results.push(parseFloat(y.toFixed(1 - smag)));
          }
          return _results;
        })();
      } else {
        grid = (function() {
          var _i, _results;
          _results = [];
          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {
            _results.push(y);
          }
          return _results;
        })();
      }
      return grid;
    };

    Grid.prototype._calc = function() {
      var bottomOffsets, gridLine, h, i, w, yLabelWidths, _ref, _ref1;
      w = this.el.width();
      h = this.el.height();
      if (this.elementWidth !== w || this.elementHeight !== h || this.dirty) {
        this.elementWidth = w;
        this.elementHeight = h;
        this.dirty = false;
        this.left = this.options.padding;
        this.right = this.elementWidth - this.options.padding;
        this.top = this.options.padding;
        this.bottom = this.elementHeight - this.options.padding;
        if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'y') {
          yLabelWidths = (function() {
            var _i, _len, _ref1, _results;
            _ref1 = this.grid;
            _results = [];
            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
              gridLine = _ref1[_i];
              _results.push(this.measureText(this.yAxisFormat(gridLine)).width);
            }
            return _results;
          }).call(this);
          this.left += Math.max.apply(Math, yLabelWidths);
        }
        if ((_ref1 = this.options.axes) === true || _ref1 === 'both' || _ref1 === 'x') {
          bottomOffsets = (function() {
            var _i, _ref2, _results;
            _results = [];
            for (i = _i = 0, _ref2 = this.data.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
              _results.push(this.measureText(this.data[i].text, -this.options.xLabelAngle).height);
            }
            return _results;
          }).call(this);
          this.bottom -= Math.max.apply(Math, bottomOffsets);
        }
        this.width = Math.max(1, this.right - this.left);
        this.height = Math.max(1, this.bottom - this.top);
        this.dx = this.width / (this.xmax - this.xmin);
        this.dy = this.height / (this.ymax - this.ymin);
        if (this.calc) {
          return this.calc();
        }
      }
    };

    Grid.prototype.transY = function(y) {
      return this.bottom - (y - this.ymin) * this.dy;
    };

    Grid.prototype.transX = function(x) {
      if (this.data.length === 1) {
        return (this.left + this.right) / 2;
      } else {
        return this.left + (x - this.xmin) * this.dx;
      }
    };

    Grid.prototype.redraw = function() {
      this.raphael.clear();
      this._calc();
      this.drawGrid();
      this.drawGoals();
      this.drawEvents();
      if (this.draw) {
        return this.draw();
      }
    };

    Grid.prototype.measureText = function(text, angle) {
      var ret, tt;
      if (angle == null) {
        angle = 0;
      }
      tt = this.raphael.text(100, 100, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).rotate(angle);
      ret = tt.getBBox();
      tt.remove();
      return ret;
    };

    Grid.prototype.yAxisFormat = function(label) {
      return this.yLabelFormat(label);
    };

    Grid.prototype.yLabelFormat = function(label) {
      if (typeof this.options.yLabelFormat === 'function') {
        return this.options.yLabelFormat(label);
      } else {
        return "" + this.options.preUnits + (Morris.commas(label)) + this.options.postUnits;
      }
    };

    Grid.prototype.drawGrid = function() {
      var lineY, y, _i, _len, _ref, _ref1, _ref2, _results;
      if (this.options.grid === false && ((_ref = this.options.axes) !== true && _ref !== 'both' && _ref !== 'y')) {
        return;
      }
      _ref1 = this.grid;
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        lineY = _ref1[_i];
        y = this.transY(lineY);
        if ((_ref2 = this.options.axes) === true || _ref2 === 'both' || _ref2 === 'y') {
          this.drawYAxisLabel(this.left - this.options.padding / 2, y, this.yAxisFormat(lineY));
        }
        if (this.options.grid) {
          _results.push(this.drawGridLine("M" + this.left + "," + y + "H" + (this.left + this.width)));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    Grid.prototype.drawGoals = function() {
      var color, goal, i, _i, _len, _ref, _results;
      _ref = this.options.goals;
      _results = [];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        goal = _ref[i];
        color = this.options.goalLineColors[i % this.options.goalLineColors.length];
        _results.push(this.drawGoal(goal, color));
      }
      return _results;
    };

    Grid.prototype.drawEvents = function() {
      var color, event, i, _i, _len, _ref, _results;
      _ref = this.events;
      _results = [];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        event = _ref[i];
        color = this.options.eventLineColors[i % this.options.eventLineColors.length];
        _results.push(this.drawEvent(event, color));
      }
      return _results;
    };

    Grid.prototype.drawGoal = function(goal, color) {
      return this.raphael.path("M" + this.left + "," + (this.transY(goal)) + "H" + this.right).attr('stroke', color).attr('stroke-width', this.options.goalStrokeWidth);
    };

    Grid.prototype.drawEvent = function(event, color) {
      return this.raphael.path("M" + (this.transX(event)) + "," + this.bottom + "V" + this.top).attr('stroke', color).attr('stroke-width', this.options.eventStrokeWidth);
    };

    Grid.prototype.drawYAxisLabel = function(xPos, yPos, text) {
      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor).attr('text-anchor', 'end');
    };

    Grid.prototype.drawGridLine = function(path) {
      return this.raphael.path(path).attr('stroke', this.options.gridLineColor).attr('stroke-width', this.options.gridStrokeWidth);
    };

    Grid.prototype.startRange = function(x) {
      this.hover.hide();
      this.selectFrom = x;
      return this.selectionRect.attr({
        x: x,
        width: 0
      }).show();
    };

    Grid.prototype.endRange = function(x) {
      var end, start;
      if (this.selectFrom) {
        start = Math.min(this.selectFrom, x);
        end = Math.max(this.selectFrom, x);
        this.options.rangeSelect.call(this.el, {
          start: this.data[this.hitTest(start)].x,
          end: this.data[this.hitTest(end)].x
        });
        return this.selectFrom = null;
      }
    };

    Grid.prototype.resizeHandler = function() {
      this.timeoutId = null;
      this.raphael.setSize(this.el.width(), this.el.height());
      return this.redraw();
    };

    return Grid;

  })(Morris.EventEmitter);

  Morris.parseDate = function(date) {
    var isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;
    if (typeof date === 'number') {
      return date;
    }
    m = date.match(/^(\d+) Q(\d)$/);
    n = date.match(/^(\d+)-(\d+)$/);
    o = date.match(/^(\d+)-(\d+)-(\d+)$/);
    p = date.match(/^(\d+) W(\d+)$/);
    q = date.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);
    r = date.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);
    if (m) {
      return new Date(parseInt(m[1], 10), parseInt(m[2], 10) * 3 - 1, 1).getTime();
    } else if (n) {
      return new Date(parseInt(n[1], 10), parseInt(n[2], 10) - 1, 1).getTime();
    } else if (o) {
      return new Date(parseInt(o[1], 10), parseInt(o[2], 10) - 1, parseInt(o[3], 10)).getTime();
    } else if (p) {
      ret = new Date(parseInt(p[1], 10), 0, 1);
      if (ret.getDay() !== 4) {
        ret.setMonth(0, 1 + ((4 - ret.getDay()) + 7) % 7);
      }
      return ret.getTime() + parseInt(p[2], 10) * 604800000;
    } else if (q) {
      if (!q[6]) {
        return new Date(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10)).getTime();
      } else {
        offsetmins = 0;
        if (q[6] !== 'Z') {
          offsetmins = parseInt(q[8], 10) * 60 + parseInt(q[9], 10);
          if (q[7] === '+') {
            offsetmins = 0 - offsetmins;
          }
        }
        return Date.UTC(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10) + offsetmins);
      }
    } else if (r) {
      secs = parseFloat(r[6]);
      isecs = Math.floor(secs);
      msecs = Math.round((secs - isecs) * 1000);
      if (!r[8]) {
        return new Date(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10), isecs, msecs).getTime();
      } else {
        offsetmins = 0;
        if (r[8] !== 'Z') {
          offsetmins = parseInt(r[10], 10) * 60 + parseInt(r[11], 10);
          if (r[9] === '+') {
            offsetmins = 0 - offsetmins;
          }
        }
        return Date.UTC(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10) + offsetmins, isecs, msecs);
      }
    } else {
      return new Date(parseInt(date, 10), 0, 1).getTime();
    }
  };

  Morris.Hover = (function() {
    Hover.defaults = {
      "class": 'morris-hover morris-default-style'
    };

    function Hover(options) {
      if (options == null) {
        options = {};
      }
      this.options = $.extend({}, Morris.Hover.defaults, options);
      this.el = $("<div class='" + this.options["class"] + "'></div>");
      this.el.hide();
      this.options.parent.append(this.el);
    }

    Hover.prototype.update = function(html, x, y) {
      if (!html) {
        return this.hide();
      } else {
        this.html(html);
        this.show();
        return this.moveTo(x, y);
      }
    };

    Hover.prototype.html = function(content) {
      return this.el.html(content);
    };

    Hover.prototype.moveTo = function(x, y) {
      var hoverHeight, hoverWidth, left, parentHeight, parentWidth, top;
      parentWidth = this.options.parent.innerWidth();
      parentHeight = this.options.parent.innerHeight();
      hoverWidth = this.el.outerWidth();
      hoverHeight = this.el.outerHeight();
      left = Math.min(Math.max(0, x - hoverWidth / 2), parentWidth - hoverWidth);
      if (y != null) {
        top = y - hoverHeight - 10;
        if (top < 0) {
          top = y + 10;
          if (top + hoverHeight > parentHeight) {
            top = parentHeight / 2 - hoverHeight / 2;
          }
        }
      } else {
        top = parentHeight / 2 - hoverHeight / 2;
      }
      return this.el.css({
        left: left + "px",
        top: parseInt(top) + "px"
      });
    };

    Hover.prototype.show = function() {
      return this.el.show();
    };

    Hover.prototype.hide = function() {
      return this.el.hide();
    };

    return Hover;

  })();

  Morris.Line = (function(_super) {
    __extends(Line, _super);

    function Line(options) {
      this.hilight = __bind(this.hilight, this);
      this.onHoverOut = __bind(this.onHoverOut, this);
      this.onHoverMove = __bind(this.onHoverMove, this);
      this.onGridClick = __bind(this.onGridClick, this);
      if (!(this instanceof Morris.Line)) {
        return new Morris.Line(options);
      }
      Line.__super__.constructor.call(this, options);
    }

    Line.prototype.init = function() {
      if (this.options.hideHover !== 'always') {
        this.hover = new Morris.Hover({
          parent: this.el
        });
        this.on('hovermove', this.onHoverMove);
        this.on('hoverout', this.onHoverOut);
        return this.on('gridclick', this.onGridClick);
      }
    };

    Line.prototype.defaults = {
      lineWidth: 3,
      pointSize: 4,
      lineColors: ['#0b62a4', '#7A92A3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],
      pointStrokeWidths: [1],
      pointStrokeColors: ['#ffffff'],
      pointFillColors: [],
      smooth: true,
      xLabels: 'auto',
      xLabelFormat: null,
      xLabelMargin: 24,
      hideHover: false
    };

    Line.prototype.calc = function() {
      this.calcPoints();
      return this.generatePaths();
    };

    Line.prototype.calcPoints = function() {
      var row, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        row._x = this.transX(row.x);
        row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(this.transY(y));
            } else {
              _results1.push(y);
            }
          }
          return _results1;
        }).call(this);
        _results.push(row._ymax = Math.min.apply(Math, [this.bottom].concat((function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row._y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(y);
            }
          }
          return _results1;
        })())));
      }
      return _results;
    };

    Line.prototype.hitTest = function(x) {
      var index, r, _i, _len, _ref;
      if (this.data.length === 0) {
        return null;
      }
      _ref = this.data.slice(1);
      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
        r = _ref[index];
        if (x < (r._x + this.data[index]._x) / 2) {
          break;
        }
      }
      return index;
    };

    Line.prototype.onGridClick = function(x, y) {
      var index;
      index = this.hitTest(x);
      return this.fire('click', index, this.data[index].src, x, y);
    };

    Line.prototype.onHoverMove = function(x, y) {
      var index;
      index = this.hitTest(x);
      return this.displayHoverForRow(index);
    };

    Line.prototype.onHoverOut = function() {
      if (this.options.hideHover !== false) {
        return this.displayHoverForRow(null);
      }
    };

    Line.prototype.displayHoverForRow = function(index) {
      var _ref;
      if (index != null) {
        (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));
        return this.hilight(index);
      } else {
        this.hover.hide();
        return this.hilight();
      }
    };

    Line.prototype.hoverContentForRow = function(index) {
      var content, j, row, y, _i, _len, _ref;
      row = this.data[index];
      content = "<div class='morris-hover-row-label'>" + row.label + "</div>";
      _ref = row.y;
      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {
        y = _ref[j];
        content += "<div class='morris-hover-point' style='color: " + (this.colorFor(row, j, 'label')) + "'>\n  " + this.options.labels[j] + ":\n  " + (this.yLabelFormat(y)) + "\n</div>";
      }
      if (typeof this.options.hoverCallback === 'function') {
        content = this.options.hoverCallback(index, this.options, content, row.src);
      }
      return [content, row._x, row._ymax];
    };

    Line.prototype.generatePaths = function() {
      var coords, i, r, smooth;
      return this.paths = (function() {
        var _i, _ref, _ref1, _results;
        _results = [];
        for (i = _i = 0, _ref = this.options.ykeys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          smooth = typeof this.options.smooth === "boolean" ? this.options.smooth : (_ref1 = this.options.ykeys[i], __indexOf.call(this.options.smooth, _ref1) >= 0);
          coords = (function() {
            var _j, _len, _ref2, _results1;
            _ref2 = this.data;
            _results1 = [];
            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {
              r = _ref2[_j];
              if (r._y[i] !== void 0) {
                _results1.push({
                  x: r._x,
                  y: r._y[i]
                });
              }
            }
            return _results1;
          }).call(this);
          if (coords.length > 1) {
            _results.push(Morris.Line.createPath(coords, smooth, this.bottom));
          } else {
            _results.push(null);
          }
        }
        return _results;
      }).call(this);
    };

    Line.prototype.draw = function() {
      var _ref;
      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {
        this.drawXAxis();
      }
      this.drawSeries();
      if (this.options.hideHover === false) {
        return this.displayHoverForRow(this.data.length - 1);
      }
    };

    Line.prototype.drawXAxis = function() {
      var drawLabel, l, labels, prevAngleMargin, prevLabelMargin, row, ypos, _i, _len, _results,
        _this = this;
      ypos = this.bottom + this.options.padding / 2;
      prevLabelMargin = null;
      prevAngleMargin = null;
      drawLabel = function(labelText, xpos) {
        var label, labelBox, margin, offset, textBox;
        label = _this.drawXAxisLabel(_this.transX(xpos), ypos, labelText);
        textBox = label.getBBox();
        label.transform("r" + (-_this.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform("t0," + (labelBox.height / 2) + "...");
        if (_this.options.xLabelAngle !== 0) {
          offset = -0.5 * textBox.width * Math.cos(_this.options.xLabelAngle * Math.PI / 180.0);
          label.transform("t" + offset + ",0...");
        }
        labelBox = label.getBBox();
        if (((prevLabelMargin == null) || prevLabelMargin >= labelBox.x + labelBox.width || (prevAngleMargin != null) && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && (labelBox.x + labelBox.width) < _this.el.width()) {
          if (_this.options.xLabelAngle !== 0) {
            margin = 1.25 * _this.options.gridTextSize / Math.sin(_this.options.xLabelAngle * Math.PI / 180.0);
            prevAngleMargin = labelBox.x - margin;
          }
          return prevLabelMargin = labelBox.x - _this.options.xLabelMargin;
        } else {
          return label.remove();
        }
      };
      if (this.options.parseTime) {
        if (this.data.length === 1 && this.options.xLabels === 'auto') {
          labels = [[this.data[0].label, this.data[0].x]];
        } else {
          labels = Morris.labelSeries(this.xmin, this.xmax, this.width, this.options.xLabels, this.options.xLabelFormat);
        }
      } else {
        labels = (function() {
          var _i, _len, _ref, _results;
          _ref = this.data;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            row = _ref[_i];
            _results.push([row.label, row.x]);
          }
          return _results;
        }).call(this);
      }
      labels.reverse();
      _results = [];
      for (_i = 0, _len = labels.length; _i < _len; _i++) {
        l = labels[_i];
        _results.push(drawLabel(l[0], l[1]));
      }
      return _results;
    };

    Line.prototype.drawSeries = function() {
      var i, _i, _j, _ref, _ref1, _results;
      this.seriesPoints = [];
      for (i = _i = _ref = this.options.ykeys.length - 1; _ref <= 0 ? _i <= 0 : _i >= 0; i = _ref <= 0 ? ++_i : --_i) {
        this._drawLineFor(i);
      }
      _results = [];
      for (i = _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; i = _ref1 <= 0 ? ++_j : --_j) {
        _results.push(this._drawPointFor(i));
      }
      return _results;
    };

    Line.prototype._drawPointFor = function(index) {
      var circle, row, _i, _len, _ref, _results;
      this.seriesPoints[index] = [];
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        circle = null;
        if (row._y[index] != null) {
          circle = this.drawLinePoint(row._x, row._y[index], this.colorFor(row, index, 'point'), index);
        }
        _results.push(this.seriesPoints[index].push(circle));
      }
      return _results;
    };

    Line.prototype._drawLineFor = function(index) {
      var path;
      path = this.paths[index];
      if (path !== null) {
        return this.drawLinePath(path, this.colorFor(null, index, 'line'), index);
      }
    };

    Line.createPath = function(coords, smooth, bottom) {
      var coord, g, grads, i, ix, lg, path, prevCoord, x1, x2, y1, y2, _i, _len;
      path = "";
      if (smooth) {
        grads = Morris.Line.gradients(coords);
      }
      prevCoord = {
        y: null
      };
      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {
        coord = coords[i];
        if (coord.y != null) {
          if (prevCoord.y != null) {
            if (smooth) {
              g = grads[i];
              lg = grads[i - 1];
              ix = (coord.x - prevCoord.x) / 4;
              x1 = prevCoord.x + ix;
              y1 = Math.min(bottom, prevCoord.y + ix * lg);
              x2 = coord.x - ix;
              y2 = Math.min(bottom, coord.y - ix * g);
              path += "C" + x1 + "," + y1 + "," + x2 + "," + y2 + "," + coord.x + "," + coord.y;
            } else {
              path += "L" + coord.x + "," + coord.y;
            }
          } else {
            if (!smooth || (grads[i] != null)) {
              path += "M" + coord.x + "," + coord.y;
            }
          }
        }
        prevCoord = coord;
      }
      return path;
    };

    Line.gradients = function(coords) {
      var coord, grad, i, nextCoord, prevCoord, _i, _len, _results;
      grad = function(a, b) {
        return (a.y - b.y) / (a.x - b.x);
      };
      _results = [];
      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {
        coord = coords[i];
        if (coord.y != null) {
          nextCoord = coords[i + 1] || {
            y: null
          };
          prevCoord = coords[i - 1] || {
            y: null
          };
          if ((prevCoord.y != null) && (nextCoord.y != null)) {
            _results.push(grad(prevCoord, nextCoord));
          } else if (prevCoord.y != null) {
            _results.push(grad(prevCoord, coord));
          } else if (nextCoord.y != null) {
            _results.push(grad(coord, nextCoord));
          } else {
            _results.push(null);
          }
        } else {
          _results.push(null);
        }
      }
      return _results;
    };

    Line.prototype.hilight = function(index) {
      var i, _i, _j, _ref, _ref1;
      if (this.prevHilight !== null && this.prevHilight !== index) {
        for (i = _i = 0, _ref = this.seriesPoints.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
          if (this.seriesPoints[i][this.prevHilight]) {
            this.seriesPoints[i][this.prevHilight].animate(this.pointShrinkSeries(i));
          }
        }
      }
      if (index !== null && this.prevHilight !== index) {
        for (i = _j = 0, _ref1 = this.seriesPoints.length - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
          if (this.seriesPoints[i][index]) {
            this.seriesPoints[i][index].animate(this.pointGrowSeries(i));
          }
        }
      }
      return this.prevHilight = index;
    };

    Line.prototype.colorFor = function(row, sidx, type) {
      if (typeof this.options.lineColors === 'function') {
        return this.options.lineColors.call(this, row, sidx, type);
      } else if (type === 'point') {
        return this.options.pointFillColors[sidx % this.options.pointFillColors.length] || this.options.lineColors[sidx % this.options.lineColors.length];
      } else {
        return this.options.lineColors[sidx % this.options.lineColors.length];
      }
    };

    Line.prototype.drawXAxisLabel = function(xPos, yPos, text) {
      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);
    };

    Line.prototype.drawLinePath = function(path, lineColor, lineIndex) {
      return this.raphael.path(path).attr('stroke', lineColor).attr('stroke-width', this.lineWidthForSeries(lineIndex));
    };

    Line.prototype.drawLinePoint = function(xPos, yPos, pointColor, lineIndex) {
      return this.raphael.circle(xPos, yPos, this.pointSizeForSeries(lineIndex)).attr('fill', pointColor).attr('stroke-width', this.pointStrokeWidthForSeries(lineIndex)).attr('stroke', this.pointStrokeColorForSeries(lineIndex));
    };

    Line.prototype.pointStrokeWidthForSeries = function(index) {
      return this.options.pointStrokeWidths[index % this.options.pointStrokeWidths.length];
    };

    Line.prototype.pointStrokeColorForSeries = function(index) {
      return this.options.pointStrokeColors[index % this.options.pointStrokeColors.length];
    };

    Line.prototype.lineWidthForSeries = function(index) {
      if (this.options.lineWidth instanceof Array) {
        return this.options.lineWidth[index % this.options.lineWidth.length];
      } else {
        return this.options.lineWidth;
      }
    };

    Line.prototype.pointSizeForSeries = function(index) {
      if (this.options.pointSize instanceof Array) {
        return this.options.pointSize[index % this.options.pointSize.length];
      } else {
        return this.options.pointSize;
      }
    };

    Line.prototype.pointGrowSeries = function(index) {
      return Raphael.animation({
        r: this.pointSizeForSeries(index) + 3
      }, 25, 'linear');
    };

    Line.prototype.pointShrinkSeries = function(index) {
      return Raphael.animation({
        r: this.pointSizeForSeries(index)
      }, 25, 'linear');
    };

    return Line;

  })(Morris.Grid);

  Morris.labelSeries = function(dmin, dmax, pxwidth, specName, xLabelFormat) {
    var d, d0, ddensity, name, ret, s, spec, t, _i, _len, _ref;
    ddensity = 200 * (dmax - dmin) / pxwidth;
    d0 = new Date(dmin);
    spec = Morris.LABEL_SPECS[specName];
    if (spec === void 0) {
      _ref = Morris.AUTO_LABEL_ORDER;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        s = Morris.LABEL_SPECS[name];
        if (ddensity >= s.span) {
          spec = s;
          break;
        }
      }
    }
    if (spec === void 0) {
      spec = Morris.LABEL_SPECS["second"];
    }
    if (xLabelFormat) {
      spec = $.extend({}, spec, {
        fmt: xLabelFormat
      });
    }
    d = spec.start(d0);
    ret = [];
    while ((t = d.getTime()) <= dmax) {
      if (t >= dmin) {
        ret.push([spec.fmt(d), t]);
      }
      spec.incr(d);
    }
    return ret;
  };

  minutesSpecHelper = function(interval) {
    return {
      span: interval * 60 * 1000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());
      },
      fmt: function(d) {
        return "" + (Morris.pad2(d.getHours())) + ":" + (Morris.pad2(d.getMinutes()));
      },
      incr: function(d) {
        return d.setUTCMinutes(d.getUTCMinutes() + interval);
      }
    };
  };

  secondsSpecHelper = function(interval) {
    return {
      span: interval * 1000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());
      },
      fmt: function(d) {
        return "" + (Morris.pad2(d.getHours())) + ":" + (Morris.pad2(d.getMinutes())) + ":" + (Morris.pad2(d.getSeconds()));
      },
      incr: function(d) {
        return d.setUTCSeconds(d.getUTCSeconds() + interval);
      }
    };
  };

  Morris.LABEL_SPECS = {
    "decade": {
      span: 172800000000,
      start: function(d) {
        return new Date(d.getFullYear() - d.getFullYear() % 10, 0, 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear());
      },
      incr: function(d) {
        return d.setFullYear(d.getFullYear() + 10);
      }
    },
    "year": {
      span: 17280000000,
      start: function(d) {
        return new Date(d.getFullYear(), 0, 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear());
      },
      incr: function(d) {
        return d.setFullYear(d.getFullYear() + 1);
      }
    },
    "month": {
      span: 2419200000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear()) + "-" + (Morris.pad2(d.getMonth() + 1));
      },
      incr: function(d) {
        return d.setMonth(d.getMonth() + 1);
      }
    },
    "week": {
      span: 604800000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate());
      },
      fmt: function(d) {
        return "" + (d.getFullYear()) + "-" + (Morris.pad2(d.getMonth() + 1)) + "-" + (Morris.pad2(d.getDate()));
      },
      incr: function(d) {
        return d.setDate(d.getDate() + 7);
      }
    },
    "day": {
      span: 86400000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate());
      },
      fmt: function(d) {
        return "" + (d.getFullYear()) + "-" + (Morris.pad2(d.getMonth() + 1)) + "-" + (Morris.pad2(d.getDate()));
      },
      incr: function(d) {
        return d.setDate(d.getDate() + 1);
      }
    },
    "hour": minutesSpecHelper(60),
    "30min": minutesSpecHelper(30),
    "15min": minutesSpecHelper(15),
    "10min": minutesSpecHelper(10),
    "5min": minutesSpecHelper(5),
    "minute": minutesSpecHelper(1),
    "30sec": secondsSpecHelper(30),
    "15sec": secondsSpecHelper(15),
    "10sec": secondsSpecHelper(10),
    "5sec": secondsSpecHelper(5),
    "second": secondsSpecHelper(1)
  };

  Morris.AUTO_LABEL_ORDER = ["decade", "year", "month", "week", "day", "hour", "30min", "15min", "10min", "5min", "minute", "30sec", "15sec", "10sec", "5sec", "second"];

  Morris.Area = (function(_super) {
    var areaDefaults;

    __extends(Area, _super);

    areaDefaults = {
      fillOpacity: 'auto',
      behaveLikeLine: false
    };

    function Area(options) {
      var areaOptions;
      if (!(this instanceof Morris.Area)) {
        return new Morris.Area(options);
      }
      areaOptions = $.extend({}, areaDefaults, options);
      this.cumulative = !areaOptions.behaveLikeLine;
      if (areaOptions.fillOpacity === 'auto') {
        areaOptions.fillOpacity = areaOptions.behaveLikeLine ? .8 : 1;
      }
      Area.__super__.constructor.call(this, areaOptions);
    }

    Area.prototype.calcPoints = function() {
      var row, total, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        row._x = this.transX(row.x);
        total = 0;
        row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (this.options.behaveLikeLine) {
              _results1.push(this.transY(y));
            } else {
              total += y || 0;
              _results1.push(this.transY(total));
            }
          }
          return _results1;
        }).call(this);
        _results.push(row._ymax = Math.max.apply(Math, row._y));
      }
      return _results;
    };

    Area.prototype.drawSeries = function() {
      var i, range, _i, _j, _k, _len, _ref, _ref1, _results, _results1, _results2;
      this.seriesPoints = [];
      if (this.options.behaveLikeLine) {
        range = (function() {
          _results = [];
          for (var _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }
          return _results;
        }).apply(this);
      } else {
        range = (function() {
          _results1 = [];
          for (var _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; _ref1 <= 0 ? _j++ : _j--){ _results1.push(_j); }
          return _results1;
        }).apply(this);
      }
      _results2 = [];
      for (_k = 0, _len = range.length; _k < _len; _k++) {
        i = range[_k];
        this._drawFillFor(i);
        this._drawLineFor(i);
        _results2.push(this._drawPointFor(i));
      }
      return _results2;
    };

    Area.prototype._drawFillFor = function(index) {
      var path;
      path = this.paths[index];
      if (path !== null) {
        path = path + ("L" + (this.transX(this.xmax)) + "," + this.bottom + "L" + (this.transX(this.xmin)) + "," + this.bottom + "Z");
        return this.drawFilledPath(path, this.fillForSeries(index));
      }
    };

    Area.prototype.fillForSeries = function(i) {
      var color;
      color = Raphael.rgb2hsl(this.colorFor(this.data[i], i, 'line'));
      return Raphael.hsl(color.h, this.options.behaveLikeLine ? color.s * 0.9 : color.s * 0.75, Math.min(0.98, this.options.behaveLikeLine ? color.l * 1.2 : color.l * 1.25));
    };

    Area.prototype.drawFilledPath = function(path, fill) {
      return this.raphael.path(path).attr('fill', fill).attr('fill-opacity', this.options.fillOpacity).attr('stroke', 'none');
    };

    return Area;

  })(Morris.Line);

  Morris.Bar = (function(_super) {
    __extends(Bar, _super);

    function Bar(options) {
      this.onHoverOut = __bind(this.onHoverOut, this);
      this.onHoverMove = __bind(this.onHoverMove, this);
      this.onGridClick = __bind(this.onGridClick, this);
      if (!(this instanceof Morris.Bar)) {
        return new Morris.Bar(options);
      }
      Bar.__super__.constructor.call(this, $.extend({}, options, {
        parseTime: false
      }));
    }

    Bar.prototype.init = function() {
      this.cumulative = this.options.stacked;
      if (this.options.hideHover !== 'always') {
        this.hover = new Morris.Hover({
          parent: this.el
        });
        this.on('hovermove', this.onHoverMove);
        this.on('hoverout', this.onHoverOut);
        return this.on('gridclick', this.onGridClick);
      }
    };

    Bar.prototype.defaults = {
      barSizeRatio: 0.75,
      barGap: 3,
      barColors: ['#0b62a4', '#7a92a3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],
      barOpacity: 1.0,
      barRadius: [0, 0, 0, 0],
      xLabelMargin: 50
    };

    Bar.prototype.calc = function() {
      var _ref;
      this.calcBars();
      if (this.options.hideHover === false) {
        return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(this.data.length - 1));
      }
    };

    Bar.prototype.calcBars = function() {
      var idx, row, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {
        row = _ref[idx];
        row._x = this.left + this.width * (idx + 0.5) / this.data.length;
        _results.push(row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(this.transY(y));
            } else {
              _results1.push(null);
            }
          }
          return _results1;
        }).call(this));
      }
      return _results;
    };

    Bar.prototype.draw = function() {
      var _ref;
      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {
        this.drawXAxis();
      }
      return this.drawSeries();
    };

    Bar.prototype.drawXAxis = function() {
      var i, label, labelBox, margin, offset, prevAngleMargin, prevLabelMargin, row, textBox, ypos, _i, _ref, _results;
      ypos = this.bottom + (this.options.xAxisLabelTopPadding || this.options.padding / 2);
      prevLabelMargin = null;
      prevAngleMargin = null;
      _results = [];
      for (i = _i = 0, _ref = this.data.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        row = this.data[this.data.length - 1 - i];
        label = this.drawXAxisLabel(row._x, ypos, row.label);
        textBox = label.getBBox();
        label.transform("r" + (-this.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform("t0," + (labelBox.height / 2) + "...");
        if (this.options.xLabelAngle !== 0) {
          offset = -0.5 * textBox.width * Math.cos(this.options.xLabelAngle * Math.PI / 180.0);
          label.transform("t" + offset + ",0...");
        }
        if (((prevLabelMargin == null) || prevLabelMargin >= labelBox.x + labelBox.width || (prevAngleMargin != null) && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && (labelBox.x + labelBox.width) < this.el.width()) {
          if (this.options.xLabelAngle !== 0) {
            margin = 1.25 * this.options.gridTextSize / Math.sin(this.options.xLabelAngle * Math.PI / 180.0);
            prevAngleMargin = labelBox.x - margin;
          }
          _results.push(prevLabelMargin = labelBox.x - this.options.xLabelMargin);
        } else {
          _results.push(label.remove());
        }
      }
      return _results;
    };

    Bar.prototype.drawSeries = function() {
      var barWidth, bottom, groupWidth, idx, lastTop, left, leftPadding, numBars, row, sidx, size, spaceLeft, top, ypos, zeroPos;
      groupWidth = this.width / this.options.data.length;
      numBars = this.options.stacked ? 1 : this.options.ykeys.length;
      barWidth = (groupWidth * this.options.barSizeRatio - this.options.barGap * (numBars - 1)) / numBars;
      if (this.options.barSize) {
        barWidth = Math.min(barWidth, this.options.barSize);
      }
      spaceLeft = groupWidth - barWidth * numBars - this.options.barGap * (numBars - 1);
      leftPadding = spaceLeft / 2;
      zeroPos = this.ymin <= 0 && this.ymax >= 0 ? this.transY(0) : null;
      return this.bars = (function() {
        var _i, _len, _ref, _results;
        _ref = this.data;
        _results = [];
        for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {
          row = _ref[idx];
          lastTop = 0;
          _results.push((function() {
            var _j, _len1, _ref1, _results1;
            _ref1 = row._y;
            _results1 = [];
            for (sidx = _j = 0, _len1 = _ref1.length; _j < _len1; sidx = ++_j) {
              ypos = _ref1[sidx];
              if (ypos !== null) {
                if (zeroPos) {
                  top = Math.min(ypos, zeroPos);
                  bottom = Math.max(ypos, zeroPos);
                } else {
                  top = ypos;
                  bottom = this.bottom;
                }
                left = this.left + idx * groupWidth + leftPadding;
                if (!this.options.stacked) {
                  left += sidx * (barWidth + this.options.barGap);
                }
                size = bottom - top;
                if (this.options.verticalGridCondition && this.options.verticalGridCondition(row.x)) {
                  this.drawBar(this.left + idx * groupWidth, this.top, groupWidth, Math.abs(this.top - this.bottom), this.options.verticalGridColor, this.options.verticalGridOpacity, this.options.barRadius);
                }
                if (this.options.stacked) {
                  top -= lastTop;
                }
                this.drawBar(left, top, barWidth, size, this.colorFor(row, sidx, 'bar'), this.options.barOpacity, this.options.barRadius);
                _results1.push(lastTop += size);
              } else {
                _results1.push(null);
              }
            }
            return _results1;
          }).call(this));
        }
        return _results;
      }).call(this);
    };

    Bar.prototype.colorFor = function(row, sidx, type) {
      var r, s;
      if (typeof this.options.barColors === 'function') {
        r = {
          x: row.x,
          y: row.y[sidx],
          label: row.label
        };
        s = {
          index: sidx,
          key: this.options.ykeys[sidx],
          label: this.options.labels[sidx]
        };
        return this.options.barColors.call(this, r, s, type);
      } else {
        return this.options.barColors[sidx % this.options.barColors.length];
      }
    };

    Bar.prototype.hitTest = function(x) {
      if (this.data.length === 0) {
        return null;
      }
      x = Math.max(Math.min(x, this.right), this.left);
      return Math.min(this.data.length - 1, Math.floor((x - this.left) / (this.width / this.data.length)));
    };

    Bar.prototype.onGridClick = function(x, y) {
      var index;
      index = this.hitTest(x);
      return this.fire('click', index, this.data[index].src, x, y);
    };

    Bar.prototype.onHoverMove = function(x, y) {
      var index, _ref;
      index = this.hitTest(x);
      return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));
    };

    Bar.prototype.onHoverOut = function() {
      if (this.options.hideHover !== false) {
        return this.hover.hide();
      }
    };

    Bar.prototype.hoverContentForRow = function(index) {
      var content, j, row, x, y, _i, _len, _ref;
      row = this.data[index];
      content = "<div class='morris-hover-row-label'>" + row.label + "</div>";
      _ref = row.y;
      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {
        y = _ref[j];
        content += "<div class='morris-hover-point' style='color: " + (this.colorFor(row, j, 'label')) + "'>\n  " + this.options.labels[j] + ":\n  " + (this.yLabelFormat(y)) + "\n</div>";
      }
      if (typeof this.options.hoverCallback === 'function') {
        content = this.options.hoverCallback(index, this.options, content, row.src);
      }
      x = this.left + (index + 0.5) * this.width / this.data.length;
      return [content, x];
    };

    Bar.prototype.drawXAxisLabel = function(xPos, yPos, text) {
      var label;
      return label = this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);
    };

    Bar.prototype.drawBar = function(xPos, yPos, width, height, barColor, opacity, radiusArray) {
      var maxRadius, path;
      maxRadius = Math.max.apply(Math, radiusArray);
      if (maxRadius === 0 || maxRadius > height) {
        path = this.raphael.rect(xPos, yPos, width, height);
      } else {
        path = this.raphael.path(this.roundedRect(xPos, yPos, width, height, radiusArray));
      }
      return path.attr('fill', barColor).attr('fill-opacity', opacity).attr('stroke', 'none');
    };

    Bar.prototype.roundedRect = function(x, y, w, h, r) {
      if (r == null) {
        r = [0, 0, 0, 0];
      }
      return ["M", x, r[0] + y, "Q", x, y, x + r[0], y, "L", x + w - r[1], y, "Q", x + w, y, x + w, y + r[1], "L", x + w, y + h - r[2], "Q", x + w, y + h, x + w - r[2], y + h, "L", x + r[3], y + h, "Q", x, y + h, x, y + h - r[3], "Z"];
    };

    return Bar;

  })(Morris.Grid);

  Morris.Donut = (function(_super) {
    __extends(Donut, _super);

    Donut.prototype.defaults = {
      colors: ['#0B62A4', '#3980B5', '#679DC6', '#95BBD7', '#B0CCE1', '#095791', '#095085', '#083E67', '#052C48', '#042135'],
      backgroundColor: '#FFFFFF',
      labelColor: '#000000',
      formatter: Morris.commas,
      resize: false
    };

    function Donut(options) {
      this.resizeHandler = __bind(this.resizeHandler, this);
      this.select = __bind(this.select, this);
      this.click = __bind(this.click, this);
      var _this = this;
      if (!(this instanceof Morris.Donut)) {
        return new Morris.Donut(options);
      }
      this.options = $.extend({}, this.defaults, options);
      if (typeof options.element === 'string') {
        this.el = $(document.getElementById(options.element));
      } else {
        this.el = $(options.element);
      }
      if (this.el === null || this.el.length === 0) {
        throw new Error("Graph placeholder not found.");
      }
      if (options.data === void 0 || options.data.length === 0) {
        return;
      }
      this.raphael = new Raphael(this.el[0]);
      if (this.options.resize) {
        $(window).bind('resize', function(evt) {
          if (_this.timeoutId != null) {
            window.clearTimeout(_this.timeoutId);
          }
          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);
        });
      }
      this.setData(options.data);
    }

    Donut.prototype.redraw = function() {
      var C, cx, cy, i, idx, last, max_value, min, next, seg, total, value, w, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;
      this.raphael.clear();
      cx = this.el.width() / 2;
      cy = this.el.height() / 2;
      w = (Math.min(cx, cy) - 10) / 3;
      total = 0;
      _ref = this.values;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        value = _ref[_i];
        total += value;
      }
      min = 5 / (2 * w);
      C = 1.9999 * Math.PI - min * this.data.length;
      last = 0;
      idx = 0;
      this.segments = [];
      _ref1 = this.values;
      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
        value = _ref1[i];
        next = last + min + C * (value / total);
        seg = new Morris.DonutSegment(cx, cy, w * 2, w, last, next, this.data[i].color || this.options.colors[idx % this.options.colors.length], this.options.backgroundColor, idx, this.raphael);
        seg.render();
        this.segments.push(seg);
        seg.on('hover', this.select);
        seg.on('click', this.click);
        last = next;
        idx += 1;
      }
      this.text1 = this.drawEmptyDonutLabel(cx, cy - 10, this.options.labelColor, 15, 800);
      this.text2 = this.drawEmptyDonutLabel(cx, cy + 10, this.options.labelColor, 14);
      max_value = Math.max.apply(Math, this.values);
      idx = 0;
      _ref2 = this.values;
      _results = [];
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        value = _ref2[_k];
        if (value === max_value) {
          this.select(idx);
          break;
        }
        _results.push(idx += 1);
      }
      return _results;
    };

    Donut.prototype.setData = function(data) {
      var row;
      this.data = data;
      this.values = (function() {
        var _i, _len, _ref, _results;
        _ref = this.data;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          row = _ref[_i];
          _results.push(parseFloat(row.value));
        }
        return _results;
      }).call(this);
      return this.redraw();
    };

    Donut.prototype.click = function(idx) {
      return this.fire('click', idx, this.data[idx]);
    };

    Donut.prototype.select = function(idx) {
      var row, s, segment, _i, _len, _ref;
      _ref = this.segments;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        s.deselect();
      }
      segment = this.segments[idx];
      segment.select();
      row = this.data[idx];
      return this.setLabels(row.label, this.options.formatter(row.value, row));
    };

    Donut.prototype.setLabels = function(label1, label2) {
      var inner, maxHeightBottom, maxHeightTop, maxWidth, text1bbox, text1scale, text2bbox, text2scale;
      inner = (Math.min(this.el.width() / 2, this.el.height() / 2) - 10) * 2 / 3;
      maxWidth = 1.8 * inner;
      maxHeightTop = inner / 2;
      maxHeightBottom = inner / 3;
      this.text1.attr({
        text: label1,
        transform: ''
      });
      text1bbox = this.text1.getBBox();
      text1scale = Math.min(maxWidth / text1bbox.width, maxHeightTop / text1bbox.height);
      this.text1.attr({
        transform: "S" + text1scale + "," + text1scale + "," + (text1bbox.x + text1bbox.width / 2) + "," + (text1bbox.y + text1bbox.height)
      });
      this.text2.attr({
        text: label2,
        transform: ''
      });
      text2bbox = this.text2.getBBox();
      text2scale = Math.min(maxWidth / text2bbox.width, maxHeightBottom / text2bbox.height);
      return this.text2.attr({
        transform: "S" + text2scale + "," + text2scale + "," + (text2bbox.x + text2bbox.width / 2) + "," + text2bbox.y
      });
    };

    Donut.prototype.drawEmptyDonutLabel = function(xPos, yPos, color, fontSize, fontWeight) {
      var text;
      text = this.raphael.text(xPos, yPos, '').attr('font-size', fontSize).attr('fill', color);
      if (fontWeight != null) {
        text.attr('font-weight', fontWeight);
      }
      return text;
    };

    Donut.prototype.resizeHandler = function() {
      this.timeoutId = null;
      this.raphael.setSize(this.el.width(), this.el.height());
      return this.redraw();
    };

    return Donut;

  })(Morris.EventEmitter);

  Morris.DonutSegment = (function(_super) {
    __extends(DonutSegment, _super);

    function DonutSegment(cx, cy, inner, outer, p0, p1, color, backgroundColor, index, raphael) {
      this.cx = cx;
      this.cy = cy;
      this.inner = inner;
      this.outer = outer;
      this.color = color;
      this.backgroundColor = backgroundColor;
      this.index = index;
      this.raphael = raphael;
      this.deselect = __bind(this.deselect, this);
      this.select = __bind(this.select, this);
      this.sin_p0 = Math.sin(p0);
      this.cos_p0 = Math.cos(p0);
      this.sin_p1 = Math.sin(p1);
      this.cos_p1 = Math.cos(p1);
      this.is_long = (p1 - p0) > Math.PI ? 1 : 0;
      this.path = this.calcSegment(this.inner + 3, this.inner + this.outer - 5);
      this.selectedPath = this.calcSegment(this.inner + 3, this.inner + this.outer);
      this.hilight = this.calcArc(this.inner);
    }

    DonutSegment.prototype.calcArcPoints = function(r) {
      return [this.cx + r * this.sin_p0, this.cy + r * this.cos_p0, this.cx + r * this.sin_p1, this.cy + r * this.cos_p1];
    };

    DonutSegment.prototype.calcSegment = function(r1, r2) {
      var ix0, ix1, iy0, iy1, ox0, ox1, oy0, oy1, _ref, _ref1;
      _ref = this.calcArcPoints(r1), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];
      _ref1 = this.calcArcPoints(r2), ox0 = _ref1[0], oy0 = _ref1[1], ox1 = _ref1[2], oy1 = _ref1[3];
      return ("M" + ix0 + "," + iy0) + ("A" + r1 + "," + r1 + ",0," + this.is_long + ",0," + ix1 + "," + iy1) + ("L" + ox1 + "," + oy1) + ("A" + r2 + "," + r2 + ",0," + this.is_long + ",1," + ox0 + "," + oy0) + "Z";
    };

    DonutSegment.prototype.calcArc = function(r) {
      var ix0, ix1, iy0, iy1, _ref;
      _ref = this.calcArcPoints(r), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];
      return ("M" + ix0 + "," + iy0) + ("A" + r + "," + r + ",0," + this.is_long + ",0," + ix1 + "," + iy1);
    };

    DonutSegment.prototype.render = function() {
      var _this = this;
      this.arc = this.drawDonutArc(this.hilight, this.color);
      return this.seg = this.drawDonutSegment(this.path, this.color, this.backgroundColor, function() {
        return _this.fire('hover', _this.index);
      }, function() {
        return _this.fire('click', _this.index);
      });
    };

    DonutSegment.prototype.drawDonutArc = function(path, color) {
      return this.raphael.path(path).attr({
        stroke: color,
        'stroke-width': 2,
        opacity: 0
      });
    };

    DonutSegment.prototype.drawDonutSegment = function(path, fillColor, strokeColor, hoverFunction, clickFunction) {
      return this.raphael.path(path).attr({
        fill: fillColor,
        stroke: strokeColor,
        'stroke-width': 3
      }).hover(hoverFunction).click(clickFunction);
    };

    DonutSegment.prototype.select = function() {
      if (!this.selected) {
        this.seg.animate({
          path: this.selectedPath
        }, 150, '<>');
        this.arc.animate({
          opacity: 1
        }, 150, '<>');
        return this.selected = true;
      }
    };

    DonutSegment.prototype.deselect = function() {
      if (this.selected) {
        this.seg.animate({
          path: this.path
        }, 150, '<>');
        this.arc.animate({
          opacity: 0
        }, 150, '<>');
        return this.selected = false;
      }
    };

    return DonutSegment;

  })(Morris.EventEmitter);

}).call(this);

/* Javascript plotting library for jQuery, version 0.8.3.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

*/

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
 *
 * Version 1.1.
 *
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */
(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return"rgb("+[o.r,o.g,o.b].join(",")+")"}else{return"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=""&&c!="transparent")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));if(c=="rgba(0, 0, 0, 0)")c="transparent";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name=="transparent")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);

// the actual Flot code
(function($) {

	// Cache the prototype hasOwnProperty for faster access

	var hasOwnProperty = Object.prototype.hasOwnProperty;

    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM
    // operation produces the same effect as detach, i.e. removing the element
    // without touching its jQuery data.

    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.

    if (!$.fn.detach) {
        $.fn.detach = function() {
            return this.each(function() {
                if (this.parentNode) {
                    this.parentNode.removeChild( this );
                }
            });
        };
    }

	///////////////////////////////////////////////////////////////////////////
	// The Canvas object is a wrapper around an HTML5 <canvas> tag.
	//
	// @constructor
	// @param {string} cls List of classes to apply to the canvas.
	// @param {element} container Element onto which to append the canvas.
	//
	// Requiring a container is a little iffy, but unfortunately canvas
	// operations don't work unless the canvas is attached to the DOM.

	function Canvas(cls, container) {

		var element = container.children("." + cls)[0];

		if (element == null) {

			element = document.createElement("canvas");
			element.className = cls;

			$(element).css({ direction: "ltr", position: "absolute", left: 0, top: 0 })
				.appendTo(container);

			// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas

			if (!element.getContext) {
				if (window.G_vmlCanvasManager) {
					element = window.G_vmlCanvasManager.initElement(element);
				} else {
					throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");
				}
			}
		}

		this.element = element;

		var context = this.context = element.getContext("2d");

		// Determine the screen's ratio of physical to device-independent
		// pixels.  This is the ratio between the canvas width that the browser
		// advertises and the number of pixels actually present in that space.

		// The iPhone 4, for example, has a device-independent width of 320px,
		// but its screen is actually 640px wide.  It therefore has a pixel
		// ratio of 2, while most normal devices have a ratio of 1.

		var devicePixelRatio = window.devicePixelRatio || 1,
			backingStoreRatio =
				context.webkitBackingStorePixelRatio ||
				context.mozBackingStorePixelRatio ||
				context.msBackingStorePixelRatio ||
				context.oBackingStorePixelRatio ||
				context.backingStorePixelRatio || 1;

		this.pixelRatio = devicePixelRatio / backingStoreRatio;

		// Size the canvas to match the internal dimensions of its container

		this.resize(container.width(), container.height());

		// Collection of HTML div layers for text overlaid onto the canvas

		this.textContainer = null;
		this.text = {};

		// Cache of text fragments and metrics, so we can avoid expensively
		// re-calculating them when the plot is re-rendered in a loop.

		this._textCache = {};
	}

	// Resizes the canvas to the given dimensions.
	//
	// @param {number} width New width of the canvas, in pixels.
	// @param {number} width New height of the canvas, in pixels.

	Canvas.prototype.resize = function(width, height) {

		if (width <= 0 || height <= 0) {
			throw new Error("Invalid dimensions for plot, width = " + width + ", height = " + height);
		}

		var element = this.element,
			context = this.context,
			pixelRatio = this.pixelRatio;

		// Resize the canvas, increasing its density based on the display's
		// pixel ratio; basically giving it more pixels without increasing the
		// size of its element, to take advantage of the fact that retina
		// displays have that many more pixels in the same advertised space.

		// Resizing should reset the state (excanvas seems to be buggy though)

		if (this.width != width) {
			element.width = width * pixelRatio;
			element.style.width = width + "px";
			this.width = width;
		}

		if (this.height != height) {
			element.height = height * pixelRatio;
			element.style.height = height + "px";
			this.height = height;
		}

		// Save the context, so we can reset in case we get replotted.  The
		// restore ensure that we're really back at the initial state, and
		// should be safe even if we haven't saved the initial state yet.

		context.restore();
		context.save();

		// Scale the coordinate space to match the display density; so even though we
		// may have twice as many pixels, we still want lines and other drawing to
		// appear at the same size; the extra pixels will just make them crisper.

		context.scale(pixelRatio, pixelRatio);
	};

	// Clears the entire canvas area, not including any overlaid HTML text

	Canvas.prototype.clear = function() {
		this.context.clearRect(0, 0, this.width, this.height);
	};

	// Finishes rendering the canvas, including managing the text overlay.

	Canvas.prototype.render = function() {

		var cache = this._textCache;

		// For each text layer, add elements marked as active that haven't
		// already been rendered, and remove those that are no longer active.

		for (var layerKey in cache) {
			if (hasOwnProperty.call(cache, layerKey)) {

				var layer = this.getTextLayer(layerKey),
					layerCache = cache[layerKey];

				layer.hide();

				for (var styleKey in layerCache) {
					if (hasOwnProperty.call(layerCache, styleKey)) {
						var styleCache = layerCache[styleKey];
						for (var key in styleCache) {
							if (hasOwnProperty.call(styleCache, key)) {

								var positions = styleCache[key].positions;

								for (var i = 0, position; position = positions[i]; i++) {
									if (position.active) {
										if (!position.rendered) {
											layer.append(position.element);
											position.rendered = true;
										}
									} else {
										positions.splice(i--, 1);
										if (position.rendered) {
											position.element.detach();
										}
									}
								}

								if (positions.length == 0) {
									delete styleCache[key];
								}
							}
						}
					}
				}

				layer.show();
			}
		}
	};

	// Creates (if necessary) and returns the text overlay container.
	//
	// @param {string} classes String of space-separated CSS classes used to
	//     uniquely identify the text layer.
	// @return {object} The jQuery-wrapped text-layer div.

	Canvas.prototype.getTextLayer = function(classes) {

		var layer = this.text[classes];

		// Create the text layer if it doesn't exist

		if (layer == null) {

			// Create the text layer container, if it doesn't exist

			if (this.textContainer == null) {
				this.textContainer = $("<div class='flot-text'></div>")
					.css({
						position: "absolute",
						top: 0,
						left: 0,
						bottom: 0,
						right: 0,
						'font-size': "smaller",
						color: "#545454"
					})
					.insertAfter(this.element);
			}

			layer = this.text[classes] = $("<div></div>")
				.addClass(classes)
				.css({
					position: "absolute",
					top: 0,
					left: 0,
					bottom: 0,
					right: 0
				})
				.appendTo(this.textContainer);
		}

		return layer;
	};

	// Creates (if necessary) and returns a text info object.
	//
	// The object looks like this:
	//
	// {
	//     width: Width of the text's wrapper div.
	//     height: Height of the text's wrapper div.
	//     element: The jQuery-wrapped HTML div containing the text.
	//     positions: Array of positions at which this text is drawn.
	// }
	//
	// The positions array contains objects that look like this:
	//
	// {
	//     active: Flag indicating whether the text should be visible.
	//     rendered: Flag indicating whether the text is currently visible.
	//     element: The jQuery-wrapped HTML div containing the text.
	//     x: X coordinate at which to draw the text.
	//     y: Y coordinate at which to draw the text.
	// }
	//
	// Each position after the first receives a clone of the original element.
	//
	// The idea is that that the width, height, and general 'identity' of the
	// text is constant no matter where it is placed; the placements are a
	// secondary property.
	//
	// Canvas maintains a cache of recently-used text info objects; getTextInfo
	// either returns the cached element or creates a new entry.
	//
	// @param {string} layer A string of space-separated CSS classes uniquely
	//     identifying the layer containing this text.
	// @param {string} text Text string to retrieve info for.
	// @param {(string|object)=} font Either a string of space-separated CSS
	//     classes or a font-spec object, defining the text's font and style.
	// @param {number=} angle Angle at which to rotate the text, in degrees.
	//     Angle is currently unused, it will be implemented in the future.
	// @param {number=} width Maximum width of the text before it wraps.
	// @return {object} a text info object.

	Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {

		var textStyle, layerCache, styleCache, info;

		// Cast the value to a string, in case we were given a number or such

		text = "" + text;

		// If the font is a font-spec object, generate a CSS font definition

		if (typeof font === "object") {
			textStyle = font.style + " " + font.variant + " " + font.weight + " " + font.size + "px/" + font.lineHeight + "px " + font.family;
		} else {
			textStyle = font;
		}

		// Retrieve (or create) the cache for the text's layer and styles

		layerCache = this._textCache[layer];

		if (layerCache == null) {
			layerCache = this._textCache[layer] = {};
		}

		styleCache = layerCache[textStyle];

		if (styleCache == null) {
			styleCache = layerCache[textStyle] = {};
		}

		info = styleCache[text];

		// If we can't find a matching element in our cache, create a new one

		if (info == null) {

			var element = $("<div></div>").html(text)
				.css({
					position: "absolute",
					'max-width': width,
					top: -9999
				})
				.appendTo(this.getTextLayer(layer));

			if (typeof font === "object") {
				element.css({
					font: textStyle,
					color: font.color
				});
			} else if (typeof font === "string") {
				element.addClass(font);
			}

			info = styleCache[text] = {
				width: element.outerWidth(true),
				height: element.outerHeight(true),
				element: element,
				positions: []
			};

			element.detach();
		}

		return info;
	};

	// Adds a text string to the canvas text overlay.
	//
	// The text isn't drawn immediately; it is marked as rendering, which will
	// result in its addition to the canvas on the next render pass.
	//
	// @param {string} layer A string of space-separated CSS classes uniquely
	//     identifying the layer containing this text.
	// @param {number} x X coordinate at which to draw the text.
	// @param {number} y Y coordinate at which to draw the text.
	// @param {string} text Text string to draw.
	// @param {(string|object)=} font Either a string of space-separated CSS
	//     classes or a font-spec object, defining the text's font and style.
	// @param {number=} angle Angle at which to rotate the text, in degrees.
	//     Angle is currently unused, it will be implemented in the future.
	// @param {number=} width Maximum width of the text before it wraps.
	// @param {string=} halign Horizontal alignment of the text; either "left",
	//     "center" or "right".
	// @param {string=} valign Vertical alignment of the text; either "top",
	//     "middle" or "bottom".

	Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {

		var info = this.getTextInfo(layer, text, font, angle, width),
			positions = info.positions;

		// Tweak the div's position to match the text's alignment

		if (halign == "center") {
			x -= info.width / 2;
		} else if (halign == "right") {
			x -= info.width;
		}

		if (valign == "middle") {
			y -= info.height / 2;
		} else if (valign == "bottom") {
			y -= info.height;
		}

		// Determine whether this text already exists at this position.
		// If so, mark it for inclusion in the next render pass.

		for (var i = 0, position; position = positions[i]; i++) {
			if (position.x == x && position.y == y) {
				position.active = true;
				return;
			}
		}

		// If the text doesn't exist at this position, create a new entry

		// For the very first position we'll re-use the original element,
		// while for subsequent ones we'll clone it.

		position = {
			active: true,
			rendered: false,
			element: positions.length ? info.element.clone() : info.element,
			x: x,
			y: y
		};

		positions.push(position);

		// Move the element to its final position within the container

		position.element.css({
			top: Math.round(y),
			left: Math.round(x),
			'text-align': halign	// In case the text wraps
		});
	};

	// Removes one or more text strings from the canvas text overlay.
	//
	// If no parameters are given, all text within the layer is removed.
	//
	// Note that the text is not immediately removed; it is simply marked as
	// inactive, which will result in its removal on the next render pass.
	// This avoids the performance penalty for 'clear and redraw' behavior,
	// where we potentially get rid of all text on a layer, but will likely
	// add back most or all of it later, as when redrawing axes, for example.
	//
	// @param {string} layer A string of space-separated CSS classes uniquely
	//     identifying the layer containing this text.
	// @param {number=} x X coordinate of the text.
	// @param {number=} y Y coordinate of the text.
	// @param {string=} text Text string to remove.
	// @param {(string|object)=} font Either a string of space-separated CSS
	//     classes or a font-spec object, defining the text's font and style.
	// @param {number=} angle Angle at which the text is rotated, in degrees.
	//     Angle is currently unused, it will be implemented in the future.

	Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {
		if (text == null) {
			var layerCache = this._textCache[layer];
			if (layerCache != null) {
				for (var styleKey in layerCache) {
					if (hasOwnProperty.call(layerCache, styleKey)) {
						var styleCache = layerCache[styleKey];
						for (var key in styleCache) {
							if (hasOwnProperty.call(styleCache, key)) {
								var positions = styleCache[key].positions;
								for (var i = 0, position; position = positions[i]; i++) {
									position.active = false;
								}
							}
						}
					}
				}
			}
		} else {
			var positions = this.getTextInfo(layer, text, font, angle).positions;
			for (var i = 0, position; position = positions[i]; i++) {
				if (position.x == x && position.y == y) {
					position.active = false;
				}
			}
		}
	};

	///////////////////////////////////////////////////////////////////////////
	// The top-level container for the entire plot.

    function Plot(placeholder, data_, options_, plugins) {
        // data is on the form:
        //   [ series1, series2 ... ]
        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]
        // or { data: [ [x1, y1], [x2, y2], ... ], label: "some label", ... }

        var series = [],
            options = {
                // the color theme used for graphs
                colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                legend: {
                    show: true,
                    noColumns: 1, // number of colums in legend table
                    labelFormatter: null, // fn: string -> string
                    labelBoxBorderColor: "#ccc", // border color for the little label boxes
                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position: "ne", // position of default legend container within plot
                    margin: 5, // distance from grid edge to default legend container within plot
                    backgroundColor: null, // null means auto-detect
                    backgroundOpacity: 0.85, // set to 0 to avoid background
                    sorted: null    // default to no legend sorting
                },
                xaxis: {
                    show: null, // null = auto-detect, true = always, false = never
                    position: "bottom", // or "top"
                    mode: null, // null or "time"
                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: "italic", weight: "bold", family: "sans-serif", variant: "small-caps" }
                    color: null, // base color, labels, ticks
                    tickColor: null, // possibly different color of ticks, e.g. "rgba(0,0,0,0.15)"
                    transform: null, // null or f: number -> number to transform axis
                    inverseTransform: null, // if transform is set, this should be the inverse function
                    min: null, // min. value to show, null means set automatically
                    max: null, // max. value to show, null means set automatically
                    autoscaleMargin: null, // margin in % to add if auto-setting min/max
                    ticks: null, // either [1, 3] or [[1, "a"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks
                    tickFormatter: null, // fn: number -> string
                    labelWidth: null, // size of tick labels in pixels
                    labelHeight: null,
                    reserveSpace: null, // whether to reserve space even if axis isn't shown
                    tickLength: null, // size in pixels of ticks, or "full" for whole line
                    alignTicksWithAxis: null, // axis number or null for no sync
                    tickDecimals: null, // no. of decimals, null means auto
                    tickSize: null, // number or [number, "unit"]
                    minTickSize: null // number or [number, "unit"]
                },
                yaxis: {
                    autoscaleMargin: 0.02,
                    position: "left" // or "right"
                },
                xaxes: [],
                yaxes: [],
                series: {
                    points: {
                        show: false,
                        radius: 3,
                        lineWidth: 2, // in pixels
                        fill: true,
                        fillColor: "#ffffff",
                        symbol: "circle" // or callback
                    },
                    lines: {
                        // we don't put in show: false so we can see
                        // whether lines were actively disabled
                        lineWidth: 2, // in pixels
                        fill: false,
                        fillColor: null,
                        steps: false
                        // Omit 'zero', so we can later default its value to
                        // match that of the 'fill' option.
                    },
                    bars: {
                        show: false,
                        lineWidth: 2, // in pixels
                        barWidth: 1, // in units of the x axis
                        fill: true,
                        fillColor: null,
                        align: "left", // "left", "right", or "center"
                        horizontal: false,
                        zero: true
                    },
                    shadowSize: 3,
                    highlightColor: null
                },
                grid: {
                    show: true,
                    aboveData: false,
                    color: "#545454", // primary color used for outline and labels
                    backgroundColor: null, // null for transparent, else color
                    borderColor: null, // set if different from the grid color
                    tickColor: null, // color for the ticks, e.g. "rgba(0,0,0,0.15)"
                    margin: 0, // distance from the canvas edge to the grid
                    labelMargin: 5, // in pixels
                    axisMargin: 8, // in pixels
                    borderWidth: 2, // in pixels
                    minBorderMargin: null, // in pixels, null means taken from points radius
                    markings: null, // array of ranges or fn: axes -> array of ranges
                    markingsColor: "#f4f4f4",
                    markingsLineWidth: 2,
                    // interactive stuff
                    clickable: false,
                    hoverable: false,
                    autoHighlight: true, // highlight in case mouse is near
                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item
                },
                interaction: {
                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow
                },
                hooks: {}
            },
        surface = null,     // the canvas for the plot itself
        overlay = null,     // canvas for interactive stuff on top of plot
        eventHolder = null, // jQuery object that events should be bound to
        ctx = null, octx = null,
        xaxes = [], yaxes = [],
        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},
        plotWidth = 0, plotHeight = 0,
        hooks = {
            processOptions: [],
            processRawData: [],
            processDatapoints: [],
            processOffset: [],
            drawBackground: [],
            drawSeries: [],
            draw: [],
            bindEvents: [],
            drawOverlay: [],
            shutdown: []
        },
        plot = this;

        // public functions
        plot.setData = setData;
        plot.setupGrid = setupGrid;
        plot.draw = draw;
        plot.getPlaceholder = function() { return placeholder; };
        plot.getCanvas = function() { return surface.element; };
        plot.getPlotOffset = function() { return plotOffset; };
        plot.width = function () { return plotWidth; };
        plot.height = function () { return plotHeight; };
        plot.offset = function () {
            var o = eventHolder.offset();
            o.left += plotOffset.left;
            o.top += plotOffset.top;
            return o;
        };
        plot.getData = function () { return series; };
        plot.getAxes = function () {
            var res = {}, i;
            $.each(xaxes.concat(yaxes), function (_, axis) {
                if (axis)
                    res[axis.direction + (axis.n != 1 ? axis.n : "") + "axis"] = axis;
            });
            return res;
        };
        plot.getXAxes = function () { return xaxes; };
        plot.getYAxes = function () { return yaxes; };
        plot.c2p = canvasToAxisCoords;
        plot.p2c = axisToCanvasCoords;
        plot.getOptions = function () { return options; };
        plot.highlight = highlight;
        plot.unhighlight = unhighlight;
        plot.triggerRedrawOverlay = triggerRedrawOverlay;
        plot.pointOffset = function(point) {
            return {
                left: parseInt(xaxes[axisNumber(point, "x") - 1].p2c(+point.x) + plotOffset.left, 10),
                top: parseInt(yaxes[axisNumber(point, "y") - 1].p2c(+point.y) + plotOffset.top, 10)
            };
        };
        plot.shutdown = shutdown;
        plot.destroy = function () {
            shutdown();
            placeholder.removeData("plot").empty();

            series = [];
            options = null;
            surface = null;
            overlay = null;
            eventHolder = null;
            ctx = null;
            octx = null;
            xaxes = [];
            yaxes = [];
            hooks = null;
            highlights = [];
            plot = null;
        };
        plot.resize = function () {
        	var width = placeholder.width(),
        		height = placeholder.height();
            surface.resize(width, height);
            overlay.resize(width, height);
        };

        // public attributes
        plot.hooks = hooks;

        // initialize
        initPlugins(plot);
        parseOptions(options_);
        setupCanvases();
        setData(data_);
        setupGrid();
        draw();
        bindEvents();


        function executeHooks(hook, args) {
            args = [plot].concat(args);
            for (var i = 0; i < hook.length; ++i)
                hook[i].apply(this, args);
        }

        function initPlugins() {

            // References to key classes, allowing plugins to modify them

            var classes = {
                Canvas: Canvas
            };

            for (var i = 0; i < plugins.length; ++i) {
                var p = plugins[i];
                p.init(plot, classes);
                if (p.options)
                    $.extend(true, options, p.options);
            }
        }

        function parseOptions(opts) {

            $.extend(true, options, opts);

            // $.extend merges arrays, rather than replacing them.  When less
            // colors are provided than the size of the default palette, we
            // end up with those colors plus the remaining defaults, which is
            // not expected behavior; avoid it by replacing them here.

            if (opts && opts.colors) {
            	options.colors = opts.colors;
            }

            if (options.xaxis.color == null)
                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();
            if (options.yaxis.color == null)
                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();

            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility
                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;
            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility
                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;

            if (options.grid.borderColor == null)
                options.grid.borderColor = options.grid.color;
            if (options.grid.tickColor == null)
                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();

            // Fill in defaults for axis options, including any unspecified
            // font-spec fields, if a font-spec was provided.

            // If no x/y axis options were provided, create one of each anyway,
            // since the rest of the code assumes that they exist.

            var i, axisOptions, axisCount,
                fontSize = placeholder.css("font-size"),
                fontSizeDefault = fontSize ? +fontSize.replace("px", "") : 13,
                fontDefaults = {
                    style: placeholder.css("font-style"),
                    size: Math.round(0.8 * fontSizeDefault),
                    variant: placeholder.css("font-variant"),
                    weight: placeholder.css("font-weight"),
                    family: placeholder.css("font-family")
                };

            axisCount = options.xaxes.length || 1;
            for (i = 0; i < axisCount; ++i) {

                axisOptions = options.xaxes[i];
                if (axisOptions && !axisOptions.tickColor) {
                    axisOptions.tickColor = axisOptions.color;
                }

                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);
                options.xaxes[i] = axisOptions;

                if (axisOptions.font) {
                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);
                    if (!axisOptions.font.color) {
                        axisOptions.font.color = axisOptions.color;
                    }
                    if (!axisOptions.font.lineHeight) {
                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);
                    }
                }
            }

            axisCount = options.yaxes.length || 1;
            for (i = 0; i < axisCount; ++i) {

                axisOptions = options.yaxes[i];
                if (axisOptions && !axisOptions.tickColor) {
                    axisOptions.tickColor = axisOptions.color;
                }

                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);
                options.yaxes[i] = axisOptions;

                if (axisOptions.font) {
                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);
                    if (!axisOptions.font.color) {
                        axisOptions.font.color = axisOptions.color;
                    }
                    if (!axisOptions.font.lineHeight) {
                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);
                    }
                }
            }

            // backwards compatibility, to be removed in future
            if (options.xaxis.noTicks && options.xaxis.ticks == null)
                options.xaxis.ticks = options.xaxis.noTicks;
            if (options.yaxis.noTicks && options.yaxis.ticks == null)
                options.yaxis.ticks = options.yaxis.noTicks;
            if (options.x2axis) {
                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);
                options.xaxes[1].position = "top";
                // Override the inherit to allow the axis to auto-scale
                if (options.x2axis.min == null) {
                    options.xaxes[1].min = null;
                }
                if (options.x2axis.max == null) {
                    options.xaxes[1].max = null;
                }
            }
            if (options.y2axis) {
                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);
                options.yaxes[1].position = "right";
                // Override the inherit to allow the axis to auto-scale
                if (options.y2axis.min == null) {
                    options.yaxes[1].min = null;
                }
                if (options.y2axis.max == null) {
                    options.yaxes[1].max = null;
                }
            }
            if (options.grid.coloredAreas)
                options.grid.markings = options.grid.coloredAreas;
            if (options.grid.coloredAreasColor)
                options.grid.markingsColor = options.grid.coloredAreasColor;
            if (options.lines)
                $.extend(true, options.series.lines, options.lines);
            if (options.points)
                $.extend(true, options.series.points, options.points);
            if (options.bars)
                $.extend(true, options.series.bars, options.bars);
            if (options.shadowSize != null)
                options.series.shadowSize = options.shadowSize;
            if (options.highlightColor != null)
                options.series.highlightColor = options.highlightColor;

            // save options on axes for future reference
            for (i = 0; i < options.xaxes.length; ++i)
                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];
            for (i = 0; i < options.yaxes.length; ++i)
                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];

            // add hooks from options
            for (var n in hooks)
                if (options.hooks[n] && options.hooks[n].length)
                    hooks[n] = hooks[n].concat(options.hooks[n]);

            executeHooks(hooks.processOptions, [options]);
        }

        function setData(d) {
            series = parseData(d);
            fillInSeriesOptions();
            processData();
        }

        function parseData(d) {
            var res = [];
            for (var i = 0; i < d.length; ++i) {
                var s = $.extend(true, {}, options.series);

                if (d[i].data != null) {
                    s.data = d[i].data; // move the data instead of deep-copy
                    delete d[i].data;

                    $.extend(true, s, d[i]);

                    d[i].data = s.data;
                }
                else
                    s.data = d[i];
                res.push(s);
            }

            return res;
        }

        function axisNumber(obj, coord) {
            var a = obj[coord + "axis"];
            if (typeof a == "object") // if we got a real axis, extract number
                a = a.n;
            if (typeof a != "number")
                a = 1; // default to first axis
            return a;
        }

        function allAxes() {
            // return flat array without annoying null entries
            return $.grep(xaxes.concat(yaxes), function (a) { return a; });
        }

        function canvasToAxisCoords(pos) {
            // return an object with x/y corresponding to all used axes
            var res = {}, i, axis;
            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used)
                    res["x" + axis.n] = axis.c2p(pos.left);
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used)
                    res["y" + axis.n] = axis.c2p(pos.top);
            }

            if (res.x1 !== undefined)
                res.x = res.x1;
            if (res.y1 !== undefined)
                res.y = res.y1;

            return res;
        }

        function axisToCanvasCoords(pos) {
            // get canvas coords from the first pair of x/y found in pos
            var res = {}, i, axis, key;

            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used) {
                    key = "x" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "x";

                    if (pos[key] != null) {
                        res.left = axis.p2c(pos[key]);
                        break;
                    }
                }
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used) {
                    key = "y" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "y";

                    if (pos[key] != null) {
                        res.top = axis.p2c(pos[key]);
                        break;
                    }
                }
            }

            return res;
        }

        function getOrCreateAxis(axes, number) {
            if (!axes[number - 1])
                axes[number - 1] = {
                    n: number, // save the number for future reference
                    direction: axes == xaxes ? "x" : "y",
                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)
                };

            return axes[number - 1];
        }

        function fillInSeriesOptions() {

            var neededColors = series.length, maxIndex = -1, i;

            // Subtract the number of series that already have fixed colors or
            // color indexes from the number that we still need to generate.

            for (i = 0; i < series.length; ++i) {
                var sc = series[i].color;
                if (sc != null) {
                    neededColors--;
                    if (typeof sc == "number" && sc > maxIndex) {
                        maxIndex = sc;
                    }
                }
            }

            // If any of the series have fixed color indexes, then we need to
            // generate at least as many colors as the highest index.

            if (neededColors <= maxIndex) {
                neededColors = maxIndex + 1;
            }

            // Generate all the colors, using first the option colors and then
            // variations on those colors once they're exhausted.

            var c, colors = [], colorPool = options.colors,
                colorPoolSize = colorPool.length, variation = 0;

            for (i = 0; i < neededColors; i++) {

                c = $.color.parse(colorPool[i % colorPoolSize] || "#666");

                // Each time we exhaust the colors in the pool we adjust
                // a scaling factor used to produce more variations on
                // those colors. The factor alternates negative/positive
                // to produce lighter/darker colors.

                // Reset the variation after every few cycles, or else
                // it will end up producing only white or black colors.

                if (i % colorPoolSize == 0 && i) {
                    if (variation >= 0) {
                        if (variation < 0.5) {
                            variation = -variation - 0.2;
                        } else variation = 0;
                    } else variation = -variation;
                }

                colors[i] = c.scale('rgb', 1 + variation);
            }

            // Finalize the series options, filling in their colors

            var colori = 0, s;
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                // assign colors
                if (s.color == null) {
                    s.color = colors[colori].toString();
                    ++colori;
                }
                else if (typeof s.color == "number")
                    s.color = colors[s.color].toString();

                // turn on lines automatically in case nothing is set
                if (s.lines.show == null) {
                    var v, show = true;
                    for (v in s)
                        if (s[v] && s[v].show) {
                            show = false;
                            break;
                        }
                    if (show)
                        s.lines.show = true;
                }

                // If nothing was provided for lines.zero, default it to match
                // lines.fill, since areas by default should extend to zero.

                if (s.lines.zero == null) {
                    s.lines.zero = !!s.lines.fill;
                }

                // setup axes
                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, "x"));
                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, "y"));
            }
        }

        function processData() {
            var topSentry = Number.POSITIVE_INFINITY,
                bottomSentry = Number.NEGATIVE_INFINITY,
                fakeInfinity = Number.MAX_VALUE,
                i, j, k, m, length,
                s, points, ps, x, y, axis, val, f, p,
                data, format;

            function updateAxis(axis, min, max) {
                if (min < axis.datamin && min != -fakeInfinity)
                    axis.datamin = min;
                if (max > axis.datamax && max != fakeInfinity)
                    axis.datamax = max;
            }

            $.each(allAxes(), function (_, axis) {
                // init axis
                axis.datamin = topSentry;
                axis.datamax = bottomSentry;
                axis.used = false;
            });

            for (i = 0; i < series.length; ++i) {
                s = series[i];
                s.datapoints = { points: [] };

                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);
            }

            // first pass: clean and copy data
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                data = s.data;
                format = s.datapoints.format;

                if (!format) {
                    format = [];
                    // find out how to copy
                    format.push({ x: true, number: true, required: true });
                    format.push({ y: true, number: true, required: true });

                    if (s.bars.show || (s.lines.show && s.lines.fill)) {
                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));
                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });
                        if (s.bars.horizontal) {
                            delete format[format.length - 1].y;
                            format[format.length - 1].x = true;
                        }
                    }

                    s.datapoints.format = format;
                }

                if (s.datapoints.pointsize != null)
                    continue; // already filled in

                s.datapoints.pointsize = format.length;

                ps = s.datapoints.pointsize;
                points = s.datapoints.points;

                var insertSteps = s.lines.show && s.lines.steps;
                s.xaxis.used = s.yaxis.used = true;

                for (j = k = 0; j < data.length; ++j, k += ps) {
                    p = data[j];

                    var nullify = p == null;
                    if (!nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = p[m];
                            f = format[m];

                            if (f) {
                                if (f.number && val != null) {
                                    val = +val; // convert to number
                                    if (isNaN(val))
                                        val = null;
                                    else if (val == Infinity)
                                        val = fakeInfinity;
                                    else if (val == -Infinity)
                                        val = -fakeInfinity;
                                }

                                if (val == null) {
                                    if (f.required)
                                        nullify = true;

                                    if (f.defaultValue != null)
                                        val = f.defaultValue;
                                }
                            }

                            points[k + m] = val;
                        }
                    }

                    if (nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = points[k + m];
                            if (val != null) {
                                f = format[m];
                                // extract min/max info
                                if (f.autoscale !== false) {
                                    if (f.x) {
                                        updateAxis(s.xaxis, val, val);
                                    }
                                    if (f.y) {
                                        updateAxis(s.yaxis, val, val);
                                    }
                                }
                            }
                            points[k + m] = null;
                        }
                    }
                    else {
                        // a little bit of line specific stuff that
                        // perhaps shouldn't be here, but lacking
                        // better means...
                        if (insertSteps && k > 0
                            && points[k - ps] != null
                            && points[k - ps] != points[k]
                            && points[k - ps + 1] != points[k + 1]) {
                            // copy the point to make room for a middle point
                            for (m = 0; m < ps; ++m)
                                points[k + ps + m] = points[k + m];

                            // middle point has same y
                            points[k + 1] = points[k - ps + 1];

                            // we've added a point, better reflect that
                            k += ps;
                        }
                    }
                }
            }

            // give the hooks a chance to run
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);
            }

            // second pass: find datamax/datamin for auto-scaling
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                points = s.datapoints.points;
                ps = s.datapoints.pointsize;
                format = s.datapoints.format;

                var xmin = topSentry, ymin = topSentry,
                    xmax = bottomSentry, ymax = bottomSentry;

                for (j = 0; j < points.length; j += ps) {
                    if (points[j] == null)
                        continue;

                    for (m = 0; m < ps; ++m) {
                        val = points[j + m];
                        f = format[m];
                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)
                            continue;

                        if (f.x) {
                            if (val < xmin)
                                xmin = val;
                            if (val > xmax)
                                xmax = val;
                        }
                        if (f.y) {
                            if (val < ymin)
                                ymin = val;
                            if (val > ymax)
                                ymax = val;
                        }
                    }
                }

                if (s.bars.show) {
                    // make sure we got room for the bar on the dancing floor
                    var delta;

                    switch (s.bars.align) {
                        case "left":
                            delta = 0;
                            break;
                        case "right":
                            delta = -s.bars.barWidth;
                            break;
                        default:
                            delta = -s.bars.barWidth / 2;
                    }

                    if (s.bars.horizontal) {
                        ymin += delta;
                        ymax += delta + s.bars.barWidth;
                    }
                    else {
                        xmin += delta;
                        xmax += delta + s.bars.barWidth;
                    }
                }

                updateAxis(s.xaxis, xmin, xmax);
                updateAxis(s.yaxis, ymin, ymax);
            }

            $.each(allAxes(), function (_, axis) {
                if (axis.datamin == topSentry)
                    axis.datamin = null;
                if (axis.datamax == bottomSentry)
                    axis.datamax = null;
            });
        }

        function setupCanvases() {

            // Make sure the placeholder is clear of everything except canvases
            // from a previous plot in this container that we'll try to re-use.

            placeholder.css("padding", 0) // padding messes up the positioning
                .children().filter(function(){
                    return !$(this).hasClass("flot-overlay") && !$(this).hasClass('flot-base');
                }).remove();

            if (placeholder.css("position") == 'static')
                placeholder.css("position", "relative"); // for positioning labels and overlay

            surface = new Canvas("flot-base", placeholder);
            overlay = new Canvas("flot-overlay", placeholder); // overlay canvas for interactive features

            ctx = surface.context;
            octx = overlay.context;

            // define which element we're listening for events on
            eventHolder = $(overlay.element).unbind();

            // If we're re-using a plot object, shut down the old one

            var existing = placeholder.data("plot");

            if (existing) {
                existing.shutdown();
                overlay.clear();
            }

            // save in case we get replotted
            placeholder.data("plot", plot);
        }

        function bindEvents() {
            // bind events
            if (options.grid.hoverable) {
                eventHolder.mousemove(onMouseMove);

                // Use bind, rather than .mouseleave, because we officially
                // still support jQuery 1.2.6, which doesn't define a shortcut
                // for mouseenter or mouseleave.  This was a bug/oversight that
                // was fixed somewhere around 1.3.x.  We can return to using
                // .mouseleave when we drop support for 1.2.6.

                eventHolder.bind("mouseleave", onMouseLeave);
            }

            if (options.grid.clickable)
                eventHolder.click(onClick);

            executeHooks(hooks.bindEvents, [eventHolder]);
        }

        function shutdown() {
            if (redrawTimeout)
                clearTimeout(redrawTimeout);

            eventHolder.unbind("mousemove", onMouseMove);
            eventHolder.unbind("mouseleave", onMouseLeave);
            eventHolder.unbind("click", onClick);

            executeHooks(hooks.shutdown, [eventHolder]);
        }

        function setTransformationHelpers(axis) {
            // set helper functions on the axis, assumes plot area
            // has been computed already

            function identity(x) { return x; }

            var s, m, t = axis.options.transform || identity,
                it = axis.options.inverseTransform;

            // precompute how much the axis is scaling a point
            // in canvas space
            if (axis.direction == "x") {
                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));
                m = Math.min(t(axis.max), t(axis.min));
            }
            else {
                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));
                s = -s;
                m = Math.max(t(axis.max), t(axis.min));
            }

            // data point to canvas coordinate
            if (t == identity) // slight optimization
                axis.p2c = function (p) { return (p - m) * s; };
            else
                axis.p2c = function (p) { return (t(p) - m) * s; };
            // canvas coordinate to data point
            if (!it)
                axis.c2p = function (c) { return m + c / s; };
            else
                axis.c2p = function (c) { return it(m + c / s); };
        }

        function measureTickLabels(axis) {

            var opts = axis.options,
                ticks = axis.ticks || [],
                labelWidth = opts.labelWidth || 0,
                labelHeight = opts.labelHeight || 0,
                maxWidth = labelWidth || (axis.direction == "x" ? Math.floor(surface.width / (ticks.length || 1)) : null),
                legacyStyles = axis.direction + "Axis " + axis.direction + axis.n + "Axis",
                layer = "flot-" + axis.direction + "-axis flot-" + axis.direction + axis.n + "-axis " + legacyStyles,
                font = opts.font || "flot-tick-label tickLabel";

            for (var i = 0; i < ticks.length; ++i) {

                var t = ticks[i];

                if (!t.label)
                    continue;

                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);

                labelWidth = Math.max(labelWidth, info.width);
                labelHeight = Math.max(labelHeight, info.height);
            }

            axis.labelWidth = opts.labelWidth || labelWidth;
            axis.labelHeight = opts.labelHeight || labelHeight;
        }

        function allocateAxisBoxFirstPhase(axis) {
            // find the bounding box of the axis by looking at label
            // widths/heights and ticks, make room by diminishing the
            // plotOffset; this first phase only looks at one
            // dimension per axis, the other dimension depends on the
            // other axes so will have to wait

            var lw = axis.labelWidth,
                lh = axis.labelHeight,
                pos = axis.options.position,
                isXAxis = axis.direction === "x",
                tickLength = axis.options.tickLength,
                axisMargin = options.grid.axisMargin,
                padding = options.grid.labelMargin,
                innermost = true,
                outermost = true,
                first = true,
                found = false;

            // Determine the axis's position in its direction and on its side

            $.each(isXAxis ? xaxes : yaxes, function(i, a) {
                if (a && (a.show || a.reserveSpace)) {
                    if (a === axis) {
                        found = true;
                    } else if (a.options.position === pos) {
                        if (found) {
                            outermost = false;
                        } else {
                            innermost = false;
                        }
                    }
                    if (!found) {
                        first = false;
                    }
                }
            });

            // The outermost axis on each side has no margin

            if (outermost) {
                axisMargin = 0;
            }

            // The ticks for the first axis in each direction stretch across

            if (tickLength == null) {
                tickLength = first ? "full" : 5;
            }

            if (!isNaN(+tickLength))
                padding += +tickLength;

            if (isXAxis) {
                lh += padding;

                if (pos == "bottom") {
                    plotOffset.bottom += lh + axisMargin;
                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };
                }
                else {
                    axis.box = { top: plotOffset.top + axisMargin, height: lh };
                    plotOffset.top += lh + axisMargin;
                }
            }
            else {
                lw += padding;

                if (pos == "left") {
                    axis.box = { left: plotOffset.left + axisMargin, width: lw };
                    plotOffset.left += lw + axisMargin;
                }
                else {
                    plotOffset.right += lw + axisMargin;
                    axis.box = { left: surface.width - plotOffset.right, width: lw };
                }
            }

             // save for future reference
            axis.position = pos;
            axis.tickLength = tickLength;
            axis.box.padding = padding;
            axis.innermost = innermost;
        }

        function allocateAxisBoxSecondPhase(axis) {
            // now that all axis boxes have been placed in one
            // dimension, we can set the remaining dimension coordinates
            if (axis.direction == "x") {
                axis.box.left = plotOffset.left - axis.labelWidth / 2;
                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;
            }
            else {
                axis.box.top = plotOffset.top - axis.labelHeight / 2;
                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;
            }
        }

        function adjustLayoutForThingsStickingOut() {
            // possibly adjust plot offset to ensure everything stays
            // inside the canvas and isn't clipped off

            var minMargin = options.grid.minBorderMargin,
                axis, i;

            // check stuff from the plot (FIXME: this should just read
            // a value from the series, otherwise it's impossible to
            // customize)
            if (minMargin == null) {
                minMargin = 0;
                for (i = 0; i < series.length; ++i)
                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));
            }

            var margins = {
                left: minMargin,
                right: minMargin,
                top: minMargin,
                bottom: minMargin
            };

            // check axis labels, note we don't check the actual
            // labels but instead use the overall width/height to not
            // jump as much around with replots
            $.each(allAxes(), function (_, axis) {
                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {
                    if (axis.direction === "x") {
                        margins.left = Math.max(margins.left, axis.labelWidth / 2);
                        margins.right = Math.max(margins.right, axis.labelWidth / 2);
                    } else {
                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);
                        margins.top = Math.max(margins.top, axis.labelHeight / 2);
                    }
                }
            });

            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));
            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));
            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));
            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));
        }

        function setupGrid() {
            var i, axes = allAxes(), showGrid = options.grid.show;

            // Initialize the plot's offset from the edge of the canvas

            for (var a in plotOffset) {
                var margin = options.grid.margin || 0;
                plotOffset[a] = typeof margin == "number" ? margin : margin[a] || 0;
            }

            executeHooks(hooks.processOffset, [plotOffset]);

            // If the grid is visible, add its border width to the offset

            for (var a in plotOffset) {
                if(typeof(options.grid.borderWidth) == "object") {
                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;
                }
                else {
                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;
                }
            }

            $.each(axes, function (_, axis) {
                var axisOpts = axis.options;
                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;
                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;
                setRange(axis);
            });

            if (showGrid) {

                var allocatedAxes = $.grep(axes, function (axis) {
                    return axis.show || axis.reserveSpace;
                });

                $.each(allocatedAxes, function (_, axis) {
                    // make the ticks
                    setupTickGeneration(axis);
                    setTicks(axis);
                    snapRangeToTicks(axis, axis.ticks);
                    // find labelWidth/Height for axis
                    measureTickLabels(axis);
                });

                // with all dimensions calculated, we can compute the
                // axis bounding boxes, start from the outside
                // (reverse order)
                for (i = allocatedAxes.length - 1; i >= 0; --i)
                    allocateAxisBoxFirstPhase(allocatedAxes[i]);

                // make sure we've got enough space for things that
                // might stick out
                adjustLayoutForThingsStickingOut();

                $.each(allocatedAxes, function (_, axis) {
                    allocateAxisBoxSecondPhase(axis);
                });
            }

            plotWidth = surface.width - plotOffset.left - plotOffset.right;
            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;

            // now we got the proper plot dimensions, we can compute the scaling
            $.each(axes, function (_, axis) {
                setTransformationHelpers(axis);
            });

            if (showGrid) {
                drawAxisLabels();
            }

            insertLegend();
        }

        function setRange(axis) {
            var opts = axis.options,
                min = +(opts.min != null ? opts.min : axis.datamin),
                max = +(opts.max != null ? opts.max : axis.datamax),
                delta = max - min;

            if (delta == 0.0) {
                // degenerate case
                var widen = max == 0 ? 1 : 0.01;

                if (opts.min == null)
                    min -= widen;
                // always widen max if we couldn't widen min to ensure we
                // don't fall into min == max which doesn't work
                if (opts.max == null || opts.min != null)
                    max += widen;
            }
            else {
                // consider autoscaling
                var margin = opts.autoscaleMargin;
                if (margin != null) {
                    if (opts.min == null) {
                        min -= delta * margin;
                        // make sure we don't go below zero if all values
                        // are positive
                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)
                            min = 0;
                    }
                    if (opts.max == null) {
                        max += delta * margin;
                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)
                            max = 0;
                    }
                }
            }
            axis.min = min;
            axis.max = max;
        }

        function setupTickGeneration(axis) {
            var opts = axis.options;

            // estimate number of ticks
            var noTicks;
            if (typeof opts.ticks == "number" && opts.ticks > 0)
                noTicks = opts.ticks;
            else
                // heuristic based on the model a*sqrt(x) fitted to
                // some data points that seemed reasonable
                noTicks = 0.3 * Math.sqrt(axis.direction == "x" ? surface.width : surface.height);

            var delta = (axis.max - axis.min) / noTicks,
                dec = -Math.floor(Math.log(delta) / Math.LN10),
                maxDec = opts.tickDecimals;

            if (maxDec != null && dec > maxDec) {
                dec = maxDec;
            }

            var magn = Math.pow(10, -dec),
                norm = delta / magn, // norm is between 1.0 and 10.0
                size;

            if (norm < 1.5) {
                size = 1;
            } else if (norm < 3) {
                size = 2;
                // special case for 2.5, requires an extra decimal
                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {
                    size = 2.5;
                    ++dec;
                }
            } else if (norm < 7.5) {
                size = 5;
            } else {
                size = 10;
            }

            size *= magn;

            if (opts.minTickSize != null && size < opts.minTickSize) {
                size = opts.minTickSize;
            }

            axis.delta = delta;
            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);
            axis.tickSize = opts.tickSize || size;

            // Time mode was moved to a plug-in in 0.8, and since so many people use it
            // we'll add an especially friendly reminder to make sure they included it.

            if (opts.mode == "time" && !axis.tickGenerator) {
                throw new Error("Time mode requires the flot.time plugin.");
            }

            // Flot supports base-10 axes; any other mode else is handled by a plug-in,
            // like flot.time.js.

            if (!axis.tickGenerator) {

                axis.tickGenerator = function (axis) {

                    var ticks = [],
                        start = floorInBase(axis.min, axis.tickSize),
                        i = 0,
                        v = Number.NaN,
                        prev;

                    do {
                        prev = v;
                        v = start + i * axis.tickSize;
                        ticks.push(v);
                        ++i;
                    } while (v < axis.max && v != prev);
                    return ticks;
                };

				axis.tickFormatter = function (value, axis) {

					var factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;
					var formatted = "" + Math.round(value * factor) / factor;

					// If tickDecimals was specified, ensure that we have exactly that
					// much precision; otherwise default to the value's own precision.

					if (axis.tickDecimals != null) {
						var decimal = formatted.indexOf(".");
						var precision = decimal == -1 ? 0 : formatted.length - decimal - 1;
						if (precision < axis.tickDecimals) {
							return (precision ? formatted : formatted + ".") + ("" + factor).substr(1, axis.tickDecimals - precision);
						}
					}

                    return formatted;
                };
            }

            if ($.isFunction(opts.tickFormatter))
                axis.tickFormatter = function (v, axis) { return "" + opts.tickFormatter(v, axis); };

            if (opts.alignTicksWithAxis != null) {
                var otherAxis = (axis.direction == "x" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];
                if (otherAxis && otherAxis.used && otherAxis != axis) {
                    // consider snapping min/max to outermost nice ticks
                    var niceTicks = axis.tickGenerator(axis);
                    if (niceTicks.length > 0) {
                        if (opts.min == null)
                            axis.min = Math.min(axis.min, niceTicks[0]);
                        if (opts.max == null && niceTicks.length > 1)
                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);
                    }

                    axis.tickGenerator = function (axis) {
                        // copy ticks, scaled to this axis
                        var ticks = [], v, i;
                        for (i = 0; i < otherAxis.ticks.length; ++i) {
                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);
                            v = axis.min + v * (axis.max - axis.min);
                            ticks.push(v);
                        }
                        return ticks;
                    };

                    // we might need an extra decimal since forced
                    // ticks don't necessarily fit naturally
                    if (!axis.mode && opts.tickDecimals == null) {
                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),
                            ts = axis.tickGenerator(axis);

                        // only proceed if the tick interval rounded
                        // with an extra decimal doesn't give us a
                        // zero at end
                        if (!(ts.length > 1 && /\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))
                            axis.tickDecimals = extraDec;
                    }
                }
            }
        }

        function setTicks(axis) {
            var oticks = axis.options.ticks, ticks = [];
            if (oticks == null || (typeof oticks == "number" && oticks > 0))
                ticks = axis.tickGenerator(axis);
            else if (oticks) {
                if ($.isFunction(oticks))
                    // generate the ticks
                    ticks = oticks(axis);
                else
                    ticks = oticks;
            }

            // clean up/labelify the supplied ticks, copy them over
            var i, v;
            axis.ticks = [];
            for (i = 0; i < ticks.length; ++i) {
                var label = null;
                var t = ticks[i];
                if (typeof t == "object") {
                    v = +t[0];
                    if (t.length > 1)
                        label = t[1];
                }
                else
                    v = +t;
                if (label == null)
                    label = axis.tickFormatter(v, axis);
                if (!isNaN(v))
                    axis.ticks.push({ v: v, label: label });
            }
        }

        function snapRangeToTicks(axis, ticks) {
            if (axis.options.autoscaleMargin && ticks.length > 0) {
                // snap to ticks
                if (axis.options.min == null)
                    axis.min = Math.min(axis.min, ticks[0].v);
                if (axis.options.max == null && ticks.length > 1)
                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);
            }
        }

        function draw() {

            surface.clear();

            executeHooks(hooks.drawBackground, [ctx]);

            var grid = options.grid;

            // draw background, if any
            if (grid.show && grid.backgroundColor)
                drawBackground();

            if (grid.show && !grid.aboveData) {
                drawGrid();
            }

            for (var i = 0; i < series.length; ++i) {
                executeHooks(hooks.drawSeries, [ctx, series[i]]);
                drawSeries(series[i]);
            }

            executeHooks(hooks.draw, [ctx]);

            if (grid.show && grid.aboveData) {
                drawGrid();
            }

            surface.render();

            // A draw implies that either the axes or data have changed, so we
            // should probably update the overlay highlights as well.

            triggerRedrawOverlay();
        }

        function extractRange(ranges, coord) {
            var axis, from, to, key, axes = allAxes();

            for (var i = 0; i < axes.length; ++i) {
                axis = axes[i];
                if (axis.direction == coord) {
                    key = coord + axis.n + "axis";
                    if (!ranges[key] && axis.n == 1)
                        key = coord + "axis"; // support x1axis as xaxis
                    if (ranges[key]) {
                        from = ranges[key].from;
                        to = ranges[key].to;
                        break;
                    }
                }
            }

            // backwards-compat stuff - to be removed in future
            if (!ranges[key]) {
                axis = coord == "x" ? xaxes[0] : yaxes[0];
                from = ranges[coord + "1"];
                to = ranges[coord + "2"];
            }

            // auto-reverse as an added bonus
            if (from != null && to != null && from > to) {
                var tmp = from;
                from = to;
                to = tmp;
            }

            return { from: from, to: to, axis: axis };
        }

        function drawBackground() {
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, "rgba(255, 255, 255, 0)");
            ctx.fillRect(0, 0, plotWidth, plotHeight);
            ctx.restore();
        }

        function drawGrid() {
            var i, axes, bw, bc;

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // draw markings
            var markings = options.grid.markings;
            if (markings) {
                if ($.isFunction(markings)) {
                    axes = plot.getAxes();
                    // xmin etc. is backwards compatibility, to be
                    // removed in the future
                    axes.xmin = axes.xaxis.min;
                    axes.xmax = axes.xaxis.max;
                    axes.ymin = axes.yaxis.min;
                    axes.ymax = axes.yaxis.max;

                    markings = markings(axes);
                }

                for (i = 0; i < markings.length; ++i) {
                    var m = markings[i],
                        xrange = extractRange(m, "x"),
                        yrange = extractRange(m, "y");

                    // fill in missing
                    if (xrange.from == null)
                        xrange.from = xrange.axis.min;
                    if (xrange.to == null)
                        xrange.to = xrange.axis.max;
                    if (yrange.from == null)
                        yrange.from = yrange.axis.min;
                    if (yrange.to == null)
                        yrange.to = yrange.axis.max;

                    // clip
                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||
                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)
                        continue;

                    xrange.from = Math.max(xrange.from, xrange.axis.min);
                    xrange.to = Math.min(xrange.to, xrange.axis.max);
                    yrange.from = Math.max(yrange.from, yrange.axis.min);
                    yrange.to = Math.min(yrange.to, yrange.axis.max);

                    var xequal = xrange.from === xrange.to,
                        yequal = yrange.from === yrange.to;

                    if (xequal && yequal) {
                        continue;
                    }

                    // then draw
                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));
                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));
                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));
                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));

                    if (xequal || yequal) {
                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,
                            subPixel = lineWidth % 2 ? 0.5 : 0;
                        ctx.beginPath();
                        ctx.strokeStyle = m.color || options.grid.markingsColor;
                        ctx.lineWidth = lineWidth;
                        if (xequal) {
                            ctx.moveTo(xrange.to + subPixel, yrange.from);
                            ctx.lineTo(xrange.to + subPixel, yrange.to);
                        } else {
                            ctx.moveTo(xrange.from, yrange.to + subPixel);
                            ctx.lineTo(xrange.to, yrange.to + subPixel);                            
                        }
                        ctx.stroke();
                    } else {
                        ctx.fillStyle = m.color || options.grid.markingsColor;
                        ctx.fillRect(xrange.from, yrange.to,
                                     xrange.to - xrange.from,
                                     yrange.from - yrange.to);
                    }
                }
            }

            // draw the ticks
            axes = allAxes();
            bw = options.grid.borderWidth;

            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box,
                    t = axis.tickLength, x, y, xoff, yoff;
                if (!axis.show || axis.ticks.length == 0)
                    continue;

                ctx.lineWidth = 1;

                // find the edges
                if (axis.direction == "x") {
                    x = 0;
                    if (t == "full")
                        y = (axis.position == "top" ? 0 : plotHeight);
                    else
                        y = box.top - plotOffset.top + (axis.position == "top" ? box.height : 0);
                }
                else {
                    y = 0;
                    if (t == "full")
                        x = (axis.position == "left" ? 0 : plotWidth);
                    else
                        x = box.left - plotOffset.left + (axis.position == "left" ? box.width : 0);
                }

                // draw tick bar
                if (!axis.innermost) {
                    ctx.strokeStyle = axis.options.color;
                    ctx.beginPath();
                    xoff = yoff = 0;
                    if (axis.direction == "x")
                        xoff = plotWidth + 1;
                    else
                        yoff = plotHeight + 1;

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x") {
                            y = Math.floor(y) + 0.5;
                        } else {
                            x = Math.floor(x) + 0.5;
                        }
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                    ctx.stroke();
                }

                // draw ticks

                ctx.strokeStyle = axis.options.tickColor;

                ctx.beginPath();
                for (i = 0; i < axis.ticks.length; ++i) {
                    var v = axis.ticks[i].v;

                    xoff = yoff = 0;

                    if (isNaN(v) || v < axis.min || v > axis.max
                        // skip those lying on the axes if we got a border
                        || (t == "full"
                            && ((typeof bw == "object" && bw[axis.position] > 0) || bw > 0)
                            && (v == axis.min || v == axis.max)))
                        continue;

                    if (axis.direction == "x") {
                        x = axis.p2c(v);
                        yoff = t == "full" ? -plotHeight : t;

                        if (axis.position == "top")
                            yoff = -yoff;
                    }
                    else {
                        y = axis.p2c(v);
                        xoff = t == "full" ? -plotWidth : t;

                        if (axis.position == "left")
                            xoff = -xoff;
                    }

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x")
                            x = Math.floor(x) + 0.5;
                        else
                            y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                }

                ctx.stroke();
            }


            // draw border
            if (bw) {
                // If either borderWidth or borderColor is an object, then draw the border
                // line by line instead of as one rectangle
                bc = options.grid.borderColor;
                if(typeof bw == "object" || typeof bc == "object") {
                    if (typeof bw !== "object") {
                        bw = {top: bw, right: bw, bottom: bw, left: bw};
                    }
                    if (typeof bc !== "object") {
                        bc = {top: bc, right: bc, bottom: bc, left: bc};
                    }

                    if (bw.top > 0) {
                        ctx.strokeStyle = bc.top;
                        ctx.lineWidth = bw.top;
                        ctx.beginPath();
                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);
                        ctx.lineTo(plotWidth, 0 - bw.top/2);
                        ctx.stroke();
                    }

                    if (bw.right > 0) {
                        ctx.strokeStyle = bc.right;
                        ctx.lineWidth = bw.right;
                        ctx.beginPath();
                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);
                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);
                        ctx.stroke();
                    }

                    if (bw.bottom > 0) {
                        ctx.strokeStyle = bc.bottom;
                        ctx.lineWidth = bw.bottom;
                        ctx.beginPath();
                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);
                        ctx.lineTo(0, plotHeight + bw.bottom / 2);
                        ctx.stroke();
                    }

                    if (bw.left > 0) {
                        ctx.strokeStyle = bc.left;
                        ctx.lineWidth = bw.left;
                        ctx.beginPath();
                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);
                        ctx.lineTo(0- bw.left/2, 0);
                        ctx.stroke();
                    }
                }
                else {
                    ctx.lineWidth = bw;
                    ctx.strokeStyle = options.grid.borderColor;
                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);
                }
            }

            ctx.restore();
        }

        function drawAxisLabels() {

            $.each(allAxes(), function (_, axis) {
                var box = axis.box,
                    legacyStyles = axis.direction + "Axis " + axis.direction + axis.n + "Axis",
                    layer = "flot-" + axis.direction + "-axis flot-" + axis.direction + axis.n + "-axis " + legacyStyles,
                    font = axis.options.font || "flot-tick-label tickLabel",
                    tick, x, y, halign, valign;

                // Remove text before checking for axis.show and ticks.length;
                // otherwise plugins, like flot-tickrotor, that draw their own
                // tick labels will end up with both theirs and the defaults.

                surface.removeText(layer);

                if (!axis.show || axis.ticks.length == 0)
                    return;

                for (var i = 0; i < axis.ticks.length; ++i) {

                    tick = axis.ticks[i];
                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)
                        continue;

                    if (axis.direction == "x") {
                        halign = "center";
                        x = plotOffset.left + axis.p2c(tick.v);
                        if (axis.position == "bottom") {
                            y = box.top + box.padding;
                        } else {
                            y = box.top + box.height - box.padding;
                            valign = "bottom";
                        }
                    } else {
                        valign = "middle";
                        y = plotOffset.top + axis.p2c(tick.v);
                        if (axis.position == "left") {
                            x = box.left + box.width - box.padding;
                            halign = "right";
                        } else {
                            x = box.left + box.padding;
                        }
                    }

                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);
                }
            });
        }

        function drawSeries(series) {
            if (series.lines.show)
                drawSeriesLines(series);
            if (series.bars.show)
                drawSeriesBars(series);
            if (series.points.show)
                drawSeriesPoints(series);
        }

        function drawSeriesLines(series) {
            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    prevx = null, prevy = null;

                ctx.beginPath();
                for (var i = ps; i < points.length; i += ps) {
                    var x1 = points[i - ps], y1 = points[i - ps + 1],
                        x2 = points[i], y2 = points[i + 1];

                    if (x1 == null || x2 == null)
                        continue;

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min) {
                        if (y2 < axisy.min)
                            continue;   // line segment is outside
                        // compute new intersection point
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min) {
                        if (y1 < axisy.min)
                            continue;
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max) {
                        if (y2 > axisy.max)
                            continue;
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max) {
                        if (y1 > axisy.max)
                            continue;
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (x1 != prevx || y1 != prevy)
                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);

                    prevx = x2;
                    prevy = y2;
                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);
                }
                ctx.stroke();
            }

            function plotLineArea(datapoints, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),
                    i = 0, top, areaOpen = false,
                    ypos = 1, segmentStart = 0, segmentEnd = 0;

                // we process each segment in two turns, first forward
                // direction to sketch out top, then once we hit the
                // end we go backwards to sketch the bottom
                while (true) {
                    if (ps > 0 && i > points.length + ps)
                        break;

                    i += ps; // ps is negative if going backwards

                    var x1 = points[i - ps],
                        y1 = points[i - ps + ypos],
                        x2 = points[i], y2 = points[i + ypos];

                    if (areaOpen) {
                        if (ps > 0 && x1 != null && x2 == null) {
                            // at turning point
                            segmentEnd = i;
                            ps = -ps;
                            ypos = 2;
                            continue;
                        }

                        if (ps < 0 && i == segmentStart + ps) {
                            // done with the reverse sweep
                            ctx.fill();
                            areaOpen = false;
                            ps = -ps;
                            ypos = 1;
                            i = segmentStart = segmentEnd + ps;
                            continue;
                        }
                    }

                    if (x1 == null || x2 == null)
                        continue;

                    // clip x values

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (!areaOpen) {
                        // open area
                        ctx.beginPath();
                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));
                        areaOpen = true;
                    }

                    // now first check the case where both is outside
                    if (y1 >= axisy.max && y2 >= axisy.max) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));
                        continue;
                    }
                    else if (y1 <= axisy.min && y2 <= axisy.min) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));
                        continue;
                    }

                    // else it's a bit more complicated, there might
                    // be a flat maxed out rectangle first, then a
                    // triangular cutout or reverse; to find these
                    // keep track of the current x values
                    var x1old = x1, x2old = x2;

                    // clip the y values, without shortcutting, we
                    // go through all cases in turn

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // if the x value was changed we got a rectangle
                    // to fill
                    if (x1 != x1old) {
                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));
                        // it goes to (x1, y1), but we fill that below
                    }

                    // fill triangular section, this sometimes result
                    // in redundant points if (x1, y1) hasn't changed
                    // from previous line to, but we just ignore that
                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));
                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));

                    // fill the other rectangle if it's there
                    if (x2 != x2old) {
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));
                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));
                    }
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);
            ctx.lineJoin = "round";

            var lw = series.lines.lineWidth,
                sw = series.shadowSize;
            // FIXME: consider another form of shadow when filling is turned on
            if (lw > 0 && sw > 0) {
                // draw shadow as a thick and thin line with transparency
                ctx.lineWidth = sw;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                // position shadow at angle from the mid of line
                var angle = Math.PI/18;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);
                ctx.lineWidth = sw/2;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);
            if (fillStyle) {
                ctx.fillStyle = fillStyle;
                plotLineArea(series.datapoints, series.xaxis, series.yaxis);
            }

            if (lw > 0)
                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function drawSeriesPoints(series) {
            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    var x = points[i], y = points[i + 1];
                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                        continue;

                    ctx.beginPath();
                    x = axisx.p2c(x);
                    y = axisy.p2c(y) + offset;
                    if (symbol == "circle")
                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    else
                        symbol(ctx, x, y, radius, shadow);
                    ctx.closePath();

                    if (fillStyle) {
                        ctx.fillStyle = fillStyle;
                        ctx.fill();
                    }
                    ctx.stroke();
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            var lw = series.points.lineWidth,
                sw = series.shadowSize,
                radius = series.points.radius,
                symbol = series.points.symbol;

            // If the user sets the line width to 0, we change it to a very 
            // small value. A line width of 0 seems to force the default of 1.
            // Doing the conditional here allows the shadow setting to still be 
            // optional even with a lineWidth of 0.

            if( lw == 0 )
                lw = 0.0001;

            if (lw > 0 && sw > 0) {
                // draw shadow in two steps
                var w = sw / 2;
                ctx.lineWidth = w;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                plotPoints(series.datapoints, radius, null, w + w/2, true,
                           series.xaxis, series.yaxis, symbol);

                ctx.strokeStyle = "rgba(0,0,0,0.2)";
                plotPoints(series.datapoints, radius, null, w/2, true,
                           series.xaxis, series.yaxis, symbol);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            plotPoints(series.datapoints, radius,
                       getFillStyle(series.points, series.color), 0, false,
                       series.xaxis, series.yaxis, symbol);
            ctx.restore();
        }

        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {
            var left, right, bottom, top,
                drawLeft, drawRight, drawTop, drawBottom,
                tmp;

            // in horizontal mode, we start the bar from the left
            // instead of from the bottom so it appears to be
            // horizontal rather than vertical
            if (horizontal) {
                drawBottom = drawRight = drawTop = true;
                drawLeft = false;
                left = b;
                right = x;
                top = y + barLeft;
                bottom = y + barRight;

                // account for negative bars
                if (right < left) {
                    tmp = right;
                    right = left;
                    left = tmp;
                    drawLeft = true;
                    drawRight = false;
                }
            }
            else {
                drawLeft = drawRight = drawTop = true;
                drawBottom = false;
                left = x + barLeft;
                right = x + barRight;
                bottom = b;
                top = y;

                // account for negative bars
                if (top < bottom) {
                    tmp = top;
                    top = bottom;
                    bottom = tmp;
                    drawBottom = true;
                    drawTop = false;
                }
            }

            // clip
            if (right < axisx.min || left > axisx.max ||
                top < axisy.min || bottom > axisy.max)
                return;

            if (left < axisx.min) {
                left = axisx.min;
                drawLeft = false;
            }

            if (right > axisx.max) {
                right = axisx.max;
                drawRight = false;
            }

            if (bottom < axisy.min) {
                bottom = axisy.min;
                drawBottom = false;
            }

            if (top > axisy.max) {
                top = axisy.max;
                drawTop = false;
            }

            left = axisx.p2c(left);
            bottom = axisy.p2c(bottom);
            right = axisx.p2c(right);
            top = axisy.p2c(top);

            // fill the bar
            if (fillStyleCallback) {
                c.fillStyle = fillStyleCallback(bottom, top);
                c.fillRect(left, top, right - left, bottom - top)
            }

            // draw outline
            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {
                c.beginPath();

                // FIXME: inline moveTo is buggy with excanvas
                c.moveTo(left, bottom);
                if (drawLeft)
                    c.lineTo(left, top);
                else
                    c.moveTo(left, top);
                if (drawTop)
                    c.lineTo(right, top);
                else
                    c.moveTo(right, top);
                if (drawRight)
                    c.lineTo(right, bottom);
                else
                    c.moveTo(right, bottom);
                if (drawBottom)
                    c.lineTo(left, bottom);
                else
                    c.moveTo(left, bottom);
                c.stroke();
            }
        }

        function drawSeriesBars(series) {
            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    if (points[i] == null)
                        continue;
                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // FIXME: figure out a way to add shadows (for instance along the right edge)
            ctx.lineWidth = series.bars.lineWidth;
            ctx.strokeStyle = series.color;

            var barLeft;

            switch (series.bars.align) {
                case "left":
                    barLeft = 0;
                    break;
                case "right":
                    barLeft = -series.bars.barWidth;
                    break;
                default:
                    barLeft = -series.bars.barWidth / 2;
            }

            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;
            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function getFillStyle(filloptions, seriesColor, bottom, top) {
            var fill = filloptions.fill;
            if (!fill)
                return null;

            if (filloptions.fillColor)
                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);

            var c = $.color.parse(seriesColor);
            c.a = typeof fill == "number" ? fill : 0.4;
            c.normalize();
            return c.toString();
        }

        function insertLegend() {

            if (options.legend.container != null) {
                $(options.legend.container).html("");
            } else {
                placeholder.find(".legend").remove();
            }

            if (!options.legend.show) {
                return;
            }

            var fragments = [], entries = [], rowStarted = false,
                lf = options.legend.labelFormatter, s, label;

            // Build a list of legend entries, with each having a label and a color

            for (var i = 0; i < series.length; ++i) {
                s = series[i];
                if (s.label) {
                    label = lf ? lf(s.label, s) : s.label;
                    if (label) {
                        entries.push({
                            label: label,
                            color: s.color
                        });
                    }
                }
            }

            // Sort the legend using either the default or a custom comparator

            if (options.legend.sorted) {
                if ($.isFunction(options.legend.sorted)) {
                    entries.sort(options.legend.sorted);
                } else if (options.legend.sorted == "reverse") {
                	entries.reverse();
                } else {
                    var ascending = options.legend.sorted != "descending";
                    entries.sort(function(a, b) {
                        return a.label == b.label ? 0 : (
                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR
                        );
                    });
                }
            }

            // Generate markup for the list of entries, in their final order

            for (var i = 0; i < entries.length; ++i) {

                var entry = entries[i];

                if (i % options.legend.noColumns == 0) {
                    if (rowStarted)
                        fragments.push('</tr>');
                    fragments.push('<tr>');
                    rowStarted = true;
                }

                fragments.push(
                    '<td class="legendColorBox"><div style="border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden"></div></div></td>' +
                    '<td class="legendLabel">' + entry.label + '</td>'
                );
            }

            if (rowStarted)
                fragments.push('</tr>');

            if (fragments.length == 0)
                return;

            var table = '<table style="font-size:smaller;color:' + options.grid.color + '">' + fragments.join("") + '</table>';
            if (options.legend.container != null)
                $(options.legend.container).html(table);
            else {
                var pos = "",
                    p = options.legend.position,
                    m = options.legend.margin;
                if (m[0] == null)
                    m = [m, m];
                if (p.charAt(0) == "n")
                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';
                else if (p.charAt(0) == "s")
                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';
                if (p.charAt(1) == "e")
                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';
                else if (p.charAt(1) == "w")
                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';
                var legend = $('<div class="legend">' + table.replace('style="', 'style="position:absolute;' + pos +';') + '</div>').appendTo(placeholder);
                if (options.legend.backgroundOpacity != 0.0) {
                    // put in the transparent background
                    // separately to avoid blended labels and
                    // label boxes
                    var c = options.legend.backgroundColor;
                    if (c == null) {
                        c = options.grid.backgroundColor;
                        if (c && typeof c == "string")
                            c = $.color.parse(c);
                        else
                            c = $.color.extract(legend, 'background-color');
                        c.a = 1;
                        c = c.toString();
                    }
                    var div = legend.children();
                    $('<div style="position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);
                }
            }
        }


        // interactive features

        var highlights = [],
            redrawTimeout = null;

        // returns the data item the mouse is over, or null if none is found
        function findNearbyItem(mouseX, mouseY, seriesFilter) {
            var maxDistance = options.grid.mouseActiveRadius,
                smallestDistance = maxDistance * maxDistance + 1,
                item = null, foundPoint = false, i, j, ps;

            for (i = series.length - 1; i >= 0; --i) {
                if (!seriesFilter(series[i]))
                    continue;

                var s = series[i],
                    axisx = s.xaxis,
                    axisy = s.yaxis,
                    points = s.datapoints.points,
                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster
                    my = axisy.c2p(mouseY),
                    maxx = maxDistance / axisx.scale,
                    maxy = maxDistance / axisy.scale;

                ps = s.datapoints.pointsize;
                // with inverse transforms, we can't use the maxx/maxy
                // optimization, sadly
                if (axisx.options.inverseTransform)
                    maxx = Number.MAX_VALUE;
                if (axisy.options.inverseTransform)
                    maxy = Number.MAX_VALUE;

                if (s.lines.show || s.points.show) {
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1];
                        if (x == null)
                            continue;

                        // For points and lines, the cursor must be within a
                        // certain distance to the data point
                        if (x - mx > maxx || x - mx < -maxx ||
                            y - my > maxy || y - my < -maxy)
                            continue;

                        // We have to calculate distances in pixels, not in
                        // data units, because the scales of the axes may be different
                        var dx = Math.abs(axisx.p2c(x) - mouseX),
                            dy = Math.abs(axisy.p2c(y) - mouseY),
                            dist = dx * dx + dy * dy; // we save the sqrt

                        // use <= to ensure last point takes precedence
                        // (last generally means on top of)
                        if (dist < smallestDistance) {
                            smallestDistance = dist;
                            item = [i, j / ps];
                        }
                    }
                }

                if (s.bars.show && !item) { // no other point can be nearby

                    var barLeft, barRight;

                    switch (s.bars.align) {
                        case "left":
                            barLeft = 0;
                            break;
                        case "right":
                            barLeft = -s.bars.barWidth;
                            break;
                        default:
                            barLeft = -s.bars.barWidth / 2;
                    }

                    barRight = barLeft + s.bars.barWidth;

                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1], b = points[j + 2];
                        if (x == null)
                            continue;

                        // for a bar graph, the cursor must be inside the bar
                        if (series[i].bars.horizontal ?
                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&
                             my >= y + barLeft && my <= y + barRight) :
                            (mx >= x + barLeft && mx <= x + barRight &&
                             my >= Math.min(b, y) && my <= Math.max(b, y)))
                                item = [i, j / ps];
                    }
                }
            }

            if (item) {
                i = item[0];
                j = item[1];
                ps = series[i].datapoints.pointsize;

                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),
                         dataIndex: j,
                         series: series[i],
                         seriesIndex: i };
            }

            return null;
        }

        function onMouseMove(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return s["hoverable"] != false; });
        }

        function onMouseLeave(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return false; });
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e,
                                   function (s) { return s["clickable"] != false; });
        }

        // trigger click or hover event (they send the same parameters
        // so we share their code)
        function triggerClickHoverEvent(eventname, event, seriesFilter) {
            var offset = eventHolder.offset(),
                canvasX = event.pageX - offset.left - plotOffset.left,
                canvasY = event.pageY - offset.top - plotOffset.top,
            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });

            pos.pageX = event.pageX;
            pos.pageY = event.pageY;

            var item = findNearbyItem(canvasX, canvasY, seriesFilter);

            if (item) {
                // fill in mouse pos for any listeners out there
                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);
                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);
            }

            if (options.grid.autoHighlight) {
                // clear auto-highlights
                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname &&
                        !(item && h.series == item.series &&
                          h.point[0] == item.datapoint[0] &&
                          h.point[1] == item.datapoint[1]))
                        unhighlight(h.series, h.point);
                }

                if (item)
                    highlight(item.series, item.datapoint, eventname);
            }

            placeholder.trigger(eventname, [ pos, item ]);
        }

        function triggerRedrawOverlay() {
            var t = options.interaction.redrawOverlayInterval;
            if (t == -1) {      // skip event queue
                drawOverlay();
                return;
            }

            if (!redrawTimeout)
                redrawTimeout = setTimeout(drawOverlay, t);
        }

        function drawOverlay() {
            redrawTimeout = null;

            // draw highlights
            octx.save();
            overlay.clear();
            octx.translate(plotOffset.left, plotOffset.top);

            var i, hi;
            for (i = 0; i < highlights.length; ++i) {
                hi = highlights[i];

                if (hi.series.bars.show)
                    drawBarHighlight(hi.series, hi.point);
                else
                    drawPointHighlight(hi.series, hi.point);
            }
            octx.restore();

            executeHooks(hooks.drawOverlay, [octx]);
        }

        function highlight(s, point, auto) {
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i == -1) {
                highlights.push({ series: s, point: point, auto: auto });

                triggerRedrawOverlay();
            }
            else if (!auto)
                highlights[i].auto = false;
        }

        function unhighlight(s, point) {
            if (s == null && point == null) {
                highlights = [];
                triggerRedrawOverlay();
                return;
            }

            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i != -1) {
                highlights.splice(i, 1);

                triggerRedrawOverlay();
            }
        }

        function indexOfHighlight(s, p) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s && h.point[0] == p[0]
                    && h.point[1] == p[1])
                    return i;
            }
            return -1;
        }

        function drawPointHighlight(series, point) {
            var x = point[0], y = point[1],
                axisx = series.xaxis, axisy = series.yaxis,
                highlightColor = (typeof series.highlightColor === "string") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();

            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                return;

            var pointRadius = series.points.radius + series.points.lineWidth / 2;
            octx.lineWidth = pointRadius;
            octx.strokeStyle = highlightColor;
            var radius = 1.5 * pointRadius;
            x = axisx.p2c(x);
            y = axisy.p2c(y);

            octx.beginPath();
            if (series.points.symbol == "circle")
                octx.arc(x, y, radius, 0, 2 * Math.PI, false);
            else
                series.points.symbol(octx, x, y, radius, false);
            octx.closePath();
            octx.stroke();
        }

        function drawBarHighlight(series, point) {
            var highlightColor = (typeof series.highlightColor === "string") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),
                fillStyle = highlightColor,
                barLeft;

            switch (series.bars.align) {
                case "left":
                    barLeft = 0;
                    break;
                case "right":
                    barLeft = -series.bars.barWidth;
                    break;
                default:
                    barLeft = -series.bars.barWidth / 2;
            }

            octx.lineWidth = series.bars.lineWidth;
            octx.strokeStyle = highlightColor;

            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,
                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);
        }

        function getColorOrGradient(spec, bottom, top, defaultColor) {
            if (typeof spec == "string")
                return spec;
            else {
                // assume this is a gradient spec; IE currently only
                // supports a simple vertical gradient properly, so that's
                // what we support too
                var gradient = ctx.createLinearGradient(0, top, 0, bottom);

                for (var i = 0, l = spec.colors.length; i < l; ++i) {
                    var c = spec.colors[i];
                    if (typeof c != "string") {
                        var co = $.color.parse(defaultColor);
                        if (c.brightness != null)
                            co = co.scale('rgb', c.brightness);
                        if (c.opacity != null)
                            co.a *= c.opacity;
                        c = co.toString();
                    }
                    gradient.addColorStop(i / (l - 1), c);
                }

                return gradient;
            }
        }
    }

    // Add the plot function to the top level of the jQuery object

    $.plot = function(placeholder, data, options) {
        //var t0 = new Date();
        var plot = new Plot($(placeholder), data, options, $.plot.plugins);
        //(window.console ? console.log : alert)("time used (msecs): " + ((new Date()).getTime() - t0.getTime()));
        return plot;
    };

    $.plot.version = "0.8.3";

    $.plot.plugins = [];

    // Also add the plot function as a chainable property

    $.fn.plot = function(data, options) {
        return this.each(function() {
            $.plot(this, data, options);
        });
    };

    // round to nearby lower multiple of base
    function floorInBase(n, base) {
        return base * Math.floor(n / base);
    }

})(jQuery);

/* Flot plugin for automatically redrawing plots as the placeholder resizes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

It works by listening for changes on the placeholder div (through the jQuery
resize event plugin) - if the size changes, it will redraw the plot.

There are no options. If you need to disable the plugin for some plots, you
can just fix the size of their placeholders.

*/

/* Inline dependency:
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,e,t){"$:nomunge";var i=[],n=$.resize=$.extend($.resize,{}),a,r=false,s="setTimeout",u="resize",m=u+"-special-event",o="pendingDelay",l="activeDelay",f="throttleWindow";n[o]=200;n[l]=20;n[f]=true;$.event.special[u]={setup:function(){if(!n[f]&&this[s]){return false}var e=$(this);i.push(this);e.data(m,{w:e.width(),h:e.height()});if(i.length===1){a=t;h()}},teardown:function(){if(!n[f]&&this[s]){return false}var e=$(this);for(var t=i.length-1;t>=0;t--){if(i[t]==this){i.splice(t,1);break}}e.removeData(m);if(!i.length){if(r){cancelAnimationFrame(a)}else{clearTimeout(a)}a=null}},add:function(e){if(!n[f]&&this[s]){return false}var i;function a(e,n,a){var r=$(this),s=r.data(m)||{};s.w=n!==t?n:r.width();s.h=a!==t?a:r.height();i.apply(this,arguments)}if($.isFunction(e)){i=e;return a}else{i=e.handler;e.handler=a}}};function h(t){if(r===true){r=t||1}for(var s=i.length-1;s>=0;s--){var l=$(i[s]);if(l[0]==e||l.is(":visible")){var f=l.width(),c=l.height(),d=l.data(m);if(d&&(f!==d.w||c!==d.h)){l.trigger(u,[d.w=f,d.h=c]);r=t||true}}else{d=l.data(m);d.w=0;d.h=0}}if(a!==null){if(r&&(t==null||t-r<1e3)){a=e.requestAnimationFrame(h)}else{a=setTimeout(h,n[o]);r=false}}}if(!e.requestAnimationFrame){e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,i){return e.setTimeout(function(){t((new Date).getTime())},n[l])}}()}if(!e.cancelAnimationFrame){e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}()}})(jQuery,this);

(function ($) {
    var options = { }; // no options

    function init(plot) {
        function onResize() {
            var placeholder = plot.getPlaceholder();

            // somebody might have hidden us and we can't plot
            // when we don't have the dimensions
            if (placeholder.width() == 0 || placeholder.height() == 0)
                return;

            plot.resize();
            plot.setupGrid();
            plot.draw();
        }
        
        function bindEvents(plot, eventHolder) {
            plot.getPlaceholder().resize(onResize);
        }

        function shutdown(plot, eventHolder) {
            plot.getPlaceholder().unbind("resize", onResize);
        }
        
        plot.hooks.bindEvents.push(bindEvents);
        plot.hooks.shutdown.push(shutdown);
    }
    
    $.plot.plugins.push({
        init: init,
        options: options,
        name: 'resize',
        version: '1.0'
    });
})(jQuery);

/* Flot plugin for rendering pie charts.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

The plugin assumes that each series has a single data value, and that each
value is a positive integer or zero.  Negative numbers don't make sense for a
pie chart, and have unpredictable results.  The values do NOT need to be
passed in as percentages; the plugin will calculate the total and per-slice
percentages internally.

* Created by Brian Medendorp

* Updated with contributions from btburnett3, Anthony Aragues and Xavi Ivars

The plugin supports these options:

	series: {
		pie: {
			show: true/false
			radius: 0-1 for percentage of fullsize, or a specified pixel length, or 'auto'
			innerRadius: 0-1 for percentage of fullsize or a specified pixel length, for creating a donut effect
			startAngle: 0-2 factor of PI used for starting angle (in radians) i.e 3/2 starts at the top, 0 and 2 have the same result
			tilt: 0-1 for percentage to tilt the pie, where 1 is no tilt, and 0 is completely flat (nothing will show)
			offset: {
				top: integer value to move the pie up or down
				left: integer value to move the pie left or right, or 'auto'
			},
			stroke: {
				color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#FFF')
				width: integer pixel width of the stroke
			},
			label: {
				show: true/false, or 'auto'
				formatter:  a user-defined function that modifies the text/style of the label text
				radius: 0-1 for percentage of fullsize, or a specified pixel length
				background: {
					color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#000')
					opacity: 0-1
				},
				threshold: 0-1 for the percentage value at which to hide labels (if they're too small)
			},
			combine: {
				threshold: 0-1 for the percentage value at which to combine slices (if they're too small)
				color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#CCC'), if null, the plugin will automatically use the color of the first slice to be combined
				label: any text value of what the combined slice should be labeled
			}
			highlight: {
				opacity: 0-1
			}
		}
	}

More detail and specific examples can be found in the included HTML file.

*/

(function($) {

	// Maximum redraw attempts when fitting labels within the plot

	var REDRAW_ATTEMPTS = 10;

	// Factor by which to shrink the pie when fitting labels within the plot

	var REDRAW_SHRINK = 0.95;

	function init(plot) {

		var canvas = null,
			target = null,
			options = null,
			maxRadius = null,
			centerLeft = null,
			centerTop = null,
			processed = false,
			ctx = null;

		// interactive variables

		var highlights = [];

		// add hook to determine if pie plugin in enabled, and then perform necessary operations

		plot.hooks.processOptions.push(function(plot, options) {
			if (options.series.pie.show) {

				options.grid.show = false;

				// set labels.show

				if (options.series.pie.label.show == "auto") {
					if (options.legend.show) {
						options.series.pie.label.show = false;
					} else {
						options.series.pie.label.show = true;
					}
				}

				// set radius

				if (options.series.pie.radius == "auto") {
					if (options.series.pie.label.show) {
						options.series.pie.radius = 3/4;
					} else {
						options.series.pie.radius = 1;
					}
				}

				// ensure sane tilt

				if (options.series.pie.tilt > 1) {
					options.series.pie.tilt = 1;
				} else if (options.series.pie.tilt < 0) {
					options.series.pie.tilt = 0;
				}
			}
		});

		plot.hooks.bindEvents.push(function(plot, eventHolder) {
			var options = plot.getOptions();
			if (options.series.pie.show) {
				if (options.grid.hoverable) {
					eventHolder.unbind("mousemove").mousemove(onMouseMove);
				}
				if (options.grid.clickable) {
					eventHolder.unbind("click").click(onClick);
				}
			}
		});

		plot.hooks.processDatapoints.push(function(plot, series, data, datapoints) {
			var options = plot.getOptions();
			if (options.series.pie.show) {
				processDatapoints(plot, series, data, datapoints);
			}
		});

		plot.hooks.drawOverlay.push(function(plot, octx) {
			var options = plot.getOptions();
			if (options.series.pie.show) {
				drawOverlay(plot, octx);
			}
		});

		plot.hooks.draw.push(function(plot, newCtx) {
			var options = plot.getOptions();
			if (options.series.pie.show) {
				draw(plot, newCtx);
			}
		});

		function processDatapoints(plot, series, datapoints) {
			if (!processed)	{
				processed = true;
				canvas = plot.getCanvas();
				target = $(canvas).parent();
				options = plot.getOptions();
				plot.setData(combine(plot.getData()));
			}
		}

		function combine(data) {

			var total = 0,
				combined = 0,
				numCombined = 0,
				color = options.series.pie.combine.color,
				newdata = [];

			// Fix up the raw data from Flot, ensuring the data is numeric

			for (var i = 0; i < data.length; ++i) {

				var value = data[i].data;

				// If the data is an array, we'll assume that it's a standard
				// Flot x-y pair, and are concerned only with the second value.

				// Note how we use the original array, rather than creating a
				// new one; this is more efficient and preserves any extra data
				// that the user may have stored in higher indexes.

				if ($.isArray(value) && value.length == 1) {
    				value = value[0];
				}

				if ($.isArray(value)) {
					// Equivalent to $.isNumeric() but compatible with jQuery < 1.7
					if (!isNaN(parseFloat(value[1])) && isFinite(value[1])) {
						value[1] = +value[1];
					} else {
						value[1] = 0;
					}
				} else if (!isNaN(parseFloat(value)) && isFinite(value)) {
					value = [1, +value];
				} else {
					value = [1, 0];
				}

				data[i].data = [value];
			}

			// Sum up all the slices, so we can calculate percentages for each

			for (var i = 0; i < data.length; ++i) {
				total += data[i].data[0][1];
			}

			// Count the number of slices with percentages below the combine
			// threshold; if it turns out to be just one, we won't combine.

			for (var i = 0; i < data.length; ++i) {
				var value = data[i].data[0][1];
				if (value / total <= options.series.pie.combine.threshold) {
					combined += value;
					numCombined++;
					if (!color) {
						color = data[i].color;
					}
				}
			}

			for (var i = 0; i < data.length; ++i) {
				var value = data[i].data[0][1];
				if (numCombined < 2 || value / total > options.series.pie.combine.threshold) {
					newdata.push(
						$.extend(data[i], {     /* extend to allow keeping all other original data values
						                           and using them e.g. in labelFormatter. */
							data: [[1, value]],
							color: data[i].color,
							label: data[i].label,
							angle: value * Math.PI * 2 / total,
							percent: value / (total / 100)
						})
					);
				}
			}

			if (numCombined > 1) {
				newdata.push({
					data: [[1, combined]],
					color: color,
					label: options.series.pie.combine.label,
					angle: combined * Math.PI * 2 / total,
					percent: combined / (total / 100)
				});
			}

			return newdata;
		}

		function draw(plot, newCtx) {

			if (!target) {
				return; // if no series were passed
			}

			var canvasWidth = plot.getPlaceholder().width(),
				canvasHeight = plot.getPlaceholder().height(),
				legendWidth = target.children().filter(".legend").children().width() || 0;

			ctx = newCtx;

			// WARNING: HACK! REWRITE THIS CODE AS SOON AS POSSIBLE!

			// When combining smaller slices into an 'other' slice, we need to
			// add a new series.  Since Flot gives plugins no way to modify the
			// list of series, the pie plugin uses a hack where the first call
			// to processDatapoints results in a call to setData with the new
			// list of series, then subsequent processDatapoints do nothing.

			// The plugin-global 'processed' flag is used to control this hack;
			// it starts out false, and is set to true after the first call to
			// processDatapoints.

			// Unfortunately this turns future setData calls into no-ops; they
			// call processDatapoints, the flag is true, and nothing happens.

			// To fix this we'll set the flag back to false here in draw, when
			// all series have been processed, so the next sequence of calls to
			// processDatapoints once again starts out with a slice-combine.
			// This is really a hack; in 0.9 we need to give plugins a proper
			// way to modify series before any processing begins.

			processed = false;

			// calculate maximum radius and center point

			maxRadius =  Math.min(canvasWidth, canvasHeight / options.series.pie.tilt) / 2;
			centerTop = canvasHeight / 2 + options.series.pie.offset.top;
			centerLeft = canvasWidth / 2;

			if (options.series.pie.offset.left == "auto") {
				if (options.legend.position.match("w")) {
					centerLeft += legendWidth / 2;
				} else {
					centerLeft -= legendWidth / 2;
				}
				if (centerLeft < maxRadius) {
					centerLeft = maxRadius;
				} else if (centerLeft > canvasWidth - maxRadius) {
					centerLeft = canvasWidth - maxRadius;
				}
			} else {
				centerLeft += options.series.pie.offset.left;
			}

			var slices = plot.getData(),
				attempts = 0;

			// Keep shrinking the pie's radius until drawPie returns true,
			// indicating that all the labels fit, or we try too many times.

			do {
				if (attempts > 0) {
					maxRadius *= REDRAW_SHRINK;
				}
				attempts += 1;
				clear();
				if (options.series.pie.tilt <= 0.8) {
					drawShadow();
				}
			} while (!drawPie() && attempts < REDRAW_ATTEMPTS)

			if (attempts >= REDRAW_ATTEMPTS) {
				clear();
				target.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>");
			}

			if (plot.setSeries && plot.insertLegend) {
				plot.setSeries(slices);
				plot.insertLegend();
			}

			// we're actually done at this point, just defining internal functions at this point

			function clear() {
				ctx.clearRect(0, 0, canvasWidth, canvasHeight);
				target.children().filter(".pieLabel, .pieLabelBackground").remove();
			}

			function drawShadow() {

				var shadowLeft = options.series.pie.shadow.left;
				var shadowTop = options.series.pie.shadow.top;
				var edge = 10;
				var alpha = options.series.pie.shadow.alpha;
				var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

				if (radius >= canvasWidth / 2 - shadowLeft || radius * options.series.pie.tilt >= canvasHeight / 2 - shadowTop || radius <= edge) {
					return;	// shadow would be outside canvas, so don't draw it
				}

				ctx.save();
				ctx.translate(shadowLeft,shadowTop);
				ctx.globalAlpha = alpha;
				ctx.fillStyle = "#000";

				// center and rotate to starting position

				ctx.translate(centerLeft,centerTop);
				ctx.scale(1, options.series.pie.tilt);

				//radius -= edge;

				for (var i = 1; i <= edge; i++) {
					ctx.beginPath();
					ctx.arc(0, 0, radius, 0, Math.PI * 2, false);
					ctx.fill();
					radius -= i;
				}

				ctx.restore();
			}

			function drawPie() {

				var startAngle = Math.PI * options.series.pie.startAngle;
				var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

				// center and rotate to starting position

				ctx.save();
				ctx.translate(centerLeft,centerTop);
				ctx.scale(1, options.series.pie.tilt);
				//ctx.rotate(startAngle); // start at top; -- This doesn't work properly in Opera

				// draw slices

				ctx.save();
				var currentAngle = startAngle;
				for (var i = 0; i < slices.length; ++i) {
					slices[i].startAngle = currentAngle;
					drawSlice(slices[i].angle, slices[i].color, true);
				}
				ctx.restore();

				// draw slice outlines

				if (options.series.pie.stroke.width > 0) {
					ctx.save();
					ctx.lineWidth = options.series.pie.stroke.width;
					currentAngle = startAngle;
					for (var i = 0; i < slices.length; ++i) {
						drawSlice(slices[i].angle, options.series.pie.stroke.color, false);
					}
					ctx.restore();
				}

				// draw donut hole

				drawDonutHole(ctx);

				ctx.restore();

				// Draw the labels, returning true if they fit within the plot

				if (options.series.pie.label.show) {
					return drawLabels();
				} else return true;

				function drawSlice(angle, color, fill) {

					if (angle <= 0 || isNaN(angle)) {
						return;
					}

					if (fill) {
						ctx.fillStyle = color;
					} else {
						ctx.strokeStyle = color;
						ctx.lineJoin = "round";
					}

					ctx.beginPath();
					if (Math.abs(angle - Math.PI * 2) > 0.000000001) {
						ctx.moveTo(0, 0); // Center of the pie
					}

					//ctx.arc(0, 0, radius, 0, angle, false); // This doesn't work properly in Opera
					ctx.arc(0, 0, radius,currentAngle, currentAngle + angle / 2, false);
					ctx.arc(0, 0, radius,currentAngle + angle / 2, currentAngle + angle, false);
					ctx.closePath();
					//ctx.rotate(angle); // This doesn't work properly in Opera
					currentAngle += angle;

					if (fill) {
						ctx.fill();
					} else {
						ctx.stroke();
					}
				}

				function drawLabels() {

					var currentAngle = startAngle;
					var radius = options.series.pie.label.radius > 1 ? options.series.pie.label.radius : maxRadius * options.series.pie.label.radius;

					for (var i = 0; i < slices.length; ++i) {
						if (slices[i].percent >= options.series.pie.label.threshold * 100) {
							if (!drawLabel(slices[i], currentAngle, i)) {
								return false;
							}
						}
						currentAngle += slices[i].angle;
					}

					return true;

					function drawLabel(slice, startAngle, index) {

						if (slice.data[0][1] == 0) {
							return true;
						}

						// format label text

						var lf = options.legend.labelFormatter, text, plf = options.series.pie.label.formatter;

						if (lf) {
							text = lf(slice.label, slice);
						} else {
							text = slice.label;
						}

						if (plf) {
							text = plf(text, slice);
						}

						var halfAngle = ((startAngle + slice.angle) + startAngle) / 2;
						var x = centerLeft + Math.round(Math.cos(halfAngle) * radius);
						var y = centerTop + Math.round(Math.sin(halfAngle) * radius) * options.series.pie.tilt;

						var html = "<span class='pieLabel' id='pieLabel" + index + "' style='position:absolute;top:" + y + "px;left:" + x + "px;'>" + text + "</span>";
						target.append(html);

						var label = target.children("#pieLabel" + index);
						var labelTop = (y - label.height() / 2);
						var labelLeft = (x - label.width() / 2);

						label.css("top", labelTop);
						label.css("left", labelLeft);

						// check to make sure that the label is not outside the canvas

						if (0 - labelTop > 0 || 0 - labelLeft > 0 || canvasHeight - (labelTop + label.height()) < 0 || canvasWidth - (labelLeft + label.width()) < 0) {
							return false;
						}

						if (options.series.pie.label.background.opacity != 0) {

							// put in the transparent background separately to avoid blended labels and label boxes

							var c = options.series.pie.label.background.color;

							if (c == null) {
								c = slice.color;
							}

							var pos = "top:" + labelTop + "px;left:" + labelLeft + "px;";
							$("<div class='pieLabelBackground' style='position:absolute;width:" + label.width() + "px;height:" + label.height() + "px;" + pos + "background-color:" + c + ";'></div>")
								.css("opacity", options.series.pie.label.background.opacity)
								.insertBefore(label);
						}

						return true;
					} // end individual label function
				} // end drawLabels function
			} // end drawPie function
		} // end draw function

		// Placed here because it needs to be accessed from multiple locations

		function drawDonutHole(layer) {
			if (options.series.pie.innerRadius > 0) {

				// subtract the center

				layer.save();
				var innerRadius = options.series.pie.innerRadius > 1 ? options.series.pie.innerRadius : maxRadius * options.series.pie.innerRadius;
				layer.globalCompositeOperation = "destination-out"; // this does not work with excanvas, but it will fall back to using the stroke color
				layer.beginPath();
				layer.fillStyle = options.series.pie.stroke.color;
				layer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);
				layer.fill();
				layer.closePath();
				layer.restore();

				// add inner stroke

				layer.save();
				layer.beginPath();
				layer.strokeStyle = options.series.pie.stroke.color;
				layer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);
				layer.stroke();
				layer.closePath();
				layer.restore();

				// TODO: add extra shadow inside hole (with a mask) if the pie is tilted.
			}
		}

		//-- Additional Interactive related functions --

		function isPointInPoly(poly, pt) {
			for(var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)
				((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) || (poly[j][1] <= pt[1] && pt[1]< poly[i][1]))
				&& (pt[0] < (poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1]) / (poly[j][1] - poly[i][1]) + poly[i][0])
				&& (c = !c);
			return c;
		}

		function findNearbySlice(mouseX, mouseY) {

			var slices = plot.getData(),
				options = plot.getOptions(),
				radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius,
				x, y;

			for (var i = 0; i < slices.length; ++i) {

				var s = slices[i];

				if (s.pie.show) {

					ctx.save();
					ctx.beginPath();
					ctx.moveTo(0, 0); // Center of the pie
					//ctx.scale(1, options.series.pie.tilt);	// this actually seems to break everything when here.
					ctx.arc(0, 0, radius, s.startAngle, s.startAngle + s.angle / 2, false);
					ctx.arc(0, 0, radius, s.startAngle + s.angle / 2, s.startAngle + s.angle, false);
					ctx.closePath();
					x = mouseX - centerLeft;
					y = mouseY - centerTop;

					if (ctx.isPointInPath) {
						if (ctx.isPointInPath(mouseX - centerLeft, mouseY - centerTop)) {
							ctx.restore();
							return {
								datapoint: [s.percent, s.data],
								dataIndex: 0,
								series: s,
								seriesIndex: i
							};
						}
					} else {

						// excanvas for IE doesn;t support isPointInPath, this is a workaround.

						var p1X = radius * Math.cos(s.startAngle),
							p1Y = radius * Math.sin(s.startAngle),
							p2X = radius * Math.cos(s.startAngle + s.angle / 4),
							p2Y = radius * Math.sin(s.startAngle + s.angle / 4),
							p3X = radius * Math.cos(s.startAngle + s.angle / 2),
							p3Y = radius * Math.sin(s.startAngle + s.angle / 2),
							p4X = radius * Math.cos(s.startAngle + s.angle / 1.5),
							p4Y = radius * Math.sin(s.startAngle + s.angle / 1.5),
							p5X = radius * Math.cos(s.startAngle + s.angle),
							p5Y = radius * Math.sin(s.startAngle + s.angle),
							arrPoly = [[0, 0], [p1X, p1Y], [p2X, p2Y], [p3X, p3Y], [p4X, p4Y], [p5X, p5Y]],
							arrPoint = [x, y];

						// TODO: perhaps do some mathmatical trickery here with the Y-coordinate to compensate for pie tilt?

						if (isPointInPoly(arrPoly, arrPoint)) {
							ctx.restore();
							return {
								datapoint: [s.percent, s.data],
								dataIndex: 0,
								series: s,
								seriesIndex: i
							};
						}
					}

					ctx.restore();
				}
			}

			return null;
		}

		function onMouseMove(e) {
			triggerClickHoverEvent("plothover", e);
		}

		function onClick(e) {
			triggerClickHoverEvent("plotclick", e);
		}

		// trigger click or hover event (they send the same parameters so we share their code)

		function triggerClickHoverEvent(eventname, e) {

			var offset = plot.offset();
			var canvasX = parseInt(e.pageX - offset.left);
			var canvasY =  parseInt(e.pageY - offset.top);
			var item = findNearbySlice(canvasX, canvasY);

			if (options.grid.autoHighlight) {

				// clear auto-highlights

				for (var i = 0; i < highlights.length; ++i) {
					var h = highlights[i];
					if (h.auto == eventname && !(item && h.series == item.series)) {
						unhighlight(h.series);
					}
				}
			}

			// highlight the slice

			if (item) {
				highlight(item.series, eventname);
			}

			// trigger any hover bind events

			var pos = { pageX: e.pageX, pageY: e.pageY };
			target.trigger(eventname, [pos, item]);
		}

		function highlight(s, auto) {
			//if (typeof s == "number") {
			//	s = series[s];
			//}

			var i = indexOfHighlight(s);

			if (i == -1) {
				highlights.push({ series: s, auto: auto });
				plot.triggerRedrawOverlay();
			} else if (!auto) {
				highlights[i].auto = false;
			}
		}

		function unhighlight(s) {
			if (s == null) {
				highlights = [];
				plot.triggerRedrawOverlay();
			}

			//if (typeof s == "number") {
			//	s = series[s];
			//}

			var i = indexOfHighlight(s);

			if (i != -1) {
				highlights.splice(i, 1);
				plot.triggerRedrawOverlay();
			}
		}

		function indexOfHighlight(s) {
			for (var i = 0; i < highlights.length; ++i) {
				var h = highlights[i];
				if (h.series == s)
					return i;
			}
			return -1;
		}

		function drawOverlay(plot, octx) {

			var options = plot.getOptions();

			var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

			octx.save();
			octx.translate(centerLeft, centerTop);
			octx.scale(1, options.series.pie.tilt);

			for (var i = 0; i < highlights.length; ++i) {
				drawHighlight(highlights[i].series);
			}

			drawDonutHole(octx);

			octx.restore();

			function drawHighlight(series) {

				if (series.angle <= 0 || isNaN(series.angle)) {
					return;
				}

				//octx.fillStyle = parseColor(options.series.pie.highlight.color).scale(null, null, null, options.series.pie.highlight.opacity).toString();
				octx.fillStyle = "rgba(255, 255, 255, " + options.series.pie.highlight.opacity + ")"; // this is temporary until we have access to parseColor
				octx.beginPath();
				if (Math.abs(series.angle - Math.PI * 2) > 0.000000001) {
					octx.moveTo(0, 0); // Center of the pie
				}
				octx.arc(0, 0, radius, series.startAngle, series.startAngle + series.angle / 2, false);
				octx.arc(0, 0, radius, series.startAngle + series.angle / 2, series.startAngle + series.angle, false);
				octx.closePath();
				octx.fill();
			}
		}
	} // end init (plugin body)

	// define pie specific options and their default values

	var options = {
		series: {
			pie: {
				show: false,
				radius: "auto",	// actual radius of the visible pie (based on full calculated radius if <=1, or hard pixel value)
				innerRadius: 0, /* for donut */
				startAngle: 3/2,
				tilt: 1,
				shadow: {
					left: 5,	// shadow left offset
					top: 15,	// shadow top offset
					alpha: 0.02	// shadow alpha
				},
				offset: {
					top: 0,
					left: "auto"
				},
				stroke: {
					color: "#fff",
					width: 1
				},
				label: {
					show: "auto",
					formatter: function(label, slice) {
						return "<div style='font-size:x-small;text-align:center;padding:2px;color:" + slice.color + ";'>" + label + "<br/>" + Math.round(slice.percent) + "%</div>";
					},	// formatter function
					radius: 1,	// radius at which to place the labels (based on full calculated radius if <=1, or hard pixel value)
					background: {
						color: null,
						opacity: 0
					},
					threshold: 0	// percentage at which to hide the label (i.e. the slice is too narrow)
				},
				combine: {
					threshold: -1,	// percentage at which to combine little slices into one larger slice
					color: null,	// color to give the new slice (auto-generated if null)
					label: "Other"	// label to give the new slice
				},
				highlight: {
					//color: "#fff",		// will add this functionality once parseColor is available
					opacity: 0.5
				}
			}
		}
	};

	$.plot.plugins.push({
		init: init,
		options: options,
		name: "pie",
		version: "1.1"
	});

})(jQuery);

/* Flot plugin for stacking data sets rather than overlyaing them.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

The plugin assumes the data is sorted on x (or y if stacking horizontally).
For line charts, it is assumed that if a line has an undefined gap (from a
null point), then the line above it should have the same gap - insert zeros
instead of "null" if you want another behaviour. This also holds for the start
and end of the chart. Note that stacking a mix of positive and negative values
in most instances doesn't make sense (so it looks weird).

Two or more series are stacked when their "stack" attribute is set to the same
key (which can be any number or string or just "true"). To specify the default
stack, you can set the stack option like this:

	series: {
		stack: null/false, true, or a key (number/string)
	}

You can also specify it for a single series, like this:

	$.plot( $("#placeholder"), [{
		data: [ ... ],
		stack: true
	}])

The stacking order is determined by the order of the data series in the array
(later series end up on top of the previous).

Internally, the plugin modifies the datapoints in each series, adding an
offset to the y value. For line series, extra data points are inserted through
interpolation. If there's a second y value, it's also adjusted (e.g for bar
charts or filled areas).

*/

(function ($) {
    var options = {
        series: { stack: null } // or number/string
    };
    
    function init(plot) {
        function findMatchingSeries(s, allseries) {
            var res = null;
            for (var i = 0; i < allseries.length; ++i) {
                if (s == allseries[i])
                    break;
                
                if (allseries[i].stack == s.stack)
                    res = allseries[i];
            }
            
            return res;
        }
        
        function stackData(plot, s, datapoints) {
            if (s.stack == null || s.stack === false)
                return;

            var other = findMatchingSeries(s, plot.getData());
            if (!other)
                return;

            var ps = datapoints.pointsize,
                points = datapoints.points,
                otherps = other.datapoints.pointsize,
                otherpoints = other.datapoints.points,
                newpoints = [],
                px, py, intery, qx, qy, bottom,
                withlines = s.lines.show,
                horizontal = s.bars.horizontal,
                withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),
                withsteps = withlines && s.lines.steps,
                fromgap = true,
                keyOffset = horizontal ? 1 : 0,
                accumulateOffset = horizontal ? 0 : 1,
                i = 0, j = 0, l, m;

            while (true) {
                if (i >= points.length)
                    break;

                l = newpoints.length;

                if (points[i] == null) {
                    // copy gaps
                    for (m = 0; m < ps; ++m)
                        newpoints.push(points[i + m]);
                    i += ps;
                }
                else if (j >= otherpoints.length) {
                    // for lines, we can't use the rest of the points
                    if (!withlines) {
                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);
                    }
                    i += ps;
                }
                else if (otherpoints[j] == null) {
                    // oops, got a gap
                    for (m = 0; m < ps; ++m)
                        newpoints.push(null);
                    fromgap = true;
                    j += otherps;
                }
                else {
                    // cases where we actually got two points
                    px = points[i + keyOffset];
                    py = points[i + accumulateOffset];
                    qx = otherpoints[j + keyOffset];
                    qy = otherpoints[j + accumulateOffset];
                    bottom = 0;

                    if (px == qx) {
                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);

                        newpoints[l + accumulateOffset] += qy;
                        bottom = qy;
                        
                        i += ps;
                        j += otherps;
                    }
                    else if (px > qx) {
                        // we got past point below, might need to
                        // insert interpolated extra point
                        if (withlines && i > 0 && points[i - ps] != null) {
                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);
                            newpoints.push(qx);
                            newpoints.push(intery + qy);
                            for (m = 2; m < ps; ++m)
                                newpoints.push(points[i + m]);
                            bottom = qy; 
                        }

                        j += otherps;
                    }
                    else { // px < qx
                        if (fromgap && withlines) {
                            // if we come from a gap, we just skip this point
                            i += ps;
                            continue;
                        }
                            
                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);
                        
                        // we might be able to interpolate a point below,
                        // this can give us a better y
                        if (withlines && j > 0 && otherpoints[j - otherps] != null)
                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);

                        newpoints[l + accumulateOffset] += bottom;
                        
                        i += ps;
                    }

                    fromgap = false;
                    
                    if (l != newpoints.length && withbottom)
                        newpoints[l + 2] += bottom;
                }

                // maintain the line steps invariant
                if (withsteps && l != newpoints.length && l > 0
                    && newpoints[l] != null
                    && newpoints[l] != newpoints[l - ps]
                    && newpoints[l + 1] != newpoints[l - ps + 1]) {
                    for (m = 0; m < ps; ++m)
                        newpoints[l + ps + m] = newpoints[l + m];
                    newpoints[l + 1] = newpoints[l - ps + 1];
                }
            }

            datapoints.points = newpoints;
        }
        
        plot.hooks.processDatapoints.push(stackData);
    }
    
    $.plot.plugins.push({
        init: init,
        options: options,
        name: 'stack',
        version: '1.2'
    });
})(jQuery);

/*
 * jquery.flot.tooltip
 * 
 * description: easy-to-use tooltips for Flot charts
 * version: 0.8.5
 * authors: Krzysztof Urbas @krzysu [myviews.pl],Evan Steinkerchner @Roundaround
 * website: https://github.com/krzysu/flot.tooltip
 * 
 * build on 2015-05-11
 * released under MIT License, 2012
*/ 
!function(a){var b={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,lines:!1,onHover:function(a,b){},$compat:!1}};b.tooltipOpts=b.tooltip;var c=function(a){this.tipPosition={x:0,y:0},this.init(a)};c.prototype.init=function(b){function c(a){var c={};c.x=a.pageX,c.y=a.pageY,b.setTooltipPosition(c)}function d(c,d,f){var g=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},h=function(a,b,c,d,e,f,h){if(!h||(h=function(a,b,c,d,e,f){if("undefined"!=typeof c)return{x:c,y:b};if("undefined"!=typeof d)return{x:a,y:d};var g,h=-1/((f-d)/(e-c));return{x:g=(e*(a*h-b+d)+c*(a*-h+b-f))/(h*(e-c)+d-f),y:h*g-h*a+b}}(a,b,c,d,e,f),h.x>=Math.min(c,e)&&h.x<=Math.max(c,e)&&h.y>=Math.min(d,f)&&h.y<=Math.max(d,f))){var i=d-f,j=e-c,k=c*f-d*e;return Math.abs(i*a+j*b+k)/Math.sqrt(i*i+j*j)}var l=g(a,b,c,d),m=g(a,b,e,f);return l>m?m:l};if(f)b.showTooltip(f,d);else if(e.plotOptions.series.lines.show&&e.tooltipOptions.lines===!0){var i=e.plotOptions.grid.mouseActiveRadius,j={distance:i+1};a.each(b.getData(),function(a,c){for(var e=0,f=-1,i=1;i<c.data.length;i++)c.data[i-1][0]<=d.x&&c.data[i][0]>=d.x&&(e=i-1,f=i);if(-1===f)return void b.hideTooltip();var k={x:c.data[e][0],y:c.data[e][1]},l={x:c.data[f][0],y:c.data[f][1]},m=h(c.xaxis.p2c(d.x),c.yaxis.p2c(d.y),c.xaxis.p2c(k.x),c.yaxis.p2c(k.y),c.xaxis.p2c(l.x),c.yaxis.p2c(l.y),!1);if(m<j.distance){var n=g(k.x,k.y,d.x,d.y)<g(d.x,d.y,l.x,l.y)?e:f,o=(c.datapoints.pointsize,[d.x,k.y+(l.y-k.y)*((d.x-k.x)/(l.x-k.x))]),p={datapoint:o,dataIndex:n,series:c,seriesIndex:a};j={distance:m,item:p}}}),j.distance<i+1?b.showTooltip(j.item,d):b.hideTooltip()}else b.hideTooltip()}var e=this,f=a.plot.plugins.length;if(this.plotPlugins=[],f)for(var g=0;f>g;g++)this.plotPlugins.push(a.plot.plugins[g].name);b.hooks.bindEvents.push(function(b,f){if(e.plotOptions=b.getOptions(),"boolean"==typeof e.plotOptions.tooltip&&(e.plotOptions.tooltipOpts.show=e.plotOptions.tooltip,e.plotOptions.tooltip=e.plotOptions.tooltipOpts,delete e.plotOptions.tooltipOpts),e.plotOptions.tooltip.show!==!1&&"undefined"!=typeof e.plotOptions.tooltip.show){e.tooltipOptions=e.plotOptions.tooltip,e.tooltipOptions.$compat?(e.wfunc="width",e.hfunc="height"):(e.wfunc="innerWidth",e.hfunc="innerHeight");e.getDomElement();a(b.getPlaceholder()).bind("plothover",d),a(f).bind("mousemove",c)}}),b.hooks.shutdown.push(function(b,e){a(b.getPlaceholder()).unbind("plothover",d),a(e).unbind("mousemove",c)}),b.setTooltipPosition=function(b){var c=e.getDomElement(),d=c.outerWidth()+e.tooltipOptions.shifts.x,f=c.outerHeight()+e.tooltipOptions.shifts.y;b.x-a(window).scrollLeft()>a(window)[e.wfunc]()-d&&(b.x-=d),b.y-a(window).scrollTop()>a(window)[e.hfunc]()-f&&(b.y-=f),e.tipPosition.x=b.x,e.tipPosition.y=b.y},b.showTooltip=function(a,c){var d=e.getDomElement(),f=e.stringFormat(e.tooltipOptions.content,a);""!==f&&(d.html(f),b.setTooltipPosition({x:c.pageX,y:c.pageY}),d.css({left:e.tipPosition.x+e.tooltipOptions.shifts.x,top:e.tipPosition.y+e.tooltipOptions.shifts.y}).show(),"function"==typeof e.tooltipOptions.onHover&&e.tooltipOptions.onHover(a,d))},b.hideTooltip=function(){e.getDomElement().hide().html("")}},c.prototype.getDomElement=function(){var b=a("."+this.tooltipOptions.cssClass);return 0===b.length&&(b=a("<div />").addClass(this.tooltipOptions.cssClass),b.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&b.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),b},c.prototype.stringFormat=function(a,b){var c,d,e,f,g=/%p\.{0,1}(\d{0,})/,h=/%s/,i=/%c/,j=/%lx/,k=/%ly/,l=/%x\.{0,1}(\d{0,})/,m=/%y\.{0,1}(\d{0,})/,n="%x",o="%y",p="%ct";if("undefined"!=typeof b.series.threshold?(c=b.datapoint[0],d=b.datapoint[1],e=b.datapoint[2]):"undefined"!=typeof b.series.lines&&b.series.lines.steps?(c=b.series.datapoints.points[2*b.dataIndex],d=b.series.datapoints.points[2*b.dataIndex+1],e=""):(c=b.series.data[b.dataIndex][0],d=b.series.data[b.dataIndex][1],e=b.series.data[b.dataIndex][2]),null===b.series.label&&b.series.originSeries&&(b.series.label=b.series.originSeries.label),"function"==typeof a&&(a=a(b.series.label,c,d,b)),"boolean"==typeof a&&!a)return"";if("undefined"!=typeof b.series.percent?f=b.series.percent:"undefined"!=typeof b.series.percents&&(f=b.series.percents[b.dataIndex]),"number"==typeof f&&(a=this.adjustValPrecision(g,a,f)),a="undefined"!=typeof b.series.label?a.replace(h,b.series.label):a.replace(h,""),a="undefined"!=typeof b.series.color?a.replace(i,b.series.color):a.replace(i,""),a=this.hasAxisLabel("xaxis",b)?a.replace(j,b.series.xaxis.options.axisLabel):a.replace(j,""),a=this.hasAxisLabel("yaxis",b)?a.replace(k,b.series.yaxis.options.axisLabel):a.replace(k,""),this.isTimeMode("xaxis",b)&&this.isXDateFormat(b)&&(a=a.replace(l,this.timestampToDate(c,this.tooltipOptions.xDateFormat,b.series.xaxis.options))),this.isTimeMode("yaxis",b)&&this.isYDateFormat(b)&&(a=a.replace(m,this.timestampToDate(d,this.tooltipOptions.yDateFormat,b.series.yaxis.options))),"number"==typeof c&&(a=this.adjustValPrecision(l,a,c)),"number"==typeof d&&(a=this.adjustValPrecision(m,a,d)),"undefined"!=typeof b.series.xaxis.ticks){var q;q=this.hasRotatedXAxisTicks(b)?"rotatedTicks":"ticks";var r=b.dataIndex+b.seriesIndex;for(var s in b.series.xaxis[q])if(b.series.xaxis[q].hasOwnProperty(r)&&!this.isTimeMode("xaxis",b)){var t=this.isCategoriesMode("xaxis",b)?b.series.xaxis[q][r].label:b.series.xaxis[q][r].v;t===c&&(a=a.replace(l,b.series.xaxis[q][r].label))}}if("undefined"!=typeof b.series.yaxis.ticks)for(var s in b.series.yaxis.ticks)if(b.series.yaxis.ticks.hasOwnProperty(s)){var u=this.isCategoriesMode("yaxis",b)?b.series.yaxis.ticks[s].label:b.series.yaxis.ticks[s].v;u===d&&(a=a.replace(m,b.series.yaxis.ticks[s].label))}return"undefined"!=typeof b.series.xaxis.tickFormatter&&(a=a.replace(n,b.series.xaxis.tickFormatter(c,b.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof b.series.yaxis.tickFormatter&&(a=a.replace(o,b.series.yaxis.tickFormatter(d,b.series.yaxis).replace(/\$/g,"$$"))),e&&(a=a.replace(p,e)),a},c.prototype.isTimeMode=function(a,b){return"undefined"!=typeof b.series[a].options.mode&&"time"===b.series[a].options.mode},c.prototype.isXDateFormat=function(a){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},c.prototype.isYDateFormat=function(a){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},c.prototype.isCategoriesMode=function(a,b){return"undefined"!=typeof b.series[a].options.mode&&"categories"===b.series[a].options.mode},c.prototype.timestampToDate=function(b,c,d){var e=a.plot.dateGenerator(b,d);return a.plot.formatDate(e,c,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},c.prototype.adjustValPrecision=function(a,b,c){var d,e=b.match(a);return null!==e&&""!==RegExp.$1&&(d=RegExp.$1,c=c.toFixed(d),b=b.replace(a,c)),b},c.prototype.hasAxisLabel=function(b,c){return-1!==a.inArray(this.plotPlugins,"axisLabels")&&"undefined"!=typeof c.series[b].options.axisLabel&&c.series[b].options.axisLabel.length>0},c.prototype.hasRotatedXAxisTicks=function(b){return-1!==a.inArray(this.plotPlugins,"tickRotor")&&"undefined"!=typeof b.series.xaxis.rotatedTicks};var d=function(a){new c(a)};a.plot.plugins.push({init:d,options:b,name:"tooltip",version:"0.8.5"})}(jQuery);
/* Pretty handling of time axes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

Set axis.mode to "time" to enable. See the section "Time series data" in
API.txt for details.

*/

(function($) {

	var options = {
		xaxis: {
			timezone: null,		// "browser" for local to the client or timezone for timezone-js
			timeformat: null,	// format string to use
			twelveHourClock: false,	// 12 or 24 time in time mode
			monthNames: null	// list of names of months
		}
	};

	// round to nearby lower multiple of base

	function floorInBase(n, base) {
		return base * Math.floor(n / base);
	}

	// Returns a string with the date d formatted according to fmt.
	// A subset of the Open Group's strftime format is supported.

	function formatDate(d, fmt, monthNames, dayNames) {

		if (typeof d.strftime == "function") {
			return d.strftime(fmt);
		}

		var leftPad = function(n, pad) {
			n = "" + n;
			pad = "" + (pad == null ? "0" : pad);
			return n.length == 1 ? pad + n : n;
		};

		var r = [];
		var escape = false;
		var hours = d.getHours();
		var isAM = hours < 12;

		if (monthNames == null) {
			monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
		}

		if (dayNames == null) {
			dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
		}

		var hours12;

		if (hours > 12) {
			hours12 = hours - 12;
		} else if (hours == 0) {
			hours12 = 12;
		} else {
			hours12 = hours;
		}

		for (var i = 0; i < fmt.length; ++i) {

			var c = fmt.charAt(i);

			if (escape) {
				switch (c) {
					case 'a': c = "" + dayNames[d.getDay()]; break;
					case 'b': c = "" + monthNames[d.getMonth()]; break;
					case 'd': c = leftPad(d.getDate()); break;
					case 'e': c = leftPad(d.getDate(), " "); break;
					case 'h':	// For back-compat with 0.7; remove in 1.0
					case 'H': c = leftPad(hours); break;
					case 'I': c = leftPad(hours12); break;
					case 'l': c = leftPad(hours12, " "); break;
					case 'm': c = leftPad(d.getMonth() + 1); break;
					case 'M': c = leftPad(d.getMinutes()); break;
					// quarters not in Open Group's strftime specification
					case 'q':
						c = "" + (Math.floor(d.getMonth() / 3) + 1); break;
					case 'S': c = leftPad(d.getSeconds()); break;
					case 'y': c = leftPad(d.getFullYear() % 100); break;
					case 'Y': c = "" + d.getFullYear(); break;
					case 'p': c = (isAM) ? ("" + "am") : ("" + "pm"); break;
					case 'P': c = (isAM) ? ("" + "AM") : ("" + "PM"); break;
					case 'w': c = "" + d.getDay(); break;
				}
				r.push(c);
				escape = false;
			} else {
				if (c == "%") {
					escape = true;
				} else {
					r.push(c);
				}
			}
		}

		return r.join("");
	}

	// To have a consistent view of time-based data independent of which time
	// zone the client happens to be in we need a date-like object independent
	// of time zones.  This is done through a wrapper that only calls the UTC
	// versions of the accessor methods.

	function makeUtcWrapper(d) {

		function addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {
			sourceObj[sourceMethod] = function() {
				return targetObj[targetMethod].apply(targetObj, arguments);
			};
		};

		var utc = {
			date: d
		};

		// support strftime, if found

		if (d.strftime != undefined) {
			addProxyMethod(utc, "strftime", d, "strftime");
		}

		addProxyMethod(utc, "getTime", d, "getTime");
		addProxyMethod(utc, "setTime", d, "setTime");

		var props = ["Date", "Day", "FullYear", "Hours", "Milliseconds", "Minutes", "Month", "Seconds"];

		for (var p = 0; p < props.length; p++) {
			addProxyMethod(utc, "get" + props[p], d, "getUTC" + props[p]);
			addProxyMethod(utc, "set" + props[p], d, "setUTC" + props[p]);
		}

		return utc;
	};

	// select time zone strategy.  This returns a date-like object tied to the
	// desired timezone

	function dateGenerator(ts, opts) {
		if (opts.timezone == "browser") {
			return new Date(ts);
		} else if (!opts.timezone || opts.timezone == "utc") {
			return makeUtcWrapper(new Date(ts));
		} else if (typeof timezoneJS != "undefined" && typeof timezoneJS.Date != "undefined") {
			var d = new timezoneJS.Date();
			// timezone-js is fickle, so be sure to set the time zone before
			// setting the time.
			d.setTimezone(opts.timezone);
			d.setTime(ts);
			return d;
		} else {
			return makeUtcWrapper(new Date(ts));
		}
	}
	
	// map of app. size of time units in milliseconds

	var timeUnitSize = {
		"second": 1000,
		"minute": 60 * 1000,
		"hour": 60 * 60 * 1000,
		"day": 24 * 60 * 60 * 1000,
		"month": 30 * 24 * 60 * 60 * 1000,
		"quarter": 3 * 30 * 24 * 60 * 60 * 1000,
		"year": 365.2425 * 24 * 60 * 60 * 1000
	};

	// the allowed tick sizes, after 1 year we use
	// an integer algorithm

	var baseSpec = [
		[1, "second"], [2, "second"], [5, "second"], [10, "second"],
		[30, "second"], 
		[1, "minute"], [2, "minute"], [5, "minute"], [10, "minute"],
		[30, "minute"], 
		[1, "hour"], [2, "hour"], [4, "hour"],
		[8, "hour"], [12, "hour"],
		[1, "day"], [2, "day"], [3, "day"],
		[0.25, "month"], [0.5, "month"], [1, "month"],
		[2, "month"]
	];

	// we don't know which variant(s) we'll need yet, but generating both is
	// cheap

	var specMonths = baseSpec.concat([[3, "month"], [6, "month"],
		[1, "year"]]);
	var specQuarters = baseSpec.concat([[1, "quarter"], [2, "quarter"],
		[1, "year"]]);

	function init(plot) {
		plot.hooks.processOptions.push(function (plot, options) {
			$.each(plot.getAxes(), function(axisName, axis) {

				var opts = axis.options;

				if (opts.mode == "time") {
					axis.tickGenerator = function(axis) {

						var ticks = [];
						var d = dateGenerator(axis.min, opts);
						var minSize = 0;

						// make quarter use a possibility if quarters are
						// mentioned in either of these options

						var spec = (opts.tickSize && opts.tickSize[1] ===
							"quarter") ||
							(opts.minTickSize && opts.minTickSize[1] ===
							"quarter") ? specQuarters : specMonths;

						if (opts.minTickSize != null) {
							if (typeof opts.tickSize == "number") {
								minSize = opts.tickSize;
							} else {
								minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];
							}
						}

						for (var i = 0; i < spec.length - 1; ++i) {
							if (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]
											  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2
								&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {
								break;
							}
						}

						var size = spec[i][0];
						var unit = spec[i][1];

						// special-case the possibility of several years

						if (unit == "year") {

							// if given a minTickSize in years, just use it,
							// ensuring that it's an integer

							if (opts.minTickSize != null && opts.minTickSize[1] == "year") {
								size = Math.floor(opts.minTickSize[0]);
							} else {

								var magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));
								var norm = (axis.delta / timeUnitSize.year) / magn;

								if (norm < 1.5) {
									size = 1;
								} else if (norm < 3) {
									size = 2;
								} else if (norm < 7.5) {
									size = 5;
								} else {
									size = 10;
								}

								size *= magn;
							}

							// minimum size for years is 1

							if (size < 1) {
								size = 1;
							}
						}

						axis.tickSize = opts.tickSize || [size, unit];
						var tickSize = axis.tickSize[0];
						unit = axis.tickSize[1];

						var step = tickSize * timeUnitSize[unit];

						if (unit == "second") {
							d.setSeconds(floorInBase(d.getSeconds(), tickSize));
						} else if (unit == "minute") {
							d.setMinutes(floorInBase(d.getMinutes(), tickSize));
						} else if (unit == "hour") {
							d.setHours(floorInBase(d.getHours(), tickSize));
						} else if (unit == "month") {
							d.setMonth(floorInBase(d.getMonth(), tickSize));
						} else if (unit == "quarter") {
							d.setMonth(3 * floorInBase(d.getMonth() / 3,
								tickSize));
						} else if (unit == "year") {
							d.setFullYear(floorInBase(d.getFullYear(), tickSize));
						}

						// reset smaller components

						d.setMilliseconds(0);

						if (step >= timeUnitSize.minute) {
							d.setSeconds(0);
						}
						if (step >= timeUnitSize.hour) {
							d.setMinutes(0);
						}
						if (step >= timeUnitSize.day) {
							d.setHours(0);
						}
						if (step >= timeUnitSize.day * 4) {
							d.setDate(1);
						}
						if (step >= timeUnitSize.month * 2) {
							d.setMonth(floorInBase(d.getMonth(), 3));
						}
						if (step >= timeUnitSize.quarter * 2) {
							d.setMonth(floorInBase(d.getMonth(), 6));
						}
						if (step >= timeUnitSize.year) {
							d.setMonth(0);
						}

						var carry = 0;
						var v = Number.NaN;
						var prev;

						do {

							prev = v;
							v = d.getTime();
							ticks.push(v);

							if (unit == "month" || unit == "quarter") {
								if (tickSize < 1) {

									// a bit complicated - we'll divide the
									// month/quarter up but we need to take
									// care of fractions so we don't end up in
									// the middle of a day

									d.setDate(1);
									var start = d.getTime();
									d.setMonth(d.getMonth() +
										(unit == "quarter" ? 3 : 1));
									var end = d.getTime();
									d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);
									carry = d.getHours();
									d.setHours(0);
								} else {
									d.setMonth(d.getMonth() +
										tickSize * (unit == "quarter" ? 3 : 1));
								}
							} else if (unit == "year") {
								d.setFullYear(d.getFullYear() + tickSize);
							} else {
								d.setTime(v + step);
							}
						} while (v < axis.max && v != prev);

						return ticks;
					};

					axis.tickFormatter = function (v, axis) {

						var d = dateGenerator(v, axis.options);

						// first check global format

						if (opts.timeformat != null) {
							return formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);
						}

						// possibly use quarters if quarters are mentioned in
						// any of these places

						var useQuarters = (axis.options.tickSize &&
								axis.options.tickSize[1] == "quarter") ||
							(axis.options.minTickSize &&
								axis.options.minTickSize[1] == "quarter");

						var t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];
						var span = axis.max - axis.min;
						var suffix = (opts.twelveHourClock) ? " %p" : "";
						var hourCode = (opts.twelveHourClock) ? "%I" : "%H";
						var fmt;

						if (t < timeUnitSize.minute) {
							fmt = hourCode + ":%M:%S" + suffix;
						} else if (t < timeUnitSize.day) {
							if (span < 2 * timeUnitSize.day) {
								fmt = hourCode + ":%M" + suffix;
							} else {
								fmt = "%b %d " + hourCode + ":%M" + suffix;
							}
						} else if (t < timeUnitSize.month) {
							fmt = "%b %d";
						} else if ((useQuarters && t < timeUnitSize.quarter) ||
							(!useQuarters && t < timeUnitSize.year)) {
							if (span < timeUnitSize.year) {
								fmt = "%b";
							} else {
								fmt = "%b %Y";
							}
						} else if (useQuarters && t < timeUnitSize.year) {
							if (span < timeUnitSize.year) {
								fmt = "Q%q";
							} else {
								fmt = "Q%q %Y";
							}
						} else {
							fmt = "%Y";
						}

						var rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);

						return rt;
					};
				}
			});
		});
	}

	$.plot.plugins.push({
		init: init,
		options: options,
		name: 'time',
		version: '1.0'
	});

	// Time-axis support used to be in Flot core, which exposed the
	// formatDate function on the plot object.  Various plugins depend
	// on the function, so we need to re-expose it here.

	$.plot.formatDate = formatDate;
	$.plot.dateGenerator = dateGenerator;

})(jQuery);


(function(){var AnimatedText,AnimatedTextFactory,Bar,BaseDonut,BaseGauge,Donut,Gauge,GaugePointer,TextRenderer,ValueUpdater,addCommas,cutHex,formatNumber,mergeObjects,secondsToString,updateObjectValues,_ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};(function(){var browserRequestAnimationFrame,isCancelled,lastId,vendor,vendors,_i,_len;vendors=['ms','moz','webkit','o'];for(_i=0,_len=vendors.length;_i<_len;_i++){vendor=vendors[_i];if(window.requestAnimationFrame){break;}
window.requestAnimationFrame=window[vendor+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendor+'CancelAnimationFrame']||window[vendor+'CancelRequestAnimationFrame'];}
browserRequestAnimationFrame=null;lastId=0;isCancelled={};if(!requestAnimationFrame){window.requestAnimationFrame=function(callback,element){var currTime,id,lastTime,timeToCall;currTime=new Date().getTime();timeToCall=Math.max(0,16-(currTime-lastTime));id=window.setTimeout(function(){return callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};return window.cancelAnimationFrame=function(id){return clearTimeout(id);};}else if(!window.cancelAnimationFrame){browserRequestAnimationFrame=window.requestAnimationFrame;window.requestAnimationFrame=function(callback,element){var myId;myId=++lastId;browserRequestAnimationFrame(function(){if(!isCancelled[myId]){return callback();}},element);return myId;};return window.cancelAnimationFrame=function(id){return isCancelled[id]=true;};}})();String.prototype.hashCode=function(){var char,hash,i,_i,_ref;hash=0;if(this.length===0){return hash;}
for(i=_i=0,_ref=this.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){char=this.charCodeAt(i);hash=((hash<<5)-hash)+char;hash=hash&hash;}
return hash;};secondsToString=function(sec){var hr,min;hr=Math.floor(sec/3600);min=Math.floor((sec-(hr*3600))/60);sec-=(hr*3600)+(min*60);sec+='';min+='';while(min.length<2){min='0'+min;}
while(sec.length<2){sec='0'+sec;}
hr=hr?hr+':':'';return hr+min+':'+sec;};formatNumber=function(num){return addCommas(num.toFixed(0));};updateObjectValues=function(obj1,obj2){var key,val;for(key in obj2){if(!__hasProp.call(obj2,key))continue;val=obj2[key];obj1[key]=val;}
return obj1;};mergeObjects=function(obj1,obj2){var key,out,val;out={};for(key in obj1){if(!__hasProp.call(obj1,key))continue;val=obj1[key];out[key]=val;}
for(key in obj2){if(!__hasProp.call(obj2,key))continue;val=obj2[key];out[key]=val;}
return out;};addCommas=function(nStr){var rgx,x,x1,x2;nStr+='';x=nStr.split('.');x1=x[0];x2='';if(x.length>1){x2='.'+x[1];}
rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;};cutHex=function(nStr){if(nStr.charAt(0)==="#"){return nStr.substring(1,7);}
return nStr;};ValueUpdater=(function(){ValueUpdater.prototype.animationSpeed=32;function ValueUpdater(addToAnimationQueue,clear){if(addToAnimationQueue==null){addToAnimationQueue=true;}
this.clear=clear!=null?clear:true;if(addToAnimationQueue){AnimationUpdater.add(this);}}
ValueUpdater.prototype.update=function(force){var diff;if(force==null){force=false;}
if(force||this.displayedValue!==this.value){if(this.ctx&&this.clear){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);}
diff=this.value-this.displayedValue;if(Math.abs(diff/this.animationSpeed)<=0.001){this.displayedValue=this.value;}else{this.displayedValue=this.displayedValue+diff/this.animationSpeed;}
this.render();return true;}
return false;};return ValueUpdater;})();BaseGauge=(function(_super){__extends(BaseGauge,_super);function BaseGauge(){_ref=BaseGauge.__super__.constructor.apply(this,arguments);return _ref;}
BaseGauge.prototype.displayScale=1;BaseGauge.prototype.setTextField=function(textField){return this.textField=textField instanceof TextRenderer?textField:new TextRenderer(textField);};BaseGauge.prototype.setMinValue=function(minValue,updateStartValue){var gauge,_i,_len,_ref1,_results;this.minValue=minValue;if(updateStartValue==null){updateStartValue=true;}
if(updateStartValue){this.displayedValue=this.minValue;_ref1=this.gp||[];_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){gauge=_ref1[_i];_results.push(gauge.displayedValue=this.minValue);}
return _results;}};BaseGauge.prototype.setOptions=function(options){if(options==null){options=null;}
this.options=mergeObjects(this.options,options);if(this.textField){this.textField.el.style.fontSize=options.fontSize+'px';}
if(this.options.angle>.5){this.gauge.options.angle=.5;}
this.configDisplayScale();return this;};BaseGauge.prototype.configDisplayScale=function(){var backingStorePixelRatio,devicePixelRatio,height,prevDisplayScale,width;prevDisplayScale=this.displayScale;if(this.options.highDpiSupport===false){delete this.displayScale;}else{devicePixelRatio=window.devicePixelRatio||1;backingStorePixelRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1;this.displayScale=devicePixelRatio/backingStorePixelRatio;}
if(this.displayScale!==prevDisplayScale){width=this.canvas.G__width||this.canvas.width;height=this.canvas.G__height||this.canvas.height;this.canvas.width=width*this.displayScale;this.canvas.height=height*this.displayScale;this.canvas.style.width=""+width+"px";this.canvas.style.height=""+height+"px";this.canvas.G__width=width;this.canvas.G__height=height;}
return this;};return BaseGauge;})(ValueUpdater);TextRenderer=(function(){function TextRenderer(el){this.el=el;}
TextRenderer.prototype.render=function(gauge){return this.el.innerHTML=formatNumber(gauge.displayedValue);};return TextRenderer;})();AnimatedText=(function(_super){__extends(AnimatedText,_super);AnimatedText.prototype.displayedValue=0;AnimatedText.prototype.value=0;AnimatedText.prototype.setVal=function(value){return this.value=1*value;};function AnimatedText(elem,text){this.elem=elem;this.text=text!=null?text:false;this.value=1*this.elem.innerHTML;if(this.text){this.value=0;}}
AnimatedText.prototype.render=function(){var textVal;if(this.text){textVal=secondsToString(this.displayedValue.toFixed(0));}else{textVal=addCommas(formatNumber(this.displayedValue));}
return this.elem.innerHTML=textVal;};return AnimatedText;})(ValueUpdater);AnimatedTextFactory={create:function(objList){var elem,out,_i,_len;out=[];for(_i=0,_len=objList.length;_i<_len;_i++){elem=objList[_i];out.push(new AnimatedText(elem));}
return out;}};GaugePointer=(function(_super){__extends(GaugePointer,_super);GaugePointer.prototype.displayedValue=0;GaugePointer.prototype.value=0;GaugePointer.prototype.options={strokeWidth:0.035,length:0.1,color:"#000000"};function GaugePointer(gauge){this.gauge=gauge;this.ctx=this.gauge.ctx;this.canvas=this.gauge.canvas;GaugePointer.__super__.constructor.call(this,false,false);this.setOptions();}
GaugePointer.prototype.setOptions=function(options){if(options==null){options=null;}
updateObjectValues(this.options,options);this.length=this.canvas.height*this.options.length;this.strokeWidth=this.canvas.height*this.options.strokeWidth;this.maxValue=this.gauge.maxValue;this.minValue=this.gauge.minValue;this.animationSpeed=this.gauge.animationSpeed;return this.options.angle=this.gauge.options.angle;};GaugePointer.prototype.render=function(){var angle,centerX,centerY,endX,endY,startX,startY,x,y;angle=this.gauge.getAngle.call(this,this.displayedValue);centerX=this.canvas.width/2;centerY=this.canvas.height*0.9;x=Math.round(centerX+this.length*Math.cos(angle));y=Math.round(centerY+this.length*Math.sin(angle));startX=Math.round(centerX+this.strokeWidth*Math.cos(angle-Math.PI/2));startY=Math.round(centerY+this.strokeWidth*Math.sin(angle-Math.PI/2));endX=Math.round(centerX+this.strokeWidth*Math.cos(angle+Math.PI/2));endY=Math.round(centerY+this.strokeWidth*Math.sin(angle+Math.PI/2));this.ctx.fillStyle=this.options.color;this.ctx.beginPath();this.ctx.arc(centerX,centerY,this.strokeWidth,0,Math.PI*2,true);this.ctx.fill();this.ctx.beginPath();this.ctx.moveTo(startX,startY);this.ctx.lineTo(x,y);this.ctx.lineTo(endX,endY);return this.ctx.fill();};return GaugePointer;})(ValueUpdater);Bar=(function(){function Bar(elem){this.elem=elem;}
Bar.prototype.updateValues=function(arrValues){this.value=arrValues[0];this.maxValue=arrValues[1];this.avgValue=arrValues[2];return this.render();};Bar.prototype.render=function(){var avgPercent,valPercent;if(this.textField){this.textField.text(formatNumber(this.value));}
if(this.maxValue===0){this.maxValue=this.avgValue*2;}
valPercent=(this.value/this.maxValue)*100;avgPercent=(this.avgValue/this.maxValue)*100;$(".bar-value",this.elem).css({"width":valPercent+"%"});return $(".typical-value",this.elem).css({"width":avgPercent+"%"});};return Bar;})();Gauge=(function(_super){__extends(Gauge,_super);Gauge.prototype.elem=null;Gauge.prototype.value=[20];Gauge.prototype.maxValue=80;Gauge.prototype.minValue=0;Gauge.prototype.displayedAngle=0;Gauge.prototype.displayedValue=0;Gauge.prototype.lineWidth=40;Gauge.prototype.paddingBottom=0.1;Gauge.prototype.percentColors=null;Gauge.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:0.8,strokeWidth:0.035},angle:0.15,lineWidth:0.44,fontSize:40,limitMax:false};function Gauge(canvas){this.canvas=canvas;Gauge.__super__.constructor.call(this);this.percentColors=null;if(typeof G_vmlCanvasManager!=='undefined'){this.canvas=window.G_vmlCanvasManager.initElement(this.canvas);}
this.ctx=this.canvas.getContext('2d');this.gp=[new GaugePointer(this)];this.setOptions();this.render();}
Gauge.prototype.setOptions=function(options){var gauge,_i,_len,_ref1;if(options==null){options=null;}
Gauge.__super__.setOptions.call(this,options);this.configPercentColors();this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth;this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.render();_ref1=this.gp;for(_i=0,_len=_ref1.length;_i<_len;_i++){gauge=_ref1[_i];gauge.setOptions(this.options.pointer);gauge.render();}
return this;};Gauge.prototype.configPercentColors=function(){var bval,gval,i,rval,_i,_ref1,_results;this.percentColors=null;if(this.options.percentColors!==void 0){this.percentColors=new Array();_results=[];for(i=_i=0,_ref1=this.options.percentColors.length-1;0<=_ref1?_i<=_ref1:_i>=_ref1;i=0<=_ref1?++_i:--_i){rval=parseInt((cutHex(this.options.percentColors[i][1])).substring(0,2),16);gval=parseInt((cutHex(this.options.percentColors[i][1])).substring(2,4),16);bval=parseInt((cutHex(this.options.percentColors[i][1])).substring(4,6),16);_results.push(this.percentColors[i]={pct:this.options.percentColors[i][0],color:{r:rval,g:gval,b:bval}});}
return _results;}};Gauge.prototype.set=function(value){var i,max_hit,val,_i,_j,_len,_ref1;if(!(value instanceof Array)){value=[value];}
if(value.length>this.gp.length){for(i=_i=0,_ref1=value.length-this.gp.length;0<=_ref1?_i<_ref1:_i>_ref1;i=0<=_ref1?++_i:--_i){this.gp.push(new GaugePointer(this));}}
i=0;max_hit=false;for(_j=0,_len=value.length;_j<_len;_j++){val=value[_j];if(val>this.maxValue){this.maxValue=this.value*1.1;max_hit=true;}
this.gp[i].value=val;this.gp[i++].setOptions({maxValue:this.maxValue,angle:this.options.angle});}
this.value=value[value.length-1];if(max_hit){if(!this.options.limitMax){return AnimationUpdater.run();}}else{return AnimationUpdater.run();}};Gauge.prototype.getAngle=function(value){return(1+this.options.angle)*Math.PI+((value-this.minValue)/(this.maxValue-this.minValue))*(1-this.options.angle*2)*Math.PI;};Gauge.prototype.getColorForPercentage=function(pct,grad){var color,endColor,i,rangePct,startColor,_i,_ref1;if(pct===0){color=this.percentColors[0].color;}else{color=this.percentColors[this.percentColors.length-1].color;for(i=_i=0,_ref1=this.percentColors.length-1;0<=_ref1?_i<=_ref1:_i>=_ref1;i=0<=_ref1?++_i:--_i){if(pct<=this.percentColors[i].pct){if(grad===true){startColor=this.percentColors[i-1];endColor=this.percentColors[i];rangePct=(pct-startColor.pct)/(endColor.pct-startColor.pct);color={r:Math.floor(startColor.color.r*(1-rangePct)+endColor.color.r*rangePct),g:Math.floor(startColor.color.g*(1-rangePct)+endColor.color.g*rangePct),b:Math.floor(startColor.color.b*(1-rangePct)+endColor.color.b*rangePct)};}else{color=this.percentColors[i].color;}
break;}}}
return'rgb('+[color.r,color.g,color.b].join(',')+')';};Gauge.prototype.getColorForValue=function(val,grad){var pct;pct=(val-this.minValue)/(this.maxValue-this.minValue);return this.getColorForPercentage(pct,grad);};Gauge.prototype.render=function(){var displayedAngle,fillStyle,gauge,h,w,_i,_len,_ref1,_results;w=this.canvas.width/2;h=this.canvas.height*(1-this.paddingBottom);displayedAngle=this.getAngle(this.displayedValue);if(this.textField){this.textField.render(this);}
this.ctx.lineCap="butt";if(this.options.customFillStyle!==void 0){fillStyle=this.options.customFillStyle(this);}else if(this.percentColors!==null){fillStyle=this.getColorForValue(this.displayedValue,true);}else if(this.options.colorStop!==void 0){if(this.options.gradientType===0){fillStyle=this.ctx.createRadialGradient(w,h,9,w,h,70);}else{fillStyle=this.ctx.createLinearGradient(0,0,w,0);}
fillStyle.addColorStop(0,this.options.colorStart);fillStyle.addColorStop(1,this.options.colorStop);}else{fillStyle=this.options.colorStart;}
this.ctx.strokeStyle=fillStyle;this.ctx.beginPath();this.ctx.arc(w,h,this.radius,(1+this.options.angle)*Math.PI,displayedAngle,false);this.ctx.lineWidth=this.lineWidth;this.ctx.stroke();this.ctx.strokeStyle=this.options.strokeColor;this.ctx.beginPath();this.ctx.arc(w,h,this.radius,displayedAngle,(2-this.options.angle)*Math.PI,false);this.ctx.stroke();_ref1=this.gp;_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){gauge=_ref1[_i];_results.push(gauge.update(true));}
return _results;};return Gauge;})(BaseGauge);BaseDonut=(function(_super){__extends(BaseDonut,_super);BaseDonut.prototype.lineWidth=15;BaseDonut.prototype.displayedValue=0;BaseDonut.prototype.value=33;BaseDonut.prototype.maxValue=80;BaseDonut.prototype.minValue=0;BaseDonut.prototype.options={lineWidth:0.10,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:0.35};function BaseDonut(canvas){this.canvas=canvas;BaseDonut.__super__.constructor.call(this);if(typeof G_vmlCanvasManager!=='undefined'){this.canvas=window.G_vmlCanvasManager.initElement(this.canvas);}
this.ctx=this.canvas.getContext('2d');this.setOptions();this.render();}
BaseDonut.prototype.getAngle=function(value){return(1-this.options.angle)*Math.PI+((value-this.minValue)/(this.maxValue-this.minValue))*((2+this.options.angle)-(1-this.options.angle))*Math.PI;};BaseDonut.prototype.setOptions=function(options){if(options==null){options=null;}
BaseDonut.__super__.setOptions.call(this,options);this.lineWidth=this.canvas.height*this.options.lineWidth;this.radius=this.canvas.height/2-this.lineWidth/2;return this;};BaseDonut.prototype.set=function(value){this.value=value;if(this.value>this.maxValue){this.maxValue=this.value*1.1;}
return AnimationUpdater.run();};BaseDonut.prototype.render=function(){var displayedAngle,grdFill,h,start,stop,w;displayedAngle=this.getAngle(this.displayedValue);w=this.canvas.width/2;h=this.canvas.height/2;if(this.textField){this.textField.render(this);}
grdFill=this.ctx.createRadialGradient(w,h,39,w,h,70);grdFill.addColorStop(0,this.options.colorStart);grdFill.addColorStop(1,this.options.colorStop);start=this.radius-this.lineWidth/2;stop=this.radius+this.lineWidth/2;this.ctx.strokeStyle=this.options.strokeColor;this.ctx.beginPath();this.ctx.arc(w,h,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,false);this.ctx.lineWidth=this.lineWidth;this.ctx.lineCap="round";this.ctx.stroke();this.ctx.strokeStyle=grdFill;this.ctx.beginPath();this.ctx.arc(w,h,this.radius,(1-this.options.angle)*Math.PI,displayedAngle,false);return this.ctx.stroke();};return BaseDonut;})(BaseGauge);Donut=(function(_super){__extends(Donut,_super);function Donut(){_ref1=Donut.__super__.constructor.apply(this,arguments);return _ref1;}
Donut.prototype.strokeGradient=function(w,h,start,stop){var grd;grd=this.ctx.createRadialGradient(w,h,start,w,h,stop);grd.addColorStop(0,this.options.shadowColor);grd.addColorStop(0.12,this.options._orgStrokeColor);grd.addColorStop(0.88,this.options._orgStrokeColor);grd.addColorStop(1,this.options.shadowColor);return grd;};Donut.prototype.setOptions=function(options){var h,start,stop,w;if(options==null){options=null;}
Donut.__super__.setOptions.call(this,options);w=this.canvas.width/2;h=this.canvas.height/2;start=this.radius-this.lineWidth/2;stop=this.radius+this.lineWidth/2;this.options._orgStrokeColor=this.options.strokeColor;this.options.strokeColor=this.strokeGradient(w,h,start,stop);return this;};return Donut;})(BaseDonut);window.AnimationUpdater={elements:[],animId:null,addAll:function(list){var elem,_i,_len,_results;_results=[];for(_i=0,_len=list.length;_i<_len;_i++){elem=list[_i];_results.push(AnimationUpdater.elements.push(elem));}
return _results;},add:function(object){return AnimationUpdater.elements.push(object);},run:function(){var animationFinished,elem,_i,_len,_ref2;animationFinished=true;_ref2=AnimationUpdater.elements;for(_i=0,_len=_ref2.length;_i<_len;_i++){elem=_ref2[_i];if(elem.update()){animationFinished=false;}}
if(!animationFinished){return AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run);}else{return cancelAnimationFrame(AnimationUpdater.animId);}}};window.Gauge=Gauge;window.Donut=Donut;window.BaseDonut=BaseDonut;window.TextRenderer=TextRenderer;}).call(this);
/**!
 * easyPieChart
 * Lightweight plugin to render simple, animated and retina optimized pie charts
 *
 * @license 
 * @author Robert Fleischmann <rendro87@gmail.com> (http://robert-fleischmann.de)
 * @version 2.1.6
 **/
!function(a,b){"object"==typeof exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){!function(a){"use strict";return a.module("easypiechart",[]).directive("easypiechart",[function(){return{restrict:"A",require:"?ngModel",scope:{percent:"=",options:"="},link:function(b,d){b.percent=b.percent||0;var e={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:{duration:1e3,enabled:!0}};b.options=a.extend(e,b.options);var f=new c(d[0],e);b.$watch("percent",function(a){f.update(a)})}}}])}(a);var b=function(a,b){var c,d=document.createElement("canvas");a.appendChild(d),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(d);var e=d.getContext("2d");d.width=d.height=b.size;var f=1;window.devicePixelRatio>1&&(f=window.devicePixelRatio,d.style.width=d.style.height=[b.size,"px"].join(""),d.width=d.height=b.size*f,e.scale(f,f)),e.translate(b.size/2,b.size/2),e.rotate((-0.5+b.rotate/180)*Math.PI);var g=(b.size-b.lineWidth)/2;b.scaleColor&&b.scaleLength&&(g-=b.scaleLength+2),Date.now=Date.now||function(){return+new Date};var h=function(a,b,c){c=Math.min(Math.max(-1,c||0),1);var d=0>=c?!0:!1;e.beginPath(),e.arc(0,0,g,0,2*Math.PI*c,d),e.strokeStyle=a,e.lineWidth=b,e.stroke()},i=function(){var a,c;e.lineWidth=1,e.fillStyle=b.scaleColor,e.save();for(var d=24;d>0;--d)d%6===0?(c=b.scaleLength,a=0):(c=.6*b.scaleLength,a=b.scaleLength-c),e.fillRect(-b.size/2+a,0,c,1),e.rotate(Math.PI/12);e.restore()},j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),k=function(){b.scaleColor&&i(),b.trackColor&&h(b.trackColor,b.trackWidth||b.lineWidth,1)};this.getCanvas=function(){return d},this.getCtx=function(){return e},this.clear=function(){e.clearRect(b.size/-2,b.size/-2,b.size,b.size)},this.draw=function(a){b.scaleColor||b.trackColor?e.getImageData&&e.putImageData?c?e.putImageData(c,0,0):(k(),c=e.getImageData(0,0,b.size*f,b.size*f)):(this.clear(),k()):this.clear(),e.lineCap=b.lineCap;var d;d="function"==typeof b.barColor?b.barColor(a):b.barColor,h(d,b.lineWidth,a/100)}.bind(this),this.animate=function(a,c){var d=Date.now();b.onStart(a,c);var e=function(){var f=Math.min(Date.now()-d,b.animate.duration),g=b.easing(this,f,a,c-a,b.animate.duration);this.draw(g),b.onStep(a,c,g),f>=b.animate.duration?b.onStop(a,c):j(e)}.bind(this);j(e)}.bind(this)},c=function(a,c){var d={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(a,b,c,d,e){return b/=e/2,1>b?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},onStart:function(){},onStep:function(){},onStop:function(){}};if("undefined"!=typeof b)d.renderer=b;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");d.renderer=SVGRenderer}var e={},f=0,g=function(){this.el=a,this.options=e;for(var b in d)d.hasOwnProperty(b)&&(e[b]=c&&"undefined"!=typeof c[b]?c[b]:d[b],"function"==typeof e[b]&&(e[b]=e[b].bind(this)));e.easing="string"==typeof e.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[e.easing])?jQuery.easing[e.easing]:d.easing,"number"==typeof e.animate&&(e.animate={duration:e.animate,enabled:!0}),"boolean"!=typeof e.animate||e.animate||(e.animate={duration:1e3,enabled:e.animate}),this.renderer=new e.renderer(a,e),this.renderer.draw(f),a.dataset&&a.dataset.percent?this.update(parseFloat(a.dataset.percent)):a.getAttribute&&a.getAttribute("data-percent")&&this.update(parseFloat(a.getAttribute("data-percent")))}.bind(this);this.update=function(a){return a=parseFloat(a),e.animate.enabled?this.renderer.animate(f,a):this.renderer.draw(a),f=a,this}.bind(this),this.disableAnimation=function(){return e.animate.enabled=!1,this},this.enableAnimation=function(){return e.animate.enabled=!0,this},g()}});
/**
 * Easy to use Wizard library for AngularJS
 * @version v0.5.4 - 2015-08-24 * @link https://github.com/mgonto/angular-wizard
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function wizardButtonDirective(a){angular.module("mgo-angular-wizard").directive(a,function(){return{restrict:"A",replace:!1,require:"^wizard",link:function(b,c,d,e){c.on("click",function(c){c.preventDefault(),b.$apply(function(){b.$eval(d[a]),e[a.replace("wz","").toLowerCase()]()})})}}})}angular.module("templates-angularwizard",["step.html","wizard.html"]),angular.module("step.html",[]).run(["$templateCache",function(a){a.put("step.html",'<section ng-show="selected" ng-class="{current: selected, done: completed}" class="step" ng-transclude>\n</section>')}]),angular.module("wizard.html",[]).run(["$templateCache",function(a){a.put("wizard.html",'<div>\n    <div class="steps" ng-transclude></div>\n    <ul class="steps-indicator steps-{{getEnabledSteps().length}}" ng-if="!hideIndicators">\n      <li ng-class="{default: !step.completed && !step.selected, current: step.selected && !step.completed, done: step.completed && !step.selected, editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()">\n        <a ng-click="goTo(step)">{{step.title || step.wzTitle}}</a>\n      </li>\n    </ul>\n</div>\n')}]),angular.module("mgo-angular-wizard",["templates-angularwizard"]),angular.module("mgo-angular-wizard").directive("wzStep",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{wzTitle:"@",title:"@",canenter:"=",canexit:"=",disabled:"@?wzDisabled"},require:"^wizard",templateUrl:function(a,b){return b.template||"step.html"},link:function(a,b,c,d){a.title=a.title||a.wzTitle,d.addStep(a)}}}),angular.module("mgo-angular-wizard").directive("wizard",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{currentStep:"=",onFinish:"&",hideIndicators:"=",editMode:"=",name:"@"},templateUrl:function(a,b){return b.template||"wizard.html"},controller:["$scope","$element","$log","WizardHandler","$q",function(a,b,c,d,e){function f(b){var c,d;return void 0===b.canenter?!0:"boolean"==typeof b.canenter?b.canenter:(d=b.canenter(a.context),angular.isFunction(d.then)?(c=e.defer(),d.then(function(a){c.resolve(a)}),c.promise):b.canenter(a.context)===!0)}function g(b,c){var d,f;return"undefined"==typeof b.canexit||a.getStepNumber(c)<a.currentStepNumber()?!0:"boolean"==typeof b.canexit?b.canexit:(f=b.canexit(a.context),angular.isFunction(f.then)?(d=e.defer(),f.then(function(a){d.resolve(a)}),d.promise):b.canexit(a.context)===!0)}function h(){_.each(a.getEnabledSteps(),function(a){a.selected=!1}),a.selectedStep=null}var i=!0;d.addWizard(a.name||d.defaultName,this),a.$on("$destroy",function(){d.removeWizard(a.name||d.defaultName)}),a.steps=[],a.context={},a.$watch("currentStep",function(b){if(b){var c=a.selectedStep.title||a.selectedStep.wzTitle;a.selectedStep&&c!==a.currentStep&&a.goTo(_.findWhere(a.getEnabledSteps(),{title:a.currentStep}))}}),a.$watch("[editMode, steps.length]",function(){var b=a.editMode;_.isUndefined(b)||_.isNull(b)||b&&_.each(a.getEnabledSteps(),function(a){a.completed=!0})},!0),this.addStep=function(b){a.steps.push(b),1===a.getEnabledSteps().length&&a.goTo(a.getEnabledSteps()[0])},this.context=a.context,a.getStepNumber=function(b){return _.indexOf(a.getEnabledSteps(),b)+1},a.goTo=function(b){if(i)h(),a.selectedStep=b,_.isUndefined(a.currentStep)||(a.currentStep=b.title||b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:_.indexOf(a.getEnabledSteps(),b)}),i=!1;else{var c;a.currentStepNumber()>0?c=a.currentStepNumber()-1:0===a.currentStepNumber()&&(c=0),e.all([g(a.getEnabledSteps()[c],b),f(b)]).then(function(c){c[0]&&c[1]&&(h(),a.selectedStep=b,_.isUndefined(a.currentStep)||(a.currentStep=b.title||b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:_.indexOf(a.getEnabledSteps(),b)}))})}},a.currentStepNumber=function(){return _.indexOf(a.getEnabledSteps(),a.selectedStep)+1},a.getEnabledSteps=function(){return _.filter(a.steps,function(a){return"true"!==a.disabled})},this.currentStepNumber=function(){return a.currentStepNumber()},this.next=function(b){var c=a.getEnabledSteps(),d=_.indexOf(c,a.selectedStep);if(angular.isFunction(b)){if(!b())return;d===c.length-1?this.finish():a.goTo(c[d+1])}b||(a.selectedStep.completed=!0),d===c.length-1?this.finish():a.goTo(c[d+1])},this.goTo=function(b){var c,d=a.getEnabledSteps();c=_.isNumber(b)?d[b]:_.findWhere(d,{title:b}),a.goTo(c)},this.finish=function(){a.onFinish&&a.onFinish()},this.previous=function(){var b=_.indexOf(a.getEnabledSteps(),a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[b-1])},this.cancel=function(){var b=_.indexOf(a.getEnabledSteps(),a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[0])}}]}}),wizardButtonDirective("wzNext"),wizardButtonDirective("wzPrevious"),wizardButtonDirective("wzFinish"),wizardButtonDirective("wzCancel"),angular.module("mgo-angular-wizard").factory("WizardHandler",function(){var a={},b={};return a.defaultName="defaultWizard",a.addWizard=function(a,c){b[a]=c},a.removeWizard=function(a){delete b[a]},a.wizard=function(c){var d=c;return c||(d=a.defaultName),b[d]},a});
!function(a,b){b["true"]=a,function(b,c){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b():c.rangy=b()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v?!0:rangyAutoInitialize}};H.fail=i,H.warn=j;var I;({}).hasOwnProperty?(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}):i("hasOwnProperty not supported"),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],a=E[b],!(a&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),!i)throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){var b;try{return b=a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if(!(e&&!d.test(b.nodeType)||f&&!c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling,a&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a));else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling,a&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a)));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return c(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a)},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&!function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;;){if(v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),m=h.compareEndPoints(r,a),0==m||s==u)break;if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),
d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);"undefined"==typeof q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&"undefined"!=typeof a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&!function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};W?da.addRange=function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:da.addRange=function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){var c=M(a).createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};_&&P?da.removeRange=function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:da.removeRange=function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(b,c){"function"==typeof define&&define.amd?define(["./rangy-core"],b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b(require("rangy")):b(c.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this)}({},function(){return this}());
!function(a,b){b["true"]=a,/**
 * @license AngularJS v1.3.10
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var c=[];return g(b,l(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=l(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),B[d])for(;k.last()&&C[k.last()];)e("",k.last());A[d]&&k.last()==d&&e("",d),g=x[d]||!!g,g||k.push(d);var i={};f.replace(p,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,k=[],l=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",g=!0,k.last()&&E[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(s,"$1").replace(u,"$1"),c.chars&&c.chars(h(b)),""}),e("",k.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):t.test(a)?(i=a.match(t),i&&(a=a.replace(i[0],""),g=!1)):r.test(a)?(i=a.match(o),i&&(a=a.substring(i[0].length),i[0].replace(o,e),g=!1)):q.test(a)&&(i=a.match(n),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(n,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))),a==l)throw m("badparse","The sanitizer was unable to parse the following block of html: {0}",a);l=a}e()}function h(a){if(!a)return"";var b=L.exec(a),c=b[1],d=b[3],e=b[2];return e&&(K.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in K?K.textContent:K.innerText),c+e+d}function i(a){return a.replace(/&/g,"&amp;").replace(v,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(w,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=M(b.lowercase(d[0])),a=M(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function k(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function l(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&E[a]&&(d=a),d||F[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var h=b.lowercase(g),l="img"===a&&"src"===h||"background"===h;("style"===h&&""!==(d=j(d))||k(a,f,h,d)||J[h]===!0&&(G[h]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||F[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var m=b.$$minErr("$sanitize"),n=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,o=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,q=/^</,r=/^<\//,s=/<!--(.*?)-->/g,t=/<!DOCTYPE([^>]*?)>/i,u=/<!\[CDATA\[(.*?)]]>/g,v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,x=f("area,br,col,hr,img,wbr,input"),y=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),z=f("rp,rt"),A=b.extend({},z,y),B=b.extend({},y,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),C=b.extend({},z,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),D=f("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),E=f("script,style"),F=b.extend({},x,B,C,A,D),G=f("background,cite,href,longdesc,src,usemap,xlink:href"),H=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),I=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),J=b.extend({},G,I,H),K=document.createElement("pre"),L=/^(\s*)([\s\S]*?)(\s*)$/,M=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}());
!function(a,b){b["true"]=a,/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.3.7

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
angular.module("textAngularSetup",[]).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(a){},htmlEditorSetup:function(a){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(a,b){return{imgOnSelectAction:function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)},aOnSelectAction:function(c,d,e){c.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(c){c.preventDefault();var f=a.prompt(b.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+b.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)},extractYoutubeVideoId:function(a){var b=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,c=a.match(b);return c&&c[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(a,b,c,d,e,f,g){var h={};if(f("",h),g.forceTextAngularSanitize===!0&&"taSanitize"!==h.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var i=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},j=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:j,activeState:i(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:c.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(a){var b=!1;return a&&(b="justify"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyFull")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}}),a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:e.imgOnSelectAction}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a&&(videoId=e.extractYoutubeVideoId(a),videoId)){var d="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+d+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:e.imgOnSelectAction}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:e.aOnSelectAction}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.4.3

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
function(){"use strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(b,c){if(!b||""===b||r.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';r[b]=c}var c={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},d=!1;c.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,c=b.target;if(d&&null!==c){for(var e=!1,f=c;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),c.focus(),c.select&&c.select())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(c.ie>8||void 0===c.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return c.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=a.cssRules||a.rules;if(c&&0!==c.length){var d=m(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===c.ie?"div":c.ie<=8?"P":"p":c.ie<=8?a.toUpperCase():a:c.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f["finally"](function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return d(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return d(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(e)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(e)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(e)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?d(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(e)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(e);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(f))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(e))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(e);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>",I=a.getSelection();if(I.collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var d=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,b.parentNode===c.start.element||b.parentNode===c.end.element?c.container=b.parentNode:c.container=b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=d.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!e.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=d.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=d.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taButton",[function(){return{link:function(a,b,c){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(a,b,f,h,k,l,m,n,o,q,r,s,t,u){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,v,w,x){function y(a){var b;return R.forEach(function(c){if(c.keyCode===a.keyCode){var d=(a.metaKey?O:0)+(a.ctrlKey?N:0)+(a.shiftKey?Q:0)+(a.altKey?P:0);if(c.forbiddenModifiers&d)return;c.mustHaveModifiers.every(function(a){return d&a})&&(b=c.specialKey)}}),b}var z,A,B,C,D=x[0],E=x[1]||{},F=void 0!==v.attr("contenteditable")&&v.attr("contenteditable"),G=F||"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase(),H=!1,I=!1,J=!1,K=w.taUnsafeSanitizer||q.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,N=1,O=2,P=4,Q=8,R=[{specialKey:"UndoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P,mustHaveModifiers:[O+N,Q],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:O+Q+P+N,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:O+P+N,mustHaveModifiers:[Q],keyCode:9}];void 0===w.taDefaultWrap&&(w.taDefaultWrap="p"),""===w.taDefaultWrap?(B="",C=void 0===c.ie?"<div><br></div>":c.ie>=11?"<p><br></p>":c.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(B=void 0===c.ie||c.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":c.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+"></"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+"></"+w.taDefaultWrap+">",C=void 0===c.ie||c.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":c.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+">&nbsp;</"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+">&nbsp;</"+w.taDefaultWrap+">"),E.$options||(E.$options={});var S=r(C),T=function(a){if(S(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">";else{var c,d=b[0].childNodes,f=!1;for(c=0;c<d.length&&!(f=d[c].nodeName.toLowerCase().match(e));c++);if(f)for(a="",c=0;c<d.length;c++)if(d[c].nodeName.toLowerCase().match(e))a+=d[c].outerHTML;else{var g=d[c].outerHTML||d[c].nodeValue;a+=""!==g.trim()?"<"+w.taDefaultWrap+">"+g+"</"+w.taDefaultWrap+">":g}else a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">"}return a};w.taPaste&&(A=s(w.taPaste)),v.addClass("ta-bind");var U;l["$undoManager"+(w.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),U&&b.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var V,W=l["$undoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(ja(a),Z(a,!1),V&&b.cancel(V),V=b(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},X=l["$redoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(ja(a),Z(a,!1),V&&b.cancel(V),V=b(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},Y=function(){if(F)return v[0].innerHTML;if(G)return v.val();throw"textAngular Error: attempting to update non-editable taBind"},Z=function(a,b,c){J=c||!1,("undefined"==typeof b||null===b)&&(b=!0&&F),("undefined"==typeof a||null===a)&&(a=Y()),S(a)?(""!==D.$viewValue&&D.$setViewValue(""),b&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ia(),D.$viewValue!==a&&(D.$setViewValue(a),b&&D.$undoManager.push(a))),D.$render()};l["updateTaBind"+(w.id||"")]=function(){H||Z(void 0,void 0,!0)};var $=function(b){return D.$oldViewValue=a(k(b),D.$oldViewValue,K)};if(v.attr("required")&&(D.$validators.required=function(a,b){return!S(a||b)}),D.$parsers.push($),D.$parsers.unshift(T),D.$formatters.push($),D.$formatters.unshift(T),D.$formatters.unshift(function(a){return D.$undoManager.push(a||"")}),G)if(l.events={},F){var _=!1,aa=function(c){if(c&&c.trim().length){if(c.match(/class=["']*Mso(Normal|List)/i)){var d=c.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);d=d?d[1]:c,d=d.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var e=angular.element("<div>"+d+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=e[0].childNodes.length;i++)if(e[0].childNodes[i]&&"#text"!==e[0].childNodes[i].nodeName&&"p"===e[0].childNodes[i].tagName.toLowerCase()){var j=angular.element(e[0].childNodes[i]),k=(j.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(k){if(j[0].childNodes.length<2||j[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===k[1].toLowerCase()||"number"!==k[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].childNodes[0].innerHTML)),o=(j.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(j.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!k[3]||"first"===k[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),f.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(j.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),j.remove()}else h(!1),f.append(j)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(f.find("font"),r),c=f.html()}else{if(c=c.replace(/<(|\/)meta[^>]*?>/gi,""),c.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(c.match(/<[^>]*?(text-angular)[^>]*?>/)){var s=angular.element("<div>"+c+"</div>");s.find("textarea").remove();for(var u=t.getByAttribute(s,"ta-bind"),w=0;w<u.length;w++){for(var x=u[w][0].parentNode.parentNode,y=0;y<u[w][0].childNodes.length;y++)x.parentNode.insertBefore(u[w][0].childNodes[y],x);x.parentNode.removeChild(x)}c=s.html().replace('<br class="Apple-interchange-newline">',"")}}else c.match(/^<span/)&&(c=c.replace(/<(|\/)span[^>]*?>/gi,""));c=c.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(c)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(c)===!1&&(c=c.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),A&&(c=A(l,{$html:c})||c),c=a(c,"",K),m.insertHtml(c,v[0]),b(function(){D.$setViewValue(Y()),_=!1,v.removeClass("processing-paste")},0)}else _=!1,v.removeClass("processing-paste")};v.on("paste",l.events.paste=function(a,c){if(c&&angular.extend(a,c),H||_)return a.stopPropagation(),a.preventDefault(),!1;_=!0,v.addClass("processing-paste");var d,e=(a.originalEvent||a).clipboardData;if(e&&e.getData&&e.types.length>0){for(var g="",i=0;i<e.types.length;i++)g+=" "+e.types[i];return/text\/html/i.test(g)?d=e.getData("text/html"):/text\/plain/i.test(g)&&(d=e.getData("text/plain")),aa(d),a.stopPropagation(),a.preventDefault(),!1}var j=f.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');h.find("body").append(k),k[0].focus(),b(function(){f.rangy.restoreSelection(j),aa(k[0].innerHTML),v[0].focus(),k.remove()},0)}),v.on("cut",l.events.cut=function(a){H?a.preventDefault():b(function(){D.$setViewValue(Y())},0)}),v.on("keydown",l.events.keydown=function(a,b){b&&angular.extend(a,b),a.specialKey=y(a);var c;if(q.keyMappings.forEach(function(b){a.specialKey===b.commandKeyCode&&(a.specialKey=void 0),b.testForKey(a)&&(c=b.commandKeyCode),("UndoKey"===b.commandKeyCode||"RedoKey"===b.commandKeyCode)&&(b.enablePropagation||a.preventDefault())}),"undefined"!=typeof c&&(a.specialKey=c),"undefined"==typeof a.specialKey||"UndoKey"===a.specialKey&&"RedoKey"===a.specialKey||(a.preventDefault(),u.sendKeyCommand(l,a)),!H&&("UndoKey"===a.specialKey&&(W(),a.preventDefault()),"RedoKey"===a.specialKey&&(X(),a.preventDefault()),13===a.keyCode&&!a.shiftKey)){var d,e=m.getSelectionElement();if(!e.tagName.match(g))return;var f=angular.element(B);if(/^<br(|\/)>$/i.test(e.innerHTML.trim())&&"blockquote"===e.parentNode.tagName.toLowerCase()&&!e.nextSibling){d=angular.element(e);var h=d.parent();h.after(f),d.remove(),0===h.children().length&&h.remove(),m.setSelectionToElementStart(f[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(e.innerHTML.trim())&&"blockquote"===e.tagName.toLowerCase()&&(d=angular.element(e),d.after(f),d.remove(),m.setSelectionToElementStart(f[0]),a.preventDefault())}});var ba;if(v.on("keyup",l.events.keyup=function(a,c){if(c&&angular.extend(a,c),9===a.keyCode){var d=m.getSelection();return void(d.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0]))}if(U&&b.cancel(U),!H&&!L.test(a.keyCode)){if(""!==B&&13===a.keyCode&&!a.shiftKey){for(var e=m.getSelectionElement();!e.tagName.match(g)&&e!==v[0];)e=e.parentNode;if(e.tagName.toLowerCase()!==w.taDefaultWrap&&"li"!==e.tagName.toLowerCase()&&(""===e.innerHTML.trim()||"<br>"===e.innerHTML.trim())){var h=angular.element(B);angular.element(e).replaceWith(h),m.setSelectionToElementStart(h[0])}}var i=Y();if(""!==B&&""===i.trim())ja(B),m.setSelectionToElementStart(v.children()[0]);else if("<"!==i.substring(0,1)&&""!==w.taDefaultWrap){var j=f.rangy.saveSelection();i=Y(),i="<"+w.taDefaultWrap+">"+i+"</"+w.taDefaultWrap+">",ja(i),f.rangy.restoreSelection(j)}var k=z!==a.keyCode&&M.test(a.keyCode);ba&&b.cancel(ba),ba=b(function(){Z(i,k,!0)},E.$options.debounce||400),k||(U=b(function(){D.$undoManager.push(i)},250)),z=a.keyCode}}),v.on("blur",l.events.blur=function(){I=!1,H?(J=!0,D.$render()):Z(void 0,void 0,!0)}),w.placeholder&&(c.ie>8||void 0===c.ie)){var ca;if(!w.id)throw"textAngular Error: An unique ID is required for placeholders to work";ca=i("#"+w.id+".placeholder-text:before",'content: "'+w.placeholder+'"'),l.$on("$destroy",function(){j(ca)})}v.on("focus",l.events.focus=function(){I=!0,v.removeClass("placeholder-text"),ia()}),v.on("mouseup",l.events.mouseup=function(){var a=m.getSelection();a.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0])}),v.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{v.on("change blur",l.events.change=l.events.blur=function(){H||D.$setViewValue(Y())}),v.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=v.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(v.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else v.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var da=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},ea=function(a,b){var c="",d=a.childNodes;b++,c+=da("	",b-1)+a.outerHTML.substring(0,a.outerHTML.indexOf("<li"));for(var e=0;e<d.length;e++)d[e].outerHTML&&(c+="ul"===d[e].nodeName.toLowerCase()||"ol"===d[e].nodeName.toLowerCase()?"\n"+ea(d[e],b):"\n"+da("	",b)+d[e].outerHTML);return c+="\n"+da("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;if(b.length>0){a="";for(var c=0;c<b.length;c++)b[c].outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===b[c].nodeName.toLowerCase()||"ol"===b[c].nodeName.toLowerCase()?""+ea(b[c],0):""+b[c].outerHTML)}return a})}var fa,ga=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},ha=function(a,c){if(c&&angular.extend(a,c),!p&&!H){p=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,d),b(function(){p=!1,Z(void 0,void 0,!0)},100)}},ia=l["reApplyOnSelectorHandlers"+(w.id||"")]=function(){H||angular.forEach(n,function(a){v.find(a).off("click",ga).on("click",ga)})},ja=function(a){v[0].innerHTML=a},ka=!1;D.$render=function(){if(!ka){ka=!0;var a=D.$viewValue||"";J||(F&&I&&(v.removeClass("placeholder-text"),fa&&b.cancel(fa),fa=b(function(){I||(v[0].focus(),m.setSelectionToElementEnd(v.children()[v.children().length-1])),fa=void 0},1)),F?(ja(w.placeholder?""===a?B:a:""===a?B:a),H?v.off("drop",ha):(ia(),v.on("drop",ha))):"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()?ja(o(a)):v.val(a)),F&&w.placeholder&&(""===a?I?v.removeClass("placeholder-text"):v.addClass("placeholder-text"):v.removeClass("placeholder-text")),ka=J=!1}},w.taReadonly&&(H=l.$eval(w.taReadonly),H?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable")):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true")),l.$watch(w.taReadonly,function(a,b){b!==a&&(a?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable"),angular.forEach(n,function(a){v.find(a).on("click",ga)}),v.off("drop",ha)):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true"),
angular.forEach(n,function(a){v.find(a).off("click",ga)}),v.on("drop",ha)),H=a)})),F&&!H&&(angular.forEach(n,function(a){v.find(a).on("click",ga)}),v.on("drop",ha),v.on("blur",function(){c.webkit&&(d=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),r={};q.constant("taRegisterTool",b),q.value("taTools",r),q.config([function(){angular.forEach(r,function(a,b){delete r[b]})}]),q.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),o.taFileDrop?m.fileDropHandler=m.$parent.$eval(o.taFileDrop):m.fileDropHandler=m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){var a=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content")};k.when(i.removeClass(m.displayElements.popover,"in",a)).then(a)},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){var c={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))},f=void 0!==o.taResizeForceAspectRatio,g=o.taResizeMaintainAspectRatio,h=f||g&&!b.shiftKey;if(h){var i=c.y/c.x;c.x=e>i?c.x:c.y/e,c.y=e>i?c.x*e:c.y}var j=angular.element(a);j.css("height",Math.round(Math.max(0,c.y)+"px")),j.css("width",Math.round(Math.max(0,c.x)+"px")),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].off("mousedown"),m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name)}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey||c.specialKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&(b.commandKeyCode===c.which||b.commandKeyCode===c.specialKey))for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()},sendKeyCommand:function(a,b){angular.forEach(e,function(c){return c.editorFunctions.sendKeyCommand(b)?(a._bUpdateSelectedStyles||a.updateSelectedStyles(),b.preventDefault(),!1):void 0})}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=b&&b.display?angular.element(b.display):angular.element("<button type='button'>"),b&&b["class"]?d.addClass(b["class"]):d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}());
/**
 * @license Angular UI Tree v2.9.0
 * (c) 2010-2015. https://github.com/angular-ui-tree/angular-ui-tree
 * License: MIT
 */
!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,n){function t(e){var n,l,r=0,i=e.childNodes();for(n=0;n<i.length;n++)l=i[n].$childNodesScope,l&&l.childNodesCount()>0&&(r=1,t(l));o+=r}this.scope=e,e.$element=n,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$apply=!1,e.collapsed=!1,e.init=function(t){var o=t[0];e.$treeScope=t[1]?t[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),n.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(n){return e.$parentNodesScope==n.$parentNodesScope},e.isChild=function(n){var t=e.childNodes();return t&&t.indexOf(n)>-1},e.prev=function(){var n=e.index();return n>0?e.siblings()[n-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(n,t){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(n,t)},e.removeNode=function(){var n=e.remove();return e.$callbacks.removed(n),n},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var n=e.$parentNodeScope;return n?n.depth()+1:1};var o=0;e.maxSubDepth=function(){return o=0,e.$childNodesScope&&t(e.$childNodesScope),o}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=n):null},e.destroySubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=null):null},e.accept=function(n,t){return e.$treeScope.$callbacks.accept(n,e,t)},e.beforeDrag=function(n){return e.$treeScope.$callbacks.beforeDrag(n)},e.isParent=function(n){return n.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(n){var t=e.$modelValue.indexOf(n.$modelValue);return t>-1?(e.safeApply(function(){e.$modelValue.splice(t,1)[0]}),n):null},e.insertNode=function(n,t){e.safeApply(function(){e.$modelValue.splice(n,0,t)})},e.childNodes=function(){var n,t=[];if(e.$modelValue)for(n=0;n<e.$modelValue.length;n++)t.push(e.$nodesMap[e.$modelValue[n].$$hashKey]);return t},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(n){var t=e.maxDepth||e.$treeScope.maxDepth;return t>0?e.depth()+n.maxSubDepth()+1>t:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(n){e.$nodesScope.$element.append(n),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():n.append(e.$emptyElm)},e.resetEmptyElement=this.resetEmptyElement;var t=function(e,n){var o,l,r=e.childNodes();for(o=0;o<r.length;o++)n?r[o].collapse():r[o].expand(),l=r[o].$childNodesScope,l&&t(l,n)};e.collapseAll=function(){t(e.$nodesScope,!0)},e.expandAll=function(){t(e.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,n){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,o,l,r){var i={accept:null,beforeDrag:null},a={};angular.extend(a,e),a.treeClass&&o.addClass(a.treeClass),t.$emptyElm=angular.element(n.document.createElement("div")),a.emptyTreeClass&&t.$emptyElm.addClass(a.emptyTreeClass),t.$watch("$nodesScope.$modelValue.length",function(){t.$nodesScope.$modelValue&&r.resetEmptyElement()},!0),t.$watch(l.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(l.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceholderEnabled=e,r.resetEmptyElement())}),t.$watch(l.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(l.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(l.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(l.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),i.accept=function(e,n,t){return!(n.nodropEnabled||n.outOfDepth(e))},i.beforeDrag=function(e){return!0},i.removed=function(e){},i.dropped=function(e){},i.dragStart=function(e){},i.dragMove=function(e){},i.dragStop=function(e){},i.beforeDrop=function(e){},t.$watch(l.uiTree,function(e,n){angular.forEach(e,function(e,n){i[n]&&"function"==typeof e&&(i[n]=e)}),t.$callbacks=i},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(n,t,o,l){var r={};angular.extend(r,e),r.handleClass&&t.addClass(r.handleClass),n!=l.scope&&(n.$nodeScope=l.scope,l.scope.$handleScope=n)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(e,n,t,o,l){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(r,i,a,d){var c,s,u,p,f,h,$,m,g,b,y,v,S,N,E,x,C,w,T,D,X={},Y="ontouchstart"in window,A=null,V=document.body,k=document.documentElement;angular.extend(X,e),X.nodeClass&&i.addClass(X.nodeClass),r.init(d),r.collapsed=!!n.getNodeAttribute(r,"collapsed"),r.sourceOnly=r.nodropEnabled||r.$treeScope.nodropEnabled,r.$watch(a.collapsed,function(e){"boolean"==typeof e&&(r.collapsed=e)}),r.$watch("collapsed",function(e){n.setNodeAttribute(r,"collapsed",e),a.$set("collapsed",e)}),b=function(e){if((Y||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var l,a,d,b,y,v=angular.element(e.target),S=v.scope(),C=i.clone();if(S&&S.$type&&!("uiTreeNode"!=S.$type&&"uiTreeHandle"!=S.$type||"uiTreeNode"==S.$type&&S.$handleScope||(l=v.prop("tagName").toLowerCase(),"input"==l||"textarea"==l||"button"==l||"select"==l))){for(;v&&v[0]&&v[0]!=i;){if(n.nodrag(v))return;v=v.parent()}r.beforeDrag(r)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),d=n.eventObj(e),c=!0,s=n.dragInfo(r),r.$apply(function(){r.$treeScope.$callbacks.dragStart(s.eventArgs($,u))}),a=r.$element.prop("tagName"),"tr"===a.toLowerCase()?(p=angular.element(t.document.createElement(a)),b=angular.element(t.document.createElement("td")).addClass(X.placeholderClass),p.append(b)):p=angular.element(t.document.createElement(a)).addClass(X.placeholderClass),f=angular.element(t.document.createElement(a)),X.hiddenClass&&f.addClass(X.hiddenClass),u=n.positionStarted(d,r.$element),p.css("height",n.height(r.$element)+"px"),p.css("width",n.width(r.$element)+"px"),h=angular.element(t.document.createElement(r.$parentNodesScope.$element.prop("tagName"))).addClass(r.$parentNodesScope.$element.attr("class")).addClass(X.dragClass),h.css("width",n.width(r.$element)+"px"),h.css("z-index",9999),y=(r.$element[0].querySelector(".angular-ui-tree-handle")||r.$element[0]).currentStyle,y&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:y.cursor+"!important"})),r.sourceOnly&&p.css("display","none"),r.$element.after(p),r.$element.after(f),h.append(s.isClone()&&r.sourceOnly?C:r.$element),o.find("body").append(h),h.css({left:d.pageX-u.offsetX+"px",top:d.pageY-u.offsetY+"px"}),$={placeholder:p,dragging:h},angular.element(o).bind("touchend",E),angular.element(o).bind("touchcancel",E),angular.element(o).bind("touchmove",N),angular.element(o).bind("mouseup",E),angular.element(o).bind("mousemove",N),angular.element(o).bind("mouseleave",x),m=Math.max(V.scrollHeight,V.offsetHeight,k.clientHeight,k.scrollHeight,k.offsetHeight),g=Math.max(V.scrollWidth,V.offsetWidth,k.clientWidth,k.scrollWidth,k.offsetWidth))}}},y=function(e){var o,l,i,a,d,f,b,y,v,S,N,E,x,C,w,T,Y=n.eventObj(e);if(h){if(e.preventDefault(),t.getSelection?t.getSelection().removeAllRanges():t.document.selection&&t.document.selection.empty(),i=Y.pageX-u.offsetX,a=Y.pageY-u.offsetY,0>i&&(i=0),0>a&&(a=0),a+10>m&&(a=m-10),i+10>g&&(i=g-10),h.css({left:i+"px",top:a+"px"}),d=window.pageYOffset||t.document.documentElement.scrollTop,f=d+(window.innerHeight||t.document.clientHeight||t.document.clientHeight),f<Y.pageY&&m>=f&&window.scrollBy(0,10),d>Y.pageY&&window.scrollBy(0,-10),n.positionMoved(e,u,c),c)return void(c=!1);if(y=n.offset(h).left-n.offset(p).left>=X.threshold,v=Y.pageX-t.document.body.scrollLeft,S=Y.pageY-(window.pageYOffset||t.document.documentElement.scrollTop),angular.isFunction(h.hide)?h.hide():(N=h[0].style.display,h[0].style.display="none"),t.document.elementFromPoint(v,S),x=angular.element(t.document.elementFromPoint(v,S)),angular.isFunction(h.show)?h.show():h[0].style.display=N,D=!x.scope().$type,D&&(p.remove(),A&&(A.resetEmptyElement(),A=null)),u.dirAx&&u.distAxX>=X.levelThreshold&&(u.distAxX=0,u.distX>0&&(o=s.prev(),o&&!o.collapsed&&o.accept(r,o.childNodesCount())&&(o.$childNodesScope.$element.append(p),s.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),u.distX<0&&(l=s.next(),l||(b=s.parentNode(),b&&b.$parentNodesScope.accept(r,b.index()+1)&&(b.$element.after(p),s.moveTo(b.$parentNodesScope,b.siblings(),b.index()+1))))),!u.dirAx){if(E=x.scope(),C=!1,!E)return;if(!E.$treeScope||E.$parent.nodropEnabled||E.$treeScope.nodropEnabled||p.css("display","block"),"uiTree"==E.$type&&E.dragEnabled&&(C=E.isEmpty()),"uiTreeHandle"==E.$type&&(E=E.$nodeScope),"uiTreeNode"!=E.$type&&!C)return;A&&p.parent()[0]!=A.$element[0]&&(A.resetEmptyElement(),A=null),C?(A=E,E.$nodesScope.accept(r,0)&&(E.place(p),s.moveTo(E.$nodesScope,E.$nodesScope.childNodes(),0))):E.dragEnabled()&&(x=E.$element,w=n.offset(x),T=E.horizontal?Y.pageX<w.left+n.width(x)/2:Y.pageY<w.top+n.height(x)/2,E.$parentNodesScope.accept(r,E.index())?T?(x[0].parentNode.insertBefore(p[0],x[0]),s.moveTo(E.$parentNodesScope,E.siblings(),E.index())):(x.after(p),s.moveTo(E.$parentNodesScope,E.siblings(),E.index()+1)):!T&&E.accept(r,E.childNodesCount())?(E.$childNodesScope.$element.append(p),s.moveTo(E.$childNodesScope,E.childNodes(),E.childNodesCount())):D=!0)}r.$apply(function(){r.$treeScope.$callbacks.dragMove(s.eventArgs($,u))})}},v=function(e){e.preventDefault(),h&&(r.$treeScope.$apply(function(){r.$treeScope.$callbacks.beforeDrop(s.eventArgs($,u))}),f.replaceWith(r.$element),p.remove(),h.remove(),h=null,r.$$apply&&!D?r.$treeScope.$apply(function(){s.apply(),r.$treeScope.$callbacks.dropped(s.eventArgs($,u))}):w(),r.$treeScope.$apply(function(){r.$treeScope.$callbacks.dragStop(s.eventArgs($,u))}),r.$$apply=!1,s=null);var n=document.body.getAttribute("ui-tree-cursor");null!==n&&(o.find("body").css({cursor:n}),document.body.removeAttribute("ui-tree-cursor")),angular.element(o).unbind("touchend",E),angular.element(o).unbind("touchcancel",E),angular.element(o).unbind("touchmove",N),angular.element(o).unbind("mouseup",E),angular.element(o).unbind("mousemove",N),angular.element(t.document.body).unbind("mouseleave",x)},S=function(e){r.dragEnabled()&&b(e)},N=function(e){y(e)},E=function(e){r.$$apply=!0,v(e)},x=function(e){v(e)},C=function(){var e;return{exec:function(n,t){t||(t=0),this.cancel(),e=l(n,t)},cancel:function(){l.cancel(e)}}}(),w=function(){i.bind("touchstart mousedown",function(e){C.exec(function(){S(e)},r.dragDelay||0)}),i.bind("touchend touchcancel mouseup",function(){C.cancel()})},w(),T=function(e){27==e.keyCode&&(r.$$apply=!1,v(e))},angular.element(t.document.body).bind("keydown",T),r.$on("$destroy",function(){angular.element(t.document.body).unbind("keydown",T)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,t,o,l){var r={},i=l[0],a=l[1],d=l[2];angular.extend(r,e),r.nodesClass&&t.addClass(r.nodesClass),a?(a.scope.$childNodesScope=n,n.$nodeScope=a.scope):d.scope.$nodesScope=n,n.$treeScope=d.scope,i&&(i.$render=function(){n.$modelValue=i.$modelValue}),n.$watch(o.maxDepth,function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return o.nodropEnabled},function(e){"undefined"!=typeof e&&(n.nodropEnabled=!0)},!0),o.$observe("horizontal",function(e){n.horizontal="undefined"!=typeof e})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(e,n){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;var t=this.nodesData[e.$modelValue.$$hashKey];return t?t[n]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")?"false"!==e.attr("data-nodrag"):!1},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(e)):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(t){var o=t[0].getBoundingClientRect();return{width:t.prop("offsetWidth"),height:t.prop("offsetHeight"),top:o.top+(n.pageYOffset||e[0].body.scrollTop||e[0].documentElement.scrollTop),left:o.left+(n.pageXOffset||e[0].body.scrollLeft||e[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={},o=e.pageX,l=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(o=e.originalEvent.touches[0].pageX,l=e.originalEvent.touches[0].pageY),t.offsetX=o-this.offset(n).left,t.offsetY=l-this.offset(n).top,t.startX=t.lastX=o,t.startY=t.lastY=l,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){var o,l=e.pageX,r=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(l=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY),n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=l,n.nowY=r,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:n.distX>0?1:-1,n.dirY=0===n.distY?0:n.distY>0?1:-1,o=Math.abs(n.distX)>Math.abs(n.distY)?1:0,t?(n.dirAx=o,void(n.moving=!0)):(n.dirAx!==o?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),void(n.dirAx=o))}}}])}();
/*! ngTagsInput v2.1.1 License: MIT */!function(){"use strict";function a(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,c){return angular.forEach(a[b],function(a){a.call(null,c)}),this}}}function b(a,b){return a=a||[],a.length>0&&!angular.isObject(a[0])&&a.forEach(function(c,d){a[d]={},a[d][b]=c}),a}function c(a,b,c){for(var d=null,f=0;f<a.length;f++)if(e(a[f][c]).toLowerCase()===e(b[c]).toLowerCase()){d=a[f];break}return d}function d(a,b,c){if(!b)return a;var d=b.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return a.replace(new RegExp(d,"gi"),c)}function e(a){return angular.isUndefined(a)||null==a?"":a.toString().trim()}function f(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var g={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,comma:188},h=9007199254740991,i=["text","email","url"],j=angular.module("ngTagsInput",[]);j.directive("tagsInput",["$timeout","$document","tagsInputConfig",function(d,f,j){function k(a,b){var d,f,g,h={};return d=function(b){return e(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var e=d(b);return e&&e.length>=a.minLength&&e.length<=a.maxLength&&a.allowedTagsPattern.test(e)&&!c(h.items,b,a.displayProperty)},h.items=[],h.addText=function(a){var b={};return f(b,a),h.add(b)},h.add=function(c){var e=d(c);return a.replaceSpacesWithDashes&&(e=e.replace(/\s/g,"-")),f(c,e),g(c)?(h.items.push(c),b.trigger("tag-added",{$tag:c})):e&&b.trigger("invalid-tag",{$tag:c}),c},h.remove=function(a){var c=h.items.splice(a,1)[0];return b.trigger("tag-removed",{$tag:c}),c},h.removeLast=function(){var b,c=h.items.length-1;return a.enableEditingLastTag||h.selected?(h.selected=null,b=h.remove(c)):h.selected||(h.selected=h.items[c]),b},h}function l(a){return-1!==i.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdded:"&",onTagRemoved:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(b,c,d){b.events=new a,j.load("tagsInput",b,c,{type:[String,"text",l],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,h],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,h],displayProperty:[String,"text"],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1]}),b.tagList=new k(b.options,b.events),this.registerAutocomplete=function(){var a=d.find("input");return a.on("keydown",function(a){b.events.trigger("input-keydown",a)}),{addTag:function(a){return b.tagList.add(a)},focusInput:function(){a[0].focus()},getTags:function(){return b.tags},getCurrentTagText:function(){return b.newTag.text},getOptions:function(){return b.options},on:function(a,c){return b.events.on(a,c),this}}}}],link:function(a,c,h,i){var j,k=[g.enter,g.comma,g.space,g.backspace],l=a.tagList,m=a.events,n=a.options,o=c.find("input"),p=["minTags","maxTags","allowLeftoverText"];j=function(){i.$setValidity("maxTags",a.tags.length<=n.maxTags),i.$setValidity("minTags",a.tags.length>=n.minTags),i.$setValidity("leftoverText",n.allowLeftoverText?!0:!a.newTag.text)},m.on("tag-added",a.onTagAdded).on("tag-removed",a.onTagRemoved).on("tag-added",function(){a.newTag.text=""}).on("tag-added tag-removed",function(){i.$setViewValue(a.tags)}).on("invalid-tag",function(){a.newTag.invalid=!0}).on("input-change",function(){l.selected=null,a.newTag.invalid=null}).on("input-focus",function(){i.$setValidity("leftoverText",!0)}).on("input-blur",function(){n.addFromAutocompleteOnly||(n.addOnBlur&&l.addText(a.newTag.text),j())}).on("option-change",function(a){-1!==p.indexOf(a.name)&&j()}),a.newTag={text:"",invalid:null},a.getDisplayText=function(a){return e(a[n.displayProperty])},a.track=function(a){return a[n.displayProperty]},a.newTagChange=function(){m.trigger("input-change",a.newTag.text)},a.$watch("tags",function(c){a.tags=b(c,n.displayProperty),l.items=a.tags}),a.$watch("tags.length",function(){j()}),o.on("keydown",function(b){if(!b.isImmediatePropagationStopped||!b.isImmediatePropagationStopped()){var c,d,e=b.keyCode,f=b.shiftKey||b.altKey||b.ctrlKey||b.metaKey,h={};if(!f&&-1!==k.indexOf(e))if(h[g.enter]=n.addOnEnter,h[g.comma]=n.addOnComma,h[g.space]=n.addOnSpace,c=!n.addFromAutocompleteOnly&&h[e],d=!c&&e===g.backspace&&0===a.newTag.text.length,c)l.addText(a.newTag.text),a.$apply(),b.preventDefault();else if(d){var i=l.removeLast();i&&n.enableEditingLastTag&&(a.newTag.text=i[n.displayProperty]),a.$apply(),b.preventDefault()}}}).on("focus",function(){a.hasFocus||(a.hasFocus=!0,m.trigger("input-focus"),a.$apply())}).on("blur",function(){d(function(){var b=f.prop("activeElement"),d=b===o[0],e=c[0].contains(b);(d||!e)&&(a.hasFocus=!1,m.trigger("input-blur"))})}),c.find("div").on("click",function(){o[0].focus()})}}}]),j.directive("autoComplete",["$document","$timeout","$sce","tagsInputConfig",function(a,h,i,j){function k(a,d){var e,f,g,i={};return f=function(a,b){return a.filter(function(a){return!c(b,a,d.tagsInput.displayProperty)})},i.reset=function(){g=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null,h.cancel(e)},i.show=function(){i.selected=null,i.visible=!0},i.load=function(c,j){h.cancel(e),e=h(function(){i.query=c;var e=a({$query:c});g=e,e.then(function(a){e===g&&(a=b(a.data||a,d.tagsInput.displayProperty),a=f(a,j),i.items=a.slice(0,d.maxResultsToShow),i.items.length>0?i.show():i.reset())})},d.debounceDelay,!1)},i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a]},i.reset(),i}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",link:function(a,b,c,h){var l,m,n,o,p,q,r=[g.enter,g.tab,g.escape,g.up,g.down];j.load("autoComplete",a,c,{debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1]}),n=a.options,m=h.registerAutocomplete(),n.tagsInput=m.getOptions(),l=new k(a.source,n),o=function(a){return a[n.tagsInput.displayProperty]},p=function(a){return e(o(a))},q=function(a){return a&&a.length>=n.minLength||!a&&n.loadOnEmpty},a.suggestionList=l,a.addSuggestionByIndex=function(b){l.select(b),a.addSuggestion()},a.addSuggestion=function(){var a=!1;return l.selected&&(m.addTag(l.selected),l.reset(),m.focusInput(),a=!0),a},a.highlight=function(a){var b=p(a);return b=f(b),n.highlightMatchedText&&(b=d(b,f(l.query),"<em>$&</em>")),i.trustAsHtml(b)},a.track=function(a){return o(a)},m.on("tag-added tag-removed invalid-tag input-blur",function(){l.reset()}).on("input-change",function(a){q(a)?l.load(a,m.getTags()):l.reset()}).on("input-focus",function(){var a=m.getCurrentTagText();n.loadOnFocus&&q(a)&&l.load(a,m.getTags())}).on("input-keydown",function(b){var c=!1;b.stopImmediatePropagation=function(){c=!0,b.stopPropagation()},b.isImmediatePropagationStopped=function(){return c};var d=b.keyCode,e=!1;-1!==r.indexOf(d)&&(l.visible?d===g.down?(l.selectNext(),e=!0):d===g.up?(l.selectPrior(),e=!0):d===g.escape?(l.reset(),e=!0):(d===g.enter||d===g.tab)&&(e=a.addSuggestion()):d===g.down&&a.options.loadOnDownArrow&&(l.load(m.getCurrentTagText(),m.getTags()),e=!0),e&&(b.preventDefault(),b.stopImmediatePropagation(),a.$apply()))})}}}]),j.directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}),j.directive("tiAutosize",["tagsInputConfig",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=a.getTextAutosizeThreshold();f=angular.element('<span class="input"></span>'),f.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),c.parent().append(f),g=function(a){var b,e=a;return angular.isString(e)&&0===e.length&&(e=d.placeholder),e&&(f.text(e),f.css("display",""),b=f.prop("offsetWidth"),f.css("display","none")),c.css("width",b?b+h+"px":""),a},e.$parsers.unshift(g),e.$formatters.unshift(g),d.$observe("placeholder",function(a){e.$modelValue||g(a)})}}}]),j.directive("tiBindAttrs",function(){return function(a,b,c){a.$watch(c.tiBindAttrs,function(a){angular.forEach(a,function(a,b){c.$set(b,a)})},!0)}}),j.provider("tagsInputConfig",function(){var a={},b={},c=3;this.setDefaults=function(b,c){return a[b]=c,this},this.setActiveInterpolation=function(a,c){return b[a]=c,this},this.setTextAutosizeThreshold=function(a){return c=a,this},this.$get=["$interpolate",function(d){var e={};return e[String]=function(a){return a},e[Number]=function(a){return parseInt(a,10)},e[Boolean]=function(a){return"true"===a.toLowerCase()},e[RegExp]=function(a){return new RegExp(a)},{load:function(c,f,g,h){var i=function(){return!0};f.options={},angular.forEach(h,function(h,j){var k,l,m,n,o,p;k=h[0],l=h[1],m=h[2]||i,n=e[k],o=function(){var b=a[c]&&a[c][j];return angular.isDefined(b)?b:l},p=function(a){f.options[j]=a&&m(a)?n(a):o()},b[c]&&b[c][j]?g.$observe(j,function(a){p(a),f.events.trigger("option-change",{name:j,newValue:a})}):p(g[j]&&d(g[j])(f.$parent))})},getTextAutosizeThreshold:function(){return c}}}]}),j.run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ti-transclude-append=""><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }"><span ng-bind="getDisplayText(tag)"></span> <a class="remove-button" ng-click="tagList.remove($index)" ng-bind="options.removeTagSymbol"></a></li></ul><input class="input" ng-model="newTag.text" ng-change="newTagChange()" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex}" ti-autosize=""></div></div>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-show="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)" ng-bind-html="highlight(item)"></li></ul></div>')}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJhbmd1bGFyLm1pbi5qcyIsImFuZ3VsYXItcm91dGUubWluLmpzIiwiYW5ndWxhci1hbmltYXRlLm1pbi5qcyIsInVuZGVyc2NvcmUtbWluLmpzIiwidWktYm9vdHN0cmFwLXRwbHMubWluLmpzIiwianF1ZXJ5LnNwaW5uZXIubWluLmpzIiwiYm9vdHN0cmFwLXNsaWRlci5taW4uanMiLCJqcXVlcnkuc3RlcHMubWluLmpzIiwidG9hc3RyLm1pbi5qcyIsImJvb3RzdHJhcC5maWxlLWlucHV0LmpzIiwianF1ZXJ5LnNsaW1zY3JvbGwubWluLmpzIiwiaG9sZGVyLmpzIiwibW9ycmlzLmpzIiwianF1ZXJ5LmZsb3QuanMiLCJqcXVlcnkuZmxvdC5yZXNpemUuanMiLCJqcXVlcnkuZmxvdC5waWUuanMiLCJqcXVlcnkuZmxvdC5zdGFjay5qcyIsImpxdWVyeS5mbG90LnRvb2x0aXAubWluLmpzIiwianF1ZXJ5LmZsb3QudGltZS5qcyIsImdhdWdlLm1pbi5qcyIsImFuZ3VsYXIuZWFzeXBpZWNoYXJ0Lm1pbi5qcyIsImFuZ3VsYXItd2l6YXJkLm1pbi5qcyIsInRleHRBbmd1bGFyLXJhbmd5Lm1pbi5qcyIsInRleHRBbmd1bGFyLXNhbml0aXplLm1pbi5qcyIsInRleHRBbmd1bGFyLm1pbi5qcyIsImFuZ3VsYXItdWktdHJlZS5taW4uanMiLCJuZy10YWdzLWlucHV0Lm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDclNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaG9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwMkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaG1HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3B6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQSIsImZpbGUiOiJ1aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjIuMS40IHwgKGMpIDIwMDUsIDIwMTUgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPVwiMi4xLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9XCJsZW5ndGhcImluIGEmJmEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixMPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixNPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTj1NLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxPPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK04rXCIpKXwpXCIrTCtcIipcXFxcXVwiLFA9XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK08rXCIpKil8LiopXFxcXCl8KVwiLFE9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxSPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cChcIl5cIitOK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTS5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitPKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitQKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYT0vWyt+XS8sYmE9Lyd8XFxcXC9nLGNhPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitMK1wiP3woXCIrTCtcIil8LilcIixcImlnXCIpLGRhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGVhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSxrPWIubm9kZVR5cGUsXCJzdHJpbmdcIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYSxcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytyYShvW2xdKTt3PWFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89Zy5kb2N1bWVudEVsZW1lbnQsZT1nLmRlZmF1bHRWaWV3LGUmJmUhPT1lLnRvcCYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixlYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZWEpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChnLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWphKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWcuZ2V0RWxlbWVudHNCeU5hbWV8fCFnLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiBwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGcucXVlcnlTZWxlY3RvckFsbCkpJiYoamEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0wrXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0wrXCIqKD86dmFsdWV8XCIrSytcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxqYShmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTCtcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLFApfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGEoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZELmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYSxkYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYSxkYSksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK0wrXCIpXCIrYStcIihcIitMK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UucmVwbGFjZShRLFwiIFwiKStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLFwiJDFcIikpO3JldHVybiBkW3VdP2lhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBnYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShjYSxkYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2EoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcWEoKXt9cWEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiByYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2EoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gdGEoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdWEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylnYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB3YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD13YShkKSksZSYmIWVbdV0mJihlPXdhKGUsZikpLGlhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHVhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dmEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXZhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj12YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24geGEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYSh0YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2EoaT4xJiZ0YShtKSxpPjEmJnJhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ4YShhLnNsaWNlKGksZSkpLGY+ZSYmeGEoYT1hLnNsaWNlKGUpKSxmPmUmJnJhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHRhKG0pfWZ1bmN0aW9uIHlhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmEocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXhhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx5YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9Z2Euc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYWEudGVzdChqWzBdLnR5cGUpJiZwYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxrYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGthKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxrYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxnYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rSy51aWQrK31LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtcbnJldHVybiBNLmFjY2VzcyhhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtNLnJlbW92ZShhLGIpfSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIEwuYWNjZXNzKGEsYixjKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtMLnJlbW92ZShhLGIpfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9TS5nZXQoZiksMT09PWYubm9kZVR5cGUmJiFMLmdldChmLFwiaGFzRGF0YUF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUChmLGQsZVtkXSkpKTtMLnNldChmLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKFwiLVwiKSYmdm9pZCAwIT09YyYmTS5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe00ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBMLmdldChhLGMpfHxMLmFjY2VzcyhhLGMse2VtcHR5Om4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9TC5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsUj1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1uLmNzcyhhLFwiZGlzcGxheVwiKXx8IW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxUPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGsubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgVT1cInVuZGVmaW5lZFwiO2suZm9jdXNpbkJ1YmJsZXM9XCJvbmZvY3VzaW5cImluIGE7dmFyIFY9L15rZXkvLFc9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sWD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWT0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0sZiksKG09aVtvXSl8fChtPWlbb109W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxwLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG8sZywhMSkpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxuLmV2ZW50Lmdsb2JhbFtvXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5oYXNEYXRhKGEpJiZMLmdldChhKTtpZihyJiYoaT1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmKGRlbGV0ZSByLmhhbmRsZSxMLnJlbW92ZShhLFwiZXZlbnRzXCIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscj1qLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPj0wJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaz1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9ZT8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrci5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZXx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZCkpe2ZvcihpPW8uZGVsZWdhdGVUeXBlfHxxLFgudGVzdChpK3EpfHwoZz1nLnBhcmVudE5vZGUpO2c7Zz1nLnBhcmVudE5vZGUpcC5wdXNoKGcpLGg9ZztoPT09KGQub3duZXJEb2N1bWVudHx8bCkmJnAucHVzaChoLmRlZmF1bHRWaWV3fHxoLnBhcmVudFdpbmRvd3x8YSl9Zj0wO3doaWxlKChnPXBbZisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWY+MT9pOm8uYmluZFR5cGV8fHEsbT0oTC5nZXQoZyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJkwuZ2V0KGcsXCJoYW5kbGVcIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGcubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZT0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGEucmVzdWx0PWUpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8XCJjbGlja1wiIT09YS50eXBlKSlmb3IoO2khPT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT49MDpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGwsZD1jLmRvY3VtZW50RWxlbWVudCxlPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZCYmZC5zY3JvbGxMZWZ0fHxlJiZlLnNjcm9sbExlZnR8fDApLShkJiZkLmNsaWVudExlZnR8fGUmJmUuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGQmJmQuc2Nyb2xsVG9wfHxlJiZlLnNjcm9sbFRvcHx8MCktKGQmJmQuY2xpZW50VG9wfHxlJiZlLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Vy50ZXN0KGUpP3RoaXMubW91c2VIb29rczpWLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWwpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1fKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PV8oKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFuLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLmZvY3VzaW5CdWJibGVzfHxuLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihnIGluIGEpdGhpcy5vbihnLGIsYyxhW2ddLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoXCJzdHJpbmdcIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4oYj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYmE9LzwoW1xcdzpdKykvLGNhPS88fCYjP1xcdys7LyxkYT0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGVhPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksZmE9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxnYT0vXnRydWVcXC8oLiopLyxoYT0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2csaWE9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtpYS5vcHRncm91cD1pYS5vcHRpb24saWEudGJvZHk9aWEudGZvb3Q9aWEuY29sZ3JvdXA9aWEuY2FwdGlvbj1pYS50aGVhZCxpYS50aD1pYS50ZDtmdW5jdGlvbiBqYShhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiBrYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiBsYShhKXt2YXIgYj1nYS5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gbWEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspTC5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8TC5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTC5oYXNEYXRhKGEpJiYoZj1MLmFjY2VzcyhhKSxnPUwuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1NLmhhc0RhdGEoYSkmJihoPU0uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTS5zZXQoYixpKSl9fWZ1bmN0aW9uIG9hKGEsYil7dmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTphLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJpbnB1dFwiPT09YyYmVC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDooXCJpbnB1dFwiPT09Y3x8XCJ0ZXh0YXJlYVwiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2EoaCksZj1vYShhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9hKGEpLGc9Z3x8b2EoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYShmW2RdLGdbZF0pO2Vsc2UgbmEoYSxoKTtyZXR1cm4gZz1vYShoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm1hKGcsIWkmJm9hKGEsXCJzY3JpcHRcIikpLGh9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixrPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGw9W10sbT0wLG89YS5sZW5ndGg7bz5tO20rKylpZihlPWFbbV0sZXx8MD09PWUpaWYoXCJvYmplY3RcIj09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYS50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxnPShiYS5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWlhW2ddfHxpYS5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYSxcIjwkMT48LyQyPlwiKStoWzJdLGo9aFswXTt3aGlsZShqLS0pZj1mLmxhc3RDaGlsZDtuLm1lcmdlKGwsZi5jaGlsZE5vZGVzKSxmPWsuZmlyc3RDaGlsZCxmLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBsLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShlKSk7ay50ZXh0Q29udGVudD1cIlwiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9hKGsuYXBwZW5kQ2hpbGQoZSksXCJzY3JpcHRcIiksaSYmbWEoZiksYykpe2o9MDt3aGlsZShlPWZbaisrXSlmYS50ZXN0KGUudHlwZXx8XCJcIikmJmMucHVzaChlKX1yZXR1cm4ga30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZSxmPW4uZXZlbnQuc3BlY2lhbCxnPTA7dm9pZCAwIT09KGM9YVtnXSk7ZysrKXtpZihuLmFjY2VwdERhdGEoYykmJihlPWNbTC5leHBhbmRvXSxlJiYoYj1MLmNhY2hlW2VdKSkpe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWZbZF0/bi5ldmVudC5yZW1vdmUoYyxkKTpuLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7TC5jYWNoZVtlXSYmZGVsZXRlIEwuY2FjaGVbZV19ZGVsZXRlIE0uY2FjaGVbY1tNLmV4cGFuZG9dXX19fSksbi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiYodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWE/bi5maWx0ZXIoYSx0aGlzKTp0aGlzLGU9MDtudWxsIT0oYz1kW2VdKTtlKyspYnx8MSE9PWMubm9kZVR5cGV8fG4uY2xlYW5EYXRhKG9hKGMpKSxjLnBhcmVudE5vZGUmJihiJiZuLmNvbnRhaW5zKGMub3duZXJEb2N1bWVudCxjKSYmbWEob2EoYyxcInNjcmlwdFwiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9hKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFkYS50ZXN0KGEpJiYhaWFbKGJhLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoYWEsXCI8JDE+PC8kMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2EoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG4uY2xlYW5EYXRhKG9hKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxtPXRoaXMsbz1sLTEscD1hWzBdLHE9bi5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmVhLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYShjLFwic2NyaXB0XCIpLGthKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYShoLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0saCxqKTtpZihnKWZvcihpPWZbZi5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChmLGxhKSxqPTA7Zz5qO2orKyloPWZbal0sZmEudGVzdChoLnR5cGV8fFwiXCIpJiYhTC5hY2Nlc3MoaCxcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGEsXCJcIikpKX1yZXR1cm4gdGhpc319KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFhLHJhPXt9O2Z1bmN0aW9uIHNhKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIHRhKGEpe3ZhciBiPWwsYz1yYVthXTtyZXR1cm4gY3x8KGM9c2EoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChxYT0ocWF8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYVswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNhKGEsYikscWEuZGV0YWNoKCkpLHJhW2FdPWMpLGN9dmFyIHVhPS9ebWFyZ2luLyx2YT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLHdhPWZ1bmN0aW9uKGIpe3JldHVybiBiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcub3BlbmVyP2Iub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCk6YS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl9O2Z1bmN0aW9uIHhhKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8d2EoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdKSxjJiYoXCJcIiE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLHZhLnRlc3QoZykmJnVhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMCE9PWc/ZytcIlwiOmd9ZnVuY3Rpb24geWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGYuc3R5bGUpe2Yuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWYuc3R5bGUuYmFja2dyb3VuZENsaXAsZS5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGYuaW5uZXJIVE1MPVwiXCIsZC5hcHBlbmRDaGlsZChlKTt2YXIgZz1hLmdldENvbXB1dGVkU3R5bGUoZixudWxsKTtiPVwiMSVcIiE9PWcudG9wLGM9XCI0cHhcIj09PWcud2lkdGgsZC5yZW1vdmVDaGlsZChlKX1hLmdldENvbXB1dGVkU3R5bGUmJm4uZXh0ZW5kKGsse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmcoKSxjfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7dmFyIGIsYz1mLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1mLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9XCIwXCIsZi5zdHlsZS53aWR0aD1cIjFweFwiLGQuYXBwZW5kQ2hpbGQoZSksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5tYXJnaW5SaWdodCksZC5yZW1vdmVDaGlsZChlKSxmLnJlbW92ZUNoaWxkKGMpLGJ9fSl9fSgpLG4uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHphPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSguKikkXCIsXCJpXCIpLEJhPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitRK1wiKVwiLFwiaVwiKSxDYT17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sRGE9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxFYT1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gRmEoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD1iLGU9RWEubGVuZ3RoO3doaWxlKGUtLSlpZihiPUVhW2VdK2MsYiBpbiBhKXJldHVybiBiO3JldHVybiBkfWZ1bmN0aW9uIEdhKGEsYixjKXt2YXIgZD1BYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gSGEoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bi5jc3MoYSxjK1JbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTooZys9bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIElhKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPXdhKGEpLGc9XCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT14YShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLHZhLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK0hhKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1mdW5jdGlvbiBKYShhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1MLmdldChkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmUyhkKSYmKGZbZ109TC5hY2Nlc3MoZCxcIm9sZGRpc3BsYXlcIix0YShkLm5vZGVOYW1lKSkpKTooZT1TKGQpLFwibm9uZVwiPT09YyYmZXx8TC5zZXQoZCxcIm9sZGRpc3BsYXlcIixlP2M6bi5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz14YShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1CYS5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG4uY3NzKGEsYikpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiIT09Znx8bi5jc3NOdW1iZXJbaF18fChjKz1cInB4XCIpLGsuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmEoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIERhJiYoZT1EYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/emEudGVzdChuLmNzcyhhLFwiZGlzcGxheVwiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENhLGZ1bmN0aW9uKCl7cmV0dXJuIElhKGEsYixkKX0pOklhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2EoYSk7cmV0dXJuIEdhKGEsYyxkP0hhKGEsYixkLFwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXlhKGsucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP24uc3dhcChhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LHhhLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHVhLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdhKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2EoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEthKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49S2EsS2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUthLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOkthLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEthLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYS5wcm90b3R5cGUsS2EucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2EucHJvcEhvb2tzLnNjcm9sbFRvcD1LYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUthLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGEsTWEsTmE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9hPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1ErXCIpKFthLXolXSopJFwiLFwiaVwiKSxQYT0vcXVldWVIb29rcyQvLFFhPVtWYV0sUmE9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYS5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShuLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZPYS5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYSgpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGE9dm9pZCAwfSksTGE9bi5ub3coKX1mdW5jdGlvbiBUYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWEoYSxiLGMpe2Zvcih2YXIgZCxlPShSYVtiXXx8W10pLmNvbmNhdChSYVtcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZhKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9MLmdldChhLFwib2xkZGlzcGxheVwiKXx8dGEoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5hLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3RhKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWEocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2EoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFhLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxhfHxTYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGF8fFNhKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWFbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFVhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGEse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJhW2NdPVJhW2NdfHxbXSxSYVtjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FhLnVuc2hpZnQoYSk6UWEucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYSh0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYS50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYShiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGEoXCJzaG93XCIpLHNsaWRlVXA6VGEoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRhKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYT1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExhPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01hfHwoTWE9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYSksTWE9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsay5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWEsWmEsJGE9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1phOllhKSksXG52b2lkIDA9PT1jP2QmJlwiZ2V0XCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJlwic2V0XCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTp2b2lkIG4ucmVtb3ZlQXR0cihhLGIpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChFKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmbi5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksWmE9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9JGFbYl18fG4uZmluZC5hdHRyOyRhW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj0kYVtiXSwkYVtiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsJGFbYl09ZiksZX19KTt2YXIgX2E9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtuLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tuLnByb3BGaXhbYV18fGFdfSl9fSksbi5leHRlbmQoe3Byb3BGaXg6e1wiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW4uaXNYTUxEb2MoYSksZiYmKGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8X2EudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxrLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxuLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYj0vW1xcdFxcclxcblxcZl0vZztuLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIik6XCIgXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPDAmJihkKz1lK1wiIFwiKTtnPW4udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpOlwiXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPj0wKWQ9ZC5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO2c9YT9uLnRyaW0oZCk6XCJcIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfTpmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1jKXt2YXIgYixkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8XCJib29sZWFuXCI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6TC5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmI9L1xcci9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJiLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIGNiPW4ubm93KCksZGI9L1xcPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYStcIlwiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYixjO2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSxcInRleHQveG1sXCIpfWNhdGNoKGQpe2I9dm9pZCAwfXJldHVybighYnx8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCkmJm4uZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYSksYn07dmFyIGViPS8jLiokLyxmYj0vKFs/Jl0pXz1bXiZdKi8sZ2I9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSxoYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxpYj0vXig/OkdFVHxIRUFEKSQvLGpiPS9eXFwvXFwvLyxrYj0vXihbXFx3ListXSs6KSg/OlxcL1xcLyg/OlteXFwvPyNdKkB8KShbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxsYj17fSxtYj17fSxuYj1cIiovXCIuY29uY2F0KFwiKlwiKSxvYj1hLmxvY2F0aW9uLmhyZWYscGI9a2IuZXhlYyhvYi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gcmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09bWI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiBzYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6b2IsdHlwZTpcIkdFVFwiLGlzTG9jYWw6aGIudGVzdChwYlsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6bmIsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm4ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9zYihzYihhLG4uYWpheFNldHRpbmdzKSxiKTpzYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpxYihsYiksYWpheFRyYW5zcG9ydDpxYihtYiksYWpheDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1uLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9uKGwpOm4uZXZlbnQsbz1uLkRlZmVycmVkKCkscD1uLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9XCJjYW5jZWxlZFwiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1nYi5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihvLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxvYikrXCJcIikucmVwbGFjZShlYixcIlwiKS5yZXBsYWNlKGpiLHBiWzFdK1wiLy9cIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9bi50cmltKGsuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXCJcIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9a2IuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1wYlsxXSYmaFsyXT09PXBiWzJdJiYoaFszXXx8KFwiaHR0cDpcIj09PWhbMV0/XCI4MFwiOlwiNDQzXCIpKT09PShwYlszXXx8KFwiaHR0cDpcIj09PXBiWzFdP1wiODBcIjpcIjQ0M1wiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9bi5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHJiKGxiLGssYix2KSwyPT09dClyZXR1cm4gdjtpPW4uZXZlbnQmJmsuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0haWIudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRiLnRlc3QoZCk/XCImXCI6XCI/XCIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1mYi50ZXN0KGQpP2QucmVwbGFjZShmYixcIiQxXz1cIitjYisrKTpkKyhkYi50ZXN0KGQpP1wiJlwiOlwiP1wiKStcIl89XCIrY2IrKykpLGsuaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixuLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09ay5kYXRhVHlwZXNbMF0/XCIsIFwiK25iK1wiOyBxPTAuMDFcIjpcIlwiKTprLmFjY2VwdHNbXCIqXCJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT1cImFib3J0XCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXJiKG1iLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKFwiYWpheFNlbmRcIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KFwidGltZW91dFwiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHxcIlwiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT10YihrLHYsZikpLHU9dWIoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHxcIkhFQURcIj09PWsudHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09YT94PVwibm90bW9kaWZpZWRcIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD1cImVycm9yXCIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KStcIlwiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3Ysa10pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLG4uZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtuW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBuLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxuLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxuLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFuLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB2Yj0vJTIwL2csd2I9L1xcW1xcXSQvLHhiPS9cXHI/XFxuL2cseWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHpiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBBYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUFiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKHZiLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh4YixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHhiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBCYj0wLENiPXt9LERiPXswOjIwMCwxMjIzOjIwNH0sRWI9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gQ2IpQ2JbYV0oKX0pLGsuY29ycz0hIUViJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gRWIsay5hamF4PUViPSEhRWIsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBrLmNvcnN8fEViJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQmI7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgQ2JbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCxcImFib3J0XCI9PT1hP2YuYWJvcnQoKTpcImVycm9yXCI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKERiW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YihcImVycm9yXCIpLGI9Q2JbZ109YihcImFib3J0XCIpO3RyeXtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpfWNhdGNoKGgpe2lmKGIpdGhyb3cgaH19LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksbi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLG4uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oXCI8c2NyaXB0PlwiKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgRmI9W10sR2I9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztuLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1GYi5wb3AoKXx8bi5leHBhbmRvK1wiX1wiK2NiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEdiLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZHYi50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEdiLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRiLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxGYi5wdXNoKGUpKSxnJiZuLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bDt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bi5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZuKGUpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBIYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmSGIpcmV0dXJuIEhiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZSxkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG4uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBJYj1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBKYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyh0eXBlb2YgZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1VJiYoZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPUpiKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1uLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxJYjt3aGlsZShhJiYhbi5ub2RlTmFtZShhLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxJYn0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYixjKXt2YXIgZD1cInBhZ2VZT2Zmc2V0XCI9PT1jO24uZm5bYl09ZnVuY3Rpb24oZSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGUsZil7dmFyIGc9SmIoYik7cmV0dXJuIHZvaWQgMD09PWY/Zz9nW2NdOmJbZV06dm9pZChnP2cuc2Nyb2xsVG8oZD9hLnBhZ2VYT2Zmc2V0OmYsZD9mOmEucGFnZVlPZmZzZXQpOmJbZV09Zil9LGIsZSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG4uZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXlhKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPXhhKGEsYiksdmEudGVzdChjKT9uKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe24uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBuLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5W1wic2Nyb2xsXCIrYV0sZVtcInNjcm9sbFwiK2FdLGIuYm9keVtcIm9mZnNldFwiK2FdLGVbXCJvZmZzZXRcIithXSxlW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1kP24uY3NzKGIsYyxnKTpuLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgS2I9YS5qUXVlcnksTGI9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TGIpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUtiKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXAiLCIvKlxuIEFuZ3VsYXJKUyB2MS40LjVcbiAoYykgMjAxMC0yMDE1IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihOLFcsdSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEcoYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGM7Yz1cIltcIisoYj9iK1wiOlwiOlwiXCIpK2ErXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjQuNS9cIisoYj9iK1wiL1wiOlwiXCIpK2E7Zm9yKGE9MTthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKXtjPWMrKDE9PWE/XCI/XCI6XCImXCIpK1wicFwiKyhhLTEpK1wiPVwiO3ZhciBkPWVuY29kZVVSSUNvbXBvbmVudCxlO2U9YXJndW1lbnRzW2FdO2U9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6XCJzdHJpbmdcIiE9dHlwZW9mIGU/SlNPTi5zdHJpbmdpZnkoZSk6ZTtjKz1kKGUpfXJldHVybiBFcnJvcihjKX19ZnVuY3Rpb24gRGEoYil7aWYobnVsbD09Ynx8WWEoYikpcmV0dXJuITE7dmFyIGE9XCJsZW5ndGhcImluIE9iamVjdChiKSYmYi5sZW5ndGg7XG5yZXR1cm4gYi5ub2RlVHlwZT09PXBhJiZhPyEwOkgoYil8fEsoYil8fDA9PT1hfHxcIm51bWJlclwiPT09dHlwZW9mIGEmJjA8YSYmYS0xIGluIGJ9ZnVuY3Rpb24gbihiLGEsYyl7dmFyIGQsZTtpZihiKWlmKEIoYikpZm9yKGQgaW4gYilcInByb3RvdHlwZVwiPT1kfHxcImxlbmd0aFwiPT1kfHxcIm5hbWVcIj09ZHx8Yi5oYXNPd25Qcm9wZXJ0eSYmIWIuaGFzT3duUHJvcGVydHkoZCl8fGEuY2FsbChjLGJbZF0sZCxiKTtlbHNlIGlmKEsoYil8fERhKGIpKXt2YXIgZj1cIm9iamVjdFwiIT09dHlwZW9mIGI7ZD0wO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspKGZ8fGQgaW4gYikmJmEuY2FsbChjLGJbZF0sZCxiKX1lbHNlIGlmKGIuZm9yRWFjaCYmYi5mb3JFYWNoIT09biliLmZvckVhY2goYSxjLGIpO2Vsc2UgaWYobGMoYikpZm9yKGQgaW4gYilhLmNhbGwoYyxiW2RdLGQsYik7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5oYXNPd25Qcm9wZXJ0eSlmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJlxuYS5jYWxsKGMsYltkXSxkLGIpO2Vsc2UgZm9yKGQgaW4gYilOYS5jYWxsKGIsZCkmJmEuY2FsbChjLGJbZF0sZCxiKTtyZXR1cm4gYn1mdW5jdGlvbiBtYyhiLGEsYyl7Zm9yKHZhciBkPU9iamVjdC5rZXlzKGIpLnNvcnQoKSxlPTA7ZTxkLmxlbmd0aDtlKyspYS5jYWxsKGMsYltkW2VdXSxkW2VdKTtyZXR1cm4gZH1mdW5jdGlvbiBuYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtiKGMsYSl9fWZ1bmN0aW9uIFVkKCl7cmV0dXJuKyttYn1mdW5jdGlvbiBvYyhiLGEpe2E/Yi4kJGhhc2hLZXk9YTpkZWxldGUgYi4kJGhhc2hLZXl9ZnVuY3Rpb24gTWIoYixhLGMpe2Zvcih2YXIgZD1iLiQkaGFzaEtleSxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKXt2YXIgZz1hW2VdO2lmKEQoZyl8fEIoZykpZm9yKHZhciBoPU9iamVjdC5rZXlzKGcpLGw9MCxrPWgubGVuZ3RoO2w8aztsKyspe3ZhciBtPWhbbF0scT1nW21dO2MmJkQocSk/Y2EocSk/YlttXT1uZXcgRGF0ZShxLnZhbHVlT2YoKSk6T2EocSk/XG5iW21dPW5ldyBSZWdFeHAocSk6KEQoYlttXSl8fChiW21dPUsocSk/W106e30pLE1iKGJbbV0sW3FdLCEwKSk6YlttXT1xfX1vYyhiLGQpO3JldHVybiBifWZ1bmN0aW9uIFEoYil7cmV0dXJuIE1iKGIseGEuY2FsbChhcmd1bWVudHMsMSksITEpfWZ1bmN0aW9uIFZkKGIpe3JldHVybiBNYihiLHhhLmNhbGwoYXJndW1lbnRzLDEpLCEwKX1mdW5jdGlvbiBZKGIpe3JldHVybiBwYXJzZUludChiLDEwKX1mdW5jdGlvbiBOYihiLGEpe3JldHVybiBRKE9iamVjdC5jcmVhdGUoYiksYSl9ZnVuY3Rpb24gdigpe31mdW5jdGlvbiBaYShiKXtyZXR1cm4gYn1mdW5jdGlvbiBxYShiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19ZnVuY3Rpb24gcGMoYil7cmV0dXJuIEIoYi50b1N0cmluZykmJmIudG9TdHJpbmchPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nfWZ1bmN0aW9uIHkoYil7cmV0dXJuXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHgoYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PVxudHlwZW9mIGJ9ZnVuY3Rpb24gRChiKXtyZXR1cm4gbnVsbCE9PWImJlwib2JqZWN0XCI9PT10eXBlb2YgYn1mdW5jdGlvbiBsYyhiKXtyZXR1cm4gbnVsbCE9PWImJlwib2JqZWN0XCI9PT10eXBlb2YgYiYmIXFjKGIpfWZ1bmN0aW9uIEgoYil7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBifWZ1bmN0aW9uIFgoYil7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBifWZ1bmN0aW9uIGNhKGIpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09c2EuY2FsbChiKX1mdW5jdGlvbiBCKGIpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBifWZ1bmN0aW9uIE9hKGIpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1zYS5jYWxsKGIpfWZ1bmN0aW9uIFlhKGIpe3JldHVybiBiJiZiLndpbmRvdz09PWJ9ZnVuY3Rpb24gJGEoYil7cmV0dXJuIGImJmIuJGV2YWxBc3luYyYmYi4kd2F0Y2h9ZnVuY3Rpb24gYWIoYil7cmV0dXJuXCJib29sZWFuXCI9PT10eXBlb2YgYn1mdW5jdGlvbiByYyhiKXtyZXR1cm4hKCFifHwhKGIubm9kZU5hbWV8fFxuYi5wcm9wJiZiLmF0dHImJmIuZmluZCkpfWZ1bmN0aW9uIFdkKGIpe3ZhciBhPXt9O2I9Yi5zcGxpdChcIixcIik7dmFyIGM7Zm9yKGM9MDtjPGIubGVuZ3RoO2MrKylhW2JbY11dPSEwO3JldHVybiBhfWZ1bmN0aW9uIHRhKGIpe3JldHVybiBJKGIubm9kZU5hbWV8fGJbMF0mJmJbMF0ubm9kZU5hbWUpfWZ1bmN0aW9uIGJiKGIsYSl7dmFyIGM9Yi5pbmRleE9mKGEpOzA8PWMmJmIuc3BsaWNlKGMsMSk7cmV0dXJuIGN9ZnVuY3Rpb24gZmEoYixhLGMsZCl7aWYoWWEoYil8fCRhKGIpKXRocm93IEVhKFwiY3B3c1wiKTtpZihzYy50ZXN0KHNhLmNhbGwoYSkpKXRocm93IEVhKFwiY3B0YVwiKTtpZihhKXtpZihiPT09YSl0aHJvdyBFYShcImNwaVwiKTtjPWN8fFtdO2Q9ZHx8W107RChiKSYmKGMucHVzaChiKSxkLnB1c2goYSkpO3ZhciBlO2lmKEsoYikpZm9yKGU9YS5sZW5ndGg9MDtlPGIubGVuZ3RoO2UrKylhLnB1c2goZmEoYltlXSxudWxsLGMsZCkpO2Vsc2V7dmFyIGY9YS4kJGhhc2hLZXk7SyhhKT9cbmEubGVuZ3RoPTA6bihhLGZ1bmN0aW9uKGIsYyl7ZGVsZXRlIGFbY119KTtpZihsYyhiKSlmb3IoZSBpbiBiKWFbZV09ZmEoYltlXSxudWxsLGMsZCk7ZWxzZSBpZihiJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5oYXNPd25Qcm9wZXJ0eSlmb3IoZSBpbiBiKWIuaGFzT3duUHJvcGVydHkoZSkmJihhW2VdPWZhKGJbZV0sbnVsbCxjLGQpKTtlbHNlIGZvcihlIGluIGIpTmEuY2FsbChiLGUpJiYoYVtlXT1mYShiW2VdLG51bGwsYyxkKSk7b2MoYSxmKX19ZWxzZSBpZihhPWIsRChiKSl7aWYoYyYmLTEhPT0oZj1jLmluZGV4T2YoYikpKXJldHVybiBkW2ZdO2lmKEsoYikpcmV0dXJuIGZhKGIsW10sYyxkKTtpZihzYy50ZXN0KHNhLmNhbGwoYikpKWE9bmV3IGIuY29uc3RydWN0b3IoYik7ZWxzZSBpZihjYShiKSlhPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTtlbHNlIGlmKE9hKGIpKWE9bmV3IFJlZ0V4cChiLnNvdXJjZSxiLnRvU3RyaW5nKCkubWF0Y2goL1teXFwvXSokLylbMF0pLGEubGFzdEluZGV4PVxuYi5sYXN0SW5kZXg7ZWxzZSByZXR1cm4gZT1PYmplY3QuY3JlYXRlKHFjKGIpKSxmYShiLGUsYyxkKTtkJiYoYy5wdXNoKGIpLGQucHVzaChhKSl9cmV0dXJuIGF9ZnVuY3Rpb24gaWEoYixhKXtpZihLKGIpKXthPWF8fFtdO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhW2NdPWJbY119ZWxzZSBpZihEKGIpKWZvcihjIGluIGE9YXx8e30sYilpZihcIiRcIiE9PWMuY2hhckF0KDApfHxcIiRcIiE9PWMuY2hhckF0KDEpKWFbY109YltjXTtyZXR1cm4gYXx8Yn1mdW5jdGlvbiBrYShiLGEpe2lmKGI9PT1hKXJldHVybiEwO2lmKG51bGw9PT1ifHxudWxsPT09YSlyZXR1cm4hMTtpZihiIT09YiYmYSE9PWEpcmV0dXJuITA7dmFyIGM9dHlwZW9mIGIsZDtpZihjPT10eXBlb2YgYSYmXCJvYmplY3RcIj09YylpZihLKGIpKXtpZighSyhhKSlyZXR1cm4hMTtpZigoYz1iLmxlbmd0aCk9PWEubGVuZ3RoKXtmb3IoZD0wO2Q8YztkKyspaWYoIWthKGJbZF0sYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYoY2EoYikpcmV0dXJuIGNhKGEpP1xua2EoYi5nZXRUaW1lKCksYS5nZXRUaW1lKCkpOiExO2lmKE9hKGIpKXJldHVybiBPYShhKT9iLnRvU3RyaW5nKCk9PWEudG9TdHJpbmcoKTohMTtpZigkYShiKXx8JGEoYSl8fFlhKGIpfHxZYShhKXx8SyhhKXx8Y2EoYSl8fE9hKGEpKXJldHVybiExO2M9Z2EoKTtmb3IoZCBpbiBiKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJiFCKGJbZF0pKXtpZigha2EoYltkXSxhW2RdKSlyZXR1cm4hMTtjW2RdPSEwfWZvcihkIGluIGEpaWYoIShkIGluIGN8fFwiJFwiPT09ZC5jaGFyQXQoMCl8fGFbZF09PT11fHxCKGFbZF0pKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBjYihiLGEsYyl7cmV0dXJuIGIuY29uY2F0KHhhLmNhbGwoYSxjKSl9ZnVuY3Rpb24gdGMoYixhKXt2YXIgYz0yPGFyZ3VtZW50cy5sZW5ndGg/eGEuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIUIoYSl8fGEgaW5zdGFuY2VvZiBSZWdFeHA/YTpjLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP1xuYS5hcHBseShiLGNiKGMsYXJndW1lbnRzLDApKTphLmFwcGx5KGIsYyl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGFyZ3VtZW50cyk6YS5jYWxsKGIpfX1mdW5jdGlvbiBYZChiLGEpe3ZhciBjPWE7XCJzdHJpbmdcIj09PXR5cGVvZiBiJiZcIiRcIj09PWIuY2hhckF0KDApJiZcIiRcIj09PWIuY2hhckF0KDEpP2M9dTpZYShhKT9jPVwiJFdJTkRPV1wiOmEmJlc9PT1hP2M9XCIkRE9DVU1FTlRcIjokYShhKSYmKGM9XCIkU0NPUEVcIik7cmV0dXJuIGN9ZnVuY3Rpb24gZGIoYixhKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIGIpcmV0dXJuIHU7WChhKXx8KGE9YT8yOm51bGwpO3JldHVybiBKU09OLnN0cmluZ2lmeShiLFhkLGEpfWZ1bmN0aW9uIHVjKGIpe3JldHVybiBIKGIpP0pTT04ucGFyc2UoYik6Yn1mdW5jdGlvbiB2YyhiLGEpe3ZhciBjPURhdGUucGFyc2UoXCJKYW4gMDEsIDE5NzAgMDA6MDA6MDAgXCIrYikvNkU0O3JldHVybiBpc05hTihjKT9hOmN9ZnVuY3Rpb24gT2IoYixcbmEsYyl7Yz1jPy0xOjE7dmFyIGQ9dmMoYSxiLmdldFRpbWV6b25lT2Zmc2V0KCkpO2E9YjtiPWMqKGQtYi5nZXRUaW1lem9uZU9mZnNldCgpKTthPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTthLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkrYik7cmV0dXJuIGF9ZnVuY3Rpb24gdWEoYil7Yj16KGIpLmNsb25lKCk7dHJ5e2IuZW1wdHkoKX1jYXRjaChhKXt9dmFyIGM9eihcIjxkaXY+XCIpLmFwcGVuZChiKS5odG1sKCk7dHJ5e3JldHVybiBiWzBdLm5vZGVUeXBlPT09UGE/SShjKTpjLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitJKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIEkoYyl9fWZ1bmN0aW9uIHdjKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfWNhdGNoKGEpe319ZnVuY3Rpb24geGMoYil7dmFyIGE9e307bigoYnx8XCJcIikuc3BsaXQoXCImXCIpLGZ1bmN0aW9uKGIpe3ZhciBkLGUsZjtiJiYoZT1cbmI9Yi5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKSxkPWIuaW5kZXhPZihcIj1cIiksLTEhPT1kJiYoZT1iLnN1YnN0cmluZygwLGQpLGY9Yi5zdWJzdHJpbmcoZCsxKSksZT13YyhlKSx4KGUpJiYoZj14KGYpP3djKGYpOiEwLE5hLmNhbGwoYSxlKT9LKGFbZV0pP2FbZV0ucHVzaChmKTphW2VdPVthW2VdLGZdOmFbZV09ZikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gUGIoYil7dmFyIGE9W107bihiLGZ1bmN0aW9uKGIsZCl7SyhiKT9uKGIsZnVuY3Rpb24oYil7YS5wdXNoKG1hKGQsITApKyghMD09PWI/XCJcIjpcIj1cIittYShiLCEwKSkpfSk6YS5wdXNoKG1hKGQsITApKyghMD09PWI/XCJcIjpcIj1cIittYShiLCEwKSkpfSk7cmV0dXJuIGEubGVuZ3RoP2Euam9pbihcIiZcIik6XCJcIn1mdW5jdGlvbiBuYihiKXtyZXR1cm4gbWEoYiwhMCkucmVwbGFjZSgvJTI2L2dpLFwiJlwiKS5yZXBsYWNlKC8lM0QvZ2ksXCI9XCIpLnJlcGxhY2UoLyUyQi9naSxcIitcIil9ZnVuY3Rpb24gbWEoYixhKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGIpLnJlcGxhY2UoLyU0MC9naSxcblwiQFwiKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUzQi9naSxcIjtcIikucmVwbGFjZSgvJTIwL2csYT9cIiUyMFwiOlwiK1wiKX1mdW5jdGlvbiBZZChiLGEpe3ZhciBjLGQsZT1RYS5sZW5ndGg7Zm9yKGQ9MDtkPGU7KytkKWlmKGM9UWFbZF0rYSxIKGM9Yi5nZXRBdHRyaWJ1dGUoYykpKXJldHVybiBjO3JldHVybiBudWxsfWZ1bmN0aW9uIFpkKGIsYSl7dmFyIGMsZCxlPXt9O24oUWEsZnVuY3Rpb24oYSl7YSs9XCJhcHBcIjshYyYmYi5oYXNBdHRyaWJ1dGUmJmIuaGFzQXR0cmlidXRlKGEpJiYoYz1iLGQ9Yi5nZXRBdHRyaWJ1dGUoYSkpfSk7bihRYSxmdW5jdGlvbihhKXthKz1cImFwcFwiO3ZhciBlOyFjJiYoZT1iLnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYS5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJdXCIpKSYmKGM9ZSxkPWUuZ2V0QXR0cmlidXRlKGEpKX0pO2MmJihlLnN0cmljdERpPW51bGwhPT1ZZChjLFwic3RyaWN0LWRpXCIpLFxuYShjLGQ/W2RdOltdLGUpKX1mdW5jdGlvbiB5YyhiLGEsYyl7RChjKXx8KGM9e30pO2M9USh7c3RyaWN0RGk6ITF9LGMpO3ZhciBkPWZ1bmN0aW9uKCl7Yj16KGIpO2lmKGIuaW5qZWN0b3IoKSl7dmFyIGQ9YlswXT09PVc/XCJkb2N1bWVudFwiOnVhKGIpO3Rocm93IEVhKFwiYnRzdHJwZFwiLGQucmVwbGFjZSgvPC8sXCImbHQ7XCIpLnJlcGxhY2UoLz4vLFwiJmd0O1wiKSk7fWE9YXx8W107YS51bnNoaWZ0KFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS52YWx1ZShcIiRyb290RWxlbWVudFwiLGIpfV0pO2MuZGVidWdJbmZvRW5hYmxlZCYmYS5wdXNoKFtcIiRjb21waWxlUHJvdmlkZXJcIixmdW5jdGlvbihhKXthLmRlYnVnSW5mb0VuYWJsZWQoITApfV0pO2EudW5zaGlmdChcIm5nXCIpO2Q9ZWIoYSxjLnN0cmljdERpKTtkLmludm9rZShbXCIkcm9vdFNjb3BlXCIsXCIkcm9vdEVsZW1lbnRcIixcIiRjb21waWxlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkKXthLiRhcHBseShmdW5jdGlvbigpe2IuZGF0YShcIiRpbmplY3RvclwiLFxuZCk7YyhiKShhKX0pfV0pO3JldHVybiBkfSxlPS9eTkdfRU5BQkxFX0RFQlVHX0lORk8hLyxmPS9eTkdfREVGRVJfQk9PVFNUUkFQIS87TiYmZS50ZXN0KE4ubmFtZSkmJihjLmRlYnVnSW5mb0VuYWJsZWQ9ITAsTi5uYW1lPU4ubmFtZS5yZXBsYWNlKGUsXCJcIikpO2lmKE4mJiFmLnRlc3QoTi5uYW1lKSlyZXR1cm4gZCgpO04ubmFtZT1OLm5hbWUucmVwbGFjZShmLFwiXCIpO2FhLnJlc3VtZUJvb3RzdHJhcD1mdW5jdGlvbihiKXtuKGIsZnVuY3Rpb24oYil7YS5wdXNoKGIpfSk7cmV0dXJuIGQoKX07QihhYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkmJmFhLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCl9ZnVuY3Rpb24gJGQoKXtOLm5hbWU9XCJOR19FTkFCTEVfREVCVUdfSU5GTyFcIitOLm5hbWU7Ti5sb2NhdGlvbi5yZWxvYWQoKX1mdW5jdGlvbiBhZShiKXtiPWFhLmVsZW1lbnQoYikuaW5qZWN0b3IoKTtpZighYil0aHJvdyBFYShcInRlc3RcIik7cmV0dXJuIGIuZ2V0KFwiJCR0ZXN0YWJpbGl0eVwiKX1cbmZ1bmN0aW9uIHpjKGIsYSl7YT1hfHxcIl9cIjtyZXR1cm4gYi5yZXBsYWNlKGJlLGZ1bmN0aW9uKGIsZCl7cmV0dXJuKGQ/YTpcIlwiKStiLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBjZSgpe3ZhciBiO2lmKCFBYyl7dmFyIGE9b2IoKTtsYT1OLmpRdWVyeTt4KGEpJiYobGE9bnVsbD09PWE/dTpOW2FdKTtsYSYmbGEuZm4ub24/KHo9bGEsUShsYS5mbix7c2NvcGU6UmEuc2NvcGUsaXNvbGF0ZVNjb3BlOlJhLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOlJhLmNvbnRyb2xsZXIsaW5qZWN0b3I6UmEuaW5qZWN0b3IsaW5oZXJpdGVkRGF0YTpSYS5pbmhlcml0ZWREYXRhfSksYj1sYS5jbGVhbkRhdGEsbGEuY2xlYW5EYXRhPWZ1bmN0aW9uKGEpe3ZhciBkO2lmKFFiKVFiPSExO2Vsc2UgZm9yKHZhciBlPTAsZjtudWxsIT0oZj1hW2VdKTtlKyspKGQ9bGEuX2RhdGEoZixcImV2ZW50c1wiKSkmJmQuJGRlc3Ryb3kmJmxhKGYpLnRyaWdnZXJIYW5kbGVyKFwiJGRlc3Ryb3lcIik7YihhKX0pOno9UjthYS5lbGVtZW50PVxuejtBYz0hMH19ZnVuY3Rpb24gcGIoYixhLGMpe2lmKCFiKXRocm93IEVhKFwiYXJlcVwiLGF8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gU2EoYixhLGMpe2MmJksoYikmJihiPWJbYi5sZW5ndGgtMV0pO3BiKEIoYiksYSxcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGImJlwib2JqZWN0XCI9PT10eXBlb2YgYj9iLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBUYShiLGEpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWIpdGhyb3cgRWEoXCJiYWRuYW1lXCIsYSk7fWZ1bmN0aW9uIEJjKGIsYSxjKXtpZighYSlyZXR1cm4gYjthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZCxlPWIsZj1hLmxlbmd0aCxnPTA7ZzxmO2crKylkPWFbZ10sYiYmKGI9KGU9YilbZF0pO3JldHVybiFjJiZCKGIpP3RjKGUsYik6Yn1mdW5jdGlvbiBxYihiKXt2YXIgYT1iWzBdO2I9YltiLmxlbmd0aC0xXTt2YXIgYz1bYV07ZG97YT1hLm5leHRTaWJsaW5nO1xuaWYoIWEpYnJlYWs7Yy5wdXNoKGEpfXdoaWxlKGEhPT1iKTtyZXR1cm4geihjKX1mdW5jdGlvbiBnYSgpe3JldHVybiBPYmplY3QuY3JlYXRlKG51bGwpfWZ1bmN0aW9uIGRlKGIpe2Z1bmN0aW9uIGEoYSxiLGMpe3JldHVybiBhW2JdfHwoYVtiXT1jKCkpfXZhciBjPUcoXCIkaW5qZWN0b3JcIiksZD1HKFwibmdcIik7Yj1hKGIsXCJhbmd1bGFyXCIsT2JqZWN0KTtiLiQkbWluRXJyPWIuJCRtaW5FcnJ8fEc7cmV0dXJuIGEoYixcIm1vZHVsZVwiLGZ1bmN0aW9uKCl7dmFyIGI9e307cmV0dXJuIGZ1bmN0aW9uKGYsZyxoKXtpZihcImhhc093blByb3BlcnR5XCI9PT1mKXRocm93IGQoXCJiYWRuYW1lXCIsXCJtb2R1bGVcIik7ZyYmYi5oYXNPd25Qcm9wZXJ0eShmKSYmKGJbZl09bnVsbCk7cmV0dXJuIGEoYixmLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMsZSxmKXtmfHwoZj1kKTtyZXR1cm4gZnVuY3Rpb24oKXtmW2V8fFwicHVzaFwiXShbYixjLGFyZ3VtZW50c10pO3JldHVybiBFfX1mdW5jdGlvbiBiKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKGIsXG5lKXtlJiZCKGUpJiYoZS4kJG1vZHVsZU5hbWU9Zik7ZC5wdXNoKFthLGMsYXJndW1lbnRzXSk7cmV0dXJuIEV9fWlmKCFnKXRocm93IGMoXCJub21vZFwiLGYpO3ZhciBkPVtdLGU9W10scz1bXSx0PWEoXCIkaW5qZWN0b3JcIixcImludm9rZVwiLFwicHVzaFwiLGUpLEU9e19pbnZva2VRdWV1ZTpkLF9jb25maWdCbG9ja3M6ZSxfcnVuQmxvY2tzOnMscmVxdWlyZXM6ZyxuYW1lOmYscHJvdmlkZXI6YihcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmIoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmIoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTphKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmEoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksZGVjb3JhdG9yOmIoXCIkcHJvdmlkZVwiLFwiZGVjb3JhdG9yXCIpLGFuaW1hdGlvbjpiKFwiJGFuaW1hdGVQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZmlsdGVyOmIoXCIkZmlsdGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGNvbnRyb2xsZXI6YihcIiRjb250cm9sbGVyUHJvdmlkZXJcIixcblwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29uZmlnOnQscnVuOmZ1bmN0aW9uKGEpe3MucHVzaChhKTtyZXR1cm4gdGhpc319O2gmJnQoaCk7cmV0dXJuIEV9KX19KX1mdW5jdGlvbiBlZShiKXtRKGIse2Jvb3RzdHJhcDp5Yyxjb3B5OmZhLGV4dGVuZDpRLG1lcmdlOlZkLGVxdWFsczprYSxlbGVtZW50OnosZm9yRWFjaDpuLGluamVjdG9yOmViLG5vb3A6dixiaW5kOnRjLHRvSnNvbjpkYixmcm9tSnNvbjp1YyxpZGVudGl0eTpaYSxpc1VuZGVmaW5lZDp5LGlzRGVmaW5lZDp4LGlzU3RyaW5nOkgsaXNGdW5jdGlvbjpCLGlzT2JqZWN0OkQsaXNOdW1iZXI6WCxpc0VsZW1lbnQ6cmMsaXNBcnJheTpLLHZlcnNpb246ZmUsaXNEYXRlOmNhLGxvd2VyY2FzZTpJLHVwcGVyY2FzZTpyYixjYWxsYmFja3M6e2NvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6YWUsJCRtaW5FcnI6RywkJGNzcDpGYSxyZWxvYWRXaXRoRGVidWdJbmZvOiRkfSk7XG5SYj1kZShOKTtSYihcIm5nXCIsW1wibmdMb2NhbGVcIl0sW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOmdlfSk7YS5wcm92aWRlcihcIiRjb21waWxlXCIsQ2MpLmRpcmVjdGl2ZSh7YTpoZSxpbnB1dDpEYyx0ZXh0YXJlYTpEYyxmb3JtOmllLHNjcmlwdDpqZSxzZWxlY3Q6a2Usc3R5bGU6bGUsb3B0aW9uOm1lLG5nQmluZDpuZSxuZ0JpbmRIdG1sOm9lLG5nQmluZFRlbXBsYXRlOnBlLG5nQ2xhc3M6cWUsbmdDbGFzc0V2ZW46cmUsbmdDbGFzc09kZDpzZSxuZ0Nsb2FrOnRlLG5nQ29udHJvbGxlcjp1ZSxuZ0Zvcm06dmUsbmdIaWRlOndlLG5nSWY6eGUsbmdJbmNsdWRlOnllLG5nSW5pdDp6ZSxuZ05vbkJpbmRhYmxlOkFlLG5nUGx1cmFsaXplOkJlLG5nUmVwZWF0OkNlLG5nU2hvdzpEZSxuZ1N0eWxlOkVlLG5nU3dpdGNoOkZlLG5nU3dpdGNoV2hlbjpHZSxuZ1N3aXRjaERlZmF1bHQ6SGUsbmdPcHRpb25zOkllLG5nVHJhbnNjbHVkZTpKZSxuZ01vZGVsOktlLFxubmdMaXN0OkxlLG5nQ2hhbmdlOk1lLHBhdHRlcm46RWMsbmdQYXR0ZXJuOkVjLHJlcXVpcmVkOkZjLG5nUmVxdWlyZWQ6RmMsbWlubGVuZ3RoOkdjLG5nTWlubGVuZ3RoOkdjLG1heGxlbmd0aDpIYyxuZ01heGxlbmd0aDpIYyxuZ1ZhbHVlOk5lLG5nTW9kZWxPcHRpb25zOk9lfSkuZGlyZWN0aXZlKHtuZ0luY2x1ZGU6UGV9KS5kaXJlY3RpdmUoc2IpLmRpcmVjdGl2ZShJYyk7YS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDpRZSwkYW5pbWF0ZTpSZSwkYW5pbWF0ZUNzczpTZSwkJGFuaW1hdGVRdWV1ZTpUZSwkJEFuaW1hdGVSdW5uZXI6VWUsJGJyb3dzZXI6VmUsJGNhY2hlRmFjdG9yeTpXZSwkY29udHJvbGxlcjpYZSwkZG9jdW1lbnQ6WWUsJGV4Y2VwdGlvbkhhbmRsZXI6WmUsJGZpbHRlcjpKYywkJGZvcmNlUmVmbG93OiRlLCRpbnRlcnBvbGF0ZTphZiwkaW50ZXJ2YWw6YmYsJGh0dHA6Y2YsJGh0dHBQYXJhbVNlcmlhbGl6ZXI6ZGYsJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2U6ZWYsXG4kaHR0cEJhY2tlbmQ6ZmYsJGxvY2F0aW9uOmdmLCRsb2c6aGYsJHBhcnNlOmpmLCRyb290U2NvcGU6a2YsJHE6bGYsJCRxOm1mLCRzY2U6bmYsJHNjZURlbGVnYXRlOm9mLCRzbmlmZmVyOnBmLCR0ZW1wbGF0ZUNhY2hlOnFmLCR0ZW1wbGF0ZVJlcXVlc3Q6cmYsJCR0ZXN0YWJpbGl0eTpzZiwkdGltZW91dDp0Ziwkd2luZG93OnVmLCQkckFGOnZmLCQkanFMaXRlOndmLCQkSGFzaE1hcDp4ZiwkJGNvb2tpZVJlYWRlcjp5Zn0pfV0pfWZ1bmN0aW9uIGZiKGIpe3JldHVybiBiLnJlcGxhY2UoemYsZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIGU/ZC50b1VwcGVyQ2FzZSgpOmR9KS5yZXBsYWNlKEFmLFwiTW96JDFcIil9ZnVuY3Rpb24gS2MoYil7Yj1iLm5vZGVUeXBlO3JldHVybiBiPT09cGF8fCFifHw5PT09Yn1mdW5jdGlvbiBMYyhiLGEpe3ZhciBjLGQsZT1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxmPVtdO2lmKFNiLnRlc3QoYikpe2M9Y3x8ZS5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuZD0oQmYuZXhlYyhiKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7ZD1uYVtkXXx8bmEuX2RlZmF1bHQ7Yy5pbm5lckhUTUw9ZFsxXStiLnJlcGxhY2UoQ2YsXCI8JDE+PC8kMj5cIikrZFsyXTtmb3IoZD1kWzBdO2QtLTspYz1jLmxhc3RDaGlsZDtmPWNiKGYsYy5jaGlsZE5vZGVzKTtjPWUuZmlyc3RDaGlsZDtjLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBmLnB1c2goYS5jcmVhdGVUZXh0Tm9kZShiKSk7ZS50ZXh0Q29udGVudD1cIlwiO2UuaW5uZXJIVE1MPVwiXCI7bihmLGZ1bmN0aW9uKGEpe2UuYXBwZW5kQ2hpbGQoYSl9KTtyZXR1cm4gZX1mdW5jdGlvbiBSKGIpe2lmKGIgaW5zdGFuY2VvZiBSKXJldHVybiBiO3ZhciBhO0goYikmJihiPVQoYiksYT0hMCk7aWYoISh0aGlzIGluc3RhbmNlb2YgUikpe2lmKGEmJlwiPFwiIT1iLmNoYXJBdCgwKSl0aHJvdyBUYihcIm5vc2VsXCIpO3JldHVybiBuZXcgUihiKX1pZihhKXthPVc7dmFyIGM7Yj0oYz1EZi5leGVjKGIpKT9bYS5jcmVhdGVFbGVtZW50KGNbMV0pXTpcbihjPUxjKGIsYSkpP2MuY2hpbGROb2RlczpbXX1NYyh0aGlzLGIpfWZ1bmN0aW9uIFViKGIpe3JldHVybiBiLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24gdGIoYixhKXthfHx1YihiKTtpZihiLnF1ZXJ5U2VsZWN0b3JBbGwpZm9yKHZhciBjPWIucXVlcnlTZWxlY3RvckFsbChcIipcIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl1YihjW2RdKX1mdW5jdGlvbiBOYyhiLGEsYyxkKXtpZih4KGQpKXRocm93IFRiKFwib2ZmYXJnc1wiKTt2YXIgZT0oZD12YihiKSkmJmQuZXZlbnRzLGY9ZCYmZC5oYW5kbGU7aWYoZilpZihhKW4oYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7aWYoeChjKSl7dmFyIGQ9ZVthXTtiYihkfHxbXSxjKTtpZihkJiYwPGQubGVuZ3RoKXJldHVybn1iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxmLCExKTtkZWxldGUgZVthXX0pO2Vsc2UgZm9yKGEgaW4gZSlcIiRkZXN0cm95XCIhPT1hJiZiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxmLCExKSxkZWxldGUgZVthXX1mdW5jdGlvbiB1YihiLFxuYSl7dmFyIGM9Yi5uZzMzOSxkPWMmJmdiW2NdO2QmJihhP2RlbGV0ZSBkLmRhdGFbYV06KGQuaGFuZGxlJiYoZC5ldmVudHMuJGRlc3Ryb3kmJmQuaGFuZGxlKHt9LFwiJGRlc3Ryb3lcIiksTmMoYikpLGRlbGV0ZSBnYltjXSxiLm5nMzM5PXUpKX1mdW5jdGlvbiB2YihiLGEpe3ZhciBjPWIubmczMzksYz1jJiZnYltjXTthJiYhYyYmKGIubmczMzk9Yz0rK0VmLGM9Z2JbY109e2V2ZW50czp7fSxkYXRhOnt9LGhhbmRsZTp1fSk7cmV0dXJuIGN9ZnVuY3Rpb24gVmIoYixhLGMpe2lmKEtjKGIpKXt2YXIgZD14KGMpLGU9IWQmJmEmJiFEKGEpLGY9IWE7Yj0oYj12YihiLCFlKSkmJmIuZGF0YTtpZihkKWJbYV09YztlbHNle2lmKGYpcmV0dXJuIGI7aWYoZSlyZXR1cm4gYiYmYlthXTtRKGIsYSl9fX1mdW5jdGlvbiB3YihiLGEpe3JldHVybiBiLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK1xuYStcIiBcIik6ITF9ZnVuY3Rpb24geGIoYixhKXthJiZiLnNldEF0dHJpYnV0ZSYmbihhLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXtiLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsVCgoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5yZXBsYWNlKFwiIFwiK1QoYSkrXCIgXCIsXCIgXCIpKSl9KX1mdW5jdGlvbiB5YihiLGEpe2lmKGEmJmIuc2V0QXR0cmlidXRlKXt2YXIgYz0oXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKTtuKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2E9VChhKTstMT09PWMuaW5kZXhPZihcIiBcIithK1wiIFwiKSYmKGMrPWErXCIgXCIpfSk7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFQoYykpfX1mdW5jdGlvbiBNYyhiLGEpe2lmKGEpaWYoYS5ub2RlVHlwZSliW2IubGVuZ3RoKytdPWE7ZWxzZXt2YXIgYz1hLmxlbmd0aDtpZihcIm51bWJlclwiPT09dHlwZW9mIGMmJmEud2luZG93IT09XG5hKXtpZihjKWZvcih2YXIgZD0wO2Q8YztkKyspYltiLmxlbmd0aCsrXT1hW2RdfWVsc2UgYltiLmxlbmd0aCsrXT1hfX1mdW5jdGlvbiBPYyhiLGEpe3JldHVybiB6YihiLFwiJFwiKyhhfHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gemIoYixhLGMpezk9PWIubm9kZVR5cGUmJihiPWIuZG9jdW1lbnRFbGVtZW50KTtmb3IoYT1LKGEpP2E6W2FdO2I7KXtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoKGM9ei5kYXRhKGIsYVtkXSkpIT09dSlyZXR1cm4gYztiPWIucGFyZW50Tm9kZXx8MTE9PT1iLm5vZGVUeXBlJiZiLmhvc3R9fWZ1bmN0aW9uIFBjKGIpe2Zvcih0YihiLCEwKTtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX1mdW5jdGlvbiBXYihiLGEpe2F8fHRiKGIpO3ZhciBjPWIucGFyZW50Tm9kZTtjJiZjLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIEZmKGIsYSl7YT1hfHxOO2lmKFwiY29tcGxldGVcIj09PWEuZG9jdW1lbnQucmVhZHlTdGF0ZSlhLnNldFRpbWVvdXQoYik7XG5lbHNlIHooYSkub24oXCJsb2FkXCIsYil9ZnVuY3Rpb24gUWMoYixhKXt2YXIgYz1BYlthLnRvTG93ZXJDYXNlKCldO3JldHVybiBjJiZSY1t0YShiKV0mJmN9ZnVuY3Rpb24gR2YoYixhKXt2YXIgYz1iLm5vZGVOYW1lO3JldHVybihcIklOUFVUXCI9PT1jfHxcIlRFWFRBUkVBXCI9PT1jKSYmU2NbYV19ZnVuY3Rpb24gSGYoYixhKXt2YXIgYz1mdW5jdGlvbihjLGUpe2MuaXNEZWZhdWx0UHJldmVudGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVmYXVsdFByZXZlbnRlZH07dmFyIGY9YVtlfHxjLnR5cGVdLGc9Zj9mLmxlbmd0aDowO2lmKGcpe2lmKHkoYy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKXt2YXIgaD1jLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtjLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwO2Muc3RvcFByb3BhZ2F0aW9uJiZjLnN0b3BQcm9wYWdhdGlvbigpO2gmJmguY2FsbChjKX19Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1cbmZ1bmN0aW9uKCl7cmV0dXJuITA9PT1jLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH07MTxnJiYoZj1pYShmKSk7Zm9yKHZhciBsPTA7bDxnO2wrKyljLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGZbbF0uY2FsbChiLGMpfX07Yy5lbGVtPWI7cmV0dXJuIGN9ZnVuY3Rpb24gd2YoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gUShSLHtoYXNDbGFzczpmdW5jdGlvbihiLGEpe2IuYXR0ciYmKGI9YlswXSk7cmV0dXJuIHdiKGIsYSl9LGFkZENsYXNzOmZ1bmN0aW9uKGIsYSl7Yi5hdHRyJiYoYj1iWzBdKTtyZXR1cm4geWIoYixhKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYixhKXtiLmF0dHImJihiPWJbMF0pO3JldHVybiB4YihiLGEpfX0pfX1mdW5jdGlvbiBHYShiLGEpe3ZhciBjPWImJmIuJCRoYXNoS2V5O2lmKGMpcmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGMmJihjPWIuJCRoYXNoS2V5KCkpLGM7Yz10eXBlb2YgYjtyZXR1cm4gYz1cImZ1bmN0aW9uXCI9PVxuY3x8XCJvYmplY3RcIj09YyYmbnVsbCE9PWI/Yi4kJGhhc2hLZXk9YytcIjpcIisoYXx8VWQpKCk6YytcIjpcIitifWZ1bmN0aW9uIFVhKGIsYSl7aWYoYSl7dmFyIGM9MDt0aGlzLm5leHRVaWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK2N9fW4oYix0aGlzLnB1dCx0aGlzKX1mdW5jdGlvbiBJZihiKXtyZXR1cm4oYj1iLnRvU3RyaW5nKCkucmVwbGFjZShUYyxcIlwiKS5tYXRjaChVYykpP1wiZnVuY3Rpb24oXCIrKGJbMV18fFwiXCIpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sXCIgXCIpK1wiKVwiOlwiZm5cIn1mdW5jdGlvbiBlYihiLGEpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoRChiKSluKGIsbmMoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gZChhLGIpe1RhKGEsXCJzZXJ2aWNlXCIpO2lmKEIoYil8fEsoYikpYj1zLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgSGEoXCJwZ2V0XCIsYSk7cmV0dXJuIHFbYStcIlByb3ZpZGVyXCJdPWJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPVxuRS5pbnZva2UoYix0aGlzKTtpZih5KGMpKXRocm93IEhhKFwidW5kZWZcIixhKTtyZXR1cm4gY319ZnVuY3Rpb24gZihhLGIsYyl7cmV0dXJuIGQoYSx7JGdldDohMSE9PWM/ZShhLGIpOmJ9KX1mdW5jdGlvbiBnKGEpe3BiKHkoYSl8fEsoYSksXCJtb2R1bGVzVG9Mb2FkXCIsXCJub3QgYW4gYXJyYXlcIik7dmFyIGI9W10sYztuKGEsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXt2YXIgYixjO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZT1hW2JdLGY9cy5nZXQoZVswXSk7ZltlWzFdXS5hcHBseShmLGVbMl0pfX1pZighbS5nZXQoYSkpe20ucHV0KGEsITApO3RyeXtIKGEpPyhjPVJiKGEpLGI9Yi5jb25jYXQoZyhjLnJlcXVpcmVzKSkuY29uY2F0KGMuX3J1bkJsb2NrcyksZChjLl9pbnZva2VRdWV1ZSksZChjLl9jb25maWdCbG9ja3MpKTpCKGEpP2IucHVzaChzLmludm9rZShhKSk6SyhhKT9iLnB1c2gocy5pbnZva2UoYSkpOlNhKGEsXCJtb2R1bGVcIil9Y2F0Y2goZSl7dGhyb3cgSyhhKSYmXG4oYT1hW2EubGVuZ3RoLTFdKSxlLm1lc3NhZ2UmJmUuc3RhY2smJi0xPT1lLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSYmKGU9ZS5tZXNzYWdlK1wiXFxuXCIrZS5zdGFjayksSGEoXCJtb2R1bGVyclwiLGEsZS5zdGFja3x8ZS5tZXNzYWdlfHxlKTt9fX0pO3JldHVybiBifWZ1bmN0aW9uIGgoYixjKXtmdW5jdGlvbiBkKGEsZSl7aWYoYi5oYXNPd25Qcm9wZXJ0eShhKSl7aWYoYlthXT09PWwpdGhyb3cgSGEoXCJjZGVwXCIsYStcIiA8LSBcIitrLmpvaW4oXCIgPC0gXCIpKTtyZXR1cm4gYlthXX10cnl7cmV0dXJuIGsudW5zaGlmdChhKSxiW2FdPWwsYlthXT1jKGEsZSl9Y2F0Y2goZil7dGhyb3cgYlthXT09PWwmJmRlbGV0ZSBiW2FdLGY7fWZpbmFsbHl7ay5zaGlmdCgpfX1mdW5jdGlvbiBlKGIsYyxmLGcpe1wic3RyaW5nXCI9PT10eXBlb2YgZiYmKGc9ZixmPW51bGwpO3ZhciBoPVtdLGs9ZWIuJCRhbm5vdGF0ZShiLGEsZyksbCxzLG07cz0wO2ZvcihsPWsubGVuZ3RoO3M8bDtzKyspe209a1tzXTtpZihcInN0cmluZ1wiIT09XG50eXBlb2YgbSl0aHJvdyBIYShcIml0a25cIixtKTtoLnB1c2goZiYmZi5oYXNPd25Qcm9wZXJ0eShtKT9mW21dOmQobSxnKSl9SyhiKSYmKGI9YltsXSk7cmV0dXJuIGIuYXBwbHkoYyxoKX1yZXR1cm57aW52b2tlOmUsaW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU9iamVjdC5jcmVhdGUoKEsoYSk/YVthLmxlbmd0aC0xXTphKS5wcm90b3R5cGV8fG51bGwpO2E9ZShhLGQsYixjKTtyZXR1cm4gRChhKXx8QihhKT9hOmR9LGdldDpkLGFubm90YXRlOmViLiQkYW5ub3RhdGUsaGFzOmZ1bmN0aW9uKGEpe3JldHVybiBxLmhhc093blByb3BlcnR5KGErXCJQcm92aWRlclwiKXx8Yi5oYXNPd25Qcm9wZXJ0eShhKX19fWE9ITA9PT1hO3ZhciBsPXt9LGs9W10sbT1uZXcgVWEoW10sITApLHE9eyRwcm92aWRlOntwcm92aWRlcjpjKGQpLGZhY3Rvcnk6YyhmKSxzZXJ2aWNlOmMoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLFtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksXG52YWx1ZTpjKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSxxYShiKSwhMSl9KSxjb25zdGFudDpjKGZ1bmN0aW9uKGEsYil7VGEoYSxcImNvbnN0YW50XCIpO3FbYV09Yjt0W2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1zLmdldChhK1wiUHJvdmlkZXJcIiksZD1jLiRnZXQ7Yy4kZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9RS5pbnZva2UoZCxjKTtyZXR1cm4gRS5pbnZva2UoYixudWxsLHskZGVsZWdhdGU6YX0pfX19fSxzPXEuJGluamVjdG9yPWgocSxmdW5jdGlvbihhLGIpe2FhLmlzU3RyaW5nKGIpJiZrLnB1c2goYik7dGhyb3cgSGEoXCJ1bnByXCIsay5qb2luKFwiIDwtIFwiKSk7fSksdD17fSxFPXQuJGluamVjdG9yPWgodCxmdW5jdGlvbihhLGIpe3ZhciBjPXMuZ2V0KGErXCJQcm92aWRlclwiLGIpO3JldHVybiBFLmludm9rZShjLiRnZXQsYyx1LGEpfSk7bihnKGIpLGZ1bmN0aW9uKGEpe2EmJkUuaW52b2tlKGEpfSk7cmV0dXJuIEV9ZnVuY3Rpb24gUWUoKXt2YXIgYj0hMDt0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nPVxuZnVuY3Rpb24oKXtiPSExfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9bnVsbDtBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoXCJhXCI9PT10YShhKSlyZXR1cm4gYj1hLCEwfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihiKXtpZihiKXtiLnNjcm9sbEludG9WaWV3KCk7dmFyIGM7Yz1nLnlPZmZzZXQ7QihjKT9jPWMoKTpyYyhjKT8oYz1jWzBdLGM9XCJmaXhlZFwiIT09YS5nZXRDb21wdXRlZFN0eWxlKGMpLnBvc2l0aW9uPzA6Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20pOlgoYyl8fChjPTApO2MmJihiPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLGEuc2Nyb2xsQnkoMCxiLWMpKX1lbHNlIGEuc2Nyb2xsVG8oMCwwKX1mdW5jdGlvbiBnKGEpe2E9SChhKT9hOmMuaGFzaCgpO3ZhciBiO2E/KGI9aC5nZXRFbGVtZW50QnlJZChhKSk/ZihiKTpcbihiPWUoaC5nZXRFbGVtZW50c0J5TmFtZShhKSkpP2YoYik6XCJ0b3BcIj09PWEmJmYobnVsbCk6ZihudWxsKX12YXIgaD1hLmRvY3VtZW50O2ImJmQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGFzaCgpfSxmdW5jdGlvbihhLGIpe2E9PT1iJiZcIlwiPT09YXx8RmYoZnVuY3Rpb24oKXtkLiRldmFsQXN5bmMoZyl9KX0pO3JldHVybiBnfV19ZnVuY3Rpb24gaGIoYixhKXtpZighYiYmIWEpcmV0dXJuXCJcIjtpZighYilyZXR1cm4gYTtpZighYSlyZXR1cm4gYjtLKGIpJiYoYj1iLmpvaW4oXCIgXCIpKTtLKGEpJiYoYT1hLmpvaW4oXCIgXCIpKTtyZXR1cm4gYitcIiBcIithfWZ1bmN0aW9uIEpmKGIpe0goYikmJihiPWIuc3BsaXQoXCIgXCIpKTt2YXIgYT1nYSgpO24oYixmdW5jdGlvbihiKXtiLmxlbmd0aCYmKGFbYl09ITApfSk7cmV0dXJuIGF9ZnVuY3Rpb24gSWEoYil7cmV0dXJuIEQoYik/Yjp7fX1mdW5jdGlvbiBLZihiLGEsYyxkKXtmdW5jdGlvbiBlKGEpe3RyeXthLmFwcGx5KG51bGwseGEuY2FsbChhcmd1bWVudHMsXG4xKSl9ZmluYWxseXtpZihFLS0sMD09PUUpZm9yKDtMLmxlbmd0aDspdHJ5e0wucG9wKCkoKX1jYXRjaChiKXtjLmVycm9yKGIpfX19ZnVuY3Rpb24gZigpe2coKTtoKCl9ZnVuY3Rpb24gZygpe2E6e3RyeXt3PW0uc3RhdGU7YnJlYWsgYX1jYXRjaChhKXt9dz12b2lkIDB9dz15KHcpP251bGw6dztrYSh3LEYpJiYodz1GKTtGPXd9ZnVuY3Rpb24gaCgpe2lmKEEhPT1sLnVybCgpfHxwIT09dylBPWwudXJsKCkscD13LG4oTyxmdW5jdGlvbihhKXthKGwudXJsKCksdyl9KX12YXIgbD10aGlzLGs9Yi5sb2NhdGlvbixtPWIuaGlzdG9yeSxxPWIuc2V0VGltZW91dCxzPWIuY2xlYXJUaW1lb3V0LHQ9e307bC5pc01vY2s9ITE7dmFyIEU9MCxMPVtdO2wuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdD1lO2wuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudD1mdW5jdGlvbigpe0UrK307bC5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKGEpezA9PT1FP2EoKTpcbkwucHVzaChhKX07dmFyIHcscCxBPWsuaHJlZixyPWEuZmluZChcImJhc2VcIiksTT1udWxsO2coKTtwPXc7bC51cmw9ZnVuY3Rpb24oYSxjLGUpe3koZSkmJihlPW51bGwpO2shPT1iLmxvY2F0aW9uJiYoaz1iLmxvY2F0aW9uKTttIT09Yi5oaXN0b3J5JiYobT1iLmhpc3RvcnkpO2lmKGEpe3ZhciBmPXA9PT1lO2lmKEE9PT1hJiYoIWQuaGlzdG9yeXx8ZikpcmV0dXJuIGw7dmFyIGg9QSYmSmEoQSk9PT1KYShhKTtBPWE7cD1lO2lmKCFkLmhpc3Rvcnl8fGgmJmYpe2lmKCFofHxNKU09YTtjP2sucmVwbGFjZShhKTpoPyhjPWssZT1hLmluZGV4T2YoXCIjXCIpLGE9LTE9PT1lP1wiXCI6YS5zdWJzdHIoZSksYy5oYXNoPWEpOmsuaHJlZj1hfWVsc2UgbVtjP1wicmVwbGFjZVN0YXRlXCI6XCJwdXNoU3RhdGVcIl0oZSxcIlwiLGEpLGcoKSxwPXc7cmV0dXJuIGx9cmV0dXJuIE18fGsuaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIil9O2wuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gd307dmFyIE89W10sSj0hMSxGPVxubnVsbDtsLm9uVXJsQ2hhbmdlPWZ1bmN0aW9uKGEpe2lmKCFKKXtpZihkLmhpc3RvcnkpeihiKS5vbihcInBvcHN0YXRlXCIsZik7eihiKS5vbihcImhhc2hjaGFuZ2VcIixmKTtKPSEwfU8ucHVzaChhKTtyZXR1cm4gYX07bC4kJGFwcGxpY2F0aW9uRGVzdHJveWVkPWZ1bmN0aW9uKCl7eihiKS5vZmYoXCJoYXNoY2hhbmdlIHBvcHN0YXRlXCIsZil9O2wuJCRjaGVja1VybENoYW5nZT1oO2wuYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT1yLmF0dHIoXCJocmVmXCIpO3JldHVybiBhP2EucmVwbGFjZSgvXihodHRwcz9cXDopP1xcL1xcL1teXFwvXSovLFwiXCIpOlwiXCJ9O2wuZGVmZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYztFKys7Yz1xKGZ1bmN0aW9uKCl7ZGVsZXRlIHRbY107ZShhKX0sYnx8MCk7dFtjXT0hMDtyZXR1cm4gY307bC5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRbYV0/KGRlbGV0ZSB0W2FdLHMoYSksZSh2KSwhMCk6ITF9fWZ1bmN0aW9uIFZlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcblwiJGxvZ1wiLFwiJHNuaWZmZXJcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjLGQpe3JldHVybiBuZXcgS2YoYixkLGEsYyl9XX1mdW5jdGlvbiBXZSgpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXtmdW5jdGlvbiBlKGEpe2EhPXEmJihzP3M9PWEmJihzPWEubik6cz1hLGYoYS5uLGEucCksZihhLHEpLHE9YSxxLm49bnVsbCl9ZnVuY3Rpb24gZihhLGIpe2EhPWImJihhJiYoYS5wPWIpLGImJihiLm49YSkpfWlmKGIgaW4gYSl0aHJvdyBHKFwiJGNhY2hlRmFjdG9yeVwiKShcImlpZFwiLGIpO3ZhciBnPTAsaD1RKHt9LGQse2lkOmJ9KSxsPXt9LGs9ZCYmZC5jYXBhY2l0eXx8TnVtYmVyLk1BWF9WQUxVRSxtPXt9LHE9bnVsbCxzPW51bGw7cmV0dXJuIGFbYl09e3B1dDpmdW5jdGlvbihhLGIpe2lmKCF5KGIpKXtpZihrPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPW1bYV18fChtW2FdPXtrZXk6YX0pO2UoYyl9YSBpbiBsfHxnKys7bFthXT1iO2c+ayYmdGhpcy5yZW1vdmUocy5rZXkpO1xucmV0dXJuIGJ9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoazxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtlKGIpfXJldHVybiBsW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoazxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtiPT1xJiYocT1iLnApO2I9PXMmJihzPWIubik7ZihiLm4sYi5wKTtkZWxldGUgbVthXX1kZWxldGUgbFthXTtnLS19LHJlbW92ZUFsbDpmdW5jdGlvbigpe2w9e307Zz0wO209e307cT1zPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttPWg9bD1udWxsO2RlbGV0ZSBhW2JdfSxpbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIFEoe30saCx7c2l6ZTpnfSl9fX12YXIgYT17fTtiLmluZm89ZnVuY3Rpb24oKXt2YXIgYj17fTtuKGEsZnVuY3Rpb24oYSxlKXtiW2VdPWEuaW5mbygpfSk7cmV0dXJuIGJ9O2IuZ2V0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfTtyZXR1cm4gYn19ZnVuY3Rpb24gcWYoKXt0aGlzLiRnZXQ9XG5bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYil7cmV0dXJuIGIoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBDYyhiLGEpe2Z1bmN0aW9uIGMoYSxiLGMpe3ZhciBkPS9eXFxzKihbQCZdfD0oXFwqPykpKFxcPz8pXFxzKihcXHcqKVxccyokLyxlPXt9O24oYSxmdW5jdGlvbihhLGYpe3ZhciBnPWEubWF0Y2goZCk7aWYoIWcpdGhyb3cgZWEoXCJpc2NwXCIsYixmLGEsYz9cImNvbnRyb2xsZXIgYmluZGluZ3MgZGVmaW5pdGlvblwiOlwiaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uXCIpO2VbZl09e21vZGU6Z1sxXVswXSxjb2xsZWN0aW9uOlwiKlwiPT09Z1syXSxvcHRpb25hbDpcIj9cIj09PWdbM10sYXR0ck5hbWU6Z1s0XXx8Zn19KTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe3ZhciBiPWEuY2hhckF0KDApO2lmKCFifHxiIT09SShiKSl0aHJvdyBlYShcImJhZGRpclwiLGEpO2lmKGEhPT1hLnRyaW0oKSl0aHJvdyBlYShcImJhZGRpclwiLGEpO312YXIgZT17fSxmPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcd1xcLV0rKVxccysoLiopJC8sXG5nPS8oKFtcXHdcXC1dKykoPzpcXDooW147XSspKT87PykvLGg9V2QoXCJuZ1NyYyxuZ1NyY3NldCxzcmMsc3Jjc2V0XCIpLGw9L14oPzooXFxeXFxePyk/KFxcPyk/KFxcXlxcXj8pPyk/LyxrPS9eKG9uW2Etel0rfGZvcm1hY3Rpb24pJC87dGhpcy5kaXJlY3RpdmU9ZnVuY3Rpb24gcyhhLGYpe1RhKGEsXCJkaXJlY3RpdmVcIik7SChhKT8oZChhKSxwYihmLFwiZGlyZWN0aXZlRmFjdG9yeVwiKSxlLmhhc093blByb3BlcnR5KGEpfHwoZVthXT1bXSxiLmZhY3RvcnkoYStcIkRpcmVjdGl2ZVwiLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGQpe3ZhciBmPVtdO24oZVthXSxmdW5jdGlvbihlLGcpe3RyeXt2YXIgaD1iLmludm9rZShlKTtCKGgpP2g9e2NvbXBpbGU6cWEoaCl9OiFoLmNvbXBpbGUmJmgubGluayYmKGguY29tcGlsZT1xYShoLmxpbmspKTtoLnByaW9yaXR5PWgucHJpb3JpdHl8fDA7aC5pbmRleD1nO2gubmFtZT1oLm5hbWV8fGE7aC5yZXF1aXJlPWgucmVxdWlyZXx8XG5oLmNvbnRyb2xsZXImJmgubmFtZTtoLnJlc3RyaWN0PWgucmVzdHJpY3R8fFwiRUFcIjt2YXIgbD1oLGs9aCxzPWgubmFtZSxtPXtpc29sYXRlU2NvcGU6bnVsbCxiaW5kVG9Db250cm9sbGVyOm51bGx9O0Qoay5zY29wZSkmJighMD09PWsuYmluZFRvQ29udHJvbGxlcj8obS5iaW5kVG9Db250cm9sbGVyPWMoay5zY29wZSxzLCEwKSxtLmlzb2xhdGVTY29wZT17fSk6bS5pc29sYXRlU2NvcGU9YyhrLnNjb3BlLHMsITEpKTtEKGsuYmluZFRvQ29udHJvbGxlcikmJihtLmJpbmRUb0NvbnRyb2xsZXI9YyhrLmJpbmRUb0NvbnRyb2xsZXIscywhMCkpO2lmKEQobS5iaW5kVG9Db250cm9sbGVyKSl7dmFyIFM9ay5jb250cm9sbGVyLEU9ay5jb250cm9sbGVyQXM7aWYoIVMpdGhyb3cgZWEoXCJub2N0cmxcIixzKTt2YXIgaGE7YTppZihFJiZIKEUpKWhhPUU7ZWxzZXtpZihIKFMpKXt2YXIgbj1WYy5leGVjKFMpO2lmKG4pe2hhPW5bM107YnJlYWsgYX19aGE9dm9pZCAwfWlmKCFoYSl0aHJvdyBlYShcIm5vaWRlbnRcIixcbnMpO312YXIgcj1sLiQkYmluZGluZ3M9bTtEKHIuaXNvbGF0ZVNjb3BlKSYmKGguJCRpc29sYXRlQmluZGluZ3M9ci5pc29sYXRlU2NvcGUpO2guJCRtb2R1bGVOYW1lPWUuJCRtb2R1bGVOYW1lO2YucHVzaChoKX1jYXRjaCh1KXtkKHUpfX0pO3JldHVybiBmfV0pKSxlW2FdLnB1c2goZikpOm4oYSxuYyhzKSk7cmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHgoYik/KGEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geChiKT8oYS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dmFyIG09ITA7dGhpcy5kZWJ1Z0luZm9FbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpP1xuKG09YSx0aGlzKTptfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkcGFyc2VcIixcIiRjb250cm9sbGVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLGMsZCx3LHAsQSxyLE0sTyxKKXtmdW5jdGlvbiBGKGEsYil7dHJ5e2EuYWRkQ2xhc3MoYil9Y2F0Y2goYyl7fX1mdW5jdGlvbiBWKGEsYixjLGQsZSl7YSBpbnN0YW5jZW9mIHp8fChhPXooYSkpO24oYSxmdW5jdGlvbihiLGMpe2Iubm9kZVR5cGU9PVBhJiZiLm5vZGVWYWx1ZS5tYXRjaCgvXFxTKy8pJiYoYVtjXT16KGIpLndyYXAoXCI8c3Bhbj48L3NwYW4+XCIpLnBhcmVudCgpWzBdKX0pO3ZhciBmPVMoYSxiLGEsYyxkLGUpO1YuJCRhZGRTY29wZUNsYXNzKGEpO3ZhciBnPW51bGw7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtwYihiLFwic2NvcGVcIik7ZD1kfHx7fTtcbnZhciBlPWQucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4saD1kLnRyYW5zY2x1ZGVDb250cm9sbGVycztkPWQuZnV0dXJlUGFyZW50RWxlbWVudDtlJiZlLiQkYm91bmRUcmFuc2NsdWRlJiYoZT1lLiQkYm91bmRUcmFuc2NsdWRlKTtnfHwoZz0oZD1kJiZkWzBdKT9cImZvcmVpZ25vYmplY3RcIiE9PXRhKGQpJiZkLnRvU3RyaW5nKCkubWF0Y2goL1NWRy8pP1wic3ZnXCI6XCJodG1sXCI6XCJodG1sXCIpO2Q9XCJodG1sXCIhPT1nP3ooWGIoZyx6KFwiPGRpdj5cIikuYXBwZW5kKGEpLmh0bWwoKSkpOmM/UmEuY2xvbmUuY2FsbChhKTphO2lmKGgpZm9yKHZhciBrIGluIGgpZC5kYXRhKFwiJFwiK2srXCJDb250cm9sbGVyXCIsaFtrXS5pbnN0YW5jZSk7Vi4kJGFkZFNjb3BlSW5mbyhkLGIpO2MmJmMoZCxiKTtmJiZmKGIsZCxkLGUpO3JldHVybiBkfX1mdW5jdGlvbiBTKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYyxkLGUpe3ZhciBmLGssbCxtLHMsdCxPO2lmKHApZm9yKE89QXJyYXkoYy5sZW5ndGgpLG09MDttPFxuaC5sZW5ndGg7bSs9MylmPWhbbV0sT1tmXT1jW2ZdO2Vsc2UgTz1jO209MDtmb3Iocz1oLmxlbmd0aDttPHM7KWlmKGs9T1toW20rK11dLGM9aFttKytdLGY9aFttKytdLGMpe2lmKGMuc2NvcGUpe2lmKGw9YS4kbmV3KCksVi4kJGFkZFNjb3BlSW5mbyh6KGspLGwpLHQ9Yy4kJGRlc3Ryb3lCaW5kaW5ncyljLiQkZGVzdHJveUJpbmRpbmdzPW51bGwsbC4kb24oXCIkZGVzdHJveWVkXCIsdCl9ZWxzZSBsPWE7dD1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P1AoYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/UChhLGIpOm51bGw7YyhmLGwsayxkLHQsYyl9ZWxzZSBmJiZmKGEsay5jaGlsZE5vZGVzLHUsZSl9Zm9yKHZhciBoPVtdLGssbCxtLHMscCx0PTA7dDxhLmxlbmd0aDt0Kyspe2s9bmV3IGFhO2w9aGEoYVt0XSxbXSxrLDA9PT10P2Q6dSxlKTsoZj1sLmxlbmd0aD9DKGwsYVt0XSxrLGIsYyxudWxsLFtdLFtdLGYpOm51bGwpJiZmLnNjb3BlJiZcblYuJCRhZGRTY29wZUNsYXNzKGsuJCRlbGVtZW50KTtrPWYmJmYudGVybWluYWx8fCEobT1hW3RdLmNoaWxkTm9kZXMpfHwhbS5sZW5ndGg/bnVsbDpTKG0sZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpO2lmKGZ8fGspaC5wdXNoKHQsZixrKSxzPSEwLHA9cHx8ZjtmPW51bGx9cmV0dXJuIHM/ZzpudWxsfWZ1bmN0aW9uIFAoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2R8fChkPWEuJG5ldyghMSxoKSxkLiQkdHJhbnNjbHVkZWQ9ITApO3JldHVybiBiKGQsZSx7cGFyZW50Qm91bmRUcmFuc2NsdWRlRm46Yyx0cmFuc2NsdWRlQ29udHJvbGxlcnM6ZixmdXR1cmVQYXJlbnRFbGVtZW50Omd9KX19ZnVuY3Rpb24gaGEoYSxiLGMsZCxlKXt2YXIgaD1jLiRhdHRyLGs7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgcGE6eChiLHZhKHRhKGEpKSxcIkVcIixkLGUpO2Zvcih2YXIgbCxtLHMscD1hLmF0dHJpYnV0ZXMsXG50PTAsTz1wJiZwLmxlbmd0aDt0PE87dCsrKXt2YXIgTD0hMSxKPSExO2w9cFt0XTtrPWwubmFtZTttPVQobC52YWx1ZSk7bD12YShrKTtpZihzPWlhLnRlc3QobCkpaz1rLnJlcGxhY2UoWGMsXCJcIikuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KTt2YXIgUz1sLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sXCJcIik7RyhTKSYmbD09PVMrXCJTdGFydFwiJiYoTD1rLEo9ay5zdWJzdHIoMCxrLmxlbmd0aC01KStcImVuZFwiLGs9ay5zdWJzdHIoMCxrLmxlbmd0aC02KSk7bD12YShrLnRvTG93ZXJDYXNlKCkpO2hbbF09aztpZihzfHwhYy5oYXNPd25Qcm9wZXJ0eShsKSljW2xdPW0sUWMoYSxsKSYmKGNbbF09ITApO1goYSxiLG0sbCxzKTt4KGIsbCxcIkFcIixkLGUsTCxKKX1hPWEuY2xhc3NOYW1lO0QoYSkmJihhPWEuYW5pbVZhbCk7aWYoSChhKSYmXCJcIiE9PWEpZm9yKDtrPWcuZXhlYyhhKTspbD12YShrWzJdKSx4KGIsbCxcIkNcIixkLFxuZSkmJihjW2xdPVQoa1szXSkpLGE9YS5zdWJzdHIoay5pbmRleCtrWzBdLmxlbmd0aCk7YnJlYWs7Y2FzZSBQYTppZigxMT09PVZhKWZvcig7YS5wYXJlbnROb2RlJiZhLm5leHRTaWJsaW5nJiZhLm5leHRTaWJsaW5nLm5vZGVUeXBlPT09UGE7KWEubm9kZVZhbHVlKz1hLm5leHRTaWJsaW5nLm5vZGVWYWx1ZSxhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYS5uZXh0U2libGluZyk7d2EoYixhLm5vZGVWYWx1ZSk7YnJlYWs7Y2FzZSA4OnRyeXtpZihrPWYuZXhlYyhhLm5vZGVWYWx1ZSkpbD12YShrWzFdKSx4KGIsbCxcIk1cIixkLGUpJiYoY1tsXT1UKGtbMl0pKX1jYXRjaChFKXt9fWIuc29ydCh6YSk7cmV0dXJuIGJ9ZnVuY3Rpb24geWEoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGVhKFwidXRlcmRpclwiLGIsYyk7YS5ub2RlVHlwZT09cGEmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZcbmUtLSk7ZC5wdXNoKGEpO2E9YS5uZXh0U2libGluZ313aGlsZSgwPGUpfWVsc2UgZC5wdXNoKGEpO3JldHVybiB6KGQpfWZ1bmN0aW9uIFdjKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPXlhKGVbMF0sYixjKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBDKGEsYixkLGUsZixnLGgsayxtKXtmdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEpe2MmJihhPVdjKGEsYyxkKSk7YS5yZXF1aXJlPUMucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9eDtpZihQPT09Q3x8Qy4kJGlzb2xhdGVTY29wZSlhPVooYSx7aXNvbGF0ZVNjb3BlOiEwfSk7aC5wdXNoKGEpfWlmKGIpe2MmJihiPVdjKGIsYyxkKSk7Yi5yZXF1aXJlPUMucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9eDtpZihQPT09Q3x8Qy4kJGlzb2xhdGVTY29wZSliPVooYix7aXNvbGF0ZVNjb3BlOiEwfSk7ay5wdXNoKGIpfX1mdW5jdGlvbiB0KGEsYixjLGQpe3ZhciBlO2lmKEgoYikpe3ZhciBmPWIubWF0Y2gobCk7Yj1cbmIuc3Vic3RyaW5nKGZbMF0ubGVuZ3RoKTt2YXIgZz1mWzFdfHxmWzNdLGY9XCI/XCI9PT1mWzJdO1wiXl5cIj09PWc/Yz1jLnBhcmVudCgpOmU9KGU9ZCYmZFtiXSkmJmUuaW5zdGFuY2U7ZXx8KGQ9XCIkXCIrYitcIkNvbnRyb2xsZXJcIixlPWc/Yy5pbmhlcml0ZWREYXRhKGQpOmMuZGF0YShkKSk7aWYoIWUmJiFmKXRocm93IGVhKFwiY3RyZXFcIixiLGEpO31lbHNlIGlmKEsoYikpZm9yKGU9W10sZz0wLGY9Yi5sZW5ndGg7ZzxmO2crKyllW2ddPXQoYSxiW2ddLGMsZCk7cmV0dXJuIGV8fG51bGx9ZnVuY3Rpb24gTyhhLGIsYyxkLGUsZil7dmFyIGc9Z2EoKSxoO2ZvcihoIGluIGQpe3ZhciBrPWRbaF0sbD17JHNjb3BlOms9PT1QfHxrLiQkaXNvbGF0ZVNjb3BlP2U6ZiwkZWxlbWVudDphLCRhdHRyczpiLCR0cmFuc2NsdWRlOmN9LG09ay5jb250cm9sbGVyO1wiQFwiPT1tJiYobT1iW2submFtZV0pO2w9cChtLGwsITAsay5jb250cm9sbGVyQXMpO2dbay5uYW1lXT1sO3J8fGEuZGF0YShcIiRcIitrLm5hbWUrXG5cIkNvbnRyb2xsZXJcIixsLmluc3RhbmNlKX1yZXR1cm4gZ31mdW5jdGlvbiBMKGEsYyxlLGYsZyxsKXtmdW5jdGlvbiBtKGEsYixjKXt2YXIgZDskYShhKXx8KGM9YixiPWEsYT11KTtyJiYoZD1BKTtjfHwoYz1yP2phLnBhcmVudCgpOmphKTtyZXR1cm4gZyhhLGIsZCxjLHlhKX12YXIgcyxwLEosRSxBLGhhLGphO2I9PT1lPyhmPWQsamE9ZC4kJGVsZW1lbnQpOihqYT16KGUpLGY9bmV3IGFhKGphLGQpKTtQJiYoRT1jLiRuZXcoITApKTtnJiYoaGE9bSxoYS4kJGJvdW5kVHJhbnNjbHVkZT1nKTt3JiYoQT1PKGphLGYsaGEsdyxFLGMpKTtQJiYoVi4kJGFkZFNjb3BlSW5mbyhqYSxFLCEwLCEoRiYmKEY9PT1QfHxGPT09UC4kJG9yaWdpbmFsRGlyZWN0aXZlKSkpLFYuJCRhZGRTY29wZUNsYXNzKGphLCEwKSxFLiQkaXNvbGF0ZUJpbmRpbmdzPVAuJCRpc29sYXRlQmluZGluZ3MsWShjLGYsRSxFLiQkaXNvbGF0ZUJpbmRpbmdzLFAsRSkpO2lmKEEpe3ZhciBuPVB8fFMsTTtuJiZBW24ubmFtZV0mJlxuKHA9bi4kJGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIsKEo9QVtuLm5hbWVdKSYmSi5pZGVudGlmaWVyJiZwJiYoTT1KLGwuJCRkZXN0cm95QmluZGluZ3M9WShjLGYsSi5pbnN0YW5jZSxwLG4pKSk7Zm9yKHMgaW4gQSl7Sj1BW3NdO3ZhciBDPUooKTtDIT09Si5pbnN0YW5jZSYmKEouaW5zdGFuY2U9QyxqYS5kYXRhKFwiJFwiK3MrXCJDb250cm9sbGVyXCIsQyksSj09PU0mJihsLiQkZGVzdHJveUJpbmRpbmdzKCksbC4kJGRlc3Ryb3lCaW5kaW5ncz1ZKGMsZixDLHAsbikpKX19cz0wO2ZvcihsPWgubGVuZ3RoO3M8bDtzKyspcD1oW3NdLCQocCxwLmlzb2xhdGVTY29wZT9FOmMsamEsZixwLnJlcXVpcmUmJnQocC5kaXJlY3RpdmVOYW1lLHAucmVxdWlyZSxqYSxBKSxoYSk7dmFyIHlhPWM7UCYmKFAudGVtcGxhdGV8fG51bGw9PT1QLnRlbXBsYXRlVXJsKSYmKHlhPUUpO2EmJmEoeWEsZS5jaGlsZE5vZGVzLHUsZyk7Zm9yKHM9ay5sZW5ndGgtMTswPD1zO3MtLSlwPWtbc10sJChwLHAuaXNvbGF0ZVNjb3BlP1xuRTpjLGphLGYscC5yZXF1aXJlJiZ0KHAuZGlyZWN0aXZlTmFtZSxwLnJlcXVpcmUsamEsQSksaGEpfW09bXx8e307Zm9yKHZhciBKPS1OdW1iZXIuTUFYX1ZBTFVFLFM9bS5uZXdTY29wZURpcmVjdGl2ZSx3PW0uY29udHJvbGxlckRpcmVjdGl2ZXMsUD1tLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxGPW0udGVtcGxhdGVEaXJlY3RpdmUsQT1tLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsbj0hMSxNPSExLHI9bS5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxiYT1kLiQkZWxlbWVudD16KGIpLEMseCx2LHk9ZSx6YSx3YT0wLEc9YS5sZW5ndGg7d2E8Rzt3YSsrKXtDPWFbd2FdO3ZhciBCYj1DLiQkc3RhcnQsST1DLiQkZW5kO0JiJiYoYmE9eWEoYixCYixJKSk7dj11O2lmKEo+Qy5wcmlvcml0eSlicmVhaztpZih2PUMuc2NvcGUpQy50ZW1wbGF0ZVVybHx8KEQodik/KE4oXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixQfHxTLEMsYmEpLFA9Qyk6TihcIm5ldy9pc29sYXRlZCBzY29wZVwiLFxuUCxDLGJhKSksUz1TfHxDO3g9Qy5uYW1lOyFDLnRlbXBsYXRlVXJsJiZDLmNvbnRyb2xsZXImJih2PUMuY29udHJvbGxlcix3PXd8fGdhKCksTihcIidcIit4K1wiJyBjb250cm9sbGVyXCIsd1t4XSxDLGJhKSx3W3hdPUMpO2lmKHY9Qy50cmFuc2NsdWRlKW49ITAsQy4kJHRsYnx8KE4oXCJ0cmFuc2NsdXNpb25cIixBLEMsYmEpLEE9QyksXCJlbGVtZW50XCI9PXY/KHI9ITAsSj1DLnByaW9yaXR5LHY9YmEsYmE9ZC4kJGVsZW1lbnQ9eihXLmNyZWF0ZUNvbW1lbnQoXCIgXCIreCtcIjogXCIrZFt4XStcIiBcIikpLGI9YmFbMF0sVShmLHhhLmNhbGwodiwwKSxiKSx5PVYodixlLEosZyYmZy5uYW1lLHtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOkF9KSk6KHY9eihVYihiKSkuY29udGVudHMoKSxiYS5lbXB0eSgpLHk9Vih2LGUpKTtpZihDLnRlbXBsYXRlKWlmKE09ITAsTihcInRlbXBsYXRlXCIsRixDLGJhKSxGPUMsdj1CKEMudGVtcGxhdGUpP0MudGVtcGxhdGUoYmEsZCk6Qy50ZW1wbGF0ZSx2PWZhKHYpLFxuQy5yZXBsYWNlKXtnPUM7dj1TYi50ZXN0KHYpP1ljKFhiKEMudGVtcGxhdGVOYW1lc3BhY2UsVCh2KSkpOltdO2I9dlswXTtpZigxIT12Lmxlbmd0aHx8Yi5ub2RlVHlwZSE9PXBhKXRocm93IGVhKFwidHBscnRcIix4LFwiXCIpO1UoZixiYSxiKTtHPXskYXR0cjp7fX07dj1oYShiLFtdLEcpO3ZhciBRPWEuc3BsaWNlKHdhKzEsYS5sZW5ndGgtKHdhKzEpKTtQJiZaYyh2KTthPWEuY29uY2F0KHYpLmNvbmNhdChRKTskYyhkLEcpO0c9YS5sZW5ndGh9ZWxzZSBiYS5odG1sKHYpO2lmKEMudGVtcGxhdGVVcmwpTT0hMCxOKFwidGVtcGxhdGVcIixGLEMsYmEpLEY9QyxDLnJlcGxhY2UmJihnPUMpLEw9TGYoYS5zcGxpY2Uod2EsYS5sZW5ndGgtd2EpLGJhLGQsZixuJiZ5LGgsayx7Y29udHJvbGxlckRpcmVjdGl2ZXM6dyxuZXdTY29wZURpcmVjdGl2ZTpTIT09QyYmUyxuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6UCx0ZW1wbGF0ZURpcmVjdGl2ZTpGLG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6QX0pLFxuRz1hLmxlbmd0aDtlbHNlIGlmKEMuY29tcGlsZSl0cnl7emE9Qy5jb21waWxlKGJhLGQseSksQih6YSk/cyhudWxsLHphLEJiLEkpOnphJiZzKHphLnByZSx6YS5wb3N0LEJiLEkpfWNhdGNoKFIpe2MoUix1YShiYSkpfUMudGVybWluYWwmJihMLnRlcm1pbmFsPSEwLEo9TWF0aC5tYXgoSixDLnByaW9yaXR5KSl9TC5zY29wZT1TJiYhMD09PVMuc2NvcGU7TC50cmFuc2NsdWRlT25UaGlzRWxlbWVudD1uO0wudGVtcGxhdGVPblRoaXNFbGVtZW50PU07TC50cmFuc2NsdWRlPXk7bS5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1yO3JldHVybiBMfWZ1bmN0aW9uIFpjKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdPU5iKGFbYl0seyQkaXNvbGF0ZVNjb3BlOiEwfSl9ZnVuY3Rpb24geChiLGQsZixnLGgsayxsKXtpZihkPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoZS5oYXNPd25Qcm9wZXJ0eShkKSl7dmFyIG07ZD1hLmdldChkK1wiRGlyZWN0aXZlXCIpO2Zvcih2YXIgcD1cbjAsdD1kLmxlbmd0aDtwPHQ7cCsrKXRyeXttPWRbcF0sKGc9PT11fHxnPm0ucHJpb3JpdHkpJiYtMSE9bS5yZXN0cmljdC5pbmRleE9mKGYpJiYoayYmKG09TmIobSx7JCRzdGFydDprLCQkZW5kOmx9KSksYi5wdXNoKG0pLGg9bSl9Y2F0Y2goSil7YyhKKX19cmV0dXJuIGh9ZnVuY3Rpb24gRyhiKXtpZihlLmhhc093blByb3BlcnR5KGIpKWZvcih2YXIgYz1hLmdldChiK1wiRGlyZWN0aXZlXCIpLGQ9MCxmPWMubGVuZ3RoO2Q8ZjtkKyspaWYoYj1jW2RdLGIubXVsdGlFbGVtZW50KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uICRjKGEsYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHIsZT1hLiQkZWxlbWVudDtuKGEsZnVuY3Rpb24oZCxlKXtcIiRcIiE9ZS5jaGFyQXQoMCkmJihiW2VdJiZiW2VdIT09ZCYmKGQrPShcInN0eWxlXCI9PT1lP1wiO1wiOlwiIFwiKStiW2VdKSxhLiRzZXQoZSxkLCEwLGNbZV0pKX0pO24oYixmdW5jdGlvbihiLGYpe1wiY2xhc3NcIj09Zj8oRihlLGIpLGFbXCJjbGFzc1wiXT0oYVtcImNsYXNzXCJdP1xuYVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK2IpOlwic3R5bGVcIj09Zj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrXCI7XCI6XCJcIikrYik6XCIkXCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiBMZihhLGIsYyxlLGYsZyxoLGspe3ZhciBsPVtdLG0scyxwPWJbMF0sdD1hLnNoaWZ0KCksSj1OYih0LHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTp0fSksTz1CKHQudGVtcGxhdGVVcmwpP3QudGVtcGxhdGVVcmwoYixjKTp0LnRlbXBsYXRlVXJsLEU9dC50ZW1wbGF0ZU5hbWVzcGFjZTtiLmVtcHR5KCk7ZChPKS50aGVuKGZ1bmN0aW9uKGQpe3ZhciBMLHc7ZD1mYShkKTtpZih0LnJlcGxhY2Upe2Q9U2IudGVzdChkKT9ZYyhYYihFLFQoZCkpKTpbXTtMPWRbMF07aWYoMSE9ZC5sZW5ndGh8fEwubm9kZVR5cGUhPT1cbnBhKXRocm93IGVhKFwidHBscnRcIix0Lm5hbWUsTyk7ZD17JGF0dHI6e319O1UoZSxiLEwpO3ZhciBBPWhhKEwsW10sZCk7RCh0LnNjb3BlKSYmWmMoQSk7YT1BLmNvbmNhdChhKTskYyhjLGQpfWVsc2UgTD1wLGIuaHRtbChkKTthLnVuc2hpZnQoSik7bT1DKGEsTCxjLGYsYix0LGcsaCxrKTtuKGUsZnVuY3Rpb24oYSxjKXthPT1MJiYoZVtjXT1iWzBdKX0pO2ZvcihzPVMoYlswXS5jaGlsZE5vZGVzLGYpO2wubGVuZ3RoOyl7ZD1sLnNoaWZ0KCk7dz1sLnNoaWZ0KCk7dmFyIE09bC5zaGlmdCgpLFY9bC5zaGlmdCgpLEE9YlswXTtpZighZC4kJGRlc3Ryb3llZCl7aWYodyE9PXApe3ZhciB5YT13LmNsYXNzTmFtZTtrLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZ0LnJlcGxhY2V8fChBPVViKEwpKTtVKE0seih3KSxBKTtGKHooQSkseWEpfXc9bS50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9QKGQsbS50cmFuc2NsdWRlLFYpOlY7bShzLGQsQSxlLHcsbSl9fWw9bnVsbH0pO3JldHVybiBmdW5jdGlvbihhLFxuYixjLGQsZSl7YT1lO2IuJCRkZXN0cm95ZWR8fChsP2wucHVzaChiLGMsZCxhKToobS50cmFuc2NsdWRlT25UaGlzRWxlbWVudCYmKGE9UChiLG0udHJhbnNjbHVkZSxlKSksbShzLGIsYyxkLGEsbSkpKX19ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gTihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBhP1wiIChtb2R1bGU6IFwiK2ErXCIpXCI6XCJcIn1pZihiKXRocm93IGVhKFwibXVsdGlkaXJcIixiLm5hbWUsZShiLiQkbW9kdWxlTmFtZSksYy5uYW1lLGUoYy4kJG1vZHVsZU5hbWUpLGEsdWEoZCkpO31mdW5jdGlvbiB3YShhLGMpe3ZhciBkPWIoYywhMCk7ZCYmYS5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24oYSl7YT1hLnBhcmVudCgpO3ZhciBiPSEhYS5sZW5ndGg7YiYmVi4kJGFkZEJpbmRpbmdDbGFzcyhhKTtcbnJldHVybiBmdW5jdGlvbihhLGMpe3ZhciBlPWMucGFyZW50KCk7Ynx8Vi4kJGFkZEJpbmRpbmdDbGFzcyhlKTtWLiQkYWRkQmluZGluZ0luZm8oZSxkLmV4cHJlc3Npb25zKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gWGIoYSxiKXthPUkoYXx8XCJodG1sXCIpO3N3aXRjaChhKXtjYXNlIFwic3ZnXCI6Y2FzZSBcIm1hdGhcIjp2YXIgYz1XLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5pbm5lckhUTUw9XCI8XCIrYStcIj5cIitiK1wiPC9cIithK1wiPlwiO3JldHVybiBjLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztkZWZhdWx0OnJldHVybiBifX1mdW5jdGlvbiBSKGEsYil7aWYoXCJzcmNkb2NcIj09YilyZXR1cm4gTS5IVE1MO3ZhciBjPXRhKGEpO2lmKFwieGxpbmtIcmVmXCI9PWJ8fFwiZm9ybVwiPT1jJiZcImFjdGlvblwiPT1ifHxcImltZ1wiIT1jJiYoXCJzcmNcIj09Ynx8XCJuZ1NyY1wiPT1iKSlyZXR1cm4gTS5SRVNPVVJDRV9VUkx9ZnVuY3Rpb24gWChhLGMsZCxlLFxuZil7dmFyIGc9UihhLGUpO2Y9aFtlXXx8Zjt2YXIgbD1iKGQsITAsZyxmKTtpZihsKXtpZihcIm11bHRpcGxlXCI9PT1lJiZcInNlbGVjdFwiPT09dGEoYSkpdGhyb3cgZWEoXCJzZWxtdWx0aVwiLHVhKGEpKTtjLnB1c2goe3ByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsaCl7Yz1oLiQkb2JzZXJ2ZXJzfHwoaC4kJG9ic2VydmVycz17fSk7aWYoay50ZXN0KGUpKXRocm93IGVhKFwibm9kb21ldmVudHNcIik7dmFyIG09aFtlXTttIT09ZCYmKGw9bSYmYihtLCEwLGcsZiksZD1tKTtsJiYoaFtlXT1sKGEpLChjW2VdfHwoY1tlXT1bXSkpLiQkaW50ZXI9ITAsKGguJCRvYnNlcnZlcnMmJmguJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8YSkuJHdhdGNoKGwsZnVuY3Rpb24oYSxiKXtcImNsYXNzXCI9PT1lJiZhIT1iP2guJHVwZGF0ZUNsYXNzKGEsYik6aC4kc2V0KGUsYSl9KSl9fX19KX19ZnVuY3Rpb24gVShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLFxuZj1kLnBhcmVudE5vZGUsZyxoO2lmKGEpZm9yKGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspaWYoYVtnXT09ZCl7YVtnKytdPWM7aD1nK2UtMTtmb3IodmFyIGs9YS5sZW5ndGg7ZzxrO2crKyxoKyspaDxrP2FbZ109YVtoXTpkZWxldGUgYVtnXTthLmxlbmd0aC09ZS0xO2EuY29udGV4dD09PWQmJihhLmNvbnRleHQ9Yyk7YnJlYWt9ZiYmZi5yZXBsYWNlQ2hpbGQoYyxkKTthPVcuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuYXBwZW5kQ2hpbGQoZCk7ei5oYXNEYXRhKGQpJiYoeihjKS5kYXRhKHooZCkuZGF0YSgpKSxsYT8oUWI9ITAsbGEuY2xlYW5EYXRhKFtkXSkpOmRlbGV0ZSB6LmNhY2hlW2Rbei5leHBhbmRvXV0pO2Q9MTtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKWY9YltkXSx6KGYpLnJlbW92ZSgpLGEuYXBwZW5kQ2hpbGQoZiksZGVsZXRlIGJbZF07YlswXT1jO2IubGVuZ3RoPTF9ZnVuY3Rpb24gWihhLGIpe3JldHVybiBRKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxcbmFyZ3VtZW50cyl9LGEsYil9ZnVuY3Rpb24gJChhLGIsZCxlLGYsZyl7dHJ5e2EoYixkLGUsZixnKX1jYXRjaChoKXtjKGgsdWEoZCkpfX1mdW5jdGlvbiBZKGEsYyxkLGUsZixnKXt2YXIgaDtuKGUsZnVuY3Rpb24oZSxnKXt2YXIgaz1lLmF0dHJOYW1lLGw9ZS5vcHRpb25hbCxtLHMscCxMO3N3aXRjaChlLm1vZGUpe2Nhc2UgXCJAXCI6bHx8TmEuY2FsbChjLGspfHwoZFtnXT1jW2tdPXZvaWQgMCk7Yy4kb2JzZXJ2ZShrLGZ1bmN0aW9uKGEpe0goYSkmJihkW2ddPWEpfSk7Yy4kJG9ic2VydmVyc1trXS4kJHNjb3BlPWE7SChjW2tdKSYmKGRbZ109YihjW2tdKShhKSk7YnJlYWs7Y2FzZSBcIj1cIjppZighTmEuY2FsbChjLGspKXtpZihsKWJyZWFrO2Nba109dm9pZCAwfWlmKGwmJiFjW2tdKWJyZWFrO3M9dyhjW2tdKTtMPXMubGl0ZXJhbD9rYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifTtwPXMuYXNzaWdufHxmdW5jdGlvbigpe209ZFtnXT1zKGEpO3Rocm93IGVhKFwibm9uYXNzaWduXCIsXG5jW2tdLGYubmFtZSk7fTttPWRbZ109cyhhKTtsPWZ1bmN0aW9uKGIpe0woYixkW2ddKXx8KEwoYixtKT9wKGEsYj1kW2ddKTpkW2ddPWIpO3JldHVybiBtPWJ9O2wuJHN0YXRlZnVsPSEwO2w9ZS5jb2xsZWN0aW9uP2EuJHdhdGNoQ29sbGVjdGlvbihjW2tdLGwpOmEuJHdhdGNoKHcoY1trXSxsKSxudWxsLHMubGl0ZXJhbCk7aD1ofHxbXTtoLnB1c2gobCk7YnJlYWs7Y2FzZSBcIiZcIjpzPWMuaGFzT3duUHJvcGVydHkoayk/dyhjW2tdKTp2O2lmKHM9PT12JiZsKWJyZWFrO2RbZ109ZnVuY3Rpb24oYil7cmV0dXJuIHMoYSxiKX19fSk7ZT1oP2Z1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1oLmxlbmd0aDthPGI7KythKWhbYV0oKX06djtyZXR1cm4gZyYmZSE9PXY/KGcuJG9uKFwiJGRlc3Ryb3lcIixlKSx2KTplfXZhciBhYT1mdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPU9iamVjdC5rZXlzKGIpLGQsZSxmO2Q9MDtmb3IoZT1jLmxlbmd0aDtkPGU7ZCsrKWY9Y1tkXSx0aGlzW2ZdPWJbZl19ZWxzZSB0aGlzLiRhdHRyPVxue307dGhpcy4kJGVsZW1lbnQ9YX07YWEucHJvdG90eXBlPXskbm9ybWFsaXplOnZhLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZPLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmTy5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YWQoYSxiKTtjJiZjLmxlbmd0aCYmTy5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTsoYz1hZChiLGEpKSYmYy5sZW5ndGgmJk8ucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9dGhpcy4kJGVsZW1lbnRbMF0sZz1RYyhmLGEpLGg9R2YoZixhKSxmPWE7Zz8odGhpcy4kJGVsZW1lbnQucHJvcChhLGIpLGU9Zyk6aCYmKHRoaXNbaF09YixmPWgpO3RoaXNbYV09YjtlP3RoaXMuJGF0dHJbYV09ZTooZT10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09XG5lPXpjKGEsXCItXCIpKTtnPXRhKHRoaXMuJCRlbGVtZW50KTtpZihcImFcIj09PWcmJlwiaHJlZlwiPT09YXx8XCJpbWdcIj09PWcmJlwic3JjXCI9PT1hKXRoaXNbYV09Yj1KKGIsXCJzcmNcIj09PWEpO2Vsc2UgaWYoXCJpbWdcIj09PWcmJlwic3Jjc2V0XCI9PT1hKXtmb3IodmFyIGc9XCJcIixoPVQoYiksaz0vKFxccytcXGQreFxccyosfFxccytcXGQrd1xccyosfFxccyssfCxcXHMrKS8saz0vXFxzLy50ZXN0KGgpP2s6LygsKS8saD1oLnNwbGl0KGspLGs9TWF0aC5mbG9vcihoLmxlbmd0aC8yKSxsPTA7bDxrO2wrKyl2YXIgbT0yKmwsZz1nK0ooVChoW21dKSwhMCksZz1nKyhcIiBcIitUKGhbbSsxXSkpO2g9VChoWzIqbF0pLnNwbGl0KC9cXHMvKTtnKz1KKFQoaFswXSksITApOzI9PT1oLmxlbmd0aCYmKGcrPVwiIFwiK1QoaFsxXSkpO3RoaXNbYV09Yj1nfSExIT09ZCYmKG51bGw9PT1ifHxiPT09dT90aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGUpOnRoaXMuJCRlbGVtZW50LmF0dHIoZSxiKSk7KGE9dGhpcy4kJG9ic2VydmVycykmJlxubihhW2ZdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGQpe2MoZCl9fSl9LCRvYnNlcnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuJCRvYnNlcnZlcnN8fChjLiQkb2JzZXJ2ZXJzPWdhKCkpLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTtBLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtlLiQkaW50ZXJ8fCFjLmhhc093blByb3BlcnR5KGEpfHx5KGNbYV0pfHxiKGNbYV0pfSk7cmV0dXJuIGZ1bmN0aW9uKCl7YmIoZSxiKX19fTt2YXIgY2E9Yi5zdGFydFN5bWJvbCgpLGRhPWIuZW5kU3ltYm9sKCksZmE9XCJ7e1wiPT1jYXx8XCJ9fVwiPT1kYT9aYTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHtcXHsvZyxjYSkucmVwbGFjZSgvfX0vZyxkYSl9LGlhPS9ebmdBdHRyW0EtWl0vO1YuJCRhZGRCaW5kaW5nSW5mbz1tP2Z1bmN0aW9uKGEsYil7dmFyIGM9YS5kYXRhKFwiJGJpbmRpbmdcIil8fFtdO0soYik/Yz1jLmNvbmNhdChiKTpjLnB1c2goYik7YS5kYXRhKFwiJGJpbmRpbmdcIixcbmMpfTp2O1YuJCRhZGRCaW5kaW5nQ2xhc3M9bT9mdW5jdGlvbihhKXtGKGEsXCJuZy1iaW5kaW5nXCIpfTp2O1YuJCRhZGRTY29wZUluZm89bT9mdW5jdGlvbihhLGIsYyxkKXthLmRhdGEoYz9kP1wiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIjpcIiRpc29sYXRlU2NvcGVcIjpcIiRzY29wZVwiLGIpfTp2O1YuJCRhZGRTY29wZUNsYXNzPW0/ZnVuY3Rpb24oYSxiKXtGKGEsYj9cIm5nLWlzb2xhdGUtc2NvcGVcIjpcIm5nLXNjb3BlXCIpfTp2O3JldHVybiBWfV19ZnVuY3Rpb24gdmEoYil7cmV0dXJuIGZiKGIucmVwbGFjZShYYyxcIlwiKSl9ZnVuY3Rpb24gYWQoYixhKXt2YXIgYz1cIlwiLGQ9Yi5zcGxpdCgvXFxzKy8pLGU9YS5zcGxpdCgvXFxzKy8pLGY9MDthOmZvcig7ZjxkLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1kW2ZdLGg9MDtoPGUubGVuZ3RoO2grKylpZihnPT1lW2hdKWNvbnRpbnVlIGE7Yys9KDA8Yy5sZW5ndGg/XCIgXCI6XCJcIikrZ31yZXR1cm4gY31mdW5jdGlvbiBZYyhiKXtiPXooYik7dmFyIGE9Yi5sZW5ndGg7XG5pZigxPj1hKXJldHVybiBiO2Zvcig7YS0tOyk4PT09YlthXS5ub2RlVHlwZSYmTWYuY2FsbChiLGEsMSk7cmV0dXJuIGJ9ZnVuY3Rpb24gWGUoKXt2YXIgYj17fSxhPSExO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYSxkKXtUYShhLFwiY29udHJvbGxlclwiKTtEKGEpP1EoYixhKTpiW2FdPWR9O3RoaXMuYWxsb3dHbG9iYWxzPWZ1bmN0aW9uKCl7YT0hMH07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGMsZCl7ZnVuY3Rpb24gZShhLGIsYyxkKXtpZighYXx8IUQoYS4kc2NvcGUpKXRocm93IEcoXCIkY29udHJvbGxlclwiKShcIm5vc2NwXCIsZCxiKTthLiRzY29wZVtiXT1jfXJldHVybiBmdW5jdGlvbihmLGcsaCxsKXt2YXIgayxtLHE7aD0hMD09PWg7bCYmSChsKSYmKHE9bCk7aWYoSChmKSl7bD1mLm1hdGNoKFZjKTtpZighbCl0aHJvdyBOZihcImN0cmxmbXRcIixmKTttPWxbMV07cT1xfHxsWzNdO2Y9Yi5oYXNPd25Qcm9wZXJ0eShtKT9iW21dOkJjKGcuJHNjb3BlLFxubSwhMCl8fChhP0JjKGQsbSwhMCk6dSk7U2EoZixtLCEwKX1pZihoKXJldHVybiBoPShLKGYpP2ZbZi5sZW5ndGgtMV06ZikucHJvdG90eXBlLGs9T2JqZWN0LmNyZWF0ZShofHxudWxsKSxxJiZlKGcscSxrLG18fGYubmFtZSksUShmdW5jdGlvbigpe3ZhciBhPWMuaW52b2tlKGYsayxnLG0pO2EhPT1rJiYoRChhKXx8QihhKSkmJihrPWEscSYmZShnLHEsayxtfHxmLm5hbWUpKTtyZXR1cm4ga30se2luc3RhbmNlOmssaWRlbnRpZmllcjpxfSk7az1jLmluc3RhbnRpYXRlKGYsZyxtKTtxJiZlKGcscSxrLG18fGYubmFtZSk7cmV0dXJuIGt9fV19ZnVuY3Rpb24gWWUoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGIpe3JldHVybiB6KGIuZG9jdW1lbnQpfV19ZnVuY3Rpb24gWmUoKXt0aGlzLiRnZXQ9W1wiJGxvZ1wiLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IuZXJyb3IuYXBwbHkoYixhcmd1bWVudHMpfX1dfWZ1bmN0aW9uIFliKGIpe3JldHVybiBEKGIpP1xuY2EoYik/Yi50b0lTT1N0cmluZygpOmRiKGIpOmJ9ZnVuY3Rpb24gZGYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuXCJcIjt2YXIgYT1bXTttYyhiLGZ1bmN0aW9uKGIsZCl7bnVsbD09PWJ8fHkoYil8fChLKGIpP24oYixmdW5jdGlvbihiLGMpe2EucHVzaChtYShkKStcIj1cIittYShZYihiKSkpfSk6YS5wdXNoKG1hKGQpK1wiPVwiK21hKFliKGIpKSkpfSk7cmV0dXJuIGEuam9pbihcIiZcIil9fX1mdW5jdGlvbiBlZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihiKXtmdW5jdGlvbiBhKGIsZSxmKXtudWxsPT09Ynx8eShiKXx8KEsoYik/bihiLGZ1bmN0aW9uKGIsYyl7YShiLGUrXCJbXCIrKEQoYik/YzpcIlwiKStcIl1cIil9KTpEKGIpJiYhY2EoYik/bWMoYixmdW5jdGlvbihiLGMpe2EoYixlKyhmP1wiXCI6XCJbXCIpK2MrKGY/XCJcIjpcIl1cIikpfSk6Yy5wdXNoKG1hKGUpK1wiPVwiK21hKFliKGIpKSkpfWlmKCFiKXJldHVyblwiXCI7dmFyIGM9XG5bXTthKGIsXCJcIiwhMCk7cmV0dXJuIGMuam9pbihcIiZcIil9fX1mdW5jdGlvbiBaYihiLGEpe2lmKEgoYikpe3ZhciBjPWIucmVwbGFjZShPZixcIlwiKS50cmltKCk7aWYoYyl7dmFyIGQ9YShcIkNvbnRlbnQtVHlwZVwiKTsoZD1kJiYwPT09ZC5pbmRleE9mKGJkKSl8fChkPShkPWMubWF0Y2goUGYpKSYmUWZbZFswXV0udGVzdChjKSk7ZCYmKGI9dWMoYykpfX1yZXR1cm4gYn1mdW5jdGlvbiBjZChiKXt2YXIgYT1nYSgpLGM7SChiKT9uKGIuc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24oYil7Yz1iLmluZGV4T2YoXCI6XCIpO3ZhciBlPUkoVChiLnN1YnN0cigwLGMpKSk7Yj1UKGIuc3Vic3RyKGMrMSkpO2UmJihhW2VdPWFbZV0/YVtlXStcIiwgXCIrYjpiKX0pOkQoYikmJm4oYixmdW5jdGlvbihiLGMpe3ZhciBmPUkoYyksZz1UKGIpO2YmJihhW2ZdPWFbZl0/YVtmXStcIiwgXCIrZzpnKX0pO3JldHVybiBhfWZ1bmN0aW9uIGRkKGIpe3ZhciBhO3JldHVybiBmdW5jdGlvbihjKXthfHwoYT1jZChiKSk7cmV0dXJuIGM/XG4oYz1hW0koYyldLHZvaWQgMD09PWMmJihjPW51bGwpLGMpOmF9fWZ1bmN0aW9uIGVkKGIsYSxjLGQpe2lmKEIoZCkpcmV0dXJuIGQoYixhLGMpO24oZCxmdW5jdGlvbihkKXtiPWQoYixhLGMpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gY2YoKXt2YXIgYj10aGlzLmRlZmF1bHRzPXt0cmFuc2Zvcm1SZXNwb25zZTpbWmJdLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBEKGEpJiZcIltvYmplY3QgRmlsZV1cIiE9PXNhLmNhbGwoYSkmJlwiW29iamVjdCBCbG9iXVwiIT09c2EuY2FsbChhKSYmXCJbb2JqZWN0IEZvcm1EYXRhXVwiIT09c2EuY2FsbChhKT9kYihhKTphfV0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLypcIn0scG9zdDppYSgkYikscHV0OmlhKCRiKSxwYXRjaDppYSgkYil9LHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLHhzcmZIZWFkZXJOYW1lOlwiWC1YU1JGLVRPS0VOXCIscGFyYW1TZXJpYWxpemVyOlwiJGh0dHBQYXJhbVNlcmlhbGl6ZXJcIn0sXG5hPSExO3RoaXMudXNlQXBwbHlBc3luYz1mdW5jdGlvbihiKXtyZXR1cm4geChiKT8oYT0hIWIsdGhpcyk6YX07dmFyIGM9ITA7dGhpcy51c2VMZWdhY3lQcm9taXNlRXh0ZW5zaW9ucz1mdW5jdGlvbihhKXtyZXR1cm4geChhKT8oYz0hIWEsdGhpcyk6Y307dmFyIGQ9dGhpcy5pbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVtcIiRodHRwQmFja2VuZFwiLFwiJCRjb29raWVSZWFkZXJcIixcIiRjYWNoZUZhY3RvcnlcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihlLGYsZyxoLGwsayl7ZnVuY3Rpb24gbShhKXtmdW5jdGlvbiBkKGEpe3ZhciBiPVEoe30sYSk7Yi5kYXRhPWEuZGF0YT9lZChhLmRhdGEsYS5oZWFkZXJzLGEuc3RhdHVzLGYudHJhbnNmb3JtUmVzcG9uc2UpOmEuZGF0YTthPWEuc3RhdHVzO3JldHVybiAyMDA8PWEmJjMwMD5hP2I6bC5yZWplY3QoYil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjLGQ9e307bihhLGZ1bmN0aW9uKGEsZSl7QihhKT8oYz1hKGIpLG51bGwhPVxuYyYmKGRbZV09YykpOmRbZV09YX0pO3JldHVybiBkfWlmKCFhYS5pc09iamVjdChhKSl0aHJvdyBHKFwiJGh0dHBcIikoXCJiYWRyZXFcIixhKTt2YXIgZj1RKHttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmIudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTpiLnRyYW5zZm9ybVJlc3BvbnNlLHBhcmFtU2VyaWFsaXplcjpiLnBhcmFtU2VyaWFsaXplcn0sYSk7Zi5oZWFkZXJzPWZ1bmN0aW9uKGEpe3ZhciBjPWIuaGVhZGVycyxkPVEoe30sYS5oZWFkZXJzKSxmLGcsaCxjPVEoe30sYy5jb21tb24sY1tJKGEubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1JKGYpO2ZvcihoIGluIGQpaWYoSShoKT09PWcpY29udGludWUgYTtkW2ZdPWNbZl19cmV0dXJuIGUoZCxpYShhKSl9KGEpO2YubWV0aG9kPXJiKGYubWV0aG9kKTtmLnBhcmFtU2VyaWFsaXplcj1IKGYucGFyYW1TZXJpYWxpemVyKT9rLmdldChmLnBhcmFtU2VyaWFsaXplcik6Zi5wYXJhbVNlcmlhbGl6ZXI7dmFyIGc9XG5bZnVuY3Rpb24oYSl7dmFyIGM9YS5oZWFkZXJzLGU9ZWQoYS5kYXRhLGRkKGMpLHUsYS50cmFuc2Zvcm1SZXF1ZXN0KTt5KGUpJiZuKGMsZnVuY3Rpb24oYSxiKXtcImNvbnRlbnQtdHlwZVwiPT09SShiKSYmZGVsZXRlIGNbYl19KTt5KGEud2l0aENyZWRlbnRpYWxzKSYmIXkoYi53aXRoQ3JlZGVudGlhbHMpJiYoYS53aXRoQ3JlZGVudGlhbHM9Yi53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBxKGEsZSkudGhlbihkLGQpfSx1XSxoPWwud2hlbihmKTtmb3IobihFLGZ1bmN0aW9uKGEpeyhhLnJlcXVlc3R8fGEucmVxdWVzdEVycm9yKSYmZy51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmcucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtnLmxlbmd0aDspe2E9Zy5zaGlmdCgpO3ZhciBtPWcuc2hpZnQoKSxoPWgudGhlbihhLG0pfWM/KGguc3VjY2Vzcz1mdW5jdGlvbihhKXtTYShhLFwiZm5cIik7aC50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLFxuYi5zdGF0dXMsYi5oZWFkZXJzLGYpfSk7cmV0dXJuIGh9LGguZXJyb3I9ZnVuY3Rpb24oYSl7U2EoYSxcImZuXCIpO2gudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxmKX0pO3JldHVybiBofSk6KGguc3VjY2Vzcz1mZChcInN1Y2Nlc3NcIiksaC5lcnJvcj1mZChcImVycm9yXCIpKTtyZXR1cm4gaH1mdW5jdGlvbiBxKGMsZCl7ZnVuY3Rpb24gZyhiLGMsZCxlKXtmdW5jdGlvbiBmKCl7ayhjLGIsZCxlKX1GJiYoMjAwPD1iJiYzMDA+Yj9GLnB1dChQLFtiLGMsY2QoZCksZV0pOkYucmVtb3ZlKFApKTthP2guJGFwcGx5QXN5bmMoZik6KGYoKSxoLiQkcGhhc2V8fGguJGFwcGx5KCkpfWZ1bmN0aW9uIGsoYSxiLGQsZSl7Yj1NYXRoLm1heChiLDApOygyMDA8PWImJjMwMD5iP08ucmVzb2x2ZTpPLnJlamVjdCkoe2RhdGE6YSxzdGF0dXM6YixoZWFkZXJzOmRkKGQpLGNvbmZpZzpjLHN0YXR1c1RleHQ6ZX0pfWZ1bmN0aW9uIHEoYSl7ayhhLmRhdGEsYS5zdGF0dXMsXG5pYShhLmhlYWRlcnMoKSksYS5zdGF0dXNUZXh0KX1mdW5jdGlvbiBFKCl7dmFyIGE9bS5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjKTstMSE9PWEmJm0ucGVuZGluZ1JlcXVlc3RzLnNwbGljZShhLDEpfXZhciBPPWwuZGVmZXIoKSxKPU8ucHJvbWlzZSxGLG4sUz1jLmhlYWRlcnMsUD1zKGMudXJsLGMucGFyYW1TZXJpYWxpemVyKGMucGFyYW1zKSk7bS5wZW5kaW5nUmVxdWVzdHMucHVzaChjKTtKLnRoZW4oRSxFKTshYy5jYWNoZSYmIWIuY2FjaGV8fCExPT09Yy5jYWNoZXx8XCJHRVRcIiE9PWMubWV0aG9kJiZcIkpTT05QXCIhPT1jLm1ldGhvZHx8KEY9RChjLmNhY2hlKT9jLmNhY2hlOkQoYi5jYWNoZSk/Yi5jYWNoZTp0KTtGJiYobj1GLmdldChQKSx4KG4pP24mJkIobi50aGVuKT9uLnRoZW4ocSxxKTpLKG4pP2soblsxXSxuWzBdLGlhKG5bMl0pLG5bM10pOmsobiwyMDAse30sXCJPS1wiKTpGLnB1dChQLEopKTt5KG4pJiYoKG49Z2QoYy51cmwpP2YoKVtjLnhzcmZDb29raWVOYW1lfHxcbmIueHNyZkNvb2tpZU5hbWVdOnUpJiYoU1tjLnhzcmZIZWFkZXJOYW1lfHxiLnhzcmZIZWFkZXJOYW1lXT1uKSxlKGMubWV0aG9kLFAsZCxnLFMsYy50aW1lb3V0LGMud2l0aENyZWRlbnRpYWxzLGMucmVzcG9uc2VUeXBlKSk7cmV0dXJuIEp9ZnVuY3Rpb24gcyhhLGIpezA8Yi5sZW5ndGgmJihhKz0oLTE9PWEuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIpK2IpO3JldHVybiBhfXZhciB0PWcoXCIkaHR0cFwiKTtiLnBhcmFtU2VyaWFsaXplcj1IKGIucGFyYW1TZXJpYWxpemVyKT9rLmdldChiLnBhcmFtU2VyaWFsaXplcik6Yi5wYXJhbVNlcmlhbGl6ZXI7dmFyIEU9W107bihkLGZ1bmN0aW9uKGEpe0UudW5zaGlmdChIKGEpP2suZ2V0KGEpOmsuaW52b2tlKGEpKX0pO20ucGVuZGluZ1JlcXVlc3RzPVtdOyhmdW5jdGlvbihhKXtuKGFyZ3VtZW50cyxmdW5jdGlvbihhKXttW2FdPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIG0oUSh7fSxjfHx7fSx7bWV0aG9kOmEsdXJsOmJ9KSl9fSl9KShcImdldFwiLFwiZGVsZXRlXCIsXG5cImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtuKGFyZ3VtZW50cyxmdW5jdGlvbihhKXttW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gbShRKHt9LGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7bS5kZWZhdWx0cz1iO3JldHVybiBtfV19ZnVuY3Rpb24gUmYoKXtyZXR1cm4gbmV3IE4uWE1MSHR0cFJlcXVlc3R9ZnVuY3Rpb24gZmYoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gU2YoYixSZixiLmRlZmVyLGEuYW5ndWxhci5jYWxsYmFja3MsY1swXSl9XX1mdW5jdGlvbiBTZihiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoYSxiLGMpe3ZhciBmPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxtPW51bGw7Zi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7Zi5zcmM9YTtmLmFzeW5jPSEwO209ZnVuY3Rpb24oYSl7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLFxubSwhMSk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBnPS0xLHQ9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09YS50eXBlfHxkW2JdLmNhbGxlZHx8KGE9e3R5cGU6XCJlcnJvclwifSksdD1hLnR5cGUsZz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7YyYmYyhnLHQpfTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIG19cmV0dXJuIGZ1bmN0aW9uKGUsaCxsLGssbSxxLHMsdCl7ZnVuY3Rpb24gRSgpe3AmJnAoKTtBJiZBLmFib3J0KCl9ZnVuY3Rpb24gTChhLGQsZSxmLGcpe00hPT11JiZjLmNhbmNlbChNKTtwPUE9bnVsbDthKGQsZSxmLGcpO2IuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCh2KX1iLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtoPWh8fGIudXJsKCk7aWYoXCJqc29ucFwiPT1cbkkoZSkpe3ZhciB3PVwiX1wiKyhkLmNvdW50ZXIrKykudG9TdHJpbmcoMzYpO2Rbd109ZnVuY3Rpb24oYSl7ZFt3XS5kYXRhPWE7ZFt3XS5jYWxsZWQ9ITB9O3ZhciBwPWYoaC5yZXBsYWNlKFwiSlNPTl9DQUxMQkFDS1wiLFwiYW5ndWxhci5jYWxsYmFja3MuXCIrdyksdyxmdW5jdGlvbihhLGIpe0woayxhLGRbd10uZGF0YSxcIlwiLGIpO2Rbd109dn0pfWVsc2V7dmFyIEE9YSgpO0Eub3BlbihlLGgsITApO24obSxmdW5jdGlvbihhLGIpe3goYSkmJkEuc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7QS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT1BLnN0YXR1c1RleHR8fFwiXCIsYj1cInJlc3BvbnNlXCJpbiBBP0EucmVzcG9uc2U6QS5yZXNwb25zZVRleHQsYz0xMjIzPT09QS5zdGF0dXM/MjA0OkEuc3RhdHVzOzA9PT1jJiYoYz1iPzIwMDpcImZpbGVcIj09QWEoaCkucHJvdG9jb2w/NDA0OjApO0woayxjLGIsQS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxhKX07ZT1mdW5jdGlvbigpe0woaywtMSxudWxsLG51bGwsXG5cIlwiKX07QS5vbmVycm9yPWU7QS5vbmFib3J0PWU7cyYmKEEud2l0aENyZWRlbnRpYWxzPSEwKTtpZih0KXRyeXtBLnJlc3BvbnNlVHlwZT10fWNhdGNoKHIpe2lmKFwianNvblwiIT09dCl0aHJvdyByO31BLnNlbmQobCl9aWYoMDxxKXZhciBNPWMoRSxxKTtlbHNlIHEmJkIocS50aGVuKSYmcS50aGVuKEUpfX1mdW5jdGlvbiBhZigpe3ZhciBiPVwie3tcIixhPVwifX1cIjt0aGlzLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhiPWEsdGhpcyk6Yn07dGhpcy5lbmRTeW1ib2w9ZnVuY3Rpb24oYil7cmV0dXJuIGI/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHNjZVwiLGZ1bmN0aW9uKGMsZCxlKXtmdW5jdGlvbiBmKGEpe3JldHVyblwiXFxcXFxcXFxcXFxcXCIrYX1mdW5jdGlvbiBnKGMpe3JldHVybiBjLnJlcGxhY2UobSxiKS5yZXBsYWNlKHEsYSl9ZnVuY3Rpb24gaChmLGgsbSxxKXtmdW5jdGlvbiB3KGEpe3RyeXt2YXIgYj1hO2E9bT9lLmdldFRydXN0ZWQobSxcbmIpOmUudmFsdWVPZihiKTt2YXIgYztpZihxJiYheChhKSljPWE7ZWxzZSBpZihudWxsPT1hKWM9XCJcIjtlbHNle3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjphPVwiXCIrYTticmVhaztkZWZhdWx0OmE9ZGIoYSl9Yz1hfXJldHVybiBjfWNhdGNoKGcpe2QoS2EuaW50ZXJyKGYsZykpfX1xPSEhcTtmb3IodmFyIHAsbixyPTAsTT1bXSxPPVtdLEo9Zi5sZW5ndGgsRj1bXSxWPVtdO3I8SjspaWYoLTEhPShwPWYuaW5kZXhPZihiLHIpKSYmLTEhPShuPWYuaW5kZXhPZihhLHArbCkpKXIhPT1wJiZGLnB1c2goZyhmLnN1YnN0cmluZyhyLHApKSkscj1mLnN1YnN0cmluZyhwK2wsbiksTS5wdXNoKHIpLE8ucHVzaChjKHIsdykpLHI9bitrLFYucHVzaChGLmxlbmd0aCksRi5wdXNoKFwiXCIpO2Vsc2V7ciE9PUomJkYucHVzaChnKGYuc3Vic3RyaW5nKHIpKSk7YnJlYWt9bSYmMTxGLmxlbmd0aCYmS2EudGhyb3dOb2NvbmNhdChmKTtpZighaHx8TS5sZW5ndGgpe3ZhciBTPVxuZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1NLmxlbmd0aDtiPGM7YisrKXtpZihxJiZ5KGFbYl0pKXJldHVybjtGW1ZbYl1dPWFbYl19cmV0dXJuIEYuam9pbihcIlwiKX07cmV0dXJuIFEoZnVuY3Rpb24oYSl7dmFyIGI9MCxjPU0ubGVuZ3RoLGU9QXJyYXkoYyk7dHJ5e2Zvcig7YjxjO2IrKyllW2JdPU9bYl0oYSk7cmV0dXJuIFMoZSl9Y2F0Y2goZyl7ZChLYS5pbnRlcnIoZixnKSl9fSx7ZXhwOmYsZXhwcmVzc2lvbnM6TSwkJHdhdGNoRGVsZWdhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gYS4kd2F0Y2hHcm91cChPLGZ1bmN0aW9uKGQsZSl7dmFyIGY9UyhkKTtCKGIpJiZiLmNhbGwodGhpcyxmLGQhPT1lP2M6ZixhKTtjPWZ9KX19KX19dmFyIGw9Yi5sZW5ndGgsaz1hLmxlbmd0aCxtPW5ldyBSZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksXCJnXCIpLHE9bmV3IFJlZ0V4cChhLnJlcGxhY2UoLy4vZyxmKSxcImdcIik7aC5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtoLmVuZFN5bWJvbD1cbmZ1bmN0aW9uKCl7cmV0dXJuIGF9O3JldHVybiBofV19ZnVuY3Rpb24gYmYoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJHdpbmRvd1wiLFwiJHFcIixcIiQkcVwiLGZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoZSxoLGwsayl7dmFyIG09NDxhcmd1bWVudHMubGVuZ3RoLHE9bT94YS5jYWxsKGFyZ3VtZW50cyw0KTpbXSxzPWEuc2V0SW50ZXJ2YWwsdD1hLmNsZWFySW50ZXJ2YWwsRT0wLEw9eChrKSYmIWssdz0oTD9kOmMpLmRlZmVyKCkscD13LnByb21pc2U7bD14KGwpP2w6MDtwLnRoZW4obnVsbCxudWxsLG0/ZnVuY3Rpb24oKXtlLmFwcGx5KG51bGwscSl9OmUpO3AuJCRpbnRlcnZhbElkPXMoZnVuY3Rpb24oKXt3Lm5vdGlmeShFKyspOzA8bCYmRT49bCYmKHcucmVzb2x2ZShFKSx0KHAuJCRpbnRlcnZhbElkKSxkZWxldGUgZltwLiQkaW50ZXJ2YWxJZF0pO0x8fGIuJGFwcGx5KCl9LGgpO2ZbcC4kJGludGVydmFsSWRdPXc7cmV0dXJuIHB9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJlxuYi4kJGludGVydmFsSWQgaW4gZj8oZltiLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksYS5jbGVhckludGVydmFsKGIuJCRpbnRlcnZhbElkKSxkZWxldGUgZltiLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZX1dfWZ1bmN0aW9uIGFjKGIpe2I9Yi5zcGxpdChcIi9cIik7Zm9yKHZhciBhPWIubGVuZ3RoO2EtLTspYlthXT1uYihiW2FdKTtyZXR1cm4gYi5qb2luKFwiL1wiKX1mdW5jdGlvbiBoZChiLGEpe3ZhciBjPUFhKGIpO2EuJCRwcm90b2NvbD1jLnByb3RvY29sO2EuJCRob3N0PWMuaG9zdG5hbWU7YS4kJHBvcnQ9WShjLnBvcnQpfHxUZltjLnByb3RvY29sXXx8bnVsbH1mdW5jdGlvbiBpZChiLGEpe3ZhciBjPVwiL1wiIT09Yi5jaGFyQXQoMCk7YyYmKGI9XCIvXCIrYik7dmFyIGQ9QWEoYik7YS4kJHBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KGMmJlwiL1wiPT09ZC5wYXRobmFtZS5jaGFyQXQoMCk/ZC5wYXRobmFtZS5zdWJzdHJpbmcoMSk6ZC5wYXRobmFtZSk7YS4kJHNlYXJjaD1cbnhjKGQuc2VhcmNoKTthLiQkaGFzaD1kZWNvZGVVUklDb21wb25lbnQoZC5oYXNoKTthLiQkcGF0aCYmXCIvXCIhPWEuJCRwYXRoLmNoYXJBdCgwKSYmKGEuJCRwYXRoPVwiL1wiK2EuJCRwYXRoKX1mdW5jdGlvbiByYShiLGEpe2lmKDA9PT1hLmluZGV4T2YoYikpcmV0dXJuIGEuc3Vic3RyKGIubGVuZ3RoKX1mdW5jdGlvbiBKYShiKXt2YXIgYT1iLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1hP2I6Yi5zdWJzdHIoMCxhKX1mdW5jdGlvbiBDYihiKXtyZXR1cm4gYi5yZXBsYWNlKC8oIy4rKXwjJC8sXCIkMVwiKX1mdW5jdGlvbiBiYyhiLGEsYyl7dGhpcy4kJGh0bWw1PSEwO2M9Y3x8XCJcIjtoZChiLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihiKXt2YXIgYz1yYShhLGIpO2lmKCFIKGMpKXRocm93IERiKFwiaXB0aHByZnhcIixiLGEpO2lkKGMsdGhpcyk7dGhpcy4kJHBhdGh8fCh0aGlzLiQkcGF0aD1cIi9cIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYj1cblBiKHRoaXMuJCRzZWFyY2gpLGM9dGhpcy4kJGhhc2g/XCIjXCIrbmIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1hYyh0aGlzLiQkcGF0aCkrKGI/XCI/XCIrYjpcIlwiKStjO3RoaXMuJCRhYnNVcmw9YSt0aGlzLiQkdXJsLnN1YnN0cigxKX07dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihkLGUpe2lmKGUmJlwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7KGY9cmEoYixkKSkhPT11PyhnPWYsZz0oZj1yYShjLGYpKSE9PXU/YSsocmEoXCIvXCIsZil8fGYpOmIrZyk6KGY9cmEoYSxkKSkhPT11P2c9YStmOmE9PWQrXCIvXCImJihnPWEpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIGNjKGIsYSxjKXtoZChiLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihkKXt2YXIgZT1yYShiLGQpfHxyYShhLGQpLGY7eShlKXx8XCIjXCIhPT1lLmNoYXJBdCgwKT90aGlzLiQkaHRtbDU/Zj1lOihmPVwiXCIseShlKSYmKGI9ZCx0aGlzLnJlcGxhY2UoKSkpOlxuKGY9cmEoYyxlKSx5KGYpJiYoZj1lKSk7aWQoZix0aGlzKTtkPXRoaXMuJCRwYXRoO3ZhciBlPWIsZz0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1mLmluZGV4T2YoZSkmJihmPWYucmVwbGFjZShlLFwiXCIpKTtnLmV4ZWMoZil8fChkPShmPWcuZXhlYyhkKSk/ZlsxXTpkKTt0aGlzLiQkcGF0aD1kO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9UGIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIituYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWFjKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iKyh0aGlzLiQkdXJsP2MrdGhpcy4kJHVybDpcIlwiKX07dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihhLGMpe3JldHVybiBKYShiKT09SmEoYSk/KHRoaXMuJCRwYXJzZShhKSwhMCk6ITF9fWZ1bmN0aW9uIGpkKGIsYSxjKXt0aGlzLiQkaHRtbDU9ITA7Y2MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJCRwYXJzZUxpbmtVcmw9XG5mdW5jdGlvbihkLGUpe2lmKGUmJlwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7Yj09SmEoZCk/Zj1kOihnPXJhKGEsZCkpP2Y9YitjK2c6YT09PWQrXCIvXCImJihmPWEpO2YmJnRoaXMuJCRwYXJzZShmKTtyZXR1cm4hIWZ9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9UGIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIituYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWFjKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iK2MrdGhpcy4kJHVybH19ZnVuY3Rpb24gRWIoYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYl19fWZ1bmN0aW9uIGtkKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKHkoYykpcmV0dXJuIHRoaXNbYl07dGhpc1tiXT1hKGMpO3RoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9fWZ1bmN0aW9uIGdmKCl7dmFyIGI9XCJcIixhPXtlbmFibGVkOiExLHJlcXVpcmVCYXNlOiEwLFxucmV3cml0ZUxpbmtzOiEwfTt0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmh0bWw1TW9kZT1mdW5jdGlvbihiKXtyZXR1cm4gYWIoYik/KGEuZW5hYmxlZD1iLHRoaXMpOkQoYik/KGFiKGIuZW5hYmxlZCkmJihhLmVuYWJsZWQ9Yi5lbmFibGVkKSxhYihiLnJlcXVpcmVCYXNlKSYmKGEucmVxdWlyZUJhc2U9Yi5yZXF1aXJlQmFzZSksYWIoYi5yZXdyaXRlTGlua3MpJiYoYS5yZXdyaXRlTGlua3M9Yi5yZXdyaXRlTGlua3MpLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGU9ay51cmwoKSxmPWsuJCRzdGF0ZTt0cnl7ZC51cmwoYSxiLGMpLGsuJCRzdGF0ZT1kLnN0YXRlKCl9Y2F0Y2goZyl7dGhyb3cgay51cmwoZSksay4kJHN0YXRlPWYsZzt9fWZ1bmN0aW9uIGwoYSxcbmIpe2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixrLmFic1VybCgpLGEsay4kJHN0YXRlLGIpfXZhciBrLG07bT1kLmJhc2VIcmVmKCk7dmFyIHE9ZC51cmwoKSxzO2lmKGEuZW5hYmxlZCl7aWYoIW0mJmEucmVxdWlyZUJhc2UpdGhyb3cgRGIoXCJub2Jhc2VcIik7cz1xLnN1YnN0cmluZygwLHEuaW5kZXhPZihcIi9cIixxLmluZGV4T2YoXCIvL1wiKSsyKSkrKG18fFwiL1wiKTttPWUuaGlzdG9yeT9iYzpqZH1lbHNlIHM9SmEocSksbT1jYzt2YXIgdD1zLnN1YnN0cigwLEphKHMpLmxhc3RJbmRleE9mKFwiL1wiKSsxKTtrPW5ldyBtKHMsdCxcIiNcIitiKTtrLiQkcGFyc2VMaW5rVXJsKHEscSk7ay4kJHN0YXRlPWQuc3RhdGUoKTt2YXIgRT0vXlxccyooamF2YXNjcmlwdHxtYWlsdG8pOi9pO2Yub24oXCJjbGlja1wiLGZ1bmN0aW9uKGIpe2lmKGEucmV3cml0ZUxpbmtzJiYhYi5jdHJsS2V5JiYhYi5tZXRhS2V5JiYhYi5zaGlmdEtleSYmMiE9Yi53aGljaCYmMiE9Yi5idXR0b24pe2Zvcih2YXIgZT1cbnooYi50YXJnZXQpO1wiYVwiIT09dGEoZVswXSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBoPWUucHJvcChcImhyZWZcIiksbD1lLmF0dHIoXCJocmVmXCIpfHxlLmF0dHIoXCJ4bGluazpocmVmXCIpO0QoaCkmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWgudG9TdHJpbmcoKSYmKGg9QWEoaC5hbmltVmFsKS5ocmVmKTtFLnRlc3QoaCl8fCFofHxlLmF0dHIoXCJ0YXJnZXRcIil8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFrLiQkcGFyc2VMaW5rVXJsKGgsbCl8fChiLnByZXZlbnREZWZhdWx0KCksay5hYnNVcmwoKSE9ZC51cmwoKSYmKGMuJGFwcGx5KCksZy5hbmd1bGFyW1wiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0XCJdPSEwKSl9fSk7Q2Ioay5hYnNVcmwoKSkhPUNiKHEpJiZkLnVybChrLmFic1VybCgpLCEwKTt2YXIgTD0hMDtkLm9uVXJsQ2hhbmdlKGZ1bmN0aW9uKGEsYil7eShyYSh0LGEpKT9nLmxvY2F0aW9uLmhyZWY9YTooYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGQ9XG5rLmFic1VybCgpLGU9ay4kJHN0YXRlLGY7ay4kJHBhcnNlKGEpO2suJCRzdGF0ZT1iO2Y9Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixhLGQsYixlKS5kZWZhdWx0UHJldmVudGVkO2suYWJzVXJsKCk9PT1hJiYoZj8oay4kJHBhcnNlKGQpLGsuJCRzdGF0ZT1lLGgoZCwhMSxlKSk6KEw9ITEsbChkLGUpKSl9KSxjLiQkcGhhc2V8fGMuJGRpZ2VzdCgpKX0pO2MuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9Q2IoZC51cmwoKSksYj1DYihrLmFic1VybCgpKSxmPWQuc3RhdGUoKSxnPWsuJCRyZXBsYWNlLG09YSE9PWJ8fGsuJCRodG1sNSYmZS5oaXN0b3J5JiZmIT09ay4kJHN0YXRlO2lmKEx8fG0pTD0hMSxjLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgYj1rLmFic1VybCgpLGQ9Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixiLGEsay4kJHN0YXRlLGYpLmRlZmF1bHRQcmV2ZW50ZWQ7ay5hYnNVcmwoKT09PWImJihkPyhrLiQkcGFyc2UoYSksay4kJHN0YXRlPVxuZik6KG0mJmgoYixnLGY9PT1rLiQkc3RhdGU/bnVsbDprLiQkc3RhdGUpLGwoYSxmKSkpfSk7ay4kJHJlcGxhY2U9ITF9KTtyZXR1cm4ga31dfWZ1bmN0aW9uIGhmKCl7dmFyIGI9ITAsYT10aGlzO3RoaXMuZGVidWdFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEpe2EgaW5zdGFuY2VvZiBFcnJvciYmKGEuc3RhY2s/YT1hLm1lc3NhZ2UmJi0xPT09YS5zdGFjay5pbmRleE9mKGEubWVzc2FnZSk/XCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWMuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8djthPSExO3RyeXthPSEhZS5hcHBseX1jYXRjaChsKXt9cmV0dXJuIGE/ZnVuY3Rpb24oKXt2YXIgYT1cbltdO24oYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2EucHVzaChkKGIpKX0pO3JldHVybiBlLmFwcGx5KGIsYSl9OmZ1bmN0aW9uKGEsYil7ZShhLG51bGw9PWI/XCJcIjpiKX19cmV0dXJue2xvZzplKFwibG9nXCIpLGluZm86ZShcImluZm9cIiksd2FybjplKFwid2FyblwiKSxlcnJvcjplKFwiZXJyb3JcIiksZGVidWc6ZnVuY3Rpb24oKXt2YXIgYz1lKFwiZGVidWdcIik7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmYy5hcHBseShhLGFyZ3VtZW50cyl9fSgpfX1dfWZ1bmN0aW9uIFdhKGIsYSl7aWYoXCJfX2RlZmluZUdldHRlcl9fXCI9PT1ifHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1ifHxcIl9fcHJvdG9fX1wiPT09Yil0aHJvdyBkYShcImlzZWNmbGRcIixhKTtyZXR1cm4gYn1mdW5jdGlvbiBCYShiLGEpe2lmKGIpe2lmKGIuY29uc3RydWN0b3I9PT1iKXRocm93IGRhKFwiaXNlY2ZuXCIsYSk7aWYoYi53aW5kb3c9PT1iKXRocm93IGRhKFwiaXNlY3dpbmRvd1wiLFxuYSk7aWYoYi5jaGlsZHJlbiYmKGIubm9kZU5hbWV8fGIucHJvcCYmYi5hdHRyJiZiLmZpbmQpKXRocm93IGRhKFwiaXNlY2RvbVwiLGEpO2lmKGI9PT1PYmplY3QpdGhyb3cgZGEoXCJpc2Vjb2JqXCIsYSk7fXJldHVybiBifWZ1bmN0aW9uIGxkKGIsYSl7aWYoYil7aWYoYi5jb25zdHJ1Y3Rvcj09PWIpdGhyb3cgZGEoXCJpc2VjZm5cIixhKTtpZihiPT09VWZ8fGI9PT1WZnx8Yj09PVdmKXRocm93IGRhKFwiaXNlY2ZmXCIsYSk7fX1mdW5jdGlvbiBYZihiLGEpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYj9iOmF9ZnVuY3Rpb24gbWQoYixhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGI/YTpcInVuZGVmaW5lZFwiPT09dHlwZW9mIGE/YjpiK2F9ZnVuY3Rpb24gVShiLGEpe3ZhciBjLGQ7c3dpdGNoKGIudHlwZSl7Y2FzZSByLlByb2dyYW06Yz0hMDtuKGIuYm9keSxmdW5jdGlvbihiKXtVKGIuZXhwcmVzc2lvbixhKTtjPWMmJmIuZXhwcmVzc2lvbi5jb25zdGFudH0pO2IuY29uc3RhbnQ9XG5jO2JyZWFrO2Nhc2Ugci5MaXRlcmFsOmIuY29uc3RhbnQ9ITA7Yi50b1dhdGNoPVtdO2JyZWFrO2Nhc2Ugci5VbmFyeUV4cHJlc3Npb246VShiLmFyZ3VtZW50LGEpO2IuY29uc3RhbnQ9Yi5hcmd1bWVudC5jb25zdGFudDtiLnRvV2F0Y2g9Yi5hcmd1bWVudC50b1dhdGNoO2JyZWFrO2Nhc2Ugci5CaW5hcnlFeHByZXNzaW9uOlUoYi5sZWZ0LGEpO1UoYi5yaWdodCxhKTtiLmNvbnN0YW50PWIubGVmdC5jb25zdGFudCYmYi5yaWdodC5jb25zdGFudDtiLnRvV2F0Y2g9Yi5sZWZ0LnRvV2F0Y2guY29uY2F0KGIucmlnaHQudG9XYXRjaCk7YnJlYWs7Y2FzZSByLkxvZ2ljYWxFeHByZXNzaW9uOlUoYi5sZWZ0LGEpO1UoYi5yaWdodCxhKTtiLmNvbnN0YW50PWIubGVmdC5jb25zdGFudCYmYi5yaWdodC5jb25zdGFudDtiLnRvV2F0Y2g9Yi5jb25zdGFudD9bXTpbYl07YnJlYWs7Y2FzZSByLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpVKGIudGVzdCxhKTtVKGIuYWx0ZXJuYXRlLGEpO1UoYi5jb25zZXF1ZW50LFxuYSk7Yi5jb25zdGFudD1iLnRlc3QuY29uc3RhbnQmJmIuYWx0ZXJuYXRlLmNvbnN0YW50JiZiLmNvbnNlcXVlbnQuY29uc3RhbnQ7Yi50b1dhdGNoPWIuY29uc3RhbnQ/W106W2JdO2JyZWFrO2Nhc2Ugci5JZGVudGlmaWVyOmIuY29uc3RhbnQ9ITE7Yi50b1dhdGNoPVtiXTticmVhaztjYXNlIHIuTWVtYmVyRXhwcmVzc2lvbjpVKGIub2JqZWN0LGEpO2IuY29tcHV0ZWQmJlUoYi5wcm9wZXJ0eSxhKTtiLmNvbnN0YW50PWIub2JqZWN0LmNvbnN0YW50JiYoIWIuY29tcHV0ZWR8fGIucHJvcGVydHkuY29uc3RhbnQpO2IudG9XYXRjaD1bYl07YnJlYWs7Y2FzZSByLkNhbGxFeHByZXNzaW9uOmM9Yi5maWx0ZXI/IWEoYi5jYWxsZWUubmFtZSkuJHN0YXRlZnVsOiExO2Q9W107bihiLmFyZ3VtZW50cyxmdW5jdGlvbihiKXtVKGIsYSk7Yz1jJiZiLmNvbnN0YW50O2IuY29uc3RhbnR8fGQucHVzaC5hcHBseShkLGIudG9XYXRjaCl9KTtiLmNvbnN0YW50PWM7Yi50b1dhdGNoPWIuZmlsdGVyJiZcbiFhKGIuY2FsbGVlLm5hbWUpLiRzdGF0ZWZ1bD9kOltiXTticmVhaztjYXNlIHIuQXNzaWdubWVudEV4cHJlc3Npb246VShiLmxlZnQsYSk7VShiLnJpZ2h0LGEpO2IuY29uc3RhbnQ9Yi5sZWZ0LmNvbnN0YW50JiZiLnJpZ2h0LmNvbnN0YW50O2IudG9XYXRjaD1bYl07YnJlYWs7Y2FzZSByLkFycmF5RXhwcmVzc2lvbjpjPSEwO2Q9W107bihiLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe1UoYixhKTtjPWMmJmIuY29uc3RhbnQ7Yi5jb25zdGFudHx8ZC5wdXNoLmFwcGx5KGQsYi50b1dhdGNoKX0pO2IuY29uc3RhbnQ9YztiLnRvV2F0Y2g9ZDticmVhaztjYXNlIHIuT2JqZWN0RXhwcmVzc2lvbjpjPSEwO2Q9W107bihiLnByb3BlcnRpZXMsZnVuY3Rpb24oYil7VShiLnZhbHVlLGEpO2M9YyYmYi52YWx1ZS5jb25zdGFudDtiLnZhbHVlLmNvbnN0YW50fHxkLnB1c2guYXBwbHkoZCxiLnZhbHVlLnRvV2F0Y2gpfSk7Yi5jb25zdGFudD1jO2IudG9XYXRjaD1kO2JyZWFrO2Nhc2Ugci5UaGlzRXhwcmVzc2lvbjpiLmNvbnN0YW50PVxuITEsYi50b1dhdGNoPVtdfX1mdW5jdGlvbiBuZChiKXtpZigxPT1iLmxlbmd0aCl7Yj1iWzBdLmV4cHJlc3Npb247dmFyIGE9Yi50b1dhdGNoO3JldHVybiAxIT09YS5sZW5ndGg/YTphWzBdIT09Yj9hOnV9fWZ1bmN0aW9uIG9kKGIpe3JldHVybiBiLnR5cGU9PT1yLklkZW50aWZpZXJ8fGIudHlwZT09PXIuTWVtYmVyRXhwcmVzc2lvbn1mdW5jdGlvbiBwZChiKXtpZigxPT09Yi5ib2R5Lmxlbmd0aCYmb2QoYi5ib2R5WzBdLmV4cHJlc3Npb24pKXJldHVybnt0eXBlOnIuQXNzaWdubWVudEV4cHJlc3Npb24sbGVmdDpiLmJvZHlbMF0uZXhwcmVzc2lvbixyaWdodDp7dHlwZTpyLk5HVmFsdWVQYXJhbWV0ZXJ9LG9wZXJhdG9yOlwiPVwifX1mdW5jdGlvbiBxZChiKXtyZXR1cm4gMD09PWIuYm9keS5sZW5ndGh8fDE9PT1iLmJvZHkubGVuZ3RoJiYoYi5ib2R5WzBdLmV4cHJlc3Npb24udHlwZT09PXIuTGl0ZXJhbHx8Yi5ib2R5WzBdLmV4cHJlc3Npb24udHlwZT09PXIuQXJyYXlFeHByZXNzaW9ufHxcbmIuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1yLk9iamVjdEV4cHJlc3Npb24pfWZ1bmN0aW9uIHJkKGIsYSl7dGhpcy5hc3RCdWlsZGVyPWI7dGhpcy4kZmlsdGVyPWF9ZnVuY3Rpb24gc2QoYixhKXt0aGlzLmFzdEJ1aWxkZXI9Yjt0aGlzLiRmaWx0ZXI9YX1mdW5jdGlvbiBGYihiKXtyZXR1cm5cImNvbnN0cnVjdG9yXCI9PWJ9ZnVuY3Rpb24gZGMoYil7cmV0dXJuIEIoYi52YWx1ZU9mKT9iLnZhbHVlT2YoKTpZZi5jYWxsKGIpfWZ1bmN0aW9uIGpmKCl7dmFyIGI9Z2EoKSxhPWdhKCk7dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEsYil7cmV0dXJuIG51bGw9PWF8fG51bGw9PWI/YT09PWI6XCJvYmplY3RcIj09PXR5cGVvZiBhJiYoYT1kYyhhKSxcIm9iamVjdFwiPT09dHlwZW9mIGEpPyExOmE9PT1ifHxhIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZShhLGIsYyxlLGYpe3ZhciBnPWUuaW5wdXRzLGg7aWYoMT09PWcubGVuZ3RoKXt2YXIgaz1kLGc9Z1swXTtyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7dmFyIGI9XG5nKGEpO2QoYixrKXx8KGg9ZShhLHUsdSxbYl0pLGs9YiYmZGMoYikpO3JldHVybiBofSxiLGMsZil9Zm9yKHZhciBsPVtdLG09W10scT0wLG49Zy5sZW5ndGg7cTxuO3ErKylsW3FdPWQsbVtxXT1udWxsO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGY9Zy5sZW5ndGg7YzxmO2MrKyl7dmFyIGs9Z1tjXShhKTtpZihifHwoYj0hZChrLGxbY10pKSltW2NdPWssbFtjXT1rJiZkYyhrKX1iJiYoaD1lKGEsdSx1LG0pKTtyZXR1cm4gaH0sYixjLGYpfWZ1bmN0aW9uIGYoYSxiLGMsZCl7dmFyIGUsZjtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2Y9YTtCKGIpJiZiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt4KGEpJiZkLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3goZikmJmUoKX0pfSxjKX1mdW5jdGlvbiBnKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9ITA7bihhLGZ1bmN0aW9uKGEpe3goYSl8fFxuKGI9ITEpfSk7cmV0dXJuIGJ9dmFyIGYsZztyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2c9YTtCKGIpJiZiLmNhbGwodGhpcyxhLGMsZCk7ZShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtlKGcpJiZmKCl9KX0sYyl9ZnVuY3Rpb24gaChhLGIsYyxkKXt2YXIgZTtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe0IoYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2UoKX0sYyl9ZnVuY3Rpb24gbChhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPWEuJCR3YXRjaERlbGVnYXRlLGM9YyE9PWcmJmMhPT1mP2Z1bmN0aW9uKGMsZCxlLGYpe2U9YShjLGQsZSxmKTtyZXR1cm4gYihlLGMsZCl9OmZ1bmN0aW9uKGMsZCxlLGYpe2U9YShjLGQsZSxmKTtjPWIoZSxjLGQpO3JldHVybiB4KGUpP2M6ZX07YS4kJHdhdGNoRGVsZWdhdGUmJmEuJCR3YXRjaERlbGVnYXRlIT09XG5lP2MuJCR3YXRjaERlbGVnYXRlPWEuJCR3YXRjaERlbGVnYXRlOmIuJHN0YXRlZnVsfHwoYy4kJHdhdGNoRGVsZWdhdGU9ZSxjLmlucHV0cz1hLmlucHV0cz9hLmlucHV0czpbYV0pO3JldHVybiBjfXZhciBrPUZhKCkubm9VbnNhZmVFdmFsLG09e2NzcDprLGV4cGVuc2l2ZUNoZWNrczohMX0scT17Y3NwOmssZXhwZW5zaXZlQ2hlY2tzOiEwfTtyZXR1cm4gZnVuY3Rpb24oZCxrLEUpe3ZhciBuLHcscDtzd2l0Y2godHlwZW9mIGQpe2Nhc2UgXCJzdHJpbmdcIjpwPWQ9ZC50cmltKCk7dmFyIHI9RT9hOmI7bj1yW3BdO258fChcIjpcIj09PWQuY2hhckF0KDApJiZcIjpcIj09PWQuY2hhckF0KDEpJiYodz0hMCxkPWQuc3Vic3RyaW5nKDIpKSxFPUU/cTptLG49bmV3IGVjKEUpLG49KG5ldyBmYyhuLGMsRSkpLnBhcnNlKGQpLG4uY29uc3RhbnQ/bi4kJHdhdGNoRGVsZWdhdGU9aDp3P24uJCR3YXRjaERlbGVnYXRlPW4ubGl0ZXJhbD9nOmY6bi5pbnB1dHMmJihuLiQkd2F0Y2hEZWxlZ2F0ZT1lKSxcbnJbcF09bik7cmV0dXJuIGwobixrKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4gbChkLGspO2RlZmF1bHQ6cmV0dXJuIHZ9fX1dfWZ1bmN0aW9uIGxmKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gdGQoZnVuY3Rpb24oYSl7Yi4kZXZhbEFzeW5jKGEpfSxhKX1dfWZ1bmN0aW9uIG1mKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRkKGZ1bmN0aW9uKGEpe2IuZGVmZXIoYSl9LGEpfV19ZnVuY3Rpb24gdGQoYixhKXtmdW5jdGlvbiBjKGEsYixjKXtmdW5jdGlvbiBkKGIpe3JldHVybiBmdW5jdGlvbihjKXtlfHwoZT0hMCxiLmNhbGwoYSxjKSl9fXZhciBlPSExO3JldHVybltkKGIpLGQoYyldfWZ1bmN0aW9uIGQoKXt0aGlzLiQkc3RhdGU9e3N0YXR1czowfX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2IuY2FsbChhLGMpfX1cbmZ1bmN0aW9uIGYoYyl7IWMucHJvY2Vzc1NjaGVkdWxlZCYmYy5wZW5kaW5nJiYoYy5wcm9jZXNzU2NoZWR1bGVkPSEwLGIoZnVuY3Rpb24oKXt2YXIgYixkLGU7ZT1jLnBlbmRpbmc7Yy5wcm9jZXNzU2NoZWR1bGVkPSExO2MucGVuZGluZz11O2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZil7ZD1lW2ZdWzBdO2I9ZVtmXVtjLnN0YXR1c107dHJ5e0IoYik/ZC5yZXNvbHZlKGIoYy52YWx1ZSkpOjE9PT1jLnN0YXR1cz9kLnJlc29sdmUoYy52YWx1ZSk6ZC5yZWplY3QoYy52YWx1ZSl9Y2F0Y2goaCl7ZC5yZWplY3QoaCksYShoKX19fSkpfWZ1bmN0aW9uIGcoKXt0aGlzLnByb21pc2U9bmV3IGQ7dGhpcy5yZXNvbHZlPWUodGhpcyx0aGlzLnJlc29sdmUpO3RoaXMucmVqZWN0PWUodGhpcyx0aGlzLnJlamVjdCk7dGhpcy5ub3RpZnk9ZSh0aGlzLHRoaXMubm90aWZ5KX12YXIgaD1HKFwiJHFcIixUeXBlRXJyb3IpO1EoZC5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHkoYSkmJlxueShiKSYmeShjKSlyZXR1cm4gdGhpczt2YXIgZD1uZXcgZzt0aGlzLiQkc3RhdGUucGVuZGluZz10aGlzLiQkc3RhdGUucGVuZGluZ3x8W107dGhpcy4kJHN0YXRlLnBlbmRpbmcucHVzaChbZCxhLGIsY10pOzA8dGhpcy4kJHN0YXRlLnN0YXR1cyYmZih0aGlzLiQkc3RhdGUpO3JldHVybiBkLnByb21pc2V9LFwiY2F0Y2hcIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9LFwiZmluYWxseVwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihiKXtyZXR1cm4gayhiLCEwLGEpfSxmdW5jdGlvbihiKXtyZXR1cm4gayhiLCExLGEpfSxiKX19KTtRKGcucHJvdG90eXBlLHtyZXNvbHZlOmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1c3x8KGE9PT10aGlzLnByb21pc2U/dGhpcy4kJHJlamVjdChoKFwicWN5Y2xlXCIsYSkpOnRoaXMuJCRyZXNvbHZlKGEpKX0sJCRyZXNvbHZlOmZ1bmN0aW9uKGIpe3ZhciBkLGU7ZT1jKHRoaXMsdGhpcy4kJHJlc29sdmUsXG50aGlzLiQkcmVqZWN0KTt0cnl7aWYoRChiKXx8QihiKSlkPWImJmIudGhlbjtCKGQpPyh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXM9LTEsZC5jYWxsKGIsZVswXSxlWzFdLHRoaXMubm90aWZ5KSk6KHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWIsdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTEsZih0aGlzLnByb21pc2UuJCRzdGF0ZSkpfWNhdGNoKGcpe2VbMV0oZyksYShnKX19LHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fHRoaXMuJCRyZWplY3QoYSl9LCQkcmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWE7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTI7Zih0aGlzLnByb21pc2UuJCRzdGF0ZSl9LG5vdGlmeTpmdW5jdGlvbihjKXt2YXIgZD10aGlzLnByb21pc2UuJCRzdGF0ZS5wZW5kaW5nOzA+PXRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyYmZCYmZC5sZW5ndGgmJmIoZnVuY3Rpb24oKXtmb3IodmFyIGIsXG5lLGY9MCxnPWQubGVuZ3RoO2Y8ZztmKyspe2U9ZFtmXVswXTtiPWRbZl1bM107dHJ5e2Uubm90aWZ5KEIoYik/YihjKTpjKX1jYXRjaChoKXthKGgpfX19KX19KTt2YXIgbD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBnO2I/Yy5yZXNvbHZlKGEpOmMucmVqZWN0KGEpO3JldHVybiBjLnByb21pc2V9LGs9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7dHJ5e0IoYykmJihkPWMoKSl9Y2F0Y2goZSl7cmV0dXJuIGwoZSwhMSl9cmV0dXJuIGQmJkIoZC50aGVuKT9kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbChhLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gbChhLCExKX0pOmwoYSxiKX0sbT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgZztlLnJlc29sdmUoYSk7cmV0dXJuIGUucHJvbWlzZS50aGVuKGIsYyxkKX0scT1mdW5jdGlvbiB0KGEpe2lmKCFCKGEpKXRocm93IGgoXCJub3JzbHZyXCIsYSk7aWYoISh0aGlzIGluc3RhbmNlb2YgdCkpcmV0dXJuIG5ldyB0KGEpO3ZhciBiPW5ldyBnO1xuYShmdW5jdGlvbihhKXtiLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2IucmVqZWN0KGEpfSk7cmV0dXJuIGIucHJvbWlzZX07cS5kZWZlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgZ307cS5yZWplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGc7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX07cS53aGVuPW07cS5yZXNvbHZlPW07cS5hbGw9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGcsYz0wLGQ9SyhhKT9bXTp7fTtuKGEsZnVuY3Rpb24oYSxlKXtjKys7bShhKS50aGVuKGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fChkW2VdPWEsLS1jfHxiLnJlc29sdmUoZCkpfSxmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHxiLnJlamVjdChhKX0pfSk7MD09PWMmJmIucmVzb2x2ZShkKTtyZXR1cm4gYi5wcm9taXNlfTtyZXR1cm4gcX1mdW5jdGlvbiB2Zigpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fFxuYi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZD1iLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxiLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHxiLndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSxlPSEhYyxmPWU/ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtyZXR1cm4gZnVuY3Rpb24oKXtkKGIpfX06ZnVuY3Rpb24oYil7dmFyIGM9YShiLDE2LjY2LCExKTtyZXR1cm4gZnVuY3Rpb24oKXthLmNhbmNlbChjKX19O2Yuc3VwcG9ydGVkPWU7cmV0dXJuIGZ9XX1mdW5jdGlvbiBrZigpe2Z1bmN0aW9uIGIoYSl7ZnVuY3Rpb24gYigpe3RoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkd2F0Y2hlcnNDb3VudD0wO3RoaXMuJGlkPSsrbWI7dGhpcy4kJENoaWxkU2NvcGU9bnVsbH1iLnByb3RvdHlwZT1hO1xucmV0dXJuIGJ9dmFyIGE9MTAsYz1HKFwiJHJvb3RTY29wZVwiKSxkPW51bGwsZT1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPWIpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHBhcnNlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGYsZyxoLGwpe2Z1bmN0aW9uIGsoYSl7YS5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQ9ITB9ZnVuY3Rpb24gbSgpe3RoaXMuJGlkPSsrbWI7dGhpcy4kJHBoYXNlPXRoaXMuJHBhcmVudD10aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9bnVsbDt0aGlzLiRyb290PXRoaXM7dGhpcy4kJGRlc3Ryb3llZD0hMTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCR3YXRjaGVyc0NvdW50PTA7dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz1cbm51bGx9ZnVuY3Rpb24gcShhKXtpZihwLiQkcGhhc2UpdGhyb3cgYyhcImlucHJvZ1wiLHAuJCRwaGFzZSk7cC4kJHBoYXNlPWF9ZnVuY3Rpb24gcyhhLGIpe2RvIGEuJCR3YXRjaGVyc0NvdW50Kz1iO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiB0KGEsYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBMKCl7Zm9yKDtNLmxlbmd0aDspdHJ5e00uc2hpZnQoKSgpfWNhdGNoKGEpe2coYSl9ZT1udWxsfWZ1bmN0aW9uIHcoKXtudWxsPT09ZSYmKGU9bC5kZWZlcihmdW5jdGlvbigpe3AuJGFwcGx5KEwpfSkpfW0ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjptLCRuZXc6ZnVuY3Rpb24oYSxjKXt2YXIgZDtjPWN8fHRoaXM7YT8oZD1uZXcgbSxkLiRyb290PXRoaXMuJHJvb3QpOih0aGlzLiQkQ2hpbGRTY29wZXx8XG4odGhpcy4kJENoaWxkU2NvcGU9Yih0aGlzKSksZD1uZXcgdGhpcy4kJENoaWxkU2NvcGUpO2QuJHBhcmVudD1jO2QuJCRwcmV2U2libGluZz1jLiQkY2hpbGRUYWlsO2MuJCRjaGlsZEhlYWQ/KGMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1kLGMuJCRjaGlsZFRhaWw9ZCk6Yy4kJGNoaWxkSGVhZD1jLiQkY2hpbGRUYWlsPWQ7KGF8fGMhPXRoaXMpJiZkLiRvbihcIiRkZXN0cm95XCIsayk7cmV0dXJuIGR9LCR3YXRjaDpmdW5jdGlvbihhLGIsYyxlKXt2YXIgZj1oKGEpO2lmKGYuJCR3YXRjaERlbGVnYXRlKXJldHVybiBmLiQkd2F0Y2hEZWxlZ2F0ZSh0aGlzLGIsYyxmLGEpO3ZhciBnPXRoaXMsaz1nLiQkd2F0Y2hlcnMsbD17Zm46YixsYXN0OnIsZ2V0OmYsZXhwOmV8fGEsZXE6ISFjfTtkPW51bGw7QihiKXx8KGwuZm49dik7a3x8KGs9Zy4kJHdhdGNoZXJzPVtdKTtrLnVuc2hpZnQobCk7cyh0aGlzLDEpO3JldHVybiBmdW5jdGlvbigpezA8PWJiKGssbCkmJnMoZywtMSk7ZD1udWxsfX0sXG4kd2F0Y2hHcm91cDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtoPSExO2s/KGs9ITEsYihlLGUsZykpOmIoZSxkLGcpfXZhciBkPUFycmF5KGEubGVuZ3RoKSxlPUFycmF5KGEubGVuZ3RoKSxmPVtdLGc9dGhpcyxoPSExLGs9ITA7aWYoIWEubGVuZ3RoKXt2YXIgbD0hMDtnLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtsJiZiKGUsZSxnKX0pO3JldHVybiBmdW5jdGlvbigpe2w9ITF9fWlmKDE9PT1hLmxlbmd0aClyZXR1cm4gdGhpcy4kd2F0Y2goYVswXSxmdW5jdGlvbihhLGMsZil7ZVswXT1hO2RbMF09YztiKGUsYT09PWM/ZTpkLGYpfSk7bihhLGZ1bmN0aW9uKGEsYil7dmFyIGs9Zy4kd2F0Y2goYSxmdW5jdGlvbihhLGYpe2VbYl09YTtkW2JdPWY7aHx8KGg9ITAsZy4kZXZhbEFzeW5jKGMpKX0pO2YucHVzaChrKX0pO3JldHVybiBmdW5jdGlvbigpe2Zvcig7Zi5sZW5ndGg7KWYuc2hpZnQoKSgpfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZT1cbmE7dmFyIGIsZCxnLGg7aWYoIXkoZSkpe2lmKEQoZSkpaWYoRGEoZSkpZm9yKGYhPT1xJiYoZj1xLHQ9Zi5sZW5ndGg9MCxsKyspLGE9ZS5sZW5ndGgsdCE9PWEmJihsKyssZi5sZW5ndGg9dD1hKSxiPTA7YjxhO2IrKyloPWZbYl0sZz1lW2JdLGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwobCsrLGZbYl09Zyk7ZWxzZXtmIT09cyYmKGY9cz17fSx0PTAsbCsrKTthPTA7Zm9yKGIgaW4gZSllLmhhc093blByb3BlcnR5KGIpJiYoYSsrLGc9ZVtiXSxoPWZbYl0sYiBpbiBmPyhkPWghPT1oJiZnIT09ZyxkfHxoPT09Z3x8KGwrKyxmW2JdPWcpKToodCsrLGZbYl09ZyxsKyspKTtpZih0PmEpZm9yKGIgaW4gbCsrLGYpZS5oYXNPd25Qcm9wZXJ0eShiKXx8KHQtLSxkZWxldGUgZltiXSl9ZWxzZSBmIT09ZSYmKGY9ZSxsKyspO3JldHVybiBsfX1jLiRzdGF0ZWZ1bD0hMDt2YXIgZD10aGlzLGUsZixnLGs9MTxiLmxlbmd0aCxsPTAsbT1oKGEsYykscT1bXSxzPXt9LHA9ITAsdD0wO3JldHVybiB0aGlzLiR3YXRjaChtLFxuZnVuY3Rpb24oKXtwPyhwPSExLGIoZSxlLGQpKTpiKGUsZyxkKTtpZihrKWlmKEQoZSkpaWYoRGEoZSkpe2c9QXJyYXkoZS5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWdbYV09ZVthXX1lbHNlIGZvcihhIGluIGc9e30sZSlOYS5jYWxsKGUsYSkmJihnW2FdPWVbYV0pO2Vsc2UgZz1lfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgYixmLGgsayxtLHMsdD1hLG4sdz1bXSxDLE07cShcIiRkaWdlc3RcIik7bC4kJGNoZWNrVXJsQ2hhbmdlKCk7dGhpcz09PXAmJm51bGwhPT1lJiYobC5kZWZlci5jYW5jZWwoZSksTCgpKTtkPW51bGw7ZG97cz0hMTtmb3Iobj10aGlzO3UubGVuZ3RoOyl7dHJ5e009dS5zaGlmdCgpLE0uc2NvcGUuJGV2YWwoTS5leHByZXNzaW9uLE0ubG9jYWxzKX1jYXRjaCh2KXtnKHYpfWQ9bnVsbH1hOmRve2lmKGs9bi4kJHdhdGNoZXJzKWZvcihtPWsubGVuZ3RoO20tLTspdHJ5e2lmKGI9a1ttXSlpZigoZj1iLmdldChuKSkhPT0oaD1iLmxhc3QpJiZcbiEoYi5lcT9rYShmLGgpOlwibnVtYmVyXCI9PT10eXBlb2YgZiYmXCJudW1iZXJcIj09PXR5cGVvZiBoJiZpc05hTihmKSYmaXNOYU4oaCkpKXM9ITAsZD1iLGIubGFzdD1iLmVxP2ZhKGYsbnVsbCk6ZixiLmZuKGYsaD09PXI/ZjpoLG4pLDU+dCYmKEM9NC10LHdbQ118fCh3W0NdPVtdKSx3W0NdLnB1c2goe21zZzpCKGIuZXhwKT9cImZuOiBcIisoYi5leHAubmFtZXx8Yi5leHAudG9TdHJpbmcoKSk6Yi5leHAsbmV3VmFsOmYsb2xkVmFsOmh9KSk7ZWxzZSBpZihiPT09ZCl7cz0hMTticmVhayBhfX1jYXRjaCh5KXtnKHkpfWlmKCEoaz1uLiQkd2F0Y2hlcnNDb3VudCYmbi4kJGNoaWxkSGVhZHx8biE9PXRoaXMmJm4uJCRuZXh0U2libGluZykpZm9yKDtuIT09dGhpcyYmIShrPW4uJCRuZXh0U2libGluZyk7KW49bi4kcGFyZW50fXdoaWxlKG49ayk7aWYoKHN8fHUubGVuZ3RoKSYmIXQtLSl0aHJvdyBwLiQkcGhhc2U9bnVsbCxjKFwiaW5mZGlnXCIsYSx3KTt9d2hpbGUoc3x8dS5sZW5ndGgpO2ZvcihwLiQkcGhhc2U9XG5udWxsO3gubGVuZ3RoOyl0cnl7eC5zaGlmdCgpKCl9Y2F0Y2goeil7Zyh6KX19LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXM9PT1wJiZsLiQkYXBwbGljYXRpb25EZXN0cm95ZWQoKTtzKHRoaXMsLXRoaXMuJCR3YXRjaGVyc0NvdW50KTtmb3IodmFyIGIgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpdCh0aGlzLHRoaXMuJCRsaXN0ZW5lckNvdW50W2JdLGIpO2EmJmEuJCRjaGlsZEhlYWQ9PXRoaXMmJihhLiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZyk7YSYmYS4kJGNoaWxkVGFpbD09dGhpcyYmKGEuJCRjaGlsZFRhaWw9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiQkcHJldlNpYmxpbmcmJih0aGlzLiQkcHJldlNpYmxpbmcuJCRuZXh0U2libGluZz10aGlzLiQkbmV4dFNpYmxpbmcpO3RoaXMuJCRuZXh0U2libGluZyYmXG4odGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiRkZXN0cm95PXRoaXMuJGRpZ2VzdD10aGlzLiRhcHBseT10aGlzLiRldmFsQXN5bmM9dGhpcy4kYXBwbHlBc3luYz12O3RoaXMuJG9uPXRoaXMuJHdhdGNoPXRoaXMuJHdhdGNoR3JvdXA9ZnVuY3Rpb24oKXtyZXR1cm4gdn07dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiRwYXJlbnQ9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9dGhpcy4kcm9vdD10aGlzLiQkd2F0Y2hlcnM9bnVsbH19LCRldmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGgoYSkodGhpcyxiKX0sJGV2YWxBc3luYzpmdW5jdGlvbihhLGIpe3AuJCRwaGFzZXx8dS5sZW5ndGh8fGwuZGVmZXIoZnVuY3Rpb24oKXt1Lmxlbmd0aCYmcC4kZGlnZXN0KCl9KTt1LnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphLGxvY2FsczpifSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXt4LnB1c2goYSl9LFxuJGFwcGx5OmZ1bmN0aW9uKGEpe3RyeXtxKFwiJGFwcGx5XCIpO3RyeXtyZXR1cm4gdGhpcy4kZXZhbChhKX1maW5hbGx5e3AuJCRwaGFzZT1udWxsfX1jYXRjaChiKXtnKGIpfWZpbmFsbHl7dHJ5e3AuJGRpZ2VzdCgpfWNhdGNoKGMpe3Rocm93IGcoYyksYzt9fX0sJGFwcGx5QXN5bmM6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2MuJGV2YWwoYSl9dmFyIGM9dGhpczthJiZNLnB1c2goYik7dygpfSwkb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLiQkbGlzdGVuZXJzW2FdO2N8fCh0aGlzLiQkbGlzdGVuZXJzW2FdPWM9W10pO2MucHVzaChiKTt2YXIgZD10aGlzO2RvIGQuJCRsaXN0ZW5lckNvdW50W2FdfHwoZC4kJGxpc3RlbmVyQ291bnRbYV09MCksZC4kJGxpc3RlbmVyQ291bnRbYV0rKzt3aGlsZShkPWQuJHBhcmVudCk7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmluZGV4T2YoYik7LTEhPT1kJiYoY1tkXT1udWxsLHQoZSwxLGEpKX19LCRlbWl0OmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1bXSxkLGU9dGhpcyxmPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTplLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2Y9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aC5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxrPWNiKFtoXSxhcmd1bWVudHMsMSksbCxtO2Rve2Q9ZS4kJGxpc3RlbmVyc1thXXx8YztoLmN1cnJlbnRTY29wZT1lO2w9MDtmb3IobT1kLmxlbmd0aDtsPG07bCsrKWlmKGRbbF0pdHJ5e2RbbF0uYXBwbHkobnVsbCxrKX1jYXRjaChxKXtnKHEpfWVsc2UgZC5zcGxpY2UobCwxKSxsLS0sbS0tO2lmKGYpcmV0dXJuIGguY3VycmVudFNjb3BlPW51bGwsaDtlPWUuJHBhcmVudH13aGlsZShlKTtoLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBofSwkYnJvYWRjYXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPXRoaXMsZT17bmFtZTphLHRhcmdldFNjb3BlOnRoaXMscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtlLmRlZmF1bHRQcmV2ZW50ZWQ9XG4hMH0sZGVmYXVsdFByZXZlbnRlZDohMX07aWYoIXRoaXMuJCRsaXN0ZW5lckNvdW50W2FdKXJldHVybiBlO2Zvcih2YXIgZj1jYihbZV0sYXJndW1lbnRzLDEpLGgsaztjPWQ7KXtlLmN1cnJlbnRTY29wZT1jO2Q9Yy4kJGxpc3RlbmVyc1thXXx8W107aD0wO2ZvcihrPWQubGVuZ3RoO2g8aztoKyspaWYoZFtoXSl0cnl7ZFtoXS5hcHBseShudWxsLGYpfWNhdGNoKGwpe2cobCl9ZWxzZSBkLnNwbGljZShoLDEpLGgtLSxrLS07aWYoIShkPWMuJCRsaXN0ZW5lckNvdW50W2FdJiZjLiQkY2hpbGRIZWFkfHxjIT09dGhpcyYmYy4kJG5leHRTaWJsaW5nKSlmb3IoO2MhPT10aGlzJiYhKGQ9Yy4kJG5leHRTaWJsaW5nKTspYz1jLiRwYXJlbnR9ZS5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gZX19O3ZhciBwPW5ldyBtLHU9cC4kJGFzeW5jUXVldWU9W10seD1wLiQkcG9zdERpZ2VzdFF1ZXVlPVtdLE09cC4kJGFwcGx5QXN5bmNRdWV1ZT1bXTtyZXR1cm4gcH1dfWZ1bmN0aW9uIGdlKCl7dmFyIGI9XG4vXlxccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sYT0vXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geChiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWQ/YTpiLGY7Zj1BYShjKS5ocmVmO3JldHVyblwiXCI9PT1mfHxmLm1hdGNoKGUpP2M6XCJ1bnNhZmU6XCIrZn19fWZ1bmN0aW9uIFpmKGIpe2lmKFwic2VsZlwiPT09YilyZXR1cm4gYjtpZihIKGIpKXtpZigtMTxiLmluZGV4T2YoXCIqKipcIikpdGhyb3cgQ2EoXCJpd2NhcmRcIixiKTtiPXVkKGIpLnJlcGxhY2UoXCJcXFxcKlxcXFwqXCIsXCIuKlwiKS5yZXBsYWNlKFwiXFxcXCpcIixcIlteOi8uPyY7XSpcIik7cmV0dXJuIG5ldyBSZWdFeHAoXCJeXCIrXG5iK1wiJFwiKX1pZihPYShiKSlyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIitiLnNvdXJjZStcIiRcIik7dGhyb3cgQ2EoXCJpbWF0Y2hlclwiKTt9ZnVuY3Rpb24gdmQoYil7dmFyIGE9W107eChiKSYmbihiLGZ1bmN0aW9uKGIpe2EucHVzaChaZihiKSl9KTtyZXR1cm4gYX1mdW5jdGlvbiBvZigpe3RoaXMuU0NFX0NPTlRFWFRTPW9hO3ZhciBiPVtcInNlbGZcIl0sYT1bXTt0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPXZkKGEpKTtyZXR1cm4gYn07dGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT12ZChiKSk7cmV0dXJuIGF9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEsYil7cmV0dXJuXCJzZWxmXCI9PT1hP2dkKGIpOiEhYS5leGVjKGIuaHJlZil9ZnVuY3Rpb24gZShhKXt2YXIgYj1mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPVxuZnVuY3Rpb24oKXtyZXR1cm4gYX19O2EmJihiLnByb3RvdHlwZT1uZXcgYSk7Yi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpfTtyZXR1cm4gYn12YXIgZj1mdW5jdGlvbihhKXt0aHJvdyBDYShcInVuc2FmZVwiKTt9O2MuaGFzKFwiJHNhbml0aXplXCIpJiYoZj1jLmdldChcIiRzYW5pdGl6ZVwiKSk7dmFyIGc9ZSgpLGg9e307aFtvYS5IVE1MXT1lKGcpO2hbb2EuQ1NTXT1lKGcpO2hbb2EuVVJMXT1lKGcpO2hbb2EuSlNdPWUoZyk7aFtvYS5SRVNPVVJDRV9VUkxdPWUoaFtvYS5VUkxdKTtyZXR1cm57dHJ1c3RBczpmdW5jdGlvbihhLGIpe3ZhciBjPWguaGFzT3duUHJvcGVydHkoYSk/aFthXTpudWxsO2lmKCFjKXRocm93IENhKFwiaWNvbnRleHRcIixhLGIpO2lmKG51bGw9PT1ifHxiPT09XG51fHxcIlwiPT09YilyZXR1cm4gYjtpZihcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgQ2EoXCJpdHlwZVwiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihjLGUpe2lmKG51bGw9PT1lfHxlPT09dXx8XCJcIj09PWUpcmV0dXJuIGU7dmFyIGc9aC5oYXNPd25Qcm9wZXJ0eShjKT9oW2NdOm51bGw7aWYoZyYmZSBpbnN0YW5jZW9mIGcpcmV0dXJuIGUuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtpZihjPT09b2EuUkVTT1VSQ0VfVVJMKXt2YXIgZz1BYShlLnRvU3RyaW5nKCkpLHEscyx0PSExO3E9MDtmb3Iocz1iLmxlbmd0aDtxPHM7cSsrKWlmKGQoYltxXSxnKSl7dD0hMDticmVha31pZih0KWZvcihxPTAscz1hLmxlbmd0aDtxPHM7cSsrKWlmKGQoYVtxXSxnKSl7dD0hMTticmVha31pZih0KXJldHVybiBlO3Rocm93IENhKFwiaW5zZWN1cmxcIixlLnRvU3RyaW5nKCkpO31pZihjPT09b2EuSFRNTClyZXR1cm4gZihlKTt0aHJvdyBDYShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZlxuZz9hLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk6YX19fV19ZnVuY3Rpb24gbmYoKXt2YXIgYj0hMDt0aGlzLmVuYWJsZWQ9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9ISFhKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJHNjZURlbGVnYXRlXCIsZnVuY3Rpb24oYSxjKXtpZihiJiY4PlZhKXRocm93IENhKFwiaWVxdWlya3NcIik7dmFyIGQ9aWEob2EpO2QuaXNFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O2QudHJ1c3RBcz1jLnRydXN0QXM7ZC5nZXRUcnVzdGVkPWMuZ2V0VHJ1c3RlZDtkLnZhbHVlT2Y9Yy52YWx1ZU9mO2J8fChkLnRydXN0QXM9ZC5nZXRUcnVzdGVkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9LGQudmFsdWVPZj1aYSk7ZC5wYXJzZUFzPWZ1bmN0aW9uKGIsYyl7dmFyIGU9YShjKTtyZXR1cm4gZS5saXRlcmFsJiZlLmNvbnN0YW50P2U6YShjLGZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFRydXN0ZWQoYixhKX0pfTt2YXIgZT1kLnBhcnNlQXMsXG5mPWQuZ2V0VHJ1c3RlZCxnPWQudHJ1c3RBcztuKG9hLGZ1bmN0aW9uKGEsYil7dmFyIGM9SShiKTtkW2ZiKFwicGFyc2VfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9O2RbZmIoXCJnZXRfdHJ1c3RlZF9cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGYoYSxiKX07ZFtmYihcInRydXN0X2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZyhhLGIpfX0pO3JldHVybiBkfV19ZnVuY3Rpb24gcGYoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhKXt2YXIgYz17fSxkPVkoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhJKChiLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCkpfHxbXSlbMV0pLGU9L0JveGVlL2kudGVzdCgoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpLGY9YVswXXx8e30sZyxoPS9eKE1venx3ZWJraXR8bXMpKD89W0EtWl0pLyxsPWYuYm9keSYmZi5ib2R5LnN0eWxlLGs9ITEsbT0hMTtpZihsKXtmb3IodmFyIHEgaW4gbClpZihrPVxuaC5leGVjKHEpKXtnPWtbMF07Zz1nLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrZy5zdWJzdHIoMSk7YnJlYWt9Z3x8KGc9XCJXZWJraXRPcGFjaXR5XCJpbiBsJiZcIndlYmtpdFwiKTtrPSEhKFwidHJhbnNpdGlvblwiaW4gbHx8ZytcIlRyYW5zaXRpb25cImluIGwpO209ISEoXCJhbmltYXRpb25cImluIGx8fGcrXCJBbmltYXRpb25cImluIGwpOyFkfHxrJiZtfHwoaz1IKGwud2Via2l0VHJhbnNpdGlvbiksbT1IKGwud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYi5oaXN0b3J5fHwhYi5oaXN0b3J5LnB1c2hTdGF0ZXx8ND5kfHxlKSxoYXNFdmVudDpmdW5jdGlvbihhKXtpZihcImlucHV0XCI9PT1hJiYxMT49VmEpcmV0dXJuITE7aWYoeShjW2FdKSl7dmFyIGI9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2NbYV09XCJvblwiK2EgaW4gYn1yZXR1cm4gY1thXX0sY3NwOkZhKCksdmVuZG9yUHJlZml4OmcsdHJhbnNpdGlvbnM6ayxhbmltYXRpb25zOm0sYW5kcm9pZDpkfX1dfWZ1bmN0aW9uIHJmKCl7dGhpcy4kZ2V0PVxuW1wiJHRlbXBsYXRlQ2FjaGVcIixcIiRodHRwXCIsXCIkcVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoZixnKXtlLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7SChmKSYmYi5nZXQoZil8fChmPWQuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKGYpKTt2YXIgaD1hLmRlZmF1bHRzJiZhLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO0soaCk/aD1oLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9PVpifSk6aD09PVpiJiYoaD1udWxsKTtyZXR1cm4gYS5nZXQoZix7Y2FjaGU6Yix0cmFuc2Zvcm1SZXNwb25zZTpofSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7ZS50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tfSkudGhlbihmdW5jdGlvbihhKXtiLnB1dChmLGEuZGF0YSk7cmV0dXJuIGEuZGF0YX0sZnVuY3Rpb24oYSl7aWYoIWcpdGhyb3cgZWEoXCJ0cGxvYWRcIixmLGEuc3RhdHVzLGEuc3RhdHVzVGV4dCk7cmV0dXJuIGMucmVqZWN0KGEpfSl9ZS50b3RhbFBlbmRpbmdSZXF1ZXN0cz0wO1xucmV0dXJuIGV9XX1mdW5jdGlvbiBzZigpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJGxvY2F0aW9uXCIsZnVuY3Rpb24oYixhLGMpe3JldHVybntmaW5kQmluZGluZ3M6ZnVuY3Rpb24oYSxiLGMpe2E9YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibmctYmluZGluZ1wiKTt2YXIgZz1bXTtuKGEsZnVuY3Rpb24oYSl7dmFyIGQ9YWEuZWxlbWVudChhKS5kYXRhKFwiJGJpbmRpbmdcIik7ZCYmbihkLGZ1bmN0aW9uKGQpe2M/KG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIit1ZChiKStcIihcXFxcc3xcXFxcfHwkKVwiKSkudGVzdChkKSYmZy5wdXNoKGEpOi0xIT1kLmluZGV4T2YoYikmJmcucHVzaChhKX0pfSk7cmV0dXJuIGd9LGZpbmRNb2RlbHM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZz1bXCJuZy1cIixcImRhdGEtbmctXCIsXCJuZ1xcXFw6XCJdLGg9MDtoPGcubGVuZ3RoOysraCl7dmFyIGw9YS5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiK2dbaF0rXCJtb2RlbFwiKyhjP1wiPVwiOlwiKj1cIikrJ1wiJytiKydcIl0nKTtcbmlmKGwubGVuZ3RoKXJldHVybiBsfX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYy51cmwoKX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYSl7YSE9PWMudXJsKCkmJihjLnVybChhKSxiLiRkaWdlc3QoKSl9LHdoZW5TdGFibGU6ZnVuY3Rpb24oYil7YS5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGIpfX19XX1mdW5jdGlvbiB0Zigpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHFcIixcIiQkcVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoZixsLGspe0IoZil8fChrPWwsbD1mLGY9dik7dmFyIG09eGEuY2FsbChhcmd1bWVudHMsMykscT14KGspJiYhayxzPShxP2Q6YykuZGVmZXIoKSx0PXMucHJvbWlzZSxuO249YS5kZWZlcihmdW5jdGlvbigpe3RyeXtzLnJlc29sdmUoZi5hcHBseShudWxsLG0pKX1jYXRjaChhKXtzLnJlamVjdChhKSxlKGEpfWZpbmFsbHl7ZGVsZXRlIGdbdC4kJHRpbWVvdXRJZF19cXx8XG5iLiRhcHBseSgpfSxsKTt0LiQkdGltZW91dElkPW47Z1tuXT1zO3JldHVybiB0fXZhciBnPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkdGltZW91dElkIGluIGc/KGdbYi4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGdbYi4kJHRpbWVvdXRJZF0sYS5kZWZlci5jYW5jZWwoYi4kJHRpbWVvdXRJZCkpOiExfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIEFhKGIpe1ZhJiYoWi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYiksYj1aLmhyZWYpO1ouc2V0QXR0cmlidXRlKFwiaHJlZlwiLGIpO3JldHVybntocmVmOlouaHJlZixwcm90b2NvbDpaLnByb3RvY29sP1oucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpaLmhvc3Qsc2VhcmNoOlouc2VhcmNoP1ouc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpaLmhhc2g/Wi5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOlouaG9zdG5hbWUscG9ydDpaLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1cbloucGF0aG5hbWUuY2hhckF0KDApP1oucGF0aG5hbWU6XCIvXCIrWi5wYXRobmFtZX19ZnVuY3Rpb24gZ2QoYil7Yj1IKGIpP0FhKGIpOmI7cmV0dXJuIGIucHJvdG9jb2w9PT13ZC5wcm90b2NvbCYmYi5ob3N0PT09d2QuaG9zdH1mdW5jdGlvbiB1Zigpe3RoaXMuJGdldD1xYShOKX1mdW5jdGlvbiB4ZChiKXtmdW5jdGlvbiBhKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe3JldHVybiBhfX12YXIgYz1iWzBdfHx7fSxkPXt9LGU9XCJcIjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYixnLGgsbCxrO2I9Yy5jb29raWV8fFwiXCI7aWYoYiE9PWUpZm9yKGU9YixiPWUuc3BsaXQoXCI7IFwiKSxkPXt9LGg9MDtoPGIubGVuZ3RoO2grKylnPWJbaF0sbD1nLmluZGV4T2YoXCI9XCIpLDA8bCYmKGs9YShnLnN1YnN0cmluZygwLGwpKSxkW2tdPT09dSYmKGRba109YShnLnN1YnN0cmluZyhsKzEpKSkpO3JldHVybiBkfX1mdW5jdGlvbiB5Zigpe3RoaXMuJGdldD14ZH1mdW5jdGlvbiBKYyhiKXtmdW5jdGlvbiBhKGMsXG5kKXtpZihEKGMpKXt2YXIgZT17fTtuKGMsZnVuY3Rpb24oYixjKXtlW2NdPWEoYyxiKX0pO3JldHVybiBlfXJldHVybiBiLmZhY3RvcnkoYytcIkZpbHRlclwiLGQpfXRoaXMucmVnaXN0ZXI9YTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmdldChiK1wiRmlsdGVyXCIpfX1dO2EoXCJjdXJyZW5jeVwiLHlkKTthKFwiZGF0ZVwiLHpkKTthKFwiZmlsdGVyXCIsJGYpO2EoXCJqc29uXCIsYWcpO2EoXCJsaW1pdFRvXCIsYmcpO2EoXCJsb3dlcmNhc2VcIixjZyk7YShcIm51bWJlclwiLEFkKTthKFwib3JkZXJCeVwiLEJkKTthKFwidXBwZXJjYXNlXCIsZGcpfWZ1bmN0aW9uICRmKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSxjKXtpZighRGEoYikpe2lmKG51bGw9PWIpcmV0dXJuIGI7dGhyb3cgRyhcImZpbHRlclwiKShcIm5vdGFycmF5XCIsYik7fXZhciBkO3N3aXRjaChnYyhhKSl7Y2FzZSBcImZ1bmN0aW9uXCI6YnJlYWs7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVsbFwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6ZD1cbiEwO2Nhc2UgXCJvYmplY3RcIjphPWVnKGEsYyxkKTticmVhaztkZWZhdWx0OnJldHVybiBifXJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixhKX19ZnVuY3Rpb24gZWcoYixhLGMpe3ZhciBkPUQoYikmJlwiJFwiaW4gYjshMD09PWE/YT1rYTpCKGEpfHwoYT1mdW5jdGlvbihhLGIpe2lmKHkoYSkpcmV0dXJuITE7aWYobnVsbD09PWF8fG51bGw9PT1iKXJldHVybiBhPT09YjtpZihEKGIpfHxEKGEpJiYhcGMoYSkpcmV0dXJuITE7YT1JKFwiXCIrYSk7Yj1JKFwiXCIrYik7cmV0dXJuLTEhPT1hLmluZGV4T2YoYil9KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGQmJiFEKGUpP0xhKGUsYi4kLGEsITEpOkxhKGUsYixhLGMpfX1mdW5jdGlvbiBMYShiLGEsYyxkLGUpe3ZhciBmPWdjKGIpLGc9Z2MoYSk7aWYoXCJzdHJpbmdcIj09PWcmJlwiIVwiPT09YS5jaGFyQXQoMCkpcmV0dXJuIUxhKGIsYS5zdWJzdHJpbmcoMSksYyxkKTtpZihLKGIpKXJldHVybiBiLnNvbWUoZnVuY3Rpb24oYil7cmV0dXJuIExhKGIsXG5hLGMsZCl9KTtzd2l0Y2goZil7Y2FzZSBcIm9iamVjdFwiOnZhciBoO2lmKGQpe2ZvcihoIGluIGIpaWYoXCIkXCIhPT1oLmNoYXJBdCgwKSYmTGEoYltoXSxhLGMsITApKXJldHVybiEwO3JldHVybiBlPyExOkxhKGIsYSxjLCExKX1pZihcIm9iamVjdFwiPT09Zyl7Zm9yKGggaW4gYSlpZihlPWFbaF0sIUIoZSkmJiF5KGUpJiYoZj1cIiRcIj09PWgsIUxhKGY/YjpiW2hdLGUsYyxmLGYpKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gYyhiLGEpO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiExO2RlZmF1bHQ6cmV0dXJuIGMoYixhKX19ZnVuY3Rpb24gZ2MoYil7cmV0dXJuIG51bGw9PT1iP1wibnVsbFwiOnR5cGVvZiBifWZ1bmN0aW9uIHlkKGIpe3ZhciBhPWIuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGIsZCxlKXt5KGQpJiYoZD1hLkNVUlJFTkNZX1NZTSk7eShlKSYmKGU9YS5QQVRURVJOU1sxXS5tYXhGcmFjKTtyZXR1cm4gbnVsbD09Yj9iOkNkKGIsYS5QQVRURVJOU1sxXSxhLkdST1VQX1NFUCxcbmEuREVDSU1BTF9TRVAsZSkucmVwbGFjZSgvXFx1MDBBNC9nLGQpfX1mdW5jdGlvbiBBZChiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBudWxsPT1iP2I6Q2QoYixhLlBBVFRFUk5TWzBdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsZCl9fWZ1bmN0aW9uIENkKGIsYSxjLGQsZSl7aWYoRChiKSlyZXR1cm5cIlwiO3ZhciBmPTA+YjtiPU1hdGguYWJzKGIpO3ZhciBnPUluZmluaXR5PT09YjtpZighZyYmIWlzRmluaXRlKGIpKXJldHVyblwiXCI7dmFyIGg9YitcIlwiLGw9XCJcIixrPSExLG09W107ZyYmKGw9XCJcXHUyMjFlXCIpO2lmKCFnJiYtMSE9PWguaW5kZXhPZihcImVcIikpe3ZhciBxPWgubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTtxJiZcIi1cIj09cVsyXSYmcVszXT5lKzE/Yj0wOihsPWgsaz0hMCl9aWYoZ3x8aykwPGUmJjE+YiYmKGw9Yi50b0ZpeGVkKGUpLGI9cGFyc2VGbG9hdChsKSk7ZWxzZXtnPShoLnNwbGl0KERkKVsxXXx8XCJcIikubGVuZ3RoO1xueShlKSYmKGU9TWF0aC5taW4oTWF0aC5tYXgoYS5taW5GcmFjLGcpLGEubWF4RnJhYykpO2I9KyhNYXRoLnJvdW5kKCsoYi50b1N0cmluZygpK1wiZVwiK2UpKS50b1N0cmluZygpK1wiZVwiKy1lKTt2YXIgZz0oXCJcIitiKS5zcGxpdChEZCksaD1nWzBdLGc9Z1sxXXx8XCJcIixxPTAscz1hLmxnU2l6ZSx0PWEuZ1NpemU7aWYoaC5sZW5ndGg+PXMrdClmb3IocT1oLmxlbmd0aC1zLGs9MDtrPHE7aysrKTA9PT0ocS1rKSV0JiYwIT09ayYmKGwrPWMpLGwrPWguY2hhckF0KGspO2ZvcihrPXE7azxoLmxlbmd0aDtrKyspMD09PShoLmxlbmd0aC1rKSVzJiYwIT09ayYmKGwrPWMpLGwrPWguY2hhckF0KGspO2Zvcig7Zy5sZW5ndGg8ZTspZys9XCIwXCI7ZSYmXCIwXCIhPT1lJiYobCs9ZCtnLnN1YnN0cigwLGUpKX0wPT09YiYmKGY9ITEpO20ucHVzaChmP2EubmVnUHJlOmEucG9zUHJlLGwsZj9hLm5lZ1N1ZjphLnBvc1N1Zik7cmV0dXJuIG0uam9pbihcIlwiKX1mdW5jdGlvbiBHYihiLGEsYyl7dmFyIGQ9XCJcIjtcbjA+YiYmKGQ9XCItXCIsYj0tYik7Zm9yKGI9XCJcIitiO2IubGVuZ3RoPGE7KWI9XCIwXCIrYjtjJiYoYj1iLnN1YnN0cihiLmxlbmd0aC1hKSk7cmV0dXJuIGQrYn1mdW5jdGlvbiAkKGIsYSxjLGQpe2M9Y3x8MDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lW1wiZ2V0XCIrYl0oKTtpZigwPGN8fGU+LWMpZSs9YzswPT09ZSYmLTEyPT1jJiYoZT0xMik7cmV0dXJuIEdiKGUsYSxkKX19ZnVuY3Rpb24gSGIoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1jW1wiZ2V0XCIrYl0oKSxmPXJiKGE/XCJTSE9SVFwiK2I6Yik7cmV0dXJuIGRbZl1bZV19fWZ1bmN0aW9uIEVkKGIpe3ZhciBhPShuZXcgRGF0ZShiLDAsMSkpLmdldERheSgpO3JldHVybiBuZXcgRGF0ZShiLDAsKDQ+PWE/NToxMiktYSl9ZnVuY3Rpb24gRmQoYil7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPUVkKGEuZ2V0RnVsbFllYXIoKSk7YT0rbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSxhLmdldERhdGUoKSsoNC1hLmdldERheSgpKSktXG4rYzthPTErTWF0aC5yb3VuZChhLzYwNDhFNSk7cmV0dXJuIEdiKGEsYil9fWZ1bmN0aW9uIGhjKGIsYSl7cmV0dXJuIDA+PWIuZ2V0RnVsbFllYXIoKT9hLkVSQVNbMF06YS5FUkFTWzFdfWZ1bmN0aW9uIHpkKGIpe2Z1bmN0aW9uIGEoYSl7dmFyIGI7aWYoYj1hLm1hdGNoKGMpKXthPW5ldyBEYXRlKDApO3ZhciBmPTAsZz0wLGg9Yls4XT9hLnNldFVUQ0Z1bGxZZWFyOmEuc2V0RnVsbFllYXIsbD1iWzhdP2Euc2V0VVRDSG91cnM6YS5zZXRIb3VycztiWzldJiYoZj1ZKGJbOV0rYlsxMF0pLGc9WShiWzldK2JbMTFdKSk7aC5jYWxsKGEsWShiWzFdKSxZKGJbMl0pLTEsWShiWzNdKSk7Zj1ZKGJbNF18fDApLWY7Zz1ZKGJbNV18fDApLWc7aD1ZKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7bC5jYWxsKGEsZixnLGgsYil9cmV0dXJuIGF9dmFyIGM9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87XG5yZXR1cm4gZnVuY3Rpb24oYyxlLGYpe3ZhciBnPVwiXCIsaD1bXSxsLGs7ZT1lfHxcIm1lZGl1bURhdGVcIjtlPWIuREFURVRJTUVfRk9STUFUU1tlXXx8ZTtIKGMpJiYoYz1mZy50ZXN0KGMpP1koYyk6YShjKSk7WChjKSYmKGM9bmV3IERhdGUoYykpO2lmKCFjYShjKXx8IWlzRmluaXRlKGMuZ2V0VGltZSgpKSlyZXR1cm4gYztmb3IoO2U7KShrPWdnLmV4ZWMoZSkpPyhoPWNiKGgsaywxKSxlPWgucG9wKCkpOihoLnB1c2goZSksZT1udWxsKTt2YXIgbT1jLmdldFRpbWV6b25lT2Zmc2V0KCk7ZiYmKG09dmMoZixjLmdldFRpbWV6b25lT2Zmc2V0KCkpLGM9T2IoYyxmLCEwKSk7bihoLGZ1bmN0aW9uKGEpe2w9aGdbYV07Zys9bD9sKGMsYi5EQVRFVElNRV9GT1JNQVRTLG0pOmEucmVwbGFjZSgvKF4nfCckKS9nLFwiXCIpLnJlcGxhY2UoLycnL2csXCInXCIpfSk7cmV0dXJuIGd9fWZ1bmN0aW9uIGFnKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSl7eShhKSYmKGE9Mik7cmV0dXJuIGRiKGIsYSl9fWZ1bmN0aW9uIGJnKCl7cmV0dXJuIGZ1bmN0aW9uKGIsXG5hLGMpe2E9SW5maW5pdHk9PT1NYXRoLmFicyhOdW1iZXIoYSkpP051bWJlcihhKTpZKGEpO2lmKGlzTmFOKGEpKXJldHVybiBiO1goYikmJihiPWIudG9TdHJpbmcoKSk7aWYoIUsoYikmJiFIKGIpKXJldHVybiBiO2M9IWN8fGlzTmFOKGMpPzA6WShjKTtjPTA+YyYmYz49LWIubGVuZ3RoP2IubGVuZ3RoK2M6YztyZXR1cm4gMDw9YT9iLnNsaWNlKGMsYythKTowPT09Yz9iLnNsaWNlKGEsYi5sZW5ndGgpOmIuc2xpY2UoTWF0aC5tYXgoMCxjK2EpLGMpfX1mdW5jdGlvbiBCZChiKXtmdW5jdGlvbiBhKGEsYyl7Yz1jPy0xOjE7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3ZhciBkPTEsaD1aYTtpZihCKGEpKWg9YTtlbHNlIGlmKEgoYSkpe2lmKFwiK1wiPT1hLmNoYXJBdCgwKXx8XCItXCI9PWEuY2hhckF0KDApKWQ9XCItXCI9PWEuY2hhckF0KDApPy0xOjEsYT1hLnN1YnN0cmluZygxKTtpZihcIlwiIT09YSYmKGg9YihhKSxoLmNvbnN0YW50KSl2YXIgbD1oKCksaD1mdW5jdGlvbihhKXtyZXR1cm4gYVtsXX19cmV0dXJue2dldDpoLFxuZGVzY2VuZGluZzpkKmN9fSl9ZnVuY3Rpb24gYyhhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJudW1iZXJcIjpjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJzdHJpbmdcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX1yZXR1cm4gZnVuY3Rpb24oYixlLGYpe2lmKCFEYShiKSlyZXR1cm4gYjtLKGUpfHwoZT1bZV0pOzA9PT1lLmxlbmd0aCYmKGU9W1wiK1wiXSk7dmFyIGc9YShlLGYpO2cucHVzaCh7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319LGRlc2NlbmRpbmc6Zj8tMToxfSk7Yj1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYixmdW5jdGlvbihhLGIpe3JldHVybnt2YWx1ZTphLHByZWRpY2F0ZVZhbHVlczpnLm1hcChmdW5jdGlvbihkKXt2YXIgZT1kLmdldChhKTtkPXR5cGVvZiBlO2lmKG51bGw9PT1lKWQ9XCJzdHJpbmdcIixlPVwibnVsbFwiO2Vsc2UgaWYoXCJzdHJpbmdcIj09PWQpZT1lLnRvTG93ZXJDYXNlKCk7ZWxzZSBpZihcIm9iamVjdFwiPT09ZClhOntpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgZS52YWx1ZU9mJiZcbihlPWUudmFsdWVPZigpLGMoZSkpKWJyZWFrIGE7aWYocGMoZSkmJihlPWUudG9TdHJpbmcoKSxjKGUpKSlicmVhayBhO2U9Yn1yZXR1cm57dmFsdWU6ZSx0eXBlOmR9fSl9fSk7Yi5zb3J0KGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD0wLGU9Zy5sZW5ndGg7ZDxlOysrZCl7dmFyIGM9YS5wcmVkaWNhdGVWYWx1ZXNbZF0sZj1iLnByZWRpY2F0ZVZhbHVlc1tkXSx0PTA7Yy50eXBlPT09Zi50eXBlP2MudmFsdWUhPT1mLnZhbHVlJiYodD1jLnZhbHVlPGYudmFsdWU/LTE6MSk6dD1jLnR5cGU8Zi50eXBlPy0xOjE7aWYoYz10KmdbZF0uZGVzY2VuZGluZylicmVha31yZXR1cm4gY30pO3JldHVybiBiPWIubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfSl9fWZ1bmN0aW9uIE1hKGIpe0IoYikmJihiPXtsaW5rOmJ9KTtiLnJlc3RyaWN0PWIucmVzdHJpY3R8fFwiQUNcIjtyZXR1cm4gcWEoYil9ZnVuY3Rpb24gR2QoYixhLGMsZCxlKXt2YXIgZj10aGlzLGc9W10saD1mLiQkcGFyZW50Rm9ybT1cbmIucGFyZW50KCkuY29udHJvbGxlcihcImZvcm1cIil8fEliO2YuJGVycm9yPXt9O2YuJCRzdWNjZXNzPXt9O2YuJHBlbmRpbmc9dTtmLiRuYW1lPWUoYS5uYW1lfHxhLm5nRm9ybXx8XCJcIikoYyk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kdmFsaWQ9ITA7Zi4kaW52YWxpZD0hMTtmLiRzdWJtaXR0ZWQ9ITE7aC4kYWRkQ29udHJvbChmKTtmLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe24oZyxmdW5jdGlvbihhKXthLiRyb2xsYmFja1ZpZXdWYWx1ZSgpfSl9O2YuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe24oZyxmdW5jdGlvbihhKXthLiRjb21taXRWaWV3VmFsdWUoKX0pfTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe1RhKGEuJG5hbWUsXCJpbnB1dFwiKTtnLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSl9O2YuJCRyZW5hbWVDb250cm9sPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS4kbmFtZTtmW2NdPT09YSYmZGVsZXRlIGZbY107ZltiXT1hO2EuJG5hbWU9XG5ifTtmLiRyZW1vdmVDb250cm9sPWZ1bmN0aW9uKGEpe2EuJG5hbWUmJmZbYS4kbmFtZV09PT1hJiZkZWxldGUgZlthLiRuYW1lXTtuKGYuJHBlbmRpbmcsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtuKGYuJGVycm9yLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxudWxsLGEpfSk7bihmLiQkc3VjY2VzcyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO2JiKGcsYSl9O0hkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6YixzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWFbYl07ZD8tMT09PWQuaW5kZXhPZihjKSYmZC5wdXNoKGMpOmFbYl09W2NdfSx1bnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YVtiXTtkJiYoYmIoZCxjKSwwPT09ZC5sZW5ndGgmJmRlbGV0ZSBhW2JdKX0scGFyZW50Rm9ybTpoLCRhbmltYXRlOmR9KTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYixYYSk7ZC5hZGRDbGFzcyhiLEpiKTtcbmYuJGRpcnR5PSEwO2YuJHByaXN0aW5lPSExO2guJHNldERpcnR5KCl9O2YuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7ZC5zZXRDbGFzcyhiLFhhLEpiK1wiIG5nLXN1Ym1pdHRlZFwiKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiRzdWJtaXR0ZWQ9ITE7bihnLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX07Zi4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7bihnLGZ1bmN0aW9uKGEpe2EuJHNldFVudG91Y2hlZCgpfSl9O2YuJHNldFN1Ym1pdHRlZD1mdW5jdGlvbigpe2QuYWRkQ2xhc3MoYixcIm5nLXN1Ym1pdHRlZFwiKTtmLiRzdWJtaXR0ZWQ9ITA7aC4kc2V0U3VibWl0dGVkKCl9fWZ1bmN0aW9uIGljKGIpe2IuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYi4kaXNFbXB0eShhKT9hOmEudG9TdHJpbmcoKX0pfWZ1bmN0aW9uIGliKGIsYSxjLGQsZSxmKXt2YXIgZz1JKGFbMF0udHlwZSk7aWYoIWUuYW5kcm9pZCl7dmFyIGg9ITE7YS5vbihcImNvbXBvc2l0aW9uc3RhcnRcIixcbmZ1bmN0aW9uKGEpe2g9ITB9KTthLm9uKFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe2g9ITE7bCgpfSl9dmFyIGw9ZnVuY3Rpb24oYil7ayYmKGYuZGVmZXIuY2FuY2VsKGspLGs9bnVsbCk7aWYoIWgpe3ZhciBlPWEudmFsKCk7Yj1iJiZiLnR5cGU7XCJwYXNzd29yZFwiPT09Z3x8Yy5uZ1RyaW0mJlwiZmFsc2VcIj09PWMubmdUcmltfHwoZT1UKGUpKTsoZC4kdmlld1ZhbHVlIT09ZXx8XCJcIj09PWUmJmQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSYmZC4kc2V0Vmlld1ZhbHVlKGUsYil9fTtpZihlLmhhc0V2ZW50KFwiaW5wdXRcIikpYS5vbihcImlucHV0XCIsbCk7ZWxzZXt2YXIgayxtPWZ1bmN0aW9uKGEsYixjKXtrfHwoaz1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2ImJmIudmFsdWU9PT1jfHxsKGEpfSkpfTthLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZTs5MT09PWJ8fDE1PGImJjE5PmJ8fDM3PD1iJiY0MD49Ynx8bShhLHRoaXMsdGhpcy52YWx1ZSl9KTtpZihlLmhhc0V2ZW50KFwicGFzdGVcIikpYS5vbihcInBhc3RlIGN1dFwiLFxubSl9YS5vbihcImNoYW5nZVwiLGwpO2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBiPWQuJGlzRW1wdHkoZC4kdmlld1ZhbHVlKT9cIlwiOmQuJHZpZXdWYWx1ZTthLnZhbCgpIT09YiYmYS52YWwoYil9fWZ1bmN0aW9uIEtiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGUsZjtpZihjYShjKSlyZXR1cm4gYztpZihIKGMpKXsnXCInPT1jLmNoYXJBdCgwKSYmJ1wiJz09Yy5jaGFyQXQoYy5sZW5ndGgtMSkmJihjPWMuc3Vic3RyaW5nKDEsYy5sZW5ndGgtMSkpO2lmKGlnLnRlc3QoYykpcmV0dXJuIG5ldyBEYXRlKGMpO2IubGFzdEluZGV4PTA7aWYoZT1iLmV4ZWMoYykpcmV0dXJuIGUuc2hpZnQoKSxmPWQ/e3l5eXk6ZC5nZXRGdWxsWWVhcigpLE1NOmQuZ2V0TW9udGgoKSsxLGRkOmQuZ2V0RGF0ZSgpLEhIOmQuZ2V0SG91cnMoKSxtbTpkLmdldE1pbnV0ZXMoKSxzczpkLmdldFNlY29uZHMoKSxzc3M6ZC5nZXRNaWxsaXNlY29uZHMoKS8xRTN9Ont5eXl5OjE5NzAsTU06MSxkZDoxLEhIOjAsXG5tbTowLHNzOjAsc3NzOjB9LG4oZSxmdW5jdGlvbihiLGMpe2M8YS5sZW5ndGgmJihmW2FbY11dPStiKX0pLG5ldyBEYXRlKGYueXl5eSxmLk1NLTEsZi5kZCxmLkhILGYubW0sZi5zc3x8MCwxRTMqZi5zc3N8fDApfXJldHVybiBOYU59fWZ1bmN0aW9uIGpiKGIsYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoLGwsayxtKXtmdW5jdGlvbiBxKGEpe3JldHVybiBhJiYhKGEuZ2V0VGltZSYmYS5nZXRUaW1lKCkhPT1hLmdldFRpbWUoKSl9ZnVuY3Rpb24gcyhhKXtyZXR1cm4geChhKT9jYShhKT9hOmMoYSk6dX1JZChlLGYsZyxoKTtpYihlLGYsZyxoLGwsayk7dmFyIHQ9aCYmaC4kb3B0aW9ucyYmaC4kb3B0aW9ucy50aW1lem9uZSxuO2guJCRwYXJzZXJOYW1lPWI7aC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBoLiRpc0VtcHR5KGIpP251bGw6YS50ZXN0KGIpPyhiPWMoYixuKSx0JiYoYj1PYihiLHQpKSxiKTp1fSk7aC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKGEmJlxuIWNhKGEpKXRocm93IGtiKFwiZGF0ZWZtdFwiLGEpO2lmKHEoYSkpcmV0dXJuKG49YSkmJnQmJihuPU9iKG4sdCwhMCkpLG0oXCJkYXRlXCIpKGEsZCx0KTtuPW51bGw7cmV0dXJuXCJcIn0pO2lmKHgoZy5taW4pfHxnLm5nTWluKXt2YXIgcjtoLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4hcShhKXx8eShyKXx8YyhhKT49cn07Zy4kb2JzZXJ2ZShcIm1pblwiLGZ1bmN0aW9uKGEpe3I9cyhhKTtoLiR2YWxpZGF0ZSgpfSl9aWYoeChnLm1heCl8fGcubmdNYXgpe3ZhciB3O2guJHZhbGlkYXRvcnMubWF4PWZ1bmN0aW9uKGEpe3JldHVybiFxKGEpfHx5KHcpfHxjKGEpPD13fTtnLiRvYnNlcnZlKFwibWF4XCIsZnVuY3Rpb24oYSl7dz1zKGEpO2guJHZhbGlkYXRlKCl9KX19fWZ1bmN0aW9uIElkKGIsYSxjLGQpeyhkLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz1EKGFbMF0udmFsaWRpdHkpKSYmZC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGIpe3ZhciBjPWEucHJvcChcInZhbGlkaXR5XCIpfHx7fTtcbnJldHVybiBjLmJhZElucHV0JiYhYy50eXBlTWlzbWF0Y2g/dTpifSl9ZnVuY3Rpb24gSmQoYixhLGMsZCxlKXtpZih4KGQpKXtiPWIoZCk7aWYoIWIuY29uc3RhbnQpdGhyb3cga2IoXCJjb25zdGV4cHJcIixjLGQpO3JldHVybiBiKGEpfXJldHVybiBlfWZ1bmN0aW9uIGpjKGIsYSl7Yj1cIm5nQ2xhc3NcIitiO3JldHVybltcIiRhbmltYXRlXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVtdLGQ9MDthOmZvcig7ZDxhLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1hW2RdLG09MDttPGIubGVuZ3RoO20rKylpZihlPT1iW21dKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7dmFyIGI9W107cmV0dXJuIEsoYSk/KG4oYSxmdW5jdGlvbihhKXtiPWIuY29uY2F0KGUoYSkpfSksYik6SChhKT9hLnNwbGl0KFwiIFwiKTpEKGEpPyhuKGEsZnVuY3Rpb24oYSxjKXthJiYoYj1iLmNvbmNhdChjLnNwbGl0KFwiIFwiKSkpfSksYik6YX1yZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLFxubGluazpmdW5jdGlvbihmLGcsaCl7ZnVuY3Rpb24gbChhLGIpe3ZhciBjPWcuZGF0YShcIiRjbGFzc0NvdW50c1wiKXx8Z2EoKSxkPVtdO24oYSxmdW5jdGlvbihhKXtpZigwPGJ8fGNbYV0pY1thXT0oY1thXXx8MCkrYixjW2FdPT09KygwPGIpJiZkLnB1c2goYSl9KTtnLmRhdGEoXCIkY2xhc3NDb3VudHNcIixjKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBrKGIpe2lmKCEwPT09YXx8Zi4kaW5kZXglMj09PWEpe3ZhciBrPWUoYnx8W10pO2lmKCFtKXt2YXIgbj1sKGssMSk7aC4kYWRkQ2xhc3Mobil9ZWxzZSBpZigha2EoYixtKSl7dmFyIHI9ZShtKSxuPWQoayxyKSxrPWQocixrKSxuPWwobiwxKSxrPWwoaywtMSk7biYmbi5sZW5ndGgmJmMuYWRkQ2xhc3MoZyxuKTtrJiZrLmxlbmd0aCYmYy5yZW1vdmVDbGFzcyhnLGspfX1tPWlhKGIpfXZhciBtO2YuJHdhdGNoKGhbYl0saywhMCk7aC4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYSl7ayhmLiRldmFsKGhbYl0pKX0pO1wibmdDbGFzc1wiIT09XG5iJiZmLiR3YXRjaChcIiRpbmRleFwiLGZ1bmN0aW9uKGMsZCl7dmFyIGc9YyYxO2lmKGchPT0oZCYxKSl7dmFyIGs9ZShmLiRldmFsKGhbYl0pKTtnPT09YT8oZz1sKGssMSksaC4kYWRkQ2xhc3MoZykpOihnPWwoaywtMSksaC4kcmVtb3ZlQ2xhc3MoZykpfX0pfX19XX1mdW5jdGlvbiBIZChiKXtmdW5jdGlvbiBhKGEsYil7YiYmIWZbYV0/KGsuYWRkQ2xhc3MoZSxhKSxmW2FdPSEwKTohYiYmZlthXSYmKGsucmVtb3ZlQ2xhc3MoZSxhKSxmW2FdPSExKX1mdW5jdGlvbiBjKGIsYyl7Yj1iP1wiLVwiK3pjKGIsXCItXCIpOlwiXCI7YShsYitiLCEwPT09Yyk7YShLZCtiLCExPT09Yyl9dmFyIGQ9Yi5jdHJsLGU9Yi4kZWxlbWVudCxmPXt9LGc9Yi5zZXQsaD1iLnVuc2V0LGw9Yi5wYXJlbnRGb3JtLGs9Yi4kYW5pbWF0ZTtmW0tkXT0hKGZbbGJdPWUuaGFzQ2xhc3MobGIpKTtkLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihiLGUsZil7ZT09PXU/KGQuJHBlbmRpbmd8fChkLiRwZW5kaW5nPXt9KSxnKGQuJHBlbmRpbmcsXG5iLGYpKTooZC4kcGVuZGluZyYmaChkLiRwZW5kaW5nLGIsZiksTGQoZC4kcGVuZGluZykmJihkLiRwZW5kaW5nPXUpKTthYihlKT9lPyhoKGQuJGVycm9yLGIsZiksZyhkLiQkc3VjY2VzcyxiLGYpKTooZyhkLiRlcnJvcixiLGYpLGgoZC4kJHN1Y2Nlc3MsYixmKSk6KGgoZC4kZXJyb3IsYixmKSxoKGQuJCRzdWNjZXNzLGIsZikpO2QuJHBlbmRpbmc/KGEoTWQsITApLGQuJHZhbGlkPWQuJGludmFsaWQ9dSxjKFwiXCIsbnVsbCkpOihhKE1kLCExKSxkLiR2YWxpZD1MZChkLiRlcnJvciksZC4kaW52YWxpZD0hZC4kdmFsaWQsYyhcIlwiLGQuJHZhbGlkKSk7ZT1kLiRwZW5kaW5nJiZkLiRwZW5kaW5nW2JdP3U6ZC4kZXJyb3JbYl0/ITE6ZC4kJHN1Y2Nlc3NbYl0/ITA6bnVsbDtjKGIsZSk7bC4kc2V0VmFsaWRpdHkoYixlLGQpfX1mdW5jdGlvbiBMZChiKXtpZihiKWZvcih2YXIgYSBpbiBiKWlmKGIuaGFzT3duUHJvcGVydHkoYSkpcmV0dXJuITE7cmV0dXJuITB9dmFyIGpnPS9eXFwvKC4rKVxcLyhbYS16XSopJC8sXG5JPWZ1bmN0aW9uKGIpe3JldHVybiBIKGIpP2IudG9Mb3dlckNhc2UoKTpifSxOYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHJiPWZ1bmN0aW9uKGIpe3JldHVybiBIKGIpP2IudG9VcHBlckNhc2UoKTpifSxWYSx6LGxhLHhhPVtdLnNsaWNlLE1mPVtdLnNwbGljZSxrZz1bXS5wdXNoLHNhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcscWM9T2JqZWN0LmdldFByb3RvdHlwZU9mLEVhPUcoXCJuZ1wiKSxhYT1OLmFuZ3VsYXJ8fChOLmFuZ3VsYXI9e30pLFJiLG1iPTA7VmE9Vy5kb2N1bWVudE1vZGU7di4kaW5qZWN0PVtdO1phLiRpbmplY3Q9W107dmFyIEs9QXJyYXkuaXNBcnJheSxzYz0vXlxcW29iamVjdCAoVWludDgoQ2xhbXBlZCk/KXwoVWludDE2KXwoVWludDMyKXwoSW50OCl8KEludDE2KXwoSW50MzIpfChGbG9hdCgzMil8KDY0KSlBcnJheVxcXSQvLFQ9ZnVuY3Rpb24oYil7cmV0dXJuIEgoYik/Yi50cmltKCk6Yn0sdWQ9ZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZSgvKFstKClcXFtcXF17fSs/Ki4kXFxefCw6IzwhXFxcXF0pL2csXG5cIlxcXFwkMVwiKS5yZXBsYWNlKC9cXHgwOC9nLFwiXFxcXHgwOFwiKX0sRmE9ZnVuY3Rpb24oKXtpZigheChGYS5ydWxlcykpe3ZhciBiPVcucXVlcnlTZWxlY3RvcihcIltuZy1jc3BdXCIpfHxXLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpO2lmKGIpe3ZhciBhPWIuZ2V0QXR0cmlidXRlKFwibmctY3NwXCIpfHxiLmdldEF0dHJpYnV0ZShcImRhdGEtbmctY3NwXCIpO0ZhLnJ1bGVzPXtub1Vuc2FmZUV2YWw6IWF8fC0xIT09YS5pbmRleE9mKFwibm8tdW5zYWZlLWV2YWxcIiksbm9JbmxpbmVTdHlsZTohYXx8LTEhPT1hLmluZGV4T2YoXCJuby1pbmxpbmUtc3R5bGVcIil9fWVsc2V7Yj1GYTt0cnl7bmV3IEZ1bmN0aW9uKFwiXCIpLGE9ITF9Y2F0Y2goYyl7YT0hMH1iLnJ1bGVzPXtub1Vuc2FmZUV2YWw6YSxub0lubGluZVN0eWxlOiExfX19cmV0dXJuIEZhLnJ1bGVzfSxvYj1mdW5jdGlvbigpe2lmKHgob2IubmFtZV8pKXJldHVybiBvYi5uYW1lXzt2YXIgYixhLGM9UWEubGVuZ3RoLGQsZTtmb3IoYT0wO2E8XG5jOysrYSlpZihkPVFhW2FdLGI9Vy5xdWVyeVNlbGVjdG9yKFwiW1wiK2QucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpK1wianFdXCIpKXtlPWIuZ2V0QXR0cmlidXRlKGQrXCJqcVwiKTticmVha31yZXR1cm4gb2IubmFtZV89ZX0sUWE9W1wibmctXCIsXCJkYXRhLW5nLVwiLFwibmc6XCIsXCJ4LW5nLVwiXSxiZT0vW0EtWl0vZyxBYz0hMSxRYixwYT0xLFBhPTMsZmU9e2Z1bGw6XCIxLjQuNVwiLG1ham9yOjEsbWlub3I6NCxkb3Q6NSxjb2RlTmFtZTpcInBlcm1hbmVudC1pbnRlcm5zaGlwXCJ9O1IuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIGdiPVIuY2FjaGU9e30sRWY9MTtSLl9kYXRhPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNhY2hlW2JbdGhpcy5leHBhbmRvXV18fHt9fTt2YXIgemY9LyhbXFw6XFwtXFxfXSsoLikpL2csQWY9L15tb3ooW0EtWl0pLyxsZz17bW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIsbW91c2VlbnRlcjpcIm1vdXNlb3ZlclwifSxUYj1HKFwianFMaXRlXCIpLERmPS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxTYj0vPHwmIz9cXHcrOy8sXG5CZj0vPChbXFx3Ol0rKS8sQ2Y9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLG5hPXtvcHRpb246WzEsJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07bmEub3B0Z3JvdXA9bmEub3B0aW9uO25hLnRib2R5PW5hLnRmb290PW5hLmNvbGdyb3VwPW5hLmNhcHRpb249bmEudGhlYWQ7bmEudGg9bmEudGQ7dmFyIFJhPVIucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKCl7Y3x8KGM9ITAsYigpKX12YXIgYz1cbiExO1wiY29tcGxldGVcIj09PVcucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KGEpOih0aGlzLm9uKFwiRE9NQ29udGVudExvYWRlZFwiLGEpLFIoTikub24oXCJsb2FkXCIsYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBiPVtdO24odGhpcyxmdW5jdGlvbihhKXtiLnB1c2goXCJcIithKX0pO3JldHVyblwiW1wiK2Iuam9pbihcIiwgXCIpK1wiXVwifSxlcTpmdW5jdGlvbihiKXtyZXR1cm4gMDw9Yj96KHRoaXNbYl0pOnoodGhpc1t0aGlzLmxlbmd0aCtiXSl9LGxlbmd0aDowLHB1c2g6a2csc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2V9LEFiPXt9O24oXCJtdWx0aXBsZSBzZWxlY3RlZCBjaGVja2VkIGRpc2FibGVkIHJlYWRPbmx5IHJlcXVpcmVkIG9wZW5cIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYil7QWJbSShiKV09Yn0pO3ZhciBSYz17fTtuKFwiaW5wdXQgc2VsZWN0IG9wdGlvbiB0ZXh0YXJlYSBidXR0b24gZm9ybSBkZXRhaWxzXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe1JjW2JdPSEwfSk7dmFyIFNjPVxue25nTWlubGVuZ3RoOlwibWlubGVuZ3RoXCIsbmdNYXhsZW5ndGg6XCJtYXhsZW5ndGhcIixuZ01pbjpcIm1pblwiLG5nTWF4OlwibWF4XCIsbmdQYXR0ZXJuOlwicGF0dGVyblwifTtuKHtkYXRhOlZiLHJlbW92ZURhdGE6dWIsaGFzRGF0YTpmdW5jdGlvbihiKXtmb3IodmFyIGEgaW4gZ2JbYi5uZzMzOV0pcmV0dXJuITA7cmV0dXJuITF9fSxmdW5jdGlvbihiLGEpe1JbYV09Yn0pO24oe2RhdGE6VmIsaW5oZXJpdGVkRGF0YTp6YixzY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gei5kYXRhKGIsXCIkc2NvcGVcIil8fHpiKGIucGFyZW50Tm9kZXx8YixbXCIkaXNvbGF0ZVNjb3BlXCIsXCIkc2NvcGVcIl0pfSxpc29sYXRlU2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIHouZGF0YShiLFwiJGlzb2xhdGVTY29wZVwiKXx8ei5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiKX0sY29udHJvbGxlcjpPYyxpbmplY3RvcjpmdW5jdGlvbihiKXtyZXR1cm4gemIoYixcIiRpbmplY3RvclwiKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihiLFxuYSl7Yi5yZW1vdmVBdHRyaWJ1dGUoYSl9LGhhc0NsYXNzOndiLGNzczpmdW5jdGlvbihiLGEsYyl7YT1mYihhKTtpZih4KGMpKWIuc3R5bGVbYV09YztlbHNlIHJldHVybiBiLnN0eWxlW2FdfSxhdHRyOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD1iLm5vZGVUeXBlO2lmKGQhPT1QYSYmMiE9PWQmJjghPT1kKWlmKGQ9SShhKSxBYltkXSlpZih4KGMpKWM/KGJbYV09ITAsYi5zZXRBdHRyaWJ1dGUoYSxkKSk6KGJbYV09ITEsYi5yZW1vdmVBdHRyaWJ1dGUoZCkpO2Vsc2UgcmV0dXJuIGJbYV18fChiLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfHx2KS5zcGVjaWZpZWQ/ZDp1O2Vsc2UgaWYoeChjKSliLnNldEF0dHJpYnV0ZShhLGMpO2Vsc2UgaWYoYi5nZXRBdHRyaWJ1dGUpcmV0dXJuIGI9Yi5nZXRBdHRyaWJ1dGUoYSwyKSxudWxsPT09Yj91OmJ9LHByb3A6ZnVuY3Rpb24oYixhLGMpe2lmKHgoYykpYlthXT1jO2Vsc2UgcmV0dXJuIGJbYV19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsXG5iKXtpZih5KGIpKXt2YXIgZD1hLm5vZGVUeXBlO3JldHVybiBkPT09cGF8fGQ9PT1QYT9hLnRleHRDb250ZW50OlwiXCJ9YS50ZXh0Q29udGVudD1ifWIuJGR2PVwiXCI7cmV0dXJuIGJ9KCksdmFsOmZ1bmN0aW9uKGIsYSl7aWYoeShhKSl7aWYoYi5tdWx0aXBsZSYmXCJzZWxlY3RcIj09PXRhKGIpKXt2YXIgYz1bXTtuKGIub3B0aW9ucyxmdW5jdGlvbihhKXthLnNlbGVjdGVkJiZjLnB1c2goYS52YWx1ZXx8YS50ZXh0KX0pO3JldHVybiAwPT09Yy5sZW5ndGg/bnVsbDpjfXJldHVybiBiLnZhbHVlfWIudmFsdWU9YX0saHRtbDpmdW5jdGlvbihiLGEpe2lmKHkoYSkpcmV0dXJuIGIuaW5uZXJIVE1MO3RiKGIsITApO2IuaW5uZXJIVE1MPWF9LGVtcHR5OlBjfSxmdW5jdGlvbihiLGEpe1IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEsZCl7dmFyIGUsZixnPXRoaXMubGVuZ3RoO2lmKGIhPT1QYyYmKDI9PWIubGVuZ3RoJiZiIT09d2ImJmIhPT1PYz9hOmQpPT09dSl7aWYoRChhKSl7Zm9yKGU9MDtlPFxuZztlKyspaWYoYj09PVZiKWIodGhpc1tlXSxhKTtlbHNlIGZvcihmIGluIGEpYih0aGlzW2VdLGYsYVtmXSk7cmV0dXJuIHRoaXN9ZT1iLiRkdjtnPWU9PT11P01hdGgubWluKGcsMSk6Zztmb3IoZj0wO2Y8ZztmKyspe3ZhciBoPWIodGhpc1tmXSxhLGQpO2U9ZT9lK2g6aH1yZXR1cm4gZX1mb3IoZT0wO2U8ZztlKyspYih0aGlzW2VdLGEsZCk7cmV0dXJuIHRoaXN9fSk7bih7cmVtb3ZlRGF0YTp1YixvbjpmdW5jdGlvbiBhKGMsZCxlLGYpe2lmKHgoZikpdGhyb3cgVGIoXCJvbmFyZ3NcIik7aWYoS2MoYykpe3ZhciBnPXZiKGMsITApO2Y9Zy5ldmVudHM7dmFyIGg9Zy5oYW5kbGU7aHx8KGg9Zy5oYW5kbGU9SGYoYyxmKSk7Zm9yKHZhciBnPTA8PWQuaW5kZXhPZihcIiBcIik/ZC5zcGxpdChcIiBcIik6W2RdLGw9Zy5sZW5ndGg7bC0tOyl7ZD1nW2xdO3ZhciBrPWZbZF07a3x8KGZbZF09W10sXCJtb3VzZWVudGVyXCI9PT1kfHxcIm1vdXNlbGVhdmVcIj09PWQ/YShjLGxnW2RdLGZ1bmN0aW9uKGEpe3ZhciBjPVxuYS5yZWxhdGVkVGFyZ2V0O2MmJihjPT09dGhpc3x8dGhpcy5jb250YWlucyhjKSl8fGgoYSxkKX0pOlwiJGRlc3Ryb3lcIiE9PWQmJmMuYWRkRXZlbnRMaXN0ZW5lcihkLGgsITEpLGs9ZltkXSk7ay5wdXNoKGUpfX19LG9mZjpOYyxvbmU6ZnVuY3Rpb24oYSxjLGQpe2E9eihhKTthLm9uKGMsZnVuY3Rpb24gZigpe2Eub2ZmKGMsZCk7YS5vZmYoYyxmKX0pO2Eub24oYyxkKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSxjKXt2YXIgZCxlPWEucGFyZW50Tm9kZTt0YihhKTtuKG5ldyBSKGMpLGZ1bmN0aW9uKGMpe2Q/ZS5pbnNlcnRCZWZvcmUoYyxkLm5leHRTaWJsaW5nKTplLnJlcGxhY2VDaGlsZChjLGEpO2Q9Y30pfSxjaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYz1bXTtuKGEuY2hpbGROb2RlcyxmdW5jdGlvbihhKXthLm5vZGVUeXBlPT09cGEmJmMucHVzaChhKX0pO3JldHVybiBjfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8XG5bXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5ub2RlVHlwZTtpZihkPT09cGF8fDExPT09ZCl7Yz1uZXcgUihjKTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspYS5hcHBlbmRDaGlsZChjW2RdKX19LHByZXBlbmQ6ZnVuY3Rpb24oYSxjKXtpZihhLm5vZGVUeXBlPT09cGEpe3ZhciBkPWEuZmlyc3RDaGlsZDtuKG5ldyBSKGMpLGZ1bmN0aW9uKGMpe2EuaW5zZXJ0QmVmb3JlKGMsZCl9KX19LHdyYXA6ZnVuY3Rpb24oYSxjKXtjPXooYykuZXEoMCkuY2xvbmUoKVswXTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZXBsYWNlQ2hpbGQoYyxhKTtjLmFwcGVuZENoaWxkKGEpfSxyZW1vdmU6V2IsZGV0YWNoOmZ1bmN0aW9uKGEpe1diKGEsITApfSxhZnRlcjpmdW5jdGlvbihhLGMpe3ZhciBkPWEsZT1hLnBhcmVudE5vZGU7Yz1uZXcgUihjKTtmb3IodmFyIGY9MCxnPWMubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWNbZl07ZS5pbnNlcnRCZWZvcmUoaCxkLm5leHRTaWJsaW5nKTtcbmQ9aH19LGFkZENsYXNzOnliLHJlbW92ZUNsYXNzOnhiLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtjJiZuKGMuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGMpe3ZhciBmPWQ7eShmKSYmKGY9IXdiKGEsYykpOyhmP3liOnhiKShhLGMpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5leHRFbGVtZW50U2libGluZ30sZmluZDpmdW5jdGlvbihhLGMpe3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYyk6W119LGNsb25lOlViLHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxmLGc9Yy50eXBlfHxjLGg9dmIoYSk7aWYoaD0oaD1oJiZoLmV2ZW50cykmJmhbZ10pZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGlzRGVmYXVsdFByZXZlbnRlZDpmdW5jdGlvbigpe3JldHVybiEwPT09XG50aGlzLmRlZmF1bHRQcmV2ZW50ZWR9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwfSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9LHN0b3BQcm9wYWdhdGlvbjp2LHR5cGU6Zyx0YXJnZXQ6YX0sYy50eXBlJiYoZT1RKGUsYykpLGM9aWEoaCksZj1kP1tlXS5jb25jYXQoZCk6W2VdLG4oYyxmdW5jdGlvbihjKXtlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGMuYXBwbHkoYSxmKX0pfX0sZnVuY3Rpb24oYSxjKXtSLnByb3RvdHlwZVtjXT1mdW5jdGlvbihjLGUsZil7Zm9yKHZhciBnLGg9MCxsPXRoaXMubGVuZ3RoO2g8bDtoKyspeShnKT8oZz1hKHRoaXNbaF0sYyxlLGYpLHgoZykmJihnPXooZykpKTpNYyhnLGEodGhpc1toXSxjLGUsZikpO3JldHVybiB4KGcpP2c6dGhpc307Ui5wcm90b3R5cGUuYmluZD1cblIucHJvdG90eXBlLm9uO1IucHJvdG90eXBlLnVuYmluZD1SLnByb3RvdHlwZS5vZmZ9KTtVYS5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGMpe3RoaXNbR2EoYSx0aGlzLm5leHRVaWQpXT1jfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbR2EoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXNbYT1HYShhLHRoaXMubmV4dFVpZCldO2RlbGV0ZSB0aGlzW2FdO3JldHVybiBjfX07dmFyIHhmPVtmdW5jdGlvbigpe3RoaXMuJGdldD1bZnVuY3Rpb24oKXtyZXR1cm4gVWF9XX1dLFVjPS9eW15cXChdKlxcKFxccyooW15cXCldKilcXCkvbSxtZz0vLC8sbmc9L15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC8sVGM9LygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nLEhhPUcoXCIkaW5qZWN0b3JcIik7ZWIuJCRhbm5vdGF0ZT1mdW5jdGlvbihhLGMsZCl7dmFyIGU7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpe2lmKCEoZT1hLiRpbmplY3QpKXtlPVtdO2lmKGEubGVuZ3RoKXtpZihjKXRocm93IEgoZCkmJlxuZHx8KGQ9YS5uYW1lfHxJZihhKSksSGEoXCJzdHJpY3RkaVwiLGQpO2M9YS50b1N0cmluZygpLnJlcGxhY2UoVGMsXCJcIik7Yz1jLm1hdGNoKFVjKTtuKGNbMV0uc3BsaXQobWcpLGZ1bmN0aW9uKGEpe2EucmVwbGFjZShuZyxmdW5jdGlvbihhLGMsZCl7ZS5wdXNoKGQpfSl9KX1hLiRpbmplY3Q9ZX19ZWxzZSBLKGEpPyhjPWEubGVuZ3RoLTEsU2EoYVtjXSxcImZuXCIpLGU9YS5zbGljZSgwLGMpKTpTYShhLFwiZm5cIiwhMCk7cmV0dXJuIGV9O3ZhciBOZD1HKFwiJGFuaW1hdGVcIiksVWU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W1wiJHFcIixcIiQkckFGXCIsZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKCl7fWQuYWxsPXY7ZC5jaGFpbj12O2QucHJvdG90eXBlPXtlbmQ6dixjYW5jZWw6dixyZXN1bWU6dixwYXVzZTp2LGNvbXBsZXRlOnYsdGhlbjpmdW5jdGlvbihkLGYpe3JldHVybiBhKGZ1bmN0aW9uKGEpe2MoZnVuY3Rpb24oKXthKCl9KX0pLnRoZW4oZCxmKX19O3JldHVybiBkfV19LFRlPWZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVWEsYz1bXTt0aGlzLiRnZXQ9W1wiJCRBbmltYXRlUnVubmVyXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZCxlKXtmdW5jdGlvbiBmKGQsZixsKXt2YXIgaz1hLmdldChkKTtrfHwoYS5wdXQoZCxrPXt9KSxjLnB1c2goZCkpO2Q9ZnVuY3Rpb24oYSxjKXt2YXIgZD0hMTthJiYoYT1IKGEpP2Euc3BsaXQoXCIgXCIpOksoYSk/YTpbXSxuKGEsZnVuY3Rpb24oYSl7YSYmKGQ9ITAsa1thXT1jKX0pKTtyZXR1cm4gZH07Zj1kKGYsITApO2w9ZChsLCExKTshZiYmIWx8fDE8Yy5sZW5ndGh8fGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7bihjLGZ1bmN0aW9uKGMpe3ZhciBkPWEuZ2V0KGMpO2lmKGQpe3ZhciBlPUpmKGMuYXR0cihcImNsYXNzXCIpKSxmPVwiXCIsZz1cIlwiO24oZCxmdW5jdGlvbihhLGMpe2EhPT0hIWVbY10mJihhP2YrPShmLmxlbmd0aD9cIiBcIjpcIlwiKStjOmcrPShnLmxlbmd0aD9cIiBcIjpcIlwiKStjKX0pO24oYyxmdW5jdGlvbihhKXtmJiZ5YihhLGYpO2cmJnhiKGEsZyl9KTthLnJlbW92ZShjKX19KTtcbmMubGVuZ3RoPTB9KX1yZXR1cm57ZW5hYmxlZDp2LG9uOnYsb2ZmOnYscGluOnYscHVzaDpmdW5jdGlvbihhLGMsZSxrKXtrJiZrKCk7ZT1lfHx7fTtlLmZyb20mJmEuY3NzKGUuZnJvbSk7ZS50byYmYS5jc3MoZS50byk7KGUuYWRkQ2xhc3N8fGUucmVtb3ZlQ2xhc3MpJiZmKGEsZS5hZGRDbGFzcyxlLnJlbW92ZUNsYXNzKTtyZXR1cm4gbmV3IGR9fX1dfSxSZT1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3ZhciBjPXRoaXM7dGhpcy4kJHJlZ2lzdGVyZWRBbmltYXRpb25zPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihkLGUpe2lmKGQmJlwiLlwiIT09ZC5jaGFyQXQoMCkpdGhyb3cgTmQoXCJub3Rjc2VsXCIsZCk7dmFyIGY9ZCtcIi1hbmltYXRpb25cIjtjLiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnNbZC5zdWJzdHIoMSldPWY7YS5mYWN0b3J5KGYsZSl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1cbmEgaW5zdGFuY2VvZiBSZWdFeHA/YTpudWxsKSYmLyhcXHMrfFxcLyluZy1hbmltYXRlKFxccyt8XFwvKS8udGVzdCh0aGlzLiQkY2xhc3NOYW1lRmlsdGVyLnRvU3RyaW5nKCkpKXRocm93IE5kKFwibm9uZ2Nsc1wiLFwibmctYW5pbWF0ZVwiKTtyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcn07dGhpcy4kZ2V0PVtcIiQkYW5pbWF0ZVF1ZXVlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhhLGQsZSl7aWYoZSl7dmFyIGw7YTp7Zm9yKGw9MDtsPGUubGVuZ3RoO2wrKyl7dmFyIGs9ZVtsXTtpZigxPT09ay5ub2RlVHlwZSl7bD1rO2JyZWFrIGF9fWw9dm9pZCAwfSFsfHxsLnBhcmVudE5vZGV8fGwucHJldmlvdXNFbGVtZW50U2libGluZ3x8KGU9bnVsbCl9ZT9lLmFmdGVyKGEpOmQucHJlcGVuZChhKX1yZXR1cm57b246YS5vbixvZmY6YS5vZmYscGluOmEucGluLGVuYWJsZWQ6YS5lbmFibGVkLGNhbmNlbDpmdW5jdGlvbihhKXthLmVuZCYmYS5lbmQoKX0sZW50ZXI6ZnVuY3Rpb24oZixnLGgsbCl7Zz1cbmcmJnooZyk7aD1oJiZ6KGgpO2c9Z3x8aC5wYXJlbnQoKTtjKGYsZyxoKTtyZXR1cm4gYS5wdXNoKGYsXCJlbnRlclwiLElhKGwpKX0sbW92ZTpmdW5jdGlvbihmLGcsaCxsKXtnPWcmJnooZyk7aD1oJiZ6KGgpO2c9Z3x8aC5wYXJlbnQoKTtjKGYsZyxoKTtyZXR1cm4gYS5wdXNoKGYsXCJtb3ZlXCIsSWEobCkpfSxsZWF2ZTpmdW5jdGlvbihjLGUpe3JldHVybiBhLnB1c2goYyxcImxlYXZlXCIsSWEoZSksZnVuY3Rpb24oKXtjLnJlbW92ZSgpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGMsZSxoKXtoPUlhKGgpO2guYWRkQ2xhc3M9aGIoaC5hZGRjbGFzcyxlKTtyZXR1cm4gYS5wdXNoKGMsXCJhZGRDbGFzc1wiLGgpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihjLGUsaCl7aD1JYShoKTtoLnJlbW92ZUNsYXNzPWhiKGgucmVtb3ZlQ2xhc3MsZSk7cmV0dXJuIGEucHVzaChjLFwicmVtb3ZlQ2xhc3NcIixoKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYyxlLGgsbCl7bD1JYShsKTtsLmFkZENsYXNzPWhiKGwuYWRkQ2xhc3MsXG5lKTtsLnJlbW92ZUNsYXNzPWhiKGwucmVtb3ZlQ2xhc3MsaCk7cmV0dXJuIGEucHVzaChjLFwic2V0Q2xhc3NcIixsKX0sYW5pbWF0ZTpmdW5jdGlvbihjLGUsaCxsLGspe2s9SWEoayk7ay5mcm9tPWsuZnJvbT9RKGsuZnJvbSxlKTplO2sudG89ay50bz9RKGsudG8saCk6aDtrLnRlbXBDbGFzc2VzPWhiKGsudGVtcENsYXNzZXMsbHx8XCJuZy1pbmxpbmUtYW5pbWF0ZVwiKTtyZXR1cm4gYS5wdXNoKGMsXCJhbmltYXRlXCIsayl9fX1dfV0sU2U9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiRxXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1mdW5jdGlvbigpe307ZC5wcm90b3R5cGU9e2RvbmU6ZnVuY3Rpb24oYSl7dGhpcy5kZWZlciYmdGhpcy5kZWZlclshMD09PWE/XCJyZWplY3RcIjpcInJlc29sdmVcIl0oKX0sZW5kOmZ1bmN0aW9uKCl7dGhpcy5kb25lKCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuZG9uZSghMCl9LGdldFByb21pc2U6ZnVuY3Rpb24oKXt0aGlzLmRlZmVyfHwodGhpcy5kZWZlcj1cbmMuZGVmZXIoKSk7cmV0dXJuIHRoaXMuZGVmZXIucHJvbWlzZX0sdGhlbjpmdW5jdGlvbihhLGMpe3JldHVybiB0aGlzLmdldFByb21pc2UoKS50aGVuKGEsYyl9LFwiY2F0Y2hcIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbXCJjYXRjaFwiXShhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpW1wiZmluYWxseVwiXShhKX19O3JldHVybiBmdW5jdGlvbihjLGYpe2Z1bmN0aW9uIGcoKXthKGZ1bmN0aW9uKCl7Zi5hZGRDbGFzcyYmKGMuYWRkQ2xhc3MoZi5hZGRDbGFzcyksZi5hZGRDbGFzcz1udWxsKTtmLnJlbW92ZUNsYXNzJiYoYy5yZW1vdmVDbGFzcyhmLnJlbW92ZUNsYXNzKSxmLnJlbW92ZUNsYXNzPW51bGwpO2YudG8mJihjLmNzcyhmLnRvKSxmLnRvPW51bGwpO2h8fGwuZG9uZSgpO2g9ITB9KTtyZXR1cm4gbH1mLmZyb20mJihjLmNzcyhmLmZyb20pLGYuZnJvbT1udWxsKTt2YXIgaCxsPW5ldyBkO3JldHVybntzdGFydDpnLFxuZW5kOmd9fX1dfSxlYT1HKFwiJGNvbXBpbGVcIik7Q2MuJGluamVjdD1bXCIkcHJvdmlkZVwiLFwiJCRzYW5pdGl6ZVVyaVByb3ZpZGVyXCJdO3ZhciBYYz0vXigoPzp4fGRhdGEpW1xcOlxcLV9dKS9pLE5mPUcoXCIkY29udHJvbGxlclwiKSxWYz0vXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLywkZT1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkZG9jdW1lbnRcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7Yz8hYy5ub2RlVHlwZSYmYyBpbnN0YW5jZW9mIHomJihjPWNbMF0pOmM9YVswXS5ib2R5O3JldHVybiBjLm9mZnNldFdpZHRoKzF9fV19LGJkPVwiYXBwbGljYXRpb24vanNvblwiLCRiPXtcIkNvbnRlbnQtVHlwZVwiOmJkK1wiO2NoYXJzZXQ9dXRmLThcIn0sUGY9L15cXFt8Xlxceyg/IVxceykvLFFmPXtcIltcIjovXSQvLFwie1wiOi99JC99LE9mPS9eXFwpXFxdXFx9Jyw/XFxuLyxvZz1HKFwiJGh0dHBcIiksZmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhyb3cgb2coXCJsZWdhY3lcIixhKTt9fSxLYT1hYS4kaW50ZXJwb2xhdGVNaW5FcnI9XG5HKFwiJGludGVycG9sYXRlXCIpO0thLnRocm93Tm9jb25jYXQ9ZnVuY3Rpb24oYSl7dGhyb3cgS2EoXCJub2NvbmNhdFwiLGEpO307S2EuaW50ZXJyPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIEthKFwiaW50ZXJyXCIsYSxjLnRvU3RyaW5nKCkpfTt2YXIgcGc9L14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sVGY9e2h0dHA6ODAsaHR0cHM6NDQzLGZ0cDoyMX0sRGI9RyhcIiRsb2NhdGlvblwiKSxxZz17JCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOkViKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEpe2lmKHkoYSkpcmV0dXJuIHRoaXMuJCR1cmw7dmFyIGM9cGcuZXhlYyhhKTsoY1sxXXx8XCJcIj09PWEpJiZ0aGlzLnBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KGNbMV0pKTsoY1syXXx8Y1sxXXx8XCJcIj09PWEpJiZ0aGlzLnNlYXJjaChjWzNdfHxcIlwiKTt0aGlzLmhhc2goY1s1XXx8XCJcIik7cmV0dXJuIHRoaXN9LHByb3RvY29sOkViKFwiJCRwcm90b2NvbFwiKSxob3N0OkViKFwiJCRob3N0XCIpLFxucG9ydDpFYihcIiQkcG9ydFwiKSxwYXRoOmtkKFwiJCRwYXRoXCIsZnVuY3Rpb24oYSl7YT1udWxsIT09YT9hLnRvU3RyaW5nKCk6XCJcIjtyZXR1cm5cIi9cIj09YS5jaGFyQXQoMCk/YTpcIi9cIithfSksc2VhcmNoOmZ1bmN0aW9uKGEsYyl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdGhpcy4kJHNlYXJjaDtjYXNlIDE6aWYoSChhKXx8WChhKSlhPWEudG9TdHJpbmcoKSx0aGlzLiQkc2VhcmNoPXhjKGEpO2Vsc2UgaWYoRChhKSlhPWZhKGEse30pLG4oYSxmdW5jdGlvbihjLGUpe251bGw9PWMmJmRlbGV0ZSBhW2VdfSksdGhpcy4kJHNlYXJjaD1hO2Vsc2UgdGhyb3cgRGIoXCJpc3JjaGFyZ1wiKTticmVhaztkZWZhdWx0OnkoYyl8fG51bGw9PT1jP2RlbGV0ZSB0aGlzLiQkc2VhcmNoW2FdOnRoaXMuJCRzZWFyY2hbYV09Y310aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfSxoYXNoOmtkKFwiJCRoYXNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPT1hP2EudG9TdHJpbmcoKTpcblwiXCJ9KSxyZXBsYWNlOmZ1bmN0aW9uKCl7dGhpcy4kJHJlcGxhY2U9ITA7cmV0dXJuIHRoaXN9fTtuKFtqZCxjYyxiY10sZnVuY3Rpb24oYSl7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShxZyk7YS5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oYyl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuJCRzdGF0ZTtpZihhIT09YmN8fCF0aGlzLiQkaHRtbDUpdGhyb3cgRGIoXCJub3N0YXRlXCIpO3RoaXMuJCRzdGF0ZT15KGMpP251bGw6YztyZXR1cm4gdGhpc319KTt2YXIgZGE9RyhcIiRwYXJzZVwiKSxVZj1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxWZj1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHksV2Y9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsTGI9Z2EoKTtuKFwiKyAtICogLyAlID09PSAhPT0gPT0gIT0gPCA+IDw9ID49ICYmIHx8ICEgPSB8XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe0xiW2FdPSEwfSk7dmFyIHJnPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIix0OlwiXFx0XCIsdjpcIlxcdlwiLFxuXCInXCI6XCInXCIsJ1wiJzonXCInfSxlYz1mdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9YX07ZWMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjplYyxsZXg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy5pbmRleD0wO2Zvcih0aGlzLnRva2Vucz1bXTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KWlmKGE9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSwnXCInPT09YXx8XCInXCI9PT1hKXRoaXMucmVhZFN0cmluZyhhKTtlbHNlIGlmKHRoaXMuaXNOdW1iZXIoYSl8fFwiLlwiPT09YSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnQoYSkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoYSxcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphfSksdGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UoYSkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGM9YStcbnRoaXMucGVlaygpLGQ9Yyt0aGlzLnBlZWsoMiksZT1MYltjXSxmPUxiW2RdO0xiW2FdfHxlfHxmPyhhPWY/ZDplP2M6YSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxvcGVyYXRvcjohMH0pLHRoaXMuaW5kZXgrPWEubGVuZ3RoKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX1yZXR1cm4gdGhpcy50b2tlbnN9LGlzOmZ1bmN0aW9uKGEsYyl7cmV0dXJuLTEhPT1jLmluZGV4T2YoYSl9LHBlZWs6ZnVuY3Rpb24oYSl7YT1hfHwxO3JldHVybiB0aGlzLmluZGV4K2E8dGhpcy50ZXh0Lmxlbmd0aD90aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgrYSk6ITF9LGlzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVyblwiMFwiPD1hJiZcIjlcIj49YSYmXCJzdHJpbmdcIj09PXR5cGVvZiBhfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1cbmF8fFwiXFx2XCI9PT1hfHxcIlxcdTAwYTBcIj09PWF9LGlzSWRlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJhXCI8PWEmJlwielwiPj1hfHxcIkFcIjw9YSYmXCJaXCI+PWF8fFwiX1wiPT09YXx8XCIkXCI9PT1hfSxpc0V4cE9wZXJhdG9yOmZ1bmN0aW9uKGEpe3JldHVyblwiLVwiPT09YXx8XCIrXCI9PT1hfHx0aGlzLmlzTnVtYmVyKGEpfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyxkKXtkPWR8fHRoaXMuaW5kZXg7Yz14KGMpP1wicyBcIitjK1wiLVwiK3RoaXMuaW5kZXgrXCIgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoYyxkKStcIl1cIjpcIiBcIitkO3Rocm93IGRhKFwibGV4ZXJyXCIsYSxjLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYz10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUkodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBlPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZcbnRoaXMuaXNFeHBPcGVyYXRvcihlKSlhKz1kO2Vsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGQpJiZlJiZ0aGlzLmlzTnVtYmVyKGUpJiZcImVcIj09YS5jaGFyQXQoYS5sZW5ndGgtMSkpYSs9ZDtlbHNlIGlmKCF0aGlzLmlzRXhwT3BlcmF0b3IoZCl8fGUmJnRoaXMuaXNOdW1iZXIoZSl8fFwiZVwiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSlicmVhaztlbHNlIHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgZXhwb25lbnRcIil9dGhpcy5pbmRleCsrfXRoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDphLGNvbnN0YW50OiEwLHZhbHVlOk51bWJlcihhKX0pfSxyZWFkSWRlbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgYz10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKCF0aGlzLmlzSWRlbnQoYykmJiF0aGlzLmlzTnVtYmVyKGMpKWJyZWFrO3RoaXMuaW5kZXgrK310aGlzLnRva2Vucy5wdXNoKHtpbmRleDphLFxudGV4dDp0aGlzLnRleHQuc2xpY2UoYSx0aGlzLmluZGV4KSxpZGVudGlmaWVyOiEwfSl9LHJlYWRTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5pbmRleDt0aGlzLmluZGV4Kys7Zm9yKHZhciBkPVwiXCIsZT1hLGY9ITE7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGc9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxlPWUrZztpZihmKVwidVwiPT09Zz8oZj10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuaW5kZXgrMSx0aGlzLmluZGV4KzUpLGYubWF0Y2goL1tcXGRhLWZdezR9L2kpfHx0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdVwiK2YrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLDE2KSkpOmQrPXJnW2ddfHxnLGY9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWcpZj0hMDtlbHNle2lmKGc9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmUsY29uc3RhbnQ6ITAsXG52YWx1ZTpkfSk7cmV0dXJufWQrPWd9dGhpcy5pbmRleCsrfXRoaXMudGhyb3dFcnJvcihcIlVudGVybWluYXRlZCBxdW90ZVwiLGMpfX07dmFyIHI9ZnVuY3Rpb24oYSxjKXt0aGlzLmxleGVyPWE7dGhpcy5vcHRpb25zPWN9O3IuUHJvZ3JhbT1cIlByb2dyYW1cIjtyLkV4cHJlc3Npb25TdGF0ZW1lbnQ9XCJFeHByZXNzaW9uU3RhdGVtZW50XCI7ci5Bc3NpZ25tZW50RXhwcmVzc2lvbj1cIkFzc2lnbm1lbnRFeHByZXNzaW9uXCI7ci5Db25kaXRpb25hbEV4cHJlc3Npb249XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIjtyLkxvZ2ljYWxFeHByZXNzaW9uPVwiTG9naWNhbEV4cHJlc3Npb25cIjtyLkJpbmFyeUV4cHJlc3Npb249XCJCaW5hcnlFeHByZXNzaW9uXCI7ci5VbmFyeUV4cHJlc3Npb249XCJVbmFyeUV4cHJlc3Npb25cIjtyLkNhbGxFeHByZXNzaW9uPVwiQ2FsbEV4cHJlc3Npb25cIjtyLk1lbWJlckV4cHJlc3Npb249XCJNZW1iZXJFeHByZXNzaW9uXCI7ci5JZGVudGlmaWVyPVwiSWRlbnRpZmllclwiO3IuTGl0ZXJhbD1cblwiTGl0ZXJhbFwiO3IuQXJyYXlFeHByZXNzaW9uPVwiQXJyYXlFeHByZXNzaW9uXCI7ci5Qcm9wZXJ0eT1cIlByb3BlcnR5XCI7ci5PYmplY3RFeHByZXNzaW9uPVwiT2JqZWN0RXhwcmVzc2lvblwiO3IuVGhpc0V4cHJlc3Npb249XCJUaGlzRXhwcmVzc2lvblwiO3IuTkdWYWx1ZVBhcmFtZXRlcj1cIk5HVmFsdWVQYXJhbWV0ZXJcIjtyLnByb3RvdHlwZT17YXN0OmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KGEpO2E9dGhpcy5wcm9ncmFtKCk7MCE9PXRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy50aHJvd0Vycm9yKFwiaXMgYW4gdW5leHBlY3RlZCB0b2tlblwiLHRoaXMudG9rZW5zWzBdKTtyZXR1cm4gYX0scHJvZ3JhbTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXTs7KWlmKDA8dGhpcy50b2tlbnMubGVuZ3RoJiYhdGhpcy5wZWVrKFwifVwiLFwiKVwiLFwiO1wiLFwiXVwiKSYmYS5wdXNoKHRoaXMuZXhwcmVzc2lvblN0YXRlbWVudCgpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybnt0eXBlOnIuUHJvZ3JhbSxcbmJvZHk6YX19LGV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpyLkV4cHJlc3Npb25TdGF0ZW1lbnQsZXhwcmVzc2lvbjp0aGlzLmZpbHRlckNoYWluKCl9fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmV4cGVjdChcInxcIik7KWE9dGhpcy5maWx0ZXIoYSk7cmV0dXJuIGF9LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCl9LGFzc2lnbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlcm5hcnkoKTt0aGlzLmV4cGVjdChcIj1cIikmJihhPXt0eXBlOnIuQXNzaWdubWVudEV4cHJlc3Npb24sbGVmdDphLHJpZ2h0OnRoaXMuYXNzaWdubWVudCgpLG9wZXJhdG9yOlwiPVwifSk7cmV0dXJuIGF9LHRlcm5hcnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvZ2ljYWxPUigpLGMsZDtyZXR1cm4gdGhpcy5leHBlY3QoXCI/XCIpJiYoYz10aGlzLmV4cHJlc3Npb24oKSx0aGlzLmNvbnN1bWUoXCI6XCIpKT9cbihkPXRoaXMuZXhwcmVzc2lvbigpLHt0eXBlOnIuQ29uZGl0aW9uYWxFeHByZXNzaW9uLHRlc3Q6YSxhbHRlcm5hdGU6Yyxjb25zZXF1ZW50OmR9KTphfSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCk7dGhpcy5leHBlY3QoXCJ8fFwiKTspYT17dHlwZTpyLkxvZ2ljYWxFeHByZXNzaW9uLG9wZXJhdG9yOlwifHxcIixsZWZ0OmEscmlnaHQ6dGhpcy5sb2dpY2FsQU5EKCl9O3JldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXF1YWxpdHkoKTt0aGlzLmV4cGVjdChcIiYmXCIpOylhPXt0eXBlOnIuTG9naWNhbEV4cHJlc3Npb24sb3BlcmF0b3I6XCImJlwiLGxlZnQ6YSxyaWdodDp0aGlzLmVxdWFsaXR5KCl9O3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnJlbGF0aW9uYWwoKSxjO2M9dGhpcy5leHBlY3QoXCI9PVwiLFwiIT1cIixcIj09PVwiLFwiIT09XCIpOylhPXt0eXBlOnIuQmluYXJ5RXhwcmVzc2lvbixcbm9wZXJhdG9yOmMudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5yZWxhdGlvbmFsKCl9O3JldHVybiBhfSxyZWxhdGlvbmFsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYWRkaXRpdmUoKSxjO2M9dGhpcy5leHBlY3QoXCI8XCIsXCI+XCIsXCI8PVwiLFwiPj1cIik7KWE9e3R5cGU6ci5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmMudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5hZGRpdGl2ZSgpfTtyZXR1cm4gYX0sYWRkaXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5tdWx0aXBsaWNhdGl2ZSgpLGM7Yz10aGlzLmV4cGVjdChcIitcIixcIi1cIik7KWE9e3R5cGU6ci5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmMudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5tdWx0aXBsaWNhdGl2ZSgpfTtyZXR1cm4gYX0sbXVsdGlwbGljYXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy51bmFyeSgpLGM7Yz10aGlzLmV4cGVjdChcIipcIixcIi9cIixcIiVcIik7KWE9e3R5cGU6ci5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmMudGV4dCxcbmxlZnQ6YSxyaWdodDp0aGlzLnVuYXJ5KCl9O3JldHVybiBhfSx1bmFyeTpmdW5jdGlvbigpe3ZhciBhO3JldHVybihhPXRoaXMuZXhwZWN0KFwiK1wiLFwiLVwiLFwiIVwiKSk/e3R5cGU6ci5VbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6YS50ZXh0LHByZWZpeDohMCxhcmd1bWVudDp0aGlzLnVuYXJ5KCl9OnRoaXMucHJpbWFyeSgpfSxwcmltYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7dGhpcy5leHBlY3QoXCIoXCIpPyhhPXRoaXMuZmlsdGVyQ2hhaW4oKSx0aGlzLmNvbnN1bWUoXCIpXCIpKTp0aGlzLmV4cGVjdChcIltcIik/YT10aGlzLmFycmF5RGVjbGFyYXRpb24oKTp0aGlzLmV4cGVjdChcIntcIik/YT10aGlzLm9iamVjdCgpOnRoaXMuY29uc3RhbnRzLmhhc093blByb3BlcnR5KHRoaXMucGVlaygpLnRleHQpP2E9ZmEodGhpcy5jb25zdGFudHNbdGhpcy5jb25zdW1lKCkudGV4dF0pOnRoaXMucGVlaygpLmlkZW50aWZpZXI/YT10aGlzLmlkZW50aWZpZXIoKTp0aGlzLnBlZWsoKS5jb25zdGFudD9hPXRoaXMuY29uc3RhbnQoKTpcbnRoaXMudGhyb3dFcnJvcihcIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvblwiLHRoaXMucGVlaygpKTtmb3IodmFyIGM7Yz10aGlzLmV4cGVjdChcIihcIixcIltcIixcIi5cIik7KVwiKFwiPT09Yy50ZXh0PyhhPXt0eXBlOnIuQ2FsbEV4cHJlc3Npb24sY2FsbGVlOmEsYXJndW1lbnRzOnRoaXMucGFyc2VBcmd1bWVudHMoKX0sdGhpcy5jb25zdW1lKFwiKVwiKSk6XCJbXCI9PT1jLnRleHQ/KGE9e3R5cGU6ci5NZW1iZXJFeHByZXNzaW9uLG9iamVjdDphLHByb3BlcnR5OnRoaXMuZXhwcmVzc2lvbigpLGNvbXB1dGVkOiEwfSx0aGlzLmNvbnN1bWUoXCJdXCIpKTpcIi5cIj09PWMudGV4dD9hPXt0eXBlOnIuTWVtYmVyRXhwcmVzc2lvbixvYmplY3Q6YSxwcm9wZXJ0eTp0aGlzLmlkZW50aWZpZXIoKSxjb21wdXRlZDohMX06dGhpcy50aHJvd0Vycm9yKFwiSU1QT1NTSUJMRVwiKTtyZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKGEpe2E9W2FdO2Zvcih2YXIgYz17dHlwZTpyLkNhbGxFeHByZXNzaW9uLGNhbGxlZTp0aGlzLmlkZW50aWZpZXIoKSxcbmFyZ3VtZW50czphLGZpbHRlcjohMH07dGhpcy5leHBlY3QoXCI6XCIpOylhLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3JldHVybiBjfSxwYXJzZUFyZ3VtZW50czpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKFwiKVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBhLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3doaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9cmV0dXJuIGF9LGlkZW50aWZpZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnN1bWUoKTthLmlkZW50aWZpZXJ8fHRoaXMudGhyb3dFcnJvcihcImlzIG5vdCBhIHZhbGlkIGlkZW50aWZpZXJcIixhKTtyZXR1cm57dHlwZTpyLklkZW50aWZpZXIsbmFtZTphLnRleHR9fSxjb25zdGFudDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnIuTGl0ZXJhbCx2YWx1ZTp0aGlzLmNvbnN1bWUoKS52YWx1ZX19LGFycmF5RGVjbGFyYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZihcIl1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwiXVwiKSlicmVhaztcbmEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybnt0eXBlOnIuQXJyYXlFeHByZXNzaW9uLGVsZW1lbnRzOmF9fSxvYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1bXSxjO2lmKFwifVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJ9XCIpKWJyZWFrO2M9e3R5cGU6ci5Qcm9wZXJ0eSxraW5kOlwiaW5pdFwifTt0aGlzLnBlZWsoKS5jb25zdGFudD9jLmtleT10aGlzLmNvbnN0YW50KCk6dGhpcy5wZWVrKCkuaWRlbnRpZmllcj9jLmtleT10aGlzLmlkZW50aWZpZXIoKTp0aGlzLnRocm93RXJyb3IoXCJpbnZhbGlkIGtleVwiLHRoaXMucGVlaygpKTt0aGlzLmNvbnN1bWUoXCI6XCIpO2MudmFsdWU9dGhpcy5leHByZXNzaW9uKCk7YS5wdXNoKGMpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwifVwiKTtyZXR1cm57dHlwZTpyLk9iamVjdEV4cHJlc3Npb24scHJvcGVydGllczphfX0sXG50aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyl7dGhyb3cgZGEoXCJzeW50YXhcIixjLnRleHQsYSxjLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYy5pbmRleCkpO30sY29uc3VtZTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGRhKFwidWVvZVwiLHRoaXMudGV4dCk7dmFyIGM9dGhpcy5leHBlY3QoYSk7Y3x8dGhpcy50aHJvd0Vycm9yKFwiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFtcIithK1wiXVwiLHRoaXMucGVlaygpKTtyZXR1cm4gY30scGVla1Rva2VuOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBkYShcInVlb2VcIix0aGlzLnRleHQpO3JldHVybiB0aGlzLnRva2Vuc1swXX0scGVlazpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gdGhpcy5wZWVrQWhlYWQoMCxhLGMsZCxlKX0scGVla0FoZWFkOmZ1bmN0aW9uKGEsYyxkLGUsZil7aWYodGhpcy50b2tlbnMubGVuZ3RoPmEpe2E9dGhpcy50b2tlbnNbYV07XG52YXIgZz1hLnRleHQ7aWYoZz09PWN8fGc9PT1kfHxnPT09ZXx8Zz09PWZ8fCEoY3x8ZHx8ZXx8ZikpcmV0dXJuIGF9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxjLGQsZSkpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdGFudHM6e1widHJ1ZVwiOnt0eXBlOnIuTGl0ZXJhbCx2YWx1ZTohMH0sXCJmYWxzZVwiOnt0eXBlOnIuTGl0ZXJhbCx2YWx1ZTohMX0sXCJudWxsXCI6e3R5cGU6ci5MaXRlcmFsLHZhbHVlOm51bGx9LHVuZGVmaW5lZDp7dHlwZTpyLkxpdGVyYWwsdmFsdWU6dX0sXCJ0aGlzXCI6e3R5cGU6ci5UaGlzRXhwcmVzc2lvbn19fTtyZC5wcm90b3R5cGU9e2NvbXBpbGU6ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLGU9dGhpcy5hc3RCdWlsZGVyLmFzdChhKTt0aGlzLnN0YXRlPXtuZXh0SWQ6MCxmaWx0ZXJzOnt9LGV4cGVuc2l2ZUNoZWNrczpjLGZuOnt2YXJzOltdLGJvZHk6W10sb3duOnt9fSxhc3NpZ246e3ZhcnM6W10sXG5ib2R5OltdLG93bjp7fX0saW5wdXRzOltdfTtVKGUsZC4kZmlsdGVyKTt2YXIgZj1cIlwiLGc7dGhpcy5zdGFnZT1cImFzc2lnblwiO2lmKGc9cGQoZSkpdGhpcy5zdGF0ZS5jb21wdXRpbmc9XCJhc3NpZ25cIixmPXRoaXMubmV4dElkKCksdGhpcy5yZWN1cnNlKGcsZiksZj1cImZuLmFzc2lnbj1cIit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oXCJhc3NpZ25cIixcInMsdixsXCIpO2c9bmQoZS5ib2R5KTtkLnN0YWdlPVwiaW5wdXRzXCI7bihnLGZ1bmN0aW9uKGEsYyl7dmFyIGU9XCJmblwiK2M7ZC5zdGF0ZVtlXT17dmFyczpbXSxib2R5OltdLG93bjp7fX07ZC5zdGF0ZS5jb21wdXRpbmc9ZTt2YXIgZj1kLm5leHRJZCgpO2QucmVjdXJzZShhLGYpO2QucmV0dXJuXyhmKTtkLnN0YXRlLmlucHV0cy5wdXNoKGUpO2Eud2F0Y2hJZD1jfSk7dGhpcy5zdGF0ZS5jb21wdXRpbmc9XCJmblwiO3RoaXMuc3RhZ2U9XCJtYWluXCI7dGhpcy5yZWN1cnNlKGUpO2Y9J1wiJyt0aGlzLlVTRStcIiBcIit0aGlzLlNUUklDVCsnXCI7XFxuJyt0aGlzLmZpbHRlclByZWZpeCgpK1xuXCJ2YXIgZm49XCIrdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uKFwiZm5cIixcInMsbCxhLGlcIikrZit0aGlzLndhdGNoRm5zKCkrXCJyZXR1cm4gZm47XCI7Zj0obmV3IEZ1bmN0aW9uKFwiJGZpbHRlclwiLFwiZW5zdXJlU2FmZU1lbWJlck5hbWVcIixcImVuc3VyZVNhZmVPYmplY3RcIixcImVuc3VyZVNhZmVGdW5jdGlvblwiLFwiaWZEZWZpbmVkXCIsXCJwbHVzXCIsXCJ0ZXh0XCIsZikpKHRoaXMuJGZpbHRlcixXYSxCYSxsZCxYZixtZCxhKTt0aGlzLnN0YXRlPXRoaXMuc3RhZ2U9dTtmLmxpdGVyYWw9cWQoZSk7Zi5jb25zdGFudD1lLmNvbnN0YW50O3JldHVybiBmfSxVU0U6XCJ1c2VcIixTVFJJQ1Q6XCJzdHJpY3RcIix3YXRjaEZuczpmdW5jdGlvbigpe3ZhciBhPVtdLGM9dGhpcy5zdGF0ZS5pbnB1dHMsZD10aGlzO24oYyxmdW5jdGlvbihjKXthLnB1c2goXCJ2YXIgXCIrYytcIj1cIitkLmdlbmVyYXRlRnVuY3Rpb24oYyxcInNcIikpfSk7Yy5sZW5ndGgmJmEucHVzaChcImZuLmlucHV0cz1bXCIrYy5qb2luKFwiLFwiKStcIl07XCIpO3JldHVybiBhLmpvaW4oXCJcIil9LFxuZ2VuZXJhdGVGdW5jdGlvbjpmdW5jdGlvbihhLGMpe3JldHVyblwiZnVuY3Rpb24oXCIrYytcIil7XCIrdGhpcy52YXJzUHJlZml4KGEpK3RoaXMuYm9keShhKStcIn07XCJ9LGZpbHRlclByZWZpeDpmdW5jdGlvbigpe3ZhciBhPVtdLGM9dGhpcztuKHRoaXMuc3RhdGUuZmlsdGVycyxmdW5jdGlvbihkLGUpe2EucHVzaChkK1wiPSRmaWx0ZXIoXCIrYy5lc2NhcGUoZSkrXCIpXCIpfSk7cmV0dXJuIGEubGVuZ3RoP1widmFyIFwiK2Euam9pbihcIixcIikrXCI7XCI6XCJcIn0sdmFyc1ByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGF0ZVthXS52YXJzLmxlbmd0aD9cInZhciBcIit0aGlzLnN0YXRlW2FdLnZhcnMuam9pbihcIixcIikrXCI7XCI6XCJcIn0sYm9keTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGF0ZVthXS5ib2R5LmpvaW4oXCJcIil9LHJlY3Vyc2U6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe3ZhciBoLGwsaz10aGlzLG0scTtlPWV8fHY7aWYoIWcmJngoYS53YXRjaElkKSljPWN8fHRoaXMubmV4dElkKCksdGhpcy5pZl8oXCJpXCIsXG50aGlzLmxhenlBc3NpZ24oYyx0aGlzLmNvbXB1dGVkTWVtYmVyKFwiaVwiLGEud2F0Y2hJZCkpLHRoaXMubGF6eVJlY3Vyc2UoYSxjLGQsZSxmLCEwKSk7ZWxzZSBzd2l0Y2goYS50eXBlKXtjYXNlIHIuUHJvZ3JhbTpuKGEuYm9keSxmdW5jdGlvbihjLGQpe2sucmVjdXJzZShjLmV4cHJlc3Npb24sdSx1LGZ1bmN0aW9uKGEpe2w9YX0pO2QhPT1hLmJvZHkubGVuZ3RoLTE/ay5jdXJyZW50KCkuYm9keS5wdXNoKGwsXCI7XCIpOmsucmV0dXJuXyhsKX0pO2JyZWFrO2Nhc2Ugci5MaXRlcmFsOnE9dGhpcy5lc2NhcGUoYS52YWx1ZSk7dGhpcy5hc3NpZ24oYyxxKTtlKHEpO2JyZWFrO2Nhc2Ugci5VbmFyeUV4cHJlc3Npb246dGhpcy5yZWN1cnNlKGEuYXJndW1lbnQsdSx1LGZ1bmN0aW9uKGEpe2w9YX0pO3E9YS5vcGVyYXRvcitcIihcIit0aGlzLmlmRGVmaW5lZChsLDApK1wiKVwiO3RoaXMuYXNzaWduKGMscSk7ZShxKTticmVhaztjYXNlIHIuQmluYXJ5RXhwcmVzc2lvbjp0aGlzLnJlY3Vyc2UoYS5sZWZ0LFxudSx1LGZ1bmN0aW9uKGEpe2g9YX0pO3RoaXMucmVjdXJzZShhLnJpZ2h0LHUsdSxmdW5jdGlvbihhKXtsPWF9KTtxPVwiK1wiPT09YS5vcGVyYXRvcj90aGlzLnBsdXMoaCxsKTpcIi1cIj09PWEub3BlcmF0b3I/dGhpcy5pZkRlZmluZWQoaCwwKSthLm9wZXJhdG9yK3RoaXMuaWZEZWZpbmVkKGwsMCk6XCIoXCIraCtcIilcIithLm9wZXJhdG9yK1wiKFwiK2wrXCIpXCI7dGhpcy5hc3NpZ24oYyxxKTtlKHEpO2JyZWFrO2Nhc2Ugci5Mb2dpY2FsRXhwcmVzc2lvbjpjPWN8fHRoaXMubmV4dElkKCk7ay5yZWN1cnNlKGEubGVmdCxjKTtrLmlmXyhcIiYmXCI9PT1hLm9wZXJhdG9yP2M6ay5ub3QoYyksay5sYXp5UmVjdXJzZShhLnJpZ2h0LGMpKTtlKGMpO2JyZWFrO2Nhc2Ugci5Db25kaXRpb25hbEV4cHJlc3Npb246Yz1jfHx0aGlzLm5leHRJZCgpO2sucmVjdXJzZShhLnRlc3QsYyk7ay5pZl8oYyxrLmxhenlSZWN1cnNlKGEuYWx0ZXJuYXRlLGMpLGsubGF6eVJlY3Vyc2UoYS5jb25zZXF1ZW50LGMpKTtlKGMpO1xuYnJlYWs7Y2FzZSByLklkZW50aWZpZXI6Yz1jfHx0aGlzLm5leHRJZCgpO2QmJihkLmNvbnRleHQ9XCJpbnB1dHNcIj09PWsuc3RhZ2U/XCJzXCI6dGhpcy5hc3NpZ24odGhpcy5uZXh0SWQoKSx0aGlzLmdldEhhc093blByb3BlcnR5KFwibFwiLGEubmFtZSkrXCI/bDpzXCIpLGQuY29tcHV0ZWQ9ITEsZC5uYW1lPWEubmFtZSk7V2EoYS5uYW1lKTtrLmlmXyhcImlucHV0c1wiPT09ay5zdGFnZXx8ay5ub3Qoay5nZXRIYXNPd25Qcm9wZXJ0eShcImxcIixhLm5hbWUpKSxmdW5jdGlvbigpe2suaWZfKFwiaW5wdXRzXCI9PT1rLnN0YWdlfHxcInNcIixmdW5jdGlvbigpe2YmJjEhPT1mJiZrLmlmXyhrLm5vdChrLm5vbkNvbXB1dGVkTWVtYmVyKFwic1wiLGEubmFtZSkpLGsubGF6eUFzc2lnbihrLm5vbkNvbXB1dGVkTWVtYmVyKFwic1wiLGEubmFtZSksXCJ7fVwiKSk7ay5hc3NpZ24oYyxrLm5vbkNvbXB1dGVkTWVtYmVyKFwic1wiLGEubmFtZSkpfSl9LGMmJmsubGF6eUFzc2lnbihjLGsubm9uQ29tcHV0ZWRNZW1iZXIoXCJsXCIsXG5hLm5hbWUpKSk7KGsuc3RhdGUuZXhwZW5zaXZlQ2hlY2tzfHxGYihhLm5hbWUpKSYmay5hZGRFbnN1cmVTYWZlT2JqZWN0KGMpO2UoYyk7YnJlYWs7Y2FzZSByLk1lbWJlckV4cHJlc3Npb246aD1kJiYoZC5jb250ZXh0PXRoaXMubmV4dElkKCkpfHx0aGlzLm5leHRJZCgpO2M9Y3x8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS5vYmplY3QsaCx1LGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGgpLGZ1bmN0aW9uKCl7aWYoYS5jb21wdXRlZClsPWsubmV4dElkKCksay5yZWN1cnNlKGEucHJvcGVydHksbCksay5hZGRFbnN1cmVTYWZlTWVtYmVyTmFtZShsKSxmJiYxIT09ZiYmay5pZl8oay5ub3Qoay5jb21wdXRlZE1lbWJlcihoLGwpKSxrLmxhenlBc3NpZ24oay5jb21wdXRlZE1lbWJlcihoLGwpLFwie31cIikpLHE9ay5lbnN1cmVTYWZlT2JqZWN0KGsuY29tcHV0ZWRNZW1iZXIoaCxsKSksay5hc3NpZ24oYyxxKSxkJiYoZC5jb21wdXRlZD0hMCxkLm5hbWU9bCk7ZWxzZXtXYShhLnByb3BlcnR5Lm5hbWUpO1xuZiYmMSE9PWYmJmsuaWZfKGsubm90KGsubm9uQ29tcHV0ZWRNZW1iZXIoaCxhLnByb3BlcnR5Lm5hbWUpKSxrLmxhenlBc3NpZ24oay5ub25Db21wdXRlZE1lbWJlcihoLGEucHJvcGVydHkubmFtZSksXCJ7fVwiKSk7cT1rLm5vbkNvbXB1dGVkTWVtYmVyKGgsYS5wcm9wZXJ0eS5uYW1lKTtpZihrLnN0YXRlLmV4cGVuc2l2ZUNoZWNrc3x8RmIoYS5wcm9wZXJ0eS5uYW1lKSlxPWsuZW5zdXJlU2FmZU9iamVjdChxKTtrLmFzc2lnbihjLHEpO2QmJihkLmNvbXB1dGVkPSExLGQubmFtZT1hLnByb3BlcnR5Lm5hbWUpfX0sZnVuY3Rpb24oKXtrLmFzc2lnbihjLFwidW5kZWZpbmVkXCIpfSk7ZShjKX0sISFmKTticmVhaztjYXNlIHIuQ2FsbEV4cHJlc3Npb246Yz1jfHx0aGlzLm5leHRJZCgpO2EuZmlsdGVyPyhsPWsuZmlsdGVyKGEuY2FsbGVlLm5hbWUpLG09W10sbihhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXt2YXIgYz1rLm5leHRJZCgpO2sucmVjdXJzZShhLGMpO20ucHVzaChjKX0pLHE9bCtcblwiKFwiK20uam9pbihcIixcIikrXCIpXCIsay5hc3NpZ24oYyxxKSxlKGMpKToobD1rLm5leHRJZCgpLGg9e30sbT1bXSxrLnJlY3Vyc2UoYS5jYWxsZWUsbCxoLGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGwpLGZ1bmN0aW9uKCl7ay5hZGRFbnN1cmVTYWZlRnVuY3Rpb24obCk7bihhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYSxrLm5leHRJZCgpLHUsZnVuY3Rpb24oYSl7bS5wdXNoKGsuZW5zdXJlU2FmZU9iamVjdChhKSl9KX0pO2gubmFtZT8oay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fGsuYWRkRW5zdXJlU2FmZU9iamVjdChoLmNvbnRleHQpLHE9ay5tZW1iZXIoaC5jb250ZXh0LGgubmFtZSxoLmNvbXB1dGVkKStcIihcIittLmpvaW4oXCIsXCIpK1wiKVwiKTpxPWwrXCIoXCIrbS5qb2luKFwiLFwiKStcIilcIjtxPWsuZW5zdXJlU2FmZU9iamVjdChxKTtrLmFzc2lnbihjLHEpfSxmdW5jdGlvbigpe2suYXNzaWduKGMsXCJ1bmRlZmluZWRcIil9KTtlKGMpfSkpO2JyZWFrO2Nhc2Ugci5Bc3NpZ25tZW50RXhwcmVzc2lvbjpsPVxudGhpcy5uZXh0SWQoKTtoPXt9O2lmKCFvZChhLmxlZnQpKXRocm93IGRhKFwibHZhbFwiKTt0aGlzLnJlY3Vyc2UoYS5sZWZ0LHUsaCxmdW5jdGlvbigpe2suaWZfKGsubm90TnVsbChoLmNvbnRleHQpLGZ1bmN0aW9uKCl7ay5yZWN1cnNlKGEucmlnaHQsbCk7ay5hZGRFbnN1cmVTYWZlT2JqZWN0KGsubWVtYmVyKGguY29udGV4dCxoLm5hbWUsaC5jb21wdXRlZCkpO3E9ay5tZW1iZXIoaC5jb250ZXh0LGgubmFtZSxoLmNvbXB1dGVkKSthLm9wZXJhdG9yK2w7ay5hc3NpZ24oYyxxKTtlKGN8fHEpfSl9LDEpO2JyZWFrO2Nhc2Ugci5BcnJheUV4cHJlc3Npb246bT1bXTtuKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7ay5yZWN1cnNlKGEsay5uZXh0SWQoKSx1LGZ1bmN0aW9uKGEpe20ucHVzaChhKX0pfSk7cT1cIltcIittLmpvaW4oXCIsXCIpK1wiXVwiO3RoaXMuYXNzaWduKGMscSk7ZShxKTticmVhaztjYXNlIHIuT2JqZWN0RXhwcmVzc2lvbjptPVtdO24oYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2sucmVjdXJzZShhLnZhbHVlLFxuay5uZXh0SWQoKSx1LGZ1bmN0aW9uKGMpe20ucHVzaChrLmVzY2FwZShhLmtleS50eXBlPT09ci5JZGVudGlmaWVyP2Eua2V5Lm5hbWU6XCJcIithLmtleS52YWx1ZSkrXCI6XCIrYyl9KX0pO3E9XCJ7XCIrbS5qb2luKFwiLFwiKStcIn1cIjt0aGlzLmFzc2lnbihjLHEpO2UocSk7YnJlYWs7Y2FzZSByLlRoaXNFeHByZXNzaW9uOnRoaXMuYXNzaWduKGMsXCJzXCIpO2UoXCJzXCIpO2JyZWFrO2Nhc2Ugci5OR1ZhbHVlUGFyYW1ldGVyOnRoaXMuYXNzaWduKGMsXCJ2XCIpLGUoXCJ2XCIpfX0sZ2V0SGFzT3duUHJvcGVydHk6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hK1wiLlwiK2MsZT10aGlzLmN1cnJlbnQoKS5vd247ZS5oYXNPd25Qcm9wZXJ0eShkKXx8KGVbZF09dGhpcy5uZXh0SWQoITEsYStcIiYmKFwiK3RoaXMuZXNjYXBlKGMpK1wiIGluIFwiK2ErXCIpXCIpKTtyZXR1cm4gZVtkXX0sYXNzaWduOmZ1bmN0aW9uKGEsYyl7aWYoYSlyZXR1cm4gdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGEsXCI9XCIsYyxcIjtcIiksYX0sZmlsdGVyOmZ1bmN0aW9uKGEpe3RoaXMuc3RhdGUuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhKXx8XG4odGhpcy5zdGF0ZS5maWx0ZXJzW2FdPXRoaXMubmV4dElkKCEwKSk7cmV0dXJuIHRoaXMuc3RhdGUuZmlsdGVyc1thXX0saWZEZWZpbmVkOmZ1bmN0aW9uKGEsYyl7cmV0dXJuXCJpZkRlZmluZWQoXCIrYStcIixcIit0aGlzLmVzY2FwZShjKStcIilcIn0scGx1czpmdW5jdGlvbihhLGMpe3JldHVyblwicGx1cyhcIithK1wiLFwiK2MrXCIpXCJ9LHJldHVybl86ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKFwicmV0dXJuIFwiLGEsXCI7XCIpfSxpZl86ZnVuY3Rpb24oYSxjLGQpe2lmKCEwPT09YSljKCk7ZWxzZXt2YXIgZT10aGlzLmN1cnJlbnQoKS5ib2R5O2UucHVzaChcImlmKFwiLGEsXCIpe1wiKTtjKCk7ZS5wdXNoKFwifVwiKTtkJiYoZS5wdXNoKFwiZWxzZXtcIiksZCgpLGUucHVzaChcIn1cIikpfX0sbm90OmZ1bmN0aW9uKGEpe3JldHVyblwiIShcIithK1wiKVwifSxub3ROdWxsOmZ1bmN0aW9uKGEpe3JldHVybiBhK1wiIT1udWxsXCJ9LG5vbkNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGErXG5cIi5cIitjfSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGMpe3JldHVybiBhK1wiW1wiK2MrXCJdXCJ9LG1lbWJlcjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGQ/dGhpcy5jb21wdXRlZE1lbWJlcihhLGMpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYSxjKX0sYWRkRW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlT2JqZWN0KGEpLFwiO1wiKX0sYWRkRW5zdXJlU2FmZU1lbWJlck5hbWU6ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZU1lbWJlck5hbWUoYSksXCI7XCIpfSxhZGRFbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZUZ1bmN0aW9uKGEpLFwiO1wiKX0sZW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVPYmplY3QoXCIrYStcIix0ZXh0KVwifSxlbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVNZW1iZXJOYW1lKFwiK1xuYStcIix0ZXh0KVwifSxlbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJlbnN1cmVTYWZlRnVuY3Rpb24oXCIrYStcIix0ZXh0KVwifSxsYXp5UmVjdXJzZTpmdW5jdGlvbihhLGMsZCxlLGYsZyl7dmFyIGg9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtoLnJlY3Vyc2UoYSxjLGQsZSxmLGcpfX0sbGF6eUFzc2lnbjpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7ZC5hc3NpZ24oYSxjKX19LHN0cmluZ0VzY2FwZVJlZ2V4Oi9bXiBhLXpBLVowLTldL2csc3RyaW5nRXNjYXBlRm46ZnVuY3Rpb24oYSl7cmV0dXJuXCJcXFxcdVwiKyhcIjAwMDBcIithLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9LGVzY2FwZTpmdW5jdGlvbihhKXtpZihIKGEpKXJldHVyblwiJ1wiK2EucmVwbGFjZSh0aGlzLnN0cmluZ0VzY2FwZVJlZ2V4LHRoaXMuc3RyaW5nRXNjYXBlRm4pK1wiJ1wiO2lmKFgoYSkpcmV0dXJuIGEudG9TdHJpbmcoKTtpZighMD09PWEpcmV0dXJuXCJ0cnVlXCI7XG5pZighMT09PWEpcmV0dXJuXCJmYWxzZVwiO2lmKG51bGw9PT1hKXJldHVyblwibnVsbFwiO2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgYSlyZXR1cm5cInVuZGVmaW5lZFwiO3Rocm93IGRhKFwiZXNjXCIpO30sbmV4dElkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9XCJ2XCIrdGhpcy5zdGF0ZS5uZXh0SWQrKzthfHx0aGlzLmN1cnJlbnQoKS52YXJzLnB1c2goZCsoYz9cIj1cIitjOlwiXCIpKTtyZXR1cm4gZH0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXX19O3NkLnByb3RvdHlwZT17Y29tcGlsZTpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT10aGlzLmFzdEJ1aWxkZXIuYXN0KGEpO3RoaXMuZXhwcmVzc2lvbj1hO3RoaXMuZXhwZW5zaXZlQ2hlY2tzPWM7VShlLGQuJGZpbHRlcik7dmFyIGYsZztpZihmPXBkKGUpKWc9dGhpcy5yZWN1cnNlKGYpO2Y9bmQoZS5ib2R5KTt2YXIgaDtmJiYoaD1bXSxuKGYsZnVuY3Rpb24oYSxjKXt2YXIgZT1kLnJlY3Vyc2UoYSk7XG5hLmlucHV0PWU7aC5wdXNoKGUpO2Eud2F0Y2hJZD1jfSkpO3ZhciBsPVtdO24oZS5ib2R5LGZ1bmN0aW9uKGEpe2wucHVzaChkLnJlY3Vyc2UoYS5leHByZXNzaW9uKSl9KTtmPTA9PT1lLmJvZHkubGVuZ3RoP2Z1bmN0aW9uKCl7fToxPT09ZS5ib2R5Lmxlbmd0aD9sWzBdOmZ1bmN0aW9uKGEsYyl7dmFyIGQ7bihsLGZ1bmN0aW9uKGUpe2Q9ZShhLGMpfSk7cmV0dXJuIGR9O2cmJihmLmFzc2lnbj1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIGcoYSxkLGMpfSk7aCYmKGYuaW5wdXRzPWgpO2YubGl0ZXJhbD1xZChlKTtmLmNvbnN0YW50PWUuY29uc3RhbnQ7cmV0dXJuIGZ9LHJlY3Vyc2U6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGYsZz10aGlzLGg7aWYoYS5pbnB1dClyZXR1cm4gdGhpcy5pbnB1dHMoYS5pbnB1dCxhLndhdGNoSWQpO3N3aXRjaChhLnR5cGUpe2Nhc2Ugci5MaXRlcmFsOnJldHVybiB0aGlzLnZhbHVlKGEudmFsdWUsYyk7Y2FzZSByLlVuYXJ5RXhwcmVzc2lvbjpyZXR1cm4gZj1cbnRoaXMucmVjdXJzZShhLmFyZ3VtZW50KSx0aGlzW1widW5hcnlcIithLm9wZXJhdG9yXShmLGMpO2Nhc2Ugci5CaW5hcnlFeHByZXNzaW9uOnJldHVybiBlPXRoaXMucmVjdXJzZShhLmxlZnQpLGY9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShlLGYsYyk7Y2FzZSByLkxvZ2ljYWxFeHByZXNzaW9uOnJldHVybiBlPXRoaXMucmVjdXJzZShhLmxlZnQpLGY9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShlLGYsYyk7Y2FzZSByLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpyZXR1cm4gdGhpc1tcInRlcm5hcnk/OlwiXSh0aGlzLnJlY3Vyc2UoYS50ZXN0KSx0aGlzLnJlY3Vyc2UoYS5hbHRlcm5hdGUpLHRoaXMucmVjdXJzZShhLmNvbnNlcXVlbnQpLGMpO2Nhc2Ugci5JZGVudGlmaWVyOnJldHVybiBXYShhLm5hbWUsZy5leHByZXNzaW9uKSxnLmlkZW50aWZpZXIoYS5uYW1lLGcuZXhwZW5zaXZlQ2hlY2tzfHxGYihhLm5hbWUpLFxuYyxkLGcuZXhwcmVzc2lvbik7Y2FzZSByLk1lbWJlckV4cHJlc3Npb246cmV0dXJuIGU9dGhpcy5yZWN1cnNlKGEub2JqZWN0LCExLCEhZCksYS5jb21wdXRlZHx8KFdhKGEucHJvcGVydHkubmFtZSxnLmV4cHJlc3Npb24pLGY9YS5wcm9wZXJ0eS5uYW1lKSxhLmNvbXB1dGVkJiYoZj10aGlzLnJlY3Vyc2UoYS5wcm9wZXJ0eSkpLGEuY29tcHV0ZWQ/dGhpcy5jb21wdXRlZE1lbWJlcihlLGYsYyxkLGcuZXhwcmVzc2lvbik6dGhpcy5ub25Db21wdXRlZE1lbWJlcihlLGYsZy5leHBlbnNpdmVDaGVja3MsYyxkLGcuZXhwcmVzc2lvbik7Y2FzZSByLkNhbGxFeHByZXNzaW9uOnJldHVybiBoPVtdLG4oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7aC5wdXNoKGcucmVjdXJzZShhKSl9KSxhLmZpbHRlciYmKGY9dGhpcy4kZmlsdGVyKGEuY2FsbGVlLm5hbWUpKSxhLmZpbHRlcnx8KGY9dGhpcy5yZWN1cnNlKGEuY2FsbGVlLCEwKSksYS5maWx0ZXI/ZnVuY3Rpb24oYSxkLGUsZyl7Zm9yKHZhciBuPVxuW10sdD0wO3Q8aC5sZW5ndGg7Kyt0KW4ucHVzaChoW3RdKGEsZCxlLGcpKTthPWYuYXBwbHkodSxuLGcpO3JldHVybiBjP3tjb250ZXh0OnUsbmFtZTp1LHZhbHVlOmF9OmF9OmZ1bmN0aW9uKGEsZCxlLHEpe3ZhciBuPWYoYSxkLGUscSksdDtpZihudWxsIT1uLnZhbHVlKXtCYShuLmNvbnRleHQsZy5leHByZXNzaW9uKTtsZChuLnZhbHVlLGcuZXhwcmVzc2lvbik7dD1bXTtmb3IodmFyIHI9MDtyPGgubGVuZ3RoOysrcil0LnB1c2goQmEoaFtyXShhLGQsZSxxKSxnLmV4cHJlc3Npb24pKTt0PUJhKG4udmFsdWUuYXBwbHkobi5jb250ZXh0LHQpLGcuZXhwcmVzc2lvbil9cmV0dXJuIGM/e3ZhbHVlOnR9OnR9O2Nhc2Ugci5Bc3NpZ25tZW50RXhwcmVzc2lvbjpyZXR1cm4gZT10aGlzLnJlY3Vyc2UoYS5sZWZ0LCEwLDEpLGY9dGhpcy5yZWN1cnNlKGEucmlnaHQpLGZ1bmN0aW9uKGEsZCxoLHEpe3ZhciBuPWUoYSxkLGgscSk7YT1mKGEsZCxoLHEpO0JhKG4udmFsdWUsZy5leHByZXNzaW9uKTtcbm4uY29udGV4dFtuLm5hbWVdPWE7cmV0dXJuIGM/e3ZhbHVlOmF9OmF9O2Nhc2Ugci5BcnJheUV4cHJlc3Npb246cmV0dXJuIGg9W10sbihhLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe2gucHVzaChnLnJlY3Vyc2UoYSkpfSksZnVuY3Rpb24oYSxkLGUsZil7Zm9yKHZhciBnPVtdLG49MDtuPGgubGVuZ3RoOysrbilnLnB1c2goaFtuXShhLGQsZSxmKSk7cmV0dXJuIGM/e3ZhbHVlOmd9Omd9O2Nhc2Ugci5PYmplY3RFeHByZXNzaW9uOnJldHVybiBoPVtdLG4oYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2gucHVzaCh7a2V5OmEua2V5LnR5cGU9PT1yLklkZW50aWZpZXI/YS5rZXkubmFtZTpcIlwiK2Eua2V5LnZhbHVlLHZhbHVlOmcucmVjdXJzZShhLnZhbHVlKX0pfSksZnVuY3Rpb24oYSxkLGUsZil7Zm9yKHZhciBnPXt9LG49MDtuPGgubGVuZ3RoOysrbilnW2hbbl0ua2V5XT1oW25dLnZhbHVlKGEsZCxlLGYpO3JldHVybiBjP3t2YWx1ZTpnfTpnfTtjYXNlIHIuVGhpc0V4cHJlc3Npb246cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBjP1xue3ZhbHVlOmF9OmF9O2Nhc2Ugci5OR1ZhbHVlUGFyYW1ldGVyOnJldHVybiBmdW5jdGlvbihhLGQsZSxmKXtyZXR1cm4gYz97dmFsdWU6ZX06ZX19fSxcInVuYXJ5K1wiOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcpe2Q9YShkLGUsZixnKTtkPXgoZCk/K2Q6MDtyZXR1cm4gYz97dmFsdWU6ZH06ZH19LFwidW5hcnktXCI6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyl7ZD1hKGQsZSxmLGcpO2Q9eChkKT8tZDowO3JldHVybiBjP3t2YWx1ZTpkfTpkfX0sXCJ1bmFyeSFcIjpmdW5jdGlvbihhLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZixnKXtkPSFhKGQsZSxmLGcpO3JldHVybiBjP3t2YWx1ZTpkfTpkfX0sXCJiaW5hcnkrXCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoKXt2YXIgbD1hKGUsZixnLGgpO2U9YyhlLGYsZyxoKTtsPW1kKGwsZSk7cmV0dXJuIGQ/e3ZhbHVlOmx9Omx9fSxcImJpbmFyeS1cIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsXG5mLGcsaCl7dmFyIGw9YShlLGYsZyxoKTtlPWMoZSxmLGcsaCk7bD0oeChsKT9sOjApLSh4KGUpP2U6MCk7cmV0dXJuIGQ/e3ZhbHVlOmx9Omx9fSxcImJpbmFyeSpcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgpe2U9YShlLGYsZyxoKSpjKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJiaW5hcnkvXCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoKXtlPWEoZSxmLGcsaCkvYyhlLGYsZyxoKTtyZXR1cm4gZD97dmFsdWU6ZX06ZX19LFwiYmluYXJ5JVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpJWMoZSxmLGcsaCk7cmV0dXJuIGQ/e3ZhbHVlOmV9OmV9fSxcImJpbmFyeT09PVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpPT09YyhlLGYsZyxoKTtyZXR1cm4gZD97dmFsdWU6ZX06ZX19LFwiYmluYXJ5IT09XCI6ZnVuY3Rpb24oYSxcbmMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgpe2U9YShlLGYsZyxoKSE9PWMoZSxmLGcsaCk7cmV0dXJuIGQ/e3ZhbHVlOmV9OmV9fSxcImJpbmFyeT09XCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoKXtlPWEoZSxmLGcsaCk9PWMoZSxmLGcsaCk7cmV0dXJuIGQ/e3ZhbHVlOmV9OmV9fSxcImJpbmFyeSE9XCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoKXtlPWEoZSxmLGcsaCkhPWMoZSxmLGcsaCk7cmV0dXJuIGQ/e3ZhbHVlOmV9OmV9fSxcImJpbmFyeTxcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgpe2U9YShlLGYsZyxoKTxjKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJiaW5hcnk+XCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoKXtlPWEoZSxmLGcsaCk+YyhlLGYsZyxoKTtyZXR1cm4gZD97dmFsdWU6ZX06ZX19LFwiYmluYXJ5PD1cIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsXG5mLGcsaCl7ZT1hKGUsZixnLGgpPD1jKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJiaW5hcnk+PVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpPj1jKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJiaW5hcnkmJlwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpJiZjKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJiaW5hcnl8fFwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpfHxjKGUsZixnLGgpO3JldHVybiBkP3t2YWx1ZTplfTplfX0sXCJ0ZXJuYXJ5PzpcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZnVuY3Rpb24oZixnLGgsbCl7Zj1hKGYsZyxoLGwpP2MoZixnLGgsbCk6ZChmLGcsaCxsKTtyZXR1cm4gZT97dmFsdWU6Zn06Zn19LHZhbHVlOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGM/XG57Y29udGV4dDp1LG5hbWU6dSx2YWx1ZTphfTphfX0saWRlbnRpZmllcjpmdW5jdGlvbihhLGMsZCxlLGYpe3JldHVybiBmdW5jdGlvbihnLGgsbCxrKXtnPWgmJmEgaW4gaD9oOmc7ZSYmMSE9PWUmJmcmJiFnW2FdJiYoZ1thXT17fSk7aD1nP2dbYV06dTtjJiZCYShoLGYpO3JldHVybiBkP3tjb250ZXh0OmcsbmFtZTphLHZhbHVlOmh9Omh9fSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGMsZCxlLGYpe3JldHVybiBmdW5jdGlvbihnLGgsbCxrKXt2YXIgbT1hKGcsaCxsLGspLHEsbjtudWxsIT1tJiYocT1jKGcsaCxsLGspLFdhKHEsZiksZSYmMSE9PWUmJm0mJiFtW3FdJiYobVtxXT17fSksbj1tW3FdLEJhKG4sZikpO3JldHVybiBkP3tjb250ZXh0Om0sbmFtZTpxLHZhbHVlOm59Om59fSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGMsZCxlLGYsZyl7cmV0dXJuIGZ1bmN0aW9uKGgsbCxrLG0pe2g9YShoLGwsayxtKTtmJiYxIT09ZiYmaCYmIWhbY10mJihoW2NdPXt9KTtcbmw9bnVsbCE9aD9oW2NdOnU7KGR8fEZiKGMpKSYmQmEobCxnKTtyZXR1cm4gZT97Y29udGV4dDpoLG5hbWU6Yyx2YWx1ZTpsfTpsfX0saW5wdXRzOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcpe3JldHVybiBnP2dbY106YShkLGUsZil9fX07dmFyIGZjPWZ1bmN0aW9uKGEsYyxkKXt0aGlzLmxleGVyPWE7dGhpcy4kZmlsdGVyPWM7dGhpcy5vcHRpb25zPWQ7dGhpcy5hc3Q9bmV3IHIodGhpcy5sZXhlcik7dGhpcy5hc3RDb21waWxlcj1kLmNzcD9uZXcgc2QodGhpcy5hc3QsYyk6bmV3IHJkKHRoaXMuYXN0LGMpfTtmYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmZjLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFzdENvbXBpbGVyLmNvbXBpbGUoYSx0aGlzLm9wdGlvbnMuZXhwZW5zaXZlQ2hlY2tzKX19O2dhKCk7Z2EoKTt2YXIgWWY9T2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mLENhPUcoXCIkc2NlXCIpLG9hPXtIVE1MOlwiaHRtbFwiLENTUzpcImNzc1wiLFVSTDpcInVybFwiLFxuUkVTT1VSQ0VfVVJMOlwicmVzb3VyY2VVcmxcIixKUzpcImpzXCJ9LGVhPUcoXCIkY29tcGlsZVwiKSxaPVcuY3JlYXRlRWxlbWVudChcImFcIiksd2Q9QWEoTi5sb2NhdGlvbi5ocmVmKTt4ZC4kaW5qZWN0PVtcIiRkb2N1bWVudFwiXTtKYy4kaW5qZWN0PVtcIiRwcm92aWRlXCJdO3lkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtBZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07dmFyIERkPVwiLlwiLGhnPXt5eXl5OiQoXCJGdWxsWWVhclwiLDQpLHl5OiQoXCJGdWxsWWVhclwiLDIsMCwhMCkseTokKFwiRnVsbFllYXJcIiwxKSxNTU1NOkhiKFwiTW9udGhcIiksTU1NOkhiKFwiTW9udGhcIiwhMCksTU06JChcIk1vbnRoXCIsMiwxKSxNOiQoXCJNb250aFwiLDEsMSksZGQ6JChcIkRhdGVcIiwyKSxkOiQoXCJEYXRlXCIsMSksSEg6JChcIkhvdXJzXCIsMiksSDokKFwiSG91cnNcIiwxKSxoaDokKFwiSG91cnNcIiwyLC0xMiksaDokKFwiSG91cnNcIiwxLC0xMiksbW06JChcIk1pbnV0ZXNcIiwyKSxtOiQoXCJNaW51dGVzXCIsMSksc3M6JChcIlNlY29uZHNcIiwyKSxzOiQoXCJTZWNvbmRzXCIsXG4xKSxzc3M6JChcIk1pbGxpc2Vjb25kc1wiLDMpLEVFRUU6SGIoXCJEYXlcIiksRUVFOkhiKFwiRGF5XCIsITApLGE6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMTI+YS5nZXRIb3VycygpP2MuQU1QTVNbMF06Yy5BTVBNU1sxXX0sWjpmdW5jdGlvbihhLGMsZCl7YT0tMSpkO3JldHVybiBhPSgwPD1hP1wiK1wiOlwiXCIpKyhHYihNYXRoWzA8YT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK0diKE1hdGguYWJzKGElNjApLDIpKX0sd3c6RmQoMiksdzpGZCgxKSxHOmhjLEdHOmhjLEdHRzpoYyxHR0dHOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIDA+PWEuZ2V0RnVsbFllYXIoKT9jLkVSQU5BTUVTWzBdOmMuRVJBTkFNRVNbMV19fSxnZz0vKCg/OlteeU1kSGhtc2FaRXdHJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafEcrfHcrKSkoLiopLyxmZz0vXlxcLT9cXGQrJC87emQuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBjZz1xYShJKSxkZz1xYShyYik7QmQuJGluamVjdD1cbltcIiRwYXJzZVwiXTt2YXIgaGU9cWEoe3Jlc3RyaWN0OlwiRVwiLGNvbXBpbGU6ZnVuY3Rpb24oYSxjKXtpZighYy5ocmVmJiYhYy54bGlua0hyZWYpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7aWYoXCJhXCI9PT1jWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBmPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXNhLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSk/XCJ4bGluazpocmVmXCI6XCJocmVmXCI7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy5hdHRyKGYpfHxhLnByZXZlbnREZWZhdWx0KCl9KX19fX0pLHNiPXt9O24oQWIsZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKGEsZCxmKXthLiR3YXRjaChmW2VdLGZ1bmN0aW9uKGEpe2YuJHNldChjLCEhYSl9KX1pZihcIm11bHRpcGxlXCIhPWEpe3ZhciBlPXZhKFwibmctXCIrYyksZj1kO1wiY2hlY2tlZFwiPT09YSYmKGY9ZnVuY3Rpb24oYSxjLGYpe2YubmdNb2RlbCE9PWZbZV0mJmQoYSxjLGYpfSk7c2JbZV09ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsXG5wcmlvcml0eToxMDAsbGluazpmfX19fSk7bihTYyxmdW5jdGlvbihhLGMpe3NiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsZSxmKXtpZihcIm5nUGF0dGVyblwiPT09YyYmXCIvXCI9PWYubmdQYXR0ZXJuLmNoYXJBdCgwKSYmKGU9Zi5uZ1BhdHRlcm4ubWF0Y2goamcpKSl7Zi4kc2V0KFwibmdQYXR0ZXJuXCIsbmV3IFJlZ0V4cChlWzFdLGVbMl0pKTtyZXR1cm59YS4kd2F0Y2goZltjXSxmdW5jdGlvbihhKXtmLiRzZXQoYyxhKX0pfX19fSk7bihbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYz12YShcIm5nLVwiK2EpO3NiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWEsaD1hO1wiaHJlZlwiPT09YSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09c2EuY2FsbChlLnByb3AoXCJocmVmXCIpKSYmKGg9XCJ4bGlua0hyZWZcIixmLiRhdHRyW2hdPVwieGxpbms6aHJlZlwiLFxuZz1udWxsKTtmLiRvYnNlcnZlKGMsZnVuY3Rpb24oYyl7Yz8oZi4kc2V0KGgsYyksVmEmJmcmJmUucHJvcChnLGZbaF0pKTpcImhyZWZcIj09PWEmJmYuJHNldChoLG51bGwpfSl9fX19KTt2YXIgSWI9eyRhZGRDb250cm9sOnYsJCRyZW5hbWVDb250cm9sOmZ1bmN0aW9uKGEsYyl7YS4kbmFtZT1jfSwkcmVtb3ZlQ29udHJvbDp2LCRzZXRWYWxpZGl0eTp2LCRzZXREaXJ0eTp2LCRzZXRQcmlzdGluZTp2LCRzZXRTdWJtaXR0ZWQ6dn07R2QuJGluamVjdD1bXCIkZWxlbWVudFwiLFwiJGF0dHJzXCIsXCIkc2NvcGVcIixcIiRhbmltYXRlXCIsXCIkaW50ZXJwb2xhdGVcIl07dmFyIE9kPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsXCIkcGFyc2VcIixmdW5jdGlvbihjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuXCJcIj09PWE/ZCgndGhpc1tcIlwiXScpLmFzc2lnbjpkKGEpLmFzc2lnbnx8dn1yZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIsY29udHJvbGxlcjpHZCxjb21waWxlOmZ1bmN0aW9uKGQsXG5nKXtkLmFkZENsYXNzKFhhKS5hZGRDbGFzcyhsYik7dmFyIGg9Zy5uYW1lP1wibmFtZVwiOmEmJmcubmdGb3JtP1wibmdGb3JtXCI6ITE7cmV0dXJue3ByZTpmdW5jdGlvbihhLGQsZixnKXtpZighKFwiYWN0aW9uXCJpbiBmKSl7dmFyIG49ZnVuY3Rpb24oYyl7YS4kYXBwbHkoZnVuY3Rpb24oKXtnLiRjb21taXRWaWV3VmFsdWUoKTtnLiRzZXRTdWJtaXR0ZWQoKX0pO2MucHJldmVudERlZmF1bHQoKX07ZFswXS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsbiwhMSk7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjKGZ1bmN0aW9uKCl7ZFswXS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsbiwhMSl9LDAsITEpfSl9dmFyIHQ9Zy4kJHBhcmVudEZvcm0scj1oP2UoZy4kbmFtZSk6djtoJiYocihhLGcpLGYuJG9ic2VydmUoaCxmdW5jdGlvbihjKXtnLiRuYW1lIT09YyYmKHIoYSx1KSx0LiQkcmVuYW1lQ29udHJvbChnLGMpLHI9ZShnLiRuYW1lKSxyKGEsZykpfSkpO2Qub24oXCIkZGVzdHJveVwiLFxuZnVuY3Rpb24oKXt0LiRyZW1vdmVDb250cm9sKGcpO3IoYSx1KTtRKGcsSWIpfSl9fX19fV19LGllPU9kKCksdmU9T2QoITApLGlnPS9cXGR7NH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoWystXVswLTJdXFxkOlswLTVdXFxkfFopLyxzZz0vXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLyx0Zz0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSx1Zz0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKShbZUVdWystXT9cXGQrKT9cXHMqJC8sUGQ9L14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvLFFkPS9eKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC8sa2M9L14oXFxkezR9KS1XKFxcZFxcZCkkLyxcblJkPS9eKFxcZHs0fSktKFxcZFxcZCkkLyxTZD0vXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLFRkPXt0ZXh0OmZ1bmN0aW9uKGEsYyxkLGUsZixnKXtpYihhLGMsZCxlLGYsZyk7aWMoZSl9LGRhdGU6amIoXCJkYXRlXCIsUGQsS2IoUGQsW1wieXl5eVwiLFwiTU1cIixcImRkXCJdKSxcInl5eXktTU0tZGRcIiksXCJkYXRldGltZS1sb2NhbFwiOmpiKFwiZGF0ZXRpbWVsb2NhbFwiLFFkLEtiKFFkLFwieXl5eSBNTSBkZCBISCBtbSBzcyBzc3NcIi5zcGxpdChcIiBcIikpLFwieXl5eS1NTS1kZFRISDptbTpzcy5zc3NcIiksdGltZTpqYihcInRpbWVcIixTZCxLYihTZCxbXCJISFwiLFwibW1cIixcInNzXCIsXCJzc3NcIl0pLFwiSEg6bW06c3Muc3NzXCIpLHdlZWs6amIoXCJ3ZWVrXCIsa2MsZnVuY3Rpb24oYSxjKXtpZihjYShhKSlyZXR1cm4gYTtpZihIKGEpKXtrYy5sYXN0SW5kZXg9MDt2YXIgZD1rYy5leGVjKGEpO2lmKGQpe3ZhciBlPStkWzFdLGY9K2RbMl0sZz1kPTAsaD0wLGw9MCxrPUVkKGUpLGY9NyooZi0xKTtcbmMmJihkPWMuZ2V0SG91cnMoKSxnPWMuZ2V0TWludXRlcygpLGg9Yy5nZXRTZWNvbmRzKCksbD1jLmdldE1pbGxpc2Vjb25kcygpKTtyZXR1cm4gbmV3IERhdGUoZSwwLGsuZ2V0RGF0ZSgpK2YsZCxnLGgsbCl9fXJldHVybiBOYU59LFwieXl5eS1Xd3dcIiksbW9udGg6amIoXCJtb250aFwiLFJkLEtiKFJkLFtcInl5eXlcIixcIk1NXCJdKSxcInl5eXktTU1cIiksbnVtYmVyOmZ1bmN0aW9uKGEsYyxkLGUsZixnKXtJZChhLGMsZCxlKTtpYihhLGMsZCxlLGYsZyk7ZS4kJHBhcnNlck5hbWU9XCJudW1iZXJcIjtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSk/bnVsbDp1Zy50ZXN0KGEpP3BhcnNlRmxvYXQoYSk6dX0pO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtpZighZS4kaXNFbXB0eShhKSl7aWYoIVgoYSkpdGhyb3cga2IoXCJudW1mbXRcIixhKTthPWEudG9TdHJpbmcoKX1yZXR1cm4gYX0pO2lmKHgoZC5taW4pfHxkLm5nTWluKXt2YXIgaDtlLiR2YWxpZGF0b3JzLm1pbj1cbmZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHx5KGgpfHxhPj1ofTtkLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7eChhKSYmIVgoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2g9WChhKSYmIWlzTmFOKGEpP2E6dTtlLiR2YWxpZGF0ZSgpfSl9aWYoeChkLm1heCl8fGQubmdNYXgpe3ZhciBsO2UuJHZhbGlkYXRvcnMubWF4PWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHx5KGwpfHxhPD1sfTtkLiRvYnNlcnZlKFwibWF4XCIsZnVuY3Rpb24oYSl7eChhKSYmIVgoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2w9WChhKSYmIWlzTmFOKGEpP2E6dTtlLiR2YWxpZGF0ZSgpfSl9fSx1cmw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe2liKGEsYyxkLGUsZixnKTtpYyhlKTtlLiQkcGFyc2VyTmFtZT1cInVybFwiO2UuJHZhbGlkYXRvcnMudXJsPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9YXx8YztyZXR1cm4gZS4kaXNFbXB0eShkKXx8c2cudGVzdChkKX19LGVtYWlsOmZ1bmN0aW9uKGEsXG5jLGQsZSxmLGcpe2liKGEsYyxkLGUsZixnKTtpYyhlKTtlLiQkcGFyc2VyTmFtZT1cImVtYWlsXCI7ZS4kdmFsaWRhdG9ycy5lbWFpbD1mdW5jdGlvbihhLGMpe3ZhciBkPWF8fGM7cmV0dXJuIGUuJGlzRW1wdHkoZCl8fHRnLnRlc3QoZCl9fSxyYWRpbzpmdW5jdGlvbihhLGMsZCxlKXt5KGQubmFtZSkmJmMuYXR0cihcIm5hbWVcIiwrK21iKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtjWzBdLmNoZWNrZWQmJmUuJHNldFZpZXdWYWx1ZShkLnZhbHVlLGEmJmEudHlwZSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZC52YWx1ZT09ZS4kdmlld1ZhbHVlfTtkLiRvYnNlcnZlKFwidmFsdWVcIixlLiRyZW5kZXIpfSxjaGVja2JveDpmdW5jdGlvbihhLGMsZCxlLGYsZyxoLGwpe3ZhciBrPUpkKGwsYSxcIm5nVHJ1ZVZhbHVlXCIsZC5uZ1RydWVWYWx1ZSwhMCksbT1KZChsLGEsXCJuZ0ZhbHNlVmFsdWVcIixkLm5nRmFsc2VWYWx1ZSwhMSk7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7ZS4kc2V0Vmlld1ZhbHVlKGNbMF0uY2hlY2tlZCxcbmEmJmEudHlwZSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZS4kdmlld1ZhbHVlfTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiExPT09YX07ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBrYShhLGspfSk7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhP2s6bX0pfSxoaWRkZW46dixidXR0b246dixzdWJtaXQ6dixyZXNldDp2LGZpbGU6dn0sRGM9W1wiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsXCIkZmlsdGVyXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCI/bmdNb2RlbFwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oZixnLGgsbCl7bFswXSYmKFRkW0koaC50eXBlKV18fFRkLnRleHQpKGYsZyxoLGxbMF0sYyxhLGQsZSl9fX19XSx2Zz0vXih0cnVlfGZhbHNlfFxcZCspJC8sTmU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oYSxcbmMpe3JldHVybiB2Zy50ZXN0KGMubmdWYWx1ZSk/ZnVuY3Rpb24oYSxjLGYpe2YuJHNldChcInZhbHVlXCIsYS4kZXZhbChmLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxjLGYpe2EuJHdhdGNoKGYubmdWYWx1ZSxmdW5jdGlvbihhKXtmLiRzZXQoXCJ2YWx1ZVwiLGEpfSl9fX19LG5lPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixjb21waWxlOmZ1bmN0aW9uKGMpe2EuJCRhZGRCaW5kaW5nQ2xhc3MoYyk7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmKXthLiQkYWRkQmluZGluZ0luZm8oZSxmLm5nQmluZCk7ZT1lWzBdO2MuJHdhdGNoKGYubmdCaW5kLGZ1bmN0aW9uKGEpe2UudGV4dENvbnRlbnQ9YT09PXU/XCJcIjphfSl9fX19XSxwZT1bXCIkaW50ZXJwb2xhdGVcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihkKXtjLiQkYWRkQmluZGluZ0NsYXNzKGQpO3JldHVybiBmdW5jdGlvbihkLGYsZyl7ZD1hKGYuYXR0cihnLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7XG5jLiQkYWRkQmluZGluZ0luZm8oZixkLmV4cHJlc3Npb25zKTtmPWZbMF07Zy4kb2JzZXJ2ZShcIm5nQmluZFRlbXBsYXRlXCIsZnVuY3Rpb24oYSl7Zi50ZXh0Q29udGVudD1hPT09dT9cIlwiOmF9KX19fX1dLG9lPVtcIiRzY2VcIixcIiRwYXJzZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGMsZCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oZSxmKXt2YXIgZz1jKGYubmdCaW5kSHRtbCksaD1jKGYubmdCaW5kSHRtbCxmdW5jdGlvbihhKXtyZXR1cm4oYXx8XCJcIikudG9TdHJpbmcoKX0pO2QuJCRhZGRCaW5kaW5nQ2xhc3MoZSk7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmKXtkLiQkYWRkQmluZGluZ0luZm8oZSxmLm5nQmluZEh0bWwpO2MuJHdhdGNoKGgsZnVuY3Rpb24oKXtlLmh0bWwoYS5nZXRUcnVzdGVkSHRtbChnKGMpKXx8XCJcIil9KX19fX1dLE1lPXFhKHtyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7ZS4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7YS4kZXZhbChkLm5nQ2hhbmdlKX0pfX0pLFxucWU9amMoXCJcIiwhMCksc2U9amMoXCJPZGRcIiwwKSxyZT1qYyhcIkV2ZW5cIiwxKSx0ZT1NYSh7Y29tcGlsZTpmdW5jdGlvbihhLGMpe2MuJHNldChcIm5nQ2xvYWtcIix1KTthLnJlbW92ZUNsYXNzKFwibmctY2xvYWtcIil9fSksdWU9W2Z1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6XCJAXCIscHJpb3JpdHk6NTAwfX1dLEljPXt9LHdnPXtibHVyOiEwLGZvY3VzOiEwfTtuKFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXt2YXIgYz12YShcIm5nLVwiK2EpO0ljW2NdPVtcIiRwYXJzZVwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGQsZSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oZixnKXt2YXIgaD1cbmQoZ1tjXSxudWxsLCEwKTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGY9ZnVuY3Rpb24oKXtoKGMseyRldmVudDpkfSl9O3dnW2FdJiZlLiQkcGhhc2U/Yy4kZXZhbEFzeW5jKGYpOmMuJGFwcGx5KGYpfSl9fX19XX0pO3ZhciB4ZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybnttdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo2MDAsdGVybWluYWw6ITAscmVzdHJpY3Q6XCJBXCIsJCR0bGI6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmLGcpe3ZhciBoLGwsaztjLiR3YXRjaChlLm5nSWYsZnVuY3Rpb24oYyl7Yz9sfHxnKGZ1bmN0aW9uKGMsZil7bD1mO2NbYy5sZW5ndGgrK109Vy5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ0lmOiBcIitlLm5nSWYrXCIgXCIpO2g9e2Nsb25lOmN9O2EuZW50ZXIoYyxkLnBhcmVudCgpLGQpfSk6KGsmJihrLnJlbW92ZSgpLGs9bnVsbCksbCYmKGwuJGRlc3Ryb3koKSxsPW51bGwpLGgmJihrPVxucWIoaC5jbG9uZSksYS5sZWF2ZShrKS50aGVuKGZ1bmN0aW9uKCl7az1udWxsfSksaD1udWxsKSl9KX19fV0seWU9W1wiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJGFuY2hvclNjcm9sbFwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMsZCl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjphYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oZSxmKXt2YXIgZz1mLm5nSW5jbHVkZXx8Zi5zcmMsaD1mLm9ubG9hZHx8XCJcIixsPWYuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oZSxmLG4scyxyKXt2YXIgdT0wLHYsdyxwLEE9ZnVuY3Rpb24oKXt3JiYody5yZW1vdmUoKSx3PW51bGwpO3YmJih2LiRkZXN0cm95KCksdj1udWxsKTtwJiYoZC5sZWF2ZShwKS50aGVuKGZ1bmN0aW9uKCl7dz1udWxsfSksdz1wLHA9bnVsbCl9O2UuJHdhdGNoKGcsZnVuY3Rpb24oZyl7dmFyIG49ZnVuY3Rpb24oKXsheChsKXx8bCYmIWUuJGV2YWwobCl8fFxuYygpfSxxPSsrdTtnPyhhKGcsITApLnRoZW4oZnVuY3Rpb24oYSl7aWYocT09PXUpe3ZhciBjPWUuJG5ldygpO3MudGVtcGxhdGU9YTthPXIoYyxmdW5jdGlvbihhKXtBKCk7ZC5lbnRlcihhLG51bGwsZikudGhlbihuKX0pO3Y9YztwPWE7di4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiLGcpO2UuJGV2YWwoaCl9fSxmdW5jdGlvbigpe3E9PT11JiYoQSgpLGUuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRFcnJvclwiLGcpKX0pLGUuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIixnKSk6KEEoKSxzLnRlbXBsYXRlPW51bGwpfSl9fX19XSxQZT1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5Oi00MDAscmVxdWlyZTpcIm5nSW5jbHVkZVwiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7L1NWRy8udGVzdChkWzBdLnRvU3RyaW5nKCkpPyhkLmVtcHR5KCksYShMYyhmLnRlbXBsYXRlLFcpLmNoaWxkTm9kZXMpKGMsZnVuY3Rpb24oYSl7ZC5hcHBlbmQoYSl9LFxue2Z1dHVyZVBhcmVudEVsZW1lbnQ6ZH0pKTooZC5odG1sKGYudGVtcGxhdGUpLGEoZC5jb250ZW50cygpKShjKSl9fX1dLHplPU1hKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksTGU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1jLmF0dHIoZC4kYXR0ci5uZ0xpc3QpfHxcIiwgXCIsZz1cImZhbHNlXCIhPT1kLm5nVHJpbSxoPWc/VChmKTpmO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZigheShhKSl7dmFyIGM9W107YSYmbihhLnNwbGl0KGgpLGZ1bmN0aW9uKGEpe2EmJmMucHVzaChnP1QoYSk6YSl9KTtyZXR1cm4gY319KTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSk/YS5qb2luKGYpOnV9KTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHxcbiFhLmxlbmd0aH19fX0sbGI9XCJuZy12YWxpZFwiLEtkPVwibmctaW52YWxpZFwiLFhhPVwibmctcHJpc3RpbmVcIixKYj1cIm5nLWRpcnR5XCIsTWQ9XCJuZy1wZW5kaW5nXCIsa2I9RyhcIm5nTW9kZWxcIikseGc9W1wiJHNjb3BlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGF0dHJzXCIsXCIkZWxlbWVudFwiLFwiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLFwiJHRpbWVvdXRcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhLGMsZCxlLGYsZyxoLGwsayxtKXt0aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJCRyYXdNb2RlbFZhbHVlPXU7dGhpcy4kdmFsaWRhdG9ycz17fTt0aGlzLiRhc3luY1ZhbGlkYXRvcnM9e307dGhpcy4kcGFyc2Vycz1bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kdW50b3VjaGVkPSEwO3RoaXMuJHRvdWNoZWQ9ITE7dGhpcy4kcHJpc3RpbmU9ITA7dGhpcy4kZGlydHk9ITE7XG50aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJGVycm9yPXt9O3RoaXMuJCRzdWNjZXNzPXt9O3RoaXMuJHBlbmRpbmc9dTt0aGlzLiRuYW1lPW0oZC5uYW1lfHxcIlwiLCExKShhKTt2YXIgcT1mKGQubmdNb2RlbCkscz1xLmFzc2lnbixyPXEsRT1zLEw9bnVsbCx3LHA9dGhpczt0aGlzLiQkc2V0T3B0aW9ucz1mdW5jdGlvbihhKXtpZigocC4kb3B0aW9ucz1hKSYmYS5nZXR0ZXJTZXR0ZXIpe3ZhciBjPWYoZC5uZ01vZGVsK1wiKClcIiksZz1mKGQubmdNb2RlbCtcIigkJCRwKVwiKTtyPWZ1bmN0aW9uKGEpe3ZhciBkPXEoYSk7QihkKSYmKGQ9YyhhKSk7cmV0dXJuIGR9O0U9ZnVuY3Rpb24oYSxjKXtCKHEoYSkpP2coYSx7JCQkcDpwLiRtb2RlbFZhbHVlfSk6cyhhLHAuJG1vZGVsVmFsdWUpfX1lbHNlIGlmKCFxLmFzc2lnbil0aHJvdyBrYihcIm5vbmFzc2lnblwiLGQubmdNb2RlbCx1YShlKSk7fTt0aGlzLiRyZW5kZXI9djt0aGlzLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpfHxcblwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9O3ZhciBBPWUuaW5oZXJpdGVkRGF0YShcIiRmb3JtQ29udHJvbGxlclwiKXx8SWIsej0wO0hkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6ZSxzZXQ6ZnVuY3Rpb24oYSxjKXthW2NdPSEwfSx1bnNldDpmdW5jdGlvbihhLGMpe2RlbGV0ZSBhW2NdfSxwYXJlbnRGb3JtOkEsJGFuaW1hdGU6Z30pO3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7cC4kZGlydHk9ITE7cC4kcHJpc3RpbmU9ITA7Zy5yZW1vdmVDbGFzcyhlLEpiKTtnLmFkZENsYXNzKGUsWGEpfTt0aGlzLiRzZXREaXJ0eT1mdW5jdGlvbigpe3AuJGRpcnR5PSEwO3AuJHByaXN0aW5lPSExO2cucmVtb3ZlQ2xhc3MoZSxYYSk7Zy5hZGRDbGFzcyhlLEpiKTtBLiRzZXREaXJ0eSgpfTt0aGlzLiRzZXRVbnRvdWNoZWQ9ZnVuY3Rpb24oKXtwLiR0b3VjaGVkPSExO3AuJHVudG91Y2hlZD0hMDtnLnNldENsYXNzKGUsXCJuZy11bnRvdWNoZWRcIixcIm5nLXRvdWNoZWRcIil9O3RoaXMuJHNldFRvdWNoZWQ9XG5mdW5jdGlvbigpe3AuJHRvdWNoZWQ9ITA7cC4kdW50b3VjaGVkPSExO2cuc2V0Q2xhc3MoZSxcIm5nLXRvdWNoZWRcIixcIm5nLXVudG91Y2hlZFwiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtoLmNhbmNlbChMKTtwLiR2aWV3VmFsdWU9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7cC4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIVgocC4kbW9kZWxWYWx1ZSl8fCFpc05hTihwLiRtb2RlbFZhbHVlKSl7dmFyIGE9cC4kJHJhd01vZGVsVmFsdWUsYz1wLiR2YWxpZCxkPXAuJG1vZGVsVmFsdWUsZT1wLiRvcHRpb25zJiZwLiRvcHRpb25zLmFsbG93SW52YWxpZDtwLiQkcnVuVmFsaWRhdG9ycyhhLHAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLGZ1bmN0aW9uKGYpe2V8fGM9PT1mfHwocC4kbW9kZWxWYWx1ZT1mP2E6dSxwLiRtb2RlbFZhbHVlIT09ZCYmcC4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9fTt0aGlzLiQkcnVuVmFsaWRhdG9ycz1cbmZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKCl7dmFyIGQ9ITA7bihwLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGUsZil7dmFyIGg9ZShhLGMpO2Q9ZCYmaDtnKGYsaCl9KTtyZXR1cm4gZD8hMDoobihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxjKXtnKGMsbnVsbCl9KSwhMSl9ZnVuY3Rpb24gZigpe3ZhciBkPVtdLGU9ITA7bihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oZixoKXt2YXIgaz1mKGEsYyk7aWYoIWt8fCFCKGsudGhlbikpdGhyb3cga2IoXCIkYXN5bmNWYWxpZGF0b3JzXCIsayk7ZyhoLHUpO2QucHVzaChrLnRoZW4oZnVuY3Rpb24oKXtnKGgsITApfSxmdW5jdGlvbihhKXtlPSExO2coaCwhMSl9KSl9KTtkLmxlbmd0aD9rLmFsbChkKS50aGVuKGZ1bmN0aW9uKCl7aChlKX0sdik6aCghMCl9ZnVuY3Rpb24gZyhhLGMpe2w9PT16JiZwLiRzZXRWYWxpZGl0eShhLGMpfWZ1bmN0aW9uIGgoYSl7bD09PXomJmQoYSl9eisrO3ZhciBsPXo7KGZ1bmN0aW9uKCl7dmFyIGE9XG5wLiQkcGFyc2VyTmFtZXx8XCJwYXJzZVwiO2lmKHc9PT11KWcoYSxudWxsKTtlbHNlIHJldHVybiB3fHwobihwLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGEsYyl7ZyhjLG51bGwpfSksbihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxjKXtnKGMsbnVsbCl9KSksZyhhLHcpLHc7cmV0dXJuITB9KSgpP2UoKT9mKCk6aCghMSk6aCghMSl9O3RoaXMuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPXAuJHZpZXdWYWx1ZTtoLmNhbmNlbChMKTtpZihwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSE9PWF8fFwiXCI9PT1hJiZwLiQkaGFzTmF0aXZlVmFsaWRhdG9ycylwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1hLHAuJHByaXN0aW5lJiZ0aGlzLiRzZXREaXJ0eSgpLHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCl9O3RoaXMuJCRwYXJzZUFuZFZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIGM9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7aWYodz15KGMpP3U6ITApZm9yKHZhciBkPVxuMDtkPHAuJHBhcnNlcnMubGVuZ3RoO2QrKylpZihjPXAuJHBhcnNlcnNbZF0oYykseShjKSl7dz0hMTticmVha31YKHAuJG1vZGVsVmFsdWUpJiZpc05hTihwLiRtb2RlbFZhbHVlKSYmKHAuJG1vZGVsVmFsdWU9cihhKSk7dmFyIGU9cC4kbW9kZWxWYWx1ZSxmPXAuJG9wdGlvbnMmJnAuJG9wdGlvbnMuYWxsb3dJbnZhbGlkO3AuJCRyYXdNb2RlbFZhbHVlPWM7ZiYmKHAuJG1vZGVsVmFsdWU9YyxwLiRtb2RlbFZhbHVlIT09ZSYmcC4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpO3AuJCRydW5WYWxpZGF0b3JzKGMscC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZnVuY3Rpb24oYSl7Znx8KHAuJG1vZGVsVmFsdWU9YT9jOnUscC4kbW9kZWxWYWx1ZSE9PWUmJnAuJCR3cml0ZU1vZGVsVG9TY29wZSgpKX0pfTt0aGlzLiQkd3JpdGVNb2RlbFRvU2NvcGU9ZnVuY3Rpb24oKXtFKGEscC4kbW9kZWxWYWx1ZSk7bihwLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGEpe3RyeXthKCl9Y2F0Y2goZCl7YyhkKX19KX07XG50aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxjKXtwLiR2aWV3VmFsdWU9YTtwLiRvcHRpb25zJiYhcC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHAuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChjKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGMpe3ZhciBkPTAsZT1wLiRvcHRpb25zO2UmJngoZS5kZWJvdW5jZSkmJihlPWUuZGVib3VuY2UsWChlKT9kPWU6WChlW2NdKT9kPWVbY106WChlW1wiZGVmYXVsdFwiXSkmJihkPWVbXCJkZWZhdWx0XCJdKSk7aC5jYW5jZWwoTCk7ZD9MPWgoZnVuY3Rpb24oKXtwLiRjb21taXRWaWV3VmFsdWUoKX0sZCk6bC4kJHBoYXNlP3AuJGNvbW1pdFZpZXdWYWx1ZSgpOmEuJGFwcGx5KGZ1bmN0aW9uKCl7cC4kY29tbWl0Vmlld1ZhbHVlKCl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYz1yKGEpO2lmKGMhPT1wLiRtb2RlbFZhbHVlJiYocC4kbW9kZWxWYWx1ZT09PXAuJG1vZGVsVmFsdWV8fGM9PT1jKSl7cC4kbW9kZWxWYWx1ZT1cbnAuJCRyYXdNb2RlbFZhbHVlPWM7dz11O2Zvcih2YXIgZD1wLiRmb3JtYXR0ZXJzLGU9ZC5sZW5ndGgsZj1jO2UtLTspZj1kW2VdKGYpO3AuJHZpZXdWYWx1ZSE9PWYmJihwLiR2aWV3VmFsdWU9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU9ZixwLiRyZW5kZXIoKSxwLiQkcnVuVmFsaWRhdG9ycyhjLGYsdikpfXJldHVybiBjfSl9XSxLZT1bXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9mb3JtXCIsXCJeP25nTW9kZWxPcHRpb25zXCJdLGNvbnRyb2xsZXI6eGcscHJpb3JpdHk6MSxjb21waWxlOmZ1bmN0aW9uKGMpe2MuYWRkQ2xhc3MoWGEpLmFkZENsYXNzKFwibmctdW50b3VjaGVkXCIpLmFkZENsYXNzKGxiKTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxmLGcpe3ZhciBoPWdbMF0sbD1nWzFdfHxJYjtoLiQkc2V0T3B0aW9ucyhnWzJdJiZnWzJdLiRvcHRpb25zKTtsLiRhZGRDb250cm9sKGgpO2YuJG9ic2VydmUoXCJuYW1lXCIsXG5mdW5jdGlvbihhKXtoLiRuYW1lIT09YSYmbC4kJHJlbmFtZUNvbnRyb2woaCxhKX0pO2EuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2wuJHJlbW92ZUNvbnRyb2woaCl9KX0scG9zdDpmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1nWzBdO2lmKGguJG9wdGlvbnMmJmguJG9wdGlvbnMudXBkYXRlT24pZS5vbihoLiRvcHRpb25zLnVwZGF0ZU9uLGZ1bmN0aW9uKGEpe2guJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChhJiZhLnR5cGUpfSk7ZS5vbihcImJsdXJcIixmdW5jdGlvbihlKXtoLiR0b3VjaGVkfHwoYS4kJHBoYXNlP2MuJGV2YWxBc3luYyhoLiRzZXRUb3VjaGVkKTpjLiRhcHBseShoLiRzZXRUb3VjaGVkKSl9KX19fX19XSx5Zz0vKFxccyt8XilkZWZhdWx0KFxccyt8JCkvLE9lPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXM7dGhpcy4kb3B0aW9ucz1mYShhLiRldmFsKGMubmdNb2RlbE9wdGlvbnMpKTtcbnRoaXMuJG9wdGlvbnMudXBkYXRlT24hPT11Pyh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMSx0aGlzLiRvcHRpb25zLnVwZGF0ZU9uPVQodGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKHlnLGZ1bmN0aW9uKCl7ZC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITA7cmV0dXJuXCIgXCJ9KSkpOnRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSEwfV19fSxBZT1NYSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSksemc9RyhcIm5nT3B0aW9uc1wiKSxBZz0vXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZGlzYWJsZVxccyt3aGVuXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XSopfCg/OlxcKFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKixcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLyxcbkllPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGQoYSxkLGUpe2Z1bmN0aW9uIGYoYSxjLGQsZSxnKXt0aGlzLnNlbGVjdFZhbHVlPWE7dGhpcy52aWV3VmFsdWU9Yzt0aGlzLmxhYmVsPWQ7dGhpcy5ncm91cD1lO3RoaXMuZGlzYWJsZWQ9Z31mdW5jdGlvbiBtKGEpe3ZhciBjO2lmKCFyJiZEYShhKSljPWE7ZWxzZXtjPVtdO2Zvcih2YXIgZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJlwiJFwiIT09ZC5jaGFyQXQoMCkmJmMucHVzaChkKX1yZXR1cm4gY312YXIgbj1hLm1hdGNoKEFnKTtpZighbil0aHJvdyB6ZyhcImlleHBcIixhLHVhKGQpKTt2YXIgcz1uWzVdfHxuWzddLHI9bls2XTthPS8gYXMgLy50ZXN0KG5bMF0pJiZuWzFdO3ZhciB1PW5bOV07ZD1jKG5bMl0/blsxXTpzKTt2YXIgdj1hJiZjKGEpfHxkLHc9dSYmYyh1KSxwPXU/ZnVuY3Rpb24oYSxjKXtyZXR1cm4gdyhlLGMpfTpmdW5jdGlvbihhKXtyZXR1cm4gR2EoYSl9LEE9ZnVuY3Rpb24oYSxcbmMpe3JldHVybiBwKGEsQihhLGMpKX0seD1jKG5bMl18fG5bMV0pLHo9YyhuWzNdfHxcIlwiKSx5PWMobls0XXx8XCJcIiksSj1jKG5bOF0pLEY9e30sQj1yP2Z1bmN0aW9uKGEsYyl7RltyXT1jO0Zbc109YTtyZXR1cm4gRn06ZnVuY3Rpb24oYSl7RltzXT1hO3JldHVybiBGfTtyZXR1cm57dHJhY2tCeTp1LGdldFRyYWNrQnlWYWx1ZTpBLGdldFdhdGNoYWJsZXM6YyhKLGZ1bmN0aW9uKGEpe3ZhciBjPVtdO2E9YXx8W107Zm9yKHZhciBkPW0oYSksZj1kLmxlbmd0aCxnPTA7ZzxmO2crKyl7dmFyIGg9YT09PWQ/ZzpkW2ddLGs9QihhW2hdLGgpLGg9cChhW2hdLGspO2MucHVzaChoKTtpZihuWzJdfHxuWzFdKWg9eChlLGspLGMucHVzaChoKTtuWzRdJiYoaz15KGUsayksYy5wdXNoKGspKX1yZXR1cm4gY30pLGdldE9wdGlvbnM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYz17fSxkPUooZSl8fFtdLGc9bShkKSxoPWcubGVuZ3RoLG49MDtuPGg7bisrKXt2YXIgcT1kPT09Zz9uOmdbbl0scz1cbkIoZFtxXSxxKSxyPXYoZSxzKSxxPXAocixzKSx0PXgoZSxzKSx3PXooZSxzKSxzPXkoZSxzKSxyPW5ldyBmKHEscix0LHcscyk7YS5wdXNoKHIpO2NbcV09cn1yZXR1cm57aXRlbXM6YSxzZWxlY3RWYWx1ZU1hcDpjLGdldE9wdGlvbkZyb21WaWV3VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGNbQShhKV19LGdldFZpZXdWYWx1ZUZyb21PcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHU/YWEuY29weShhLnZpZXdWYWx1ZSk6YS52aWV3VmFsdWV9fX19fXZhciBlPVcuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSxmPVcuY3JlYXRlRWxlbWVudChcIm9wdGdyb3VwXCIpO3JldHVybntyZXN0cmljdDpcIkFcIix0ZXJtaW5hbDohMCxyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sbGluazpmdW5jdGlvbihjLGgsbCxrKXtmdW5jdGlvbiBtKGEsYyl7YS5lbGVtZW50PWM7Yy5kaXNhYmxlZD1hLmRpc2FibGVkO2EudmFsdWUhPT1jLnZhbHVlJiYoYy52YWx1ZT1hLnNlbGVjdFZhbHVlKTthLmxhYmVsIT09XG5jLmxhYmVsJiYoYy5sYWJlbD1hLmxhYmVsLGMudGV4dENvbnRlbnQ9YS5sYWJlbCl9ZnVuY3Rpb24gcShhLGMsZCxlKXtjJiZJKGMubm9kZU5hbWUpPT09ZD9kPWM6KGQ9ZS5jbG9uZU5vZGUoITEpLGM/YS5pbnNlcnRCZWZvcmUoZCxjKTphLmFwcGVuZENoaWxkKGQpKTtyZXR1cm4gZH1mdW5jdGlvbiBzKGEpe2Zvcih2YXIgYzthOyljPWEubmV4dFNpYmxpbmcsV2IoYSksYT1jfWZ1bmN0aW9uIHIoYSl7dmFyIGM9cCYmcFswXSxkPUomJkpbMF07aWYoY3x8ZClmb3IoO2EmJihhPT09Y3x8YT09PWQpOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gdSgpe3ZhciBhPUYmJncucmVhZFZhbHVlKCk7Rj1ELmdldE9wdGlvbnMoKTt2YXIgYz17fSxkPWhbMF0uZmlyc3RDaGlsZDtPJiZoLnByZXBlbmQocCk7ZD1yKGQpO0YuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgZyxrO2EuZ3JvdXA/KGc9Y1thLmdyb3VwXSxnfHwoZz1xKGhbMF0sZCxcIm9wdGdyb3VwXCIsZiksZD1cbmcubmV4dFNpYmxpbmcsZy5sYWJlbD1hLmdyb3VwLGc9Y1thLmdyb3VwXT17Z3JvdXBFbGVtZW50OmcsY3VycmVudE9wdGlvbkVsZW1lbnQ6Zy5maXJzdENoaWxkfSksaz1xKGcuZ3JvdXBFbGVtZW50LGcuY3VycmVudE9wdGlvbkVsZW1lbnQsXCJvcHRpb25cIixlKSxtKGEsayksZy5jdXJyZW50T3B0aW9uRWxlbWVudD1rLm5leHRTaWJsaW5nKTooaz1xKGhbMF0sZCxcIm9wdGlvblwiLGUpLG0oYSxrKSxkPWsubmV4dFNpYmxpbmcpfSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbihhKXtzKGNbYV0uY3VycmVudE9wdGlvbkVsZW1lbnQpfSk7cyhkKTt2LiRyZW5kZXIoKTtpZighdi4kaXNFbXB0eShhKSl7dmFyIGc9dy5yZWFkVmFsdWUoKTsoRC50cmFja0J5P2thKGEsZyk6YT09PWcpfHwodi4kc2V0Vmlld1ZhbHVlKGcpLHYuJHJlbmRlcigpKX19dmFyIHY9a1sxXTtpZih2KXt2YXIgdz1rWzBdO2s9bC5tdWx0aXBsZTtmb3IodmFyIHAseD0wLHk9aC5jaGlsZHJlbigpLEI9eS5sZW5ndGg7eDxcbkI7eCsrKWlmKFwiXCI9PT15W3hdLnZhbHVlKXtwPXkuZXEoeCk7YnJlYWt9dmFyIE89ISFwLEo9eihlLmNsb25lTm9kZSghMSkpO0oudmFsKFwiP1wiKTt2YXIgRixEPWQobC5uZ09wdGlvbnMsaCxjKTtrPyh2LiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9LHcud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXtGLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oYSl7YS5lbGVtZW50LnNlbGVjdGVkPSExfSk7YSYmYS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyhhPUYuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZShhKSkmJiFhLmRpc2FibGVkJiYoYS5lbGVtZW50LnNlbGVjdGVkPSEwKX0pfSx3LnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPWgudmFsKCl8fFtdLGM9W107bihhLGZ1bmN0aW9uKGEpeyhhPUYuc2VsZWN0VmFsdWVNYXBbYV0pJiYhYS5kaXNhYmxlZCYmYy5wdXNoKEYuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSl9KTtyZXR1cm4gY30sRC50cmFja0J5JiZjLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtpZihLKHYuJHZpZXdWYWx1ZSkpcmV0dXJuIHYuJHZpZXdWYWx1ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEQuZ2V0VHJhY2tCeVZhbHVlKGEpfSl9LFxuZnVuY3Rpb24oKXt2LiRyZW5kZXIoKX0pKToody53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe3ZhciBjPUYuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZShhKTtjJiYhYy5kaXNhYmxlZD9oWzBdLnZhbHVlIT09Yy5zZWxlY3RWYWx1ZSYmKEoucmVtb3ZlKCksT3x8cC5yZW1vdmUoKSxoWzBdLnZhbHVlPWMuc2VsZWN0VmFsdWUsYy5lbGVtZW50LnNlbGVjdGVkPSEwLGMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLFwic2VsZWN0ZWRcIikpOm51bGw9PT1hfHxPPyhKLnJlbW92ZSgpLE98fGgucHJlcGVuZChwKSxoLnZhbChcIlwiKSxwLnByb3AoXCJzZWxlY3RlZFwiLCEwKSxwLmF0dHIoXCJzZWxlY3RlZFwiLCEwKSk6KE98fHAucmVtb3ZlKCksaC5wcmVwZW5kKEopLGgudmFsKFwiP1wiKSxKLnByb3AoXCJzZWxlY3RlZFwiLCEwKSxKLmF0dHIoXCJzZWxlY3RlZFwiLCEwKSl9LHcucmVhZFZhbHVlPWZ1bmN0aW9uKCl7dmFyIGE9Ri5zZWxlY3RWYWx1ZU1hcFtoLnZhbCgpXTtyZXR1cm4gYSYmIWEuZGlzYWJsZWQ/XG4oT3x8cC5yZW1vdmUoKSxKLnJlbW92ZSgpLEYuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSk6bnVsbH0sRC50cmFja0J5JiZjLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBELmdldFRyYWNrQnlWYWx1ZSh2LiR2aWV3VmFsdWUpfSxmdW5jdGlvbigpe3YuJHJlbmRlcigpfSkpO08/KHAucmVtb3ZlKCksYShwKShjKSxwLnJlbW92ZUNsYXNzKFwibmctc2NvcGVcIikpOnA9eihlLmNsb25lTm9kZSghMSkpO3UoKTtjLiR3YXRjaENvbGxlY3Rpb24oRC5nZXRXYXRjaGFibGVzLHUpfX19fV0sQmU9W1wiJGxvY2FsZVwiLFwiJGludGVycG9sYXRlXCIsXCIkbG9nXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBlPS97fS9nLGY9L153aGVuKE1pbnVzKT8oLispJC87cmV0dXJue2xpbms6ZnVuY3Rpb24oZyxoLGwpe2Z1bmN0aW9uIGsoYSl7aC50ZXh0KGF8fFwiXCIpfXZhciBtPWwuY291bnQscT1sLiRhdHRyLndoZW4mJmguYXR0cihsLiRhdHRyLndoZW4pLHM9bC5vZmZzZXR8fDAscj1nLiRldmFsKHEpfHx7fSx1PVxue30seD1jLnN0YXJ0U3ltYm9sKCksdz1jLmVuZFN5bWJvbCgpLHA9eCttK1wiLVwiK3MrdyxBPWFhLm5vb3AsejtuKGwsZnVuY3Rpb24oYSxjKXt2YXIgZD1mLmV4ZWMoYyk7ZCYmKGQ9KGRbMV0/XCItXCI6XCJcIikrSShkWzJdKSxyW2RdPWguYXR0cihsLiRhdHRyW2NdKSl9KTtuKHIsZnVuY3Rpb24oYSxkKXt1W2RdPWMoYS5yZXBsYWNlKGUscCkpfSk7Zy4kd2F0Y2gobSxmdW5jdGlvbihjKXt2YXIgZT1wYXJzZUZsb2F0KGMpLGY9aXNOYU4oZSk7Znx8ZSBpbiByfHwoZT1hLnBsdXJhbENhdChlLXMpKTtlPT09enx8ZiYmWCh6KSYmaXNOYU4oeil8fChBKCksZj11W2VdLHkoZik/KG51bGwhPWMmJmQuZGVidWcoXCJuZ1BsdXJhbGl6ZTogbm8gcnVsZSBkZWZpbmVkIGZvciAnXCIrZStcIicgaW4gXCIrcSksQT12LGsoKSk6QT1nLiR3YXRjaChmLGspLHo9ZSl9KX19fV0sQ2U9W1wiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9RyhcIm5nUmVwZWF0XCIpLGU9ZnVuY3Rpb24oYSxjLFxuZCxlLGssbSxuKXthW2RdPWU7ayYmKGFba109bSk7YS4kaW5kZXg9YzthLiRmaXJzdD0wPT09YzthLiRsYXN0PWM9PT1uLTE7YS4kbWlkZGxlPSEoYS4kZmlyc3R8fGEuJGxhc3QpO2EuJG9kZD0hKGEuJGV2ZW49MD09PShjJjEpKX07cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjFFMyx0ZXJtaW5hbDohMCwkJHRsYjohMCxjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGg9Zy5uZ1JlcGVhdCxsPVcuY3JlYXRlQ29tbWVudChcIiBlbmQgbmdSZXBlYXQ6IFwiK2grXCIgXCIpLGs9aC5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtpZighayl0aHJvdyBkKFwiaWV4cFwiLGgpO3ZhciBtPWtbMV0scT1rWzJdLHI9a1szXSx0PWtbNF0saz1tLm1hdGNoKC9eKD86KFxccypbXFwkXFx3XSspfFxcKFxccyooW1xcJFxcd10rKVxccyosXFxzKihbXFwkXFx3XSspXFxzKlxcKSkkLyk7XG5pZighayl0aHJvdyBkKFwiaWlkZXhwXCIsbSk7dmFyIHY9a1szXXx8a1sxXSx4PWtbMl07aWYociYmKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3Qocil8fC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdChyKSkpdGhyb3cgZChcImJhZGlkZW50XCIscik7dmFyIHcscCxBLHksQj17JGlkOkdhfTt0P3c9YSh0KTooQT1mdW5jdGlvbihhLGMpe3JldHVybiBHYShjKX0seT1mdW5jdGlvbihhKXtyZXR1cm4gYX0pO3JldHVybiBmdW5jdGlvbihhLGYsZyxrLG0pe3cmJihwPWZ1bmN0aW9uKGMsZCxlKXt4JiYoQlt4XT1jKTtCW3ZdPWQ7Qi4kaW5kZXg9ZTtyZXR1cm4gdyhhLEIpfSk7dmFyIHQ9Z2EoKTthLiR3YXRjaENvbGxlY3Rpb24ocSxmdW5jdGlvbihnKXt2YXIgayxxLHc9ZlswXSxCLEQ9Z2EoKSxGLEgsSyxHLE0sSSxOO3ImJihhW3JdPWcpO2lmKERhKGcpKU09XG5nLHE9cHx8QTtlbHNlIGZvcihOIGluIHE9cHx8eSxNPVtdLGcpZy5oYXNPd25Qcm9wZXJ0eShOKSYmXCIkXCIhPT1OLmNoYXJBdCgwKSYmTS5wdXNoKE4pO0Y9TS5sZW5ndGg7Tj1BcnJheShGKTtmb3Ioaz0wO2s8RjtrKyspaWYoSD1nPT09TT9rOk1ba10sSz1nW0hdLEc9cShILEssayksdFtHXSlJPXRbR10sZGVsZXRlIHRbR10sRFtHXT1JLE5ba109STtlbHNle2lmKERbR10pdGhyb3cgbihOLGZ1bmN0aW9uKGEpe2EmJmEuc2NvcGUmJih0W2EuaWRdPWEpfSksZChcImR1cGVzXCIsaCxHLEspO05ba109e2lkOkcsc2NvcGU6dSxjbG9uZTp1fTtEW0ddPSEwfWZvcihCIGluIHQpe0k9dFtCXTtHPXFiKEkuY2xvbmUpO2MubGVhdmUoRyk7aWYoR1swXS5wYXJlbnROb2RlKWZvcihrPTAscT1HLmxlbmd0aDtrPHE7aysrKUdba10uJCROR19SRU1PVkVEPSEwO0kuc2NvcGUuJGRlc3Ryb3koKX1mb3Ioaz0wO2s8RjtrKyspaWYoSD1nPT09TT9rOk1ba10sSz1nW0hdLEk9TltrXSxJLnNjb3BlKXtCPVxudztkbyBCPUIubmV4dFNpYmxpbmc7d2hpbGUoQiYmQi4kJE5HX1JFTU9WRUQpO0kuY2xvbmVbMF0hPUImJmMubW92ZShxYihJLmNsb25lKSxudWxsLHoodykpO3c9SS5jbG9uZVtJLmNsb25lLmxlbmd0aC0xXTtlKEkuc2NvcGUsayx2LEsseCxILEYpfWVsc2UgbShmdW5jdGlvbihhLGQpe0kuc2NvcGU9ZDt2YXIgZj1sLmNsb25lTm9kZSghMSk7YVthLmxlbmd0aCsrXT1mO2MuZW50ZXIoYSxudWxsLHoodykpO3c9ZjtJLmNsb25lPWE7RFtJLmlkXT1JO2UoSS5zY29wZSxrLHYsSyx4LEgsRil9KTt0PUR9KX19fX1dLERlPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nU2hvdyxmdW5jdGlvbihjKXthW2M/XCJyZW1vdmVDbGFzc1wiOlwiYWRkQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIix7dGVtcENsYXNzZXM6XCJuZy1oaWRlLWFuaW1hdGVcIn0pfSl9fX1dLHdlPVtcIiRhbmltYXRlXCIsXG5mdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYyxkLGUpe2MuJHdhdGNoKGUubmdIaWRlLGZ1bmN0aW9uKGMpe2FbYz9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShkLFwibmctaGlkZVwiLHt0ZW1wQ2xhc3NlczpcIm5nLWhpZGUtYW5pbWF0ZVwifSl9KX19fV0sRWU9TWEoZnVuY3Rpb24oYSxjLGQpe2EuJHdhdGNoKGQubmdTdHlsZSxmdW5jdGlvbihhLGQpe2QmJmEhPT1kJiZuKGQsZnVuY3Rpb24oYSxkKXtjLmNzcyhkLFwiXCIpfSk7YSYmYy5jc3MoYSl9LCEwKX0pLEZlPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6XCJuZ1N3aXRjaFwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsZnVuY3Rpb24oKXt0aGlzLmNhc2VzPXt9fV0sbGluazpmdW5jdGlvbihjLGQsZSxmKXt2YXIgZz1bXSxoPVtdLGw9W10saz1bXSxtPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zcGxpY2UoYywxKX19O2MuJHdhdGNoKGUubmdTd2l0Y2h8fFxuZS5vbixmdW5jdGlvbihjKXt2YXIgZCxlO2Q9MDtmb3IoZT1sLmxlbmd0aDtkPGU7KytkKWEuY2FuY2VsKGxbZF0pO2Q9bC5sZW5ndGg9MDtmb3IoZT1rLmxlbmd0aDtkPGU7KytkKXt2YXIgcj1xYihoW2RdLmNsb25lKTtrW2RdLiRkZXN0cm95KCk7KGxbZF09YS5sZWF2ZShyKSkudGhlbihtKGwsZCkpfWgubGVuZ3RoPTA7ay5sZW5ndGg9MDsoZz1mLmNhc2VzW1wiIVwiK2NdfHxmLmNhc2VzW1wiP1wiXSkmJm4oZyxmdW5jdGlvbihjKXtjLnRyYW5zY2x1ZGUoZnVuY3Rpb24oZCxlKXtrLnB1c2goZSk7dmFyIGY9Yy5lbGVtZW50O2RbZC5sZW5ndGgrK109Vy5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1N3aXRjaFdoZW46IFwiKTtoLnB1c2goe2Nsb25lOmR9KTthLmVudGVyKGQsZi5wYXJlbnQoKSxmKX0pfSl9KX19fV0sR2U9TWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxcbmYpe2UuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dPWUuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dfHxbXTtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksSGU9TWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiP1wiXT1lLmNhc2VzW1wiP1wiXXx8W107ZS5jYXNlc1tcIj9cIl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLEplPU1hKHtyZXN0cmljdDpcIkVBQ1wiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZighZil0aHJvdyBHKFwibmdUcmFuc2NsdWRlXCIpKFwib3JwaGFuXCIsdWEoYykpO2YoZnVuY3Rpb24oYSl7Yy5lbXB0eSgpO2MuYXBwZW5kKGEpfSl9fSksamU9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsXG5jb21waWxlOmZ1bmN0aW9uKGMsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxjWzBdLnRleHQpfX19XSxCZz17JHNldFZpZXdWYWx1ZTp2LCRyZW5kZXI6dn0sQ2c9W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBlPXRoaXMsZj1uZXcgVWE7ZS5uZ01vZGVsQ3RybD1CZztlLnVua25vd25PcHRpb249eihXLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2UucmVuZGVyVW5rbm93bk9wdGlvbj1mdW5jdGlvbihjKXtjPVwiPyBcIitHYShjKStcIiA/XCI7ZS51bmtub3duT3B0aW9uLnZhbChjKTthLnByZXBlbmQoZS51bmtub3duT3B0aW9uKTthLnZhbChjKX07Yy4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZS5yZW5kZXJVbmtub3duT3B0aW9uPXZ9KTtlLnJlbW92ZVVua25vd25PcHRpb249ZnVuY3Rpb24oKXtlLnVua25vd25PcHRpb24ucGFyZW50KCkmJmUudW5rbm93bk9wdGlvbi5yZW1vdmUoKX07ZS5yZWFkVmFsdWU9XG5mdW5jdGlvbigpe2UucmVtb3ZlVW5rbm93bk9wdGlvbigpO3JldHVybiBhLnZhbCgpfTtlLndyaXRlVmFsdWU9ZnVuY3Rpb24oYyl7ZS5oYXNPcHRpb24oYyk/KGUucmVtb3ZlVW5rbm93bk9wdGlvbigpLGEudmFsKGMpLFwiXCI9PT1jJiZlLmVtcHR5T3B0aW9uLnByb3AoXCJzZWxlY3RlZFwiLCEwKSk6bnVsbD09YyYmZS5lbXB0eU9wdGlvbj8oZS5yZW1vdmVVbmtub3duT3B0aW9uKCksYS52YWwoXCJcIikpOmUucmVuZGVyVW5rbm93bk9wdGlvbihjKX07ZS5hZGRPcHRpb249ZnVuY3Rpb24oYSxjKXtUYShhLCdcIm9wdGlvbiB2YWx1ZVwiJyk7XCJcIj09PWEmJihlLmVtcHR5T3B0aW9uPWMpO3ZhciBkPWYuZ2V0KGEpfHwwO2YucHV0KGEsZCsxKX07ZS5yZW1vdmVPcHRpb249ZnVuY3Rpb24oYSl7dmFyIGM9Zi5nZXQoYSk7YyYmKDE9PT1jPyhmLnJlbW92ZShhKSxcIlwiPT09YSYmKGUuZW1wdHlPcHRpb249dSkpOmYucHV0KGEsYy0xKSl9O2UuaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiEhZi5nZXQoYSl9fV0sXG5rZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpDZyxsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWVbMV07aWYoZil7dmFyIGc9ZVswXTtnLm5nTW9kZWxDdHJsPWY7Zi4kcmVuZGVyPWZ1bmN0aW9uKCl7Zy53cml0ZVZhbHVlKGYuJHZpZXdWYWx1ZSl9O2Mub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Zi4kc2V0Vmlld1ZhbHVlKGcucmVhZFZhbHVlKCkpfSl9KTtpZihkLm11bHRpcGxlKXtnLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPVtdO24oYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQmJmEucHVzaChjLnZhbHVlKX0pO3JldHVybiBhfTtnLndyaXRlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGQ9bmV3IFVhKGEpO24oYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQ9eChkLmdldChhLnZhbHVlKSl9KX07dmFyIGgsXG5sPU5hTjthLiR3YXRjaChmdW5jdGlvbigpe2whPT1mLiR2aWV3VmFsdWV8fGthKGgsZi4kdmlld1ZhbHVlKXx8KGg9aWEoZi4kdmlld1ZhbHVlKSxmLiRyZW5kZXIoKSk7bD1mLiR2aWV3VmFsdWV9KTtmLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9fX19fX0sbWU9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhhKXthWzBdLmhhc0F0dHJpYnV0ZShcInNlbGVjdGVkXCIpJiYoYVswXS5zZWxlY3RlZD0hMCl9cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGQsZSl7aWYoeShlLnZhbHVlKSl7dmFyIGY9YShkLnRleHQoKSwhMCk7Znx8ZS4kc2V0KFwidmFsdWVcIixkLnRleHQoKSl9cmV0dXJuIGZ1bmN0aW9uKGEsZCxlKXt2YXIgaz1kLnBhcmVudCgpLG09ay5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIil8fGsucGFyZW50KCkuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpO20mJm0ubmdNb2RlbEN0cmwmJlxuKGY/YS4kd2F0Y2goZixmdW5jdGlvbihhLGYpe2UuJHNldChcInZhbHVlXCIsYSk7ZiE9PWEmJm0ucmVtb3ZlT3B0aW9uKGYpO20uYWRkT3B0aW9uKGEsZCk7bS5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7YyhkKX0pOihtLmFkZE9wdGlvbihlLnZhbHVlLGQpLG0ubmdNb2RlbEN0cmwuJHJlbmRlcigpLGMoZCkpLGQub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bS5yZW1vdmVPcHRpb24oZS52YWx1ZSk7bS5uZ01vZGVsQ3RybC4kcmVuZGVyKCl9KSl9fX19XSxsZT1xYSh7cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITF9KSxGYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2UmJihkLnJlcXVpcmVkPSEwLGUuJHZhbGlkYXRvcnMucmVxdWlyZWQ9ZnVuY3Rpb24oYSxjKXtyZXR1cm4hZC5yZXF1aXJlZHx8IWUuJGlzRW1wdHkoYyl9LGQuJG9ic2VydmUoXCJyZXF1aXJlZFwiLGZ1bmN0aW9uKCl7ZS4kdmFsaWRhdGUoKX0pKX19fSxcbkVjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGYsZz1kLm5nUGF0dGVybnx8ZC5wYXR0ZXJuO2QuJG9ic2VydmUoXCJwYXR0ZXJuXCIsZnVuY3Rpb24oYSl7SChhKSYmMDxhLmxlbmd0aCYmKGE9bmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKSk7aWYoYSYmIWEudGVzdCl0aHJvdyBHKFwibmdQYXR0ZXJuXCIpKFwibm9yZWdleHBcIixnLGEsdWEoYykpO2Y9YXx8dTtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5wYXR0ZXJuPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGUuJGlzRW1wdHkoYyl8fHkoZil8fGYudGVzdChjKX19fX19LEhjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGY9LTE7ZC4kb2JzZXJ2ZShcIm1heGxlbmd0aFwiLGZ1bmN0aW9uKGEpe2E9WShhKTtmPWlzTmFOKGEpPy0xOmE7ZS4kdmFsaWRhdGUoKX0pO1xuZS4kdmFsaWRhdG9ycy5tYXhsZW5ndGg9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMD5mfHxlLiRpc0VtcHR5KGMpfHxjLmxlbmd0aDw9Zn19fX19LEdjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGY9MDtkLiRvYnNlcnZlKFwibWlubGVuZ3RoXCIsZnVuY3Rpb24oYSl7Zj1ZKGEpfHwwO2UuJHZhbGlkYXRlKCl9KTtlLiR2YWxpZGF0b3JzLm1pbmxlbmd0aD1mdW5jdGlvbihhLGMpe3JldHVybiBlLiRpc0VtcHR5KGMpfHxjLmxlbmd0aD49Zn19fX19O04uYW5ndWxhci5ib290c3RyYXA/Y29uc29sZS5sb2coXCJXQVJOSU5HOiBUcmllZCB0byBsb2FkIGFuZ3VsYXIgbW9yZSB0aGFuIG9uY2UuXCIpOihjZSgpLGVlKGFhKSxhYS5tb2R1bGUoXCJuZ0xvY2FsZVwiLFtdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhhKXthKz1cIlwiO3ZhciBjPWEuaW5kZXhPZihcIi5cIik7cmV0dXJuLTE9PVxuYz8wOmEubGVuZ3RoLWMtMX1hLnZhbHVlKFwiJGxvY2FsZVwiLHtEQVRFVElNRV9GT1JNQVRTOntBTVBNUzpbXCJBTVwiLFwiUE1cIl0sREFZOlwiU3VuZGF5IE1vbmRheSBUdWVzZGF5IFdlZG5lc2RheSBUaHVyc2RheSBGcmlkYXkgU2F0dXJkYXlcIi5zcGxpdChcIiBcIiksRVJBTkFNRVM6W1wiQmVmb3JlIENocmlzdFwiLFwiQW5ubyBEb21pbmlcIl0sRVJBUzpbXCJCQ1wiLFwiQURcIl0sRklSU1REQVlPRldFRUs6NixNT05USDpcIkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXJcIi5zcGxpdChcIiBcIiksU0hPUlREQVk6XCJTdW4gTW9uIFR1ZSBXZWQgVGh1IEZyaSBTYXRcIi5zcGxpdChcIiBcIiksU0hPUlRNT05USDpcIkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjXCIuc3BsaXQoXCIgXCIpLFdFRUtFTkRSQU5HRTpbNSw2XSxmdWxsRGF0ZTpcIkVFRUUsIE1NTU0gZCwgeVwiLGxvbmdEYXRlOlwiTU1NTSBkLCB5XCIsXG5tZWRpdW06XCJNTU0gZCwgeSBoOm1tOnNzIGFcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLHNob3J0VGltZTpcImg6bW0gYVwifSxOVU1CRVJfRk9STUFUUzp7Q1VSUkVOQ1lfU1lNOlwiJFwiLERFQ0lNQUxfU0VQOlwiLlwiLEdST1VQX1NFUDpcIixcIixQQVRURVJOUzpbe2dTaXplOjMsbGdTaXplOjMsbWF4RnJhYzozLG1pbkZyYWM6MCxtaW5JbnQ6MSxuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIscG9zUHJlOlwiXCIscG9zU3VmOlwiXCJ9LHtnU2l6ZTozLGxnU2l6ZTozLG1heEZyYWM6MixtaW5GcmFjOjIsbWluSW50OjEsbmVnUHJlOlwiLVxcdTAwYTRcIixuZWdTdWY6XCJcIixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCJ9XX0saWQ6XCJlbi11c1wiLHBsdXJhbENhdDpmdW5jdGlvbihhLGUpe3ZhciBmPWF8MCxnPWU7dT09PWcmJihnPU1hdGgubWluKGMoYSksMykpO01hdGgucG93KDEwLGcpO3JldHVybiAxPT1cbmYmJjA9PWc/XCJvbmVcIjpcIm90aGVyXCJ9fSl9XSkseihXKS5yZWFkeShmdW5jdGlvbigpe1pkKFcseWMpfSkpfSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlJiZ3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmhlYWQpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSl7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fW5nXFxcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLXNoaW17dmlzaWJpbGl0eTpoaWRkZW47fS5uZy1hbmNob3J7cG9zaXRpb246YWJzb2x1dGU7fTwvc3R5bGU+Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLm1pbi5qcy5tYXBcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjQuNVxuIChjKSAyMDEwLTIwMTUgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKHAsYyxDKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gdihyLGgsZyl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIsdGVybWluYWw6ITAscHJpb3JpdHk6NDAwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsbGluazpmdW5jdGlvbihhLGYsYixkLHkpe2Z1bmN0aW9uIHooKXtrJiYoZy5jYW5jZWwoayksaz1udWxsKTtsJiYobC4kZGVzdHJveSgpLGw9bnVsbCk7bSYmKGs9Zy5sZWF2ZShtKSxrLnRoZW4oZnVuY3Rpb24oKXtrPW51bGx9KSxtPW51bGwpfWZ1bmN0aW9uIHgoKXt2YXIgYj1yLmN1cnJlbnQmJnIuY3VycmVudC5sb2NhbHM7aWYoYy5pc0RlZmluZWQoYiYmYi4kdGVtcGxhdGUpKXt2YXIgYj1hLiRuZXcoKSxkPXIuY3VycmVudDttPXkoYixmdW5jdGlvbihiKXtnLmVudGVyKGIsbnVsbCxtfHxmKS50aGVuKGZ1bmN0aW9uKCl7IWMuaXNEZWZpbmVkKHQpfHx0JiYhYS4kZXZhbCh0KXx8aCgpfSk7eigpfSk7bD1kLnNjb3BlPWI7bC4kZW1pdChcIiR2aWV3Q29udGVudExvYWRlZFwiKTtcbmwuJGV2YWwodyl9ZWxzZSB6KCl9dmFyIGwsbSxrLHQ9Yi5hdXRvc2Nyb2xsLHc9Yi5vbmxvYWR8fFwiXCI7YS4kb24oXCIkcm91dGVDaGFuZ2VTdWNjZXNzXCIseCk7eCgpfX19ZnVuY3Rpb24gQShjLGgsZyl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxsaW5rOmZ1bmN0aW9uKGEsZil7dmFyIGI9Zy5jdXJyZW50LGQ9Yi5sb2NhbHM7Zi5odG1sKGQuJHRlbXBsYXRlKTt2YXIgeT1jKGYuY29udGVudHMoKSk7Yi5jb250cm9sbGVyJiYoZC4kc2NvcGU9YSxkPWgoYi5jb250cm9sbGVyLGQpLGIuY29udHJvbGxlckFzJiYoYVtiLmNvbnRyb2xsZXJBc109ZCksZi5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixkKSxmLmNoaWxkcmVuKCkuZGF0YShcIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyXCIsZCkpO3koYSl9fX1wPWMubW9kdWxlKFwibmdSb3V0ZVwiLFtcIm5nXCJdKS5wcm92aWRlcihcIiRyb3V0ZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihhLGYpe3JldHVybiBjLmV4dGVuZChPYmplY3QuY3JlYXRlKGEpLFxuZil9ZnVuY3Rpb24gaChhLGMpe3ZhciBiPWMuY2FzZUluc2Vuc2l0aXZlTWF0Y2gsZD17b3JpZ2luYWxQYXRoOmEscmVnZXhwOmF9LGc9ZC5rZXlzPVtdO2E9YS5yZXBsYWNlKC8oWygpLl0pL2csXCJcXFxcJDFcIikucmVwbGFjZSgvKFxcLyk/OihcXHcrKShbXFw/XFwqXSk/L2csZnVuY3Rpb24oYSxjLGIsZCl7YT1cIj9cIj09PWQ/ZDpudWxsO2Q9XCIqXCI9PT1kP2Q6bnVsbDtnLnB1c2goe25hbWU6YixvcHRpb25hbDohIWF9KTtjPWN8fFwiXCI7cmV0dXJuXCJcIisoYT9cIlwiOmMpK1wiKD86XCIrKGE/YzpcIlwiKSsoZCYmXCIoLis/KVwifHxcIihbXi9dKylcIikrKGF8fFwiXCIpK1wiKVwiKyhhfHxcIlwiKX0pLnJlcGxhY2UoLyhbXFwvJFxcKl0pL2csXCJcXFxcJDFcIik7ZC5yZWdleHA9bmV3IFJlZ0V4cChcIl5cIithK1wiJFwiLGI/XCJpXCI6XCJcIik7cmV0dXJuIGR9dmFyIGc9e307dGhpcy53aGVuPWZ1bmN0aW9uKGEsZil7dmFyIGI9Yy5jb3B5KGYpO2MuaXNVbmRlZmluZWQoYi5yZWxvYWRPblNlYXJjaCkmJihiLnJlbG9hZE9uU2VhcmNoPSEwKTtcbmMuaXNVbmRlZmluZWQoYi5jYXNlSW5zZW5zaXRpdmVNYXRjaCkmJihiLmNhc2VJbnNlbnNpdGl2ZU1hdGNoPXRoaXMuY2FzZUluc2Vuc2l0aXZlTWF0Y2gpO2dbYV09Yy5leHRlbmQoYixhJiZoKGEsYikpO2lmKGEpe3ZhciBkPVwiL1wiPT1hW2EubGVuZ3RoLTFdP2Euc3Vic3RyKDAsYS5sZW5ndGgtMSk6YStcIi9cIjtnW2RdPWMuZXh0ZW5kKHtyZWRpcmVjdFRvOmF9LGgoZCxiKSl9cmV0dXJuIHRoaXN9O3RoaXMuY2FzZUluc2Vuc2l0aXZlTWF0Y2g9ITE7dGhpcy5vdGhlcndpc2U9ZnVuY3Rpb24oYSl7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoYT17cmVkaXJlY3RUbzphfSk7dGhpcy53aGVuKG51bGwsYSk7cmV0dXJuIHRoaXN9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkbG9jYXRpb25cIixcIiRyb3V0ZVBhcmFtc1wiLFwiJHFcIixcIiRpbmplY3RvclwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJHNjZVwiLGZ1bmN0aW9uKGEsZixiLGQsaCxwLHgpe2Z1bmN0aW9uIGwoYil7dmFyIGU9cy5jdXJyZW50O1xuKHY9KG49aygpKSYmZSYmbi4kJHJvdXRlPT09ZS4kJHJvdXRlJiZjLmVxdWFscyhuLnBhdGhQYXJhbXMsZS5wYXRoUGFyYW1zKSYmIW4ucmVsb2FkT25TZWFyY2gmJiF3KXx8IWUmJiFufHxhLiRicm9hZGNhc3QoXCIkcm91dGVDaGFuZ2VTdGFydFwiLG4sZSkuZGVmYXVsdFByZXZlbnRlZCYmYiYmYi5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIG0oKXt2YXIgdT1zLmN1cnJlbnQsZT1uO2lmKHYpdS5wYXJhbXM9ZS5wYXJhbXMsYy5jb3B5KHUucGFyYW1zLGIpLGEuJGJyb2FkY2FzdChcIiRyb3V0ZVVwZGF0ZVwiLHUpO2Vsc2UgaWYoZXx8dSl3PSExLChzLmN1cnJlbnQ9ZSkmJmUucmVkaXJlY3RUbyYmKGMuaXNTdHJpbmcoZS5yZWRpcmVjdFRvKT9mLnBhdGgodChlLnJlZGlyZWN0VG8sZS5wYXJhbXMpKS5zZWFyY2goZS5wYXJhbXMpLnJlcGxhY2UoKTpmLnVybChlLnJlZGlyZWN0VG8oZS5wYXRoUGFyYW1zLGYucGF0aCgpLGYuc2VhcmNoKCkpKS5yZXBsYWNlKCkpLGQud2hlbihlKS50aGVuKGZ1bmN0aW9uKCl7aWYoZSl7dmFyIGE9XG5jLmV4dGVuZCh7fSxlLnJlc29sdmUpLGIsZjtjLmZvckVhY2goYSxmdW5jdGlvbihiLGUpe2FbZV09Yy5pc1N0cmluZyhiKT9oLmdldChiKTpoLmludm9rZShiLG51bGwsbnVsbCxlKX0pO2MuaXNEZWZpbmVkKGI9ZS50ZW1wbGF0ZSk/Yy5pc0Z1bmN0aW9uKGIpJiYoYj1iKGUucGFyYW1zKSk6Yy5pc0RlZmluZWQoZj1lLnRlbXBsYXRlVXJsKSYmKGMuaXNGdW5jdGlvbihmKSYmKGY9ZihlLnBhcmFtcykpLGMuaXNEZWZpbmVkKGYpJiYoZS5sb2FkZWRUZW1wbGF0ZVVybD14LnZhbHVlT2YoZiksYj1wKGYpKSk7Yy5pc0RlZmluZWQoYikmJihhLiR0ZW1wbGF0ZT1iKTtyZXR1cm4gZC5hbGwoYSl9fSkudGhlbihmdW5jdGlvbihmKXtlPT1zLmN1cnJlbnQmJihlJiYoZS5sb2NhbHM9ZixjLmNvcHkoZS5wYXJhbXMsYikpLGEuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZVN1Y2Nlc3NcIixlLHUpKX0sZnVuY3Rpb24oYil7ZT09cy5jdXJyZW50JiZhLiRicm9hZGNhc3QoXCIkcm91dGVDaGFuZ2VFcnJvclwiLFxuZSx1LGIpfSl9ZnVuY3Rpb24gaygpe3ZhciBhLGI7Yy5mb3JFYWNoKGcsZnVuY3Rpb24oZCxnKXt2YXIgcTtpZihxPSFiKXt2YXIgaD1mLnBhdGgoKTtxPWQua2V5czt2YXIgbD17fTtpZihkLnJlZ2V4cClpZihoPWQucmVnZXhwLmV4ZWMoaCkpe2Zvcih2YXIgaz0xLG09aC5sZW5ndGg7azxtOysrayl7dmFyIG49cVtrLTFdLHA9aFtrXTtuJiZwJiYobFtuLm5hbWVdPXApfXE9bH1lbHNlIHE9bnVsbDtlbHNlIHE9bnVsbDtxPWE9cX1xJiYoYj1yKGQse3BhcmFtczpjLmV4dGVuZCh7fSxmLnNlYXJjaCgpLGEpLHBhdGhQYXJhbXM6YX0pLGIuJCRyb3V0ZT1kKX0pO3JldHVybiBifHxnW251bGxdJiZyKGdbbnVsbF0se3BhcmFtczp7fSxwYXRoUGFyYW1zOnt9fSl9ZnVuY3Rpb24gdChhLGIpe3ZhciBkPVtdO2MuZm9yRWFjaCgoYXx8XCJcIikuc3BsaXQoXCI6XCIpLGZ1bmN0aW9uKGEsYyl7aWYoMD09PWMpZC5wdXNoKGEpO2Vsc2V7dmFyIGY9YS5tYXRjaCgvKFxcdyspKD86Wz8qXSk/KC4qKS8pLFxuZz1mWzFdO2QucHVzaChiW2ddKTtkLnB1c2goZlsyXXx8XCJcIik7ZGVsZXRlIGJbZ119fSk7cmV0dXJuIGQuam9pbihcIlwiKX12YXIgdz0hMSxuLHYscz17cm91dGVzOmcscmVsb2FkOmZ1bmN0aW9uKCl7dz0hMDthLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtsKCk7bSgpfSl9LHVwZGF0ZVBhcmFtczpmdW5jdGlvbihhKXtpZih0aGlzLmN1cnJlbnQmJnRoaXMuY3VycmVudC4kJHJvdXRlKWE9Yy5leHRlbmQoe30sdGhpcy5jdXJyZW50LnBhcmFtcyxhKSxmLnBhdGgodCh0aGlzLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGgsYSkpLGYuc2VhcmNoKGEpO2Vsc2UgdGhyb3cgQihcIm5vcm91dFwiKTt9fTthLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsbCk7YS4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsbSk7cmV0dXJuIHN9XX0pO3ZhciBCPWMuJCRtaW5FcnIoXCJuZ1JvdXRlXCIpO3AucHJvdmlkZXIoXCIkcm91dGVQYXJhbXNcIixmdW5jdGlvbigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybnt9fX0pO1xucC5kaXJlY3RpdmUoXCJuZ1ZpZXdcIix2KTtwLmRpcmVjdGl2ZShcIm5nVmlld1wiLEEpO3YuJGluamVjdD1bXCIkcm91dGVcIixcIiRhbmNob3JTY3JvbGxcIixcIiRhbmltYXRlXCJdO0EuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb3V0ZVwiXX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXJvdXRlLm1pbi5qcy5tYXBcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjQuNVxuIChjKSAyMDEwLTIwMTUgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKEYseCxaKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gdWEoYSxiLGMpe2lmKCFhKXRocm93IG5nTWluRXJyKFwiYXJlcVwiLGJ8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGF9ZnVuY3Rpb24gdmEoYSxiKXtpZighYSYmIWIpcmV0dXJuXCJcIjtpZighYSlyZXR1cm4gYjtpZighYilyZXR1cm4gYTskKGEpJiYoYT1hLmpvaW4oXCIgXCIpKTskKGIpJiYoYj1iLmpvaW4oXCIgXCIpKTtyZXR1cm4gYStcIiBcIitifWZ1bmN0aW9uIEVhKGEpe3ZhciBiPXt9O2EmJihhLnRvfHxhLmZyb20pJiYoYi50bz1hLnRvLGIuZnJvbT1hLmZyb20pO3JldHVybiBifWZ1bmN0aW9uIFYoYSxiLGMpe3ZhciBkPVwiXCI7YT0kKGEpP2E6YSYmTShhKSYmYS5sZW5ndGg/YS5zcGxpdCgvXFxzKy8pOltdO3EoYSxmdW5jdGlvbihhLHkpe2EmJjA8YS5sZW5ndGgmJihkKz0wPHk/XCIgXCI6XCJcIixkKz1jP2IrYTphK2IpfSk7cmV0dXJuIGR9ZnVuY3Rpb24gRmEoYSl7aWYoYSBpbnN0YW5jZW9mIEkpc3dpdGNoKGEubGVuZ3RoKXtjYXNlIDA6cmV0dXJuW107XG5jYXNlIDE6aWYoMT09PWFbMF0ubm9kZVR5cGUpcmV0dXJuIGE7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gSShtYShhKSl9aWYoMT09PWEubm9kZVR5cGUpcmV0dXJuIEkoYSl9ZnVuY3Rpb24gbWEoYSl7aWYoIWFbMF0pcmV0dXJuIGE7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoMT09Yy5ub2RlVHlwZSlyZXR1cm4gY319ZnVuY3Rpb24gR2EoYSxiLGMpe3EoYixmdW5jdGlvbihiKXthLmFkZENsYXNzKGIsYyl9KX1mdW5jdGlvbiBIYShhLGIsYyl7cShiLGZ1bmN0aW9uKGIpe2EucmVtb3ZlQ2xhc3MoYixjKX0pfWZ1bmN0aW9uIFEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yy5hZGRDbGFzcyYmKEdhKGEsYixjLmFkZENsYXNzKSxjLmFkZENsYXNzPW51bGwpO2MucmVtb3ZlQ2xhc3MmJihIYShhLGIsYy5yZW1vdmVDbGFzcyksYy5yZW1vdmVDbGFzcz1udWxsKX19ZnVuY3Rpb24gaWEoYSl7YT1hfHx7fTtpZighYS4kJHByZXBhcmVkKXt2YXIgYj1hLmRvbU9wZXJhdGlvbnx8XG5MO2EuZG9tT3BlcmF0aW9uPWZ1bmN0aW9uKCl7YS4kJGRvbU9wZXJhdGlvbkZpcmVkPSEwO2IoKTtiPUx9O2EuJCRwcmVwYXJlZD0hMH1yZXR1cm4gYX1mdW5jdGlvbiBlYShhLGIpe3dhKGEsYik7eGEoYSxiKX1mdW5jdGlvbiB3YShhLGIpe2IuZnJvbSYmKGEuY3NzKGIuZnJvbSksYi5mcm9tPW51bGwpfWZ1bmN0aW9uIHhhKGEsYil7Yi50byYmKGEuY3NzKGIudG8pLGIudG89bnVsbCl9ZnVuY3Rpb24gUihhLGIsYyl7dmFyIGQ9KGIuYWRkQ2xhc3N8fFwiXCIpK1wiIFwiKyhjLmFkZENsYXNzfHxcIlwiKSxlPShiLnJlbW92ZUNsYXNzfHxcIlwiKStcIiBcIisoYy5yZW1vdmVDbGFzc3x8XCJcIik7YT1JYShhLmF0dHIoXCJjbGFzc1wiKSxkLGUpO2MucHJlcGFyYXRpb25DbGFzc2VzJiYoYi5wcmVwYXJhdGlvbkNsYXNzZXM9VyhjLnByZXBhcmF0aW9uQ2xhc3NlcyxiLnByZXBhcmF0aW9uQ2xhc3NlcyksZGVsZXRlIGMucHJlcGFyYXRpb25DbGFzc2VzKTtkPWIuZG9tT3BlcmF0aW9uIT09TD9iLmRvbU9wZXJhdGlvbjpcbm51bGw7eWEoYixjKTtkJiYoYi5kb21PcGVyYXRpb249ZCk7Yi5hZGRDbGFzcz1hLmFkZENsYXNzP2EuYWRkQ2xhc3M6bnVsbDtiLnJlbW92ZUNsYXNzPWEucmVtb3ZlQ2xhc3M/YS5yZW1vdmVDbGFzczpudWxsO3JldHVybiBifWZ1bmN0aW9uIElhKGEsYixjKXtmdW5jdGlvbiBkKGEpe00oYSkmJihhPWEuc3BsaXQoXCIgXCIpKTt2YXIgYj17fTtxKGEsZnVuY3Rpb24oYSl7YS5sZW5ndGgmJihiW2FdPSEwKX0pO3JldHVybiBifXZhciBlPXt9O2E9ZChhKTtiPWQoYik7cShiLGZ1bmN0aW9uKGEsYil7ZVtiXT0xfSk7Yz1kKGMpO3EoYyxmdW5jdGlvbihhLGIpe2VbYl09MT09PWVbYl0/bnVsbDotMX0pO3ZhciB5PXthZGRDbGFzczpcIlwiLHJlbW92ZUNsYXNzOlwiXCJ9O3EoZSxmdW5jdGlvbihiLGMpe3ZhciBlLGQ7MT09PWI/KGU9XCJhZGRDbGFzc1wiLGQ9IWFbY10pOi0xPT09YiYmKGU9XCJyZW1vdmVDbGFzc1wiLGQ9YVtjXSk7ZCYmKHlbZV0ubGVuZ3RoJiYoeVtlXSs9XCIgXCIpLHlbZV0rPWMpfSk7XG5yZXR1cm4geX1mdW5jdGlvbiBHKGEpe3JldHVybiBhIGluc3RhbmNlb2YgeC5lbGVtZW50P2FbMF06YX1mdW5jdGlvbiBKYShhLGIsYyl7dmFyIGQ9XCJcIjtiJiYoZD1WKGIsXCJuZy1cIiwhMCkpO2MuYWRkQ2xhc3MmJihkPVcoZCxWKGMuYWRkQ2xhc3MsXCItYWRkXCIpKSk7Yy5yZW1vdmVDbGFzcyYmKGQ9VyhkLFYoYy5yZW1vdmVDbGFzcyxcIi1yZW1vdmVcIikpKTtkLmxlbmd0aCYmKGMucHJlcGFyYXRpb25DbGFzc2VzPWQsYS5hZGRDbGFzcyhkKSl9ZnVuY3Rpb24gamEoYSxiKXt2YXIgYz1iP1wiLVwiK2IrXCJzXCI6XCJcIjtmYShhLFtnYSxjXSk7cmV0dXJuW2dhLGNdfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGM9Yj9cInBhdXNlZFwiOlwiXCIsZD1YK1wiUGxheVN0YXRlXCI7ZmEoYSxbZCxjXSk7cmV0dXJuW2QsY119ZnVuY3Rpb24gZmEoYSxiKXthLnN0eWxlW2JbMF1dPWJbMV19ZnVuY3Rpb24gVyhhLGIpe3JldHVybiBhP2I/YStcIiBcIitiOmE6Yn1mdW5jdGlvbiB6YShhLGIsYyl7dmFyIGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxcbmU9YS5nZXRDb21wdXRlZFN0eWxlKGIpfHx7fTtxKGMsZnVuY3Rpb24oYSxiKXt2YXIgYz1lW2FdO2lmKGMpe3ZhciBsPWMuY2hhckF0KDApO2lmKFwiLVwiPT09bHx8XCIrXCI9PT1sfHwwPD1sKWM9S2EoYyk7MD09PWMmJihjPW51bGwpO2RbYl09Y319KTtyZXR1cm4gZH1mdW5jdGlvbiBLYShhKXt2YXIgYj0wO2E9YS5zcGxpdCgvXFxzKixcXHMqLyk7cShhLGZ1bmN0aW9uKGEpe1wic1wiPT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmKGE9YS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKSk7YT1wYXJzZUZsb2F0KGEpfHwwO2I9Yj9NYXRoLm1heChhLGIpOmF9KTtyZXR1cm4gYn1mdW5jdGlvbiBvYShhKXtyZXR1cm4gMD09PWF8fG51bGwhPWF9ZnVuY3Rpb24gQWEoYSxiKXt2YXIgYz1OLGQ9YStcInNcIjtiP2MrPVwiRHVyYXRpb25cIjpkKz1cIiBsaW5lYXIgYWxsXCI7cmV0dXJuW2MsZF19ZnVuY3Rpb24gQmEoKXt2YXIgYT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybntmbHVzaDpmdW5jdGlvbigpe2E9T2JqZWN0LmNyZWF0ZShudWxsKX0sXG5jb3VudDpmdW5jdGlvbihiKXtyZXR1cm4oYj1hW2JdKT9iLnRvdGFsOjB9LGdldDpmdW5jdGlvbihiKXtyZXR1cm4oYj1hW2JdKSYmYi52YWx1ZX0scHV0OmZ1bmN0aW9uKGIsYyl7YVtiXT9hW2JdLnRvdGFsKys6YVtiXT17dG90YWw6MSx2YWx1ZTpjfX19fXZhciBMPXgubm9vcCx5YT14LmV4dGVuZCxJPXguZWxlbWVudCxxPXguZm9yRWFjaCwkPXguaXNBcnJheSxNPXguaXNTdHJpbmcscGE9eC5pc09iamVjdCxMYT14LmlzVW5kZWZpbmVkLE1hPXguaXNEZWZpbmVkLENhPXguaXNGdW5jdGlvbixxYT14LmlzRWxlbWVudCxOLHJhLFgsc2E7Ri5vbnRyYW5zaXRpb25lbmQ9PT1aJiZGLm9ud2Via2l0dHJhbnNpdGlvbmVuZCE9PVo/KE49XCJXZWJraXRUcmFuc2l0aW9uXCIscmE9XCJ3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmRcIik6KE49XCJ0cmFuc2l0aW9uXCIscmE9XCJ0cmFuc2l0aW9uZW5kXCIpO0Yub25hbmltYXRpb25lbmQ9PT1aJiZGLm9ud2Via2l0YW5pbWF0aW9uZW5kIT09XG5aPyhYPVwiV2Via2l0QW5pbWF0aW9uXCIsc2E9XCJ3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIpOihYPVwiYW5pbWF0aW9uXCIsc2E9XCJhbmltYXRpb25lbmRcIik7dmFyIGthPVgrXCJEZWxheVwiLHRhPVgrXCJEdXJhdGlvblwiLGdhPU4rXCJEZWxheVwiO0Y9TitcIkR1cmF0aW9uXCI7dmFyIE5hPXt0cmFuc2l0aW9uRHVyYXRpb246Rix0cmFuc2l0aW9uRGVsYXk6Z2EsdHJhbnNpdGlvblByb3BlcnR5Ok4rXCJQcm9wZXJ0eVwiLGFuaW1hdGlvbkR1cmF0aW9uOnRhLGFuaW1hdGlvbkRlbGF5OmthLGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OlgrXCJJdGVyYXRpb25Db3VudFwifSxPYT17dHJhbnNpdGlvbkR1cmF0aW9uOkYsdHJhbnNpdGlvbkRlbGF5OmdhLGFuaW1hdGlvbkR1cmF0aW9uOnRhLGFuaW1hdGlvbkRlbGF5OmthfTt4Lm1vZHVsZShcIm5nQW5pbWF0ZVwiLFtdKS5wcm92aWRlcihcIiQkYm9keVwiLGZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEpe3JldHVybiBJKGFbMF0uYm9keSl9XX0pLmRpcmVjdGl2ZShcIm5nQW5pbWF0ZUNoaWxkcmVuXCIsXG5bZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2E9Yy5uZ0FuaW1hdGVDaGlsZHJlbjt4LmlzU3RyaW5nKGEpJiYwPT09YS5sZW5ndGg/Yi5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLCEwKTpjLiRvYnNlcnZlKFwibmdBbmltYXRlQ2hpbGRyZW5cIixmdW5jdGlvbihhKXtiLmRhdGEoXCIkJG5nQW5pbWF0ZUNoaWxkcmVuXCIsXCJvblwiPT09YXx8XCJ0cnVlXCI9PT1hKX0pfX1dKS5mYWN0b3J5KFwiJCRyQUZTY2hlZHVsZXJcIixbXCIkJHJBRlwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZD1kLmNvbmNhdChhKTtjKCl9ZnVuY3Rpb24gYygpe2lmKGQubGVuZ3RoKXtmb3IodmFyIGI9ZC5zaGlmdCgpLHY9MDt2PGIubGVuZ3RoO3YrKyliW3ZdKCk7ZXx8YShmdW5jdGlvbigpe2V8fGMoKX0pfX12YXIgZCxlO2Q9Yi5xdWV1ZT1bXTtiLndhaXRVbnRpbFF1aWV0PWZ1bmN0aW9uKGIpe2UmJmUoKTtlPWEoZnVuY3Rpb24oKXtlPW51bGw7YigpO2MoKX0pfTtyZXR1cm4gYn1dKS5mYWN0b3J5KFwiJCRBbmltYXRlUnVubmVyXCIsXG5bXCIkcVwiLFwiJHNuaWZmZXJcIixcIiQkYW5pbWF0ZUFzeW5jUnVuXCIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dGhpcy5zZXRIb3N0KGEpO3RoaXMuX2RvbmVDYWxsYmFja3M9W107dGhpcy5fcnVuSW5BbmltYXRpb25GcmFtZT1jKCk7dGhpcy5fc3RhdGU9MH1kLmNoYWluPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2lmKGQ9PT1hLmxlbmd0aCliKCEwKTtlbHNlIGFbZF0oZnVuY3Rpb24oYSl7ITE9PT1hP2IoITEpOihkKyssYygpKX0pfXZhciBkPTA7YygpfTtkLmFsbD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGModil7bD1sJiZ2OysrZD09PWEubGVuZ3RoJiZiKGwpfXZhciBkPTAsbD0hMDtxKGEsZnVuY3Rpb24oYSl7YS5kb25lKGMpfSl9O2QucHJvdG90eXBlPXtzZXRIb3N0OmZ1bmN0aW9uKGEpe3RoaXMuaG9zdD1hfHx7fX0sZG9uZTpmdW5jdGlvbihhKXsyPT09dGhpcy5fc3RhdGU/YSgpOnRoaXMuX2RvbmVDYWxsYmFja3MucHVzaChhKX0scHJvZ3Jlc3M6TCxnZXRQcm9taXNlOmZ1bmN0aW9uKCl7aWYoIXRoaXMucHJvbWlzZSl7dmFyIGI9XG50aGlzO3RoaXMucHJvbWlzZT1hKGZ1bmN0aW9uKGEsYyl7Yi5kb25lKGZ1bmN0aW9uKGIpeyExPT09Yj9jKCk6YSgpfSl9KX1yZXR1cm4gdGhpcy5wcm9taXNlfSx0aGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpLnRoZW4oYSxiKX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb21pc2UoKVtcImNhdGNoXCJdKGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbXCJmaW5hbGx5XCJdKGEpfSxwYXVzZTpmdW5jdGlvbigpe3RoaXMuaG9zdC5wYXVzZSYmdGhpcy5ob3N0LnBhdXNlKCl9LHJlc3VtZTpmdW5jdGlvbigpe3RoaXMuaG9zdC5yZXN1bWUmJnRoaXMuaG9zdC5yZXN1bWUoKX0sZW5kOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LmVuZCYmdGhpcy5ob3N0LmVuZCgpO3RoaXMuX3Jlc29sdmUoITApfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuY2FuY2VsJiZ0aGlzLmhvc3QuY2FuY2VsKCk7dGhpcy5fcmVzb2x2ZSghMSl9LFxuY29tcGxldGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczswPT09Yi5fc3RhdGUmJihiLl9zdGF0ZT0xLGIuX3J1bkluQW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtiLl9yZXNvbHZlKGEpfSkpfSxfcmVzb2x2ZTpmdW5jdGlvbihhKXsyIT09dGhpcy5fc3RhdGUmJihxKHRoaXMuX2RvbmVDYWxsYmFja3MsZnVuY3Rpb24oYil7YihhKX0pLHRoaXMuX2RvbmVDYWxsYmFja3MubGVuZ3RoPTAsdGhpcy5fc3RhdGU9Mil9fTtyZXR1cm4gZH1dKS5mYWN0b3J5KFwiJCRhbmltYXRlQXN5bmNSdW5cIixbXCIkJHJBRlwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7Yy5wdXNoKGIpOzE8Yy5sZW5ndGh8fGEoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGMubGVuZ3RoO2ErKyljW2FdKCk7Yz1bXX0pfXZhciBjPVtdO3JldHVybiBmdW5jdGlvbigpe3ZhciBhPSExO2IoZnVuY3Rpb24oKXthPSEwfSk7cmV0dXJuIGZ1bmN0aW9uKGMpe2E/YygpOmIoYyl9fX1dKS5wcm92aWRlcihcIiQkYW5pbWF0ZVF1ZXVlXCIsXG5bXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxxKXtyZXR1cm4gZFthXS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhKGIsYyxxKX0pfWZ1bmN0aW9uIGMoYSxiKXthPWF8fHt9O3ZhciBjPTA8KGEuYWRkQ2xhc3N8fFwiXCIpLmxlbmd0aCxkPTA8KGEucmVtb3ZlQ2xhc3N8fFwiXCIpLmxlbmd0aDtyZXR1cm4gYj9jJiZkOmN8fGR9dmFyIGQ9dGhpcy5ydWxlcz17c2tpcDpbXSxjYW5jZWw6W10sam9pbjpbXX07ZC5qb2luLnB1c2goZnVuY3Rpb24oYSxiLGQpe3JldHVybiFiLnN0cnVjdHVyYWwmJmMoYi5vcHRpb25zKX0pO2Quc2tpcC5wdXNoKGZ1bmN0aW9uKGEsYixkKXtyZXR1cm4hYi5zdHJ1Y3R1cmFsJiYhYyhiLm9wdGlvbnMpfSk7ZC5za2lwLnB1c2goZnVuY3Rpb24oYSxiLGMpe3JldHVyblwibGVhdmVcIj09Yy5ldmVudCYmYi5zdHJ1Y3R1cmFsfSk7ZC5za2lwLnB1c2goZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjLnN0cnVjdHVyYWwmJjI9PT1jLnN0YXRlJiZcbiFiLnN0cnVjdHVyYWx9KTtkLmNhbmNlbC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYy5zdHJ1Y3R1cmFsJiZiLnN0cnVjdHVyYWx9KTtkLmNhbmNlbC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMj09PWMuc3RhdGUmJmIuc3RydWN0dXJhbH0pO2QuY2FuY2VsLnB1c2goZnVuY3Rpb24oYSxiLGMpe2E9Yi5vcHRpb25zO2M9Yy5vcHRpb25zO3JldHVybiBhLmFkZENsYXNzJiZhLmFkZENsYXNzPT09Yy5yZW1vdmVDbGFzc3x8YS5yZW1vdmVDbGFzcyYmYS5yZW1vdmVDbGFzcz09PWMuYWRkQ2xhc3N9KTt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiRyb290U2NvcGVcIixcIiRyb290RWxlbWVudFwiLFwiJGRvY3VtZW50XCIsXCIkJGJvZHlcIixcIiQkSGFzaE1hcFwiLFwiJCRhbmltYXRpb25cIixcIiQkQW5pbWF0ZVJ1bm5lclwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJCRqcUxpdGVcIixcIiQkZm9yY2VSZWZsb3dcIixmdW5jdGlvbihkLHksdix6LGwscyxPLHgsdCxsYSxFKXtmdW5jdGlvbiBoKGEsYil7dmFyIGM9XG5HKGEpLGY9W10sZz13W2JdO2cmJnEoZyxmdW5jdGlvbihhKXthLm5vZGUuY29udGFpbnMoYykmJmYucHVzaChhLmNhbGxiYWNrKX0pO3JldHVybiBmfWZ1bmN0aW9uIFMoYSxiLGMsZil7ZChmdW5jdGlvbigpe3EoaChiLGEpLGZ1bmN0aW9uKGEpe2EoYixjLGYpfSl9KX1mdW5jdGlvbiB1KGEsZyxtKXtmdW5jdGlvbiBkKGIsYyxnLGYpe1MoYyxhLGcsZik7Yi5wcm9ncmVzcyhjLGcsZil9ZnVuY3Rpb24gdyhiKXt2YXIgYz1hLGc9bTtnLnByZXBhcmF0aW9uQ2xhc3NlcyYmKGMucmVtb3ZlQ2xhc3MoZy5wcmVwYXJhdGlvbkNsYXNzZXMpLGcucHJlcGFyYXRpb25DbGFzc2VzPW51bGwpO2cuYWN0aXZlQ2xhc3NlcyYmKGMucmVtb3ZlQ2xhc3MoZy5hY3RpdmVDbGFzc2VzKSxnLmFjdGl2ZUNsYXNzZXM9bnVsbCk7RGEoYSxtKTtlYShhLG0pO20uZG9tT3BlcmF0aW9uKCk7ZS5jb21wbGV0ZSghYil9dmFyIEIsaDtpZihhPUZhKGEpKUI9RyhhKSxoPWEucGFyZW50KCk7bT1pYShtKTt2YXIgZT1cbm5ldyB4OyQobS5hZGRDbGFzcykmJihtLmFkZENsYXNzPW0uYWRkQ2xhc3Muam9pbihcIiBcIikpO20uYWRkQ2xhc3MmJiFNKG0uYWRkQ2xhc3MpJiYobS5hZGRDbGFzcz1udWxsKTskKG0ucmVtb3ZlQ2xhc3MpJiYobS5yZW1vdmVDbGFzcz1tLnJlbW92ZUNsYXNzLmpvaW4oXCIgXCIpKTttLnJlbW92ZUNsYXNzJiYhTShtLnJlbW92ZUNsYXNzKSYmKG0ucmVtb3ZlQ2xhc3M9bnVsbCk7bS5mcm9tJiYhcGEobS5mcm9tKSYmKG0uZnJvbT1udWxsKTttLnRvJiYhcGEobS50bykmJihtLnRvPW51bGwpO2lmKCFCKXJldHVybiB3KCksZTt2YXIgaz1bQi5jbGFzc05hbWUsbS5hZGRDbGFzcyxtLnJlbW92ZUNsYXNzXS5qb2luKFwiIFwiKTtpZighQyhrKSlyZXR1cm4gdygpLGU7dmFyIGw9MDw9W1wiZW50ZXJcIixcIm1vdmVcIixcImxlYXZlXCJdLmluZGV4T2YoZyksdT0hSHx8VS5nZXQoQiksaz0hdSYmQS5nZXQoQil8fHt9LHY9ISFrLnN0YXRlO3V8fHYmJjE9PWsuc3RhdGV8fCh1PSFwKGEsaCxnKSk7aWYodSlyZXR1cm4gdygpLFxuZTtsJiZKKGEpO2g9e3N0cnVjdHVyYWw6bCxlbGVtZW50OmEsZXZlbnQ6ZyxjbG9zZTp3LG9wdGlvbnM6bSxydW5uZXI6ZX07aWYodil7aWYoYihcInNraXBcIixhLGgsaykpe2lmKDI9PT1rLnN0YXRlKXJldHVybiB3KCksZTtSKGEsay5vcHRpb25zLG0pO3JldHVybiBrLnJ1bm5lcn1pZihiKFwiY2FuY2VsXCIsYSxoLGspKWlmKDI9PT1rLnN0YXRlKWsucnVubmVyLmVuZCgpO2Vsc2UgaWYoay5zdHJ1Y3R1cmFsKWsuY2xvc2UoKTtlbHNlIHJldHVybiBSKGEsay5vcHRpb25zLGgub3B0aW9ucyksay5ydW5uZXI7ZWxzZSBpZihiKFwiam9pblwiLGEsaCxrKSlpZigyPT09ay5zdGF0ZSlSKGEsbSx7fSk7ZWxzZSByZXR1cm4gSmEoYSxsP2c6bnVsbCxtKSxnPWguZXZlbnQ9ay5ldmVudCxtPVIoYSxrLm9wdGlvbnMsaC5vcHRpb25zKSxrLnJ1bm5lcn1lbHNlIFIoYSxtLHt9KTsodj1oLnN0cnVjdHVyYWwpfHwodj1cImFuaW1hdGVcIj09PWguZXZlbnQmJjA8T2JqZWN0LmtleXMoaC5vcHRpb25zLnRvfHxcbnt9KS5sZW5ndGh8fGMoaC5vcHRpb25zKSk7aWYoIXYpcmV0dXJuIHcoKSxmKGEpLGU7dmFyIHQ9KGsuY291bnRlcnx8MCkrMTtoLmNvdW50ZXI9dDtyKGEsMSxoKTt5LiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3ZhciBiPUEuZ2V0KEIpLGg9IWIsYj1ifHx7fSxKPTA8KGEucGFyZW50KCl8fFtdKS5sZW5ndGgmJihcImFuaW1hdGVcIj09PWIuZXZlbnR8fGIuc3RydWN0dXJhbHx8YyhiLm9wdGlvbnMpKTtpZihofHxiLmNvdW50ZXIhPT10fHwhSil7aCYmKERhKGEsbSksZWEoYSxtKSk7aWYoaHx8bCYmYi5ldmVudCE9PWcpbS5kb21PcGVyYXRpb24oKSxlLmVuZCgpO0p8fGYoYSl9ZWxzZSBnPSFiLnN0cnVjdHVyYWwmJmMoYi5vcHRpb25zLCEwKT9cInNldENsYXNzXCI6Yi5ldmVudCxyKGEsMiksYj1PKGEsZyxiLm9wdGlvbnMpLGIuZG9uZShmdW5jdGlvbihiKXt3KCFiKTsoYj1BLmdldChCKSkmJmIuY291bnRlcj09PXQmJmYoRyhhKSk7ZChlLGcsXCJjbG9zZVwiLHt9KX0pLGUuc2V0SG9zdChiKSxcbmQoZSxnLFwic3RhcnRcIix7fSl9KTtyZXR1cm4gZX1mdW5jdGlvbiBKKGEpe2E9RyhhKS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbmctYW5pbWF0ZV1cIik7cShhLGZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1uZy1hbmltYXRlXCIpKSxjPUEuZ2V0KGEpO3N3aXRjaChiKXtjYXNlIDI6Yy5ydW5uZXIuZW5kKCk7Y2FzZSAxOmMmJkEucmVtb3ZlKGEpfX0pfWZ1bmN0aW9uIGYoYSl7YT1HKGEpO2EucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1uZy1hbmltYXRlXCIpO0EucmVtb3ZlKGEpfWZ1bmN0aW9uIEIoYSxiKXtyZXR1cm4gRyhhKT09PUcoYil9ZnVuY3Rpb24gcChhLGIsYyl7Yz1CKGEsbCl8fFwiSFRNTFwiPT09YVswXS5ub2RlTmFtZTt2YXIgZz1CKGEsdiksZj0hMSxkO2ZvcigoYT1hLmRhdGEoXCIkbmdBbmltYXRlUGluXCIpKSYmKGI9YSk7YiYmYi5sZW5ndGg7KXtnfHwoZz1CKGIsdikpO2E9YlswXTtpZigxIT09YS5ub2RlVHlwZSlicmVhazt2YXIgdz1cbkEuZ2V0KGEpfHx7fTtmfHwoZj13LnN0cnVjdHVyYWx8fFUuZ2V0KGEpKTtpZihMYShkKXx8ITA9PT1kKWE9Yi5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiKSxNYShhKSYmKGQ9YSk7aWYoZiYmITE9PT1kKWJyZWFrO2d8fChnPUIoYix2KSxnfHwoYT1iLmRhdGEoXCIkbmdBbmltYXRlUGluXCIpKSYmKGI9YSkpO2N8fChjPUIoYixsKSk7Yj1iLnBhcmVudCgpfXJldHVybighZnx8ZCkmJmcmJmN9ZnVuY3Rpb24gcihhLGIsYyl7Yz1jfHx7fTtjLnN0YXRlPWI7YT1HKGEpO2Euc2V0QXR0cmlidXRlKFwiZGF0YS1uZy1hbmltYXRlXCIsYik7Yz0oYj1BLmdldChhKSk/eWEoYixjKTpjO0EucHV0KGEsYyl9dmFyIEE9bmV3IHMsVT1uZXcgcyxIPW51bGwsZz15LiR3YXRjaChmdW5jdGlvbigpe3JldHVybiAwPT09dC50b3RhbFBlbmRpbmdSZXF1ZXN0c30sZnVuY3Rpb24oYSl7YSYmKGcoKSx5LiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3kuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7bnVsbD09PVxuSCYmKEg9ITApfSl9KSl9KSx3PXt9LGs9YS5jbGFzc05hbWVGaWx0ZXIoKSxDPWs/ZnVuY3Rpb24oYSl7cmV0dXJuIGsudGVzdChhKX06ZnVuY3Rpb24oKXtyZXR1cm4hMH0sRGE9UShsYSk7cmV0dXJue29uOmZ1bmN0aW9uKGEsYixjKXtiPW1hKGIpO3dbYV09d1thXXx8W107d1thXS5wdXNoKHtub2RlOmIsY2FsbGJhY2s6Y30pfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGcoYSxiLGMpe3ZhciBmPW1hKGIpO3JldHVybiBhLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hKGEubm9kZT09PWYmJighY3x8YS5jYWxsYmFjaz09PWMpKX0pfXZhciBmPXdbYV07ZiYmKHdbYV09MT09PWFyZ3VtZW50cy5sZW5ndGg/bnVsbDpnKGYsYixjKSl9LHBpbjpmdW5jdGlvbihhLGIpe3VhKHFhKGEpLFwiZWxlbWVudFwiLFwibm90IGFuIGVsZW1lbnRcIik7dWEocWEoYiksXCJwYXJlbnRFbGVtZW50XCIsXCJub3QgYW4gZWxlbWVudFwiKTthLmRhdGEoXCIkbmdBbmltYXRlUGluXCIsYil9LHB1c2g6ZnVuY3Rpb24oYSxcbmIsYyxnKXtjPWN8fHt9O2MuZG9tT3BlcmF0aW9uPWc7cmV0dXJuIHUoYSxiLGMpfSxlbmFibGVkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDtpZigwPT09YyliPSEhSDtlbHNlIGlmKHFhKGEpKXt2YXIgZz1HKGEpLGY9VS5nZXQoZyk7MT09PWM/Yj0hZjooYj0hIWIpP2YmJlUucmVtb3ZlKGcpOlUucHV0KGcsITApfWVsc2UgYj1IPSEhYTtyZXR1cm4gYn19fV19XSkucHJvdmlkZXIoXCIkJGFuaW1hdGlvblwiLFtcIiRhbmltYXRlUHJvdmlkZXJcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLmRhdGEoXCIkJGFuaW1hdGlvblJ1bm5lclwiKX12YXIgYz10aGlzLmRyaXZlcnM9W107dGhpcy4kZ2V0PVtcIiQkanFMaXRlXCIsXCIkcm9vdFNjb3BlXCIsXCIkaW5qZWN0b3JcIixcIiQkQW5pbWF0ZVJ1bm5lclwiLFwiJCRIYXNoTWFwXCIsXCIkJHJBRlNjaGVkdWxlclwiLGZ1bmN0aW9uKGEsZSx5LHYseixsKXtmdW5jdGlvbiBzKGEpe2Z1bmN0aW9uIGIoYSl7aWYoYS5wcm9jZXNzZWQpcmV0dXJuIGE7XG5hLnByb2Nlc3NlZD0hMDt2YXIgZj1hLmRvbU5vZGUsZD1mLnBhcmVudE5vZGU7ZS5wdXQoZixhKTtmb3IodmFyIGg7ZDspe2lmKGg9ZS5nZXQoZCkpe2gucHJvY2Vzc2VkfHwoaD1iKGgpKTticmVha31kPWQucGFyZW50Tm9kZX0oaHx8YykuY2hpbGRyZW4ucHVzaChhKTtyZXR1cm4gYX12YXIgYz17Y2hpbGRyZW46W119LGQsZT1uZXcgejtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgbD1hW2RdO2UucHV0KGwuZG9tTm9kZSxhW2RdPXtkb21Ob2RlOmwuZG9tTm9kZSxmbjpsLmZuLGNoaWxkcmVuOltdfSl9Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKyliKGFbZF0pO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ7Zm9yKGQ9MDtkPGEuY2hpbGRyZW4ubGVuZ3RoO2QrKyljLnB1c2goYS5jaGlsZHJlbltkXSk7YT1jLmxlbmd0aDt2YXIgaD0wLGU9W107Zm9yKGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGw9Y1tkXTswPj1hJiYoYT1oLGg9MCxiLnB1c2goZSksZT1bXSk7ZS5wdXNoKGwuZm4pO1xubC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2grKztjLnB1c2goYSl9KTthLS19ZS5sZW5ndGgmJmIucHVzaChlKTtyZXR1cm4gYn0oYyl9dmFyIE89W10seD1RKGEpO3JldHVybiBmdW5jdGlvbih0LHosRSl7ZnVuY3Rpb24gaChhKXthPWEuaGFzQXR0cmlidXRlKFwibmctYW5pbWF0ZS1yZWZcIik/W2FdOmEucXVlcnlTZWxlY3RvckFsbChcIltuZy1hbmltYXRlLXJlZl1cIik7dmFyIGI9W107cShhLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmctYW5pbWF0ZS1yZWZcIik7YyYmYy5sZW5ndGgmJmIucHVzaChhKX0pO3JldHVybiBifWZ1bmN0aW9uIFMoYSl7dmFyIGI9W10sYz17fTtxKGEsZnVuY3Rpb24oYSxnKXt2YXIgZD1HKGEuZWxlbWVudCksZj0wPD1bXCJlbnRlclwiLFwibW92ZVwiXS5pbmRleE9mKGEuZXZlbnQpLGQ9YS5zdHJ1Y3R1cmFsP2goZCk6W107aWYoZC5sZW5ndGgpe3ZhciBlPWY/XCJ0b1wiOlwiZnJvbVwiO3EoZCxmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShcIm5nLWFuaW1hdGUtcmVmXCIpO1xuY1tiXT1jW2JdfHx7fTtjW2JdW2VdPXthbmltYXRpb25JRDpnLGVsZW1lbnQ6SShhKX19KX1lbHNlIGIucHVzaChhKX0pO3ZhciBkPXt9LGY9e307cShjLGZ1bmN0aW9uKGMsZSl7dmFyIGg9Yy5mcm9tLHI9Yy50bztpZihoJiZyKXt2YXIgSj1hW2guYW5pbWF0aW9uSURdLGs9YVtyLmFuaW1hdGlvbklEXSxCPWguYW5pbWF0aW9uSUQudG9TdHJpbmcoKTtpZighZltCXSl7dmFyIGw9ZltCXT17c3RydWN0dXJhbDohMCxiZWZvcmVTdGFydDpmdW5jdGlvbigpe0ouYmVmb3JlU3RhcnQoKTtrLmJlZm9yZVN0YXJ0KCl9LGNsb3NlOmZ1bmN0aW9uKCl7Si5jbG9zZSgpO2suY2xvc2UoKX0sY2xhc3Nlczp1KEouY2xhc3NlcyxrLmNsYXNzZXMpLGZyb206Six0bzprLGFuY2hvcnM6W119O2wuY2xhc3Nlcy5sZW5ndGg/Yi5wdXNoKGwpOihiLnB1c2goSiksYi5wdXNoKGspKX1mW0JdLmFuY2hvcnMucHVzaCh7b3V0OmguZWxlbWVudCxcImluXCI6ci5lbGVtZW50fSl9ZWxzZSBoPWg/aC5hbmltYXRpb25JRDpcbnIuYW5pbWF0aW9uSUQscj1oLnRvU3RyaW5nKCksZFtyXXx8KGRbcl09ITAsYi5wdXNoKGFbaF0pKX0pO3JldHVybiBifWZ1bmN0aW9uIHUoYSxiKXthPWEuc3BsaXQoXCIgXCIpO2I9Yi5zcGxpdChcIiBcIik7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGY9YVtkXTtpZihcIm5nLVwiIT09Zi5zdWJzdHJpbmcoMCwzKSlmb3IodmFyIGg9MDtoPGIubGVuZ3RoO2grKylpZihmPT09YltoXSl7Yy5wdXNoKGYpO2JyZWFrfX1yZXR1cm4gYy5qb2luKFwiIFwiKX1mdW5jdGlvbiBKKGEpe2Zvcih2YXIgYj1jLmxlbmd0aC0xOzA8PWI7Yi0tKXt2YXIgZD1jW2JdO2lmKHkuaGFzKGQpJiYoZD15LmdldChkKShhKSkpcmV0dXJuIGR9fWZ1bmN0aW9uIGYoYSxjKXthLmZyb20mJmEudG8/KGIoYS5mcm9tLmVsZW1lbnQpLnNldEhvc3QoYyksYihhLnRvLmVsZW1lbnQpLnNldEhvc3QoYykpOmIoYS5lbGVtZW50KS5zZXRIb3N0KGMpfWZ1bmN0aW9uIEIoKXt2YXIgYT1iKHQpOyFhfHxcImxlYXZlXCI9PT1cbnomJkUuJCRkb21PcGVyYXRpb25GaXJlZHx8YS5lbmQoKX1mdW5jdGlvbiBwKGIpe3Qub2ZmKFwiJGRlc3Ryb3lcIixCKTt0LnJlbW92ZURhdGEoXCIkJGFuaW1hdGlvblJ1bm5lclwiKTt4KHQsRSk7ZWEodCxFKTtFLmRvbU9wZXJhdGlvbigpO0gmJmEucmVtb3ZlQ2xhc3ModCxIKTt0LnJlbW92ZUNsYXNzKFwibmctYW5pbWF0ZVwiKTtBLmNvbXBsZXRlKCFiKX1FPWlhKEUpO3ZhciByPTA8PVtcImVudGVyXCIsXCJtb3ZlXCIsXCJsZWF2ZVwiXS5pbmRleE9mKHopLEE9bmV3IHYoe2VuZDpmdW5jdGlvbigpe3AoKX0sY2FuY2VsOmZ1bmN0aW9uKCl7cCghMCl9fSk7aWYoIWMubGVuZ3RoKXJldHVybiBwKCksQTt0LmRhdGEoXCIkJGFuaW1hdGlvblJ1bm5lclwiLEEpO3ZhciBVPXZhKHQuYXR0cihcImNsYXNzXCIpLHZhKEUuYWRkQ2xhc3MsRS5yZW1vdmVDbGFzcykpLEg9RS50ZW1wQ2xhc3NlcztIJiYoVSs9XCIgXCIrSCxFLnRlbXBDbGFzc2VzPW51bGwpO08ucHVzaCh7ZWxlbWVudDp0LGNsYXNzZXM6VSxldmVudDp6LFxuc3RydWN0dXJhbDpyLG9wdGlvbnM6RSxiZWZvcmVTdGFydDpmdW5jdGlvbigpe3QuYWRkQ2xhc3MoXCJuZy1hbmltYXRlXCIpO0gmJmEuYWRkQ2xhc3ModCxIKX0sY2xvc2U6cH0pO3Qub24oXCIkZGVzdHJveVwiLEIpO2lmKDE8Ty5sZW5ndGgpcmV0dXJuIEE7ZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXt2YXIgYT1bXTtxKE8sZnVuY3Rpb24oYyl7YihjLmVsZW1lbnQpP2EucHVzaChjKTpjLmNsb3NlKCl9KTtPLmxlbmd0aD0wO3ZhciBjPVMoYSksZD1bXTtxKGMsZnVuY3Rpb24oYSl7ZC5wdXNoKHtkb21Ob2RlOkcoYS5mcm9tP2EuZnJvbS5lbGVtZW50OmEuZWxlbWVudCksZm46ZnVuY3Rpb24oKXthLmJlZm9yZVN0YXJ0KCk7dmFyIGMsZD1hLmNsb3NlO2lmKGIoYS5hbmNob3JzP2EuZnJvbS5lbGVtZW50fHxhLnRvLmVsZW1lbnQ6YS5lbGVtZW50KSl7dmFyIGc9SihhKTtnJiYoYz1nLnN0YXJ0KX1jPyhjPWMoKSxjLmRvbmUoZnVuY3Rpb24oYSl7ZCghYSl9KSxmKGEsYykpOmQoKX19KX0pO1xubChzKGQpKX0pO3JldHVybiBBfX1dfV0pLnByb3ZpZGVyKFwiJGFuaW1hdGVDc3NcIixbXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7dmFyIGI9QmEoKSxjPUJhKCk7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiQkanFMaXRlXCIsXCIkJEFuaW1hdGVSdW5uZXJcIixcIiR0aW1lb3V0XCIsXCIkJGZvcmNlUmVmbG93XCIsXCIkc25pZmZlclwiLFwiJCRyQUZTY2hlZHVsZXJcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxlLHksdix6LGwscyxPKXtmdW5jdGlvbiB4KGEsYil7dmFyIGM9YS5wYXJlbnROb2RlO3JldHVybihjLiQkbmdBbmltYXRlUGFyZW50S2V5fHwoYy4kJG5nQW5pbWF0ZVBhcmVudEtleT0rK1MpKStcIi1cIithLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpK1wiLVwiK2J9ZnVuY3Rpb24gdChoLGYsbCxwKXt2YXIgcjswPGIuY291bnQobCkmJihyPWMuZ2V0KGwpLHJ8fChmPVYoZixcIi1zdGFnZ2VyXCIpLGUuYWRkQ2xhc3MoaCxmKSxyPXphKGEsaCxwKSxyLmFuaW1hdGlvbkR1cmF0aW9uPU1hdGgubWF4KHIuYW5pbWF0aW9uRHVyYXRpb24sXG4wKSxyLnRyYW5zaXRpb25EdXJhdGlvbj1NYXRoLm1heChyLnRyYW5zaXRpb25EdXJhdGlvbiwwKSxlLnJlbW92ZUNsYXNzKGgsZiksYy5wdXQobCxyKSkpO3JldHVybiByfHx7fX1mdW5jdGlvbiBsYShhKXt1LnB1c2goYSk7cy53YWl0VW50aWxRdWlldChmdW5jdGlvbigpe2IuZmx1c2goKTtjLmZsdXNoKCk7Zm9yKHZhciBhPXooKSxkPTA7ZDx1Lmxlbmd0aDtkKyspdVtkXShhKTt1Lmxlbmd0aD0wfSl9ZnVuY3Rpb24gRShjLGYsaCl7Zj1iLmdldChoKTtmfHwoZj16YShhLGMsTmEpLFwiaW5maW5pdGVcIj09PWYuYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQmJihmLmFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50PTEpKTtiLnB1dChoLGYpO2M9ZjtoPWMuYW5pbWF0aW9uRGVsYXk7Zj1jLnRyYW5zaXRpb25EZWxheTtjLm1heERlbGF5PWgmJmY/TWF0aC5tYXgoaCxmKTpofHxmO2MubWF4RHVyYXRpb249TWF0aC5tYXgoYy5hbmltYXRpb25EdXJhdGlvbipjLmFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50LFxuYy50cmFuc2l0aW9uRHVyYXRpb24pO3JldHVybiBjfXZhciBoPVEoZSksUz0wLHU9W107cmV0dXJuIGZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gZCgpe3IoKX1mdW5jdGlvbiBwKCl7cighMCl9ZnVuY3Rpb24gcihiKXtpZighKHN8fFMmJnopKXtzPSEwO3o9ITE7Yy4kJHNraXBQcmVwYXJhdGlvbkNsYXNzZXN8fGUucmVtb3ZlQ2xhc3MoYSxhYSk7ZS5yZW1vdmVDbGFzcyhhLFopO25hKGcsITEpO2phKGcsITEpO3EodyxmdW5jdGlvbihhKXtnLnN0eWxlW2FbMF1dPVwiXCJ9KTtoKGEsYyk7ZWEoYSxjKTtpZihjLm9uRG9uZSljLm9uRG9uZSgpO20mJm0uY29tcGxldGUoIWIpfX1mdW5jdGlvbiBBKGEpe24uYmxvY2tUcmFuc2l0aW9uJiZqYShnLGEpO24uYmxvY2tLZXlmcmFtZUFuaW1hdGlvbiYmbmEoZywhIWEpfWZ1bmN0aW9uIHUoKXttPW5ldyB5KHtlbmQ6ZCxjYW5jZWw6cH0pO2xhKEwpO3IoKTtyZXR1cm57JCR3aWxsQW5pbWF0ZTohMSxzdGFydDpmdW5jdGlvbigpe3JldHVybiBtfSxcbmVuZDpkfX1mdW5jdGlvbiBIKCl7ZnVuY3Rpb24gYigpe2lmKCFzKXtBKCExKTtxKHcsZnVuY3Rpb24oYSl7Zy5zdHlsZVthWzBdXT1hWzFdfSk7aChhLGMpO2UuYWRkQ2xhc3MoYSxaKTtpZihuLnJlY2FsY3VsYXRlVGltaW5nU3R5bGVzKXtoYT1nLmNsYXNzTmFtZStcIiBcIithYTtiYT14KGcsaGEpO0Q9RShnLGhhLGJhKTtZPUQubWF4RGVsYXk7ST1NYXRoLm1heChZLDApO0s9RC5tYXhEdXJhdGlvbjtpZigwPT09Syl7cigpO3JldHVybn1uLmhhc1RyYW5zaXRpb25zPTA8RC50cmFuc2l0aW9uRHVyYXRpb247bi5oYXNBbmltYXRpb25zPTA8RC5hbmltYXRpb25EdXJhdGlvbn1uLmFwcGx5QW5pbWF0aW9uRGVsYXkmJihZPVwiYm9vbGVhblwiIT09dHlwZW9mIGMuZGVsYXkmJm9hKGMuZGVsYXkpP3BhcnNlRmxvYXQoYy5kZWxheSk6WSxJPU1hdGgubWF4KFksMCksRC5hbmltYXRpb25EZWxheT1ZLGRhPVtrYSxZK1wic1wiXSx3LnB1c2goZGEpLGcuc3R5bGVbZGFbMF1dPWRhWzFdKTtNPTFFMypcbkk7UT0xRTMqSztpZihjLmVhc2luZyl7dmFyIGsscD1jLmVhc2luZztuLmhhc1RyYW5zaXRpb25zJiYoaz1OK1wiVGltaW5nRnVuY3Rpb25cIix3LnB1c2goW2sscF0pLGcuc3R5bGVba109cCk7bi5oYXNBbmltYXRpb25zJiYoaz1YK1wiVGltaW5nRnVuY3Rpb25cIix3LnB1c2goW2sscF0pLGcuc3R5bGVba109cCl9RC50cmFuc2l0aW9uRHVyYXRpb24mJm0ucHVzaChyYSk7RC5hbmltYXRpb25EdXJhdGlvbiYmbS5wdXNoKHNhKTtIPURhdGUubm93KCk7dmFyIHU9TSsxLjUqUTtrPUgrdTt2YXIgcD1hLmRhdGEoXCIkJGFuaW1hdGVDc3NcIil8fFtdLHo9ITA7aWYocC5sZW5ndGgpe3ZhciBDPXBbMF07KHo9az5DLmV4cGVjdGVkRW5kVGltZSk/di5jYW5jZWwoQy50aW1lcik6cC5wdXNoKHIpfXomJih1PXYoZCx1LCExKSxwWzBdPXt0aW1lcjp1LGV4cGVjdGVkRW5kVGltZTprfSxwLnB1c2gociksYS5kYXRhKFwiJCRhbmltYXRlQ3NzXCIscCkpO2Eub24obS5qb2luKFwiIFwiKSxsKTt4YShhLGMpfX1cbmZ1bmN0aW9uIGQoKXt2YXIgYj1hLmRhdGEoXCIkJGFuaW1hdGVDc3NcIik7aWYoYil7Zm9yKHZhciBjPTE7YzxiLmxlbmd0aDtjKyspYltjXSgpO2EucmVtb3ZlRGF0YShcIiQkYW5pbWF0ZUNzc1wiKX19ZnVuY3Rpb24gbChhKXthLnN0b3BQcm9wYWdhdGlvbigpO3ZhciBiPWEub3JpZ2luYWxFdmVudHx8YTthPWIuJG1hbnVhbFRpbWVTdGFtcHx8Yi50aW1lU3RhbXB8fERhdGUubm93KCk7Yj1wYXJzZUZsb2F0KGIuZWxhcHNlZFRpbWUudG9GaXhlZCgzKSk7TWF0aC5tYXgoYS1ILDApPj1NJiZiPj1LJiYoUz0hMCxyKCkpfWlmKCFzKWlmKGcucGFyZW50Tm9kZSl7dmFyIEgsbT1bXSxrPWZ1bmN0aW9uKGEpe2lmKFMpeiYmYSYmKHo9ITEscigpKTtlbHNlIGlmKHo9IWEsRC5hbmltYXRpb25EdXJhdGlvbilpZihhPW5hKGcseikseil3LnB1c2goYSk7ZWxzZXt2YXIgYj13LGM9Yi5pbmRleE9mKGEpOzA8PWEmJmIuc3BsaWNlKGMsMSl9fSxwPTA8VyYmKEQudHJhbnNpdGlvbkR1cmF0aW9uJiZcbjA9PT1ULnRyYW5zaXRpb25EdXJhdGlvbnx8RC5hbmltYXRpb25EdXJhdGlvbiYmMD09PVQuYW5pbWF0aW9uRHVyYXRpb24pJiZNYXRoLm1heChULmFuaW1hdGlvbkRlbGF5LFQudHJhbnNpdGlvbkRlbGF5KTtwP3YoYixNYXRoLmZsb29yKHAqVyoxRTMpLCExKTpiKCk7Ri5yZXN1bWU9ZnVuY3Rpb24oKXtrKCEwKX07Ri5wYXVzZT1mdW5jdGlvbigpe2soITEpfX1lbHNlIHIoKX12YXIgZz1HKGEpO2lmKCFnfHwhZy5wYXJlbnROb2RlfHwhTy5lbmFibGVkKCkpcmV0dXJuIHUoKTtjPWlhKGMpO3ZhciB3PVtdLGs9YS5hdHRyKFwiY2xhc3NcIiksQz1FYShjKSxzLHosUyxtLEYsSSxNLEssUTtpZigwPT09Yy5kdXJhdGlvbnx8IWwuYW5pbWF0aW9ucyYmIWwudHJhbnNpdGlvbnMpcmV0dXJuIHUoKTt2YXIgY2E9Yy5ldmVudCYmJChjLmV2ZW50KT9jLmV2ZW50LmpvaW4oXCIgXCIpOmMuZXZlbnQsUj1cIlwiLFA9XCJcIjtjYSYmYy5zdHJ1Y3R1cmFsP1I9VihjYSxcIm5nLVwiLCEwKTpjYSYmKFI9Y2EpO2MuYWRkQ2xhc3MmJlxuKFArPVYoYy5hZGRDbGFzcyxcIi1hZGRcIikpO2MucmVtb3ZlQ2xhc3MmJihQLmxlbmd0aCYmKFArPVwiIFwiKSxQKz1WKGMucmVtb3ZlQ2xhc3MsXCItcmVtb3ZlXCIpKTtjLmFwcGx5Q2xhc3Nlc0Vhcmx5JiZQLmxlbmd0aCYmaChhLGMpO3ZhciBhYT1bUixQXS5qb2luKFwiIFwiKS50cmltKCksaGE9aytcIiBcIithYSxaPVYoYWEsXCItYWN0aXZlXCIpLGs9Qy50byYmMDxPYmplY3Qua2V5cyhDLnRvKS5sZW5ndGg7aWYoISgwPChjLmtleWZyYW1lU3R5bGV8fFwiXCIpLmxlbmd0aHx8a3x8YWEpKXJldHVybiB1KCk7dmFyIGJhLFQ7MDxjLnN0YWdnZXI/KEM9cGFyc2VGbG9hdChjLnN0YWdnZXIpLFQ9e3RyYW5zaXRpb25EZWxheTpDLGFuaW1hdGlvbkRlbGF5OkMsdHJhbnNpdGlvbkR1cmF0aW9uOjAsYW5pbWF0aW9uRHVyYXRpb246MH0pOihiYT14KGcsaGEpLFQ9dChnLGFhLGJhLE9hKSk7Yy4kJHNraXBQcmVwYXJhdGlvbkNsYXNzZXN8fGUuYWRkQ2xhc3MoYSxhYSk7Yy50cmFuc2l0aW9uU3R5bGUmJihDPVxuW04sYy50cmFuc2l0aW9uU3R5bGVdLGZhKGcsQyksdy5wdXNoKEMpKTswPD1jLmR1cmF0aW9uJiYoQz0wPGcuc3R5bGVbTl0ubGVuZ3RoLEM9QWEoYy5kdXJhdGlvbixDKSxmYShnLEMpLHcucHVzaChDKSk7Yy5rZXlmcmFtZVN0eWxlJiYoQz1bWCxjLmtleWZyYW1lU3R5bGVdLGZhKGcsQyksdy5wdXNoKEMpKTt2YXIgVz1UPzA8PWMuc3RhZ2dlckluZGV4P2Muc3RhZ2dlckluZGV4OmIuY291bnQoYmEpOjA7KGNhPTA9PT1XKSYmIWMuc2tpcEJsb2NraW5nJiZqYShnLDk5OTkpO3ZhciBEPUUoZyxoYSxiYSksWT1ELm1heERlbGF5O0k9TWF0aC5tYXgoWSwwKTtLPUQubWF4RHVyYXRpb247dmFyIG49e307bi5oYXNUcmFuc2l0aW9ucz0wPEQudHJhbnNpdGlvbkR1cmF0aW9uO24uaGFzQW5pbWF0aW9ucz0wPEQuYW5pbWF0aW9uRHVyYXRpb247bi5oYXNUcmFuc2l0aW9uQWxsPW4uaGFzVHJhbnNpdGlvbnMmJlwiYWxsXCI9PUQudHJhbnNpdGlvblByb3BlcnR5O24uYXBwbHlUcmFuc2l0aW9uRHVyYXRpb249XG5rJiYobi5oYXNUcmFuc2l0aW9ucyYmIW4uaGFzVHJhbnNpdGlvbkFsbHx8bi5oYXNBbmltYXRpb25zJiYhbi5oYXNUcmFuc2l0aW9ucyk7bi5hcHBseUFuaW1hdGlvbkR1cmF0aW9uPWMuZHVyYXRpb24mJm4uaGFzQW5pbWF0aW9ucztuLmFwcGx5VHJhbnNpdGlvbkRlbGF5PW9hKGMuZGVsYXkpJiYobi5hcHBseVRyYW5zaXRpb25EdXJhdGlvbnx8bi5oYXNUcmFuc2l0aW9ucyk7bi5hcHBseUFuaW1hdGlvbkRlbGF5PW9hKGMuZGVsYXkpJiZuLmhhc0FuaW1hdGlvbnM7bi5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlcz0wPFAubGVuZ3RoO2lmKG4uYXBwbHlUcmFuc2l0aW9uRHVyYXRpb258fG4uYXBwbHlBbmltYXRpb25EdXJhdGlvbilLPWMuZHVyYXRpb24/cGFyc2VGbG9hdChjLmR1cmF0aW9uKTpLLG4uYXBwbHlUcmFuc2l0aW9uRHVyYXRpb24mJihuLmhhc1RyYW5zaXRpb25zPSEwLEQudHJhbnNpdGlvbkR1cmF0aW9uPUssQz0wPGcuc3R5bGVbTitcIlByb3BlcnR5XCJdLmxlbmd0aCx3LnB1c2goQWEoSyxcbkMpKSksbi5hcHBseUFuaW1hdGlvbkR1cmF0aW9uJiYobi5oYXNBbmltYXRpb25zPSEwLEQuYW5pbWF0aW9uRHVyYXRpb249Syx3LnB1c2goW3RhLEsrXCJzXCJdKSk7aWYoMD09PUsmJiFuLnJlY2FsY3VsYXRlVGltaW5nU3R5bGVzKXJldHVybiB1KCk7aWYobnVsbCE9Yy5kZWxheSl7dmFyIGRhPXBhcnNlRmxvYXQoYy5kZWxheSk7bi5hcHBseVRyYW5zaXRpb25EZWxheSYmdy5wdXNoKFtnYSxkYStcInNcIl0pO24uYXBwbHlBbmltYXRpb25EZWxheSYmdy5wdXNoKFtrYSxkYStcInNcIl0pfW51bGw9PWMuZHVyYXRpb24mJjA8RC50cmFuc2l0aW9uRHVyYXRpb24mJihuLnJlY2FsY3VsYXRlVGltaW5nU3R5bGVzPW4ucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXN8fGNhKTtNPTFFMypJO1E9MUUzKks7Yy5za2lwQmxvY2tpbmd8fChuLmJsb2NrVHJhbnNpdGlvbj0wPEQudHJhbnNpdGlvbkR1cmF0aW9uLG4uYmxvY2tLZXlmcmFtZUFuaW1hdGlvbj0wPEQuYW5pbWF0aW9uRHVyYXRpb24mJjA8VC5hbmltYXRpb25EZWxheSYmXG4wPT09VC5hbmltYXRpb25EdXJhdGlvbik7d2EoYSxjKTtuLmJsb2NrVHJhbnNpdGlvbnx8bi5ibG9ja0tleWZyYW1lQW5pbWF0aW9uP0EoSyk6Yy5za2lwQmxvY2tpbmd8fGphKGcsITEpO3JldHVybnskJHdpbGxBbmltYXRlOiEwLGVuZDpkLHN0YXJ0OmZ1bmN0aW9uKCl7aWYoIXMpcmV0dXJuIEY9e2VuZDpkLGNhbmNlbDpwLHJlc3VtZTpudWxsLHBhdXNlOm51bGx9LG09bmV3IHkoRiksbGEoSCksbX19fX1dfV0pLnByb3ZpZGVyKFwiJCRhbmltYXRlQ3NzRHJpdmVyXCIsW1wiJCRhbmltYXRpb25Qcm92aWRlclwiLGZ1bmN0aW9uKGEpe2EuZHJpdmVycy5wdXNoKFwiJCRhbmltYXRlQ3NzRHJpdmVyXCIpO3RoaXMuJGdldD1bXCIkYW5pbWF0ZUNzc1wiLFwiJHJvb3RTY29wZVwiLFwiJCRBbmltYXRlUnVubmVyXCIsXCIkcm9vdEVsZW1lbnRcIixcIiQkYm9keVwiLFwiJHNuaWZmZXJcIixcIiQkanFMaXRlXCIsZnVuY3Rpb24oYSxjLGQsZSx5LHYseil7ZnVuY3Rpb24gbChhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXGJuZy1cXFMrXFxiL2csXG5cIlwiKX1mdW5jdGlvbiBzKGEsYil7TShhKSYmKGE9YS5zcGxpdChcIiBcIikpO00oYikmJihiPWIuc3BsaXQoXCIgXCIpKTtyZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuLTE9PT1iLmluZGV4T2YoYSl9KS5qb2luKFwiIFwiKX1mdW5jdGlvbiBPKGMsZSx1KXtmdW5jdGlvbiB2KGEpe3ZhciBiPXt9LGM9RyhhKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtxKFtcIndpZHRoXCIsXCJoZWlnaHRcIixcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihhKXt2YXIgZD1jW2FdO3N3aXRjaChhKXtjYXNlIFwidG9wXCI6ZCs9Ri5zY3JvbGxUb3A7YnJlYWs7Y2FzZSBcImxlZnRcIjpkKz1GLnNjcm9sbExlZnR9YlthXT1NYXRoLmZsb29yKGQpK1wicHhcIn0pO3JldHVybiBifWZ1bmN0aW9uIGYoKXt2YXIgYz1sKHUuYXR0cihcImNsYXNzXCIpfHxcIlwiKSxkPXMoYyxyKSxjPXMocixjKSxkPWEocCx7dG86dih1KSxhZGRDbGFzczpcIm5nLWFuY2hvci1pbiBcIitkLHJlbW92ZUNsYXNzOlwibmctYW5jaG9yLW91dCBcIitjLGRlbGF5OiEwfSk7XG5yZXR1cm4gZC4kJHdpbGxBbmltYXRlP2Q6bnVsbH1mdW5jdGlvbiB6KCl7cC5yZW1vdmUoKTtlLnJlbW92ZUNsYXNzKFwibmctYW5pbWF0ZS1zaGltXCIpO3UucmVtb3ZlQ2xhc3MoXCJuZy1hbmltYXRlLXNoaW1cIil9dmFyIHA9SShHKGUpLmNsb25lTm9kZSghMCkpLHI9bChwLmF0dHIoXCJjbGFzc1wiKXx8XCJcIik7ZS5hZGRDbGFzcyhcIm5nLWFuaW1hdGUtc2hpbVwiKTt1LmFkZENsYXNzKFwibmctYW5pbWF0ZS1zaGltXCIpO3AuYWRkQ2xhc3MoXCJuZy1hbmNob3JcIik7RS5hcHBlbmQocCk7dmFyIEE7Yz1mdW5jdGlvbigpe3ZhciBjPWEocCx7YWRkQ2xhc3M6XCJuZy1hbmNob3Itb3V0XCIsZGVsYXk6ITAsZnJvbTp2KGUpfSk7cmV0dXJuIGMuJCR3aWxsQW5pbWF0ZT9jOm51bGx9KCk7aWYoIWMmJihBPWYoKSwhQSkpcmV0dXJuIHooKTt2YXIgdD1jfHxBO3JldHVybntzdGFydDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtjJiZjLmVuZCgpfXZhciBiLGM9dC5zdGFydCgpO2MuZG9uZShmdW5jdGlvbigpe2M9XG5udWxsO2lmKCFBJiYoQT1mKCkpKXJldHVybiBjPUEuc3RhcnQoKSxjLmRvbmUoZnVuY3Rpb24oKXtjPW51bGw7eigpO2IuY29tcGxldGUoKX0pLGM7eigpO2IuY29tcGxldGUoKX0pO3JldHVybiBiPW5ldyBkKHtlbmQ6YSxjYW5jZWw6YX0pfX19ZnVuY3Rpb24geChhLGIsYyxlKXt2YXIgZj10KGEsTCksbD10KGIsTCkscD1bXTtxKGUsZnVuY3Rpb24oYSl7KGE9TyhjLGEub3V0LGFbXCJpblwiXSkpJiZwLnB1c2goYSl9KTtpZihmfHxsfHwwIT09cC5sZW5ndGgpcmV0dXJue3N0YXJ0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3EoYixmdW5jdGlvbihhKXthLmVuZCgpfSl9dmFyIGI9W107ZiYmYi5wdXNoKGYuc3RhcnQoKSk7bCYmYi5wdXNoKGwuc3RhcnQoKSk7cShwLGZ1bmN0aW9uKGEpe2IucHVzaChhLnN0YXJ0KCkpfSk7dmFyIGM9bmV3IGQoe2VuZDphLGNhbmNlbDphfSk7ZC5hbGwoYixmdW5jdGlvbihhKXtjLmNvbXBsZXRlKGEpfSk7cmV0dXJuIGN9fX1mdW5jdGlvbiB0KGMpe3ZhciBkPVxuYy5lbGVtZW50LGU9Yy5vcHRpb25zfHx7fTtjLnN0cnVjdHVyYWwmJihlLmV2ZW50PWMuZXZlbnQsZS5zdHJ1Y3R1cmFsPSEwLGUuYXBwbHlDbGFzc2VzRWFybHk9ITAsXCJsZWF2ZVwiPT09Yy5ldmVudCYmKGUub25Eb25lPWUuZG9tT3BlcmF0aW9uKSk7ZS5wcmVwYXJhdGlvbkNsYXNzZXMmJihlLmV2ZW50PVcoZS5ldmVudCxlLnByZXBhcmF0aW9uQ2xhc3NlcykpO2M9YShkLGUpO3JldHVybiBjLiQkd2lsbEFuaW1hdGU/YzpudWxsfWlmKCF2LmFuaW1hdGlvbnMmJiF2LnRyYW5zaXRpb25zKXJldHVybiBMO3ZhciBGPUcoeSk7Yz1HKGUpO3ZhciBFPUkoRi5wYXJlbnROb2RlPT09Yz9GOmMpO1Eoeik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmZyb20mJmEudG8/eChhLmZyb20sYS50byxhLmNsYXNzZXMsYS5hbmNob3JzKTp0KGEpfX1dfV0pLnByb3ZpZGVyKFwiJCRhbmltYXRlSnNcIixbXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFxuXCIkJEFuaW1hdGVSdW5uZXJcIixcIiQkanFMaXRlXCIsZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoYyl7Yz0kKGMpP2M6Yy5zcGxpdChcIiBcIik7Zm9yKHZhciBkPVtdLGU9e30scz0wO3M8Yy5sZW5ndGg7cysrKXt2YXIgcT1jW3NdLHk9YS4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW3FdO3kmJiFlW3FdJiYoZC5wdXNoKGIuZ2V0KHkpKSxlW3FdPSEwKX1yZXR1cm4gZH12YXIgeT1RKGQpO3JldHVybiBmdW5jdGlvbihhLGIsZCxzKXtmdW5jdGlvbiB4KCl7cy5kb21PcGVyYXRpb24oKTt5KGEscyl9ZnVuY3Rpb24gRihhLGIsZCxlLGYpe3N3aXRjaChkKXtjYXNlIFwiYW5pbWF0ZVwiOmI9W2IsZS5mcm9tLGUudG8sZl07YnJlYWs7Y2FzZSBcInNldENsYXNzXCI6Yj1bYixFLGgsZl07YnJlYWs7Y2FzZSBcImFkZENsYXNzXCI6Yj1bYixFLGZdO2JyZWFrO2Nhc2UgXCJyZW1vdmVDbGFzc1wiOmI9W2IsaCxmXTticmVhaztkZWZhdWx0OmI9W2IsZl19Yi5wdXNoKGUpO2lmKGE9YS5hcHBseShhLGIpKWlmKENhKGEuc3RhcnQpJiZcbihhPWEuc3RhcnQoKSksYSBpbnN0YW5jZW9mIGMpYS5kb25lKGYpO2Vsc2UgaWYoQ2EoYSkpcmV0dXJuIGE7cmV0dXJuIEx9ZnVuY3Rpb24gdChhLGIsZCxlLGYpe3ZhciBnPVtdO3EoZSxmdW5jdGlvbihlKXt2YXIgaD1lW2ZdO2gmJmcucHVzaChmdW5jdGlvbigpe3ZhciBlLGcsZj0hMSxsPWZ1bmN0aW9uKGEpe2Z8fChmPSEwLChnfHxMKShhKSxlLmNvbXBsZXRlKCFhKSl9O2U9bmV3IGMoe2VuZDpmdW5jdGlvbigpe2woKX0sY2FuY2VsOmZ1bmN0aW9uKCl7bCghMCl9fSk7Zz1GKGgsYSxiLGQsZnVuY3Rpb24oYSl7bCghMT09PWEpfSk7cmV0dXJuIGV9KX0pO3JldHVybiBnfWZ1bmN0aW9uIEcoYSxiLGQsZSxmKXt2YXIgZz10KGEsYixkLGUsZik7aWYoMD09PWcubGVuZ3RoKXt2YXIgaCxrO1wiYmVmb3JlU2V0Q2xhc3NcIj09PWY/KGg9dChhLFwicmVtb3ZlQ2xhc3NcIixkLGUsXCJiZWZvcmVSZW1vdmVDbGFzc1wiKSxrPXQoYSxcImFkZENsYXNzXCIsZCxlLFwiYmVmb3JlQWRkQ2xhc3NcIikpOlwic2V0Q2xhc3NcIj09PVxuZiYmKGg9dChhLFwicmVtb3ZlQ2xhc3NcIixkLGUsXCJyZW1vdmVDbGFzc1wiKSxrPXQoYSxcImFkZENsYXNzXCIsZCxlLFwiYWRkQ2xhc3NcIikpO2gmJihnPWcuY29uY2F0KGgpKTtrJiYoZz1nLmNvbmNhdChrKSl9aWYoMCE9PWcubGVuZ3RoKXJldHVybiBmdW5jdGlvbihhKXt2YXIgYj1bXTtnLmxlbmd0aCYmcShnLGZ1bmN0aW9uKGEpe2IucHVzaChhKCkpfSk7Yi5sZW5ndGg/Yy5hbGwoYixhKTphKCk7cmV0dXJuIGZ1bmN0aW9uKGEpe3EoYixmdW5jdGlvbihiKXthP2IuY2FuY2VsKCk6Yi5lbmQoKX0pfX19Mz09PWFyZ3VtZW50cy5sZW5ndGgmJnBhKGQpJiYocz1kLGQ9bnVsbCk7cz1pYShzKTtkfHwoZD1hLmF0dHIoXCJjbGFzc1wiKXx8XCJcIixzLmFkZENsYXNzJiYoZCs9XCIgXCIrcy5hZGRDbGFzcykscy5yZW1vdmVDbGFzcyYmKGQrPVwiIFwiK3MucmVtb3ZlQ2xhc3MpKTt2YXIgRT1zLmFkZENsYXNzLGg9cy5yZW1vdmVDbGFzcyxJPWUoZCksdSxKO2lmKEkubGVuZ3RoKXt2YXIgZixCO1wibGVhdmVcIj09XG5iPyhCPVwibGVhdmVcIixmPVwiYWZ0ZXJMZWF2ZVwiKTooQj1cImJlZm9yZVwiK2IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zdWJzdHIoMSksZj1iKTtcImVudGVyXCIhPT1iJiZcIm1vdmVcIiE9PWImJih1PUcoYSxiLHMsSSxCKSk7Sj1HKGEsYixzLEksZil9aWYodXx8SilyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGMpe2Y9ITA7eCgpO2VhKGEscyk7aC5jb21wbGV0ZShjKX12YXIgZCxlPVtdO3UmJmUucHVzaChmdW5jdGlvbihhKXtkPXUoYSl9KTtlLmxlbmd0aD9lLnB1c2goZnVuY3Rpb24oYSl7eCgpO2EoITApfSk6eCgpO0omJmUucHVzaChmdW5jdGlvbihhKXtkPUooYSl9KTt2YXIgZj0hMSxoPW5ldyBjKHtlbmQ6ZnVuY3Rpb24oKXtmfHwoKGR8fEwpKHZvaWQgMCksYih2b2lkIDApKX0sY2FuY2VsOmZ1bmN0aW9uKCl7Znx8KChkfHxMKSghMCksYighMCkpfX0pO2MuY2hhaW4oZSxiKTtyZXR1cm4gaH19fX1dfV0pLnByb3ZpZGVyKFwiJCRhbmltYXRlSnNEcml2ZXJcIixcbltcIiQkYW5pbWF0aW9uUHJvdmlkZXJcIixmdW5jdGlvbihhKXthLmRyaXZlcnMucHVzaChcIiQkYW5pbWF0ZUpzRHJpdmVyXCIpO3RoaXMuJGdldD1bXCIkJGFuaW1hdGVKc1wiLFwiJCRBbmltYXRlUnVubmVyXCIsZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKGMpe3JldHVybiBhKGMuZWxlbWVudCxjLmV2ZW50LGMuY2xhc3NlcyxjLm9wdGlvbnMpfXJldHVybiBmdW5jdGlvbihhKXtpZihhLmZyb20mJmEudG8pe3ZhciBiPWQoYS5mcm9tKSx2PWQoYS50byk7aWYoYnx8dilyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cShkLGZ1bmN0aW9uKGEpe2EuZW5kKCl9KX19dmFyIGQ9W107YiYmZC5wdXNoKGIuc3RhcnQoKSk7diYmZC5wdXNoKHYuc3RhcnQoKSk7Yy5hbGwoZCxmdW5jdGlvbihhKXtlLmNvbXBsZXRlKGEpfSk7dmFyIGU9bmV3IGMoe2VuZDphKCksY2FuY2VsOmEoKX0pO3JldHVybiBlfX19ZWxzZSByZXR1cm4gZChhKX19XX1dKX0pKHdpbmRvdyxcbndpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwXG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4pe2Z1bmN0aW9uIHQodCxyLGUsdSxpLG8pe2Zvcig7aT49MCYmbz5pO2krPW4pe3ZhciBhPXU/dVtpXTppO2U9cihlLHRbYV0sYSx0KX1yZXR1cm4gZX1yZXR1cm4gZnVuY3Rpb24ocixlLHUsaSl7ZT1iKGUsaSw0KTt2YXIgbz0hayhyKSYmbS5rZXlzKHIpLGE9KG98fHIpLmxlbmd0aCxjPW4+MD8wOmEtMTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYodT1yW28/b1tjXTpjXSxjKz1uKSx0KHIsZSx1LG8sYyxhKX19ZnVuY3Rpb24gdChuKXtyZXR1cm4gZnVuY3Rpb24odCxyLGUpe3I9eChyLGUpO2Zvcih2YXIgdT1PKHQpLGk9bj4wPzA6dS0xO2k+PTAmJnU+aTtpKz1uKWlmKHIodFtpXSxpLHQpKXJldHVybiBpO3JldHVybi0xfX1mdW5jdGlvbiByKG4sdCxyKXtyZXR1cm4gZnVuY3Rpb24oZSx1LGkpe3ZhciBvPTAsYT1PKGUpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBpKW4+MD9vPWk+PTA/aTpNYXRoLm1heChpK2Esbyk6YT1pPj0wP01hdGgubWluKGkrMSxhKTppK2ErMTtlbHNlIGlmKHImJmkmJmEpcmV0dXJuIGk9cihlLHUpLGVbaV09PT11P2k6LTE7aWYodSE9PXUpcmV0dXJuIGk9dChsLmNhbGwoZSxvLGEpLG0uaXNOYU4pLGk+PTA/aStvOi0xO2ZvcihpPW4+MD9vOmEtMTtpPj0wJiZhPmk7aSs9bilpZihlW2ldPT09dSlyZXR1cm4gaTtyZXR1cm4tMX19ZnVuY3Rpb24gZShuLHQpe3ZhciByPUkubGVuZ3RoLGU9bi5jb25zdHJ1Y3Rvcix1PW0uaXNGdW5jdGlvbihlKSYmZS5wcm90b3R5cGV8fGEsaT1cImNvbnN0cnVjdG9yXCI7Zm9yKG0uaGFzKG4saSkmJiFtLmNvbnRhaW5zKHQsaSkmJnQucHVzaChpKTtyLS07KWk9SVtyXSxpIGluIG4mJm5baV0hPT11W2ldJiYhbS5jb250YWlucyh0LGkpJiZ0LnB1c2goaSl9dmFyIHU9dGhpcyxpPXUuXyxvPUFycmF5LnByb3RvdHlwZSxhPU9iamVjdC5wcm90b3R5cGUsYz1GdW5jdGlvbi5wcm90b3R5cGUsZj1vLnB1c2gsbD1vLnNsaWNlLHM9YS50b1N0cmluZyxwPWEuaGFzT3duUHJvcGVydHksaD1BcnJheS5pc0FycmF5LHY9T2JqZWN0LmtleXMsZz1jLmJpbmQseT1PYmplY3QuY3JlYXRlLGQ9ZnVuY3Rpb24oKXt9LG09ZnVuY3Rpb24obil7cmV0dXJuIG4gaW5zdGFuY2VvZiBtP246dGhpcyBpbnN0YW5jZW9mIG0/dm9pZCh0aGlzLl93cmFwcGVkPW4pOm5ldyBtKG4pfTtcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cz8oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihleHBvcnRzPW1vZHVsZS5leHBvcnRzPW0pLGV4cG9ydHMuXz1tKTp1Ll89bSxtLlZFUlNJT049XCIxLjguM1wiO3ZhciBiPWZ1bmN0aW9uKG4sdCxyKXtpZih0PT09dm9pZCAwKXJldHVybiBuO3N3aXRjaChudWxsPT1yPzM6cil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbi5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixlKXtyZXR1cm4gbi5jYWxsKHQscixlKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLGUsdSl7cmV0dXJuIG4uY2FsbCh0LHIsZSx1KX07Y2FzZSA0OnJldHVybiBmdW5jdGlvbihyLGUsdSxpKXtyZXR1cm4gbi5jYWxsKHQscixlLHUsaSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHQsYXJndW1lbnRzKX19LHg9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP20uaWRlbnRpdHk6bS5pc0Z1bmN0aW9uKG4pP2Iobix0LHIpOm0uaXNPYmplY3Qobik/bS5tYXRjaGVyKG4pOm0ucHJvcGVydHkobil9O20uaXRlcmF0ZWU9ZnVuY3Rpb24obix0KXtyZXR1cm4geChuLHQsMS8wKX07dmFyIF89ZnVuY3Rpb24obix0KXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDtpZigyPmV8fG51bGw9PXIpcmV0dXJuIHI7Zm9yKHZhciB1PTE7ZT51O3UrKylmb3IodmFyIGk9YXJndW1lbnRzW3VdLG89bihpKSxhPW8ubGVuZ3RoLGM9MDthPmM7YysrKXt2YXIgZj1vW2NdO3QmJnJbZl0hPT12b2lkIDB8fChyW2ZdPWlbZl0pfXJldHVybiByfX0saj1mdW5jdGlvbihuKXtpZighbS5pc09iamVjdChuKSlyZXR1cm57fTtpZih5KXJldHVybiB5KG4pO2QucHJvdG90eXBlPW47dmFyIHQ9bmV3IGQ7cmV0dXJuIGQucHJvdG90eXBlPW51bGwsdH0sdz1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbbl19fSxBPU1hdGgucG93KDIsNTMpLTEsTz13KFwibGVuZ3RoXCIpLGs9ZnVuY3Rpb24obil7dmFyIHQ9TyhuKTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD49MCYmQT49dH07bS5lYWNoPW0uZm9yRWFjaD1mdW5jdGlvbihuLHQscil7dD1iKHQscik7dmFyIGUsdTtpZihrKG4pKWZvcihlPTAsdT1uLmxlbmd0aDt1PmU7ZSsrKXQobltlXSxlLG4pO2Vsc2V7dmFyIGk9bS5rZXlzKG4pO2ZvcihlPTAsdT1pLmxlbmd0aDt1PmU7ZSsrKXQobltpW2VdXSxpW2VdLG4pfXJldHVybiBufSxtLm1hcD1tLmNvbGxlY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKXt2YXIgYT1lP2Vbb106bztpW29dPXQoblthXSxhLG4pfXJldHVybiBpfSxtLnJlZHVjZT1tLmZvbGRsPW0uaW5qZWN0PW4oMSksbS5yZWR1Y2VSaWdodD1tLmZvbGRyPW4oLTEpLG0uZmluZD1tLmRldGVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU7cmV0dXJuIGU9ayhuKT9tLmZpbmRJbmRleChuLHQscik6bS5maW5kS2V5KG4sdCxyKSxlIT09dm9pZCAwJiZlIT09LTE/bltlXTp2b2lkIDB9LG0uZmlsdGVyPW0uc2VsZWN0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1bXTtyZXR1cm4gdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLHUpe3QobixyLHUpJiZlLnB1c2gobil9KSxlfSxtLnJlamVjdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIG0uZmlsdGVyKG4sbS5uZWdhdGUoeCh0KSkscil9LG0uZXZlcnk9bS5hbGw9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYoIXQobltvXSxvLG4pKXJldHVybiExfXJldHVybiEwfSxtLnNvbWU9bS5hbnk9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYodChuW29dLG8sbikpcmV0dXJuITB9cmV0dXJuITF9LG0uY29udGFpbnM9bS5pbmNsdWRlcz1tLmluY2x1ZGU9ZnVuY3Rpb24obix0LHIsZSl7cmV0dXJuIGsobil8fChuPW0udmFsdWVzKG4pKSwoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fGUpJiYocj0wKSxtLmluZGV4T2Yobix0LHIpPj0wfSxtLmludm9rZT1mdW5jdGlvbihuLHQpe3ZhciByPWwuY2FsbChhcmd1bWVudHMsMiksZT1tLmlzRnVuY3Rpb24odCk7cmV0dXJuIG0ubWFwKG4sZnVuY3Rpb24obil7dmFyIHU9ZT90Om5bdF07cmV0dXJuIG51bGw9PXU/dTp1LmFwcGx5KG4scil9KX0sbS5wbHVjaz1mdW5jdGlvbihuLHQpe3JldHVybiBtLm1hcChuLG0ucHJvcGVydHkodCkpfSxtLndoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0uZmlsdGVyKG4sbS5tYXRjaGVyKHQpKX0sbS5maW5kV2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gbS5maW5kKG4sbS5tYXRjaGVyKHQpKX0sbS5tYXg9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT0tMS8wLG89LTEvMDtpZihudWxsPT10JiZudWxsIT1uKXtuPWsobik/bjptLnZhbHVlcyhuKTtmb3IodmFyIGE9MCxjPW4ubGVuZ3RoO2M+YTthKyspZT1uW2FdLGU+aSYmKGk9ZSl9ZWxzZSB0PXgodCxyKSxtLmVhY2gobixmdW5jdGlvbihuLHIsZSl7dT10KG4scixlKSwodT5vfHx1PT09LTEvMCYmaT09PS0xLzApJiYoaT1uLG89dSl9KTtyZXR1cm4gaX0sbS5taW49ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT0xLzAsbz0xLzA7aWYobnVsbD09dCYmbnVsbCE9bil7bj1rKG4pP246bS52YWx1ZXMobik7Zm9yKHZhciBhPTAsYz1uLmxlbmd0aDtjPmE7YSsrKWU9blthXSxpPmUmJihpPWUpfWVsc2UgdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLGUpe3U9dChuLHIsZSksKG8+dXx8MS8wPT09dSYmMS8wPT09aSkmJihpPW4sbz11KX0pO3JldHVybiBpfSxtLnNodWZmbGU9ZnVuY3Rpb24obil7Zm9yKHZhciB0LHI9ayhuKT9uOm0udmFsdWVzKG4pLGU9ci5sZW5ndGgsdT1BcnJheShlKSxpPTA7ZT5pO2krKyl0PW0ucmFuZG9tKDAsaSksdCE9PWkmJih1W2ldPXVbdF0pLHVbdF09cltpXTtyZXR1cm4gdX0sbS5zYW1wbGU9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT10fHxyPyhrKG4pfHwobj1tLnZhbHVlcyhuKSksblttLnJhbmRvbShuLmxlbmd0aC0xKV0pOm0uc2h1ZmZsZShuKS5zbGljZSgwLE1hdGgubWF4KDAsdCkpfSxtLnNvcnRCeT1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9eCh0LHIpLG0ucGx1Y2sobS5tYXAobixmdW5jdGlvbihuLHIsZSl7cmV0dXJue3ZhbHVlOm4saW5kZXg6cixjcml0ZXJpYTp0KG4scixlKX19KS5zb3J0KGZ1bmN0aW9uKG4sdCl7dmFyIHI9bi5jcml0ZXJpYSxlPXQuY3JpdGVyaWE7aWYociE9PWUpe2lmKHI+ZXx8cj09PXZvaWQgMClyZXR1cm4gMTtpZihlPnJ8fGU9PT12b2lkIDApcmV0dXJuLTF9cmV0dXJuIG4uaW5kZXgtdC5pbmRleH0pLFwidmFsdWVcIil9O3ZhciBGPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbih0LHIsZSl7dmFyIHU9e307cmV0dXJuIHI9eChyLGUpLG0uZWFjaCh0LGZ1bmN0aW9uKGUsaSl7dmFyIG89cihlLGksdCk7bih1LGUsbyl9KSx1fX07bS5ncm91cEJ5PUYoZnVuY3Rpb24obix0LHIpe20uaGFzKG4scik/bltyXS5wdXNoKHQpOm5bcl09W3RdfSksbS5pbmRleEJ5PUYoZnVuY3Rpb24obix0LHIpe25bcl09dH0pLG0uY291bnRCeT1GKGZ1bmN0aW9uKG4sdCxyKXttLmhhcyhuLHIpP25bcl0rKzpuW3JdPTF9KSxtLnRvQXJyYXk9ZnVuY3Rpb24obil7cmV0dXJuIG4/bS5pc0FycmF5KG4pP2wuY2FsbChuKTprKG4pP20ubWFwKG4sbS5pZGVudGl0eSk6bS52YWx1ZXMobik6W119LG0uc2l6ZT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8wOmsobik/bi5sZW5ndGg6bS5rZXlzKG4pLmxlbmd0aH0sbS5wYXJ0aXRpb249ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO3ZhciBlPVtdLHU9W107cmV0dXJuIG0uZWFjaChuLGZ1bmN0aW9uKG4scixpKXsodChuLHIsaSk/ZTp1KS5wdXNoKG4pfSksW2UsdV19LG0uZmlyc3Q9bS5oZWFkPW0udGFrZT1mdW5jdGlvbihuLHQscil7cmV0dXJuIG51bGw9PW4/dm9pZCAwOm51bGw9PXR8fHI/blswXTptLmluaXRpYWwobixuLmxlbmd0aC10KX0sbS5pbml0aWFsPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbC5jYWxsKG4sMCxNYXRoLm1heCgwLG4ubGVuZ3RoLShudWxsPT10fHxyPzE6dCkpKX0sbS5sYXN0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09bj92b2lkIDA6bnVsbD09dHx8cj9uW24ubGVuZ3RoLTFdOm0ucmVzdChuLE1hdGgubWF4KDAsbi5sZW5ndGgtdCkpfSxtLnJlc3Q9bS50YWlsPW0uZHJvcD1mdW5jdGlvbihuLHQscil7cmV0dXJuIGwuY2FsbChuLG51bGw9PXR8fHI/MTp0KX0sbS5jb21wYWN0PWZ1bmN0aW9uKG4pe3JldHVybiBtLmZpbHRlcihuLG0uaWRlbnRpdHkpfTt2YXIgUz1mdW5jdGlvbihuLHQscixlKXtmb3IodmFyIHU9W10saT0wLG89ZXx8MCxhPU8obik7YT5vO28rKyl7dmFyIGM9bltvXTtpZihrKGMpJiYobS5pc0FycmF5KGMpfHxtLmlzQXJndW1lbnRzKGMpKSl7dHx8KGM9UyhjLHQscikpO3ZhciBmPTAsbD1jLmxlbmd0aDtmb3IodS5sZW5ndGgrPWw7bD5mOyl1W2krK109Y1tmKytdfWVsc2Ugcnx8KHVbaSsrXT1jKX1yZXR1cm4gdX07bS5mbGF0dGVuPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIFMobix0LCExKX0sbS53aXRob3V0PWZ1bmN0aW9uKG4pe3JldHVybiBtLmRpZmZlcmVuY2UobixsLmNhbGwoYXJndW1lbnRzLDEpKX0sbS51bmlxPW0udW5pcXVlPWZ1bmN0aW9uKG4sdCxyLGUpe20uaXNCb29sZWFuKHQpfHwoZT1yLHI9dCx0PSExKSxudWxsIT1yJiYocj14KHIsZSkpO2Zvcih2YXIgdT1bXSxpPVtdLG89MCxhPU8obik7YT5vO28rKyl7dmFyIGM9bltvXSxmPXI/cihjLG8sbik6Yzt0PyhvJiZpPT09Znx8dS5wdXNoKGMpLGk9Zik6cj9tLmNvbnRhaW5zKGksZil8fChpLnB1c2goZiksdS5wdXNoKGMpKTptLmNvbnRhaW5zKHUsYyl8fHUucHVzaChjKX1yZXR1cm4gdX0sbS51bmlvbj1mdW5jdGlvbigpe3JldHVybiBtLnVuaXEoUyhhcmd1bWVudHMsITAsITApKX0sbS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24obil7Zm9yKHZhciB0PVtdLHI9YXJndW1lbnRzLmxlbmd0aCxlPTAsdT1PKG4pO3U+ZTtlKyspe3ZhciBpPW5bZV07aWYoIW0uY29udGFpbnModCxpKSl7Zm9yKHZhciBvPTE7cj5vJiZtLmNvbnRhaW5zKGFyZ3VtZW50c1tvXSxpKTtvKyspO289PT1yJiZ0LnB1c2goaSl9fXJldHVybiB0fSxtLmRpZmZlcmVuY2U9ZnVuY3Rpb24obil7dmFyIHQ9Uyhhcmd1bWVudHMsITAsITAsMSk7cmV0dXJuIG0uZmlsdGVyKG4sZnVuY3Rpb24obil7cmV0dXJuIW0uY29udGFpbnModCxuKX0pfSxtLnppcD1mdW5jdGlvbigpe3JldHVybiBtLnVuemlwKGFyZ3VtZW50cyl9LG0udW56aXA9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4mJm0ubWF4KG4sTykubGVuZ3RofHwwLHI9QXJyYXkodCksZT0wO3Q+ZTtlKyspcltlXT1tLnBsdWNrKG4sZSk7cmV0dXJuIHJ9LG0ub2JqZWN0PWZ1bmN0aW9uKG4sdCl7Zm9yKHZhciByPXt9LGU9MCx1PU8obik7dT5lO2UrKyl0P3JbbltlXV09dFtlXTpyW25bZV1bMF1dPW5bZV1bMV07cmV0dXJuIHJ9LG0uZmluZEluZGV4PXQoMSksbS5maW5kTGFzdEluZGV4PXQoLTEpLG0uc29ydGVkSW5kZXg9ZnVuY3Rpb24obix0LHIsZSl7cj14KHIsZSwxKTtmb3IodmFyIHU9cih0KSxpPTAsbz1PKG4pO28+aTspe3ZhciBhPU1hdGguZmxvb3IoKGkrbykvMik7cihuW2FdKTx1P2k9YSsxOm89YX1yZXR1cm4gaX0sbS5pbmRleE9mPXIoMSxtLmZpbmRJbmRleCxtLnNvcnRlZEluZGV4KSxtLmxhc3RJbmRleE9mPXIoLTEsbS5maW5kTGFzdEluZGV4KSxtLnJhbmdlPWZ1bmN0aW9uKG4sdCxyKXtudWxsPT10JiYodD1ufHwwLG49MCkscj1yfHwxO2Zvcih2YXIgZT1NYXRoLm1heChNYXRoLmNlaWwoKHQtbikvciksMCksdT1BcnJheShlKSxpPTA7ZT5pO2krKyxuKz1yKXVbaV09bjtyZXR1cm4gdX07dmFyIEU9ZnVuY3Rpb24obix0LHIsZSx1KXtpZighKGUgaW5zdGFuY2VvZiB0KSlyZXR1cm4gbi5hcHBseShyLHUpO3ZhciBpPWoobi5wcm90b3R5cGUpLG89bi5hcHBseShpLHUpO3JldHVybiBtLmlzT2JqZWN0KG8pP286aX07bS5iaW5kPWZ1bmN0aW9uKG4sdCl7aWYoZyYmbi5iaW5kPT09ZylyZXR1cm4gZy5hcHBseShuLGwuY2FsbChhcmd1bWVudHMsMSkpO2lmKCFtLmlzRnVuY3Rpb24obikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvblwiKTt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpLGU9ZnVuY3Rpb24oKXtyZXR1cm4gRShuLGUsdCx0aGlzLHIuY29uY2F0KGwuY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBlfSxtLnBhcnRpYWw9ZnVuY3Rpb24obil7dmFyIHQ9bC5jYWxsKGFyZ3VtZW50cywxKSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdT10Lmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKWlbb109dFtvXT09PW0/YXJndW1lbnRzW2UrK106dFtvXTtmb3IoO2U8YXJndW1lbnRzLmxlbmd0aDspaS5wdXNoKGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gRShuLHIsdGhpcyx0aGlzLGkpfTtyZXR1cm4gcn0sbS5iaW5kQWxsPWZ1bmN0aW9uKG4pe3ZhciB0LHIsZT1hcmd1bWVudHMubGVuZ3RoO2lmKDE+PWUpdGhyb3cgbmV3IEVycm9yKFwiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lc1wiKTtmb3IodD0xO2U+dDt0Kyspcj1hcmd1bWVudHNbdF0sbltyXT1tLmJpbmQobltyXSxuKTtyZXR1cm4gbn0sbS5tZW1vaXplPWZ1bmN0aW9uKG4sdCl7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHU9ci5jYWNoZSxpPVwiXCIrKHQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZSk7cmV0dXJuIG0uaGFzKHUsaSl8fCh1W2ldPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpKSx1W2ldfTtyZXR1cm4gci5jYWNoZT17fSxyfSxtLmRlbGF5PWZ1bmN0aW9uKG4sdCl7dmFyIHI9bC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KG51bGwscil9LHQpfSxtLmRlZmVyPW0ucGFydGlhbChtLmRlbGF5LG0sMSksbS50aHJvdHRsZT1mdW5jdGlvbihuLHQscil7dmFyIGUsdSxpLG89bnVsbCxhPTA7cnx8KHI9e30pO3ZhciBjPWZ1bmN0aW9uKCl7YT1yLmxlYWRpbmc9PT0hMT8wOm0ubm93KCksbz1udWxsLGk9bi5hcHBseShlLHUpLG98fChlPXU9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBmPW0ubm93KCk7YXx8ci5sZWFkaW5nIT09ITF8fChhPWYpO3ZhciBsPXQtKGYtYSk7cmV0dXJuIGU9dGhpcyx1PWFyZ3VtZW50cywwPj1sfHxsPnQ/KG8mJihjbGVhclRpbWVvdXQobyksbz1udWxsKSxhPWYsaT1uLmFwcGx5KGUsdSksb3x8KGU9dT1udWxsKSk6b3x8ci50cmFpbGluZz09PSExfHwobz1zZXRUaW1lb3V0KGMsbCkpLGl9fSxtLmRlYm91bmNlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGksbyxhLGM9ZnVuY3Rpb24oKXt2YXIgZj1tLm5vdygpLW87dD5mJiZmPj0wP2U9c2V0VGltZW91dChjLHQtZik6KGU9bnVsbCxyfHwoYT1uLmFwcGx5KGksdSksZXx8KGk9dT1udWxsKSkpfTtyZXR1cm4gZnVuY3Rpb24oKXtpPXRoaXMsdT1hcmd1bWVudHMsbz1tLm5vdygpO3ZhciBmPXImJiFlO3JldHVybiBlfHwoZT1zZXRUaW1lb3V0KGMsdCkpLGYmJihhPW4uYXBwbHkoaSx1KSxpPXU9bnVsbCksYX19LG0ud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiBtLnBhcnRpYWwodCxuKX0sbS5uZWdhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sbS5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLHQ9bi5sZW5ndGgtMTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9dCxlPW5bdF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ItLTspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19LG0uYWZ0ZXI9ZnVuY3Rpb24obix0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLW48MT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSxtLmJlZm9yZT1mdW5jdGlvbihuLHQpe3ZhciByO3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tbj4wJiYocj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksMT49biYmKHQ9bnVsbCkscn19LG0ub25jZT1tLnBhcnRpYWwobS5iZWZvcmUsMik7dmFyIE09IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcInRvU3RyaW5nXCIpLEk9W1widmFsdWVPZlwiLFwiaXNQcm90b3R5cGVPZlwiLFwidG9TdHJpbmdcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwidG9Mb2NhbGVTdHJpbmdcIl07bS5rZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO2lmKHYpcmV0dXJuIHYobik7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5oYXMobixyKSYmdC5wdXNoKHIpO3JldHVybiBNJiZlKG4sdCksdH0sbS5hbGxLZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO3ZhciB0PVtdO2Zvcih2YXIgciBpbiBuKXQucHVzaChyKTtyZXR1cm4gTSYmZShuLHQpLHR9LG0udmFsdWVzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1tLmtleXMobikscj10Lmxlbmd0aCxlPUFycmF5KHIpLHU9MDtyPnU7dSsrKWVbdV09blt0W3VdXTtyZXR1cm4gZX0sbS5tYXBPYmplY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZSx1PW0ua2V5cyhuKSxpPXUubGVuZ3RoLG89e30sYT0wO2k+YTthKyspZT11W2FdLG9bZV09dChuW2VdLGUsbik7cmV0dXJuIG99LG0ucGFpcnM9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW0ua2V5cyhuKSxyPXQubGVuZ3RoLGU9QXJyYXkociksdT0wO3I+dTt1KyspZVt1XT1bdFt1XSxuW3RbdV1dXTtyZXR1cm4gZX0sbS5pbnZlcnQ9ZnVuY3Rpb24obil7Zm9yKHZhciB0PXt9LHI9bS5rZXlzKG4pLGU9MCx1PXIubGVuZ3RoO3U+ZTtlKyspdFtuW3JbZV1dXT1yW2VdO3JldHVybiB0fSxtLmZ1bmN0aW9ucz1tLm1ldGhvZHM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5pc0Z1bmN0aW9uKG5bcl0pJiZ0LnB1c2gocik7cmV0dXJuIHQuc29ydCgpfSxtLmV4dGVuZD1fKG0uYWxsS2V5cyksbS5leHRlbmRPd249bS5hc3NpZ249XyhtLmtleXMpLG0uZmluZEtleT1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlLHU9bS5rZXlzKG4pLGk9MCxvPXUubGVuZ3RoO28+aTtpKyspaWYoZT11W2ldLHQobltlXSxlLG4pKXJldHVybiBlfSxtLnBpY2s9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT17fSxvPW47aWYobnVsbD09bylyZXR1cm4gaTttLmlzRnVuY3Rpb24odCk/KHU9bS5hbGxLZXlzKG8pLGU9Yih0LHIpKToodT1TKGFyZ3VtZW50cywhMSwhMSwxKSxlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdCBpbiByfSxvPU9iamVjdChvKSk7Zm9yKHZhciBhPTAsYz11Lmxlbmd0aDtjPmE7YSsrKXt2YXIgZj11W2FdLGw9b1tmXTtlKGwsZixvKSYmKGlbZl09bCl9cmV0dXJuIGl9LG0ub21pdD1mdW5jdGlvbihuLHQscil7aWYobS5pc0Z1bmN0aW9uKHQpKXQ9bS5uZWdhdGUodCk7ZWxzZXt2YXIgZT1tLm1hcChTKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4hbS5jb250YWlucyhlLHQpfX1yZXR1cm4gbS5waWNrKG4sdCxyKX0sbS5kZWZhdWx0cz1fKG0uYWxsS2V5cywhMCksbS5jcmVhdGU9ZnVuY3Rpb24obix0KXt2YXIgcj1qKG4pO3JldHVybiB0JiZtLmV4dGVuZE93bihyLHQpLHJ9LG0uY2xvbmU9ZnVuY3Rpb24obil7cmV0dXJuIG0uaXNPYmplY3Qobik/bS5pc0FycmF5KG4pP24uc2xpY2UoKTptLmV4dGVuZCh7fSxuKTpufSxtLnRhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0KG4pLG59LG0uaXNNYXRjaD1mdW5jdGlvbihuLHQpe3ZhciByPW0ua2V5cyh0KSxlPXIubGVuZ3RoO2lmKG51bGw9PW4pcmV0dXJuIWU7Zm9yKHZhciB1PU9iamVjdChuKSxpPTA7ZT5pO2krKyl7dmFyIG89cltpXTtpZih0W29dIT09dVtvXXx8IShvIGluIHUpKXJldHVybiExfXJldHVybiEwfTt2YXIgTj1mdW5jdGlvbihuLHQscixlKXtpZihuPT09dClyZXR1cm4gMCE9PW58fDEvbj09PTEvdDtpZihudWxsPT1ufHxudWxsPT10KXJldHVybiBuPT09dDtuIGluc3RhbmNlb2YgbSYmKG49bi5fd3JhcHBlZCksdCBpbnN0YW5jZW9mIG0mJih0PXQuX3dyYXBwZWQpO3ZhciB1PXMuY2FsbChuKTtpZih1IT09cy5jYWxsKHQpKXJldHVybiExO3N3aXRjaCh1KXtjYXNlXCJbb2JqZWN0IFJlZ0V4cF1cIjpjYXNlXCJbb2JqZWN0IFN0cmluZ11cIjpyZXR1cm5cIlwiK249PVwiXCIrdDtjYXNlXCJbb2JqZWN0IE51bWJlcl1cIjpyZXR1cm4rbiE9PStuPyt0IT09K3Q6MD09PStuPzEvK249PT0xL3Q6K249PT0rdDtjYXNlXCJbb2JqZWN0IERhdGVdXCI6Y2FzZVwiW29iamVjdCBCb29sZWFuXVwiOnJldHVybituPT09K3R9dmFyIGk9XCJbb2JqZWN0IEFycmF5XVwiPT09dTtpZighaSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIG58fFwib2JqZWN0XCIhPXR5cGVvZiB0KXJldHVybiExO3ZhciBvPW4uY29uc3RydWN0b3IsYT10LmNvbnN0cnVjdG9yO2lmKG8hPT1hJiYhKG0uaXNGdW5jdGlvbihvKSYmbyBpbnN0YW5jZW9mIG8mJm0uaXNGdW5jdGlvbihhKSYmYSBpbnN0YW5jZW9mIGEpJiZcImNvbnN0cnVjdG9yXCJpbiBuJiZcImNvbnN0cnVjdG9yXCJpbiB0KXJldHVybiExfXI9cnx8W10sZT1lfHxbXTtmb3IodmFyIGM9ci5sZW5ndGg7Yy0tOylpZihyW2NdPT09bilyZXR1cm4gZVtjXT09PXQ7aWYoci5wdXNoKG4pLGUucHVzaCh0KSxpKXtpZihjPW4ubGVuZ3RoLGMhPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO2MtLTspaWYoIU4obltjXSx0W2NdLHIsZSkpcmV0dXJuITF9ZWxzZXt2YXIgZixsPW0ua2V5cyhuKTtpZihjPWwubGVuZ3RoLG0ua2V5cyh0KS5sZW5ndGghPT1jKXJldHVybiExO2Zvcig7Yy0tOylpZihmPWxbY10sIW0uaGFzKHQsZil8fCFOKG5bZl0sdFtmXSxyLGUpKXJldHVybiExfXJldHVybiByLnBvcCgpLGUucG9wKCksITB9O20uaXNFcXVhbD1mdW5jdGlvbihuLHQpe3JldHVybiBOKG4sdCl9LG0uaXNFbXB0eT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8hMDprKG4pJiYobS5pc0FycmF5KG4pfHxtLmlzU3RyaW5nKG4pfHxtLmlzQXJndW1lbnRzKG4pKT8wPT09bi5sZW5ndGg6MD09PW0ua2V5cyhuKS5sZW5ndGh9LG0uaXNFbGVtZW50PWZ1bmN0aW9uKG4pe3JldHVybiEoIW58fDEhPT1uLm5vZGVUeXBlKX0sbS5pc0FycmF5PWh8fGZ1bmN0aW9uKG4pe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXMuY2FsbChuKX0sbS5pc09iamVjdD1mdW5jdGlvbihuKXt2YXIgdD10eXBlb2YgbjtyZXR1cm5cImZ1bmN0aW9uXCI9PT10fHxcIm9iamVjdFwiPT09dCYmISFufSxtLmVhY2goW1wiQXJndW1lbnRzXCIsXCJGdW5jdGlvblwiLFwiU3RyaW5nXCIsXCJOdW1iZXJcIixcIkRhdGVcIixcIlJlZ0V4cFwiLFwiRXJyb3JcIl0sZnVuY3Rpb24obil7bVtcImlzXCIrbl09ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh0KT09PVwiW29iamVjdCBcIituK1wiXVwifX0pLG0uaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KG0uaXNBcmd1bWVudHM9ZnVuY3Rpb24obil7cmV0dXJuIG0uaGFzKG4sXCJjYWxsZWVcIil9KSxcImZ1bmN0aW9uXCIhPXR5cGVvZi8uLyYmXCJvYmplY3RcIiE9dHlwZW9mIEludDhBcnJheSYmKG0uaXNGdW5jdGlvbj1mdW5jdGlvbihuKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBufHwhMX0pLG0uaXNGaW5pdGU9ZnVuY3Rpb24obil7cmV0dXJuIGlzRmluaXRlKG4pJiYhaXNOYU4ocGFyc2VGbG9hdChuKSl9LG0uaXNOYU49ZnVuY3Rpb24obil7cmV0dXJuIG0uaXNOdW1iZXIobikmJm4hPT0rbn0sbS5pc0Jvb2xlYW49ZnVuY3Rpb24obil7cmV0dXJuIG49PT0hMHx8bj09PSExfHxcIltvYmplY3QgQm9vbGVhbl1cIj09PXMuY2FsbChuKX0sbS5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxtLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKG4pe3JldHVybiBuPT09dm9pZCAwfSxtLmhhcz1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsIT1uJiZwLmNhbGwobix0KX0sbS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHUuXz1pLHRoaXN9LG0uaWRlbnRpdHk9ZnVuY3Rpb24obil7cmV0dXJuIG59LG0uY29uc3RhbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG59fSxtLm5vb3A9ZnVuY3Rpb24oKXt9LG0ucHJvcGVydHk9dyxtLnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW4/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfX0sbS5tYXRjaGVyPW0ubWF0Y2hlcz1mdW5jdGlvbihuKXtyZXR1cm4gbj1tLmV4dGVuZE93bih7fSxuKSxmdW5jdGlvbih0KXtyZXR1cm4gbS5pc01hdGNoKHQsbil9fSxtLnRpbWVzPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1BcnJheShNYXRoLm1heCgwLG4pKTt0PWIodCxyLDEpO2Zvcih2YXIgdT0wO24+dTt1KyspZVt1XT10KHUpO3JldHVybiBlfSxtLnJhbmRvbT1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsPT10JiYodD1uLG49MCksbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtbisxKSl9LG0ubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgQj17XCImXCI6XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjeDI3O1wiLFwiYFwiOlwiJiN4NjA7XCJ9LFQ9bS5pbnZlcnQoQiksUj1mdW5jdGlvbihuKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gblt0XX0scj1cIig/OlwiK20ua2V5cyhuKS5qb2luKFwifFwiKStcIilcIixlPVJlZ0V4cChyKSx1PVJlZ0V4cChyLFwiZ1wiKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG49bnVsbD09bj9cIlwiOlwiXCIrbixlLnRlc3Qobik/bi5yZXBsYWNlKHUsdCk6bn19O20uZXNjYXBlPVIoQiksbS51bmVzY2FwZT1SKFQpLG0ucmVzdWx0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1udWxsPT1uP3ZvaWQgMDpuW3RdO3JldHVybiBlPT09dm9pZCAwJiYoZT1yKSxtLmlzRnVuY3Rpb24oZSk/ZS5jYWxsKG4pOmV9O3ZhciBxPTA7bS51bmlxdWVJZD1mdW5jdGlvbihuKXt2YXIgdD0rK3ErXCJcIjtyZXR1cm4gbj9uK3Q6dH0sbS50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xcc1xcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xcc1xcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcXHNcXFNdKz8pJT4vZ307dmFyIEs9LyguKV4vLHo9e1wiJ1wiOlwiJ1wiLFwiXFxcXFwiOlwiXFxcXFwiLFwiXFxyXCI6XCJyXCIsXCJcXG5cIjpcIm5cIixcIlxcdTIwMjhcIjpcInUyMDI4XCIsXCJcXHUyMDI5XCI6XCJ1MjAyOVwifSxEPS9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZyxMPWZ1bmN0aW9uKG4pe3JldHVyblwiXFxcXFwiK3pbbl19O20udGVtcGxhdGU9ZnVuY3Rpb24obix0LHIpeyF0JiZyJiYodD1yKSx0PW0uZGVmYXVsdHMoe30sdCxtLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciBlPVJlZ0V4cChbKHQuZXNjYXBlfHxLKS5zb3VyY2UsKHQuaW50ZXJwb2xhdGV8fEspLnNvdXJjZSwodC5ldmFsdWF0ZXx8Sykuc291cmNlXS5qb2luKFwifFwiKStcInwkXCIsXCJnXCIpLHU9MCxpPVwiX19wKz0nXCI7bi5yZXBsYWNlKGUsZnVuY3Rpb24odCxyLGUsbyxhKXtyZXR1cm4gaSs9bi5zbGljZSh1LGEpLnJlcGxhY2UoRCxMKSx1PWErdC5sZW5ndGgscj9pKz1cIicrXFxuKChfX3Q9KFwiK3IrXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI6ZT9pKz1cIicrXFxuKChfX3Q9KFwiK2UrXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjpvJiYoaSs9XCInO1xcblwiK28rXCJcXG5fX3ArPSdcIiksdH0pLGkrPVwiJztcXG5cIix0LnZhcmlhYmxlfHwoaT1cIndpdGgob2JqfHx7fSl7XFxuXCIraStcIn1cXG5cIiksaT1cInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIitcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIraStcInJldHVybiBfX3A7XFxuXCI7dHJ5e3ZhciBvPW5ldyBGdW5jdGlvbih0LnZhcmlhYmxlfHxcIm9ialwiLFwiX1wiLGkpfWNhdGNoKGEpe3Rocm93IGEuc291cmNlPWksYX12YXIgYz1mdW5jdGlvbihuKXtyZXR1cm4gby5jYWxsKHRoaXMsbixtKX0sZj10LnZhcmlhYmxlfHxcIm9ialwiO3JldHVybiBjLnNvdXJjZT1cImZ1bmN0aW9uKFwiK2YrXCIpe1xcblwiK2krXCJ9XCIsY30sbS5jaGFpbj1mdW5jdGlvbihuKXt2YXIgdD1tKG4pO3JldHVybiB0Ll9jaGFpbj0hMCx0fTt2YXIgUD1mdW5jdGlvbihuLHQpe3JldHVybiBuLl9jaGFpbj9tKHQpLmNoYWluKCk6dH07bS5taXhpbj1mdW5jdGlvbihuKXttLmVhY2gobS5mdW5jdGlvbnMobiksZnVuY3Rpb24odCl7dmFyIHI9bVt0XT1uW3RdO20ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49W3RoaXMuX3dyYXBwZWRdO3JldHVybiBmLmFwcGx5KG4sYXJndW1lbnRzKSxQKHRoaXMsci5hcHBseShtLG4pKX19KX0sbS5taXhpbihtKSxtLmVhY2goW1wicG9wXCIsXCJwdXNoXCIsXCJyZXZlcnNlXCIsXCJzaGlmdFwiLFwic29ydFwiLFwic3BsaWNlXCIsXCJ1bnNoaWZ0XCJdLGZ1bmN0aW9uKG4pe3ZhciB0PW9bbl07bS5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgcj10aGlzLl93cmFwcGVkO3JldHVybiB0LmFwcGx5KHIsYXJndW1lbnRzKSxcInNoaWZ0XCIhPT1uJiZcInNwbGljZVwiIT09bnx8MCE9PXIubGVuZ3RofHxkZWxldGUgclswXSxQKHRoaXMscil9fSksbS5lYWNoKFtcImNvbmNhdFwiLFwiam9pblwiLFwic2xpY2VcIl0sZnVuY3Rpb24obil7dmFyIHQ9b1tuXTttLnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3JldHVybiBQKHRoaXMsdC5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLG0ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LG0ucHJvdG90eXBlLnZhbHVlT2Y9bS5wcm90b3R5cGUudG9KU09OPW0ucHJvdG90eXBlLnZhbHVlLG0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIit0aGlzLl93cmFwcGVkfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcInVuZGVyc2NvcmVcIixbXSxmdW5jdGlvbigpe3JldHVybiBtfSl9KS5jYWxsKHRoaXMpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5kZXJzY29yZS1taW4ubWFwIiwiLypcbiAqIGFuZ3VsYXItdWktYm9vdHN0cmFwXG4gKiBodHRwOi8vYW5ndWxhci11aS5naXRodWIuaW8vYm9vdHN0cmFwL1xuXG4gKiBWZXJzaW9uOiAwLjEzLjQgLSAyMDE1LTA5LTAzXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXBcIixbXCJ1aS5ib290c3RyYXAudHBsc1wiLFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsXCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uXCIsXCJ1aS5ib290c3RyYXAuYWxlcnRcIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiLFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixcInVpLmJvb3RzdHJhcC5jYXJvdXNlbFwiLFwidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXJcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC5kcm9wZG93blwiLFwidWkuYm9vdHN0cmFwLm1vZGFsXCIsXCJ1aS5ib290c3RyYXAucGFnaW5hdGlvblwiLFwidWkuYm9vdHN0cmFwLnRvb2x0aXBcIixcInVpLmJvb3RzdHJhcC5wb3BvdmVyXCIsXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixcInVpLmJvb3RzdHJhcC50YWJzXCIsXCJ1aS5ib290c3RyYXAudGltZXBpY2tlclwiLFwidWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIixcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRwbHNcIixbXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWxcIixcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwiLFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbFwiLFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWxcIixcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWxcIixcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sXCIsXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCJdKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5jb2xsYXBzZVwiLFtdKS5kaXJlY3RpdmUoXCJjb2xsYXBzZVwiLFtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue2xpbms6ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLmF0dHIoXCJhcmlhLWhpZGRlblwiLCExKSxhLmFkZENsYXNzKGMsXCJpblwiLHt0bzp7aGVpZ2h0OmNbMF0uc2Nyb2xsSGVpZ2h0K1wicHhcIn19KS50aGVuKGYpfWZ1bmN0aW9uIGYoKXtjLnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKSxjLmNzcyh7aGVpZ2h0OlwiYXV0b1wifSl9ZnVuY3Rpb24gZygpe3JldHVybiBjLmhhc0NsYXNzKFwiY29sbGFwc2VcIil8fGMuaGFzQ2xhc3MoXCJpblwiKT8oYy5jc3Moe2hlaWdodDpjWzBdLnNjcm9sbEhlaWdodCtcInB4XCJ9KS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCksdm9pZCBhLnJlbW92ZUNsYXNzKGMsXCJpblwiLHt0bzp7aGVpZ2h0OlwiMFwifX0pLnRoZW4oaCkpOmgoKX1mdW5jdGlvbiBoKCl7Yy5jc3Moe2hlaWdodDpcIjBcIn0pLGMucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLGMuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKX1iLiR3YXRjaChkLmNvbGxhcHNlLGZ1bmN0aW9uKGEpe2E/ZygpOmUoKX0pfX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uXCIsW1widWkuYm9vdHN0cmFwLmNvbGxhcHNlXCJdKS5jb25zdGFudChcImFjY29yZGlvbkNvbmZpZ1wiLHtjbG9zZU90aGVyczohMH0pLmNvbnRyb2xsZXIoXCJBY2NvcmRpb25Db250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcImFjY29yZGlvbkNvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjKXt0aGlzLmdyb3Vwcz1bXSx0aGlzLmNsb3NlT3RoZXJzPWZ1bmN0aW9uKGQpe3ZhciBlPWFuZ3VsYXIuaXNEZWZpbmVkKGIuY2xvc2VPdGhlcnMpP2EuJGV2YWwoYi5jbG9zZU90aGVycyk6Yy5jbG9zZU90aGVycztlJiZhbmd1bGFyLmZvckVhY2godGhpcy5ncm91cHMsZnVuY3Rpb24oYSl7YSE9PWQmJihhLmlzT3Blbj0hMSl9KX0sdGhpcy5hZGRHcm91cD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3RoaXMuZ3JvdXBzLnB1c2goYSksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKGMpe2IucmVtb3ZlR3JvdXAoYSl9KX0sdGhpcy5yZW1vdmVHcm91cD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdyb3Vwcy5pbmRleE9mKGEpOy0xIT09YiYmdGhpcy5ncm91cHMuc3BsaWNlKGIsMSl9fV0pLmRpcmVjdGl2ZShcImFjY29yZGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixjb250cm9sbGVyOlwiQWNjb3JkaW9uQ29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcImFjY29yZGlvblwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMSx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHxcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwifX19KS5kaXJlY3RpdmUoXCJhY2NvcmRpb25Hcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJeYWNjb3JkaW9uXCIscmVzdHJpY3Q6XCJFQVwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHxcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwifSxzY29wZTp7aGVhZGluZzpcIkBcIixpc09wZW46XCI9P1wiLGlzRGlzYWJsZWQ6XCI9P1wifSxjb250cm9sbGVyOmZ1bmN0aW9uKCl7dGhpcy5zZXRIZWFkaW5nPWZ1bmN0aW9uKGEpe3RoaXMuaGVhZGluZz1hfX0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEdyb3VwKGEpLGEub3BlbkNsYXNzPWMub3BlbkNsYXNzfHxcInBhbmVsLW9wZW5cIixhLnBhbmVsQ2xhc3M9Yy5wYW5lbENsYXNzLGEuJHdhdGNoKFwiaXNPcGVuXCIsZnVuY3Rpb24oYyl7Yi50b2dnbGVDbGFzcyhhLm9wZW5DbGFzcyxjKSxjJiZkLmNsb3NlT3RoZXJzKGEpfSksYS50b2dnbGVPcGVuPWZ1bmN0aW9uKGIpe2EuaXNEaXNhYmxlZHx8YiYmMzIhPT1iLndoaWNofHwoYS5pc09wZW49IWEuaXNPcGVuKX19fX0pLmRpcmVjdGl2ZShcImFjY29yZGlvbkhlYWRpbmdcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTpcIlwiLHJlcGxhY2U6ITAscmVxdWlyZTpcIl5hY2NvcmRpb25Hcm91cFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCxlKXtkLnNldEhlYWRpbmcoZShhLGFuZ3VsYXIubm9vcCkpfX19KS5kaXJlY3RpdmUoXCJhY2NvcmRpb25UcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIl5hY2NvcmRpb25Hcm91cFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7YS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZFtjLmFjY29yZGlvblRyYW5zY2x1ZGVdfSxmdW5jdGlvbihhKXthJiYoYi5maW5kKFwic3BhblwiKS5odG1sKFwiXCIpLGIuZmluZChcInNwYW5cIikuYXBwZW5kKGEpKX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5hbGVydFwiLFtdKS5jb250cm9sbGVyKFwiQWxlcnRDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGIpe2EuY2xvc2VhYmxlPSEhYi5jbG9zZSx0aGlzLmNsb3NlPWEuY2xvc2V9XSkuZGlyZWN0aXZlKFwiYWxlcnRcIixmdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOlwiQWxlcnRDb250cm9sbGVyXCIsY29udHJvbGxlckFzOlwiYWxlcnRcIix0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHxcInRlbXBsYXRlL2FsZXJ0L2FsZXJ0Lmh0bWxcIn0sdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHNjb3BlOnt0eXBlOlwiQFwiLGNsb3NlOlwiJlwifX19KS5kaXJlY3RpdmUoXCJkaXNtaXNzT25UaW1lb3V0XCIsW1wiJHRpbWVvdXRcIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpcImFsZXJ0XCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXthKGZ1bmN0aW9uKCl7ZS5jbG9zZSgpfSxwYXJzZUludChkLmRpc21pc3NPblRpbWVvdXQsMTApKX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmJpbmRIdG1sXCIsW10pLnZhbHVlKFwiJGJpbmRIdG1sVW5zYWZlU3VwcHJlc3NEZXByZWNhdGVkXCIsITEpLmRpcmVjdGl2ZShcImJpbmRIdG1sVW5zYWZlXCIsW1wiJGxvZ1wiLFwiJGJpbmRIdG1sVW5zYWZlU3VwcHJlc3NEZXByZWNhdGVkXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2J8fGEud2FybihcImJpbmRIdG1sVW5zYWZlIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgbmdCaW5kSHRtbCBpbnN0ZWFkXCIpLGQuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpLmRhdGEoXCIkYmluZGluZ1wiLGUuYmluZEh0bWxVbnNhZmUpLGMuJHdhdGNoKGUuYmluZEh0bWxVbnNhZmUsZnVuY3Rpb24oYSl7ZC5odG1sKGF8fFwiXCIpfSl9fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixbXSkuY29uc3RhbnQoXCJidXR0b25Db25maWdcIix7YWN0aXZlQ2xhc3M6XCJhY3RpdmVcIix0b2dnbGVFdmVudDpcImNsaWNrXCJ9KS5jb250cm9sbGVyKFwiQnV0dG9uc0NvbnRyb2xsZXJcIixbXCJidXR0b25Db25maWdcIixmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZUNsYXNzPWEuYWN0aXZlQ2xhc3N8fFwiYWN0aXZlXCIsdGhpcy50b2dnbGVFdmVudD1hLnRvZ2dsZUV2ZW50fHxcImNsaWNrXCJ9XSkuZGlyZWN0aXZlKFwiYnRuUmFkaW9cIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcImJ0blJhZGlvXCIsXCJuZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJCdXR0b25zQ29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcImJ1dHRvbnNcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2IuZmluZChcImlucHV0XCIpLmNzcyh7ZGlzcGxheTpcIm5vbmVcIn0pLGYuJHJlbmRlcj1mdW5jdGlvbigpe2IudG9nZ2xlQ2xhc3MoZS5hY3RpdmVDbGFzcyxhbmd1bGFyLmVxdWFscyhmLiRtb2RlbFZhbHVlLGEuJGV2YWwoYy5idG5SYWRpbykpKX0sYi5iaW5kKGUudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXtpZighYy5kaXNhYmxlZCl7dmFyIGQ9Yi5oYXNDbGFzcyhlLmFjdGl2ZUNsYXNzKTsoIWR8fGFuZ3VsYXIuaXNEZWZpbmVkKGMudW5jaGVja2FibGUpKSYmYS4kYXBwbHkoZnVuY3Rpb24oKXtmLiRzZXRWaWV3VmFsdWUoZD9udWxsOmEuJGV2YWwoYy5idG5SYWRpbykpLGYuJHJlbmRlcigpfSl9fSl9fX0pLmRpcmVjdGl2ZShcImJ0bkNoZWNrYm94XCIsW1wiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6W1wiYnRuQ2hlY2tib3hcIixcIm5nTW9kZWxcIl0sY29udHJvbGxlcjpcIkJ1dHRvbnNDb250cm9sbGVyXCIsY29udHJvbGxlckFzOlwiYnV0dG9uXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXtmdW5jdGlvbiBmKCl7cmV0dXJuIGgoZC5idG5DaGVja2JveFRydWUsITApfWZ1bmN0aW9uIGcoKXtyZXR1cm4gaChkLmJ0bkNoZWNrYm94RmFsc2UsITEpfWZ1bmN0aW9uIGgoYSxjKXt2YXIgZD1iLiRldmFsKGEpO3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChkKT9kOmN9dmFyIGk9ZVswXSxqPWVbMV07Yy5maW5kKFwiaW5wdXRcIikuY3NzKHtkaXNwbGF5Olwibm9uZVwifSksai4kcmVuZGVyPWZ1bmN0aW9uKCl7Yy50b2dnbGVDbGFzcyhpLmFjdGl2ZUNsYXNzLGFuZ3VsYXIuZXF1YWxzKGouJG1vZGVsVmFsdWUsZigpKSl9LGMuYmluZChpLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7ZC5kaXNhYmxlZHx8Yi4kYXBwbHkoZnVuY3Rpb24oKXtqLiRzZXRWaWV3VmFsdWUoYy5oYXNDbGFzcyhpLmFjdGl2ZUNsYXNzKT9nKCk6ZigpKSxqLiRyZW5kZXIoKX0pfSksYy5vbihcImtleXByZXNzXCIsZnVuY3Rpb24oZSl7ZC5kaXNhYmxlZHx8MzIhPT1lLndoaWNofHxhWzBdLmFjdGl2ZUVsZW1lbnQhPT1jWzBdfHxiLiRhcHBseShmdW5jdGlvbigpe2ouJHNldFZpZXdWYWx1ZShjLmhhc0NsYXNzKGkuYWN0aXZlQ2xhc3MpP2coKTpmKCkpLGouJHJlbmRlcigpfSl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmNhcm91c2VsXCIsW10pLmNvbnRyb2xsZXIoXCJDYXJvdXNlbENvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkaW50ZXJ2YWxcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMsZSl7cnx8KGFuZ3VsYXIuZXh0ZW5kKGIse2RpcmVjdGlvbjplLGFjdGl2ZTohMH0pLGFuZ3VsYXIuZXh0ZW5kKGwuY3VycmVudFNsaWRlfHx7fSx7ZGlyZWN0aW9uOmUsYWN0aXZlOiExfSksZC5lbmFibGVkKCkmJiFhLm5vVHJhbnNpdGlvbiYmIWEuJGN1cnJlbnRUcmFuc2l0aW9uJiZiLiRlbGVtZW50JiZsLnNsaWRlcy5sZW5ndGg+MSYmKGIuJGVsZW1lbnQuZGF0YShwLGIuZGlyZWN0aW9uKSxsLmN1cnJlbnRTbGlkZSYmbC5jdXJyZW50U2xpZGUuJGVsZW1lbnQmJmwuY3VycmVudFNsaWRlLiRlbGVtZW50LmRhdGEocCxiLmRpcmVjdGlvbiksYS4kY3VycmVudFRyYW5zaXRpb249ITAsbj9kLm9uKFwiYWRkQ2xhc3NcIixiLiRlbGVtZW50LGZ1bmN0aW9uKGIsYyl7XCJjbG9zZVwiPT09YyYmKGEuJGN1cnJlbnRUcmFuc2l0aW9uPW51bGwsZC5vZmYoXCJhZGRDbGFzc1wiLGIpKX0pOmIuJGVsZW1lbnQub25lKFwiJGFuaW1hdGU6Y2xvc2VcIixmdW5jdGlvbigpe2EuJGN1cnJlbnRUcmFuc2l0aW9uPW51bGx9KSksbC5jdXJyZW50U2xpZGU9YixxPWMsZygpKX1mdW5jdGlvbiBmKGEpe2lmKGFuZ3VsYXIuaXNVbmRlZmluZWQobVthXS5pbmRleCkpcmV0dXJuIG1bYV07dmFyIGI7bS5sZW5ndGg7Zm9yKGI9MDtiPG0ubGVuZ3RoOysrYilpZihtW2JdLmluZGV4PT1hKXJldHVybiBtW2JdfWZ1bmN0aW9uIGcoKXtoKCk7dmFyIGI9K2EuaW50ZXJ2YWw7IWlzTmFOKGIpJiZiPjAmJihqPWMoaSxiKSl9ZnVuY3Rpb24gaCgpe2omJihjLmNhbmNlbChqKSxqPW51bGwpfWZ1bmN0aW9uIGkoKXt2YXIgYj0rYS5pbnRlcnZhbDtrJiYhaXNOYU4oYikmJmI+MCYmbS5sZW5ndGg/YS5uZXh0KCk6YS5wYXVzZSgpfXZhciBqLGssbD10aGlzLG09bC5zbGlkZXM9YS5zbGlkZXM9W10sbj1hbmd1bGFyLnZlcnNpb24ubWlub3I+PTQsbz1cInVpYi1ub1RyYW5zaXRpb25cIixwPVwidWliLXNsaWRlRGlyZWN0aW9uXCIscT0tMTtsLmN1cnJlbnRTbGlkZT1udWxsO3ZhciByPSExO2wuc2VsZWN0PWEuc2VsZWN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5pbmRleE9mU2xpZGUoYik7dm9pZCAwPT09YyYmKGM9ZD5sLmdldEN1cnJlbnRJbmRleCgpP1wibmV4dFwiOlwicHJldlwiKSxiJiZiIT09bC5jdXJyZW50U2xpZGUmJiFhLiRjdXJyZW50VHJhbnNpdGlvbiYmZShiLGQsYyl9LGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3I9ITB9KSxsLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiBsLmN1cnJlbnRTbGlkZSYmYW5ndWxhci5pc0RlZmluZWQobC5jdXJyZW50U2xpZGUuaW5kZXgpPytsLmN1cnJlbnRTbGlkZS5pbmRleDpxfSxhLmluZGV4T2ZTbGlkZT1mdW5jdGlvbihhKXtyZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoYS5pbmRleCk/K2EuaW5kZXg6bS5pbmRleE9mKGEpfSxhLm5leHQ9ZnVuY3Rpb24oKXt2YXIgYj0obC5nZXRDdXJyZW50SW5kZXgoKSsxKSVtLmxlbmd0aDtyZXR1cm4gMD09PWImJmEubm9XcmFwKCk/dm9pZCBhLnBhdXNlKCk6bC5zZWxlY3QoZihiKSxcIm5leHRcIil9LGEucHJldj1mdW5jdGlvbigpe3ZhciBiPWwuZ2V0Q3VycmVudEluZGV4KCktMTwwP20ubGVuZ3RoLTE6bC5nZXRDdXJyZW50SW5kZXgoKS0xO3JldHVybiBhLm5vV3JhcCgpJiZiPT09bS5sZW5ndGgtMT92b2lkIGEucGF1c2UoKTpsLnNlbGVjdChmKGIpLFwicHJldlwiKX0sYS5pc0FjdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5jdXJyZW50U2xpZGU9PT1hfSxhLiR3YXRjaChcImludGVydmFsXCIsZyksYS4kb24oXCIkZGVzdHJveVwiLGgpLGEucGxheT1mdW5jdGlvbigpe2t8fChrPSEwLGcoKSl9LGEucGF1c2U9ZnVuY3Rpb24oKXthLm5vUGF1c2V8fChrPSExLGgoKSl9LGwuYWRkU2xpZGU9ZnVuY3Rpb24oYixjKXtiLiRlbGVtZW50PWMsbS5wdXNoKGIpLDE9PT1tLmxlbmd0aHx8Yi5hY3RpdmU/KGwuc2VsZWN0KG1bbS5sZW5ndGgtMV0pLDE9PW0ubGVuZ3RoJiZhLnBsYXkoKSk6Yi5hY3RpdmU9ITF9LGwucmVtb3ZlU2xpZGU9ZnVuY3Rpb24oYSl7YW5ndWxhci5pc0RlZmluZWQoYS5pbmRleCkmJm0uc29ydChmdW5jdGlvbihhLGIpe3JldHVybithLmluZGV4PitiLmluZGV4fSk7dmFyIGI9bS5pbmRleE9mKGEpO20uc3BsaWNlKGIsMSksbS5sZW5ndGg+MCYmYS5hY3RpdmU/Yj49bS5sZW5ndGg/bC5zZWxlY3QobVtiLTFdKTpsLnNlbGVjdChtW2JdKTpxPmImJnEtLSwwPT09bS5sZW5ndGgmJihsLmN1cnJlbnRTbGlkZT1udWxsKX0sYS4kd2F0Y2goXCJub1RyYW5zaXRpb25cIixmdW5jdGlvbihhKXtiLmRhdGEobyxhKX0pfV0pLmRpcmVjdGl2ZShcImNhcm91c2VsXCIsW2Z1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsY29udHJvbGxlcjpcIkNhcm91c2VsQ29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcImNhcm91c2VsXCIscmVxdWlyZTpcImNhcm91c2VsXCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ0ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sXCJ9LHNjb3BlOntpbnRlcnZhbDpcIj1cIixub1RyYW5zaXRpb246XCI9XCIsbm9QYXVzZTpcIj1cIixub1dyYXA6XCImXCJ9fX1dKS5kaXJlY3RpdmUoXCJzbGlkZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJeY2Fyb3VzZWxcIixyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwifSxzY29wZTp7YWN0aXZlOlwiPT9cIixhY3R1YWw6XCI9P1wiLGluZGV4OlwiPT9cIn0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZFNsaWRlKGEsYiksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVTbGlkZShhKX0pLGEuJHdhdGNoKFwiYWN0aXZlXCIsZnVuY3Rpb24oYil7YiYmZC5zZWxlY3QoYSl9KX19fSkuYW5pbWF0aW9uKFwiLml0ZW1cIixbXCIkaW5qZWN0b3JcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjKXthLnJlbW92ZUNsYXNzKGIpLGMmJmMoKX12YXIgZD1cInVpYi1ub1RyYW5zaXRpb25cIixlPVwidWliLXNsaWRlRGlyZWN0aW9uXCIsZj1udWxsO3JldHVybiBhLmhhcyhcIiRhbmltYXRlQ3NzXCIpJiYoZj1hLmdldChcIiRhbmltYXRlQ3NzXCIpKSx7YmVmb3JlQWRkQ2xhc3M6ZnVuY3Rpb24oYSxnLGgpe2lmKFwiYWN0aXZlXCI9PWcmJmEucGFyZW50KCkmJiFhLnBhcmVudCgpLmRhdGEoZCkpe3ZhciBpPSExLGo9YS5kYXRhKGUpLGs9XCJuZXh0XCI9PWo/XCJsZWZ0XCI6XCJyaWdodFwiLGw9Yy5iaW5kKHRoaXMsYSxrK1wiIFwiK2osaCk7cmV0dXJuIGEuYWRkQ2xhc3MoaiksZj9mKGEse2FkZENsYXNzOmt9KS5zdGFydCgpLmRvbmUobCk6Yi5hZGRDbGFzcyhhLGspLnRoZW4oZnVuY3Rpb24oKXtpfHxsKCksaCgpfSksZnVuY3Rpb24oKXtpPSEwfX1oKCl9LGJlZm9yZVJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsZyxoKXtpZihcImFjdGl2ZVwiPT09ZyYmYS5wYXJlbnQoKSYmIWEucGFyZW50KCkuZGF0YShkKSl7dmFyIGk9ITEsaj1hLmRhdGEoZSksaz1cIm5leHRcIj09aj9cImxlZnRcIjpcInJpZ2h0XCIsbD1jLmJpbmQodGhpcyxhLGssaCk7cmV0dXJuIGY/ZihhLHthZGRDbGFzczprfSkuc3RhcnQoKS5kb25lKGwpOmIuYWRkQ2xhc3MoYSxrKS50aGVuKGZ1bmN0aW9uKCl7aXx8bCgpLGgoKX0pLGZ1bmN0aW9uKCl7aT0hMH19aCgpfX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuZGF0ZXBhcnNlclwiLFtdKS5zZXJ2aWNlKFwiZGF0ZVBhcnNlclwiLFtcIiRsb2dcIixcIiRsb2NhbGVcIixcIm9yZGVyQnlGaWx0ZXJcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXt2YXIgYj1bXSxkPWEuc3BsaXQoXCJcIik7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChnLGZ1bmN0aW9uKGMsZSl7dmFyIGY9YS5pbmRleE9mKGUpO2lmKGY+LTEpe2E9YS5zcGxpdChcIlwiKSxkW2ZdPVwiKFwiK2MucmVnZXgrXCIpXCIsYVtmXT1cIiRcIjtmb3IodmFyIGc9ZisxLGg9ZitlLmxlbmd0aDtoPmc7ZysrKWRbZ109XCJcIixhW2ddPVwiJFwiO2E9YS5qb2luKFwiXCIpLGIucHVzaCh7aW5kZXg6ZixhcHBseTpjLmFwcGx5fSl9fSkse3JlZ2V4Om5ldyBSZWdFeHAoXCJeXCIrZC5qb2luKFwiXCIpK1wiJFwiKSxtYXA6YyhiLFwiaW5kZXhcIil9fWZ1bmN0aW9uIGUoYSxiLGMpe3JldHVybiAxPmM/ITE6MT09PWImJmM+Mjg/Mjk9PT1jJiYoYSU0PT09MCYmYSUxMDAhPT0wfHxhJTQwMD09PTApOjM9PT1ifHw1PT09Ynx8OD09PWJ8fDEwPT09Yj8zMT5jOiEwfXZhciBmPS9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZzt0aGlzLnBhcnNlcnM9e307dmFyIGc9e3l5eXk6e3JlZ2V4OlwiXFxcXGR7NH1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSx5eTp7cmVnZXg6XCJcXFxcZHsyfVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMueWVhcj0rYSsyZTN9fSx5OntyZWdleDpcIlxcXFxkezEsNH1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSxNTU1NOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguam9pbihcInxcIiksYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1iLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZihhKX19LE1NTTp7cmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguam9pbihcInxcIiksYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1iLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlRNT05USC5pbmRleE9mKGEpfX0sTU06e3JlZ2V4OlwiMFsxLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfX0sTTp7cmVnZXg6XCJbMS05XXwxWzAtMl1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWEtMX19LGRkOntyZWdleDpcIlswLTJdWzAtOV17MX18M1swLTFdezF9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5kYXRlPSthfX0sZDp7cmVnZXg6XCJbMS0yXT9bMC05XXsxfXwzWzAtMV17MX1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9fSxFRUVFOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuREFZLmpvaW4oXCJ8XCIpfSxFRUU6e3JlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKFwifFwiKX0sSEg6e3JlZ2V4OlwiKD86MHwxKVswLTldfDJbMC0zXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSxoaDp7cmVnZXg6XCIwWzAtOV18MVswLTJdXCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5ob3Vycz0rYX19LEg6e3JlZ2V4OlwiMT9bMC05XXwyWzAtM11cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmhvdXJzPSthfX0saDp7cmVnZXg6XCJbMC05XXwxWzAtMl1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmhvdXJzPSthfX0sbW06e3JlZ2V4OlwiWzAtNV1bMC05XVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubWludXRlcz0rYX19LG06e3JlZ2V4OlwiWzAtOV18WzEtNV1bMC05XVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubWludXRlcz0rYX19LHNzczp7cmVnZXg6XCJbMC05XVswLTldWzAtOV1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1pbGxpc2Vjb25kcz0rYX19LHNzOntyZWdleDpcIlswLTVdWzAtOV1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnNlY29uZHM9K2F9fSxzOntyZWdleDpcIlswLTldfFsxLTVdWzAtOV1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnNlY29uZHM9K2F9fSxhOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuQU1QTVMuam9pbihcInxcIiksYXBwbHk6ZnVuY3Rpb24oYSl7MTI9PT10aGlzLmhvdXJzJiYodGhpcy5ob3Vycz0wKSxcIlBNXCI9PT1hJiYodGhpcy5ob3Vycys9MTIpfX19O3RoaXMucGFyc2U9ZnVuY3Rpb24oYyxnLGgpe2lmKCFhbmd1bGFyLmlzU3RyaW5nKGMpfHwhZylyZXR1cm4gYztnPWIuREFURVRJTUVfRk9STUFUU1tnXXx8ZyxnPWcucmVwbGFjZShmLFwiXFxcXCQmXCIpLHRoaXMucGFyc2Vyc1tnXXx8KHRoaXMucGFyc2Vyc1tnXT1kKGcpKTt2YXIgaT10aGlzLnBhcnNlcnNbZ10saj1pLnJlZ2V4LGs9aS5tYXAsbD1jLm1hdGNoKGopO2lmKGwmJmwubGVuZ3RoKXt2YXIgbSxuO2FuZ3VsYXIuaXNEYXRlKGgpJiYhaXNOYU4oaC5nZXRUaW1lKCkpP209e3llYXI6aC5nZXRGdWxsWWVhcigpLG1vbnRoOmguZ2V0TW9udGgoKSxkYXRlOmguZ2V0RGF0ZSgpLGhvdXJzOmguZ2V0SG91cnMoKSxtaW51dGVzOmguZ2V0TWludXRlcygpLHNlY29uZHM6aC5nZXRTZWNvbmRzKCksbWlsbGlzZWNvbmRzOmguZ2V0TWlsbGlzZWNvbmRzKCl9OihoJiZhLndhcm4oXCJkYXRlcGFyc2VyOlwiLFwiYmFzZURhdGUgaXMgbm90IGEgdmFsaWQgZGF0ZVwiKSxtPXt5ZWFyOjE5MDAsbW9udGg6MCxkYXRlOjEsaG91cnM6MCxtaW51dGVzOjAsc2Vjb25kczowLG1pbGxpc2Vjb25kczowfSk7Zm9yKHZhciBvPTEscD1sLmxlbmd0aDtwPm87bysrKXt2YXIgcT1rW28tMV07cS5hcHBseSYmcS5hcHBseS5jYWxsKG0sbFtvXSl9cmV0dXJuIGUobS55ZWFyLG0ubW9udGgsbS5kYXRlKSYmKG49bmV3IERhdGUobS55ZWFyLG0ubW9udGgsbS5kYXRlLG0uaG91cnMsbS5taW51dGVzLG0uc2Vjb25kcyxtLm1pbGxpc2Vjb25kc3x8MCkpLG59fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFtdKS5mYWN0b3J5KFwiJHBvc2l0aW9uXCIsW1wiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYyl7cmV0dXJuIGEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlW2NdOmIuZ2V0Q29tcHV0ZWRTdHlsZT9iLmdldENvbXB1dGVkU3R5bGUoYSlbY106YS5zdHlsZVtjXX1mdW5jdGlvbiBkKGEpe3JldHVyblwic3RhdGljXCI9PT0oYyhhLFwicG9zaXRpb25cIil8fFwic3RhdGljXCIpfXZhciBlPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1hWzBdLGU9Yi5vZmZzZXRQYXJlbnR8fGM7ZSYmZSE9PWMmJmQoZSk7KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGN9O3JldHVybntwb3NpdGlvbjpmdW5jdGlvbihiKXt2YXIgYz10aGlzLm9mZnNldChiKSxkPXt0b3A6MCxsZWZ0OjB9LGY9ZShiWzBdKTtmIT1hWzBdJiYoZD10aGlzLm9mZnNldChhbmd1bGFyLmVsZW1lbnQoZikpLGQudG9wKz1mLmNsaWVudFRvcC1mLnNjcm9sbFRvcCxkLmxlZnQrPWYuY2xpZW50TGVmdC1mLnNjcm9sbExlZnQpO3ZhciBnPWJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOmcud2lkdGh8fGIucHJvcChcIm9mZnNldFdpZHRoXCIpLGhlaWdodDpnLmhlaWdodHx8Yi5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLHRvcDpjLnRvcC1kLnRvcCxsZWZ0OmMubGVmdC1kLmxlZnR9fSxvZmZzZXQ6ZnVuY3Rpb24oYyl7dmFyIGQ9Y1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6ZC53aWR0aHx8Yy5wcm9wKFwib2Zmc2V0V2lkdGhcIiksaGVpZ2h0OmQuaGVpZ2h0fHxjLnByb3AoXCJvZmZzZXRIZWlnaHRcIiksdG9wOmQudG9wKyhiLnBhZ2VZT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLGxlZnQ6ZC5sZWZ0KyhiLnBhZ2VYT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KX19LHBvc2l0aW9uRWxlbWVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGgsaT1jLnNwbGl0KFwiLVwiKSxqPWlbMF0saz1pWzFdfHxcImNlbnRlclwiO2U9ZD90aGlzLm9mZnNldChhKTp0aGlzLnBvc2l0aW9uKGEpLGY9Yi5wcm9wKFwib2Zmc2V0V2lkdGhcIiksZz1iLnByb3AoXCJvZmZzZXRIZWlnaHRcIik7dmFyIGw9e2NlbnRlcjpmdW5jdGlvbigpe3JldHVybiBlLmxlZnQrZS53aWR0aC8yLWYvMn0sbGVmdDpmdW5jdGlvbigpe3JldHVybiBlLmxlZnR9LHJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVmdCtlLndpZHRofX0sbT17Y2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUudG9wK2UuaGVpZ2h0LzItZy8yfSx0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gZS50b3B9LGJvdHRvbTpmdW5jdGlvbigpe3JldHVybiBlLnRvcCtlLmhlaWdodH19O3N3aXRjaChqKXtjYXNlXCJyaWdodFwiOmg9e3RvcDptW2tdKCksbGVmdDpsW2pdKCl9O2JyZWFrO2Nhc2VcImxlZnRcIjpoPXt0b3A6bVtrXSgpLGxlZnQ6ZS5sZWZ0LWZ9O2JyZWFrO2Nhc2VcImJvdHRvbVwiOmg9e3RvcDptW2pdKCksbGVmdDpsW2tdKCl9O2JyZWFrO2RlZmF1bHQ6aD17dG9wOmUudG9wLWcsbGVmdDpsW2tdKCl9fXJldHVybiBofX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlclwiLFtcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIl0pLnZhbHVlKFwiJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yXCIsITEpLmNvbnN0YW50KFwiZGF0ZXBpY2tlckNvbmZpZ1wiLHtmb3JtYXREYXk6XCJkZFwiLGZvcm1hdE1vbnRoOlwiTU1NTVwiLGZvcm1hdFllYXI6XCJ5eXl5XCIsZm9ybWF0RGF5SGVhZGVyOlwiRUVFXCIsZm9ybWF0RGF5VGl0bGU6XCJNTU1NIHl5eXlcIixmb3JtYXRNb250aFRpdGxlOlwieXl5eVwiLGRhdGVwaWNrZXJNb2RlOlwiZGF5XCIsbWluTW9kZTpcImRheVwiLG1heE1vZGU6XCJ5ZWFyXCIsc2hvd1dlZWtzOiEwLHN0YXJ0aW5nRGF5OjAseWVhclJhbmdlOjIwLG1pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGwsc2hvcnRjdXRQcm9wYWdhdGlvbjohMX0pLmNvbnRyb2xsZXIoXCJEYXRlcGlja2VyQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGxvZ1wiLFwiZGF0ZUZpbHRlclwiLFwiZGF0ZXBpY2tlckNvbmZpZ1wiLFwiJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaT10aGlzLGo9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfTt0aGlzLm1vZGVzPVtcImRheVwiLFwibW9udGhcIixcInllYXJcIl0sYW5ndWxhci5mb3JFYWNoKFtcImZvcm1hdERheVwiLFwiZm9ybWF0TW9udGhcIixcImZvcm1hdFllYXJcIixcImZvcm1hdERheUhlYWRlclwiLFwiZm9ybWF0RGF5VGl0bGVcIixcImZvcm1hdE1vbnRoVGl0bGVcIixcInNob3dXZWVrc1wiLFwic3RhcnRpbmdEYXlcIixcInllYXJSYW5nZVwiLFwic2hvcnRjdXRQcm9wYWdhdGlvblwiXSxmdW5jdGlvbihjLGUpe2lbY109YW5ndWxhci5pc0RlZmluZWQoYltjXSk/Nj5lP2QoYltjXSkoYS4kcGFyZW50KTphLiRwYXJlbnQuJGV2YWwoYltjXSk6Z1tjXX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJtaW5EYXRlXCIsXCJtYXhEYXRlXCJdLGZ1bmN0aW9uKGQpe2JbZF0/YS4kcGFyZW50LiR3YXRjaChjKGJbZF0pLGZ1bmN0aW9uKGEpe2lbZF09YT9uZXcgRGF0ZShhKTpudWxsLGkucmVmcmVzaFZpZXcoKX0pOmlbZF09Z1tkXT9uZXcgRGF0ZShnW2RdKTpudWxsfSksYW5ndWxhci5mb3JFYWNoKFtcIm1pbk1vZGVcIixcIm1heE1vZGVcIl0sZnVuY3Rpb24oZCl7YltkXT9hLiRwYXJlbnQuJHdhdGNoKGMoYltkXSksZnVuY3Rpb24oYyl7aVtkXT1hbmd1bGFyLmlzRGVmaW5lZChjKT9jOmJbZF0sYVtkXT1pW2RdLChcIm1pbk1vZGVcIj09ZCYmaS5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpPGkubW9kZXMuaW5kZXhPZihpW2RdKXx8XCJtYXhNb2RlXCI9PWQmJmkubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKT5pLm1vZGVzLmluZGV4T2YoaVtkXSkpJiYoYS5kYXRlcGlja2VyTW9kZT1pW2RdKX0pOihpW2RdPWdbZF18fG51bGwsYVtkXT1pW2RdKX0pLGEuZGF0ZXBpY2tlck1vZGU9YS5kYXRlcGlja2VyTW9kZXx8Zy5kYXRlcGlja2VyTW9kZSxhLnVuaXF1ZUlkPVwiZGF0ZXBpY2tlci1cIithLiRpZCtcIi1cIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSxhbmd1bGFyLmlzRGVmaW5lZChiLmluaXREYXRlKT8odGhpcy5hY3RpdmVEYXRlPWEuJHBhcmVudC4kZXZhbChiLmluaXREYXRlKXx8bmV3IERhdGUsYS4kcGFyZW50LiR3YXRjaChiLmluaXREYXRlLGZ1bmN0aW9uKGEpe2EmJihqLiRpc0VtcHR5KGouJG1vZGVsVmFsdWUpfHxqLiRpbnZhbGlkKSYmKGkuYWN0aXZlRGF0ZT1hLGkucmVmcmVzaFZpZXcoKSl9KSk6dGhpcy5hY3RpdmVEYXRlPW5ldyBEYXRlLGEuaXNBY3RpdmU9ZnVuY3Rpb24oYil7cmV0dXJuIDA9PT1pLmNvbXBhcmUoYi5kYXRlLGkuYWN0aXZlRGF0ZSk/KGEuYWN0aXZlRGF0ZUlkPWIudWlkLCEwKTohMX0sdGhpcy5pbml0PWZ1bmN0aW9uKGEpe2o9YSxqLiRyZW5kZXI9ZnVuY3Rpb24oKXtpLnJlbmRlcigpfX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXtpZihqLiR2aWV3VmFsdWUpe3ZhciBhPW5ldyBEYXRlKGouJHZpZXdWYWx1ZSksYj0haXNOYU4oYSk7Yj90aGlzLmFjdGl2ZURhdGU9YTpofHxlLmVycm9yKCdEYXRlcGlja2VyIGRpcmVjdGl2ZTogXCJuZy1tb2RlbFwiIHZhbHVlIG11c3QgYmUgYSBEYXRlIG9iamVjdCwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgb3IgYSBzdHJpbmcgcmVwcmVzZW50aW5nIGFuIFJGQzI4MjIgb3IgSVNPIDg2MDEgZGF0ZS4nKX10aGlzLnJlZnJlc2hWaWV3KCl9LHRoaXMucmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXtpZih0aGlzLmVsZW1lbnQpe3RoaXMuX3JlZnJlc2hWaWV3KCk7dmFyIGE9ai4kdmlld1ZhbHVlP25ldyBEYXRlKGouJHZpZXdWYWx1ZSk6bnVsbDtqLiRzZXRWYWxpZGl0eShcImRhdGVEaXNhYmxlZFwiLCFhfHx0aGlzLmVsZW1lbnQmJiF0aGlzLmlzRGlzYWJsZWQoYSkpfX0sdGhpcy5jcmVhdGVEYXRlT2JqZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ai4kdmlld1ZhbHVlP25ldyBEYXRlKGouJHZpZXdWYWx1ZSk6bnVsbDtyZXR1cm57ZGF0ZTphLGxhYmVsOmYoYSxiKSxzZWxlY3RlZDpjJiYwPT09dGhpcy5jb21wYXJlKGEsYyksZGlzYWJsZWQ6dGhpcy5pc0Rpc2FibGVkKGEpLGN1cnJlbnQ6MD09PXRoaXMuY29tcGFyZShhLG5ldyBEYXRlKSxjdXN0b21DbGFzczp0aGlzLmN1c3RvbUNsYXNzKGEpfX0sdGhpcy5pc0Rpc2FibGVkPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLm1pbkRhdGUmJnRoaXMuY29tcGFyZShjLHRoaXMubWluRGF0ZSk8MHx8dGhpcy5tYXhEYXRlJiZ0aGlzLmNvbXBhcmUoYyx0aGlzLm1heERhdGUpPjB8fGIuZGF0ZURpc2FibGVkJiZhLmRhdGVEaXNhYmxlZCh7ZGF0ZTpjLG1vZGU6YS5kYXRlcGlja2VyTW9kZX0pfSx0aGlzLmN1c3RvbUNsYXNzPWZ1bmN0aW9uKGIpe3JldHVybiBhLmN1c3RvbUNsYXNzKHtkYXRlOmIsbW9kZTphLmRhdGVwaWNrZXJNb2RlfSl9LHRoaXMuc3BsaXQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YS5sZW5ndGg+MDspYy5wdXNoKGEuc3BsaWNlKDAsYikpO3JldHVybiBjfSx0aGlzLmZpeFRpbWVab25lPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0SG91cnMoKTthLnNldEhvdXJzKDIzPT09Yj9iKzI6MCl9LGEuc2VsZWN0PWZ1bmN0aW9uKGIpe2lmKGEuZGF0ZXBpY2tlck1vZGU9PT1pLm1pbk1vZGUpe3ZhciBjPWouJHZpZXdWYWx1ZT9uZXcgRGF0ZShqLiR2aWV3VmFsdWUpOm5ldyBEYXRlKDAsMCwwLDAsMCwwLDApO2Muc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSksai4kc2V0Vmlld1ZhbHVlKGMpLGouJHJlbmRlcigpfWVsc2UgaS5hY3RpdmVEYXRlPWIsYS5kYXRlcGlja2VyTW9kZT1pLm1vZGVzW2kubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKS0xXX0sYS5tb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPWkuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpK2EqKGkuc3RlcC55ZWFyc3x8MCksYz1pLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSthKihpLnN0ZXAubW9udGhzfHwwKTtpLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoYixjLDEpLGkucmVmcmVzaFZpZXcoKX0sYS50b2dnbGVNb2RlPWZ1bmN0aW9uKGIpe2I9Ynx8MSxhLmRhdGVwaWNrZXJNb2RlPT09aS5tYXhNb2RlJiYxPT09Ynx8YS5kYXRlcGlja2VyTW9kZT09PWkubWluTW9kZSYmLTE9PT1ifHwoYS5kYXRlcGlja2VyTW9kZT1pLm1vZGVzW2kubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKStiXSl9LGEua2V5cz17MTM6XCJlbnRlclwiLDMyOlwic3BhY2VcIiwzMzpcInBhZ2V1cFwiLDM0OlwicGFnZWRvd25cIiwzNTpcImVuZFwiLDM2OlwiaG9tZVwiLDM3OlwibGVmdFwiLDM4OlwidXBcIiwzOTpcInJpZ2h0XCIsNDA6XCJkb3duXCJ9O3ZhciBrPWZ1bmN0aW9uKCl7aS5lbGVtZW50WzBdLmZvY3VzKCl9O2EuJG9uKFwiZGF0ZXBpY2tlci5mb2N1c1wiLGspLGEua2V5ZG93bj1mdW5jdGlvbihiKXt2YXIgYz1hLmtleXNbYi53aGljaF07aWYoYyYmIWIuc2hpZnRLZXkmJiFiLmFsdEtleSlpZihiLnByZXZlbnREZWZhdWx0KCksaS5zaG9ydGN1dFByb3BhZ2F0aW9ufHxiLnN0b3BQcm9wYWdhdGlvbigpLFwiZW50ZXJcIj09PWN8fFwic3BhY2VcIj09PWMpe2lmKGkuaXNEaXNhYmxlZChpLmFjdGl2ZURhdGUpKXJldHVybjthLnNlbGVjdChpLmFjdGl2ZURhdGUpLGsoKX1lbHNlIWIuY3RybEtleXx8XCJ1cFwiIT09YyYmXCJkb3duXCIhPT1jPyhpLmhhbmRsZUtleURvd24oYyxiKSxpLnJlZnJlc2hWaWV3KCkpOihhLnRvZ2dsZU1vZGUoXCJ1cFwiPT09Yz8xOi0xKSxrKCkpfX1dKS5kaXJlY3RpdmUoXCJkYXRlcGlja2VyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwifSxzY29wZTp7ZGF0ZXBpY2tlck1vZGU6XCI9P1wiLGRhdGVEaXNhYmxlZDpcIiZcIixjdXN0b21DbGFzczpcIiZcIixzaG9ydGN1dFByb3BhZ2F0aW9uOlwiJj9cIn0scmVxdWlyZTpbXCJkYXRlcGlja2VyXCIsXCJebmdNb2RlbFwiXSxjb250cm9sbGVyOlwiRGF0ZXBpY2tlckNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJkYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtlLmluaXQoZil9fX0pLmRpcmVjdGl2ZShcImRheXBpY2tlclwiLFtcImRhdGVGaWx0ZXJcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIscmVxdWlyZTpcIl5kYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXtmdW5jdGlvbiBmKGEsYil7cmV0dXJuIDEhPT1ifHxhJTQhPT0wfHxhJTEwMD09PTAmJmElNDAwIT09MD9pW2JdOjI5fWZ1bmN0aW9uIGcoYSxiKXtmb3IodmFyIGMsZD1uZXcgQXJyYXkoYiksZj1uZXcgRGF0ZShhKSxnPTA7Yj5nOyljPW5ldyBEYXRlKGYpLGUuZml4VGltZVpvbmUoYyksZFtnKytdPWMsZi5zZXREYXRlKGYuZ2V0RGF0ZSgpKzEpO3JldHVybiBkfWZ1bmN0aW9uIGgoYSl7dmFyIGI9bmV3IERhdGUoYSk7Yi5zZXREYXRlKGIuZ2V0RGF0ZSgpKzQtKGIuZ2V0RGF5KCl8fDcpKTt2YXIgYz1iLmdldFRpbWUoKTtyZXR1cm4gYi5zZXRNb250aCgwKSxiLnNldERhdGUoMSksTWF0aC5mbG9vcihNYXRoLnJvdW5kKChjLWIpLzg2NGU1KS83KSsxfWIuc2hvd1dlZWtzPWUuc2hvd1dlZWtzLGUuc3RlcD17bW9udGhzOjF9LGUuZWxlbWVudD1jO3ZhciBpPVszMSwyOCwzMSwzMCwzMSwzMCwzMSwzMSwzMCwzMSwzMCwzMV07ZS5fcmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXt2YXIgYz1lLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxkPWUuYWN0aXZlRGF0ZS5nZXRNb250aCgpLGY9bmV3IERhdGUoYyxkLDEpLGk9ZS5zdGFydGluZ0RheS1mLmdldERheSgpLGo9aT4wPzctaTotaSxrPW5ldyBEYXRlKGYpO2o+MCYmay5zZXREYXRlKC1qKzEpO2Zvcih2YXIgbD1nKGssNDIpLG09MDs0Mj5tO20rKylsW21dPWFuZ3VsYXIuZXh0ZW5kKGUuY3JlYXRlRGF0ZU9iamVjdChsW21dLGUuZm9ybWF0RGF5KSx7c2Vjb25kYXJ5OmxbbV0uZ2V0TW9udGgoKSE9PWQsdWlkOmIudW5pcXVlSWQrXCItXCIrbX0pO2IubGFiZWxzPW5ldyBBcnJheSg3KTtmb3IodmFyIG49MDs3Pm47bisrKWIubGFiZWxzW25dPXthYmJyOmEobFtuXS5kYXRlLGUuZm9ybWF0RGF5SGVhZGVyKSxmdWxsOmEobFtuXS5kYXRlLFwiRUVFRVwiKX07aWYoYi50aXRsZT1hKGUuYWN0aXZlRGF0ZSxlLmZvcm1hdERheVRpdGxlKSxiLnJvd3M9ZS5zcGxpdChsLDcpLGIuc2hvd1dlZWtzKXtiLndlZWtOdW1iZXJzPVtdO2Zvcih2YXIgbz0oMTEtZS5zdGFydGluZ0RheSklNyxwPWIucm93cy5sZW5ndGgscT0wO3A+cTtxKyspYi53ZWVrTnVtYmVycy5wdXNoKGgoYi5yb3dzW3FdW29dLmRhdGUpKX19LGUuY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpKS1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKX0sZS5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5hY3RpdmVEYXRlLmdldERhdGUoKTtpZihcImxlZnRcIj09PWEpYy09MTtlbHNlIGlmKFwidXBcIj09PWEpYy09NztlbHNlIGlmKFwicmlnaHRcIj09PWEpYys9MTtlbHNlIGlmKFwiZG93blwiPT09YSljKz03O2Vsc2UgaWYoXCJwYWdldXBcIj09PWF8fFwicGFnZWRvd25cIj09PWEpe3ZhciBkPWUuYWN0aXZlRGF0ZS5nZXRNb250aCgpKyhcInBhZ2V1cFwiPT09YT8tMToxKTtlLmFjdGl2ZURhdGUuc2V0TW9udGgoZCwxKSxjPU1hdGgubWluKGYoZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksZS5hY3RpdmVEYXRlLmdldE1vbnRoKCkpLGMpfWVsc2VcImhvbWVcIj09PWE/Yz0xOlwiZW5kXCI9PT1hJiYoYz1mKGUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGUuYWN0aXZlRGF0ZS5nZXRNb250aCgpKSk7ZS5hY3RpdmVEYXRlLnNldERhdGUoYyl9LGUucmVmcmVzaFZpZXcoKX19fV0pLmRpcmVjdGl2ZShcIm1vbnRocGlja2VyXCIsW1wiZGF0ZUZpbHRlclwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLHJlcXVpcmU6XCJeZGF0ZXBpY2tlclwiLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7ZS5zdGVwPXt5ZWFyczoxfSxlLmVsZW1lbnQ9YyxlLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYyxkPW5ldyBBcnJheSgxMiksZj1lLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxnPTA7MTI+ZztnKyspYz1uZXcgRGF0ZShmLGcsMSksZS5maXhUaW1lWm9uZShjKSxkW2ddPWFuZ3VsYXIuZXh0ZW5kKGUuY3JlYXRlRGF0ZU9iamVjdChjLGUuZm9ybWF0TW9udGgpLHt1aWQ6Yi51bmlxdWVJZCtcIi1cIitnfSk7Yi50aXRsZT1hKGUuYWN0aXZlRGF0ZSxlLmZvcm1hdE1vbnRoVGl0bGUpLGIucm93cz1lLnNwbGl0KGQsMyl9LGUuY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpKS1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpKX0sZS5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5hY3RpdmVEYXRlLmdldE1vbnRoKCk7aWYoXCJsZWZ0XCI9PT1hKWMtPTE7ZWxzZSBpZihcInVwXCI9PT1hKWMtPTM7ZWxzZSBpZihcInJpZ2h0XCI9PT1hKWMrPTE7ZWxzZSBpZihcImRvd25cIj09PWEpYys9MztlbHNlIGlmKFwicGFnZXVwXCI9PT1hfHxcInBhZ2Vkb3duXCI9PT1hKXt2YXIgZD1lLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSsoXCJwYWdldXBcIj09PWE/LTE6MSk7ZS5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGQpfWVsc2VcImhvbWVcIj09PWE/Yz0wOlwiZW5kXCI9PT1hJiYoYz0xMSk7ZS5hY3RpdmVEYXRlLnNldE1vbnRoKGMpfSxlLnJlZnJlc2hWaWV3KCl9fX1dKS5kaXJlY3RpdmUoXCJ5ZWFycGlja2VyXCIsW1wiZGF0ZUZpbHRlclwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIscmVxdWlyZTpcIl5kYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBwYXJzZUludCgoYS0xKS9mLDEwKSpmKzF9dmFyIGY9ZC55ZWFyUmFuZ2U7ZC5zdGVwPXt5ZWFyczpmfSxkLmVsZW1lbnQ9YixkLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYixjPW5ldyBBcnJheShmKSxnPTAsaD1lKGQuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKTtmPmc7ZysrKWI9bmV3IERhdGUoaCtnLDAsMSksZC5maXhUaW1lWm9uZShiKSxjW2ddPWFuZ3VsYXIuZXh0ZW5kKGQuY3JlYXRlRGF0ZU9iamVjdChiLGQuZm9ybWF0WWVhcikse3VpZDphLnVuaXF1ZUlkK1wiLVwiK2d9KTthLnRpdGxlPVtjWzBdLmxhYmVsLGNbZi0xXS5sYWJlbF0uam9pbihcIiAtIFwiKSxhLnJvd3M9ZC5zcGxpdChjLDUpfSxkLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5nZXRGdWxsWWVhcigpLWIuZ2V0RnVsbFllYXIoKX0sZC5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCk7XCJsZWZ0XCI9PT1hP2MtPTE6XCJ1cFwiPT09YT9jLT01OlwicmlnaHRcIj09PWE/Yys9MTpcImRvd25cIj09PWE/Yys9NTpcInBhZ2V1cFwiPT09YXx8XCJwYWdlZG93blwiPT09YT9jKz0oXCJwYWdldXBcIj09PWE/LTE6MSkqZC5zdGVwLnllYXJzOlwiaG9tZVwiPT09YT9jPWUoZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpOlwiZW5kXCI9PT1hJiYoYz1lKGQuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKStmLTEpLGQuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihjKX0sZC5yZWZyZXNoVmlldygpfX19XSkuY29uc3RhbnQoXCJkYXRlcGlja2VyUG9wdXBDb25maWdcIix7ZGF0ZXBpY2tlclBvcHVwOlwieXl5eS1NTS1kZFwiLGRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsZGF0ZXBpY2tlclRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixodG1sNVR5cGVzOntkYXRlOlwieXl5eS1NTS1kZFwiLFwiZGF0ZXRpbWUtbG9jYWxcIjpcInl5eXktTU0tZGRUSEg6bW06c3Muc3NzXCIsbW9udGg6XCJ5eXl5LU1NXCJ9LGN1cnJlbnRUZXh0OlwiVG9kYXlcIixjbGVhclRleHQ6XCJDbGVhclwiLGNsb3NlVGV4dDpcIkRvbmVcIixjbG9zZU9uRGF0ZVNlbGVjdGlvbjohMCxhcHBlbmRUb0JvZHk6ITEsc2hvd0J1dHRvbkJhcjohMCxvbk9wZW5Gb2N1czohMH0pLmRpcmVjdGl2ZShcImRhdGVwaWNrZXJQb3B1cFwiLFtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixcIiRkb2N1bWVudFwiLFwiJHJvb3RTY29wZVwiLFwiJHBvc2l0aW9uXCIsXCJkYXRlRmlsdGVyXCIsXCJkYXRlUGFyc2VyXCIsXCJkYXRlcGlja2VyUG9wdXBDb25maWdcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nTW9kZWxcIixzY29wZTp7aXNPcGVuOlwiPT9cIixjdXJyZW50VGV4dDpcIkBcIixjbGVhclRleHQ6XCJAXCIsY2xvc2VUZXh0OlwiQFwiLGRhdGVEaXNhYmxlZDpcIiZcIixjdXN0b21DbGFzczpcIiZcIn0sbGluazpmdW5jdGlvbihqLGssbCxtKXtmdW5jdGlvbiBuKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm5cIi1cIithLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBvKGEpe2lmKGFuZ3VsYXIuaXNOdW1iZXIoYSkmJihhPW5ldyBEYXRlKGEpKSxhKXtpZihhbmd1bGFyLmlzRGF0ZShhKSYmIWlzTmFOKGEpKXJldHVybiBhO2lmKGFuZ3VsYXIuaXNTdHJpbmcoYSkpe3ZhciBiPWcucGFyc2UoYSxxLGouZGF0ZSk7cmV0dXJuIGlzTmFOKGIpP3ZvaWQgMDpifXJldHVybiB2b2lkIDB9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcChhLGIpe3ZhciBjPWF8fGI7aWYoIWwubmdSZXF1aXJlZCYmIWMpcmV0dXJuITA7aWYoYW5ndWxhci5pc051bWJlcihjKSYmKGM9bmV3IERhdGUoYykpLGMpe2lmKGFuZ3VsYXIuaXNEYXRlKGMpJiYhaXNOYU4oYykpcmV0dXJuITA7aWYoYW5ndWxhci5pc1N0cmluZyhjKSl7dmFyIGQ9Zy5wYXJzZShjLHEpO3JldHVybiFpc05hTihkKX1yZXR1cm4hMX1yZXR1cm4hMH12YXIgcSxyPWFuZ3VsYXIuaXNEZWZpbmVkKGwuY2xvc2VPbkRhdGVTZWxlY3Rpb24pP2ouJHBhcmVudC4kZXZhbChsLmNsb3NlT25EYXRlU2VsZWN0aW9uKTpoLmNsb3NlT25EYXRlU2VsZWN0aW9uLHM9YW5ndWxhci5pc0RlZmluZWQobC5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KT9qLiRwYXJlbnQuJGV2YWwobC5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KTpoLmFwcGVuZFRvQm9keSx0PWFuZ3VsYXIuaXNEZWZpbmVkKGwub25PcGVuRm9jdXMpP2ouJHBhcmVudC4kZXZhbChsLm9uT3BlbkZvY3VzKTpoLm9uT3BlbkZvY3VzLHU9YW5ndWxhci5pc0RlZmluZWQobC5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybCk/bC5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDpoLmRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsLHY9YW5ndWxhci5pc0RlZmluZWQobC5kYXRlcGlja2VyVGVtcGxhdGVVcmwpP2wuZGF0ZXBpY2tlclRlbXBsYXRlVXJsOmguZGF0ZXBpY2tlclRlbXBsYXRlVXJsLHc9e307ai5zaG93QnV0dG9uQmFyPWFuZ3VsYXIuaXNEZWZpbmVkKGwuc2hvd0J1dHRvbkJhcik/ai4kcGFyZW50LiRldmFsKGwuc2hvd0J1dHRvbkJhcik6aC5zaG93QnV0dG9uQmFyLGouZ2V0VGV4dD1mdW5jdGlvbihhKXtyZXR1cm4galthK1wiVGV4dFwiXXx8aFthK1wiVGV4dFwiXX0sai5pc0Rpc2FibGVkPWZ1bmN0aW9uKGEpe3JldHVyblwidG9kYXlcIj09PWEmJihhPW5ldyBEYXRlKSxqLndhdGNoRGF0YS5taW5EYXRlJiZqLmNvbXBhcmUoYSx3Lm1pbkRhdGUpPDB8fGoud2F0Y2hEYXRhLm1heERhdGUmJmouY29tcGFyZShhLHcubWF4RGF0ZSk+MH0sai5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkpLW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpfTt2YXIgeD0hMTtpZihoLmh0bWw1VHlwZXNbbC50eXBlXT8ocT1oLmh0bWw1VHlwZXNbbC50eXBlXSx4PSEwKToocT1sLmRhdGVwaWNrZXJQb3B1cHx8aC5kYXRlcGlja2VyUG9wdXAsbC4kb2JzZXJ2ZShcImRhdGVwaWNrZXJQb3B1cFwiLGZ1bmN0aW9uKGEsYil7dmFyIGM9YXx8aC5kYXRlcGlja2VyUG9wdXA7aWYoYyE9PXEmJihxPWMsbS4kbW9kZWxWYWx1ZT1udWxsLCFxKSl0aHJvdyBuZXcgRXJyb3IoXCJkYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLlwiKX0pKSwhcSl0aHJvdyBuZXcgRXJyb3IoXCJkYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLlwiKTtpZih4JiZsLmRhdGVwaWNrZXJQb3B1cCl0aHJvdyBuZXcgRXJyb3IoXCJIVE1MNSBkYXRlIGlucHV0IHR5cGVzIGRvIG5vdCBzdXBwb3J0IGN1c3RvbSBmb3JtYXRzLlwiKTt2YXIgeT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2IGRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IGRhdGVwaWNrZXI+PC9kaXY+PC9kaXY+XCIpO3kuYXR0cih7XCJuZy1tb2RlbFwiOlwiZGF0ZVwiLFwibmctY2hhbmdlXCI6XCJkYXRlU2VsZWN0aW9uKGRhdGUpXCIsXCJ0ZW1wbGF0ZS11cmxcIjp1fSk7dmFyIHo9YW5ndWxhci5lbGVtZW50KHkuY2hpbGRyZW4oKVswXSk7aWYoei5hdHRyKFwidGVtcGxhdGUtdXJsXCIsdikseCYmXCJtb250aFwiPT09bC50eXBlJiYoei5hdHRyKFwiZGF0ZXBpY2tlci1tb2RlXCIsJ1wibW9udGhcIicpLHouYXR0cihcIm1pbi1tb2RlXCIsXCJtb250aFwiKSksbC5kYXRlcGlja2VyT3B0aW9ucyl7dmFyIEE9ai4kcGFyZW50LiRldmFsKGwuZGF0ZXBpY2tlck9wdGlvbnMpO0EmJkEuaW5pdERhdGUmJihqLmluaXREYXRlPUEuaW5pdERhdGUsei5hdHRyKFwiaW5pdC1kYXRlXCIsXCJpbml0RGF0ZVwiKSxkZWxldGUgQS5pbml0RGF0ZSksYW5ndWxhci5mb3JFYWNoKEEsZnVuY3Rpb24oYSxiKXt6LmF0dHIobihiKSxhKX0pfWoud2F0Y2hEYXRhPXt9LGFuZ3VsYXIuZm9yRWFjaChbXCJtaW5Nb2RlXCIsXCJtYXhNb2RlXCIsXCJtaW5EYXRlXCIsXCJtYXhEYXRlXCIsXCJkYXRlcGlja2VyTW9kZVwiLFwiaW5pdERhdGVcIixcInNob3J0Y3V0UHJvcGFnYXRpb25cIl0sZnVuY3Rpb24oYSl7aWYobFthXSl7dmFyIGM9YihsW2FdKTtpZihqLiRwYXJlbnQuJHdhdGNoKGMsZnVuY3Rpb24oYil7ai53YXRjaERhdGFbYV09YiwoXCJtaW5EYXRlXCI9PT1hfHxcIm1heERhdGVcIj09PWEpJiYod1thXT1uZXcgRGF0ZShiKSl9KSx6LmF0dHIobihhKSxcIndhdGNoRGF0YS5cIithKSxcImRhdGVwaWNrZXJNb2RlXCI9PT1hKXt2YXIgZD1jLmFzc2lnbjtqLiR3YXRjaChcIndhdGNoRGF0YS5cIithLGZ1bmN0aW9uKGEsYil7YW5ndWxhci5pc0Z1bmN0aW9uKGQpJiZhIT09YiYmZChqLiRwYXJlbnQsYSl9KX19fSksbC5kYXRlRGlzYWJsZWQmJnouYXR0cihcImRhdGUtZGlzYWJsZWRcIixcImRhdGVEaXNhYmxlZCh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSlcIiksbC5zaG93V2Vla3MmJnouYXR0cihcInNob3ctd2Vla3NcIixsLnNob3dXZWVrcyksbC5jdXN0b21DbGFzcyYmei5hdHRyKFwiY3VzdG9tLWNsYXNzXCIsXCJjdXN0b21DbGFzcyh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSlcIikseD9tLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGouZGF0ZT1hLGF9KToobS4kJHBhcnNlck5hbWU9XCJkYXRlXCIsbS4kdmFsaWRhdG9ycy5kYXRlPXAsbS4kcGFyc2Vycy51bnNoaWZ0KG8pLG0uJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gai5kYXRlPWEsbS4kaXNFbXB0eShhKT9hOmYoYSxxKX0pKSxqLmRhdGVTZWxlY3Rpb249ZnVuY3Rpb24oYSl7YW5ndWxhci5pc0RlZmluZWQoYSkmJihqLmRhdGU9YSk7dmFyIGI9ai5kYXRlP2Yoai5kYXRlLHEpOm51bGw7ay52YWwoYiksbS4kc2V0Vmlld1ZhbHVlKGIpLHImJihqLmlzT3Blbj0hMSxrWzBdLmZvY3VzKCkpfSxtLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXtqLmRhdGU9Zy5wYXJzZShtLiR2aWV3VmFsdWUscSxqLmRhdGUpfSk7dmFyIEI9ZnVuY3Rpb24oYSl7IWouaXNPcGVufHxrWzBdLmNvbnRhaW5zKGEudGFyZ2V0KXx8eVswXS5jb250YWlucyhhLnRhcmdldCl8fGouJGFwcGx5KGZ1bmN0aW9uKCl7ai5pc09wZW49ITF9KX0sQz1mdW5jdGlvbihhKXsyNz09PWEud2hpY2gmJmouaXNPcGVuPyhhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSxqLiRhcHBseShmdW5jdGlvbigpe2ouaXNPcGVuPSExfSksa1swXS5mb2N1cygpKTo0MCE9PWEud2hpY2h8fGouaXNPcGVufHwoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksai4kYXBwbHkoZnVuY3Rpb24oKXtqLmlzT3Blbj0hMH0pKX07ay5iaW5kKFwia2V5ZG93blwiLEMpLGoua2V5ZG93bj1mdW5jdGlvbihhKXsyNz09PWEud2hpY2gmJihqLmlzT3Blbj0hMSxrWzBdLmZvY3VzKCkpfSxqLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGEpe2E/KGoucG9zaXRpb249cz9lLm9mZnNldChrKTplLnBvc2l0aW9uKGspLGoucG9zaXRpb24udG9wPWoucG9zaXRpb24udG9wK2sucHJvcChcIm9mZnNldEhlaWdodFwiKSxpKGZ1bmN0aW9uKCl7dCYmai4kYnJvYWRjYXN0KFwiZGF0ZXBpY2tlci5mb2N1c1wiKSxjLmJpbmQoXCJjbGlja1wiLEIpfSwwLCExKSk6Yy51bmJpbmQoXCJjbGlja1wiLEIpfSksai5zZWxlY3Q9ZnVuY3Rpb24oYSl7aWYoXCJ0b2RheVwiPT09YSl7dmFyIGI9bmV3IERhdGU7YW5ndWxhci5pc0RhdGUoai5kYXRlKT8oYT1uZXcgRGF0ZShqLmRhdGUpLGEuc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSkpOmE9bmV3IERhdGUoYi5zZXRIb3VycygwLDAsMCwwKSl9ai5kYXRlU2VsZWN0aW9uKGEpfSxqLmNsb3NlPWZ1bmN0aW9uKCl7ai5pc09wZW49ITEsa1swXS5mb2N1cygpfTt2YXIgRD1hKHkpKGopO3kucmVtb3ZlKCkscz9jLmZpbmQoXCJib2R5XCIpLmFwcGVuZChEKTprLmFmdGVyKEQpLGouJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2ouaXNPcGVuPT09ITAmJihkLiQkcGhhc2V8fGouJGFwcGx5KGZ1bmN0aW9uKCl7ai5pc09wZW49ITF9KSksRC5yZW1vdmUoKSxrLnVuYmluZChcImtleWRvd25cIixDKSxjLnVuYmluZChcImNsaWNrXCIsQil9KX19fV0pLmRpcmVjdGl2ZShcImRhdGVwaWNrZXJQb3B1cFdyYXBcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCJ9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmRyb3Bkb3duXCIsW1widWkuYm9vdHN0cmFwLnBvc2l0aW9uXCJdKS5jb25zdGFudChcImRyb3Bkb3duQ29uZmlnXCIse29wZW5DbGFzczpcIm9wZW5cIn0pLnNlcnZpY2UoXCJkcm9wZG93blNlcnZpY2VcIixbXCIkZG9jdW1lbnRcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7dGhpcy5vcGVuPWZ1bmN0aW9uKGIpe2N8fChhLmJpbmQoXCJjbGlja1wiLGQpLGEuYmluZChcImtleWRvd25cIixlKSksYyYmYyE9PWImJihjLmlzT3Blbj0hMSksYz1ifSx0aGlzLmNsb3NlPWZ1bmN0aW9uKGIpe2M9PT1iJiYoYz1udWxsLGEudW5iaW5kKFwiY2xpY2tcIixkKSxhLnVuYmluZChcImtleWRvd25cIixlKSl9O3ZhciBkPWZ1bmN0aW9uKGEpe2lmKGMmJighYXx8XCJkaXNhYmxlZFwiIT09Yy5nZXRBdXRvQ2xvc2UoKSkpe3ZhciBkPWMuZ2V0VG9nZ2xlRWxlbWVudCgpO2lmKCEoYSYmZCYmZFswXS5jb250YWlucyhhLnRhcmdldCkpKXt2YXIgZT1jLmdldERyb3Bkb3duRWxlbWVudCgpO2EmJlwib3V0c2lkZUNsaWNrXCI9PT1jLmdldEF1dG9DbG9zZSgpJiZlJiZlWzBdLmNvbnRhaW5zKGEudGFyZ2V0KXx8KGMuaXNPcGVuPSExLGIuJCRwaGFzZXx8Yy4kYXBwbHkoKSl9fX0sZT1mdW5jdGlvbihhKXsyNz09PWEud2hpY2g/KGMuZm9jdXNUb2dnbGVFbGVtZW50KCksZCgpKTpjLmlzS2V5bmF2RW5hYmxlZCgpJiYvKDM4fDQwKS8udGVzdChhLndoaWNoKSYmYy5pc09wZW4mJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSxjLmZvY3VzRHJvcGRvd25FbnRyeShhLndoaWNoKSl9fV0pLmNvbnRyb2xsZXIoXCJEcm9wZG93bkNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsXCJkcm9wZG93bkNvbmZpZ1wiLFwiZHJvcGRvd25TZXJ2aWNlXCIsXCIkYW5pbWF0ZVwiLFwiJHBvc2l0aW9uXCIsXCIkZG9jdW1lbnRcIixcIiRjb21waWxlXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksail7dmFyIGssbCxtPXRoaXMsbj1hLiRuZXcoKSxvPWQub3BlbkNsYXNzLHA9YW5ndWxhci5ub29wLHE9Yi5vblRvZ2dsZT9jKGIub25Ub2dnbGUpOmFuZ3VsYXIubm9vcCxyPSExLHM9ITEsdD1oLmZpbmQoXCJib2R5XCIpO3RoaXMuaW5pdD1mdW5jdGlvbihkKXttLiRlbGVtZW50PWQsYi5pc09wZW4mJihsPWMoYi5pc09wZW4pLHA9bC5hc3NpZ24sYS4kd2F0Y2gobCxmdW5jdGlvbihhKXtuLmlzT3Blbj0hIWF9KSkscj1hbmd1bGFyLmlzRGVmaW5lZChiLmRyb3Bkb3duQXBwZW5kVG9Cb2R5KSxzPWFuZ3VsYXIuaXNEZWZpbmVkKGIua2V5Ym9hcmROYXYpLHImJm0uZHJvcGRvd25NZW51JiYodC5hcHBlbmQobS5kcm9wZG93bk1lbnUpLHQuYWRkQ2xhc3MoXCJkcm9wZG93blwiKSxkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20uZHJvcGRvd25NZW51LnJlbW92ZSgpfSkpfSx0aGlzLnRvZ2dsZT1mdW5jdGlvbihhKXtyZXR1cm4gbi5pc09wZW49YXJndW1lbnRzLmxlbmd0aD8hIWE6IW4uaXNPcGVufSx0aGlzLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiBuLmlzT3Blbn0sbi5nZXRUb2dnbGVFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG0udG9nZ2xlRWxlbWVudH0sbi5nZXRBdXRvQ2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gYi5hdXRvQ2xvc2V8fFwiYWx3YXlzXCJ9LG4uZ2V0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBtLiRlbGVtZW50fSxuLmlzS2V5bmF2RW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBzfSxuLmZvY3VzRHJvcGRvd25FbnRyeT1mdW5jdGlvbihhKXt2YXIgYj1tLmRyb3Bkb3duTWVudT9hbmd1bGFyLmVsZW1lbnQobS5kcm9wZG93bk1lbnUpLmZpbmQoXCJhXCIpOmFuZ3VsYXIuZWxlbWVudChtLiRlbGVtZW50KS5maW5kKFwidWxcIikuZXEoMCkuZmluZChcImFcIik7c3dpdGNoKGEpe2Nhc2UgNDA6YW5ndWxhci5pc051bWJlcihtLnNlbGVjdGVkT3B0aW9uKT9tLnNlbGVjdGVkT3B0aW9uPW0uc2VsZWN0ZWRPcHRpb249PT1iLmxlbmd0aC0xP20uc2VsZWN0ZWRPcHRpb246bS5zZWxlY3RlZE9wdGlvbisxOm0uc2VsZWN0ZWRPcHRpb249MDticmVhaztjYXNlIDM4OmFuZ3VsYXIuaXNOdW1iZXIobS5zZWxlY3RlZE9wdGlvbik/bS5zZWxlY3RlZE9wdGlvbj0wPT09bS5zZWxlY3RlZE9wdGlvbj8wOm0uc2VsZWN0ZWRPcHRpb24tMTptLnNlbGVjdGVkT3B0aW9uPWIubGVuZ3RoLTF9YlttLnNlbGVjdGVkT3B0aW9uXS5mb2N1cygpfSxuLmdldERyb3Bkb3duRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBtLmRyb3Bkb3duTWVudX0sbi5mb2N1c1RvZ2dsZUVsZW1lbnQ9ZnVuY3Rpb24oKXttLnRvZ2dsZUVsZW1lbnQmJm0udG9nZ2xlRWxlbWVudFswXS5mb2N1cygpfSxuLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGIsYyl7aWYociYmbS5kcm9wZG93bk1lbnUpe3ZhciBkPWcucG9zaXRpb25FbGVtZW50cyhtLiRlbGVtZW50LG0uZHJvcGRvd25NZW51LFwiYm90dG9tLWxlZnRcIiwhMCksaD17dG9wOmQudG9wK1wicHhcIixkaXNwbGF5OmI/XCJibG9ja1wiOlwibm9uZVwifSxsPW0uZHJvcGRvd25NZW51Lmhhc0NsYXNzKFwiZHJvcGRvd24tbWVudS1yaWdodFwiKTtsPyhoLmxlZnQ9XCJhdXRvXCIsaC5yaWdodD13aW5kb3cuaW5uZXJXaWR0aC0oZC5sZWZ0K20uJGVsZW1lbnQucHJvcChcIm9mZnNldFdpZHRoXCIpKStcInB4XCIpOihoLmxlZnQ9ZC5sZWZ0K1wicHhcIixoLnJpZ2h0PVwiYXV0b1wiKSxtLmRyb3Bkb3duTWVudS5jc3MoaCl9dmFyIHM9cj90Om0uJGVsZW1lbnQ7aWYoZltiP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKHMsbykudGhlbihmdW5jdGlvbigpe2FuZ3VsYXIuaXNEZWZpbmVkKGIpJiZiIT09YyYmcShhLHtvcGVuOiEhYn0pfSksYiltLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsJiZqKG0uZHJvcGRvd25NZW51VGVtcGxhdGVVcmwpLnRoZW4oZnVuY3Rpb24oYSl7az1uLiRuZXcoKSxpKGEudHJpbSgpKShrLGZ1bmN0aW9uKGEpe3ZhciBiPWE7bS5kcm9wZG93bk1lbnUucmVwbGFjZVdpdGgoYiksbS5kcm9wZG93bk1lbnU9Yn0pfSksbi5mb2N1c1RvZ2dsZUVsZW1lbnQoKSxlLm9wZW4obik7ZWxzZXtpZihtLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsKXtrJiZrLiRkZXN0cm95KCk7dmFyIHU9YW5ndWxhci5lbGVtZW50KCc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+PC91bD4nKTttLmRyb3Bkb3duTWVudS5yZXBsYWNlV2l0aCh1KSxtLmRyb3Bkb3duTWVudT11fWUuY2xvc2UobiksbS5zZWxlY3RlZE9wdGlvbj1udWxsfWFuZ3VsYXIuaXNGdW5jdGlvbihwKSYmcChhLGIpfSksYS4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oKXtcImRpc2FibGVkXCIhPT1uLmdldEF1dG9DbG9zZSgpJiYobi5pc09wZW49ITEpfSk7dmFyIHU9YS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7XG5uLiRkZXN0cm95KCl9KTtuLiRvbihcIiRkZXN0cm95XCIsdSl9XSkuZGlyZWN0aXZlKFwiZHJvcGRvd25cIixmdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOlwiRHJvcGRvd25Db250cm9sbGVyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmluaXQoYiksYi5hZGRDbGFzcyhcImRyb3Bkb3duXCIpfX19KS5kaXJlY3RpdmUoXCJkcm9wZG93bk1lbnVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFDXCIscmVxdWlyZTpcIj9eZHJvcGRvd25cIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGQpe3ZhciBlPWMudGVtcGxhdGVVcmw7ZSYmKGQuZHJvcGRvd25NZW51VGVtcGxhdGVVcmw9ZSksZC5kcm9wZG93bk1lbnV8fChkLmRyb3Bkb3duTWVudT1iKX19fX0pLmRpcmVjdGl2ZShcImtleWJvYXJkTmF2XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9eZHJvcGRvd25cIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2IuYmluZChcImtleWRvd25cIixmdW5jdGlvbihhKXtpZigtMSE9PVszOCw0MF0uaW5kZXhPZihhLndoaWNoKSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGI9ZC5kcm9wZG93bk1lbnUuZmluZChcImFcIik7c3dpdGNoKGEud2hpY2gpe2Nhc2UgNDA6YW5ndWxhci5pc051bWJlcihkLnNlbGVjdGVkT3B0aW9uKT9kLnNlbGVjdGVkT3B0aW9uPWQuc2VsZWN0ZWRPcHRpb249PT1iLmxlbmd0aC0xP2Quc2VsZWN0ZWRPcHRpb246ZC5zZWxlY3RlZE9wdGlvbisxOmQuc2VsZWN0ZWRPcHRpb249MDticmVhaztjYXNlIDM4OmFuZ3VsYXIuaXNOdW1iZXIoZC5zZWxlY3RlZE9wdGlvbik/ZC5zZWxlY3RlZE9wdGlvbj0wPT09ZC5zZWxlY3RlZE9wdGlvbj8wOmQuc2VsZWN0ZWRPcHRpb24tMTpkLnNlbGVjdGVkT3B0aW9uPWIubGVuZ3RoLTF9YltkLnNlbGVjdGVkT3B0aW9uXS5mb2N1cygpfX0pfX19KS5kaXJlY3RpdmUoXCJkcm9wZG93blRvZ2dsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/XmRyb3Bkb3duXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtpZihkKXtiLmFkZENsYXNzKFwiZHJvcGRvd24tdG9nZ2xlXCIpLGQudG9nZ2xlRWxlbWVudD1iO3ZhciBlPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxiLmhhc0NsYXNzKFwiZGlzYWJsZWRcIil8fGMuZGlzYWJsZWR8fGEuJGFwcGx5KGZ1bmN0aW9uKCl7ZC50b2dnbGUoKX0pfTtiLmJpbmQoXCJjbGlja1wiLGUpLGIuYXR0cih7XCJhcmlhLWhhc3BvcHVwXCI6ITAsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KSxhLiR3YXRjaChkLmlzT3BlbixmdW5jdGlvbihhKXtiLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsISFhKX0pLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IudW5iaW5kKFwiY2xpY2tcIixlKX0pfX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAubW9kYWxcIixbXSkuZmFjdG9yeShcIiQkc3RhY2tlZE1hcFwiLGZ1bmN0aW9uKCl7cmV0dXJue2NyZWF0ZU5ldzpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybnthZGQ6ZnVuY3Rpb24oYixjKXthLnB1c2goe2tleTpiLHZhbHVlOmN9KX0sZ2V0OmZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGI9PWFbY10ua2V5KXJldHVybiBhW2NdfSxrZXlzOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyliLnB1c2goYVtjXS5rZXkpO3JldHVybiBifSx0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gYVthLmxlbmd0aC0xXX0scmVtb3ZlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0tMSxkPTA7ZDxhLmxlbmd0aDtkKyspaWYoYj09YVtkXS5rZXkpe2M9ZDticmVha31yZXR1cm4gYS5zcGxpY2UoYywxKVswXX0scmVtb3ZlVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGEuc3BsaWNlKGEubGVuZ3RoLTEsMSlbMF19LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBhLmxlbmd0aH19fX19KS5mYWN0b3J5KFwiJCRtdWx0aU1hcFwiLGZ1bmN0aW9uKCl7cmV0dXJue2NyZWF0ZU5ldzpmdW5jdGlvbigpe3ZhciBhPXt9O3JldHVybntlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKGEpLm1hcChmdW5jdGlvbihiKXtyZXR1cm57a2V5OmIsdmFsdWU6YVtiXX19KX0sZ2V0OmZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfSxoYXNLZXk6ZnVuY3Rpb24oYil7cmV0dXJuISFhW2JdfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKGEpfSxwdXQ6ZnVuY3Rpb24oYixjKXthW2JdfHwoYVtiXT1bXSksYVtiXS5wdXNoKGMpfSxyZW1vdmU6ZnVuY3Rpb24oYixjKXt2YXIgZD1hW2JdO2lmKGQpe3ZhciBlPWQuaW5kZXhPZihjKTstMSE9PWUmJmQuc3BsaWNlKGUsMSksZC5sZW5ndGh8fGRlbGV0ZSBhW2JdfX19fX19KS5kaXJlY3RpdmUoXCJtb2RhbEJhY2tkcm9wXCIsW1wiJGFuaW1hdGVcIixcIiRpbmplY3RvclwiLFwiJG1vZGFsU3RhY2tcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiLGQsZil7Zi5tb2RhbEluQ2xhc3MmJihlP2UoZCx7YWRkQ2xhc3M6Zi5tb2RhbEluQ2xhc3N9KS5zdGFydCgpOmEuYWRkQ2xhc3MoZCxmLm1vZGFsSW5DbGFzcyksYi4kb24oYy5OT1dfQ0xPU0lOR19FVkVOVCxmdW5jdGlvbihiLGMpe3ZhciBnPWMoKTtlP2UoZCx7cmVtb3ZlQ2xhc3M6Zi5tb2RhbEluQ2xhc3N9KS5zdGFydCgpLnRoZW4oZyk6YS5yZW1vdmVDbGFzcyhkLGYubW9kYWxJbkNsYXNzKS50aGVuKGcpfSkpfXZhciBlPW51bGw7cmV0dXJuIGIuaGFzKFwiJGFuaW1hdGVDc3NcIikmJihlPWIuZ2V0KFwiJGFuaW1hdGVDc3NcIikpLHtyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIixjb21waWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuYWRkQ2xhc3MoYi5iYWNrZHJvcENsYXNzKSxkfX19XSkuZGlyZWN0aXZlKFwibW9kYWxXaW5kb3dcIixbXCIkbW9kYWxTdGFja1wiLFwiJHFcIixcIiRhbmltYXRlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1udWxsO3JldHVybiBkLmhhcyhcIiRhbmltYXRlQ3NzXCIpJiYoZT1kLmdldChcIiRhbmltYXRlQ3NzXCIpKSx7cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOntpbmRleDpcIkBcIn0scmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIn0sbGluazpmdW5jdGlvbihkLGYsZyl7Zi5hZGRDbGFzcyhnLndpbmRvd0NsYXNzfHxcIlwiKSxkLnNpemU9Zy5zaXplLGQuY2xvc2U9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRUb3AoKTtjJiZjLnZhbHVlLmJhY2tkcm9wJiZcInN0YXRpY1wiIT09Yy52YWx1ZS5iYWNrZHJvcCYmYi50YXJnZXQ9PT1iLmN1cnJlbnRUYXJnZXQmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLmRpc21pc3MoYy5rZXksXCJiYWNrZHJvcCBjbGlja1wiKSl9LGQuJGlzUmVuZGVyZWQ9ITA7dmFyIGg9Yi5kZWZlcigpO2cuJG9ic2VydmUoXCJtb2RhbFJlbmRlclwiLGZ1bmN0aW9uKGEpe1widHJ1ZVwiPT1hJiZoLnJlc29sdmUoKX0pLGgucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7dmFyIGg9bnVsbDtnLm1vZGFsSW5DbGFzcyYmKGg9ZT9lKGYse2FkZENsYXNzOmcubW9kYWxJbkNsYXNzfSkuc3RhcnQoKTpjLmFkZENsYXNzKGYsZy5tb2RhbEluQ2xhc3MpLGQuJG9uKGEuTk9XX0NMT1NJTkdfRVZFTlQsZnVuY3Rpb24oYSxiKXt2YXIgZD1iKCk7ZT9lKGYse3JlbW92ZUNsYXNzOmcubW9kYWxJbkNsYXNzfSkuc3RhcnQoKS50aGVuKGQpOmMucmVtb3ZlQ2xhc3MoZixnLm1vZGFsSW5DbGFzcykudGhlbihkKX0pKSxiLndoZW4oaCkudGhlbihmdW5jdGlvbigpe3ZhciBhPWZbMF0ucXVlcnlTZWxlY3RvckFsbChcIlthdXRvZm9jdXNdXCIpO2EubGVuZ3RoP2FbMF0uZm9jdXMoKTpmWzBdLmZvY3VzKCl9KTt2YXIgaT1hLmdldFRvcCgpO2kmJmEubW9kYWxSZW5kZXJlZChpLmtleSl9KX19fV0pLmRpcmVjdGl2ZShcIm1vZGFsQW5pbWF0aW9uQ2xhc3NcIixbZnVuY3Rpb24oKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihhLGIpe2IubW9kYWxBbmltYXRpb24mJmEuYWRkQ2xhc3MoYi5tb2RhbEFuaW1hdGlvbkNsYXNzKX19fV0pLmRpcmVjdGl2ZShcIm1vZGFsVHJhbnNjbHVkZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2xpbms6ZnVuY3Rpb24oYSxiLGMsZCxlKXtlKGEuJHBhcmVudCxmdW5jdGlvbihhKXtiLmVtcHR5KCksYi5hcHBlbmQoYSl9KX19fSkuZmFjdG9yeShcIiRtb2RhbFN0YWNrXCIsW1wiJGFuaW1hdGVcIixcIiR0aW1lb3V0XCIsXCIkZG9jdW1lbnRcIixcIiRjb21waWxlXCIsXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGluamVjdG9yXCIsXCIkJG11bHRpTWFwXCIsXCIkJHN0YWNrZWRNYXBcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7ZnVuY3Rpb24gaigpe2Zvcih2YXIgYT0tMSxiPXQua2V5cygpLGM9MDtjPGIubGVuZ3RoO2MrKyl0LmdldChiW2NdKS52YWx1ZS5iYWNrZHJvcCYmKGE9Yyk7cmV0dXJuIGF9ZnVuY3Rpb24gayhhLGIpe3ZhciBkPWMuZmluZChcImJvZHlcIikuZXEoMCksZT10LmdldChhKS52YWx1ZTt0LnJlbW92ZShhKSxtKGUubW9kYWxEb21FbCxlLm1vZGFsU2NvcGUsZnVuY3Rpb24oKXt2YXIgYj1lLm9wZW5lZENsYXNzfHxzO3UucmVtb3ZlKGIsYSksZC50b2dnbGVDbGFzcyhiLHUuaGFzS2V5KGIpKX0pLGwoKSxiJiZiLmZvY3VzP2IuZm9jdXMoKTpkLmZvY3VzKCl9ZnVuY3Rpb24gbCgpe2lmKHAmJi0xPT1qKCkpe3ZhciBhPXE7bShwLHEsZnVuY3Rpb24oKXthPW51bGx9KSxwPXZvaWQgMCxxPXZvaWQgMH19ZnVuY3Rpb24gbShiLGMsZCl7ZnVuY3Rpb24gZSgpe2UuZG9uZXx8KGUuZG9uZT0hMCxvP28oYix7ZXZlbnQ6XCJsZWF2ZVwifSkuc3RhcnQoKS50aGVuKGZ1bmN0aW9uKCl7Yi5yZW1vdmUoKX0pOmEubGVhdmUoYiksYy4kZGVzdHJveSgpLGQmJmQoKSl9dmFyIGcsaD1udWxsLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8KGc9Zi5kZWZlcigpLGg9Zy5wcm9taXNlKSxmdW5jdGlvbigpe2cucmVzb2x2ZSgpfX07cmV0dXJuIGMuJGJyb2FkY2FzdCh2Lk5PV19DTE9TSU5HX0VWRU5ULGkpLGYud2hlbihoKS50aGVuKGUpfWZ1bmN0aW9uIG4oYSxiLGMpe3JldHVybiFhLnZhbHVlLm1vZGFsU2NvcGUuJGJyb2FkY2FzdChcIm1vZGFsLmNsb3NpbmdcIixiLGMpLmRlZmF1bHRQcmV2ZW50ZWR9dmFyIG89bnVsbDtnLmhhcyhcIiRhbmltYXRlQ3NzXCIpJiYobz1nLmdldChcIiRhbmltYXRlQ3NzXCIpKTt2YXIgcCxxLHIscz1cIm1vZGFsLW9wZW5cIix0PWkuY3JlYXRlTmV3KCksdT1oLmNyZWF0ZU5ldygpLHY9e05PV19DTE9TSU5HX0VWRU5UOlwibW9kYWwuc3RhY2subm93LWNsb3NpbmdcIn0sdz0wLHg9XCJhW2hyZWZdLCBhcmVhW2hyZWZdLCBpbnB1dDpub3QoW2Rpc2FibGVkXSksIGJ1dHRvbjpub3QoW2Rpc2FibGVkXSksc2VsZWN0Om5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBpZnJhbWUsIG9iamVjdCwgZW1iZWQsICpbdGFiaW5kZXhdLCAqW2NvbnRlbnRlZGl0YWJsZT10cnVlXVwiO3JldHVybiBlLiR3YXRjaChqLGZ1bmN0aW9uKGEpe3EmJihxLmluZGV4PWEpfSksYy5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2lmKGEuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuIGE7dmFyIGI9dC50b3AoKTtpZihiJiZiLnZhbHVlLmtleWJvYXJkKXN3aXRjaChhLndoaWNoKXtjYXNlIDI3OmEucHJldmVudERlZmF1bHQoKSxlLiRhcHBseShmdW5jdGlvbigpe3YuZGlzbWlzcyhiLmtleSxcImVzY2FwZSBrZXkgcHJlc3NcIil9KTticmVhaztjYXNlIDk6di5sb2FkRm9jdXNFbGVtZW50TGlzdChiKTt2YXIgYz0hMTthLnNoaWZ0S2V5P3YuaXNGb2N1c0luRmlyc3RJdGVtKGEpJiYoYz12LmZvY3VzTGFzdEZvY3VzYWJsZUVsZW1lbnQoKSk6di5pc0ZvY3VzSW5MYXN0SXRlbShhKSYmKGM9di5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudCgpKSxjJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpfX0pLHYub3Blbj1mdW5jdGlvbihhLGIpe3ZhciBmPWNbMF0uYWN0aXZlRWxlbWVudCxnPWIub3BlbmVkQ2xhc3N8fHM7dC5hZGQoYSx7ZGVmZXJyZWQ6Yi5kZWZlcnJlZCxyZW5kZXJEZWZlcnJlZDpiLnJlbmRlckRlZmVycmVkLG1vZGFsU2NvcGU6Yi5zY29wZSxiYWNrZHJvcDpiLmJhY2tkcm9wLGtleWJvYXJkOmIua2V5Ym9hcmQsb3BlbmVkQ2xhc3M6Yi5vcGVuZWRDbGFzc30pLHUucHV0KGcsYSk7dmFyIGg9Yy5maW5kKFwiYm9keVwiKS5lcSgwKSxpPWooKTtpZihpPj0wJiYhcCl7cT1lLiRuZXcoITApLHEuaW5kZXg9aTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgbW9kYWwtYmFja2Ryb3A9XCJtb2RhbC1iYWNrZHJvcFwiPjwvZGl2PicpO2suYXR0cihcImJhY2tkcm9wLWNsYXNzXCIsYi5iYWNrZHJvcENsYXNzKSxiLmFuaW1hdGlvbiYmay5hdHRyKFwibW9kYWwtYW5pbWF0aW9uXCIsXCJ0cnVlXCIpLHA9ZChrKShxKSxoLmFwcGVuZChwKX12YXIgbD1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgbW9kYWwtd2luZG93PVwibW9kYWwtd2luZG93XCI+PC9kaXY+Jyk7bC5hdHRyKHtcInRlbXBsYXRlLXVybFwiOmIud2luZG93VGVtcGxhdGVVcmwsXCJ3aW5kb3ctY2xhc3NcIjpiLndpbmRvd0NsYXNzLHNpemU6Yi5zaXplLGluZGV4OnQubGVuZ3RoKCktMSxhbmltYXRlOlwiYW5pbWF0ZVwifSkuaHRtbChiLmNvbnRlbnQpLGIuYW5pbWF0aW9uJiZsLmF0dHIoXCJtb2RhbC1hbmltYXRpb25cIixcInRydWVcIik7dmFyIG09ZChsKShiLnNjb3BlKTt0LnRvcCgpLnZhbHVlLm1vZGFsRG9tRWw9bSx0LnRvcCgpLnZhbHVlLm1vZGFsT3BlbmVyPWYsaC5hcHBlbmQobSksaC5hZGRDbGFzcyhnKSx2LmNsZWFyRm9jdXNMaXN0Q2FjaGUoKX0sdi5jbG9zZT1mdW5jdGlvbihhLGIpe3ZhciBjPXQuZ2V0KGEpO3JldHVybiBjJiZuKGMsYiwhMCk/KGMudmFsdWUubW9kYWxTY29wZS4kJHVpYkRlc3RydWN0aW9uU2NoZWR1bGVkPSEwLGMudmFsdWUuZGVmZXJyZWQucmVzb2x2ZShiKSxrKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx2LmRpc21pc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz10LmdldChhKTtyZXR1cm4gYyYmbihjLGIsITEpPyhjLnZhbHVlLm1vZGFsU2NvcGUuJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZD0hMCxjLnZhbHVlLmRlZmVycmVkLnJlamVjdChiKSxrKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx2LmRpc21pc3NBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0VG9wKCk7YiYmdGhpcy5kaXNtaXNzKGIua2V5LGEpOyliPXRoaXMuZ2V0VG9wKCl9LHYuZ2V0VG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHQudG9wKCl9LHYubW9kYWxSZW5kZXJlZD1mdW5jdGlvbihhKXt2YXIgYj10LmdldChhKTtiJiZiLnZhbHVlLnJlbmRlckRlZmVycmVkLnJlc29sdmUoKX0sdi5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiByLmxlbmd0aD4wPyhyWzBdLmZvY3VzKCksITApOiExfSx2LmZvY3VzTGFzdEZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gci5sZW5ndGg+MD8ocltyLmxlbmd0aC0xXS5mb2N1cygpLCEwKTohMX0sdi5pc0ZvY3VzSW5GaXJzdEl0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuIHIubGVuZ3RoPjA/KGEudGFyZ2V0fHxhLnNyY0VsZW1lbnQpPT1yWzBdOiExfSx2LmlzRm9jdXNJbkxhc3RJdGVtPWZ1bmN0aW9uKGEpe3JldHVybiByLmxlbmd0aD4wPyhhLnRhcmdldHx8YS5zcmNFbGVtZW50KT09cltyLmxlbmd0aC0xXTohMX0sdi5jbGVhckZvY3VzTGlzdENhY2hlPWZ1bmN0aW9uKCl7cj1bXSx3PTB9LHYubG9hZEZvY3VzRWxlbWVudExpc3Q9ZnVuY3Rpb24oYSl7aWYoKHZvaWQgMD09PXJ8fCFyLmxlbmd0aDApJiZhKXt2YXIgYj1hLnZhbHVlLm1vZGFsRG9tRWw7YiYmYi5sZW5ndGgmJihyPWJbMF0ucXVlcnlTZWxlY3RvckFsbCh4KSl9fSx2fV0pLnByb3ZpZGVyKFwiJG1vZGFsXCIsZnVuY3Rpb24oKXt2YXIgYT17b3B0aW9uczp7YW5pbWF0aW9uOiEwLGJhY2tkcm9wOiEwLGtleWJvYXJkOiEwfSwkZ2V0OltcIiRpbmplY3RvclwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixcIiRjb250cm9sbGVyXCIsXCIkbW9kYWxTdGFja1wiLGZ1bmN0aW9uKGIsYyxkLGUsZixnKXtmdW5jdGlvbiBoKGEpe3JldHVybiBhLnRlbXBsYXRlP2Qud2hlbihhLnRlbXBsYXRlKTplKGFuZ3VsYXIuaXNGdW5jdGlvbihhLnRlbXBsYXRlVXJsKT9hLnRlbXBsYXRlVXJsKCk6YS50ZW1wbGF0ZVVybCl9ZnVuY3Rpb24gaShhKXt2YXIgYz1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSl7YW5ndWxhci5pc0Z1bmN0aW9uKGEpfHxhbmd1bGFyLmlzQXJyYXkoYSk/Yy5wdXNoKGQud2hlbihiLmludm9rZShhKSkpOmFuZ3VsYXIuaXNTdHJpbmcoYSk/Yy5wdXNoKGQud2hlbihiLmdldChhKSkpOmMucHVzaChkLndoZW4oYSkpfSksY312YXIgaj17fSxrPW51bGw7cmV0dXJuIGouZ2V0UHJvbWlzZUNoYWluPWZ1bmN0aW9uKCl7cmV0dXJuIGt9LGoub3Blbj1mdW5jdGlvbihiKXt2YXIgZT1kLmRlZmVyKCksaj1kLmRlZmVyKCksbD1kLmRlZmVyKCksbT17cmVzdWx0OmUucHJvbWlzZSxvcGVuZWQ6ai5wcm9taXNlLHJlbmRlcmVkOmwucHJvbWlzZSxjbG9zZTpmdW5jdGlvbihhKXtyZXR1cm4gZy5jbG9zZShtLGEpfSxkaXNtaXNzOmZ1bmN0aW9uKGEpe3JldHVybiBnLmRpc21pc3MobSxhKX19O2lmKGI9YW5ndWxhci5leHRlbmQoe30sYS5vcHRpb25zLGIpLGIucmVzb2x2ZT1iLnJlc29sdmV8fHt9LCFiLnRlbXBsYXRlJiYhYi50ZW1wbGF0ZVVybCl0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgdGVtcGxhdGUgb3IgdGVtcGxhdGVVcmwgb3B0aW9ucyBpcyByZXF1aXJlZC5cIik7dmFyIG4sbz1kLmFsbChbaChiKV0uY29uY2F0KGkoYi5yZXNvbHZlKSkpO3JldHVybiBuPWs9ZC5hbGwoW2tdKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG99LGZ1bmN0aW9uKCl7cmV0dXJuIG99KS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBkPShiLnNjb3BlfHxjKS4kbmV3KCk7ZC4kY2xvc2U9bS5jbG9zZSxkLiRkaXNtaXNzPW0uZGlzbWlzcyxkLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtkLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWR8fGQuJGRpc21pc3MoXCIkdWliVW5zY2hlZHVsZWREZXN0cnVjdGlvblwiKX0pO3ZhciBoLGk9e30saz0xO2IuY29udHJvbGxlciYmKGkuJHNjb3BlPWQsaS4kbW9kYWxJbnN0YW5jZT1tLGFuZ3VsYXIuZm9yRWFjaChiLnJlc29sdmUsZnVuY3Rpb24oYixjKXtpW2NdPWFbaysrXX0pLGg9ZihiLmNvbnRyb2xsZXIsaSksYi5jb250cm9sbGVyQXMmJihiLmJpbmRUb0NvbnRyb2xsZXImJmFuZ3VsYXIuZXh0ZW5kKGgsZCksZFtiLmNvbnRyb2xsZXJBc109aCkpLGcub3BlbihtLHtzY29wZTpkLGRlZmVycmVkOmUscmVuZGVyRGVmZXJyZWQ6bCxjb250ZW50OmFbMF0sYW5pbWF0aW9uOmIuYW5pbWF0aW9uLGJhY2tkcm9wOmIuYmFja2Ryb3Asa2V5Ym9hcmQ6Yi5rZXlib2FyZCxiYWNrZHJvcENsYXNzOmIuYmFja2Ryb3BDbGFzcyx3aW5kb3dDbGFzczpiLndpbmRvd0NsYXNzLHdpbmRvd1RlbXBsYXRlVXJsOmIud2luZG93VGVtcGxhdGVVcmwsc2l6ZTpiLnNpemUsb3BlbmVkQ2xhc3M6Yi5vcGVuZWRDbGFzc30pLGoucmVzb2x2ZSghMCl9LGZ1bmN0aW9uKGEpe2oucmVqZWN0KGEpLGUucmVqZWN0KGEpfSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7az09PW4mJihrPW51bGwpfSksbX0san1dfTtyZXR1cm4gYX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb25cIixbXSkuY29udHJvbGxlcihcIlBhZ2luYXRpb25Db250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSxmPWIubnVtUGFnZXM/YyhiLm51bVBhZ2VzKS5hc3NpZ246YW5ndWxhci5ub29wO3RoaXMuaW5pdD1mdW5jdGlvbihnLGgpe2U9Zyx0aGlzLmNvbmZpZz1oLGUuJHJlbmRlcj1mdW5jdGlvbigpe2QucmVuZGVyKCl9LGIuaXRlbXNQZXJQYWdlP2EuJHBhcmVudC4kd2F0Y2goYyhiLml0ZW1zUGVyUGFnZSksZnVuY3Rpb24oYil7ZC5pdGVtc1BlclBhZ2U9cGFyc2VJbnQoYiwxMCksYS50b3RhbFBhZ2VzPWQuY2FsY3VsYXRlVG90YWxQYWdlcygpfSk6dGhpcy5pdGVtc1BlclBhZ2U9aC5pdGVtc1BlclBhZ2UsYS4kd2F0Y2goXCJ0b3RhbEl0ZW1zXCIsZnVuY3Rpb24oKXthLnRvdGFsUGFnZXM9ZC5jYWxjdWxhdGVUb3RhbFBhZ2VzKCl9KSxhLiR3YXRjaChcInRvdGFsUGFnZXNcIixmdW5jdGlvbihiKXtmKGEuJHBhcmVudCxiKSxhLnBhZ2U+Yj9hLnNlbGVjdFBhZ2UoYik6ZS4kcmVuZGVyKCl9KX0sdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5pdGVtc1BlclBhZ2U8MT8xOk1hdGguY2VpbChhLnRvdGFsSXRlbXMvdGhpcy5pdGVtc1BlclBhZ2UpO3JldHVybiBNYXRoLm1heChifHwwLDEpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EucGFnZT1wYXJzZUludChlLiR2aWV3VmFsdWUsMTApfHwxfSxhLnNlbGVjdFBhZ2U9ZnVuY3Rpb24oYixjKXtjJiZjLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ9IWEubmdEaXNhYmxlZHx8IWM7ZCYmYS5wYWdlIT09YiYmYj4wJiZiPD1hLnRvdGFsUGFnZXMmJihjJiZjLnRhcmdldCYmYy50YXJnZXQuYmx1cigpLGUuJHNldFZpZXdWYWx1ZShiKSxlLiRyZW5kZXIoKSl9LGEuZ2V0VGV4dD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiK1wiVGV4dFwiXXx8ZC5jb25maWdbYitcIlRleHRcIl19LGEubm9QcmV2aW91cz1mdW5jdGlvbigpe3JldHVybiAxPT09YS5wYWdlfSxhLm5vTmV4dD1mdW5jdGlvbigpe3JldHVybiBhLnBhZ2U9PT1hLnRvdGFsUGFnZXN9fV0pLmNvbnN0YW50KFwicGFnaW5hdGlvbkNvbmZpZ1wiLHtpdGVtc1BlclBhZ2U6MTAsYm91bmRhcnlMaW5rczohMSxkaXJlY3Rpb25MaW5rczohMCxmaXJzdFRleHQ6XCJGaXJzdFwiLHByZXZpb3VzVGV4dDpcIlByZXZpb3VzXCIsbmV4dFRleHQ6XCJOZXh0XCIsbGFzdFRleHQ6XCJMYXN0XCIscm90YXRlOiEwfSkuZGlyZWN0aXZlKFwicGFnaW5hdGlvblwiLFtcIiRwYXJzZVwiLFwicGFnaW5hdGlvbkNvbmZpZ1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7dG90YWxJdGVtczpcIj1cIixmaXJzdFRleHQ6XCJAXCIscHJldmlvdXNUZXh0OlwiQFwiLG5leHRUZXh0OlwiQFwiLGxhc3RUZXh0OlwiQFwiLG5nRGlzYWJsZWQ6XCI9XCJ9LHJlcXVpcmU6W1wicGFnaW5hdGlvblwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpcIlBhZ2luYXRpb25Db250cm9sbGVyXCIsY29udHJvbGxlckFzOlwicGFnaW5hdGlvblwiLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIn0scmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxiLGMpe3JldHVybntudW1iZXI6YSx0ZXh0OmIsYWN0aXZlOmN9fWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1bXSxkPTEsZT1iLGY9YW5ndWxhci5pc0RlZmluZWQoaykmJmI+aztmJiYobD8oZD1NYXRoLm1heChhLU1hdGguZmxvb3Ioay8yKSwxKSxlPWQray0xLGU+YiYmKGU9YixkPWUtaysxKSk6KGQ9KE1hdGguY2VpbChhL2spLTEpKmsrMSxlPU1hdGgubWluKGQray0xLGIpKSk7Zm9yKHZhciBoPWQ7ZT49aDtoKyspe3ZhciBpPWcoaCxoLGg9PT1hKTtjLnB1c2goaSl9aWYoZiYmIWwpe2lmKGQ+MSl7dmFyIGo9ZyhkLTEsXCIuLi5cIiwhMSk7Yy51bnNoaWZ0KGopfWlmKGI+ZSl7dmFyIG09ZyhlKzEsXCIuLi5cIiwhMSk7Yy5wdXNoKG0pfX1yZXR1cm4gY312YXIgaT1mWzBdLGo9ZlsxXTtpZihqKXt2YXIgaz1hbmd1bGFyLmlzRGVmaW5lZChlLm1heFNpemUpP2MuJHBhcmVudC4kZXZhbChlLm1heFNpemUpOmIubWF4U2l6ZSxsPWFuZ3VsYXIuaXNEZWZpbmVkKGUucm90YXRlKT9jLiRwYXJlbnQuJGV2YWwoZS5yb3RhdGUpOmIucm90YXRlO2MuYm91bmRhcnlMaW5rcz1hbmd1bGFyLmlzRGVmaW5lZChlLmJvdW5kYXJ5TGlua3MpP2MuJHBhcmVudC4kZXZhbChlLmJvdW5kYXJ5TGlua3MpOmIuYm91bmRhcnlMaW5rcyxjLmRpcmVjdGlvbkxpbmtzPWFuZ3VsYXIuaXNEZWZpbmVkKGUuZGlyZWN0aW9uTGlua3MpP2MuJHBhcmVudC4kZXZhbChlLmRpcmVjdGlvbkxpbmtzKTpiLmRpcmVjdGlvbkxpbmtzLGkuaW5pdChqLGIpLGUubWF4U2l6ZSYmYy4kcGFyZW50LiR3YXRjaChhKGUubWF4U2l6ZSksZnVuY3Rpb24oYSl7az1wYXJzZUludChhLDEwKSxpLnJlbmRlcigpfSk7dmFyIG09aS5yZW5kZXI7aS5yZW5kZXI9ZnVuY3Rpb24oKXttKCksYy5wYWdlPjAmJmMucGFnZTw9Yy50b3RhbFBhZ2VzJiYoYy5wYWdlcz1oKGMucGFnZSxjLnRvdGFsUGFnZXMpKX19fX19XSkuY29uc3RhbnQoXCJwYWdlckNvbmZpZ1wiLHtpdGVtc1BlclBhZ2U6MTAscHJldmlvdXNUZXh0OlwiwqsgUHJldmlvdXNcIixuZXh0VGV4dDpcIk5leHQgwrtcIixhbGlnbjohMH0pLmRpcmVjdGl2ZShcInBhZ2VyXCIsW1wicGFnZXJDb25maWdcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOnt0b3RhbEl0ZW1zOlwiPVwiLHByZXZpb3VzVGV4dDpcIkBcIixuZXh0VGV4dDpcIkBcIixuZ0Rpc2FibGVkOlwiPVwifSxyZXF1aXJlOltcInBhZ2VyXCIsXCI/bmdNb2RlbFwiXSxjb250cm9sbGVyOlwiUGFnaW5hdGlvbkNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJwYWdpbmF0aW9uXCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2VyLmh0bWxcIn0scmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmPWVbMF0sZz1lWzFdO2cmJihiLmFsaWduPWFuZ3VsYXIuaXNEZWZpbmVkKGQuYWxpZ24pP2IuJHBhcmVudC4kZXZhbChkLmFsaWduKTphLmFsaWduLGYuaW5pdChnLGEpKX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRvb2x0aXBcIixbXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiXSkucHJvdmlkZXIoXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj0vW0EtWl0vZyxjPVwiLVwiO3JldHVybiBhLnJlcGxhY2UoYixmdW5jdGlvbihhLGIpe3JldHVybihiP2M6XCJcIikrYS50b0xvd2VyQ2FzZSgpfSl9dmFyIGI9e3BsYWNlbWVudDpcInRvcFwiLGFuaW1hdGlvbjohMCxwb3B1cERlbGF5OjAsdXNlQ29udGVudEV4cDohMX0sYz17bW91c2VlbnRlcjpcIm1vdXNlbGVhdmVcIixjbGljazpcImNsaWNrXCIsZm9jdXM6XCJibHVyXCIsbm9uZTpcIlwifSxkPXt9O3RoaXMub3B0aW9ucz1mdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLGEpfSx0aGlzLnNldFRyaWdnZXJzPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGMsYSl9LHRoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcIiRkb2N1bWVudFwiLFwiJHBvc2l0aW9uXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRyb290U2NvcGVcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGUsZixnLGgsaSxqLGssbCl7cmV0dXJuIGZ1bmN0aW9uKGUsbSxuLG8pe2Z1bmN0aW9uIHAoYSl7dmFyIGI9KGF8fG8udHJpZ2dlcnx8bikuc3BsaXQoXCIgXCIpLGQ9Yi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV18fGF9KTtyZXR1cm57c2hvdzpiLGhpZGU6ZH19bz1hbmd1bGFyLmV4dGVuZCh7fSxiLGQsbyk7dmFyIHE9YShlKSxyPWouc3RhcnRTeW1ib2woKSxzPWouZW5kU3ltYm9sKCksdD1cIjxkaXYgXCIrcSsnLXBvcHVwIHRpdGxlPVwiJytyK1widGl0bGVcIitzKydcIiAnKyhvLnVzZUNvbnRlbnRFeHA/J2NvbnRlbnQtZXhwPVwiY29udGVudEV4cCgpXCIgJzonY29udGVudD1cIicrcitcImNvbnRlbnRcIitzKydcIiAnKSsncGxhY2VtZW50PVwiJytyK1wicGxhY2VtZW50XCIrcysnXCIgcG9wdXAtY2xhc3M9XCInK3IrXCJwb3B1cENsYXNzXCIrcysnXCIgYW5pbWF0aW9uPVwiYW5pbWF0aW9uXCIgaXMtb3Blbj1cImlzT3Blblwib3JpZ2luLXNjb3BlPVwib3JpZ1Njb3BlXCIgPjwvZGl2Pic7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Zih0KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGQsZil7ZnVuY3Rpb24gaigpe0kuaXNPcGVuP3EoKTpuKCl9ZnVuY3Rpb24gbigpeyghSHx8YS4kZXZhbChkW20rXCJFbmFibGVcIl0pKSYmKHYoKSxJLnBvcHVwRGVsYXk/RHx8KEQ9ZyhyLEkucG9wdXBEZWxheSwhMSkpOnIoKSl9ZnVuY3Rpb24gcSgpe3MoKSxrLiQkcGhhc2V8fGsuJGRpZ2VzdCgpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gRD1udWxsLEMmJihnLmNhbmNlbChDKSxDPW51bGwpLChvLnVzZUNvbnRlbnRFeHA/SS5jb250ZW50RXhwKCk6SS5jb250ZW50KT8odCgpLEkuaXNPcGVuPSEwLEsmJksuYXNzaWduKEkub3JpZ1Njb3BlLEkuaXNPcGVuKSxrLiQkcGhhc2V8fEkuJGFwcGx5KCksQS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wifSksdm9pZCBMKCkpOmFuZ3VsYXIubm9vcH1mdW5jdGlvbiBzKCl7SS5pc09wZW49ITEsSyYmSy5hc3NpZ24oSS5vcmlnU2NvcGUsSS5pc09wZW4pLGcuY2FuY2VsKEQpLEQ9bnVsbCxnLmNhbmNlbChFKSxFPW51bGwsSS5hbmltYXRpb24/Q3x8KEM9Zyh1LDUwMCkpOnUoKX1mdW5jdGlvbiB0KCl7QSYmdSgpLEI9SS4kbmV3KCksQT1jKEIsZnVuY3Rpb24oYSl7Rj9oLmZpbmQoXCJib2R5XCIpLmFwcGVuZChhKTpiLmFmdGVyKGEpfSksby51c2VDb250ZW50RXhwJiYoQi4kd2F0Y2goXCJjb250ZW50RXhwKClcIixmdW5jdGlvbihhKXshYSYmSS5pc09wZW4mJnMoKX0pLEIuJHdhdGNoKGZ1bmN0aW9uKCl7Snx8KEo9ITAsQi4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtKPSExLEkuaXNPcGVuJiZMKCl9KSl9KSl9ZnVuY3Rpb24gdSgpe0M9bnVsbCxBJiYoQS5yZW1vdmUoKSxBPW51bGwpLEImJihCLiRkZXN0cm95KCksQj1udWxsKX1mdW5jdGlvbiB2KCl7dygpLHgoKSx5KCl9ZnVuY3Rpb24gdygpe0kucG9wdXBDbGFzcz1kW20rXCJDbGFzc1wiXX1mdW5jdGlvbiB4KCl7dmFyIGE9ZFttK1wiUGxhY2VtZW50XCJdO0kucGxhY2VtZW50PWFuZ3VsYXIuaXNEZWZpbmVkKGEpP2E6by5wbGFjZW1lbnR9ZnVuY3Rpb24geSgpe3ZhciBhPWRbbStcIlBvcHVwRGVsYXlcIl0sYj1wYXJzZUludChhLDEwKTtJLnBvcHVwRGVsYXk9aXNOYU4oYik/by5wb3B1cERlbGF5OmJ9ZnVuY3Rpb24geigpe3ZhciBhPWRbbStcIlRyaWdnZXJcIl07TSgpLEc9cChhKSxcIm5vbmVcIiE9PUcuc2hvdyYmRy5zaG93LmZvckVhY2goZnVuY3Rpb24oYSxjKXthPT09Ry5oaWRlW2NdP2JbMF0uYWRkRXZlbnRMaXN0ZW5lcihhLGopOmEmJihiWzBdLmFkZEV2ZW50TGlzdGVuZXIoYSxuKSxiWzBdLmFkZEV2ZW50TGlzdGVuZXIoRy5oaWRlW2NdLHEpKX0pfXZhciBBLEIsQyxELEUsRj1hbmd1bGFyLmlzRGVmaW5lZChvLmFwcGVuZFRvQm9keSk/by5hcHBlbmRUb0JvZHk6ITEsRz1wKHZvaWQgMCksSD1hbmd1bGFyLmlzRGVmaW5lZChkW20rXCJFbmFibGVcIl0pLEk9YS4kbmV3KCEwKSxKPSExLEs9YW5ndWxhci5pc0RlZmluZWQoZFttK1wiSXNPcGVuXCJdKT9sKGRbbStcIklzT3BlblwiXSk6ITEsTD1mdW5jdGlvbigpe0EmJihFfHwoRT1nKGZ1bmN0aW9uKCl7QS5jc3Moe3RvcDowLGxlZnQ6MCx3aWR0aDpcImF1dG9cIixoZWlnaHQ6XCJhdXRvXCJ9KTt2YXIgYT1pLnBvc2l0aW9uKEEpLGM9aS5wb3NpdGlvbkVsZW1lbnRzKGIsQSxJLnBsYWNlbWVudCxGKTtjLnRvcCs9XCJweFwiLGMubGVmdCs9XCJweFwiLGMud2lkdGg9YS53aWR0aCtcInB4XCIsYy5oZWlnaHQ9YS5oZWlnaHQrXCJweFwiLEEuY3NzKGMpLEU9bnVsbH0sMCwhMSkpKX07SS5vcmlnU2NvcGU9YSxJLmlzT3Blbj0hMSxJLmNvbnRlbnRFeHA9ZnVuY3Rpb24oKXtyZXR1cm4gYS4kZXZhbChkW2VdKX0sby51c2VDb250ZW50RXhwfHxkLiRvYnNlcnZlKGUsZnVuY3Rpb24oYSl7SS5jb250ZW50PWEsIWEmJkkuaXNPcGVuP3MoKTpMKCl9KSxkLiRvYnNlcnZlKFwiZGlzYWJsZWRcIixmdW5jdGlvbihhKXtEJiZhJiYoZy5jYW5jZWwoRCksRD1udWxsKSxhJiZJLmlzT3BlbiYmcygpfSksZC4kb2JzZXJ2ZShtK1wiVGl0bGVcIixmdW5jdGlvbihhKXtJLnRpdGxlPWEsTCgpfSksZC4kb2JzZXJ2ZShtK1wiUGxhY2VtZW50XCIsZnVuY3Rpb24oKXtJLmlzT3BlbiYmKHgoKSxMKCkpfSksSyYmYS4kd2F0Y2goSyxmdW5jdGlvbihhKXthIT09SS5pc09wZW4mJmooKX0pO3ZhciBNPWZ1bmN0aW9uKCl7Ry5zaG93LmZvckVhY2goZnVuY3Rpb24oYSl7Yi51bmJpbmQoYSxuKX0pLEcuaGlkZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IudW5iaW5kKGEscSl9KX07eigpO3ZhciBOPWEuJGV2YWwoZFttK1wiQW5pbWF0aW9uXCJdKTtJLmFuaW1hdGlvbj1hbmd1bGFyLmlzRGVmaW5lZChOKT8hIU46by5hbmltYXRpb247dmFyIE89YS4kZXZhbChkW20rXCJBcHBlbmRUb0JvZHlcIl0pO0Y9YW5ndWxhci5pc0RlZmluZWQoTyk/TzpGLEYmJmEuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7SS5pc09wZW4mJnMoKX0pLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2cuY2FuY2VsKEMpLGcuY2FuY2VsKEQpLGcuY2FuY2VsKEUpLE0oKSx1KCksST1udWxsfSl9fX19fV19KS5kaXJlY3RpdmUoXCJ0b29sdGlwVGVtcGxhdGVUcmFuc2NsdWRlXCIsW1wiJGFuaW1hdGVcIixcIiRzY2VcIixcIiRjb21waWxlXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJue2xpbms6ZnVuY3Rpb24oZSxmLGcpe3ZhciBoLGksaixrPWUuJGV2YWwoZy50b29sdGlwVGVtcGxhdGVUcmFuc2NsdWRlU2NvcGUpLGw9MCxtPWZ1bmN0aW9uKCl7aSYmKGkucmVtb3ZlKCksaT1udWxsKSxoJiYoaC4kZGVzdHJveSgpLGg9bnVsbCksaiYmKGEubGVhdmUoaikudGhlbihmdW5jdGlvbigpe2k9bnVsbH0pLGk9aixqPW51bGwpfTtlLiR3YXRjaChiLnBhcnNlQXNSZXNvdXJjZVVybChnLnRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGUpLGZ1bmN0aW9uKGIpe3ZhciBnPSsrbDtiPyhkKGIsITApLnRoZW4oZnVuY3Rpb24oZCl7aWYoZz09PWwpe3ZhciBlPWsuJG5ldygpLGk9ZCxuPWMoaSkoZSxmdW5jdGlvbihiKXttKCksYS5lbnRlcihiLGYpfSk7aD1lLGo9bixoLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50TG9hZGVkXCIsYil9fSxmdW5jdGlvbigpe2c9PT1sJiYobSgpLGUuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRFcnJvclwiLGIpKX0pLGUuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIixiKSk6bSgpfSksZS4kb24oXCIkZGVzdHJveVwiLG0pfX19XSkuZGlyZWN0aXZlKFwidG9vbHRpcENsYXNzZXNcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixsaW5rOmZ1bmN0aW9uKGEsYixjKXthLnBsYWNlbWVudCYmYi5hZGRDbGFzcyhhLnBsYWNlbWVudCksYS5wb3B1cENsYXNzJiZiLmFkZENsYXNzKGEucG9wdXBDbGFzcyksYS5hbmltYXRpb24oKSYmYi5hZGRDbGFzcyhjLnRvb2x0aXBBbmltYXRpb25DbGFzcyl9fX0pLmRpcmVjdGl2ZShcInRvb2x0aXBQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50OlwiQFwiLHBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ0b29sdGlwXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInRvb2x0aXBcIixcInRvb2x0aXBcIixcIm1vdXNlZW50ZXJcIil9XSkuZGlyZWN0aXZlKFwidG9vbHRpcFRlbXBsYXRlUG9wdXBcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCxzY29wZTp7Y29udGVudEV4cDpcIiZcIixwbGFjZW1lbnQ6XCJAXCIscG9wdXBDbGFzczpcIkBcIixhbmltYXRpb246XCImXCIsaXNPcGVuOlwiJlwiLG9yaWdpblNjb3BlOlwiJlwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sXCJ9fSkuZGlyZWN0aXZlKFwidG9vbHRpcFRlbXBsYXRlXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInRvb2x0aXBUZW1wbGF0ZVwiLFwidG9vbHRpcFwiLFwibW91c2VlbnRlclwiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwidG9vbHRpcEh0bWxQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOlwiJlwiLHBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtcG9wdXAuaHRtbFwifX0pLmRpcmVjdGl2ZShcInRvb2x0aXBIdG1sXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInRvb2x0aXBIdG1sXCIsXCJ0b29sdGlwXCIsXCJtb3VzZWVudGVyXCIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoXCJ0b29sdGlwSHRtbFVuc2FmZVBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnQ6XCJAXCIscGxhY2VtZW50OlwiQFwiLHBvcHVwQ2xhc3M6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwifX0pLnZhbHVlKFwidG9vbHRpcEh0bWxVbnNhZmVTdXBwcmVzc0RlcHJlY2F0ZWRcIiwhMSkuZGlyZWN0aXZlKFwidG9vbHRpcEh0bWxVbnNhZmVcIixbXCIkdG9vbHRpcFwiLFwidG9vbHRpcEh0bWxVbnNhZmVTdXBwcmVzc0RlcHJlY2F0ZWRcIixcIiRsb2dcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGJ8fGMud2FybihcInRvb2x0aXAtaHRtbC11bnNhZmUgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB0b29sdGlwLWh0bWwgb3IgdG9vbHRpcC10ZW1wbGF0ZSBpbnN0ZWFkLlwiKSxhKFwidG9vbHRpcEh0bWxVbnNhZmVcIixcInRvb2x0aXBcIixcIm1vdXNlZW50ZXJcIil9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFtcInVpLmJvb3RzdHJhcC50b29sdGlwXCJdKS5kaXJlY3RpdmUoXCJwb3BvdmVyVGVtcGxhdGVQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOnt0aXRsZTpcIkBcIixjb250ZW50RXhwOlwiJlwiLHBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCIsb3JpZ2luU2NvcGU6XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLXRlbXBsYXRlLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJwb3BvdmVyVGVtcGxhdGVcIixbXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwicG9wb3ZlclRlbXBsYXRlXCIsXCJwb3BvdmVyXCIsXCJjbGlja1wiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwicG9wb3Zlckh0bWxQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOlwiJlwiLHRpdGxlOlwiQFwiLHBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLWh0bWwuaHRtbFwifX0pLmRpcmVjdGl2ZShcInBvcG92ZXJIdG1sXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInBvcG92ZXJIdG1sXCIsXCJwb3BvdmVyXCIsXCJjbGlja1wiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwicG9wb3ZlclBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsc2NvcGU6e3RpdGxlOlwiQFwiLGNvbnRlbnQ6XCJAXCIscGxhY2VtZW50OlwiQFwiLHBvcHVwQ2xhc3M6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwifX0pLmRpcmVjdGl2ZShcInBvcG92ZXJcIixbXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwicG9wb3ZlclwiLFwicG9wb3ZlclwiLFwiY2xpY2tcIil9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixbXSkuY29uc3RhbnQoXCJwcm9ncmVzc0NvbmZpZ1wiLHthbmltYXRlOiEwLG1heDoxMDB9KS52YWx1ZShcIiRwcm9ncmVzc1N1cHByZXNzV2FybmluZ1wiLCExKS5jb250cm9sbGVyKFwiUHJvZ3Jlc3NDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInByb2dyZXNzQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1hbmd1bGFyLmlzRGVmaW5lZChiLmFuaW1hdGUpP2EuJHBhcmVudC4kZXZhbChiLmFuaW1hdGUpOmMuYW5pbWF0ZTt0aGlzLmJhcnM9W10sYS5tYXg9YW5ndWxhci5pc0RlZmluZWQoYS5tYXgpP2EubWF4OmMubWF4LHRoaXMuYWRkQmFyPWZ1bmN0aW9uKGIsYyl7ZXx8Yy5jc3Moe3RyYW5zaXRpb246XCJub25lXCJ9KSx0aGlzLmJhcnMucHVzaChiKSxiLm1heD1hLm1heCxiLiR3YXRjaChcInZhbHVlXCIsZnVuY3Rpb24oYSl7Yi5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pLGIucmVjYWxjdWxhdGVQZXJjZW50YWdlPWZ1bmN0aW9uKCl7Yi5wZXJjZW50PSsoMTAwKmIudmFsdWUvYi5tYXgpLnRvRml4ZWQoMik7dmFyIGE9ZC5iYXJzLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBhK2IucGVyY2VudH0sMCk7YT4xMDAmJihiLnBlcmNlbnQtPWEtMTAwKX0sYi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Yz1udWxsLGQucmVtb3ZlQmFyKGIpfSl9LHRoaXMucmVtb3ZlQmFyPWZ1bmN0aW9uKGEpe3RoaXMuYmFycy5zcGxpY2UodGhpcy5iYXJzLmluZGV4T2YoYSksMSl9LGEuJHdhdGNoKFwibWF4XCIsZnVuY3Rpb24oYil7ZC5iYXJzLmZvckVhY2goZnVuY3Rpb24oYil7Yi5tYXg9YS5tYXgsYi5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pfSl9XSkuZGlyZWN0aXZlKFwidWliUHJvZ3Jlc3NcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6XCJQcm9ncmVzc0NvbnRyb2xsZXJcIixyZXF1aXJlOlwidWliUHJvZ3Jlc3NcIixzY29wZTp7bWF4OlwiPT9cIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCJ9fSkuZGlyZWN0aXZlKFwicHJvZ3Jlc3NcIixbXCIkbG9nXCIsXCIkcHJvZ3Jlc3NTdXBwcmVzc1dhcm5pbmdcIixmdW5jdGlvbihhLGIpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6XCJQcm9ncmVzc0NvbnRyb2xsZXJcIixyZXF1aXJlOlwicHJvZ3Jlc3NcIixzY29wZTp7bWF4OlwiPT9cIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsbGluazpmdW5jdGlvbigpe2ImJmEud2FybihcInByb2dyZXNzIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXByb2dyZXNzIGluc3RlYWRcIil9fX1dKS5kaXJlY3RpdmUoXCJ1aWJCYXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHJlcXVpcmU6XCJedWliUHJvZ3Jlc3NcIixzY29wZTp7dmFsdWU6XCI9XCIsdHlwZTpcIkBcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxiKX19fSkuZGlyZWN0aXZlKFwiYmFyXCIsW1wiJGxvZ1wiLFwiJHByb2dyZXNzU3VwcHJlc3NXYXJuaW5nXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxyZXF1aXJlOlwiXnByb2dyZXNzXCIsc2NvcGU6e3ZhbHVlOlwiPVwiLHR5cGU6XCJAXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2ImJmEud2FybihcImJhciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1iYXIgaW5zdGVhZFwiKSxmLmFkZEJhcihjLGQpfX19XSkuZGlyZWN0aXZlKFwicHJvZ3Jlc3NiYXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6XCJQcm9ncmVzc0NvbnRyb2xsZXJcIixzY29wZTp7dmFsdWU6XCI9XCIsbWF4OlwiPT9cIix0eXBlOlwiQFwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkQmFyKGEsYW5ndWxhci5lbGVtZW50KGIuY2hpbGRyZW4oKVswXSkpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixbXSkuY29uc3RhbnQoXCJyYXRpbmdDb25maWdcIix7bWF4OjUsc3RhdGVPbjpudWxsLHN0YXRlT2ZmOm51bGwsdGl0bGVzOltcIm9uZVwiLFwidHdvXCIsXCJ0aHJlZVwiLFwiZm91clwiLFwiZml2ZVwiXX0pLmNvbnRyb2xsZXIoXCJSYXRpbmdDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInJhdGluZ0NvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9O3RoaXMuaW5pdD1mdW5jdGlvbihlKXtkPWUsZC4kcmVuZGVyPXRoaXMucmVuZGVyLGQuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYW5ndWxhci5pc051bWJlcihhKSYmYTw8MCE9PWEmJihhPU1hdGgucm91bmQoYSkpLGF9KSx0aGlzLnN0YXRlT249YW5ndWxhci5pc0RlZmluZWQoYi5zdGF0ZU9uKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9uKTpjLnN0YXRlT24sdGhpcy5zdGF0ZU9mZj1hbmd1bGFyLmlzRGVmaW5lZChiLnN0YXRlT2ZmKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9mZik6Yy5zdGF0ZU9mZjt2YXIgZj1hbmd1bGFyLmlzRGVmaW5lZChiLnRpdGxlcyk/YS4kcGFyZW50LiRldmFsKGIudGl0bGVzKTpjLnRpdGxlczt0aGlzLnRpdGxlcz1hbmd1bGFyLmlzQXJyYXkoZikmJmYubGVuZ3RoPjA/ZjpjLnRpdGxlczt2YXIgZz1hbmd1bGFyLmlzRGVmaW5lZChiLnJhdGluZ1N0YXRlcyk/YS4kcGFyZW50LiRldmFsKGIucmF0aW5nU3RhdGVzKTpuZXcgQXJyYXkoYW5ndWxhci5pc0RlZmluZWQoYi5tYXgpP2EuJHBhcmVudC4kZXZhbChiLm1heCk6Yy5tYXgpO2EucmFuZ2U9dGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cyhnKX0sdGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspYVtiXT1hbmd1bGFyLmV4dGVuZCh7aW5kZXg6Yn0se3N0YXRlT246dGhpcy5zdGF0ZU9uLHN0YXRlT2ZmOnRoaXMuc3RhdGVPZmYsdGl0bGU6dGhpcy5nZXRUaXRsZShiKX0sYVtiXSk7cmV0dXJuIGF9LHRoaXMuZ2V0VGl0bGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+PXRoaXMudGl0bGVzLmxlbmd0aD9hKzE6dGhpcy50aXRsZXNbYV19LGEucmF0ZT1mdW5jdGlvbihiKXshYS5yZWFkb25seSYmYj49MCYmYjw9YS5yYW5nZS5sZW5ndGgmJihkLiRzZXRWaWV3VmFsdWUoZC4kdmlld1ZhbHVlPT09Yj8wOmIpLGQuJHJlbmRlcigpKX0sYS5lbnRlcj1mdW5jdGlvbihiKXthLnJlYWRvbmx5fHwoYS52YWx1ZT1iKSxhLm9uSG92ZXIoe3ZhbHVlOmJ9KX0sYS5yZXNldD1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlLGEub25MZWF2ZSgpfSxhLm9uS2V5ZG93bj1mdW5jdGlvbihiKXsvKDM3fDM4fDM5fDQwKS8udGVzdChiLndoaWNoKSYmKGIucHJldmVudERlZmF1bHQoKSxiLnN0b3BQcm9wYWdhdGlvbigpLGEucmF0ZShhLnZhbHVlKygzOD09PWIud2hpY2h8fDM5PT09Yi53aGljaD8xOi0xKSkpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlfX1dKS5kaXJlY3RpdmUoXCJyYXRpbmdcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpbXCJyYXRpbmdcIixcIm5nTW9kZWxcIl0sc2NvcGU6e3JlYWRvbmx5OlwiPT9cIixvbkhvdmVyOlwiJlwiLG9uTGVhdmU6XCImXCJ9LGNvbnRyb2xsZXI6XCJSYXRpbmdDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZS5pbml0KGYpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50YWJzXCIsW10pLmNvbnRyb2xsZXIoXCJUYWJzZXRDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIudGFicz1hLnRhYnM9W107Yi5zZWxlY3Q9ZnVuY3Rpb24oYSl7YW5ndWxhci5mb3JFYWNoKGMsZnVuY3Rpb24oYil7Yi5hY3RpdmUmJmIhPT1hJiYoYi5hY3RpdmU9ITEsYi5vbkRlc2VsZWN0KCksYS5zZWxlY3RDYWxsZWQ9ITEpfSksYS5hY3RpdmU9ITAsYS5zZWxlY3RDYWxsZWR8fChhLm9uU2VsZWN0KCksYS5zZWxlY3RDYWxsZWQ9ITApfSxiLmFkZFRhYj1mdW5jdGlvbihhKXtjLnB1c2goYSksMT09PWMubGVuZ3RoJiZhLmFjdGl2ZSE9PSExP2EuYWN0aXZlPSEwOmEuYWN0aXZlP2Iuc2VsZWN0KGEpOmEuYWN0aXZlPSExfSxiLnJlbW92ZVRhYj1mdW5jdGlvbihhKXt2YXIgZT1jLmluZGV4T2YoYSk7aWYoYS5hY3RpdmUmJmMubGVuZ3RoPjEmJiFkKXt2YXIgZj1lPT1jLmxlbmd0aC0xP2UtMTplKzE7Yi5zZWxlY3QoY1tmXSl9Yy5zcGxpY2UoZSwxKX07dmFyIGQ7YS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZD0hMH0pfV0pLmRpcmVjdGl2ZShcInRhYnNldFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6XCJAXCJ9LGNvbnRyb2xsZXI6XCJUYWJzZXRDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyl7YS52ZXJ0aWNhbD1hbmd1bGFyLmlzRGVmaW5lZChjLnZlcnRpY2FsKT9hLiRwYXJlbnQuJGV2YWwoYy52ZXJ0aWNhbCk6ITEsYS5qdXN0aWZpZWQ9YW5ndWxhci5pc0RlZmluZWQoYy5qdXN0aWZpZWQpP2EuJHBhcmVudC4kZXZhbChjLmp1c3RpZmllZCk6ITF9fX0pLmRpcmVjdGl2ZShcInRhYlwiLFtcIiRwYXJzZVwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcXVpcmU6XCJedGFic2V0XCIscmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sXCIsdHJhbnNjbHVkZTohMCxzY29wZTp7YWN0aXZlOlwiPT9cIixoZWFkaW5nOlwiQFwiLG9uU2VsZWN0OlwiJnNlbGVjdFwiLG9uRGVzZWxlY3Q6XCImZGVzZWxlY3RcIn0sY29udHJvbGxlcjpmdW5jdGlvbigpe30sbGluazpmdW5jdGlvbihjLGQsZSxmLGcpe2MuJHdhdGNoKFwiYWN0aXZlXCIsZnVuY3Rpb24oYSl7YSYmZi5zZWxlY3QoYyl9KSxjLmRpc2FibGVkPSExLGUuZGlzYWJsZSYmYy4kcGFyZW50LiR3YXRjaChhKGUuZGlzYWJsZSksZnVuY3Rpb24oYSl7Yy5kaXNhYmxlZD0hIWF9KSxlLmRpc2FibGVkJiYoYi53YXJuKCdVc2Ugb2YgXCJkaXNhYmxlZFwiIGF0dHJpYnV0ZSBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFwiZGlzYWJsZVwiJyksYy4kcGFyZW50LiR3YXRjaChhKGUuZGlzYWJsZWQpLGZ1bmN0aW9uKGEpe2MuZGlzYWJsZWQ9ISFhfSkpLGMuc2VsZWN0PWZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8KGMuYWN0aXZlPSEwKX0sZi5hZGRUYWIoYyksYy4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zi5yZW1vdmVUYWIoYyl9KSxjLiR0cmFuc2NsdWRlRm49Z319fV0pLmRpcmVjdGl2ZShcInRhYkhlYWRpbmdUcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIl50YWJcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2EuJHdhdGNoKFwiaGVhZGluZ0VsZW1lbnRcIixmdW5jdGlvbihhKXthJiYoYi5odG1sKFwiXCIpLGIuYXBwZW5kKGEpKX0pfX19KS5kaXJlY3RpdmUoXCJ0YWJDb250ZW50VHJhbnNjbHVkZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS50YWdOYW1lJiYoYS5oYXNBdHRyaWJ1dGUoXCJ0YWItaGVhZGluZ1wiKXx8YS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXRhYi1oZWFkaW5nXCIpfHxhLmhhc0F0dHJpYnV0ZShcIngtdGFiLWhlYWRpbmdcIil8fFwidGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImRhdGEtdGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcIngtdGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKX1yZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIl50YWJzZXRcIixsaW5rOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iLiRldmFsKGQudGFiQ29udGVudFRyYW5zY2x1ZGUpO2UuJHRyYW5zY2x1ZGVGbihlLiRwYXJlbnQsZnVuY3Rpb24oYil7YW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYil7YShiKT9lLmhlYWRpbmdFbGVtZW50PWI6Yy5hcHBlbmQoYil9KX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50aW1lcGlja2VyXCIsW10pLmNvbnN0YW50KFwidGltZXBpY2tlckNvbmZpZ1wiLHtob3VyU3RlcDoxLG1pbnV0ZVN0ZXA6MSxzaG93TWVyaWRpYW46ITAsbWVyaWRpYW5zOm51bGwscmVhZG9ubHlJbnB1dDohMSxtb3VzZXdoZWVsOiEwLGFycm93a2V5czohMCxzaG93U3Bpbm5lcnM6ITB9KS5jb250cm9sbGVyKFwiVGltZXBpY2tlckNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsXCIkbG9nXCIsXCIkbG9jYWxlXCIsXCJ0aW1lcGlja2VyQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoKXt2YXIgYj1wYXJzZUludChhLmhvdXJzLDEwKSxjPWEuc2hvd01lcmlkaWFuP2I+MCYmMTM+YjpiPj0wJiYyND5iO3JldHVybiBjPyhhLnNob3dNZXJpZGlhbiYmKDEyPT09YiYmKGI9MCksYS5tZXJpZGlhbj09PXFbMV0mJihiKz0xMikpLGIpOnZvaWQgMH1mdW5jdGlvbiBoKCl7dmFyIGI9cGFyc2VJbnQoYS5taW51dGVzLDEwKTtyZXR1cm4gYj49MCYmNjA+Yj9iOnZvaWQgMH1mdW5jdGlvbiBpKGEpe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChhKSYmYS50b1N0cmluZygpLmxlbmd0aDwyP1wiMFwiK2E6YS50b1N0cmluZygpfWZ1bmN0aW9uIGooYSl7aygpLHAuJHNldFZpZXdWYWx1ZShuZXcgRGF0ZShvKSksbChhKX1mdW5jdGlvbiBrKCl7cC4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITApLGEuaW52YWxpZEhvdXJzPSExLGEuaW52YWxpZE1pbnV0ZXM9ITF9ZnVuY3Rpb24gbChiKXt2YXIgYz1vLmdldEhvdXJzKCksZD1vLmdldE1pbnV0ZXMoKTthLnNob3dNZXJpZGlhbiYmKGM9MD09PWN8fDEyPT09Yz8xMjpjJTEyKSxhLmhvdXJzPVwiaFwiPT09Yj9jOmkoYyksXCJtXCIhPT1iJiYoYS5taW51dGVzPWkoZCkpLGEubWVyaWRpYW49by5nZXRIb3VycygpPDEyP3FbMF06cVsxXX1mdW5jdGlvbiBtKGEsYil7dmFyIGM9bmV3IERhdGUoYS5nZXRUaW1lKCkrNmU0KmIpLGQ9bmV3IERhdGUoYSk7cmV0dXJuIGQuc2V0SG91cnMoYy5nZXRIb3VycygpLGMuZ2V0TWludXRlcygpKSxkfWZ1bmN0aW9uIG4oYSl7bz1tKG8sYSksaigpfXZhciBvPW5ldyBEYXRlLHA9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSxxPWFuZ3VsYXIuaXNEZWZpbmVkKGIubWVyaWRpYW5zKT9hLiRwYXJlbnQuJGV2YWwoYi5tZXJpZGlhbnMpOmYubWVyaWRpYW5zfHxlLkRBVEVUSU1FX0ZPUk1BVFMuQU1QTVM7dGhpcy5pbml0PWZ1bmN0aW9uKGMsZCl7cD1jLHAuJHJlbmRlcj10aGlzLnJlbmRlcixwLiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7cmV0dXJuIGE/bmV3IERhdGUoYSk6bnVsbH0pO3ZhciBlPWQuZXEoMCksZz1kLmVxKDEpLGg9YW5ndWxhci5pc0RlZmluZWQoYi5tb3VzZXdoZWVsKT9hLiRwYXJlbnQuJGV2YWwoYi5tb3VzZXdoZWVsKTpmLm1vdXNld2hlZWw7aCYmdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoZSxnKTt2YXIgaT1hbmd1bGFyLmlzRGVmaW5lZChiLmFycm93a2V5cyk/YS4kcGFyZW50LiRldmFsKGIuYXJyb3drZXlzKTpmLmFycm93a2V5cztpJiZ0aGlzLnNldHVwQXJyb3drZXlFdmVudHMoZSxnKSxhLnJlYWRvbmx5SW5wdXQ9YW5ndWxhci5pc0RlZmluZWQoYi5yZWFkb25seUlucHV0KT9hLiRwYXJlbnQuJGV2YWwoYi5yZWFkb25seUlucHV0KTpmLnJlYWRvbmx5SW5wdXQsdGhpcy5zZXR1cElucHV0RXZlbnRzKGUsZyl9O3ZhciByPWYuaG91clN0ZXA7Yi5ob3VyU3RlcCYmYS4kcGFyZW50LiR3YXRjaChjKGIuaG91clN0ZXApLGZ1bmN0aW9uKGEpe3I9cGFyc2VJbnQoYSwxMCl9KTt2YXIgcz1mLm1pbnV0ZVN0ZXA7Yi5taW51dGVTdGVwJiZhLiRwYXJlbnQuJHdhdGNoKGMoYi5taW51dGVTdGVwKSxmdW5jdGlvbihhKXtzPXBhcnNlSW50KGEsMTApfSk7dmFyIHQ7YS4kcGFyZW50LiR3YXRjaChjKGIubWluKSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt0PWlzTmFOKGIpP3ZvaWQgMDpifSk7dmFyIHU7YS4kcGFyZW50LiR3YXRjaChjKGIubWF4KSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt1PWlzTmFOKGIpP3ZvaWQgMDpifSksYS5ub0luY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9bShvLDYwKnIpO3JldHVybiBhPnV8fG8+YSYmdD5hfSxhLm5vRGVjcmVtZW50SG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1tKG8sNjAqLXIpO3JldHVybiB0PmF8fGE+byYmYT51fSxhLm5vSW5jcmVtZW50TWludXRlcz1mdW5jdGlvbigpe3ZhciBhPW0obyxzKTtyZXR1cm4gYT51fHxvPmEmJnQ+YX0sYS5ub0RlY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXt2YXIgYT1tKG8sLXMpO3JldHVybiB0PmF8fGE+byYmYT51fSxhLm5vVG9nZ2xlTWVyaWRpYW49ZnVuY3Rpb24oKXtyZXR1cm4gby5nZXRIb3VycygpPDEzP20obyw3MjApPnU6bShvLC03MjApPHR9LGEuc2hvd01lcmlkaWFuPWYuc2hvd01lcmlkaWFuLGIuc2hvd01lcmlkaWFuJiZhLiRwYXJlbnQuJHdhdGNoKGMoYi5zaG93TWVyaWRpYW4pLGZ1bmN0aW9uKGIpe2lmKGEuc2hvd01lcmlkaWFuPSEhYixwLiRlcnJvci50aW1lKXt2YXIgYz1nKCksZD1oKCk7YW5ndWxhci5pc0RlZmluZWQoYykmJmFuZ3VsYXIuaXNEZWZpbmVkKGQpJiYoby5zZXRIb3VycyhjKSxqKCkpfWVsc2UgbCgpfSksdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHM9ZnVuY3Rpb24oYixjKXt2YXIgZD1mdW5jdGlvbihhKXthLm9yaWdpbmFsRXZlbnQmJihhPWEub3JpZ2luYWxFdmVudCk7dmFyIGI9YS53aGVlbERlbHRhP2Eud2hlZWxEZWx0YTotYS5kZWx0YVk7cmV0dXJuIGEuZGV0YWlsfHxiPjB9O2IuYmluZChcIm1vdXNld2hlZWwgd2hlZWxcIixmdW5jdGlvbihiKXthLiRhcHBseShkKGIpP2EuaW5jcmVtZW50SG91cnMoKTphLmRlY3JlbWVudEhvdXJzKCkpLGIucHJldmVudERlZmF1bHQoKX0pLGMuYmluZChcIm1vdXNld2hlZWwgd2hlZWxcIixmdW5jdGlvbihiKXthLiRhcHBseShkKGIpP2EuaW5jcmVtZW50TWludXRlcygpOmEuZGVjcmVtZW50TWludXRlcygpKSxiLnByZXZlbnREZWZhdWx0KCl9KX0sdGhpcy5zZXR1cEFycm93a2V5RXZlbnRzPWZ1bmN0aW9uKGIsYyl7Yi5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGIpezM4PT09Yi53aGljaD8oYi5wcmV2ZW50RGVmYXVsdCgpLGEuaW5jcmVtZW50SG91cnMoKSxhLiRhcHBseSgpKTo0MD09PWIud2hpY2gmJihiLnByZXZlbnREZWZhdWx0KCksYS5kZWNyZW1lbnRIb3VycygpLGEuJGFwcGx5KCkpfSksYy5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGIpezM4PT09Yi53aGljaD8oYi5wcmV2ZW50RGVmYXVsdCgpLGEuaW5jcmVtZW50TWludXRlcygpLGEuJGFwcGx5KCkpOjQwPT09Yi53aGljaCYmKGIucHJldmVudERlZmF1bHQoKSxhLmRlY3JlbWVudE1pbnV0ZXMoKSxhLiRhcHBseSgpKX0pfSx0aGlzLnNldHVwSW5wdXRFdmVudHM9ZnVuY3Rpb24oYixjKXtpZihhLnJlYWRvbmx5SW5wdXQpcmV0dXJuIGEudXBkYXRlSG91cnM9YW5ndWxhci5ub29wLHZvaWQoYS51cGRhdGVNaW51dGVzPWFuZ3VsYXIubm9vcCk7dmFyIGQ9ZnVuY3Rpb24oYixjKXtwLiRzZXRWaWV3VmFsdWUobnVsbCkscC4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITEpLGFuZ3VsYXIuaXNEZWZpbmVkKGIpJiYoYS5pbnZhbGlkSG91cnM9YiksYW5ndWxhci5pc0RlZmluZWQoYykmJihhLmludmFsaWRNaW51dGVzPWMpfTthLnVwZGF0ZUhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9ZygpLGI9aCgpO2FuZ3VsYXIuaXNEZWZpbmVkKGEpJiZhbmd1bGFyLmlzRGVmaW5lZChiKT8oby5zZXRIb3VycyhhKSx0Pm98fG8+dT9kKCEwKTpqKFwiaFwiKSk6ZCghMCl9LGIuYmluZChcImJsdXJcIixmdW5jdGlvbihiKXshYS5pbnZhbGlkSG91cnMmJmEuaG91cnM8MTAmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5ob3Vycz1pKGEuaG91cnMpfSl9KSxhLnVwZGF0ZU1pbnV0ZXM9ZnVuY3Rpb24oKXt2YXIgYT1oKCksYj1nKCk7YW5ndWxhci5pc0RlZmluZWQoYSkmJmFuZ3VsYXIuaXNEZWZpbmVkKGIpPyhvLnNldE1pbnV0ZXMoYSksdD5vfHxvPnU/ZCh2b2lkIDAsITApOmooXCJtXCIpKTpkKHZvaWQgMCwhMCl9LGMuYmluZChcImJsdXJcIixmdW5jdGlvbihiKXshYS5pbnZhbGlkTWludXRlcyYmYS5taW51dGVzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EubWludXRlcz1pKGEubWludXRlcyl9KX0pfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBiPXAuJHZpZXdWYWx1ZTtpc05hTihiKT8ocC4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITEpLGQuZXJyb3IoJ1RpbWVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpKTooYiYmKG89YiksdD5vfHxvPnU/KHAuJHNldFZhbGlkaXR5KFwidGltZVwiLCExKSxhLmludmFsaWRIb3Vycz0hMCxhLmludmFsaWRNaW51dGVzPSEwKTprKCksbCgpKX0sYS5zaG93U3Bpbm5lcnM9YW5ndWxhci5pc0RlZmluZWQoYi5zaG93U3Bpbm5lcnMpP2EuJHBhcmVudC4kZXZhbChiLnNob3dTcGlubmVycyk6Zi5zaG93U3Bpbm5lcnMsYS5pbmNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe2Eubm9JbmNyZW1lbnRIb3VycygpfHxuKDYwKnIpfSxhLmRlY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7YS5ub0RlY3JlbWVudEhvdXJzKCl8fG4oNjAqLXIpfSxhLmluY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXthLm5vSW5jcmVtZW50TWludXRlcygpfHxuKHMpfSxhLmRlY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXthLm5vRGVjcmVtZW50TWludXRlcygpfHxuKC1zKX0sYS50b2dnbGVNZXJpZGlhbj1mdW5jdGlvbigpe2Eubm9Ub2dnbGVNZXJpZGlhbigpfHxuKDcyMCooby5nZXRIb3VycygpPDEyPzE6LTEpKX19XSkuZGlyZWN0aXZlKFwidGltZXBpY2tlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXF1aXJlOltcInRpbWVwaWNrZXJcIixcIj9ebmdNb2RlbFwiXSxjb250cm9sbGVyOlwiVGltZXBpY2tlckNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJ0aW1lcGlja2VyXCIscmVwbGFjZTohMCxzY29wZTp7fSx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHxcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZiYmZS5pbml0KGYsYi5maW5kKFwiaW5wdXRcIikpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50cmFuc2l0aW9uXCIsW10pLnZhbHVlKFwiJHRyYW5zaXRpb25TdXBwcmVzc0RlcHJlY2F0ZWRcIiwhMSkuZmFjdG9yeShcIiR0cmFuc2l0aW9uXCIsW1wiJHFcIixcIiR0aW1lb3V0XCIsXCIkcm9vdFNjb3BlXCIsXCIkbG9nXCIsXCIkdHJhbnNpdGlvblN1cHByZXNzRGVwcmVjYXRlZFwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhKXtmb3IodmFyIGIgaW4gYSlpZih2b2lkIDAhPT1oLnN0eWxlW2JdKXJldHVybiBhW2JdfWV8fGQud2FybihcIiR0cmFuc2l0aW9uIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgJGFuaW1hdGUgZnJvbSBuZ0FuaW1hdGUgaW5zdGVhZC5cIik7dmFyIGc9ZnVuY3Rpb24oZCxlLGYpe2Y9Znx8e307dmFyIGg9YS5kZWZlcigpLGk9Z1tmLmFuaW1hdGlvbj9cImFuaW1hdGlvbkVuZEV2ZW50TmFtZVwiOlwidHJhbnNpdGlvbkVuZEV2ZW50TmFtZVwiXSxqPWZ1bmN0aW9uKGEpe2MuJGFwcGx5KGZ1bmN0aW9uKCl7ZC51bmJpbmQoaSxqKSxoLnJlc29sdmUoZCl9KX07cmV0dXJuIGkmJmQuYmluZChpLGopLGIoZnVuY3Rpb24oKXthbmd1bGFyLmlzU3RyaW5nKGUpP2QuYWRkQ2xhc3MoZSk6YW5ndWxhci5pc0Z1bmN0aW9uKGUpP2UoZCk6YW5ndWxhci5pc09iamVjdChlKSYmZC5jc3MoZSksaXx8aC5yZXNvbHZlKGQpfSksaC5wcm9taXNlLmNhbmNlbD1mdW5jdGlvbigpe1xuaSYmZC51bmJpbmQoaSxqKSxoLnJlamVjdChcIlRyYW5zaXRpb24gY2FuY2VsbGVkXCIpfSxoLnByb21pc2V9LGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyYW5zXCIpLGk9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn0saj17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdEFuaW1hdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJhbmltYXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9BbmltYXRpb25FbmRcIix0cmFuc2l0aW9uOlwiYW5pbWF0aW9uZW5kXCJ9O3JldHVybiBnLnRyYW5zaXRpb25FbmRFdmVudE5hbWU9ZihpKSxnLmFuaW1hdGlvbkVuZEV2ZW50TmFtZT1mKGopLGd9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudHlwZWFoZWFkXCIsW1widWkuYm9vdHN0cmFwLnBvc2l0aW9uXCJdKS5mYWN0b3J5KFwidHlwZWFoZWFkUGFyc2VyXCIsW1wiJHBhcnNlXCIsZnVuY3Rpb24oYSl7dmFyIGI9L15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XFxkXSopKVxccytpblxccysoW1xcc1xcU10rPykkLztyZXR1cm57cGFyc2U6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5tYXRjaChiKTtpZighZCl0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHR5cGVhaGVhZCBzcGVjaWZpY2F0aW9uIGluIGZvcm0gb2YgXCJfbW9kZWxWYWx1ZV8gKGFzIF9sYWJlbF8pPyBmb3IgX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1wiIGJ1dCBnb3QgXCInK2MrJ1wiLicpO3JldHVybntpdGVtTmFtZTpkWzNdLHNvdXJjZTphKGRbNF0pLHZpZXdNYXBwZXI6YShkWzJdfHxkWzFdKSxtb2RlbE1hcHBlcjphKGRbMV0pfX19fV0pLmRpcmVjdGl2ZShcInR5cGVhaGVhZFwiLFtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixcIiRxXCIsXCIkdGltZW91dFwiLFwiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsXCIkcm9vdFNjb3BlXCIsXCIkcG9zaXRpb25cIixcInR5cGVhaGVhZFBhcnNlclwiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXt2YXIgaj1bOSwxMywyNywzOCw0MF0saz0yMDA7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9uZ01vZGVsT3B0aW9uc1wiXSxsaW5rOmZ1bmN0aW9uKGwsbSxuLG8pe2Z1bmN0aW9uIHAoKXtLLm1vdmVJblByb2dyZXNzfHwoSy5tb3ZlSW5Qcm9ncmVzcz0hMCxLLiRkaWdlc3QoKSksUyYmZC5jYW5jZWwoUyksUz1kKGZ1bmN0aW9uKCl7Sy5tYXRjaGVzLmxlbmd0aCYmcSgpLEsubW92ZUluUHJvZ3Jlc3M9ITEsSy4kZGlnZXN0KCl9LGspfWZ1bmN0aW9uIHEoKXtLLnBvc2l0aW9uPUQ/aC5vZmZzZXQobSk6aC5wb3NpdGlvbihtKSxLLnBvc2l0aW9uLnRvcCs9bS5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpfXZhciByPW9bMF0scz1vWzFdLHQ9bC4kZXZhbChuLnR5cGVhaGVhZE1pbkxlbmd0aCk7dHx8MD09PXR8fCh0PTEpO3ZhciB1LHYsdz1sLiRldmFsKG4udHlwZWFoZWFkV2FpdE1zKXx8MCx4PWwuJGV2YWwobi50eXBlYWhlYWRFZGl0YWJsZSkhPT0hMSx5PWIobi50eXBlYWhlYWRMb2FkaW5nKS5hc3NpZ258fGFuZ3VsYXIubm9vcCx6PWIobi50eXBlYWhlYWRPblNlbGVjdCksQT1hbmd1bGFyLmlzRGVmaW5lZChuLnR5cGVhaGVhZFNlbGVjdE9uQmx1cik/bC4kZXZhbChuLnR5cGVhaGVhZFNlbGVjdE9uQmx1cik6ITEsQj1iKG4udHlwZWFoZWFkTm9SZXN1bHRzKS5hc3NpZ258fGFuZ3VsYXIubm9vcCxDPW4udHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXI/YihuLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyKTp2b2lkIDAsRD1uLnR5cGVhaGVhZEFwcGVuZFRvQm9keT9sLiRldmFsKG4udHlwZWFoZWFkQXBwZW5kVG9Cb2R5KTohMSxFPWwuJGV2YWwobi50eXBlYWhlYWRGb2N1c0ZpcnN0KSE9PSExLEY9bi50eXBlYWhlYWRTZWxlY3RPbkV4YWN0P2wuJGV2YWwobi50eXBlYWhlYWRTZWxlY3RPbkV4YWN0KTohMSxHPWIobi5uZ01vZGVsKSxIPWIobi5uZ01vZGVsK1wiKCQkJHApXCIpLEk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYW5ndWxhci5pc0Z1bmN0aW9uKEcobCkpJiZzJiZzLiRvcHRpb25zJiZzLiRvcHRpb25zLmdldHRlclNldHRlcj9IKGEseyQkJHA6Yn0pOkcuYXNzaWduKGEsYil9LEo9aS5wYXJzZShuLnR5cGVhaGVhZCksSz1sLiRuZXcoKSxMPWwuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe0suJGRlc3Ryb3koKX0pO0suJG9uKFwiJGRlc3Ryb3lcIixMKTt2YXIgTT1cInR5cGVhaGVhZC1cIitLLiRpZCtcIi1cIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTttLmF0dHIoe1wiYXJpYS1hdXRvY29tcGxldGVcIjpcImxpc3RcIixcImFyaWEtZXhwYW5kZWRcIjohMSxcImFyaWEtb3duc1wiOk19KTt2YXIgTj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2IHR5cGVhaGVhZC1wb3B1cD48L2Rpdj5cIik7Ti5hdHRyKHtpZDpNLG1hdGNoZXM6XCJtYXRjaGVzXCIsYWN0aXZlOlwiYWN0aXZlSWR4XCIsc2VsZWN0Olwic2VsZWN0KGFjdGl2ZUlkeClcIixcIm1vdmUtaW4tcHJvZ3Jlc3NcIjpcIm1vdmVJblByb2dyZXNzXCIscXVlcnk6XCJxdWVyeVwiLHBvc2l0aW9uOlwicG9zaXRpb25cIn0pLGFuZ3VsYXIuaXNEZWZpbmVkKG4udHlwZWFoZWFkVGVtcGxhdGVVcmwpJiZOLmF0dHIoXCJ0ZW1wbGF0ZS11cmxcIixuLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSxhbmd1bGFyLmlzRGVmaW5lZChuLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpJiZOLmF0dHIoXCJwb3B1cC10ZW1wbGF0ZS11cmxcIixuLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpO3ZhciBPPWZ1bmN0aW9uKCl7Sy5tYXRjaGVzPVtdLEsuYWN0aXZlSWR4PS0xLG0uYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSl9LFA9ZnVuY3Rpb24oYSl7cmV0dXJuIE0rXCItb3B0aW9uLVwiK2F9O0suJHdhdGNoKFwiYWN0aXZlSWR4XCIsZnVuY3Rpb24oYSl7MD5hP20ucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKTptLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixQKGEpKX0pO3ZhciBRPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEsubWF0Y2hlcy5sZW5ndGg+YiYmYT9hLnRvVXBwZXJDYXNlKCk9PT1LLm1hdGNoZXNbYl0ubGFiZWwudG9VcHBlckNhc2UoKTohMX0sUj1mdW5jdGlvbihhKXt2YXIgYj17JHZpZXdWYWx1ZTphfTt5KGwsITApLEIobCwhMSksYy53aGVuKEouc291cmNlKGwsYikpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGQ9YT09PXIuJHZpZXdWYWx1ZTtpZihkJiZ1KWlmKGMmJmMubGVuZ3RoPjApe0suYWN0aXZlSWR4PUU/MDotMSxCKGwsITEpLEsubWF0Y2hlcy5sZW5ndGg9MDtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyliW0ouaXRlbU5hbWVdPWNbZV0sSy5tYXRjaGVzLnB1c2goe2lkOlAoZSksbGFiZWw6Si52aWV3TWFwcGVyKEssYiksbW9kZWw6Y1tlXX0pO0sucXVlcnk9YSxxKCksbS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSxGJiYxPT09Sy5tYXRjaGVzLmxlbmd0aCYmUShhLDApJiZLLnNlbGVjdCgwKX1lbHNlIE8oKSxCKGwsITApO2QmJnkobCwhMSl9LGZ1bmN0aW9uKCl7TygpLHkobCwhMSksQihsLCEwKX0pfTtEJiYoYW5ndWxhci5lbGVtZW50KGYpLmJpbmQoXCJyZXNpemVcIixwKSxlLmZpbmQoXCJib2R5XCIpLmJpbmQoXCJzY3JvbGxcIixwKSk7dmFyIFM7Sy5tb3ZlSW5Qcm9ncmVzcz0hMSxPKCksSy5xdWVyeT12b2lkIDA7dmFyIFQsVT1mdW5jdGlvbihhKXtUPWQoZnVuY3Rpb24oKXtSKGEpfSx3KX0sVj1mdW5jdGlvbigpe1QmJmQuY2FuY2VsKFQpfTtyLiRwYXJzZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7cmV0dXJuIHU9ITAsMD09PXR8fGEmJmEubGVuZ3RoPj10P3c+MD8oVigpLFUoYSkpOlIoYSk6KHkobCwhMSksVigpLE8oKSkseD9hOmE/dm9pZCByLiRzZXRWYWxpZGl0eShcImVkaXRhYmxlXCIsITEpOihyLiRzZXRWYWxpZGl0eShcImVkaXRhYmxlXCIsITApLG51bGwpfSksci4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBiLGMsZD17fTtyZXR1cm4geHx8ci4kc2V0VmFsaWRpdHkoXCJlZGl0YWJsZVwiLCEwKSxDPyhkLiRtb2RlbD1hLEMobCxkKSk6KGRbSi5pdGVtTmFtZV09YSxiPUoudmlld01hcHBlcihsLGQpLGRbSi5pdGVtTmFtZV09dm9pZCAwLGM9Si52aWV3TWFwcGVyKGwsZCksYiE9PWM/YjphKX0pLEsuc2VsZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZT17fTt2PSEwLGVbSi5pdGVtTmFtZV09Yz1LLm1hdGNoZXNbYV0ubW9kZWwsYj1KLm1vZGVsTWFwcGVyKGwsZSksSShsLGIpLHIuJHNldFZhbGlkaXR5KFwiZWRpdGFibGVcIiwhMCksci4kc2V0VmFsaWRpdHkoXCJwYXJzZVwiLCEwKSx6KGwseyRpdGVtOmMsJG1vZGVsOmIsJGxhYmVsOkoudmlld01hcHBlcihsLGUpfSksTygpLEsuJGV2YWwobi50eXBlYWhlYWRGb2N1c09uU2VsZWN0KSE9PSExJiZkKGZ1bmN0aW9uKCl7bVswXS5mb2N1cygpfSwwLCExKX0sbS5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2lmKDAhPT1LLm1hdGNoZXMubGVuZ3RoJiYtMSE9PWouaW5kZXhPZihhLndoaWNoKSl7aWYoLTE9PT1LLmFjdGl2ZUlkeCYmKDk9PT1hLndoaWNofHwxMz09PWEud2hpY2gpKXJldHVybiBPKCksdm9pZCBLLiRkaWdlc3QoKTthLnByZXZlbnREZWZhdWx0KCksNDA9PT1hLndoaWNoPyhLLmFjdGl2ZUlkeD0oSy5hY3RpdmVJZHgrMSklSy5tYXRjaGVzLmxlbmd0aCxLLiRkaWdlc3QoKSk6Mzg9PT1hLndoaWNoPyhLLmFjdGl2ZUlkeD0oSy5hY3RpdmVJZHg+MD9LLmFjdGl2ZUlkeDpLLm1hdGNoZXMubGVuZ3RoKS0xLEsuJGRpZ2VzdCgpKToxMz09PWEud2hpY2h8fDk9PT1hLndoaWNoP0suJGFwcGx5KGZ1bmN0aW9uKCl7Sy5zZWxlY3QoSy5hY3RpdmVJZHgpfSk6Mjc9PT1hLndoaWNoJiYoYS5zdG9wUHJvcGFnYXRpb24oKSxPKCksSy4kZGlnZXN0KCkpfX0pLG0uYmluZChcImJsdXJcIixmdW5jdGlvbigpe0EmJksubWF0Y2hlcy5sZW5ndGgmJi0xIT09Sy5hY3RpdmVJZHgmJiF2JiYodj0hMCxLLiRhcHBseShmdW5jdGlvbigpe0suc2VsZWN0KEsuYWN0aXZlSWR4KX0pKSx1PSExLHY9ITF9KTt2YXIgVz1mdW5jdGlvbihhKXttWzBdIT09YS50YXJnZXQmJjMhPT1hLndoaWNoJiYwIT09Sy5tYXRjaGVzLmxlbmd0aCYmKE8oKSxnLiQkcGhhc2V8fEsuJGRpZ2VzdCgpKX07ZS5iaW5kKFwiY2xpY2tcIixXKSxsLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtlLnVuYmluZChcImNsaWNrXCIsVyksRCYmWC5yZW1vdmUoKSxOLnJlbW92ZSgpfSk7dmFyIFg9YShOKShLKTtEP2UuZmluZChcImJvZHlcIikuYXBwZW5kKFgpOm0uYWZ0ZXIoWCl9fX1dKS5kaXJlY3RpdmUoXCJ0eXBlYWhlYWRQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7bWF0Y2hlczpcIj1cIixxdWVyeTpcIj1cIixhY3RpdmU6XCI9XCIscG9zaXRpb246XCImXCIsbW92ZUluUHJvZ3Jlc3M6XCI9XCIsc2VsZWN0OlwiJlwifSxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIucG9wdXBUZW1wbGF0ZVVybHx8XCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIn0sbGluazpmdW5jdGlvbihhLGIsYyl7YS50ZW1wbGF0ZVVybD1jLnRlbXBsYXRlVXJsLGEuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIGEubWF0Y2hlcy5sZW5ndGg+MH0sYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5hY3RpdmU9PWJ9LGEuc2VsZWN0QWN0aXZlPWZ1bmN0aW9uKGIpe2EuYWN0aXZlPWJ9LGEuc2VsZWN0TWF0Y2g9ZnVuY3Rpb24oYil7YS5zZWxlY3Qoe2FjdGl2ZUlkeDpifSl9fX19KS5kaXJlY3RpdmUoXCJ0eXBlYWhlYWRNYXRjaFwiLFtcIiR0ZW1wbGF0ZVJlcXVlc3RcIixcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7aW5kZXg6XCI9XCIsbWF0Y2g6XCI9XCIscXVlcnk6XCI9XCJ9LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWMoZi50ZW1wbGF0ZVVybCkoZC4kcGFyZW50KXx8XCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIjthKGcpLnRoZW4oZnVuY3Rpb24oYSl7YihhLnRyaW0oKSkoZCxmdW5jdGlvbihhKXtlLnJlcGxhY2VXaXRoKGEpfSl9KX19fV0pLmZpbHRlcihcInR5cGVhaGVhZEhpZ2hsaWdodFwiLFtcIiRzY2VcIixcIiRpbmplY3RvclwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbLj8qK14kW1xcXVxcXFwoKXt9fC1dKS9nLFwiXFxcXCQxXCIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuLzwuKj4vZy50ZXN0KGEpfXZhciBmO3JldHVybiBmPWIuaGFzKFwiJHNhbml0aXplXCIpLGZ1bmN0aW9uKGIsZyl7cmV0dXJuIWYmJmUoYikmJmMud2FybihcIlVuc2FmZSB1c2Ugb2YgdHlwZWFoZWFkIHBsZWFzZSB1c2UgbmdTYW5pdGl6ZVwiKSxiPWc/KFwiXCIrYikucmVwbGFjZShuZXcgUmVnRXhwKGQoZyksXCJnaVwiKSxcIjxzdHJvbmc+JCY8L3N0cm9uZz5cIik6YixmfHwoYj1hLnRydXN0QXNIdG1sKGIpKSxifX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicGFuZWwge3twYW5lbENsYXNzIHx8IFxcJ3BhbmVsLWRlZmF1bHRcXCd9fVwiPlxcbiAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIiBuZy1rZXlwcmVzcz1cInRvZ2dsZU9wZW4oJGV2ZW50KVwiPlxcbiAgICA8aDQgY2xhc3M9XCJwYW5lbC10aXRsZVwiPlxcbiAgICAgIDxhIGhyZWYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJhY2NvcmRpb24tdG9nZ2xlXCIgbmctY2xpY2s9XCJ0b2dnbGVPcGVuKClcIiBhY2NvcmRpb24tdHJhbnNjbHVkZT1cImhlYWRpbmdcIj48c3BhbiBuZy1jbGFzcz1cIntcXCd0ZXh0LW11dGVkXFwnOiBpc0Rpc2FibGVkfVwiPnt7aGVhZGluZ319PC9zcGFuPjwvYT5cXG4gICAgPC9oND5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInBhbmVsLWNvbGxhcHNlIGNvbGxhcHNlXCIgY29sbGFwc2U9XCIhaXNPcGVuXCI+XFxuXHQgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsJzxkaXYgY2xhc3M9XCJwYW5lbC1ncm91cFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLCc8ZGl2IGNsYXNzPVwiYWxlcnRcIiBuZy1jbGFzcz1cIltcXCdhbGVydC1cXCcgKyAodHlwZSB8fCBcXCd3YXJuaW5nXFwnKSwgY2xvc2VhYmxlID8gXFwnYWxlcnQtZGlzbWlzc2libGVcXCcgOiBudWxsXVwiIHJvbGU9XCJhbGVydFwiPlxcbiAgICA8YnV0dG9uIG5nLXNob3c9XCJjbG9zZWFibGVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWNsaWNrPVwiY2xvc2UoJGV2ZW50KVwiPlxcbiAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPkNsb3NlPC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIiwnPGRpdiBuZy1tb3VzZWVudGVyPVwicGF1c2UoKVwiIG5nLW1vdXNlbGVhdmU9XCJwbGF5KClcIiBjbGFzcz1cImNhcm91c2VsXCIgbmctc3dpcGUtcmlnaHQ9XCJwcmV2KClcIiBuZy1zd2lwZS1sZWZ0PVwibmV4dCgpXCI+XFxuICAgIDxvbCBjbGFzcz1cImNhcm91c2VsLWluZGljYXRvcnNcIiBuZy1zaG93PVwic2xpZGVzLmxlbmd0aCA+IDFcIj5cXG4gICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBzbGlkZXMgfCBvcmRlckJ5OmluZGV4T2ZTbGlkZSB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6IGlzQWN0aXZlKHNsaWRlKX1cIiBuZy1jbGljaz1cInNlbGVjdChzbGlkZSlcIj48L2xpPlxcbiAgICA8L29sPlxcbiAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtaW5uZXJcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbiAgICA8YSBjbGFzcz1cImxlZnQgY2Fyb3VzZWwtY29udHJvbFwiIG5nLWNsaWNrPVwicHJldigpXCIgbmctc2hvdz1cInNsaWRlcy5sZW5ndGggPiAxXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvc3Bhbj48L2E+XFxuICAgIDxhIGNsYXNzPVwicmlnaHQgY2Fyb3VzZWwtY29udHJvbFwiIG5nLWNsaWNrPVwibmV4dCgpXCIgbmctc2hvdz1cInNsaWRlcy5sZW5ndGggPiAxXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+PC9hPlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWxcIiwnPGRpdiBuZy1jbGFzcz1cIntcXG4gICAgXFwnYWN0aXZlXFwnOiBhY3RpdmVcXG4gIH1cIiBjbGFzcz1cIml0ZW0gdGV4dC1jZW50ZXJcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLCc8ZGl2IG5nLXN3aXRjaD1cImRhdGVwaWNrZXJNb2RlXCIgcm9sZT1cImFwcGxpY2F0aW9uXCIgbmcta2V5ZG93bj1cImtleWRvd24oJGV2ZW50KVwiPlxcbiAgPGRheXBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cImRheVwiIHRhYmluZGV4PVwiMFwiPjwvZGF5cGlja2VyPlxcbiAgPG1vbnRocGlja2VyIG5nLXN3aXRjaC13aGVuPVwibW9udGhcIiB0YWJpbmRleD1cIjBcIj48L21vbnRocGlja2VyPlxcbiAgPHllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49XCJ5ZWFyXCIgdGFiaW5kZXg9XCIwXCI+PC95ZWFycGlja2VyPlxcbjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIiwnPHRhYmxlIHJvbGU9XCJncmlkXCIgYXJpYS1sYWJlbGxlZGJ5PVwie3s6OnVuaXF1ZUlkfX0tdGl0bGVcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XCJ7e2FjdGl2ZURhdGVJZH19XCI+XFxuICA8dGhlYWQ+XFxuICAgIDx0cj5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwibW92ZSgtMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aCBjb2xzcGFuPVwie3s6OjUgKyBzaG93V2Vla3N9fVwiPjxidXR0b24gaWQ9XCJ7ezo6dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIG5nLWNsaWNrPVwidG9nZ2xlTW9kZSgpXCIgbmctZGlzYWJsZWQ9XCJkYXRlcGlja2VyTW9kZSA9PT0gbWF4TW9kZVwiIHRhYmluZGV4PVwiLTFcIiBzdHlsZT1cIndpZHRoOjEwMCU7XCI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodFwiIG5nLWNsaWNrPVwibW92ZSgxKVwiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICA8L3RyPlxcbiAgICA8dHI+XFxuICAgICAgPHRoIG5nLWlmPVwic2hvd1dlZWtzXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjwvdGg+XFxuICAgICAgPHRoIG5nLXJlcGVhdD1cImxhYmVsIGluIDo6bGFiZWxzIHRyYWNrIGJ5ICRpbmRleFwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIj48c21hbGwgYXJpYS1sYWJlbD1cInt7OjpsYWJlbC5mdWxsfX1cIj57ezo6bGFiZWwuYWJicn19PC9zbWFsbD48L3RoPlxcbiAgICA8L3RyPlxcbiAgPC90aGVhZD5cXG4gIDx0Ym9keT5cXG4gICAgPHRyIG5nLXJlcGVhdD1cInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFwiPlxcbiAgICAgIDx0ZCBuZy1pZj1cInNob3dXZWVrc1wiIGNsYXNzPVwidGV4dC1jZW50ZXIgaDZcIj48ZW0+e3sgd2Vla051bWJlcnNbJGluZGV4XSB9fTwvZW0+PC90ZD5cXG4gICAgICA8dGQgbmctcmVwZWF0PVwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCIgaWQ9XCJ7ezo6ZHQudWlkfX1cIiBuZy1jbGFzcz1cIjo6ZHQuY3VzdG9tQ2xhc3NcIj5cXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHN0eWxlPVwibWluLXdpZHRoOjEwMCU7XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgbmctY2xhc3M9XCJ7XFwnYnRuLWluZm9cXCc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cIiBuZy1jbGljaz1cInNlbGVjdChkdC5kYXRlKVwiIG5nLWRpc2FibGVkPVwiZHQuZGlzYWJsZWRcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCI6OntcXCd0ZXh0LW11dGVkXFwnOiBkdC5zZWNvbmRhcnksIFxcJ3RleHQtaW5mb1xcJzogZHQuY3VycmVudH1cIj57ezo6ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG4gICAgICA8L3RkPlxcbiAgICA8L3RyPlxcbiAgPC90Ym9keT5cXG48L3RhYmxlPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIsJzx0YWJsZSByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cInt7Ojp1bmlxdWVJZH19LXRpdGxlXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwie3thY3RpdmVEYXRlSWR9fVwiPlxcbiAgPHRoZWFkPlxcbiAgICA8dHI+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIm1vdmUoLTEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiBpZD1cInt7Ojp1bmlxdWVJZH19LXRpdGxlXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgbmctY2xpY2s9XCJ0b2dnbGVNb2RlKClcIiBuZy1kaXNhYmxlZD1cImRhdGVwaWNrZXJNb2RlID09PSBtYXhNb2RlXCIgdGFiaW5kZXg9XCItMVwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICA8L3RoZWFkPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgbmctcmVwZWF0PVwicm93IGluIHJvd3MgdHJhY2sgYnkgJGluZGV4XCI+XFxuICAgICAgPHRkIG5nLXJlcGVhdD1cImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIHJvbGU9XCJncmlkY2VsbFwiIGlkPVwie3s6OmR0LnVpZH19XCIgbmctY2xhc3M9XCI6OmR0LmN1c3RvbUNsYXNzXCI+XFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBzdHlsZT1cIm1pbi13aWR0aDoxMDAlO1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xhc3M9XCJ7XFwnYnRuLWluZm9cXCc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cIiBuZy1jbGljaz1cInNlbGVjdChkdC5kYXRlKVwiIG5nLWRpc2FibGVkPVwiZHQuZGlzYWJsZWRcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCI6OntcXCd0ZXh0LWluZm9cXCc6IGR0LmN1cnJlbnR9XCI+e3s6OmR0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XFxuICAgICAgPC90ZD5cXG4gICAgPC90cj5cXG4gIDwvdGJvZHk+XFxuPC90YWJsZT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLCc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgbmctaWY9XCJpc09wZW5cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrXCIgbmctc3R5bGU9XCJ7dG9wOiBwb3NpdGlvbi50b3ArXFwncHhcXCcsIGxlZnQ6IHBvc2l0aW9uLmxlZnQrXFwncHhcXCd9XCIgbmcta2V5ZG93bj1cImtleWRvd24oJGV2ZW50KVwiIG5nLWNsaWNrPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCI+XFxuXHQ8bGkgbmctdHJhbnNjbHVkZT48L2xpPlxcblx0PGxpIG5nLWlmPVwic2hvd0J1dHRvbkJhclwiIHN0eWxlPVwicGFkZGluZzoxMHB4IDlweCAycHhcIj5cXG5cdFx0PHNwYW4gY2xhc3M9XCJidG4tZ3JvdXAgcHVsbC1sZWZ0XCI+XFxuXHRcdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1pbmZvXCIgbmctY2xpY2s9XCJzZWxlY3QoXFwndG9kYXlcXCcpXCIgbmctZGlzYWJsZWQ9XCJpc0Rpc2FibGVkKFxcJ3RvZGF5XFwnKVwiPnt7IGdldFRleHQoXFwnY3VycmVudFxcJykgfX08L2J1dHRvbj5cXG5cdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRhbmdlclwiIG5nLWNsaWNrPVwic2VsZWN0KG51bGwpXCI+e3sgZ2V0VGV4dChcXCdjbGVhclxcJykgfX08L2J1dHRvbj5cXG5cdFx0PC9zcGFuPlxcblx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MgcHVsbC1yaWdodFwiIG5nLWNsaWNrPVwiY2xvc2UoKVwiPnt7IGdldFRleHQoXFwnY2xvc2VcXCcpIH19PC9idXR0b24+XFxuXHQ8L2xpPlxcbjwvdWw+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsJzx0YWJsZSByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cInt7Ojp1bmlxdWVJZH19LXRpdGxlXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwie3thY3RpdmVEYXRlSWR9fVwiPlxcbiAgPHRoZWFkPlxcbiAgICA8dHI+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIm1vdmUoLTEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGggY29sc3Bhbj1cIjNcIj48YnV0dG9uIGlkPVwie3s6OnVuaXF1ZUlkfX0tdGl0bGVcIiByb2xlPVwiaGVhZGluZ1wiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiBuZy1jbGljaz1cInRvZ2dsZU1vZGUoKVwiIG5nLWRpc2FibGVkPVwiZGF0ZXBpY2tlck1vZGUgPT09IG1heE1vZGVcIiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHRcIiBuZy1jbGljaz1cIm1vdmUoMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgPC90cj5cXG4gIDwvdGhlYWQ+XFxuICA8dGJvZHk+XFxuICAgIDx0ciBuZy1yZXBlYXQ9XCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcIj5cXG4gICAgICA8dGQgbmctcmVwZWF0PVwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCIgaWQ9XCJ7ezo6ZHQudWlkfX1cIj5cXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHN0eWxlPVwibWluLXdpZHRoOjEwMCU7XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGFzcz1cIntcXCdidG4taW5mb1xcJzogZHQuc2VsZWN0ZWQsIGFjdGl2ZTogaXNBY3RpdmUoZHQpfVwiIG5nLWNsaWNrPVwic2VsZWN0KGR0LmRhdGUpXCIgbmctZGlzYWJsZWQ9XCJkdC5kaXNhYmxlZFwiIHRhYmluZGV4PVwiLTFcIj48c3BhbiBuZy1jbGFzcz1cIjo6e1xcJ3RleHQtaW5mb1xcJzogZHQuY3VycmVudH1cIj57ezo6ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG4gICAgICA8L3RkPlxcbiAgICA8L3RyPlxcbiAgPC90Ym9keT5cXG48L3RhYmxlPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIiwnPGRpdiBjbGFzcz1cIm1vZGFsLWJhY2tkcm9wXCJcXG4gICAgIG1vZGFsLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgICAgbW9kYWwtaW4tY2xhc3M9XCJpblwiXFxuICAgICBuZy1zdHlsZT1cIntcXCd6LWluZGV4XFwnOiAxMDQwICsgKGluZGV4ICYmIDEgfHwgMCkgKyBpbmRleCoxMH1cIlxcbj48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIiwnPGRpdiBtb2RhbC1yZW5kZXI9XCJ7eyRpc1JlbmRlcmVkfX1cIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGNsYXNzPVwibW9kYWxcIlxcbiAgICBtb2RhbC1hbmltYXRpb24tY2xhc3M9XCJmYWRlXCJcXG4gICAgbW9kYWwtaW4tY2xhc3M9XCJpblwiXFxuXHRuZy1zdHlsZT1cIntcXCd6LWluZGV4XFwnOiAxMDUwICsgaW5kZXgqMTAsIGRpc3BsYXk6IFxcJ2Jsb2NrXFwnfVwiIG5nLWNsaWNrPVwiY2xvc2UoJGV2ZW50KVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCIgbmctY2xhc3M9XCJzaXplID8gXFwnbW9kYWwtXFwnICsgc2l6ZSA6IFxcJ1xcJ1wiPjxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCIgbW9kYWwtdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLCc8dWwgY2xhc3M9XCJwYWdlclwiPlxcbiAgPGxpIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl8fG5nRGlzYWJsZWQsIHByZXZpb3VzOiBhbGlnbn1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlIC0gMSwgJGV2ZW50KVwiPnt7OjpnZXRUZXh0KFxcJ3ByZXZpb3VzXFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfHxuZ0Rpc2FibGVkLCBuZXh0OiBhbGlnbn1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlICsgMSwgJGV2ZW50KVwiPnt7OjpnZXRUZXh0KFxcJ25leHRcXCcpfX08L2E+PC9saT5cXG48L3VsPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLCc8dWwgY2xhc3M9XCJwYWdpbmF0aW9uXCI+XFxuICA8bGkgbmctaWY9XCI6OmJvdW5kYXJ5TGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkfVwiIGNsYXNzPVwicGFnaW5hdGlvbi1maXJzdFwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKDEsICRldmVudClcIj57ezo6Z2V0VGV4dChcXCdmaXJzdFxcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLWlmPVwiOjpkaXJlY3Rpb25MaW5rc1wiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl8fG5nRGlzYWJsZWR9XCIgY2xhc3M9XCJwYWdpbmF0aW9uLXByZXZcIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlIC0gMSwgJGV2ZW50KVwiPnt7OjpnZXRUZXh0KFxcJ3ByZXZpb3VzXFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctcmVwZWF0PVwicGFnZSBpbiBwYWdlcyB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6IHBhZ2UuYWN0aXZlLGRpc2FibGVkOiBuZ0Rpc2FibGVkJiYhcGFnZS5hY3RpdmV9XCIgY2xhc3M9XCJwYWdpbmF0aW9uLXBhZ2VcIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlLm51bWJlciwgJGV2ZW50KVwiPnt7cGFnZS50ZXh0fX08L2E+PC9saT5cXG4gIDxsaSBuZy1pZj1cIjo6ZGlyZWN0aW9uTGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWR9XCIgY2xhc3M9XCJwYWdpbmF0aW9uLW5leHRcIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlICsgMSwgJGV2ZW50KVwiPnt7OjpnZXRUZXh0KFxcJ25leHRcXCcpfX08L2E+PC9saT5cXG4gIDxsaSBuZy1pZj1cIjo6Ym91bmRhcnlMaW5rc1wiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub05leHQoKXx8bmdEaXNhYmxlZH1cIiBjbGFzcz1cInBhZ2luYXRpb24tbGFzdFwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHRvdGFsUGFnZXMsICRldmVudClcIj57ezo6Z2V0VGV4dChcXCdsYXN0XFwnKX19PC9hPjwvbGk+XFxuPC91bD5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sXCIsJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB0b29sdGlwLWNsYXNzZXNcXG4gIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCIgbmctYmluZC1odG1sPVwiY29udGVudEV4cCgpXCI+PC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB0b29sdGlwLWNsYXNzZXNcXG4gIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCIgYmluZC1odG1sLXVuc2FmZT1cImNvbnRlbnRcIj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIiwnPGRpdiBjbGFzcz1cInRvb2x0aXBcIlxcbiAgdG9vbHRpcC1hbmltYXRpb24tY2xhc3M9XCJmYWRlXCJcXG4gIHRvb2x0aXAtY2xhc3Nlc1xcbiAgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIiBuZy1iaW5kPVwiY29udGVudFwiPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiXFxuICB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiXFxuICAgIHRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZT1cImNvbnRlbnRFeHAoKVwiXFxuICAgIHRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZS1zY29wZT1cIm9yaWdpblNjb3BlKClcIj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItaHRtbC5odG1sXCIsJzxkaXYgY2xhc3M9XCJwb3BvdmVyXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB0b29sdGlwLWNsYXNzZXNcXG4gIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+XFxuXFxuICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1pbm5lclwiPlxcbiAgICAgIDxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIiBuZy1iaW5kPVwidGl0bGVcIiBuZy1pZj1cInRpdGxlXCI+PC9oMz5cXG4gICAgICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCIgbmctYmluZC1odG1sPVwiY29udGVudEV4cCgpXCI+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLXRlbXBsYXRlLmh0bWxcIiwnPGRpdiBjbGFzcz1cInBvcG92ZXJcIlxcbiAgdG9vbHRpcC1hbmltYXRpb24tY2xhc3M9XCJmYWRlXCJcXG4gIHRvb2x0aXAtY2xhc3Nlc1xcbiAgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj5cXG5cXG4gIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWlubmVyXCI+XFxuICAgICAgPGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiIG5nLWlmPVwidGl0bGVcIj48L2gzPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIlxcbiAgICAgICAgdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlPVwiY29udGVudEV4cCgpXCJcXG4gICAgICAgIHRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZS1zY29wZT1cIm9yaWdpblNjb3BlKClcIj48L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiXFxuICB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PlxcblxcbiAgPGRpdiBjbGFzcz1cInBvcG92ZXItaW5uZXJcIj5cXG4gICAgICA8aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCIgbmctaWY9XCJ0aXRsZVwiPjwvaDM+XFxuICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIiwnPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIG5nLWNsYXNzPVwidHlwZSAmJiBcXCdwcm9ncmVzcy1iYXItXFwnICsgdHlwZVwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCJ7e3ZhbHVlfX1cIiBhcmlhLXZhbHVlbWluPVwiMFwiIGFyaWEtdmFsdWVtYXg9XCJ7e21heH19XCIgbmctc3R5bGU9XCJ7d2lkdGg6IChwZXJjZW50IDwgMTAwID8gcGVyY2VudCA6IDEwMCkgKyBcXCclXFwnfVwiIGFyaWEtdmFsdWV0ZXh0PVwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcIiBzdHlsZT1cIm1pbi13aWR0aDogMDtcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIiwnPGRpdiBjbGFzcz1cInByb2dyZXNzXCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsJzxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiPlxcbiAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIG5nLWNsYXNzPVwidHlwZSAmJiBcXCdwcm9ncmVzcy1iYXItXFwnICsgdHlwZVwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCJ7e3ZhbHVlfX1cIiBhcmlhLXZhbHVlbWluPVwiMFwiIGFyaWEtdmFsdWVtYXg9XCJ7e21heH19XCIgbmctc3R5bGU9XCJ7d2lkdGg6IChwZXJjZW50IDwgMTAwID8gcGVyY2VudCA6IDEwMCkgKyBcXCclXFwnfVwiIGFyaWEtdmFsdWV0ZXh0PVwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcIiBzdHlsZT1cIm1pbi13aWR0aDogMDtcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsJzxzcGFuIG5nLW1vdXNlbGVhdmU9XCJyZXNldCgpXCIgbmcta2V5ZG93bj1cIm9uS2V5ZG93bigkZXZlbnQpXCIgdGFiaW5kZXg9XCIwXCIgcm9sZT1cInNsaWRlclwiIGFyaWEtdmFsdWVtaW49XCIwXCIgYXJpYS12YWx1ZW1heD1cInt7cmFuZ2UubGVuZ3RofX1cIiBhcmlhLXZhbHVlbm93PVwie3t2YWx1ZX19XCI+XFxuICAgIDxzcGFuIG5nLXJlcGVhdC1zdGFydD1cInIgaW4gcmFuZ2UgdHJhY2sgYnkgJGluZGV4XCIgY2xhc3M9XCJzci1vbmx5XCI+KHt7ICRpbmRleCA8IHZhbHVlID8gXFwnKlxcJyA6IFxcJyBcXCcgfX0pPC9zcGFuPlxcbiAgICA8aSBuZy1yZXBlYXQtZW5kIG5nLW1vdXNlZW50ZXI9XCJlbnRlcigkaW5kZXggKyAxKVwiIG5nLWNsaWNrPVwicmF0ZSgkaW5kZXggKyAxKVwiIGNsYXNzPVwiZ2x5cGhpY29uXCIgbmctY2xhc3M9XCIkaW5kZXggPCB2YWx1ZSAmJiAoci5zdGF0ZU9uIHx8IFxcJ2dseXBoaWNvbi1zdGFyXFwnKSB8fCAoci5zdGF0ZU9mZiB8fCBcXCdnbHlwaGljb24tc3Rhci1lbXB0eVxcJylcIiBuZy1hdHRyLXRpdGxlPVwie3tyLnRpdGxlfX1cIiA+PC9pPlxcbjwvc3Bhbj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sXCIsJzxsaSBuZy1jbGFzcz1cInthY3RpdmU6IGFjdGl2ZSwgZGlzYWJsZWQ6IGRpc2FibGVkfVwiPlxcbiAgPGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdCgpXCIgdGFiLWhlYWRpbmctdHJhbnNjbHVkZT57e2hlYWRpbmd9fTwvYT5cXG48L2xpPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIiwnPGRpdj5cXG4gIDx1bCBjbGFzcz1cIm5hdiBuYXYte3t0eXBlIHx8IFxcJ3RhYnNcXCd9fVwiIG5nLWNsYXNzPVwie1xcJ25hdi1zdGFja2VkXFwnOiB2ZXJ0aWNhbCwgXFwnbmF2LWp1c3RpZmllZFxcJzoganVzdGlmaWVkfVwiIG5nLXRyYW5zY2x1ZGU+PC91bD5cXG4gIDxkaXYgY2xhc3M9XCJ0YWItY29udGVudFwiPlxcbiAgICA8ZGl2IGNsYXNzPVwidGFiLXBhbmVcIiBcXG4gICAgICAgICBuZy1yZXBlYXQ9XCJ0YWIgaW4gdGFic1wiIFxcbiAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogdGFiLmFjdGl2ZX1cIlxcbiAgICAgICAgIHRhYi1jb250ZW50LXRyYW5zY2x1ZGU9XCJ0YWJcIj5cXG4gICAgPC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIiwnPHRhYmxlPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIG5nLXNob3c9XCI6OnNob3dTcGlubmVyc1wiPlxcbiAgICAgIDx0ZD48YSBuZy1jbGljaz1cImluY3JlbWVudEhvdXJzKClcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9JbmNyZW1lbnRIb3VycygpfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcIj48L3NwYW4+PC9hPjwvdGQ+XFxuICAgICAgPHRkPiZuYnNwOzwvdGQ+XFxuICAgICAgPHRkPjxhIG5nLWNsaWNrPVwiaW5jcmVtZW50TWludXRlcygpXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vSW5jcmVtZW50TWludXRlcygpfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcIj48L3NwYW4+PC9hPjwvdGQ+XFxuICAgICAgPHRkIG5nLXNob3c9XCJzaG93TWVyaWRpYW5cIj48L3RkPlxcbiAgICA8L3RyPlxcbiAgICA8dHI+XFxuICAgICAgPHRkIGNsYXNzPVwiZm9ybS1ncm91cFwiIG5nLWNsYXNzPVwie1xcJ2hhcy1lcnJvclxcJzogaW52YWxpZEhvdXJzfVwiPlxcbiAgICAgICAgPGlucHV0IHN0eWxlPVwid2lkdGg6NTBweDtcIiB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiaG91cnNcIiBuZy1jaGFuZ2U9XCJ1cGRhdGVIb3VycygpXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXJcIiBuZy1yZWFkb25seT1cIjo6cmVhZG9ubHlJbnB1dFwiIG1heGxlbmd0aD1cIjJcIj5cXG4gICAgICA8L3RkPlxcbiAgICAgIDx0ZD46PC90ZD5cXG4gICAgICA8dGQgY2xhc3M9XCJmb3JtLWdyb3VwXCIgbmctY2xhc3M9XCJ7XFwnaGFzLWVycm9yXFwnOiBpbnZhbGlkTWludXRlc31cIj5cXG4gICAgICAgIDxpbnB1dCBzdHlsZT1cIndpZHRoOjUwcHg7XCIgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm1pbnV0ZXNcIiBuZy1jaGFuZ2U9XCJ1cGRhdGVNaW51dGVzKClcIiBjbGFzcz1cImZvcm0tY29udHJvbCB0ZXh0LWNlbnRlclwiIG5nLXJlYWRvbmx5PVwiOjpyZWFkb25seUlucHV0XCIgbWF4bGVuZ3RoPVwiMlwiPlxcbiAgICAgIDwvdGQ+XFxuICAgICAgPHRkIG5nLXNob3c9XCJzaG93TWVyaWRpYW5cIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9Ub2dnbGVNZXJpZGlhbigpfVwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHRleHQtY2VudGVyXCIgbmctY2xpY2s9XCJ0b2dnbGVNZXJpZGlhbigpXCI+e3ttZXJpZGlhbn19PC9idXR0b24+PC90ZD5cXG4gICAgPC90cj5cXG4gICAgPHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIiBuZy1zaG93PVwiOjpzaG93U3Bpbm5lcnNcIj5cXG4gICAgICA8dGQ+PGEgbmctY2xpY2s9XCJkZWNyZW1lbnRIb3VycygpXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vRGVjcmVtZW50SG91cnMoKX1cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+PC9hPjwvdGQ+XFxuICAgICAgPHRkPiZuYnNwOzwvdGQ+XFxuICAgICAgPHRkPjxhIG5nLWNsaWNrPVwiZGVjcmVtZW50TWludXRlcygpXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vRGVjcmVtZW50TWludXRlcygpfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blwiPjwvc3Bhbj48L2E+PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dNZXJpZGlhblwiPjwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIiwnPGEgaHJlZiB0YWJpbmRleD1cIi0xXCIgbmctYmluZC1odG1sPVwibWF0Y2gubGFiZWwgfCB0eXBlYWhlYWRIaWdobGlnaHQ6cXVlcnlcIj48L2E+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIiwnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIG5nLXNob3c9XCJpc09wZW4oKSAmJiAhbW92ZUluUHJvZ3Jlc3NcIiBuZy1zdHlsZT1cInt0b3A6IHBvc2l0aW9uKCkudG9wK1xcJ3B4XFwnLCBsZWZ0OiBwb3NpdGlvbigpLmxlZnQrXFwncHhcXCd9XCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jaztcIiByb2xlPVwibGlzdGJveFwiIGFyaWEtaGlkZGVuPVwie3shaXNPcGVuKCl9fVwiPlxcbiAgICA8bGkgbmctcmVwZWF0PVwibWF0Y2ggaW4gbWF0Y2hlcyB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6IGlzQWN0aXZlKCRpbmRleCkgfVwiIG5nLW1vdXNlZW50ZXI9XCJzZWxlY3RBY3RpdmUoJGluZGV4KVwiIG5nLWNsaWNrPVwic2VsZWN0TWF0Y2goJGluZGV4KVwiIHJvbGU9XCJvcHRpb25cIiBpZD1cInt7OjptYXRjaC5pZH19XCI+XFxuICAgICAgICA8ZGl2IHR5cGVhaGVhZC1tYXRjaCBpbmRleD1cIiRpbmRleFwiIG1hdGNoPVwibWF0Y2hcIiBxdWVyeT1cInF1ZXJ5XCIgdGVtcGxhdGUtdXJsPVwidGVtcGxhdGVVcmxcIj48L2Rpdj5cXG4gICAgPC9saT5cXG48L3VsPlxcbicpfV0pLCFhbmd1bGFyLiQkY3NwKCkmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZChcImhlYWRcIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPi5uZy1hbmltYXRlLml0ZW06bm90KC5sZWZ0KTpub3QoLnJpZ2h0KXstd2Via2l0LXRyYW5zaXRpb246MHMgZWFzZS1pbi1vdXQgbGVmdDt0cmFuc2l0aW9uOjBzIGVhc2UtaW4tb3V0IGxlZnR9PC9zdHlsZT4nKTsiLCIvKiEgalF1ZXJ5IHNwaW5uZXIgLSB2MC4xLjYgLSAyMDE1LTAzLTA5XG4qIGh0dHBzOi8vZ2l0aHViLmNvbS94aXhpbGl2ZS9qcXVlcnktc3Bpbm5lclxuKiBDb3B5cmlnaHQgKGMpIDIwMTUgeGl4aWxpdmU7IExpY2Vuc2VkIE1JVCAqL1xuIWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiLGM9ZnVuY3Rpb24oYixkKXtyZXR1cm4gZD1hLmV4dGVuZCh7fSxkKSx0aGlzLiRlbD1iLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxjLnJ1bGVzLmRlZmF1bHRzLGMucnVsZXNbZC5ydWxlXXx8e30sZCksdGhpcy5taW49cGFyc2VGbG9hdCh0aGlzLm9wdGlvbnMubWluKXx8MCx0aGlzLm1heD1wYXJzZUZsb2F0KHRoaXMub3B0aW9ucy5tYXgpfHwwLHRoaXMuJGVsLm9uKFwiZm9jdXMuc3Bpbm5lclwiLGEucHJveHkoZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpLGEoZG9jdW1lbnQpLnRyaWdnZXIoXCJtb3VzZXVwLnNwaW5uZXJcIiksdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlKCl9LHRoaXMpKS5vbihcImNoYW5nZS5zcGlubmVyXCIsYS5wcm94eShmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksdGhpcy52YWx1ZSh0aGlzLiRlbC52YWwoKSl9LHRoaXMpKS5vbihcImtleWRvd24uc3Bpbm5lclwiLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9ezM4OlwidXBcIiw0MDpcImRvd25cIn1bYS53aGljaF07YiYmKGEucHJldmVudERlZmF1bHQoKSx0aGlzLnNwaW4oYikpfSx0aGlzKSksdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlKCksdGhpcy52YWx1ZSh0aGlzLiRlbC52YWwoKSksdGhpc307Yy5ydWxlcz17ZGVmYXVsdHM6e21pbjpudWxsLG1heDpudWxsLHN0ZXA6MSxwcmVjaXNpb246MH0sY3VycmVuY3k6e21pbjowLG1heDpudWxsLHN0ZXA6LjAxLHByZWNpc2lvbjoyfSxxdWFudGl0eTp7bWluOjEsbWF4Ojk5OSxzdGVwOjEscHJlY2lzaW9uOjB9LHBlcmNlbnQ6e21pbjoxLG1heDoxMDAsc3RlcDoxLHByZWNpc2lvbjowfSxtb250aDp7bWluOjEsbWF4OjEyLHN0ZXA6MSxwcmVjaXNpb246MH0sZGF5OnttaW46MSxtYXg6MzEsc3RlcDoxLHByZWNpc2lvbjowfSxob3VyOnttaW46MCxtYXg6MjMsc3RlcDoxLHByZWNpc2lvbjowfSxtaW51dGU6e21pbjoxLG1heDo1OSxzdGVwOjEscHJlY2lzaW9uOjB9LHNlY29uZDp7bWluOjEsbWF4OjU5LHN0ZXA6MSxwcmVjaXNpb246MH19LGMucHJvdG90eXBlPXtzcGluOmZ1bmN0aW9uKGIpe2lmKFwiZGlzYWJsZWRcIiE9PXRoaXMuJGVsLmF0dHIoXCJkaXNhYmxlZFwiKSl7dGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlKCk7dmFyIGM9YS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5zdGVwKT90aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMsYik6dGhpcy5vcHRpb25zLnN0ZXA7c3dpdGNoKGIpe2Nhc2VcInVwXCI6dGhpcy52YWx1ZSh0aGlzLm9sZFZhbHVlK051bWJlcihjLDEwKSk7YnJlYWs7Y2FzZVwiZG93blwiOnRoaXMudmFsdWUodGhpcy5vbGRWYWx1ZS1OdW1iZXIoYywxMCkpfX19LHZhbHVlOmZ1bmN0aW9uKGMpe2lmKG51bGw9PT1jfHx2b2lkIDA9PT1jKXJldHVybiB0aGlzLm51bWVyaWModGhpcy4kZWwudmFsKCkpO2M9dGhpcy5udW1lcmljKGMpO3ZhciBlPXRoaXMudmFsaWRhdGUoYyk7MCE9PWUmJihjPS0xPT09ZT90aGlzLm1pbjp0aGlzLm1heCksdGhpcy4kZWwudmFsKGMudG9GaXhlZCh0aGlzLm9wdGlvbnMucHJlY2lzaW9uKSksdGhpcy5vbGRWYWx1ZSE9PXRoaXMudmFsdWUoKSYmKHRoaXMuJGVsLnRyaWdnZXIoXCJjaGFuZ2luZy5zcGlubmVyXCIsW3RoaXMudmFsdWUoKSx0aGlzLm9sZFZhbHVlXSksY2xlYXJUaW1lb3V0KGIpLGI9c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWwudHJpZ2dlcihcImNoYW5nZWQuc3Bpbm5lclwiLFt0aGlzLnZhbHVlKCksdGhpcy5vbGRWYWx1ZV0pfSx0aGlzKSxkLmRlbGF5KSl9LG51bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5vcHRpb25zLnByZWNpc2lvbj4wP3BhcnNlRmxvYXQoYSwxMCk6cGFyc2VJbnQoYSwxMCksIWlzTmFOKHBhcnNlRmxvYXQoYSkpJiZpc0Zpbml0ZShhKT9hOmF8fHRoaXMub3B0aW9ucy5taW58fDB9LHZhbGlkYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09dGhpcy5vcHRpb25zLm1pbiYmYTx0aGlzLm1pbj8tMTpudWxsIT09dGhpcy5vcHRpb25zLm1heCYmYT50aGlzLm1heD8xOjB9fTt2YXIgZD1mdW5jdGlvbihiLGQpe2Q9YS5leHRlbmQoe30sZCksdGhpcy4kZWw9Yix0aGlzLiRzcGlubmluZz1hKFwiW2RhdGEtc3Bpbj0nc3Bpbm5lciddXCIsdGhpcy4kZWwpLDA9PT10aGlzLiRzcGlubmluZy5sZW5ndGgmJih0aGlzLiRzcGlubmluZz1hKFwiOmlucHV0W3R5cGU9J3RleHQnXVwiLHRoaXMuJGVsKSksdGhpcy5zcGlubmluZz1uZXcgYyh0aGlzLiRzcGlubmluZyxhLmV4dGVuZCh0aGlzLiRzcGlubmluZy5kYXRhKCksZCkpLHRoaXMuJGVsLm9uKFwiY2xpY2suc3Bpbm5lclwiLFwiW2RhdGEtc3Bpbj0ndXAnXSxbZGF0YS1zcGluPSdkb3duJ11cIixhLnByb3h5KHRoaXMuc3Bpbix0aGlzKSkub24oXCJtb3VzZWRvd24uc3Bpbm5lclwiLFwiW2RhdGEtc3Bpbj0ndXAnXSxbZGF0YS1zcGluPSdkb3duJ11cIixhLnByb3h5KHRoaXMuc3Bpbix0aGlzKSksYShkb2N1bWVudCkub24oXCJtb3VzZXVwLnNwaW5uZXJcIixhLnByb3h5KGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuc3BpblRpbWVvdXQpLGNsZWFySW50ZXJ2YWwodGhpcy5zcGluSW50ZXJ2YWwpfSx0aGlzKSksZC5kZWxheSYmdGhpcy5kZWxheShkLmRlbGF5KSxkLmNoYW5nZWQmJnRoaXMuY2hhbmdlZChkLmNoYW5nZWQpLGQuY2hhbmdpbmcmJnRoaXMuY2hhbmdpbmcoZC5jaGFuZ2luZyl9O2QuZGVsYXk9NTAwLGQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpkLHNwaW46ZnVuY3Rpb24oYil7dmFyIGM9YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJzcGluXCIpO3N3aXRjaChiLnR5cGUpe2Nhc2VcImNsaWNrXCI6Yi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc3Bpbm5pbmcuc3BpbihjKTticmVhaztjYXNlXCJtb3VzZWRvd25cIjoxPT09Yi53aGljaCYmKHRoaXMuc3BpblRpbWVvdXQ9c2V0VGltZW91dChhLnByb3h5KHRoaXMuYmVnaW5TcGluLHRoaXMsYyksMzAwKSl9fSxkZWxheTpmdW5jdGlvbihhKXt2YXIgYj1wYXJzZUludChhLDEwKTtiPj0wJiYodGhpcy5jb25zdHJ1Y3Rvci5kZWxheT1iKzEwMCl9LHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3Bpbm5pbmcudmFsdWUoKX0sY2hhbmdlZDpmdW5jdGlvbihhKXt0aGlzLmJpbmRIYW5kbGVyKFwiY2hhbmdlZC5zcGlubmVyXCIsYSl9LGNoYW5naW5nOmZ1bmN0aW9uKGEpe3RoaXMuYmluZEhhbmRsZXIoXCJjaGFuZ2luZy5zcGlubmVyXCIsYSl9LGJpbmRIYW5kbGVyOmZ1bmN0aW9uKGIsYyl7YS5pc0Z1bmN0aW9uKGMpP3RoaXMuJHNwaW5uaW5nLm9uKGIsYyk6dGhpcy4kc3Bpbm5pbmcub2ZmKGIpfSxiZWdpblNwaW46ZnVuY3Rpb24oYil7dGhpcy5zcGluSW50ZXJ2YWw9c2V0SW50ZXJ2YWwoYS5wcm94eSh0aGlzLnNwaW5uaW5nLnNwaW4sdGhpcy5zcGlubmluZyxiKSwxMDApfX0sYS5mbi5zcGlubmVyPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLmRhdGEoXCJzcGlubmVyXCIpO2Z8fGUuZGF0YShcInNwaW5uZXJcIixmPW5ldyBkKGUsYS5leHRlbmQoe30sZS5kYXRhKCksYikpKSwoXCJkZWxheVwiPT09Ynx8XCJjaGFuZ2VkXCI9PT1ifHxcImNoYW5naW5nXCI9PT1iKSYmZltiXShjKSxcInN0ZXBcIj09PWImJmMmJihmLnNwaW5uaW5nLnN0ZXA9YyksXCJzcGluXCI9PT1iJiZjJiZmLnNwaW5uaW5nLnNwaW4oYyl9KX0sYShmdW5jdGlvbigpe2EoJ1tkYXRhLXRyaWdnZXI9XCJzcGlubmVyXCJdJykuc3Bpbm5lcigpfSl9KGpRdWVyeSk7IiwiLyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OICA1LjEuMSAgICAgICAgICAgICAgXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qISA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIGJvb3RzdHJhcC1zbGlkZXIuanNcbiAqXG4gKiBNYWludGFpbmVyczpcbiAqXHRcdEt5bGUgS2VtcFxuICpcdFx0XHQtIFR3aXR0ZXI6IEBzZWl5cmlhXG4gKlx0XHRcdC0gR2l0aHViOiAgc2VpeXJpYVxuICpcdFx0Um9oaXQgS2Fsa3VyXG4gKlx0XHRcdC0gVHdpdHRlcjogQFJvdm9sdXRpb25hcnlcbiAqXHRcdFx0LSBHaXRodWI6ICByb3ZvbHV0aW9uXG4gKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiFmdW5jdGlvbihhLGIpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW1wianF1ZXJ5XCJdLGIpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpe3ZhciBjO3RyeXtjPXJlcXVpcmUoXCJqcXVlcnlcIil9Y2F0Y2goZCl7Yz1udWxsfW1vZHVsZS5leHBvcnRzPWIoYyl9ZWxzZSBhLlNsaWRlcj1iKGEualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYigpe31mdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGMoYil7Yi5wcm90b3R5cGUub3B0aW9ufHwoYi5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGIpe2EuaXNQbGFpbk9iamVjdChiKSYmKHRoaXMub3B0aW9ucz1hLmV4dGVuZCghMCx0aGlzLm9wdGlvbnMsYikpfSl9ZnVuY3Rpb24gZShiLGMpe2EuZm5bYl09ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2Zvcih2YXIgZz1kLmNhbGwoYXJndW1lbnRzLDEpLGg9MCxpPXRoaXMubGVuZ3RoO2k+aDtoKyspe3ZhciBqPXRoaXNbaF0saz1hLmRhdGEoaixiKTtpZihrKWlmKGEuaXNGdW5jdGlvbihrW2VdKSYmXCJfXCIhPT1lLmNoYXJBdCgwKSl7dmFyIGw9a1tlXS5hcHBseShrLGcpO2lmKHZvaWQgMCE9PWwmJmwhPT1rKXJldHVybiBsfWVsc2UgZihcIm5vIHN1Y2ggbWV0aG9kICdcIitlK1wiJyBmb3IgXCIrYitcIiBpbnN0YW5jZVwiKTtlbHNlIGYoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK2IrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsICdcIitlK1wiJ1wiKX1yZXR1cm4gdGhpc312YXIgbT10aGlzLm1hcChmdW5jdGlvbigpe3ZhciBkPWEuZGF0YSh0aGlzLGIpO3JldHVybiBkPyhkLm9wdGlvbihlKSxkLl9pbml0KCkpOihkPW5ldyBjKHRoaXMsZSksYS5kYXRhKHRoaXMsYixkKSksYSh0aGlzKX0pO3JldHVybiFtfHxtLmxlbmd0aD4xP206bVswXX19aWYoYSl7dmFyIGY9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGU/YjpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKGEpfTtyZXR1cm4gYS5icmlkZ2V0PWZ1bmN0aW9uKGEsYil7YyhiKSxlKGEsYil9LGEuYnJpZGdldH19dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlO2MoYSl9KGEpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9XCJkYXRhLXNsaWRlci1cIitiLnJlcGxhY2UoL18vZyxcIi1cIiksZD1hLmdldEF0dHJpYnV0ZShjKTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZCl9Y2F0Y2goZSl7cmV0dXJuIGR9fXRoaXMuX3N0YXRlPXt2YWx1ZTpudWxsLGVuYWJsZWQ6bnVsbCxvZmZzZXQ6bnVsbCxzaXplOm51bGwscGVyY2VudGFnZTpudWxsLGluRHJhZzohMSxvdmVyOiExfSxcInN0cmluZ1wiPT10eXBlb2YgYj90aGlzLmVsZW1lbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiKTpiIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJih0aGlzLmVsZW1lbnQ9YiksYz1jP2M6e307Zm9yKHZhciBmPU9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdE9wdGlvbnMpLGc9MDtnPGYubGVuZ3RoO2crKyl7dmFyIGg9ZltnXSxpPWNbaF07aT1cInVuZGVmaW5lZFwiIT10eXBlb2YgaT9pOmQodGhpcy5lbGVtZW50LGgpLGk9bnVsbCE9PWk/aTp0aGlzLmRlZmF1bHRPcHRpb25zW2hdLHRoaXMub3B0aW9uc3x8KHRoaXMub3B0aW9ucz17fSksdGhpcy5vcHRpb25zW2hdPWl9XCJ2ZXJ0aWNhbFwiIT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9ufHxcInRvcFwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24mJlwiYm90dG9tXCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj9cImhvcml6b250YWxcIiE9PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbnx8XCJsZWZ0XCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbiYmXCJyaWdodFwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb258fCh0aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj1cInRvcFwiKTp0aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj1cInJpZ2h0XCI7dmFyIGosayxsLG0sbixvPXRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCxwPSExLHE9dGhpcy5lbGVtZW50LnBhcmVudE5vZGU7aWYodGhpcy5zbGlkZXJFbGVtKXA9ITA7ZWxzZXt0aGlzLnNsaWRlckVsZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnNsaWRlckVsZW0uY2xhc3NOYW1lPVwic2xpZGVyXCI7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihyLmNsYXNzTmFtZT1cInNsaWRlci10cmFja1wiLGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrLmNsYXNzTmFtZT1cInNsaWRlci10cmFjay1sb3dcIixqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksai5jbGFzc05hbWU9XCJzbGlkZXItc2VsZWN0aW9uXCIsbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGwuY2xhc3NOYW1lPVwic2xpZGVyLXRyYWNrLWhpZ2hcIixtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbS5jbGFzc05hbWU9XCJzbGlkZXItaGFuZGxlIG1pbi1zbGlkZXItaGFuZGxlXCIsbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uY2xhc3NOYW1lPVwic2xpZGVyLWhhbmRsZSBtYXgtc2xpZGVyLWhhbmRsZVwiLHIuYXBwZW5kQ2hpbGQoayksci5hcHBlbmRDaGlsZChqKSxyLmFwcGVuZENoaWxkKGwpLHRoaXMudGlja3M9W10sQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMudGlja3MpJiZ0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoPjApe2ZvcihnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2crKyl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtzLmNsYXNzTmFtZT1cInNsaWRlci10aWNrXCIsdGhpcy50aWNrcy5wdXNoKHMpLHIuYXBwZW5kQ2hpbGQocyl9ai5jbGFzc05hbWUrPVwiIHRpY2stc2xpZGVyLXNlbGVjdGlvblwifWlmKHIuYXBwZW5kQ2hpbGQobSksci5hcHBlbmRDaGlsZChuKSx0aGlzLnRpY2tMYWJlbHM9W10sQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMudGlja3NfbGFiZWxzKSYmdGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscy5sZW5ndGg+MClmb3IodGhpcy50aWNrTGFiZWxDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbC1jb250YWluZXJcIixnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3NfbGFiZWxzLmxlbmd0aDtnKyspe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbFwiLHQuaW5uZXJIVE1MPXRoaXMub3B0aW9ucy50aWNrc19sYWJlbHNbZ10sdGhpcy50aWNrTGFiZWxzLnB1c2godCksdGhpcy50aWNrTGFiZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodCl9dmFyIHU9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLmNsYXNzTmFtZT1cInRvb2x0aXAtYXJyb3dcIjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPVwidG9vbHRpcC1pbm5lclwiLGEuYXBwZW5kQ2hpbGQoYiksYS5hcHBlbmRDaGlsZChjKX0sdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3YuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1haW5cIix1KHYpO3ZhciB3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dy5jbGFzc05hbWU9XCJ0b29sdGlwIHRvb2x0aXAtbWluXCIsdSh3KTt2YXIgeD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3guY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1heFwiLHUoeCksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHIpLHRoaXMuc2xpZGVyRWxlbS5hcHBlbmRDaGlsZCh2KSx0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodyksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHgpLHRoaXMudGlja0xhYmVsQ29udGFpbmVyJiZ0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodGhpcy50aWNrTGFiZWxDb250YWluZXIpLHEuaW5zZXJ0QmVmb3JlKHRoaXMuc2xpZGVyRWxlbSx0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifWlmKGEmJih0aGlzLiRlbGVtZW50PWEodGhpcy5lbGVtZW50KSx0aGlzLiRzbGlkZXJFbGVtPWEodGhpcy5zbGlkZXJFbGVtKSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXA9e30sdGhpcy5zbGlkZXJFbGVtLmlkPXRoaXMub3B0aW9ucy5pZCx0aGlzLnRvdWNoQ2FwYWJsZT1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCx0aGlzLnRvb2x0aXA9dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1tYWluXCIpLHRoaXMudG9vbHRpcElubmVyPXRoaXMudG9vbHRpcC5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksdGhpcy50b29sdGlwX21pbj10aGlzLnNsaWRlckVsZW0ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLW1pblwiKSx0aGlzLnRvb2x0aXBJbm5lcl9taW49dGhpcy50b29sdGlwX21pbi5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksdGhpcy50b29sdGlwX21heD10aGlzLnNsaWRlckVsZW0ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLW1heFwiKSx0aGlzLnRvb2x0aXBJbm5lcl9tYXg9dGhpcy50b29sdGlwX21heC5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksZVt0aGlzLm9wdGlvbnMuc2NhbGVdJiYodGhpcy5vcHRpb25zLnNjYWxlPWVbdGhpcy5vcHRpb25zLnNjYWxlXSkscD09PSEwJiYodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWhvcml6b250YWxcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLXZlcnRpY2FsXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcCxcImhpZGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21pbixcImhpZGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImhpZGVcIiksW1wibGVmdFwiLFwidG9wXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkodGhpcy50cmFja0xvdyxhKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eSh0aGlzLnRyYWNrU2VsZWN0aW9uLGEpLHRoaXMuX3JlbW92ZVByb3BlcnR5KHRoaXMudHJhY2tIaWdoLGEpfSx0aGlzKSxbdGhpcy5oYW5kbGUxLHRoaXMuaGFuZGxlMl0uZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwidG9wXCIpfSx0aGlzKSxbdGhpcy50b29sdGlwLHRoaXMudG9vbHRpcF9taW4sdGhpcy50b29sdGlwX21heF0uZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwidG9wXCIpLHRoaXMuX3JlbW92ZVByb3BlcnR5KGEsXCJtYXJnaW4tbGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibWFyZ2luLXRvcFwiKSx0aGlzLl9yZW1vdmVDbGFzcyhhLFwicmlnaHRcIiksdGhpcy5fcmVtb3ZlQ2xhc3MoYSxcInRvcFwiKX0sdGhpcykpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj8odGhpcy5fYWRkQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLXZlcnRpY2FsXCIpLHRoaXMuc3R5bGVQb3M9XCJ0b3BcIix0aGlzLm1vdXNlUG9zPVwicGFnZVlcIix0aGlzLnNpemVQb3M9XCJvZmZzZXRIZWlnaHRcIik6KHRoaXMuX2FkZENsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci1ob3Jpem9udGFsXCIpLHRoaXMuc2xpZGVyRWxlbS5zdHlsZS53aWR0aD1vLHRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj1cImhvcml6b250YWxcIix0aGlzLnN0eWxlUG9zPVwibGVmdFwiLHRoaXMubW91c2VQb3M9XCJwYWdlWFwiLHRoaXMuc2l6ZVBvcz1cIm9mZnNldFdpZHRoXCIpLHRoaXMuX3NldFRvb2x0aXBQb3NpdGlvbigpLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzKSYmdGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aD4wJiYodGhpcy5vcHRpb25zLm1heD1NYXRoLm1heC5hcHBseShNYXRoLHRoaXMub3B0aW9ucy50aWNrcyksdGhpcy5vcHRpb25zLm1pbj1NYXRoLm1pbi5hcHBseShNYXRoLHRoaXMub3B0aW9ucy50aWNrcykpLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnZhbHVlKT8odGhpcy5vcHRpb25zLnJhbmdlPSEwLHRoaXMuX3N0YXRlLnZhbHVlPXRoaXMub3B0aW9ucy52YWx1ZSk6dGhpcy5fc3RhdGUudmFsdWU9dGhpcy5vcHRpb25zLnJhbmdlP1t0aGlzLm9wdGlvbnMudmFsdWUsdGhpcy5vcHRpb25zLm1heF06dGhpcy5vcHRpb25zLnZhbHVlLHRoaXMudHJhY2tMb3c9a3x8dGhpcy50cmFja0xvdyx0aGlzLnRyYWNrU2VsZWN0aW9uPWp8fHRoaXMudHJhY2tTZWxlY3Rpb24sdGhpcy50cmFja0hpZ2g9bHx8dGhpcy50cmFja0hpZ2gsXCJub25lXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiYodGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja0xvdyxcImhpZGVcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja1NlbGVjdGlvbixcImhpZGVcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja0hpZ2gsXCJoaWRlXCIpKSx0aGlzLmhhbmRsZTE9bXx8dGhpcy5oYW5kbGUxLHRoaXMuaGFuZGxlMj1ufHx0aGlzLmhhbmRsZTIscD09PSEwKWZvcih0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZTEsXCJyb3VuZCB0cmlhbmdsZVwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZTIsXCJyb3VuZCB0cmlhbmdsZSBoaWRlXCIpLGc9MDtnPHRoaXMudGlja3MubGVuZ3RoO2crKyl0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRpY2tzW2ddLFwicm91bmQgdHJpYW5nbGUgaGlkZVwiKTt2YXIgeT1bXCJyb3VuZFwiLFwidHJpYW5nbGVcIixcImN1c3RvbVwiXSx6PS0xIT09eS5pbmRleE9mKHRoaXMub3B0aW9ucy5oYW5kbGUpO2lmKHopZm9yKHRoaXMuX2FkZENsYXNzKHRoaXMuaGFuZGxlMSx0aGlzLm9wdGlvbnMuaGFuZGxlKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTIsdGhpcy5vcHRpb25zLmhhbmRsZSksZz0wO2c8dGhpcy50aWNrcy5sZW5ndGg7ZysrKXRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbZ10sdGhpcy5vcHRpb25zLmhhbmRsZSk7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc10sdGhpcy5zZXRWYWx1ZSh0aGlzLl9zdGF0ZS52YWx1ZSksdGhpcy5oYW5kbGUxS2V5ZG93bj10aGlzLl9rZXlkb3duLmJpbmQodGhpcywwKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTFLZXlkb3duLCExKSx0aGlzLmhhbmRsZTJLZXlkb3duPXRoaXMuX2tleWRvd24uYmluZCh0aGlzLDEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMktleWRvd24sITEpLHRoaXMubW91c2Vkb3duPXRoaXMuX21vdXNlZG93bi5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiZ0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm1vdXNlZG93biwhMSksdGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksXCJoaWRlXCI9PT10aGlzLm9wdGlvbnMudG9vbHRpcD8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaGlkZVwiKSk6XCJhbHdheXNcIj09PXRoaXMub3B0aW9ucy50b29sdGlwPyh0aGlzLl9zaG93VG9vbHRpcCgpLHRoaXMuX2Fsd2F5c1Nob3dUb29sdGlwPSEwKToodGhpcy5zaG93VG9vbHRpcD10aGlzLl9zaG93VG9vbHRpcC5iaW5kKHRoaXMpLHRoaXMuaGlkZVRvb2x0aXA9dGhpcy5faGlkZVRvb2x0aXAuYmluZCh0aGlzKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuaGlkZVRvb2x0aXAsITEpKSx0aGlzLm9wdGlvbnMuZW5hYmxlZD90aGlzLmVuYWJsZSgpOnRoaXMuZGlzYWJsZSgpfXZhciBkPXtmb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZzpmdW5jdGlvbihhKXtyZXR1cm5cIkludmFsaWQgaW5wdXQgdmFsdWUgJ1wiK2ErXCInIHBhc3NlZCBpblwifSxjYWxsaW5nQ29udGV4dE5vdFNsaWRlckluc3RhbmNlOlwiQ2FsbGluZyBjb250ZXh0IGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBpbnN0YW5jZSBvZiBTbGlkZXIgYm91bmQgdG8gaXQuIENoZWNrIHlvdXIgY29kZSB0byBtYWtlIHN1cmUgdGhlIEpRdWVyeSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbCB0byB0aGUgc2xpZGVyKCkgaW5pdGlhbGl6ZXIgaXMgY2FsbGluZyB0aGUgbWV0aG9kXCJ9LGU9e2xpbmVhcjp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hLzEwMCoodGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKTtpZih0aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aD4wKXtmb3IodmFyIGMsZCxlLGY9MCxnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aDtnKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tnXSl7Yz1nPjA/dGhpcy5vcHRpb25zLnRpY2tzW2ctMV06MCxlPWc+MD90aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2ctMV06MCxkPXRoaXMub3B0aW9ucy50aWNrc1tnXSxmPXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZ107YnJlYWt9aWYoZz4wKXt2YXIgaD0oYS1lKS8oZi1lKTtiPWMraCooZC1jKX19dmFyIGk9dGhpcy5vcHRpb25zLm1pbitNYXRoLnJvdW5kKGIvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiBpPHRoaXMub3B0aW9ucy5taW4/dGhpcy5vcHRpb25zLm1pbjppPnRoaXMub3B0aW9ucy5tYXg/dGhpcy5vcHRpb25zLm1heDppfSx0b1BlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5vcHRpb25zLm1heD09PXRoaXMub3B0aW9ucy5taW4pcmV0dXJuIDA7aWYodGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9ucy5sZW5ndGg+MCl7Zm9yKHZhciBiLGMsZCxlPTAsZj0wO2Y8dGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aDtmKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzW2ZdKXtiPWY+MD90aGlzLm9wdGlvbnMudGlja3NbZi0xXTowLGQ9Zj4wP3RoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZi0xXTowLGM9dGhpcy5vcHRpb25zLnRpY2tzW2ZdLGU9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXTticmVha31pZihmPjApe3ZhciBnPShhLWIpLyhjLWIpO3JldHVybiBkK2cqKGUtZCl9fXJldHVybiAxMDAqKGEtdGhpcy5vcHRpb25zLm1pbikvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbil9fSxsb2dhcml0aG1pYzp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj0wPT09dGhpcy5vcHRpb25zLm1pbj8wOk1hdGgubG9nKHRoaXMub3B0aW9ucy5taW4pLGM9TWF0aC5sb2codGhpcy5vcHRpb25zLm1heCksZD1NYXRoLmV4cChiKyhjLWIpKmEvMTAwKTtyZXR1cm4gZD10aGlzLm9wdGlvbnMubWluK01hdGgucm91bmQoKGQtdGhpcy5vcHRpb25zLm1pbikvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwLGQ8dGhpcy5vcHRpb25zLm1pbj90aGlzLm9wdGlvbnMubWluOmQ+dGhpcy5vcHRpb25zLm1heD90aGlzLm9wdGlvbnMubWF4OmR9LHRvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMubWF4PT09dGhpcy5vcHRpb25zLm1pbilyZXR1cm4gMDt2YXIgYj1NYXRoLmxvZyh0aGlzLm9wdGlvbnMubWF4KSxjPTA9PT10aGlzLm9wdGlvbnMubWluPzA6TWF0aC5sb2codGhpcy5vcHRpb25zLm1pbiksZD0wPT09YT8wOk1hdGgubG9nKGEpO3JldHVybiAxMDAqKGQtYykvKGItYyl9fX07aWYoYj1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNhbGwodGhpcyxhLGIpLHRoaXN9LGIucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbigpe30sY29uc3RydWN0b3I6YixkZWZhdWx0T3B0aW9uczp7aWQ6XCJcIixtaW46MCxtYXg6MTAsc3RlcDoxLHByZWNpc2lvbjowLG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLHZhbHVlOjUscmFuZ2U6ITEsc2VsZWN0aW9uOlwiYmVmb3JlXCIsdG9vbHRpcDpcInNob3dcIix0b29sdGlwX3NwbGl0OiExLGhhbmRsZTpcInJvdW5kXCIscmV2ZXJzZWQ6ITEsZW5hYmxlZDohMCxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/YVswXStcIiA6IFwiK2FbMV06YX0sbmF0dXJhbF9hcnJvd19rZXlzOiExLHRpY2tzOltdLHRpY2tzX3Bvc2l0aW9uczpbXSx0aWNrc19sYWJlbHM6W10sdGlja3Nfc25hcF9ib3VuZHM6MCxzY2FsZTpcImxpbmVhclwiLGZvY3VzOiExLHRvb2x0aXBfcG9zaXRpb246bnVsbH0sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRlckVsZW19LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2F8fChhPTApO3ZhciBkPXRoaXMuZ2V0VmFsdWUoKTt0aGlzLl9zdGF0ZS52YWx1ZT10aGlzLl92YWxpZGF0ZUlucHV0VmFsdWUoYSk7dmFyIGU9dGhpcy5fYXBwbHlQcmVjaXNpb24uYmluZCh0aGlzKTt0aGlzLm9wdGlvbnMucmFuZ2U/KHRoaXMuX3N0YXRlLnZhbHVlWzBdPWUodGhpcy5fc3RhdGUudmFsdWVbMF0pLHRoaXMuX3N0YXRlLnZhbHVlWzFdPWUodGhpcy5fc3RhdGUudmFsdWVbMV0pLHRoaXMuX3N0YXRlLnZhbHVlWzBdPU1hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZVswXSkpLHRoaXMuX3N0YXRlLnZhbHVlWzFdPU1hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZVsxXSkpKToodGhpcy5fc3RhdGUudmFsdWU9ZSh0aGlzLl9zdGF0ZS52YWx1ZSksdGhpcy5fc3RhdGUudmFsdWU9W01hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZSkpXSx0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTIsXCJoaWRlXCIpLHRoaXMuX3N0YXRlLnZhbHVlWzFdPVwiYWZ0ZXJcIj09PXRoaXMub3B0aW9ucy5zZWxlY3Rpb24/dGhpcy5vcHRpb25zLm1heDp0aGlzLm9wdGlvbnMubWluKSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlPXRoaXMub3B0aW9ucy5tYXg+dGhpcy5vcHRpb25zLm1pbj9bdGhpcy5fdG9QZXJjZW50YWdlKHRoaXMuX3N0YXRlLnZhbHVlWzBdKSx0aGlzLl90b1BlcmNlbnRhZ2UodGhpcy5fc3RhdGUudmFsdWVbMV0pLDEwMCp0aGlzLm9wdGlvbnMuc3RlcC8odGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKV06WzAsMCwxMDBdLHRoaXMuX2xheW91dCgpO3ZhciBmPXRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXTtyZXR1cm4gYj09PSEwJiZ0aGlzLl90cmlnZ2VyKFwic2xpZGVcIixmKSxkIT09ZiYmYz09PSEwJiZ0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIse29sZFZhbHVlOmQsbmV3VmFsdWU6Zn0pLHRoaXMuX3NldERhdGFWYWwoZiksdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZVNsaWRlckV2ZW50SGFuZGxlcnMoKSx0aGlzLnNsaWRlckVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fY2xlYW5VcEV2ZW50Q2FsbGJhY2tzTWFwKCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGFcIiksYSYmKHRoaXMuX3VuYmluZEpRdWVyeUV2ZW50SGFuZGxlcnMoKSx0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoXCJzbGlkZXJcIikpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITEsdGhpcy5oYW5kbGUxLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpLHRoaXMuaGFuZGxlMi5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItZGlzYWJsZWRcIiksdGhpcy5fdHJpZ2dlcihcInNsaWRlRGlzYWJsZWRcIiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITAsdGhpcy5oYW5kbGUxLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5oYW5kbGUyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWRpc2FibGVkXCIpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZUVuYWJsZWRcIiksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKSx0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZW5hYmxlZH0sb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyKGEsYiksdGhpc30sb2ZmOmZ1bmN0aW9uKGIsYyl7YT8odGhpcy4kZWxlbWVudC5vZmYoYixjKSx0aGlzLiRzbGlkZXJFbGVtLm9mZihiLGMpKTp0aGlzLl91bmJpbmROb25RdWVyeUV2ZW50SGFuZGxlcihiLGMpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5vcHRpb25zW2FdOnRoaXMub3B0aW9uc30sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3B0aW9uc1thXT1iLHRoaXN9LHJlZnJlc2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVycygpLGMuY2FsbCh0aGlzLHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMpLGEmJmEuZGF0YSh0aGlzLmVsZW1lbnQsXCJzbGlkZXJcIix0aGlzKSx0aGlzfSxyZWxheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXlvdXQoKSx0aGlzfSxfcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMUtleWRvd24sITEpLHRoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTJLZXlkb3duLCExKSx0aGlzLmhhbmRsZTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5oYW5kbGUyS2V5ZG93biwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oYW5kbGUyS2V5ZG93biwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5tb3VzZWRvd24sITEpLHRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5tb3VzZWRvd24sITEpfSxfYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09dGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV0mJih0aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXT1bXSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV0ucHVzaChiKX0sX3VuYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV07aWYodm9pZCAwIT09Yylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdPT09Yil7Yy5zcGxpY2UoZCwxKTticmVha319LF9jbGVhblVwRXZlbnRDYWxsYmFja3NNYXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5ldmVudFRvQ2FsbGJhY2tNYXApLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTt0aGlzLmV2ZW50VG9DYWxsYmFja01hcFtjXT1udWxsfX0sX3Nob3dUb29sdGlwOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnRvb2x0aXBfc3BsaXQ9PT0hMT8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaW5cIiksdGhpcy50b29sdGlwX21pbi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMudG9vbHRpcF9tYXguc3R5bGUuZGlzcGxheT1cIm5vbmVcIik6KHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJpblwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaW5cIiksdGhpcy50b29sdGlwLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuX3N0YXRlLm92ZXI9ITB9LF9oaWRlVG9vbHRpcDpmdW5jdGlvbigpe3RoaXMuX3N0YXRlLmluRHJhZz09PSExJiZ0aGlzLmFsd2F5c1Nob3dUb29sdGlwIT09ITAmJih0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXAsXCJpblwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaW5cIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImluXCIpKSx0aGlzLl9zdGF0ZS5vdmVyPSExfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE7aWYoYT10aGlzLm9wdGlvbnMucmV2ZXJzZWQ/WzEwMC10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLHRoaXMub3B0aW9ucy5yYW5nZT8xMDAtdGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXTp0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdXTpbdGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdXSx0aGlzLmhhbmRsZTEuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIix0aGlzLmhhbmRsZTIuc3R5bGVbdGhpcy5zdHlsZVBvc109YVsxXStcIiVcIixBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy50aWNrcykmJnRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg+MCl7dmFyIGI9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLGM9TWF0aC5taW4uYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLGQ9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiLGU9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP1wibWFyZ2luVG9wXCI6XCJtYXJnaW5MZWZ0XCIsZj10aGlzLl9zdGF0ZS5zaXplLyh0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoLTEpO2lmKHRoaXMudGlja0xhYmVsQ29udGFpbmVyKXt2YXIgZz0wO2lmKDA9PT10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aCl0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5zdHlsZVtlXT0tZi8yK1wicHhcIixnPXRoaXMudGlja0xhYmVsQ29udGFpbmVyLm9mZnNldEhlaWdodDtlbHNlIGZvcihoPTA7aDx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aDtoKyspdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1toXS5vZmZzZXRIZWlnaHQ+ZyYmKGc9dGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1toXS5vZmZzZXRIZWlnaHQpO1wiaG9yaXpvbnRhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYodGhpcy5zbGlkZXJFbGVtLnN0eWxlLm1hcmdpbkJvdHRvbT1nK1wicHhcIil9Zm9yKHZhciBoPTA7aDx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2grKyl7dmFyIGk9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXXx8MTAwKih0aGlzLm9wdGlvbnMudGlja3NbaF0tYykvKGItYyk7dGhpcy50aWNrc1toXS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1pK1wiJVwiLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudGlja3NbaF0sXCJpbi1zZWxlY3Rpb25cIiksdGhpcy5vcHRpb25zLnJhbmdlP2k+PWFbMF0mJmk8PWFbMV0mJnRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbaF0sXCJpbi1zZWxlY3Rpb25cIik6XCJhZnRlclwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmaT49YVswXT90aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2hdLFwiaW4tc2VsZWN0aW9uXCIpOlwiYmVmb3JlXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiZpPD1hWzBdJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2hdLFwiaW4tc2VsZWN0aW9uXCIpLHRoaXMudGlja0xhYmVsc1toXSYmKHRoaXMudGlja0xhYmVsc1toXS5zdHlsZVtkXT1mK1wicHhcIix2b2lkIDAhPT10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2hdJiYodGhpcy50aWNrTGFiZWxzW2hdLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLnRpY2tMYWJlbHNbaF0uc3R5bGVbdGhpcy5zdHlsZVBvc109dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXStcIiVcIix0aGlzLnRpY2tMYWJlbHNbaF0uc3R5bGVbZV09LWYvMitcInB4XCIpKX19dmFyIGo7aWYodGhpcy5vcHRpb25zLnJhbmdlKXtqPXRoaXMub3B0aW9ucy5mb3JtYXR0ZXIodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3NldFRleHQodGhpcy50b29sdGlwSW5uZXIsaiksdGhpcy50b29sdGlwLnN0eWxlW3RoaXMuc3R5bGVQb3NdPShhWzFdK2FbMF0pLzIrXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tdG9wXCIsLXRoaXMudG9vbHRpcC5vZmZzZXRIZWlnaHQvMitcInB4XCIpOnRoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGgvMitcInB4XCIpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj90aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0LzIrXCJweFwiKTp0aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLWxlZnRcIiwtdGhpcy50b29sdGlwLm9mZnNldFdpZHRoLzIrXCJweFwiKTt2YXIgaz10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzBdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21pbixrKTt2YXIgbD10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzFdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21heCxsKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMF0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWluLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9taW4sXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldFdpZHRoLzIrXCJweFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMV0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWF4LFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9tYXgsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldFdpZHRoLzIrXCJweFwiKX1lbHNlIGo9dGhpcy5vcHRpb25zLmZvcm1hdHRlcih0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fc2V0VGV4dCh0aGlzLnRvb2x0aXBJbm5lcixqKSx0aGlzLnRvb2x0aXAuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIixcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi10b3BcIiwtdGhpcy50b29sdGlwLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi1sZWZ0XCIsLXRoaXMudG9vbHRpcC5vZmZzZXRXaWR0aC8yK1wicHhcIik7aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXRoaXMudHJhY2tMb3cuc3R5bGUudG9wPVwiMFwiLHRoaXMudHJhY2tMb3cuc3R5bGUuaGVpZ2h0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS50b3A9TWF0aC5taW4oYVswXSxhWzFdKStcIiVcIix0aGlzLnRyYWNrU2VsZWN0aW9uLnN0eWxlLmhlaWdodD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLmJvdHRvbT1cIjBcIix0aGlzLnRyYWNrSGlnaC5zdHlsZS5oZWlnaHQ9MTAwLU1hdGgubWluKGFbMF0sYVsxXSktTWF0aC5hYnMoYVswXS1hWzFdKStcIiVcIjtlbHNle3RoaXMudHJhY2tMb3cuc3R5bGUubGVmdD1cIjBcIix0aGlzLnRyYWNrTG93LnN0eWxlLndpZHRoPU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS5sZWZ0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS53aWR0aD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLnJpZ2h0PVwiMFwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLndpZHRoPTEwMC1NYXRoLm1pbihhWzBdLGFbMV0pLU1hdGguYWJzKGFbMF0tYVsxXSkrXCIlXCI7dmFyIG09dGhpcy50b29sdGlwX21pbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXRoaXMudG9vbHRpcF9tYXguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bS5yaWdodD5uLmxlZnQ/KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD1cIjE4cHhcIik6KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJib3R0b21cIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcInRvcFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD10aGlzLnRvb2x0aXBfbWluLnN0eWxlLnRvcCl9fSxfcmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXthLnN0eWxlLnJlbW92ZVByb3BlcnR5P2Euc3R5bGUucmVtb3ZlUHJvcGVydHkoYik6YS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoYil9LF9tb3VzZWRvd246ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc107dmFyIGI9dGhpcy5fZ2V0UGVyY2VudGFnZShhKTtpZih0aGlzLm9wdGlvbnMucmFuZ2Upe3ZhciBjPU1hdGguYWJzKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0tYiksZD1NYXRoLmFicyh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdLWIpO3RoaXMuX3N0YXRlLmRyYWdnZWQ9ZD5jPzA6MX1lbHNlIHRoaXMuX3N0YXRlLmRyYWdnZWQ9MDt0aGlzLl9zdGF0ZS5wZXJjZW50YWdlW3RoaXMuX3N0YXRlLmRyYWdnZWRdPWIsdGhpcy5fbGF5b3V0KCksdGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLHRoaXMubW91c2Vtb3ZlJiZkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLHRoaXMubW91c2V1cCYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMubW91c2Vtb3ZlPXRoaXMuX21vdXNlbW92ZS5iaW5kKHRoaXMpLHRoaXMubW91c2V1cD10aGlzLl9tb3VzZXVwLmJpbmQodGhpcyksdGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMuX3N0YXRlLmluRHJhZz0hMDt2YXIgZT10aGlzLl9jYWxjdWxhdGVWYWx1ZSgpO3JldHVybiB0aGlzLl90cmlnZ2VyKFwic2xpZGVTdGFydFwiLGUpLHRoaXMuX3NldERhdGFWYWwoZSksdGhpcy5zZXRWYWx1ZShlLCExLCEwKSx0aGlzLl9wYXVzZUV2ZW50KGEpLHRoaXMub3B0aW9ucy5mb2N1cyYmdGhpcy5fdHJpZ2dlckZvY3VzT25IYW5kbGUodGhpcy5fc3RhdGUuZHJhZ2dlZCksITB9LF90cmlnZ2VyRm9jdXNPbkhhbmRsZTpmdW5jdGlvbihhKXswPT09YSYmdGhpcy5oYW5kbGUxLmZvY3VzKCksMT09PWEmJnRoaXMuaGFuZGxlMi5mb2N1cygpfSxfa2V5ZG93bjpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLl9zdGF0ZS5lbmFibGVkKXJldHVybiExO3ZhciBjO3N3aXRjaChiLmtleUNvZGUpe2Nhc2UgMzc6Y2FzZSA0MDpjPS0xO2JyZWFrO2Nhc2UgMzk6Y2FzZSAzODpjPTF9aWYoYyl7aWYodGhpcy5vcHRpb25zLm5hdHVyYWxfYXJyb3dfa2V5cyl7dmFyIGQ9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYhdGhpcy5vcHRpb25zLnJldmVyc2VkLGU9XCJob3Jpem9udGFsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJnRoaXMub3B0aW9ucy5yZXZlcnNlZDsoZHx8ZSkmJihjPS1jKX12YXIgZj10aGlzLl9zdGF0ZS52YWx1ZVthXStjKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UmJihmPVthP3RoaXMuX3N0YXRlLnZhbHVlWzBdOmYsYT9mOnRoaXMuX3N0YXRlLnZhbHVlWzFdXSksdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RhcnRcIixmKSx0aGlzLl9zZXREYXRhVmFsKGYpLHRoaXMuc2V0VmFsdWUoZiwhMCwhMCksdGhpcy5fc2V0RGF0YVZhbChmKSx0aGlzLl90cmlnZ2VyKFwic2xpZGVTdG9wXCIsZiksdGhpcy5fbGF5b3V0KCksdGhpcy5fcGF1c2VFdmVudChiKSwhMX19LF9wYXVzZUV2ZW50OmZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKSxhLmNhbmNlbEJ1YmJsZT0hMCxhLnJldHVyblZhbHVlPSExfSxfbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9zdGF0ZS5lbmFibGVkKXJldHVybiExO3ZhciBiPXRoaXMuX2dldFBlcmNlbnRhZ2UoYSk7dGhpcy5fYWRqdXN0UGVyY2VudGFnZUZvclJhbmdlU2xpZGVycyhiKSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlW3RoaXMuX3N0YXRlLmRyYWdnZWRdPWIsdGhpcy5fbGF5b3V0KCk7dmFyIGM9dGhpcy5fY2FsY3VsYXRlVmFsdWUoITApO3JldHVybiB0aGlzLnNldFZhbHVlKGMsITAsITApLCExfSxfYWRqdXN0UGVyY2VudGFnZUZvclJhbmdlU2xpZGVyczpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMucmFuZ2Upe3ZhciBiPXRoaXMuX2dldE51bURpZ2l0c0FmdGVyRGVjaW1hbFBsYWNlKGEpO2I9Yj9iLTE6MDt2YXIgYz10aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KGEsYik7MD09PXRoaXMuX3N0YXRlLmRyYWdnZWQmJnRoaXMuX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQodGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSxiKTxjPyh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdPXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0sdGhpcy5fc3RhdGUuZHJhZ2dlZD0xKToxPT09dGhpcy5fc3RhdGUuZHJhZ2dlZCYmdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdCh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLGIpPmMmJih0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdPXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sdGhpcy5fc3RhdGUuZHJhZ2dlZD0wKX19LF9tb3VzZXVwOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMuX3N0YXRlLmluRHJhZz0hMSx0aGlzLl9zdGF0ZS5vdmVyPT09ITEmJnRoaXMuX2hpZGVUb29sdGlwKCk7dmFyIGE9dGhpcy5fY2FsY3VsYXRlVmFsdWUoITApO3JldHVybiB0aGlzLl9sYXlvdXQoKSx0aGlzLl9zZXREYXRhVmFsKGEpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZVN0b3BcIixhKSwhMX0sX2NhbGN1bGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKHRoaXMub3B0aW9ucy5yYW5nZT8oYj1bdGhpcy5vcHRpb25zLm1pbix0aGlzLm9wdGlvbnMubWF4XSwwIT09dGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSYmKGJbMF09dGhpcy5fdG9WYWx1ZSh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdKSxiWzBdPXRoaXMuX2FwcGx5UHJlY2lzaW9uKGJbMF0pKSwxMDAhPT10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdJiYoYlsxXT10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0pLGJbMV09dGhpcy5fYXBwbHlQcmVjaXNpb24oYlsxXSkpKTooYj10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0pLGI9cGFyc2VGbG9hdChiKSxiPXRoaXMuX2FwcGx5UHJlY2lzaW9uKGIpKSxhKXtmb3IodmFyIGM9W2IsMS8wXSxkPTA7ZDx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2QrKyl7dmFyIGU9TWF0aC5hYnModGhpcy5vcHRpb25zLnRpY2tzW2RdLWIpO2U8PWNbMV0mJihjPVt0aGlzLm9wdGlvbnMudGlja3NbZF0sZV0pfWlmKGNbMV08PXRoaXMub3B0aW9ucy50aWNrc19zbmFwX2JvdW5kcylyZXR1cm4gY1swXX1yZXR1cm4gYn0sX2FwcGx5UHJlY2lzaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucy5wcmVjaXNpb258fHRoaXMuX2dldE51bURpZ2l0c0FmdGVyRGVjaW1hbFBsYWNlKHRoaXMub3B0aW9ucy5zdGVwKTtyZXR1cm4gdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdChhLGIpfSxfZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2U6ZnVuY3Rpb24oYSl7dmFyIGI9KFwiXCIrYSkubWF0Y2goLyg/OlxcLihcXGQrKSk/KD86W2VFXShbKy1dP1xcZCspKT8kLyk7cmV0dXJuIGI/TWF0aC5tYXgoMCwoYlsxXT9iWzFdLmxlbmd0aDowKS0oYlsyXT8rYlsyXTowKSk6MH0sX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvRml4ZWQoYik7cmV0dXJuIHBhcnNlRmxvYXQoYyl9LF9nZXRQZXJjZW50YWdlOmZ1bmN0aW9uKGEpeyF0aGlzLnRvdWNoQ2FwYWJsZXx8XCJ0b3VjaHN0YXJ0XCIhPT1hLnR5cGUmJlwidG91Y2htb3ZlXCIhPT1hLnR5cGV8fChhPWEudG91Y2hlc1swXSk7dmFyIGI9YVt0aGlzLm1vdXNlUG9zXSxjPXRoaXMuX3N0YXRlLm9mZnNldFt0aGlzLnN0eWxlUG9zXSxkPWItYyxlPWQvdGhpcy5fc3RhdGUuc2l6ZSoxMDA7cmV0dXJuIGU9TWF0aC5yb3VuZChlL3RoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMl0pKnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMl0sdGhpcy5vcHRpb25zLnJldmVyc2VkJiYoZT0xMDAtZSksTWF0aC5tYXgoMCxNYXRoLm1pbigxMDAsZSkpfSxfdmFsaWRhdGVJbnB1dFZhbHVlOmZ1bmN0aW9uKGEpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhKXJldHVybiBhO2lmKEFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIHRoaXMuX3ZhbGlkYXRlQXJyYXkoYSksYTt0aHJvdyBuZXcgRXJyb3IoZC5mb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZyhhKSl9LF92YWxpZGF0ZUFycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBjKXRocm93IG5ldyBFcnJvcihkLmZvcm1hdEludmFsaWRJbnB1dEVycm9yTXNnKGMpKX19LF9zZXREYXRhVmFsOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIsYSksdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsYSksdGhpcy5lbGVtZW50LnZhbHVlPWF9LF90cmlnZ2VyOmZ1bmN0aW9uKGIsYyl7Yz1jfHwwPT09Yz9jOnZvaWQgMDt2YXIgZD10aGlzLmV2ZW50VG9DYWxsYmFja01hcFtiXTtpZihkJiZkLmxlbmd0aClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmKGMpfWEmJnRoaXMuX3RyaWdnZXJKUXVlcnlFdmVudChiLGMpfSxfdHJpZ2dlckpRdWVyeUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6YSx2YWx1ZTpifTt0aGlzLiRlbGVtZW50LnRyaWdnZXIoYyksdGhpcy4kc2xpZGVyRWxlbS50cmlnZ2VyKGMpfSxfdW5iaW5kSlF1ZXJ5RXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub2ZmKCksdGhpcy4kc2xpZGVyRWxlbS5vZmYoKX0sX3NldFRleHQ6ZnVuY3Rpb24oYSxiKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbm5lclRleHQ/YS5pbm5lclRleHQ9YjpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS50ZXh0Q29udGVudCYmKGEudGV4dENvbnRlbnQ9Yil9LF9yZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1iLnNwbGl0KFwiIFwiKSxkPWEuY2xhc3NOYW1lLGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXSxnPW5ldyBSZWdFeHAoXCIoPzpcXFxcc3xeKVwiK2YrXCIoPzpcXFxcc3wkKVwiKTtkPWQucmVwbGFjZShnLFwiIFwiKX1hLmNsYXNzTmFtZT1kLnRyaW0oKX0sX2FkZENsYXNzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuc3BsaXQoXCIgXCIpLGQ9YS5jbGFzc05hbWUsZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdLGc9bmV3IFJlZ0V4cChcIig/OlxcXFxzfF4pXCIrZitcIig/OlxcXFxzfCQpXCIpLGg9Zy50ZXN0KGQpO2h8fChkKz1cIiBcIitmKX1hLmNsYXNzTmFtZT1kLnRyaW0oKX0sX29mZnNldExlZnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0sX29mZnNldFRvcDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5vZmZzZXRUb3A7KGE9YS5vZmZzZXRQYXJlbnQpJiYhaXNOYU4oYS5vZmZzZXRUb3ApOyliKz1hLm9mZnNldFRvcDtyZXR1cm4gYn0sX29mZnNldDpmdW5jdGlvbihhKXtyZXR1cm57bGVmdDp0aGlzLl9vZmZzZXRMZWZ0KGEpLHRvcDp0aGlzLl9vZmZzZXRUb3AoYSl9fSxfY3NzOmZ1bmN0aW9uKGIsYyxkKXtpZihhKWEuc3R5bGUoYixjLGQpO2Vsc2V7dmFyIGU9Yy5yZXBsYWNlKC9eLW1zLS8sXCJtcy1cIikucmVwbGFjZSgvLShbXFxkYS16XSkvZ2ksZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfSk7Yi5zdHlsZVtlXT1kfX0sX3RvVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5zY2FsZS50b1ZhbHVlLmFwcGx5KHRoaXMsW2FdKX0sX3RvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNjYWxlLnRvUGVyY2VudGFnZS5hcHBseSh0aGlzLFthXSl9LF9zZXRUb29sdGlwUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bdGhpcy50b29sdGlwLHRoaXMudG9vbHRpcF9taW4sdGhpcy50b29sdGlwX21heF07aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXt2YXIgYj10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbnx8XCJyaWdodFwiLGM9XCJsZWZ0XCI9PT1iP1wicmlnaHRcIjpcImxlZnRcIjthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fYWRkQ2xhc3MoYSxiKSxhLnN0eWxlW2NdPVwiMTAwJVwifS5iaW5kKHRoaXMpKX1lbHNlIGEuZm9yRWFjaChcImJvdHRvbVwiPT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24/ZnVuY3Rpb24oYSl7dGhpcy5fYWRkQ2xhc3MoYSxcImJvdHRvbVwiKSxhLnN0eWxlLnRvcD1cIjIycHhcIn0uYmluZCh0aGlzKTpmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLFwidG9wXCIpLGEuc3R5bGUudG9wPS10aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQtMTQrXCJweFwifS5iaW5kKHRoaXMpKX19LGEpe3ZhciBmPWEuZm4uc2xpZGVyP1wiYm9vdHN0cmFwU2xpZGVyXCI6XCJzbGlkZXJcIjthLmJyaWRnZXQoZixiKX19KGEpLGJ9KTsiLCIvKiEgXG4gKiBqUXVlcnkgU3RlcHMgdjEuMS4wIC0gMDkvMDQvMjAxNFxuICogQ29weXJpZ2h0IChjKSAyMDE0IFJhZmFlbCBTdGFpYiAoaHR0cDovL3d3dy5qcXVlcnktc3RlcHMuY29tKVxuICogTGljZW5zZWQgdW5kZXIgTUlUIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbiFmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXtvKGEpLnB1c2goYil9ZnVuY3Rpb24gZChkLGUsZil7dmFyIGc9ZC5jaGlsZHJlbihlLmhlYWRlclRhZyksaD1kLmNoaWxkcmVuKGUuYm9keVRhZyk7Zy5sZW5ndGg+aC5sZW5ndGg/UihaLFwiY29udGVudHNcIik6Zy5sZW5ndGg8aC5sZW5ndGgmJlIoWixcInRpdGxlc1wiKTt2YXIgaT1lLnN0YXJ0SW5kZXg7aWYoZi5zdGVwQ291bnQ9Zy5sZW5ndGgsZS5zYXZlU3RhdGUmJmEuY29va2llKXt2YXIgaj1hLmNvb2tpZShVK3EoZCkpLGs9cGFyc2VJbnQoaiwwKTshaXNOYU4oaykmJms8Zi5zdGVwQ291bnQmJihpPWspfWYuY3VycmVudEluZGV4PWksZy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEodGhpcyksZz1oLmVxKGUpLGk9Zy5kYXRhKFwibW9kZVwiKSxqPW51bGw9PWk/JC5odG1sOnIoJCwvXlxccyokLy50ZXN0KGkpfHxpc05hTihpKT9pOnBhcnNlSW50KGksMCkpLGs9aj09PSQuaHRtbHx8Zy5kYXRhKFwidXJsXCIpPT09Yj9cIlwiOmcuZGF0YShcInVybFwiKSxsPWohPT0kLmh0bWwmJlwiMVwiPT09Zy5kYXRhKFwibG9hZGVkXCIpLG09YS5leHRlbmQoe30sYmIse3RpdGxlOmYuaHRtbCgpLGNvbnRlbnQ6aj09PSQuaHRtbD9nLmh0bWwoKTpcIlwiLGNvbnRlbnRVcmw6ayxjb250ZW50TW9kZTpqLGNvbnRlbnRMb2FkZWQ6bH0pO2MoZCxtKX0pfWZ1bmN0aW9uIGUoYSl7YS50cmlnZ2VySGFuZGxlcihcImNhbmNlbGVkXCIpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYS5jdXJyZW50SW5kZXgtYn1mdW5jdGlvbiBnKGIsYyl7dmFyIGQ9aShiKTtiLnVuYmluZChkKS5yZW1vdmVEYXRhKFwidWlkXCIpLnJlbW92ZURhdGEoXCJvcHRpb25zXCIpLnJlbW92ZURhdGEoXCJzdGF0ZVwiKS5yZW1vdmVEYXRhKFwic3RlcHNcIikucmVtb3ZlRGF0YShcImV2ZW50TmFtZXNwYWNlXCIpLmZpbmQoXCIuYWN0aW9ucyBhXCIpLnVuYmluZChkKSxiLnJlbW92ZUNsYXNzKGMuY2xlYXJGaXhDc3NDbGFzcytcIiB2ZXJ0aWNhbFwiKTt2YXIgZT1iLmZpbmQoXCIuY29udGVudCA+ICpcIik7ZS5yZW1vdmVEYXRhKFwibG9hZGVkXCIpLnJlbW92ZURhdGEoXCJtb2RlXCIpLnJlbW92ZURhdGEoXCJ1cmxcIiksZS5yZW1vdmVBdHRyKFwiaWRcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpLnJlbW92ZUF0dHIoXCJjbGFzc1wiKS5yZW1vdmVBdHRyKFwic3R5bGVcIikuX3JlbW92ZUFyaWEoXCJsYWJlbGxlZGJ5XCIpLl9yZW1vdmVBcmlhKFwiaGlkZGVuXCIpLGIuZmluZChcIi5jb250ZW50ID4gW2RhdGEtbW9kZT0nYXN5bmMnXSwuY29udGVudCA+IFtkYXRhLW1vZGU9J2lmcmFtZSddXCIpLmVtcHR5KCk7dmFyIGY9YSgnPHswfSBjbGFzcz1cInsxfVwiPjwvezB9PicuZm9ybWF0KGIuZ2V0KDApLnRhZ05hbWUsYi5hdHRyKFwiY2xhc3NcIikpKSxnPWIuX2lkKCk7cmV0dXJuIG51bGwhPWcmJlwiXCIhPT1nJiZmLl9pZChnKSxmLmh0bWwoYi5maW5kKFwiLmNvbnRlbnRcIikuaHRtbCgpKSxiLmFmdGVyKGYpLGIucmVtb3ZlKCksZn1mdW5jdGlvbiBoKGEsYil7dmFyIGM9YS5maW5kKFwiLnN0ZXBzIGxpXCIpLmVxKGIuY3VycmVudEluZGV4KTthLnRyaWdnZXJIYW5kbGVyKFwiZmluaXNoaW5nXCIsW2IuY3VycmVudEluZGV4XSk/KGMuYWRkQ2xhc3MoXCJkb25lXCIpLnJlbW92ZUNsYXNzKFwiZXJyb3JcIiksYS50cmlnZ2VySGFuZGxlcihcImZpbmlzaGVkXCIsW2IuY3VycmVudEluZGV4XSkpOmMuYWRkQ2xhc3MoXCJlcnJvclwiKX1mdW5jdGlvbiBpKGEpe3ZhciBiPWEuZGF0YShcImV2ZW50TmFtZXNwYWNlXCIpO3JldHVybiBudWxsPT1iJiYoYj1cIi5cIitxKGEpLGEuZGF0YShcImV2ZW50TmFtZXNwYWNlXCIsYikpLGJ9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXEoYSk7cmV0dXJuIGEuZmluZChcIiNcIitjK1YrYil9ZnVuY3Rpb24gayhhLGIpe3ZhciBjPXEoYSk7cmV0dXJuIGEuZmluZChcIiNcIitjK1crYil9ZnVuY3Rpb24gbChhLGIpe3ZhciBjPXEoYSk7cmV0dXJuIGEuZmluZChcIiNcIitjK1grYil9ZnVuY3Rpb24gbShhKXtyZXR1cm4gYS5kYXRhKFwib3B0aW9uc1wiKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhLmRhdGEoXCJzdGF0ZVwiKX1mdW5jdGlvbiBvKGEpe3JldHVybiBhLmRhdGEoXCJzdGVwc1wiKX1mdW5jdGlvbiBwKGEsYil7dmFyIGM9byhhKTtyZXR1cm4oMD5ifHxiPj1jLmxlbmd0aCkmJlIoWSksY1tiXX1mdW5jdGlvbiBxKGEpe3ZhciBiPWEuZGF0YShcInVpZFwiKTtyZXR1cm4gbnVsbD09YiYmKGI9YS5faWQoKSxudWxsPT1iJiYoYj1cInN0ZXBzLXVpZC1cIi5jb25jYXQoVCksYS5faWQoYikpLFQrKyxhLmRhdGEoXCJ1aWRcIixiKSksYn1mdW5jdGlvbiByKGEsYyl7aWYoUyhcImVudW1UeXBlXCIsYSksUyhcImtleU9yVmFsdWVcIixjKSxcInN0cmluZ1wiPT10eXBlb2YgYyl7dmFyIGQ9YVtjXTtyZXR1cm4gZD09PWImJlIoXCJUaGUgZW51bSBrZXkgJ3swfScgZG9lcyBub3QgZXhpc3QuXCIsYyksZH1pZihcIm51bWJlclwiPT10eXBlb2YgYyl7Zm9yKHZhciBlIGluIGEpaWYoYVtlXT09PWMpcmV0dXJuIGM7UihcIkludmFsaWQgZW51bSB2YWx1ZSAnezB9Jy5cIixjKX1lbHNlIFIoXCJJbnZhbGlkIGtleSBvciB2YWx1ZSB0eXBlLlwiKX1mdW5jdGlvbiBzKGEsYixjKXtyZXR1cm4gQihhLGIsYyx2KGMsMSkpfWZ1bmN0aW9uIHQoYSxiLGMpe3JldHVybiBCKGEsYixjLGYoYywxKSl9ZnVuY3Rpb24gdShhLGIsYyxkKXtpZigoMD5kfHxkPj1jLnN0ZXBDb3VudCkmJlIoWSksIShiLmZvcmNlTW92ZUZvcndhcmQmJmQ8Yy5jdXJyZW50SW5kZXgpKXt2YXIgZT1jLmN1cnJlbnRJbmRleDtyZXR1cm4gYS50cmlnZ2VySGFuZGxlcihcInN0ZXBDaGFuZ2luZ1wiLFtjLmN1cnJlbnRJbmRleCxkXSk/KGMuY3VycmVudEluZGV4PWQsTyhhLGIsYyksRShhLGIsYyxlKSxEKGEsYixjKSxBKGEsYixjKSxQKGEsYixjLGQsZSxmdW5jdGlvbigpe2EudHJpZ2dlckhhbmRsZXIoXCJzdGVwQ2hhbmdlZFwiLFtkLGVdKX0pKTphLmZpbmQoXCIuc3RlcHMgbGlcIikuZXEoZSkuYWRkQ2xhc3MoXCJlcnJvclwiKSwhMH19ZnVuY3Rpb24gdihhLGIpe3JldHVybiBhLmN1cnJlbnRJbmRleCtifWZ1bmN0aW9uIHcoYil7dmFyIGM9YS5leHRlbmQoITAse30sY2IsYik7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyksZT17Y3VycmVudEluZGV4OmMuc3RhcnRJbmRleCxjdXJyZW50U3RlcDpudWxsLHN0ZXBDb3VudDowLHRyYW5zaXRpb25FbGVtZW50Om51bGx9O2IuZGF0YShcIm9wdGlvbnNcIixjKSxiLmRhdGEoXCJzdGF0ZVwiLGUpLGIuZGF0YShcInN0ZXBzXCIsW10pLGQoYixjLGUpLEooYixjLGUpLEcoYixjKSxjLmF1dG9Gb2N1cyYmMD09PVQmJmooYixjLnN0YXJ0SW5kZXgpLmZvY3VzKCksYi50cmlnZ2VySGFuZGxlcihcImluaXRcIixbYy5zdGFydEluZGV4XSl9KX1mdW5jdGlvbiB4KGIsYyxkLGUsZil7KDA+ZXx8ZT5kLnN0ZXBDb3VudCkmJlIoWSksZj1hLmV4dGVuZCh7fSxiYixmKSx5KGIsZSxmKSxkLmN1cnJlbnRJbmRleCE9PWQuc3RlcENvdW50JiZkLmN1cnJlbnRJbmRleD49ZSYmKGQuY3VycmVudEluZGV4KyssTyhiLGMsZCkpLGQuc3RlcENvdW50Kys7dmFyIGc9Yi5maW5kKFwiLmNvbnRlbnRcIiksaD1hKFwiPHswfT57MX08L3swfT5cIi5mb3JtYXQoYy5oZWFkZXJUYWcsZi50aXRsZSkpLGk9YShcIjx7MH0+PC97MH0+XCIuZm9ybWF0KGMuYm9keVRhZykpO3JldHVybihudWxsPT1mLmNvbnRlbnRNb2RlfHxmLmNvbnRlbnRNb2RlPT09JC5odG1sKSYmaS5odG1sKGYuY29udGVudCksMD09PWU/Zy5wcmVwZW5kKGkpLnByZXBlbmQoaCk6ayhiLGUtMSkuYWZ0ZXIoaSkuYWZ0ZXIoaCksSyhiLGQsaSxlKSxOKGIsYyxkLGgsZSksRihiLGMsZCxlKSxlPT09ZC5jdXJyZW50SW5kZXgmJkUoYixjLGQpLEQoYixjLGQpLGJ9ZnVuY3Rpb24geShhLGIsYyl7byhhKS5zcGxpY2UoYiwwLGMpfWZ1bmN0aW9uIHooYil7dmFyIGM9YSh0aGlzKSxkPW0oYyksZT1uKGMpO2lmKGQuc3VwcHJlc3NQYWdpbmF0aW9uT25Gb2N1cyYmYy5maW5kKFwiOmZvY3VzXCIpLmlzKFwiOmlucHV0XCIpKXJldHVybiBiLnByZXZlbnREZWZhdWx0KCksITE7dmFyIGY9e2xlZnQ6MzcscmlnaHQ6Mzl9O2Iua2V5Q29kZT09PWYubGVmdD8oYi5wcmV2ZW50RGVmYXVsdCgpLHQoYyxkLGUpKTpiLmtleUNvZGU9PT1mLnJpZ2h0JiYoYi5wcmV2ZW50RGVmYXVsdCgpLHMoYyxkLGUpKX1mdW5jdGlvbiBBKGIsYyxkKXtpZihkLnN0ZXBDb3VudD4wKXt2YXIgZT1kLmN1cnJlbnRJbmRleCxmPXAoYixlKTtpZighYy5lbmFibGVDb250ZW50Q2FjaGV8fCFmLmNvbnRlbnRMb2FkZWQpc3dpdGNoKHIoJCxmLmNvbnRlbnRNb2RlKSl7Y2FzZSAkLmlmcmFtZTpiLmZpbmQoXCIuY29udGVudCA+IC5ib2R5XCIpLmVxKGQuY3VycmVudEluZGV4KS5lbXB0eSgpLmh0bWwoJzxpZnJhbWUgc3JjPVwiJytmLmNvbnRlbnRVcmwrJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIHNjcm9sbGluZz1cIm5vXCIgLz4nKS5kYXRhKFwibG9hZGVkXCIsXCIxXCIpO2JyZWFrO2Nhc2UgJC5hc3luYzp2YXIgZz1rKGIsZSkuX2FyaWEoXCJidXN5XCIsXCJ0cnVlXCIpLmVtcHR5KCkuYXBwZW5kKE0oYy5sb2FkaW5nVGVtcGxhdGUse3RleHQ6Yy5sYWJlbHMubG9hZGluZ30pKTthLmFqYXgoe3VybDpmLmNvbnRlbnRVcmwsY2FjaGU6ITF9KS5kb25lKGZ1bmN0aW9uKGEpe2cuZW1wdHkoKS5odG1sKGEpLl9hcmlhKFwiYnVzeVwiLFwiZmFsc2VcIikuZGF0YShcImxvYWRlZFwiLFwiMVwiKSxiLnRyaWdnZXJIYW5kbGVyKFwiY29udGVudExvYWRlZFwiLFtlXSl9KX19fWZ1bmN0aW9uIEIoYSxiLGMsZCl7dmFyIGU9Yy5jdXJyZW50SW5kZXg7aWYoZD49MCYmZDxjLnN0ZXBDb3VudCYmIShiLmZvcmNlTW92ZUZvcndhcmQmJmQ8Yy5jdXJyZW50SW5kZXgpKXt2YXIgZj1qKGEsZCksZz1mLnBhcmVudCgpLGg9Zy5oYXNDbGFzcyhcImRpc2FibGVkXCIpO3JldHVybiBnLl9lbmFibGVBcmlhKCksZi5jbGljaygpLGU9PT1jLmN1cnJlbnRJbmRleCYmaD8oZy5fZW5hYmxlQXJpYSghMSksITEpOiEwfXJldHVybiExfWZ1bmN0aW9uIEMoYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPWEodGhpcyksZD1jLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLGY9bShkKSxnPW4oZCksaT1jLmF0dHIoXCJocmVmXCIpO3N3aXRjaChpLnN1YnN0cmluZyhpLmxhc3RJbmRleE9mKFwiI1wiKSsxKSl7Y2FzZVwiY2FuY2VsXCI6ZShkKTticmVhaztjYXNlXCJmaW5pc2hcIjpoKGQsZyk7YnJlYWs7Y2FzZVwibmV4dFwiOnMoZCxmLGcpO2JyZWFrO2Nhc2VcInByZXZpb3VzXCI6dChkLGYsZyl9fWZ1bmN0aW9uIEQoYSxiLGMpe2lmKGIuZW5hYmxlUGFnaW5hdGlvbil7dmFyIGQ9YS5maW5kKFwiLmFjdGlvbnMgYVtocmVmJD0nI2ZpbmlzaCddXCIpLnBhcmVudCgpLGU9YS5maW5kKFwiLmFjdGlvbnMgYVtocmVmJD0nI25leHQnXVwiKS5wYXJlbnQoKTtpZighYi5mb3JjZU1vdmVGb3J3YXJkKXt2YXIgZj1hLmZpbmQoXCIuYWN0aW9ucyBhW2hyZWYkPScjcHJldmlvdXMnXVwiKS5wYXJlbnQoKTtmLl9lbmFibGVBcmlhKGMuY3VycmVudEluZGV4PjApfWIuZW5hYmxlRmluaXNoQnV0dG9uJiZiLnNob3dGaW5pc2hCdXR0b25BbHdheXM/KGQuX2VuYWJsZUFyaWEoYy5zdGVwQ291bnQ+MCksZS5fZW5hYmxlQXJpYShjLnN0ZXBDb3VudD4xJiZjLnN0ZXBDb3VudD5jLmN1cnJlbnRJbmRleCsxKSk6KGQuX3Nob3dBcmlhKGIuZW5hYmxlRmluaXNoQnV0dG9uJiZjLnN0ZXBDb3VudD09PWMuY3VycmVudEluZGV4KzEpLGUuX3Nob3dBcmlhKDA9PT1jLnN0ZXBDb3VudHx8Yy5zdGVwQ291bnQ+Yy5jdXJyZW50SW5kZXgrMSkuX2VuYWJsZUFyaWEoYy5zdGVwQ291bnQ+Yy5jdXJyZW50SW5kZXgrMXx8IWIuZW5hYmxlRmluaXNoQnV0dG9uKSl9fWZ1bmN0aW9uIEUoYixjLGQsZSl7dmFyIGY9aihiLGQuY3VycmVudEluZGV4KSxnPWEoJzxzcGFuIGNsYXNzPVwiY3VycmVudC1pbmZvIGF1ZGlibGVcIj4nK2MubGFiZWxzLmN1cnJlbnQrXCIgPC9zcGFuPlwiKSxoPWIuZmluZChcIi5jb250ZW50ID4gLnRpdGxlXCIpO2lmKG51bGwhPWUpe3ZhciBpPWooYixlKTtpLnBhcmVudCgpLmFkZENsYXNzKFwiZG9uZVwiKS5yZW1vdmVDbGFzcyhcImVycm9yXCIpLl9zZWxlY3RBcmlhKCExKSxoLmVxKGUpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKS5uZXh0KFwiLmJvZHlcIikucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpLGc9aS5maW5kKFwiLmN1cnJlbnQtaW5mb1wiKSxmLmZvY3VzKCl9Zi5wcmVwZW5kKGcpLnBhcmVudCgpLl9zZWxlY3RBcmlhKCkucmVtb3ZlQ2xhc3MoXCJkb25lXCIpLl9lbmFibGVBcmlhKCksaC5lcShkLmN1cnJlbnRJbmRleCkuYWRkQ2xhc3MoXCJjdXJyZW50XCIpLm5leHQoXCIuYm9keVwiKS5hZGRDbGFzcyhcImN1cnJlbnRcIil9ZnVuY3Rpb24gRihhLGIsYyxkKXtmb3IodmFyIGU9cShhKSxmPWQ7ZjxjLnN0ZXBDb3VudDtmKyspe3ZhciBnPWUrVitmLGg9ZStXK2YsaT1lK1grZixqPWEuZmluZChcIi50aXRsZVwiKS5lcShmKS5faWQoaSk7YS5maW5kKFwiLnN0ZXBzIGFcIikuZXEoZikuX2lkKGcpLl9hcmlhKFwiY29udHJvbHNcIixoKS5hdHRyKFwiaHJlZlwiLFwiI1wiK2kpLmh0bWwoTShiLnRpdGxlVGVtcGxhdGUse2luZGV4OmYrMSx0aXRsZTpqLmh0bWwoKX0pKSxhLmZpbmQoXCIuYm9keVwiKS5lcShmKS5faWQoaCkuX2FyaWEoXCJsYWJlbGxlZGJ5XCIsaSl9fWZ1bmN0aW9uIEcoYSxiKXt2YXIgYz1pKGEpO2EuYmluZChcImNhbmNlbGVkXCIrYyxiLm9uQ2FuY2VsZWQpLGEuYmluZChcImNvbnRlbnRMb2FkZWRcIitjLGIub25Db250ZW50TG9hZGVkKSxhLmJpbmQoXCJmaW5pc2hpbmdcIitjLGIub25GaW5pc2hpbmcpLGEuYmluZChcImZpbmlzaGVkXCIrYyxiLm9uRmluaXNoZWQpLGEuYmluZChcImluaXRcIitjLGIub25Jbml0KSxhLmJpbmQoXCJzdGVwQ2hhbmdpbmdcIitjLGIub25TdGVwQ2hhbmdpbmcpLGEuYmluZChcInN0ZXBDaGFuZ2VkXCIrYyxiLm9uU3RlcENoYW5nZWQpLGIuZW5hYmxlS2V5TmF2aWdhdGlvbiYmYS5iaW5kKFwia2V5dXBcIitjLHopLGEuZmluZChcIi5hY3Rpb25zIGFcIikuYmluZChcImNsaWNrXCIrYyxDKX1mdW5jdGlvbiBIKGEsYixjLGQpe3JldHVybiAwPmR8fGQ+PWMuc3RlcENvdW50fHxjLmN1cnJlbnRJbmRleD09PWQ/ITE6KEkoYSxkKSxjLmN1cnJlbnRJbmRleD5kJiYoYy5jdXJyZW50SW5kZXgtLSxPKGEsYixjKSksYy5zdGVwQ291bnQtLSxsKGEsZCkucmVtb3ZlKCksayhhLGQpLnJlbW92ZSgpLGooYSxkKS5wYXJlbnQoKS5yZW1vdmUoKSwwPT09ZCYmYS5maW5kKFwiLnN0ZXBzIGxpXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJmaXJzdFwiKSxkPT09Yy5zdGVwQ291bnQmJmEuZmluZChcIi5zdGVwcyBsaVwiKS5lcShkKS5hZGRDbGFzcyhcImxhc3RcIiksRihhLGIsYyxkKSxEKGEsYixjKSwhMCl9ZnVuY3Rpb24gSShhLGIpe28oYSkuc3BsaWNlKGIsMSl9ZnVuY3Rpb24gSihiLGMsZCl7dmFyIGU9Jzx7MH0gY2xhc3M9XCJ7MX1cIj57Mn08L3swfT4nLGY9cihfLGMuc3RlcHNPcmllbnRhdGlvbiksZz1mPT09Xy52ZXJ0aWNhbD9cIiB2ZXJ0aWNhbFwiOlwiXCIsaD1hKGUuZm9ybWF0KGMuY29udGVudENvbnRhaW5lclRhZyxcImNvbnRlbnQgXCIrYy5jbGVhckZpeENzc0NsYXNzLGIuaHRtbCgpKSksaT1hKGUuZm9ybWF0KGMuc3RlcHNDb250YWluZXJUYWcsXCJzdGVwcyBcIitjLmNsZWFyRml4Q3NzQ2xhc3MsJzx1bCByb2xlPVwidGFibGlzdFwiPjwvdWw+JykpLGo9aC5jaGlsZHJlbihjLmhlYWRlclRhZyksaz1oLmNoaWxkcmVuKGMuYm9keVRhZyk7Yi5hdHRyKFwicm9sZVwiLFwiYXBwbGljYXRpb25cIikuZW1wdHkoKS5hcHBlbmQoaSkuYXBwZW5kKGgpLmFkZENsYXNzKGMuY3NzQ2xhc3MrXCIgXCIrYy5jbGVhckZpeENzc0NsYXNzK2cpLGsuZWFjaChmdW5jdGlvbihjKXtLKGIsZCxhKHRoaXMpLGMpfSksai5lYWNoKGZ1bmN0aW9uKGUpe04oYixjLGQsYSh0aGlzKSxlKX0pLEUoYixjLGQpLEwoYixjLGQpfWZ1bmN0aW9uIEsoYSxiLGMsZCl7dmFyIGU9cShhKSxmPWUrVytkLGc9ZStYK2Q7Yy5faWQoZikuYXR0cihcInJvbGVcIixcInRhYnBhbmVsXCIpLl9hcmlhKFwibGFiZWxsZWRieVwiLGcpLmFkZENsYXNzKFwiYm9keVwiKS5fc2hvd0FyaWEoYi5jdXJyZW50SW5kZXg9PT1kKX1mdW5jdGlvbiBMKGEsYixjKXtpZihiLmVuYWJsZVBhZ2luYXRpb24pe3ZhciBkPSc8ezB9IGNsYXNzPVwiYWN0aW9ucyB7MX1cIj48dWwgcm9sZT1cIm1lbnVcIiBhcmlhLWxhYmVsPVwiezJ9XCI+ezN9PC91bD48L3swfT4nLGU9JzxsaT48YSBocmVmPVwiI3swfVwiIHJvbGU9XCJtZW51aXRlbVwiPnsxfTwvYT48L2xpPicsZj1cIlwiO2IuZm9yY2VNb3ZlRm9yd2FyZHx8KGYrPWUuZm9ybWF0KFwicHJldmlvdXNcIixiLmxhYmVscy5wcmV2aW91cykpLGYrPWUuZm9ybWF0KFwibmV4dFwiLGIubGFiZWxzLm5leHQpLGIuZW5hYmxlRmluaXNoQnV0dG9uJiYoZis9ZS5mb3JtYXQoXCJmaW5pc2hcIixiLmxhYmVscy5maW5pc2gpKSxiLmVuYWJsZUNhbmNlbEJ1dHRvbiYmKGYrPWUuZm9ybWF0KFwiY2FuY2VsXCIsYi5sYWJlbHMuY2FuY2VsKSksYS5hcHBlbmQoZC5mb3JtYXQoYi5hY3Rpb25Db250YWluZXJUYWcsYi5jbGVhckZpeENzc0NsYXNzLGIubGFiZWxzLnBhZ2luYXRpb24sZikpLEQoYSxiLGMpLEEoYSxiLGMpfX1mdW5jdGlvbiBNKGEsYyl7Zm9yKHZhciBkPWEubWF0Y2goLyMoW2Etel0qKSMvZ2kpLGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYuc3Vic3RyaW5nKDEsZi5sZW5ndGgtMSk7Y1tnXT09PWImJlIoXCJUaGUga2V5ICd7MH0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBzdWJzdGl0dXRlIGNvbGxlY3Rpb24hXCIsZyksYT1hLnJlcGxhY2UoZixjW2ddKX1yZXR1cm4gYX1mdW5jdGlvbiBOKGIsYyxkLGUsZil7dmFyIGc9cShiKSxoPWcrVitmLGo9ZytXK2Ysaz1nK1grZixsPWIuZmluZChcIi5zdGVwcyA+IHVsXCIpLG09TShjLnRpdGxlVGVtcGxhdGUse2luZGV4OmYrMSx0aXRsZTplLmh0bWwoKX0pLG49YSgnPGxpIHJvbGU9XCJ0YWJcIj48YSBpZD1cIicraCsnXCIgaHJlZj1cIiMnK2srJ1wiIGFyaWEtY29udHJvbHM9XCInK2orJ1wiPicrbStcIjwvYT48L2xpPlwiKTtuLl9lbmFibGVBcmlhKGMuZW5hYmxlQWxsU3RlcHN8fGQuY3VycmVudEluZGV4PmYpLGQuY3VycmVudEluZGV4PmYmJm4uYWRkQ2xhc3MoXCJkb25lXCIpLGUuX2lkKGspLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikuYWRkQ2xhc3MoXCJ0aXRsZVwiKSwwPT09Zj9sLnByZXBlbmQobik6bC5maW5kKFwibGlcIikuZXEoZi0xKS5hZnRlcihuKSwwPT09ZiYmbC5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJmaXJzdFwiKS5lcShmKS5hZGRDbGFzcyhcImZpcnN0XCIpLGY9PT1kLnN0ZXBDb3VudC0xJiZsLmZpbmQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcImxhc3RcIikuZXEoZikuYWRkQ2xhc3MoXCJsYXN0XCIpLG4uY2hpbGRyZW4oXCJhXCIpLmJpbmQoXCJjbGlja1wiK2koYiksUSl9ZnVuY3Rpb24gTyhiLGMsZCl7Yy5zYXZlU3RhdGUmJmEuY29va2llJiZhLmNvb2tpZShVK3EoYiksZC5jdXJyZW50SW5kZXgpfWZ1bmN0aW9uIFAoYixjLGQsZSxmLGcpe3ZhciBoPWIuZmluZChcIi5jb250ZW50ID4gLmJvZHlcIiksaT1yKGFiLGMudHJhbnNpdGlvbkVmZmVjdCksaj1jLnRyYW5zaXRpb25FZmZlY3RTcGVlZCxrPWguZXEoZSksbD1oLmVxKGYpO3N3aXRjaChpKXtjYXNlIGFiLmZhZGU6Y2FzZSBhYi5zbGlkZTp2YXIgbT1pPT09YWIuZmFkZT9cImZhZGVPdXRcIjpcInNsaWRlVXBcIixvPWk9PT1hYi5mYWRlP1wiZmFkZUluXCI6XCJzbGlkZURvd25cIjtkLnRyYW5zaXRpb25FbGVtZW50PWssbFttXShqLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5fc2hvd0FyaWEoITEpLnBhcmVudCgpLnBhcmVudCgpLGM9bihiKTtjLnRyYW5zaXRpb25FbGVtZW50JiYoYy50cmFuc2l0aW9uRWxlbWVudFtvXShqLGZ1bmN0aW9uKCl7YSh0aGlzKS5fc2hvd0FyaWEoKX0pLnByb21pc2UoKS5kb25lKGcpLGMudHJhbnNpdGlvbkVsZW1lbnQ9bnVsbCl9KTticmVhaztjYXNlIGFiLnNsaWRlTGVmdDp2YXIgcD1sLm91dGVyV2lkdGgoITApLHE9ZT5mPy1wOnAscz1lPmY/cDotcDthLndoZW4obC5hbmltYXRlKHtsZWZ0OnF9LGosZnVuY3Rpb24oKXthKHRoaXMpLl9zaG93QXJpYSghMSl9KSxrLmNzcyhcImxlZnRcIixzK1wicHhcIikuX3Nob3dBcmlhKCkuYW5pbWF0ZSh7bGVmdDowfSxqKSkuZG9uZShnKTticmVhaztkZWZhdWx0OmEud2hlbihsLl9zaG93QXJpYSghMSksay5fc2hvd0FyaWEoKSkuZG9uZShnKX19ZnVuY3Rpb24gUShiKXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGM9YSh0aGlzKSxkPWMucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCksZT1tKGQpLGY9bihkKSxnPWYuY3VycmVudEluZGV4O2lmKGMucGFyZW50KCkuaXMoXCI6bm90KC5kaXNhYmxlZCk6bm90KC5jdXJyZW50KVwiKSl7dmFyIGg9Yy5hdHRyKFwiaHJlZlwiKSxpPXBhcnNlSW50KGguc3Vic3RyaW5nKGgubGFzdEluZGV4T2YoXCItXCIpKzEpLDApO3UoZCxlLGYsaSl9cmV0dXJuIGc9PT1mLmN1cnJlbnRJbmRleD8oaihkLGcpLmZvY3VzKCksITEpOnZvaWQgMH1mdW5jdGlvbiBSKGEpe3Rocm93IGFyZ3VtZW50cy5sZW5ndGg+MSYmKGE9YS5mb3JtYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKSksbmV3IEVycm9yKGEpfWZ1bmN0aW9uIFMoYSxiKXtudWxsPT1iJiZSKFwiVGhlIGFyZ3VtZW50ICd7MH0nIGlzIG51bGwgb3IgdW5kZWZpbmVkLlwiLGEpfWEuZm4uZXh0ZW5kKHtfYXJpYTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmF0dHIoXCJhcmlhLVwiK2EsYil9LF9yZW1vdmVBcmlhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZUF0dHIoXCJhcmlhLVwiK2EpfSxfZW5hYmxlQXJpYTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YXx8YT90aGlzLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikuX2FyaWEoXCJkaXNhYmxlZFwiLFwiZmFsc2VcIik6dGhpcy5hZGRDbGFzcyhcImRpc2FibGVkXCIpLl9hcmlhKFwiZGlzYWJsZWRcIixcInRydWVcIil9LF9zaG93QXJpYTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YXx8YT90aGlzLnNob3coKS5fYXJpYShcImhpZGRlblwiLFwiZmFsc2VcIik6dGhpcy5oaWRlKCkuX2FyaWEoXCJoaWRkZW5cIixcInRydWVcIil9LF9zZWxlY3RBcmlhOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hfHxhP3RoaXMuYWRkQ2xhc3MoXCJjdXJyZW50XCIpLl9hcmlhKFwic2VsZWN0ZWRcIixcInRydWVcIik6dGhpcy5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIikuX2FyaWEoXCJzZWxlY3RlZFwiLFwiZmFsc2VcIil9LF9pZDpmdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLmF0dHIoXCJpZFwiLGEpOnRoaXMuYXR0cihcImlkXCIpfX0pLFN0cmluZy5wcm90b3R5cGUuZm9ybWF0fHwoU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGI9MT09PWFyZ3VtZW50cy5sZW5ndGgmJmEuaXNBcnJheShhcmd1bWVudHNbMF0pP2FyZ3VtZW50c1swXTphcmd1bWVudHMsYz10aGlzLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9bmV3IFJlZ0V4cChcIlxcXFx7XCIrZCtcIlxcXFx9XCIsXCJnbVwiKTtjPWMucmVwbGFjZShlLGJbZF0pfXJldHVybiBjfSk7dmFyIFQ9MCxVPVwialF1M3J5XzV0ZXBzX1N0QHRlX1wiLFY9XCItdC1cIixXPVwiLXAtXCIsWD1cIi1oLVwiLFk9XCJJbmRleCBvdXQgb2YgcmFuZ2UuXCIsWj1cIk9uZSBvciBtb3JlIGNvcnJlc3BvbmRpbmcgc3RlcCB7MH0gYXJlIG1pc3NpbmcuXCI7YS5mbi5zdGVwcz1mdW5jdGlvbihiKXtyZXR1cm4gYS5mbi5zdGVwc1tiXT9hLmZuLnN0ZXBzW2JdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTpcIm9iamVjdFwiIT10eXBlb2YgYiYmYj92b2lkIGEuZXJyb3IoXCJNZXRob2QgXCIrYitcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuc3RlcHNcIik6dy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGEuZm4uc3RlcHMuYWRkPWZ1bmN0aW9uKGEpe3ZhciBiPW4odGhpcyk7cmV0dXJuIHgodGhpcyxtKHRoaXMpLGIsYi5zdGVwQ291bnQsYSl9LGEuZm4uc3RlcHMuZGVzdHJveT1mdW5jdGlvbigpe3JldHVybiBnKHRoaXMsbSh0aGlzKSl9LGEuZm4uc3RlcHMuZmluaXNoPWZ1bmN0aW9uKCl7aCh0aGlzLG4odGhpcykpfSxhLmZuLnN0ZXBzLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMpLmN1cnJlbnRJbmRleH0sYS5mbi5zdGVwcy5nZXRDdXJyZW50U3RlcD1mdW5jdGlvbigpe3JldHVybiBwKHRoaXMsbih0aGlzKS5jdXJyZW50SW5kZXgpfSxhLmZuLnN0ZXBzLmdldFN0ZXA9ZnVuY3Rpb24oYSl7cmV0dXJuIHAodGhpcyxhKX0sYS5mbi5zdGVwcy5pbnNlcnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geCh0aGlzLG0odGhpcyksbih0aGlzKSxhLGIpfSxhLmZuLnN0ZXBzLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzLG0odGhpcyksbih0aGlzKSl9LGEuZm4uc3RlcHMucHJldmlvdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLG0odGhpcyksbih0aGlzKSl9LGEuZm4uc3RlcHMucmVtb3ZlPWZ1bmN0aW9uKGEpe3JldHVybiBIKHRoaXMsbSh0aGlzKSxuKHRoaXMpLGEpfSxhLmZuLnN0ZXBzLnNldFN0ZXA9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkIVwiKX0sYS5mbi5zdGVwcy5za2lwPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IHlldCBpbXBsZW1lbnRlZCFcIil9O3ZhciAkPWEuZm4uc3RlcHMuY29udGVudE1vZGU9e2h0bWw6MCxpZnJhbWU6MSxhc3luYzoyfSxfPWEuZm4uc3RlcHMuc3RlcHNPcmllbnRhdGlvbj17aG9yaXpvbnRhbDowLHZlcnRpY2FsOjF9LGFiPWEuZm4uc3RlcHMudHJhbnNpdGlvbkVmZmVjdD17bm9uZTowLGZhZGU6MSxzbGlkZToyLHNsaWRlTGVmdDozfSxiYj1hLmZuLnN0ZXBzLnN0ZXBNb2RlbD17dGl0bGU6XCJcIixjb250ZW50OlwiXCIsY29udGVudFVybDpcIlwiLGNvbnRlbnRNb2RlOiQuaHRtbCxjb250ZW50TG9hZGVkOiExfSxjYj1hLmZuLnN0ZXBzLmRlZmF1bHRzPXtoZWFkZXJUYWc6XCJoMVwiLGJvZHlUYWc6XCJkaXZcIixjb250ZW50Q29udGFpbmVyVGFnOlwiZGl2XCIsYWN0aW9uQ29udGFpbmVyVGFnOlwiZGl2XCIsc3RlcHNDb250YWluZXJUYWc6XCJkaXZcIixjc3NDbGFzczpcIndpemFyZFwiLGNsZWFyRml4Q3NzQ2xhc3M6XCJjbGVhcmZpeFwiLHN0ZXBzT3JpZW50YXRpb246Xy5ob3Jpem9udGFsLHRpdGxlVGVtcGxhdGU6JzxzcGFuIGNsYXNzPVwibnVtYmVyXCI+I2luZGV4Iy48L3NwYW4+ICN0aXRsZSMnLGxvYWRpbmdUZW1wbGF0ZTonPHNwYW4gY2xhc3M9XCJzcGlubmVyXCI+PC9zcGFuPiAjdGV4dCMnLGF1dG9Gb2N1czohMSxlbmFibGVBbGxTdGVwczohMSxlbmFibGVLZXlOYXZpZ2F0aW9uOiEwLGVuYWJsZVBhZ2luYXRpb246ITAsc3VwcHJlc3NQYWdpbmF0aW9uT25Gb2N1czohMCxlbmFibGVDb250ZW50Q2FjaGU6ITAsZW5hYmxlQ2FuY2VsQnV0dG9uOiExLGVuYWJsZUZpbmlzaEJ1dHRvbjohMCxwcmVsb2FkQ29udGVudDohMSxzaG93RmluaXNoQnV0dG9uQWx3YXlzOiExLGZvcmNlTW92ZUZvcndhcmQ6ITEsc2F2ZVN0YXRlOiExLHN0YXJ0SW5kZXg6MCx0cmFuc2l0aW9uRWZmZWN0OmFiLm5vbmUsdHJhbnNpdGlvbkVmZmVjdFNwZWVkOjIwMCxvblN0ZXBDaGFuZ2luZzpmdW5jdGlvbigpe3JldHVybiEwfSxvblN0ZXBDaGFuZ2VkOmZ1bmN0aW9uKCl7fSxvbkNhbmNlbGVkOmZ1bmN0aW9uKCl7fSxvbkZpbmlzaGluZzpmdW5jdGlvbigpe3JldHVybiEwfSxvbkZpbmlzaGVkOmZ1bmN0aW9uKCl7fSxvbkNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oKXt9LG9uSW5pdDpmdW5jdGlvbigpe30sbGFiZWxzOntjYW5jZWw6XCJDYW5jZWxcIixjdXJyZW50OlwiY3VycmVudCBzdGVwOlwiLHBhZ2luYXRpb246XCJQYWdpbmF0aW9uXCIsZmluaXNoOlwiRmluaXNoXCIsbmV4dDpcIk5leHRcIixwcmV2aW91czpcIlByZXZpb3VzXCIsbG9hZGluZzpcIkxvYWRpbmcgLi4uXCJ9fX0oalF1ZXJ5KTsiLCIhZnVuY3Rpb24oZSl7ZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQsbil7cmV0dXJuIGcoe3R5cGU6Ty5lcnJvcixpY29uQ2xhc3M6bSgpLmljb25DbGFzc2VzLmVycm9yLG1lc3NhZ2U6ZSxvcHRpb25zT3ZlcnJpZGU6bix0aXRsZTp0fSl9ZnVuY3Rpb24gbih0LG4pe3JldHVybiB0fHwodD1tKCkpLHY9ZShcIiNcIit0LmNvbnRhaW5lcklkKSx2Lmxlbmd0aD92OihuJiYodj11KHQpKSx2KX1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gZyh7dHlwZTpPLmluZm8saWNvbkNsYXNzOm0oKS5pY29uQ2xhc3Nlcy5pbmZvLG1lc3NhZ2U6ZSxvcHRpb25zT3ZlcnJpZGU6bix0aXRsZTp0fSl9ZnVuY3Rpb24gbyhlKXt3PWV9ZnVuY3Rpb24gcyhlLHQsbil7cmV0dXJuIGcoe3R5cGU6Ty5zdWNjZXNzLGljb25DbGFzczptKCkuaWNvbkNsYXNzZXMuc3VjY2VzcyxtZXNzYWdlOmUsb3B0aW9uc092ZXJyaWRlOm4sdGl0bGU6dH0pfWZ1bmN0aW9uIGEoZSx0LG4pe3JldHVybiBnKHt0eXBlOk8ud2FybmluZyxpY29uQ2xhc3M6bSgpLmljb25DbGFzc2VzLndhcm5pbmcsbWVzc2FnZTplLG9wdGlvbnNPdmVycmlkZTpuLHRpdGxlOnR9KX1mdW5jdGlvbiByKGUsdCl7dmFyIGk9bSgpO3Z8fG4oaSksbChlLGksdCl8fGQoaSl9ZnVuY3Rpb24gYyh0KXt2YXIgaT1tKCk7cmV0dXJuIHZ8fG4oaSksdCYmMD09PWUoXCI6Zm9jdXNcIix0KS5sZW5ndGg/dm9pZCBoKHQpOnZvaWQodi5jaGlsZHJlbigpLmxlbmd0aCYmdi5yZW1vdmUoKSl9ZnVuY3Rpb24gZCh0KXtmb3IodmFyIG49di5jaGlsZHJlbigpLGk9bi5sZW5ndGgtMTtpPj0wO2ktLSlsKGUobltpXSksdCl9ZnVuY3Rpb24gbCh0LG4saSl7dmFyIG89aSYmaS5mb3JjZT9pLmZvcmNlOiExO3JldHVybiB0JiYob3x8MD09PWUoXCI6Zm9jdXNcIix0KS5sZW5ndGgpPyh0W24uaGlkZU1ldGhvZF0oe2R1cmF0aW9uOm4uaGlkZUR1cmF0aW9uLGVhc2luZzpuLmhpZGVFYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtoKHQpfX0pLCEwKTohMX1mdW5jdGlvbiB1KHQpe3JldHVybiB2PWUoXCI8ZGl2Lz5cIikuYXR0cihcImlkXCIsdC5jb250YWluZXJJZCkuYWRkQ2xhc3ModC5wb3NpdGlvbkNsYXNzKS5hdHRyKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIikuYXR0cihcInJvbGVcIixcImFsZXJ0XCIpLHYuYXBwZW5kVG8oZSh0LnRhcmdldCkpLHZ9ZnVuY3Rpb24gcCgpe3JldHVybnt0YXBUb0Rpc21pc3M6ITAsdG9hc3RDbGFzczpcInRvYXN0XCIsY29udGFpbmVySWQ6XCJ0b2FzdC1jb250YWluZXJcIixkZWJ1ZzohMSxzaG93TWV0aG9kOlwiZmFkZUluXCIsc2hvd0R1cmF0aW9uOjMwMCxzaG93RWFzaW5nOlwic3dpbmdcIixvblNob3duOnZvaWQgMCxoaWRlTWV0aG9kOlwiZmFkZU91dFwiLGhpZGVEdXJhdGlvbjoxZTMsaGlkZUVhc2luZzpcInN3aW5nXCIsb25IaWRkZW46dm9pZCAwLGNsb3NlTWV0aG9kOiExLGNsb3NlRHVyYXRpb246ITEsY2xvc2VFYXNpbmc6ITEsZXh0ZW5kZWRUaW1lT3V0OjFlMyxpY29uQ2xhc3Nlczp7ZXJyb3I6XCJ0b2FzdC1lcnJvclwiLGluZm86XCJ0b2FzdC1pbmZvXCIsc3VjY2VzczpcInRvYXN0LXN1Y2Nlc3NcIix3YXJuaW5nOlwidG9hc3Qtd2FybmluZ1wifSxpY29uQ2xhc3M6XCJ0b2FzdC1pbmZvXCIscG9zaXRpb25DbGFzczpcInRvYXN0LXRvcC1yaWdodFwiLHRpbWVPdXQ6NWUzLHRpdGxlQ2xhc3M6XCJ0b2FzdC10aXRsZVwiLG1lc3NhZ2VDbGFzczpcInRvYXN0LW1lc3NhZ2VcIixlc2NhcGVIdG1sOiExLHRhcmdldDpcImJvZHlcIixjbG9zZUh0bWw6JzxidXR0b24gdHlwZT1cImJ1dHRvblwiPiZ0aW1lczs8L2J1dHRvbj4nLG5ld2VzdE9uVG9wOiEwLHByZXZlbnREdXBsaWNhdGVzOiExLHByb2dyZXNzQmFyOiExfX1mdW5jdGlvbiBmKGUpe3cmJncoZSl9ZnVuY3Rpb24gZyh0KXtmdW5jdGlvbiBpKGUpe3JldHVybiBudWxsPT1lJiYoZT1cIlwiKSxuZXcgU3RyaW5nKGUpLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UoL1wiL2csXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLFwiJiMzOTtcIikucmVwbGFjZSgvPC9nLFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csXCImZ3Q7XCIpfWZ1bmN0aW9uIG8oKXtyKCksZCgpLGwoKSx1KCkscCgpLGMoKX1mdW5jdGlvbiBzKCl7eS5ob3ZlcihiLE8pLCF4Lm9uY2xpY2smJngudGFwVG9EaXNtaXNzJiZ5LmNsaWNrKHcpLHguY2xvc2VCdXR0b24mJmsmJmsuY2xpY2soZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24/ZS5zdG9wUHJvcGFnYXRpb24oKTp2b2lkIDAhPT1lLmNhbmNlbEJ1YmJsZSYmZS5jYW5jZWxCdWJibGUhPT0hMCYmKGUuY2FuY2VsQnViYmxlPSEwKSx3KCEwKX0pLHgub25jbGljayYmeS5jbGljayhmdW5jdGlvbihlKXt4Lm9uY2xpY2soZSksdygpfSl9ZnVuY3Rpb24gYSgpe3kuaGlkZSgpLHlbeC5zaG93TWV0aG9kXSh7ZHVyYXRpb246eC5zaG93RHVyYXRpb24sZWFzaW5nOnguc2hvd0Vhc2luZyxjb21wbGV0ZTp4Lm9uU2hvd259KSx4LnRpbWVPdXQ+MCYmKEg9c2V0VGltZW91dCh3LHgudGltZU91dCkscS5tYXhIaWRlVGltZT1wYXJzZUZsb2F0KHgudGltZU91dCkscS5oaWRlRXRhPShuZXcgRGF0ZSkuZ2V0VGltZSgpK3EubWF4SGlkZVRpbWUseC5wcm9ncmVzc0JhciYmKHEuaW50ZXJ2YWxJZD1zZXRJbnRlcnZhbChELDEwKSkpfWZ1bmN0aW9uIHIoKXt0Lmljb25DbGFzcyYmeS5hZGRDbGFzcyh4LnRvYXN0Q2xhc3MpLmFkZENsYXNzKEUpfWZ1bmN0aW9uIGMoKXt4Lm5ld2VzdE9uVG9wP3YucHJlcGVuZCh5KTp2LmFwcGVuZCh5KX1mdW5jdGlvbiBkKCl7dC50aXRsZSYmKEkuYXBwZW5kKHguZXNjYXBlSHRtbD9pKHQudGl0bGUpOnQudGl0bGUpLmFkZENsYXNzKHgudGl0bGVDbGFzcykseS5hcHBlbmQoSSkpfWZ1bmN0aW9uIGwoKXt0Lm1lc3NhZ2UmJihNLmFwcGVuZCh4LmVzY2FwZUh0bWw/aSh0Lm1lc3NhZ2UpOnQubWVzc2FnZSkuYWRkQ2xhc3MoeC5tZXNzYWdlQ2xhc3MpLHkuYXBwZW5kKE0pKX1mdW5jdGlvbiB1KCl7eC5jbG9zZUJ1dHRvbiYmKGsuYWRkQ2xhc3MoXCJ0b2FzdC1jbG9zZS1idXR0b25cIikuYXR0cihcInJvbGVcIixcImJ1dHRvblwiKSx5LnByZXBlbmQoaykpfWZ1bmN0aW9uIHAoKXt4LnByb2dyZXNzQmFyJiYoQi5hZGRDbGFzcyhcInRvYXN0LXByb2dyZXNzXCIpLHkucHJlcGVuZChCKSl9ZnVuY3Rpb24gZyhlLHQpe2lmKGUucHJldmVudER1cGxpY2F0ZXMpe2lmKHQubWVzc2FnZT09PUMpcmV0dXJuITA7Qz10Lm1lc3NhZ2V9cmV0dXJuITF9ZnVuY3Rpb24gdyh0KXt2YXIgbj10JiZ4LmNsb3NlTWV0aG9kIT09ITE/eC5jbG9zZU1ldGhvZDp4LmhpZGVNZXRob2QsaT10JiZ4LmNsb3NlRHVyYXRpb24hPT0hMT94LmNsb3NlRHVyYXRpb246eC5oaWRlRHVyYXRpb24sbz10JiZ4LmNsb3NlRWFzaW5nIT09ITE/eC5jbG9zZUVhc2luZzp4LmhpZGVFYXNpbmc7cmV0dXJuIWUoXCI6Zm9jdXNcIix5KS5sZW5ndGh8fHQ/KGNsZWFyVGltZW91dChxLmludGVydmFsSWQpLHlbbl0oe2R1cmF0aW9uOmksZWFzaW5nOm8sY29tcGxldGU6ZnVuY3Rpb24oKXtoKHkpLHgub25IaWRkZW4mJlwiaGlkZGVuXCIhPT1qLnN0YXRlJiZ4Lm9uSGlkZGVuKCksai5zdGF0ZT1cImhpZGRlblwiLGouZW5kVGltZT1uZXcgRGF0ZSxmKGopfX0pKTp2b2lkIDB9ZnVuY3Rpb24gTygpeyh4LnRpbWVPdXQ+MHx8eC5leHRlbmRlZFRpbWVPdXQ+MCkmJihIPXNldFRpbWVvdXQodyx4LmV4dGVuZGVkVGltZU91dCkscS5tYXhIaWRlVGltZT1wYXJzZUZsb2F0KHguZXh0ZW5kZWRUaW1lT3V0KSxxLmhpZGVFdGE9KG5ldyBEYXRlKS5nZXRUaW1lKCkrcS5tYXhIaWRlVGltZSl9ZnVuY3Rpb24gYigpe2NsZWFyVGltZW91dChIKSxxLmhpZGVFdGE9MCx5LnN0b3AoITAsITApW3guc2hvd01ldGhvZF0oe2R1cmF0aW9uOnguc2hvd0R1cmF0aW9uLGVhc2luZzp4LnNob3dFYXNpbmd9KX1mdW5jdGlvbiBEKCl7dmFyIGU9KHEuaGlkZUV0YS0obmV3IERhdGUpLmdldFRpbWUoKSkvcS5tYXhIaWRlVGltZSoxMDA7Qi53aWR0aChlK1wiJVwiKX12YXIgeD1tKCksRT10Lmljb25DbGFzc3x8eC5pY29uQ2xhc3M7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQub3B0aW9uc092ZXJyaWRlJiYoeD1lLmV4dGVuZCh4LHQub3B0aW9uc092ZXJyaWRlKSxFPXQub3B0aW9uc092ZXJyaWRlLmljb25DbGFzc3x8RSksIWcoeCx0KSl7VCsrLHY9bih4LCEwKTt2YXIgSD1udWxsLHk9ZShcIjxkaXYvPlwiKSxJPWUoXCI8ZGl2Lz5cIiksTT1lKFwiPGRpdi8+XCIpLEI9ZShcIjxkaXYvPlwiKSxrPWUoeC5jbG9zZUh0bWwpLHE9e2ludGVydmFsSWQ6bnVsbCxoaWRlRXRhOm51bGwsbWF4SGlkZVRpbWU6bnVsbH0saj17dG9hc3RJZDpULHN0YXRlOlwidmlzaWJsZVwiLHN0YXJ0VGltZTpuZXcgRGF0ZSxvcHRpb25zOngsbWFwOnR9O3JldHVybiBvKCksYSgpLHMoKSxmKGopLHguZGVidWcmJmNvbnNvbGUmJmNvbnNvbGUubG9nKGopLHl9fWZ1bmN0aW9uIG0oKXtyZXR1cm4gZS5leHRlbmQoe30scCgpLGIub3B0aW9ucyl9ZnVuY3Rpb24gaChlKXt2fHwodj1uKCkpLGUuaXMoXCI6dmlzaWJsZVwiKXx8KGUucmVtb3ZlKCksZT1udWxsLDA9PT12LmNoaWxkcmVuKCkubGVuZ3RoJiYodi5yZW1vdmUoKSxDPXZvaWQgMCkpfXZhciB2LHcsQyxUPTAsTz17ZXJyb3I6XCJlcnJvclwiLGluZm86XCJpbmZvXCIsc3VjY2VzczpcInN1Y2Nlc3NcIix3YXJuaW5nOlwid2FybmluZ1wifSxiPXtjbGVhcjpyLHJlbW92ZTpjLGVycm9yOnQsZ2V0Q29udGFpbmVyOm4saW5mbzppLG9wdGlvbnM6e30sc3Vic2NyaWJlOm8sc3VjY2VzczpzLHZlcnNpb246XCIyLjEuMlwiLHdhcm5pbmc6YX07cmV0dXJuIGJ9KCl9KX0oXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZTpmdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXQocmVxdWlyZShcImpxdWVyeVwiKSk6d2luZG93LnRvYXN0cj10KHdpbmRvdy5qUXVlcnkpfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b2FzdHIuanMubWFwIiwiLypcbiAgQm9vdHN0cmFwIC0gRmlsZSBJbnB1dFxuICA9PT09PT09PT09PT09PT09PT09PT09XG5cbiAgVGhpcyBpcyBtZWFudCB0byBjb252ZXJ0IGFsbCBmaWxlIGlucHV0IHRhZ3MgaW50byBhIHNldCBvZiBlbGVtZW50cyB0aGF0IGRpc3BsYXlzIGNvbnNpc3RlbnRseSBpbiBhbGwgYnJvd3NlcnMuXG5cbiAgQ29udmVydHMgYWxsXG4gIDxpbnB1dCB0eXBlPVwiZmlsZVwiPlxuICBpbnRvIEJvb3RzdHJhcCBidXR0b25zXG4gIDxhIGNsYXNzPVwiYnRuXCI+QnJvd3NlPC9hPlxuXG4qL1xuKGZ1bmN0aW9uKCQpIHtcblxuJC5mbi5ib290c3RyYXBGaWxlSW5wdXQgPSBmdW5jdGlvbigpIHtcblxuICB0aGlzLmVhY2goZnVuY3Rpb24oaSxlbGVtKXtcblxuICAgIHZhciAkZWxlbSA9ICQoZWxlbSk7XG5cbiAgICAvLyBNYXliZSBzb21lIGZpZWxkcyBkb24ndCBuZWVkIHRvIGJlIHN0YW5kYXJkaXplZC5cbiAgICBpZiAodHlwZW9mICRlbGVtLmF0dHIoJ2RhdGEtYmZpLWRpc2FibGVkJykgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIHdvcmQgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBidXR0b25cbiAgICB2YXIgYnV0dG9uV29yZCA9ICdCcm93c2UnO1xuXG4gICAgaWYgKHR5cGVvZiAkZWxlbS5hdHRyKCd0aXRsZScpICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBidXR0b25Xb3JkID0gJGVsZW0uYXR0cigndGl0bGUnKTtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gJyc7XG5cbiAgICBpZiAoISEkZWxlbS5hdHRyKCdjbGFzcycpKSB7XG4gICAgICBjbGFzc05hbWUgPSAnICcgKyAkZWxlbS5hdHRyKCdjbGFzcycpO1xuICAgIH1cblxuICAgIC8vIE5vdyB3ZSdyZSBnb2luZyB0byB3cmFwIHRoYXQgaW5wdXQgZmllbGQgd2l0aCBhIEJvb3RzdHJhcCBidXR0b24uXG4gICAgLy8gVGhlIGlucHV0IHdpbGwgYWN0dWFsbHkgc3RpbGwgYmUgdGhlcmUsIGl0IHdpbGwganVzdCBiZSBmbG9hdCBhYm92ZSBhbmQgdHJhbnNwYXJlbnQgKGRvbmUgd2l0aCB0aGUgQ1NTKS5cbiAgICAkZWxlbS53cmFwKCc8YSBjbGFzcz1cImZpbGUtaW5wdXQtd3JhcHBlciBidG4gYnRuLWRlZmF1bHQgJyArIGNsYXNzTmFtZSArICdcIj48L2E+JykucGFyZW50KCkucHJlcGVuZCgkKCc8c3Bhbj48L3NwYW4+JykuaHRtbChidXR0b25Xb3JkKSk7XG4gIH0pXG5cbiAgLy8gQWZ0ZXIgd2UgaGF2ZSBmb3VuZCBhbGwgb2YgdGhlIGZpbGUgaW5wdXRzIGxldCdzIGFwcGx5IGEgbGlzdGVuZXIgZm9yIHRyYWNraW5nIHRoZSBtb3VzZSBtb3ZlbWVudC5cbiAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgaW4gb3JkZXIgdG8gZ2l2ZSB0aGUgaWxsdXNpb24gdGhhdCB0aGlzIGlzIGEgYnV0dG9uIGluIEZGIHdlIGFjdHVhbGx5IG5lZWQgdG8gbW92ZSB0aGUgYnV0dG9uIGZyb20gdGhlIGZpbGUgaW5wdXQgdW5kZXIgdGhlIGN1cnNvci4gVWdoLlxuICAucHJvbWlzZSgpLmRvbmUoIGZ1bmN0aW9uKCl7XG5cbiAgICAvLyBBcyB0aGUgY3Vyc29yIG1vdmVzIG92ZXIgb3VyIG5ldyBCb290c3RyYXAgYnV0dG9uIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBwb3NpdGlvbiBvZiB0aGUgaW52aXNpYmxlIGZpbGUgaW5wdXQgQnJvd3NlIGJ1dHRvbiB0byBiZSB1bmRlciB0aGUgY3Vyc29yLlxuICAgIC8vIFRoaXMgZ2l2ZXMgdXMgdGhlIHBvaW50ZXIgY3Vyc29yIHRoYXQgRkYgZGVuaWVzIHVzXG4gICAgJCgnLmZpbGUtaW5wdXQtd3JhcHBlcicpLm1vdXNlbW92ZShmdW5jdGlvbihjdXJzb3IpIHtcblxuICAgICAgdmFyIGlucHV0LCB3cmFwcGVyLFxuICAgICAgICB3cmFwcGVyWCwgd3JhcHBlclksXG4gICAgICAgIGlucHV0V2lkdGgsIGlucHV0SGVpZ2h0LFxuICAgICAgICBjdXJzb3JYLCBjdXJzb3JZO1xuXG4gICAgICAvLyBUaGlzIHdyYXBwZXIgZWxlbWVudCAodGhlIGJ1dHRvbiBzdXJyb3VuZCB0aGlzIGZpbGUgaW5wdXQpXG4gICAgICB3cmFwcGVyID0gJCh0aGlzKTtcbiAgICAgIC8vIFRoZSBpbnZpc2libGUgZmlsZSBpbnB1dCBlbGVtZW50XG4gICAgICBpbnB1dCA9IHdyYXBwZXIuZmluZChcImlucHV0XCIpO1xuICAgICAgLy8gVGhlIGxlZnQtbW9zdCBwb3NpdGlvbiBvZiB0aGUgd3JhcHBlclxuICAgICAgd3JhcHBlclggPSB3cmFwcGVyLm9mZnNldCgpLmxlZnQ7XG4gICAgICAvLyBUaGUgdG9wLW1vc3QgcG9zaXRpb24gb2YgdGhlIHdyYXBwZXJcbiAgICAgIHdyYXBwZXJZID0gd3JhcHBlci5vZmZzZXQoKS50b3A7XG4gICAgICAvLyBUaGUgd2l0aCBvZiB0aGUgYnJvd3NlcnMgaW5wdXQgZmllbGRcbiAgICAgIGlucHV0V2lkdGg9IGlucHV0LndpZHRoKCk7XG4gICAgICAvLyBUaGUgaGVpZ2h0IG9mIHRoZSBicm93c2VycyBpbnB1dCBmaWVsZFxuICAgICAgaW5wdXRIZWlnaHQ9IGlucHV0LmhlaWdodCgpO1xuICAgICAgLy9UaGUgcG9zaXRpb24gb2YgdGhlIGN1cnNvciBpbiB0aGUgd3JhcHBlclxuICAgICAgY3Vyc29yWCA9IGN1cnNvci5wYWdlWDtcbiAgICAgIGN1cnNvclkgPSBjdXJzb3IucGFnZVk7XG5cbiAgICAgIC8vVGhlIHBvc2l0aW9ucyB3ZSBhcmUgdG8gbW92ZSB0aGUgaW52aXNpYmxlIGZpbGUgaW5wdXRcbiAgICAgIC8vIFRoZSAyMCBhdCB0aGUgZW5kIGlzIGFuIGFyYml0cmFyeSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgd2UgY2FuIHNoaWZ0IHRoZSBpbnB1dCBzdWNoIHRoYXQgY3Vyc29yIGlzIG5vdCBwb2ludGluZyBhdCB0aGUgZW5kIG9mIHRoZSBCcm93c2UgYnV0dG9uIGJ1dCBzb21ld2hlcmUgbmVhcmVyIHRoZSBtaWRkbGVcbiAgICAgIG1vdmVJbnB1dFggPSBjdXJzb3JYIC0gd3JhcHBlclggLSBpbnB1dFdpZHRoICsgMjA7XG4gICAgICAvLyBTbGlkZXMgdGhlIGludmlzaWJsZSBpbnB1dCBCcm93c2UgYnV0dG9uIHRvIGJlIHBvc2l0aW9uZWQgbWlkZGxlIHVuZGVyIHRoZSBjdXJzb3JcbiAgICAgIG1vdmVJbnB1dFkgPSBjdXJzb3JZLSB3cmFwcGVyWSAtIChpbnB1dEhlaWdodC8yKTtcblxuICAgICAgLy8gQXBwbHkgdGhlIHBvc2l0aW9uaW5nIHN0eWxlcyB0byBhY3R1YWxseSBtb3ZlIHRoZSBpbnZpc2libGUgZmlsZSBpbnB1dFxuICAgICAgaW5wdXQuY3NzKHtcbiAgICAgICAgbGVmdDptb3ZlSW5wdXRYLFxuICAgICAgICB0b3A6bW92ZUlucHV0WVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZScsICcuZmlsZS1pbnB1dC13cmFwcGVyIGlucHV0W3R5cGU9ZmlsZV0nLCBmdW5jdGlvbigpe1xuXG4gICAgICB2YXIgZmlsZU5hbWU7XG4gICAgICBmaWxlTmFtZSA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgIC8vIFJlbW92ZSBhbnkgcHJldmlvdXMgZmlsZSBuYW1lc1xuICAgICAgJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCcuZmlsZS1pbnB1dC1uYW1lJykucmVtb3ZlKCk7XG4gICAgICBpZiAoISEkKHRoaXMpLnByb3AoJ2ZpbGVzJykgJiYgJCh0aGlzKS5wcm9wKCdmaWxlcycpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZmlsZU5hbWUgPSAkKHRoaXMpWzBdLmZpbGVzLmxlbmd0aCsnIGZpbGVzJztcbiAgICAgICAgLy8kKHRoaXMpLnBhcmVudCgpLmFmdGVyKCc8c3BhbiBjbGFzcz1cImZpbGUtaW5wdXQtbmFtZVwiPicrJCh0aGlzKVswXS5maWxlcy5sZW5ndGgrJyBmaWxlczwvc3Bhbj4nKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyB2YXIgZmFrZXBhdGggPSAnQzpcXFxcZmFrZXBhdGhcXFxcJztcbiAgICAgICAgLy8gZmlsZU5hbWUgPSAkKHRoaXMpLnZhbCgpLnJlcGxhY2UoJ0M6XFxcXGZha2VwYXRoXFxcXCcsJycpO1xuICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZyhmaWxlTmFtZS5sYXN0SW5kZXhPZignXFxcXCcpKzEsZmlsZU5hbWUubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdGVkRmlsZU5hbWVQbGFjZW1lbnQgPSAkKHRoaXMpLmRhdGEoJ2ZpbGVuYW1lLXBsYWNlbWVudCcpIHx8ICdvdXRzaWRlJztcbiAgICAgIGlmIChzZWxlY3RlZEZpbGVOYW1lUGxhY2VtZW50ID09PSAnaW5zaWRlJykge1xuICAgICAgICAvLyBQcmludCB0aGUgZmlsZU5hbWUgaW5zaWRlXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJ3NwYW4nKS5odG1sKGZpbGVOYW1lKTtcbiAgICAgICAgJCh0aGlzKS5hdHRyKCd0aXRsZScsIGZpbGVOYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWxlTmFtZVBsYWNlbWVudCA9PT0gJ291dHNpZGUnKSB7XG4gICAgICAgIC8vIFByaW50IHRoZSBmaWxlTmFtZSBhc2lkZSAocmlnaHQgYWZ0ZXIgdGhlIHRoZSBidXR0b24pXG4gICAgICAgICQodGhpcykucGFyZW50KCkuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwiZmlsZS1pbnB1dC1uYW1lXCI+JytmaWxlTmFtZSsnPC9zcGFuPicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGluIGJvb3RzdHJhcC1maWxlLWlucHV0IHBsdWdpbiA6IHVua25vd24gcGxhY2VtZW50IFsnICsgc2VsZWN0ZWRGaWxlTmFtZVBsYWNlbWVudCArICddIGZvciBzZWxlY3RlZCBmaWxlbmFtZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH0pO1xuXG59O1xuXG4vLyBBZGQgdGhlIHN0eWxlcyBiZWZvcmUgdGhlIGZpcnN0IHN0eWxlc2hlZXRcbi8vIFRoaXMgZW5zdXJlcyB0aGV5IGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiB3aXRoIGRldmVsb3BlciBzdHlsZXNcbnZhciBjc3NIdG1sID0gJzxzdHlsZT4nK1xuICAnLmZpbGUtaW5wdXQtd3JhcHBlciB7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgY3Vyc29yOiBwb2ludGVyOyB6LWluZGV4OiAxOyB9JytcbiAgJy5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT1maWxlXSwgLmZpbGUtaW5wdXQtd3JhcHBlciBpbnB1dFt0eXBlPWZpbGVdOmZvY3VzLCAuZmlsZS1pbnB1dC13cmFwcGVyIGlucHV0W3R5cGU9ZmlsZV06aG92ZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgY3Vyc29yOiBwb2ludGVyOyBvcGFjaXR5OiAwOyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7IHotaW5kZXg6IDk5OyBvdXRsaW5lOiAwOyB9JytcbiAgJy5maWxlLWlucHV0LW5hbWUgeyBtYXJnaW4tbGVmdDogOHB4OyB9JytcbiAgJzwvc3R5bGU+JztcbiQoJ2xpbmtbcmVsPXN0eWxlc2hlZXRdJykuZXEoMCkuYmVmb3JlKGNzc0h0bWwpO1xuXG59KShqUXVlcnkpO1xuIiwiLyohIENvcHlyaWdodCAoYykgMjAxMSBQaW90ciBSb2NoYWxhIChodHRwOi8vcm9jaGEubGEpXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxuICogYW5kIEdQTCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9ncGwtbGljZW5zZS5waHApIGxpY2Vuc2VzLlxuICpcbiAqIFZlcnNpb246IDEuMy42XG4gKlxuICovXG4oZnVuY3Rpb24oZSl7ZS5mbi5leHRlbmQoe3NsaW1TY3JvbGw6ZnVuY3Rpb24oZyl7dmFyIGE9ZS5leHRlbmQoe3dpZHRoOlwiYXV0b1wiLGhlaWdodDpcIjI1MHB4XCIsc2l6ZTpcIjdweFwiLGNvbG9yOlwiIzAwMFwiLHBvc2l0aW9uOlwicmlnaHRcIixkaXN0YW5jZTpcIjFweFwiLHN0YXJ0OlwidG9wXCIsb3BhY2l0eTouNCxhbHdheXNWaXNpYmxlOiExLGRpc2FibGVGYWRlT3V0OiExLHJhaWxWaXNpYmxlOiExLHJhaWxDb2xvcjpcIiMzMzNcIixyYWlsT3BhY2l0eTouMixyYWlsRHJhZ2dhYmxlOiEwLHJhaWxDbGFzczpcInNsaW1TY3JvbGxSYWlsXCIsYmFyQ2xhc3M6XCJzbGltU2Nyb2xsQmFyXCIsd3JhcHBlckNsYXNzOlwic2xpbVNjcm9sbERpdlwiLGFsbG93UGFnZVNjcm9sbDohMSx3aGVlbFN0ZXA6MjAsdG91Y2hTY3JvbGxTdGVwOjIwMCxib3JkZXJSYWRpdXM6XCI3cHhcIixyYWlsQm9yZGVyUmFkaXVzOlwiN3B4XCJ9LGcpO3RoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIHYoZCl7aWYocil7ZD1kfHx3aW5kb3cuZXZlbnQ7XG52YXIgYz0wO2Qud2hlZWxEZWx0YSYmKGM9LWQud2hlZWxEZWx0YS8xMjApO2QuZGV0YWlsJiYoYz1kLmRldGFpbC8zKTtlKGQudGFyZ2V0fHxkLnNyY1RhcmdldHx8ZC5zcmNFbGVtZW50KS5jbG9zZXN0KFwiLlwiK2Eud3JhcHBlckNsYXNzKS5pcyhiLnBhcmVudCgpKSYmbShjLCEwKTtkLnByZXZlbnREZWZhdWx0JiYhayYmZC5wcmV2ZW50RGVmYXVsdCgpO2t8fChkLnJldHVyblZhbHVlPSExKX19ZnVuY3Rpb24gbShkLGUsZyl7az0hMTt2YXIgZj1kLGg9Yi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKTtlJiYoZj1wYXJzZUludChjLmNzcyhcInRvcFwiKSkrZCpwYXJzZUludChhLndoZWVsU3RlcCkvMTAwKmMub3V0ZXJIZWlnaHQoKSxmPU1hdGgubWluKE1hdGgubWF4KGYsMCksaCksZj0wPGQ/TWF0aC5jZWlsKGYpOk1hdGguZmxvb3IoZiksYy5jc3Moe3RvcDpmK1wicHhcIn0pKTtsPXBhcnNlSW50KGMuY3NzKFwidG9wXCIpKS8oYi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKSk7XG5mPWwqKGJbMF0uc2Nyb2xsSGVpZ2h0LWIub3V0ZXJIZWlnaHQoKSk7ZyYmKGY9ZCxkPWYvYlswXS5zY3JvbGxIZWlnaHQqYi5vdXRlckhlaWdodCgpLGQ9TWF0aC5taW4oTWF0aC5tYXgoZCwwKSxoKSxjLmNzcyh7dG9wOmQrXCJweFwifSkpO2Iuc2Nyb2xsVG9wKGYpO2IudHJpZ2dlcihcInNsaW1zY3JvbGxpbmdcIix+fmYpO3coKTtwKCl9ZnVuY3Rpb24geCgpe3U9TWF0aC5tYXgoYi5vdXRlckhlaWdodCgpL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSwzMCk7Yy5jc3Moe2hlaWdodDp1K1wicHhcIn0pO3ZhciBhPXU9PWIub3V0ZXJIZWlnaHQoKT9cIm5vbmVcIjpcImJsb2NrXCI7Yy5jc3Moe2Rpc3BsYXk6YX0pfWZ1bmN0aW9uIHcoKXt4KCk7Y2xlYXJUaW1lb3V0KEIpO2w9PX5+bD8oaz1hLmFsbG93UGFnZVNjcm9sbCxDIT1sJiZiLnRyaWdnZXIoXCJzbGltc2Nyb2xsXCIsMD09fn5sP1widG9wXCI6XCJib3R0b21cIikpOms9ITE7Qz1sO3U+PWIub3V0ZXJIZWlnaHQoKT9rPSEwOihjLnN0b3AoITAsXG4hMCkuZmFkZUluKFwiZmFzdFwiKSxhLnJhaWxWaXNpYmxlJiZoLnN0b3AoITAsITApLmZhZGVJbihcImZhc3RcIikpfWZ1bmN0aW9uIHAoKXthLmFsd2F5c1Zpc2libGV8fChCPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmRpc2FibGVGYWRlT3V0JiZyfHx5fHx6fHwoYy5mYWRlT3V0KFwic2xvd1wiKSxoLmZhZGVPdXQoXCJzbG93XCIpKX0sMUUzKSl9dmFyIHIseSx6LEIsQSx1LGwsQyxrPSExLGI9ZSh0aGlzKTtpZihiLnBhcmVudCgpLmhhc0NsYXNzKGEud3JhcHBlckNsYXNzKSl7dmFyIG49Yi5zY3JvbGxUb3AoKSxjPWIuY2xvc2VzdChcIi5cIithLmJhckNsYXNzKSxoPWIuY2xvc2VzdChcIi5cIithLnJhaWxDbGFzcyk7eCgpO2lmKGUuaXNQbGFpbk9iamVjdChnKSl7aWYoXCJoZWlnaHRcImluIGcmJlwiYXV0b1wiPT1nLmhlaWdodCl7Yi5wYXJlbnQoKS5jc3MoXCJoZWlnaHRcIixcImF1dG9cIik7Yi5jc3MoXCJoZWlnaHRcIixcImF1dG9cIik7dmFyIHE9Yi5wYXJlbnQoKS5wYXJlbnQoKS5oZWlnaHQoKTtiLnBhcmVudCgpLmNzcyhcImhlaWdodFwiLFxucSk7Yi5jc3MoXCJoZWlnaHRcIixxKX1pZihcInNjcm9sbFRvXCJpbiBnKW49cGFyc2VJbnQoYS5zY3JvbGxUbyk7ZWxzZSBpZihcInNjcm9sbEJ5XCJpbiBnKW4rPXBhcnNlSW50KGEuc2Nyb2xsQnkpO2Vsc2UgaWYoXCJkZXN0cm95XCJpbiBnKXtjLnJlbW92ZSgpO2gucmVtb3ZlKCk7Yi51bndyYXAoKTtyZXR1cm59bShuLCExLCEwKX19ZWxzZSBpZighKGUuaXNQbGFpbk9iamVjdChnKSYmXCJkZXN0cm95XCJpbiBnKSl7YS5oZWlnaHQ9XCJhdXRvXCI9PWEuaGVpZ2h0P2IucGFyZW50KCkuaGVpZ2h0KCk6YS5oZWlnaHQ7bj1lKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoYS53cmFwcGVyQ2xhc3MpLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLG92ZXJmbG93OlwiaGlkZGVuXCIsd2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHR9KTtiLmNzcyh7b3ZlcmZsb3c6XCJoaWRkZW5cIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO3ZhciBoPWUoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhhLnJhaWxDbGFzcykuY3NzKHt3aWR0aDphLnNpemUsXG5oZWlnaHQ6XCIxMDAlXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGRpc3BsYXk6YS5hbHdheXNWaXNpYmxlJiZhLnJhaWxWaXNpYmxlP1wiYmxvY2tcIjpcIm5vbmVcIixcImJvcmRlci1yYWRpdXNcIjphLnJhaWxCb3JkZXJSYWRpdXMsYmFja2dyb3VuZDphLnJhaWxDb2xvcixvcGFjaXR5OmEucmFpbE9wYWNpdHksekluZGV4OjkwfSksYz1lKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoYS5iYXJDbGFzcykuY3NzKHtiYWNrZ3JvdW5kOmEuY29sb3Isd2lkdGg6YS5zaXplLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxvcGFjaXR5OmEub3BhY2l0eSxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZT9cImJsb2NrXCI6XCJub25lXCIsXCJib3JkZXItcmFkaXVzXCI6YS5ib3JkZXJSYWRpdXMsQm9yZGVyUmFkaXVzOmEuYm9yZGVyUmFkaXVzLE1vekJvcmRlclJhZGl1czphLmJvcmRlclJhZGl1cyxXZWJraXRCb3JkZXJSYWRpdXM6YS5ib3JkZXJSYWRpdXMsekluZGV4Ojk5fSkscT1cInJpZ2h0XCI9PWEucG9zaXRpb24/XG57cmlnaHQ6YS5kaXN0YW5jZX06e2xlZnQ6YS5kaXN0YW5jZX07aC5jc3MocSk7Yy5jc3MocSk7Yi53cmFwKG4pO2IucGFyZW50KCkuYXBwZW5kKGMpO2IucGFyZW50KCkuYXBwZW5kKGgpO2EucmFpbERyYWdnYWJsZSYmYy5iaW5kKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9ZShkb2N1bWVudCk7ej0hMDt0PXBhcnNlRmxvYXQoYy5jc3MoXCJ0b3BcIikpO3BhZ2VZPWEucGFnZVk7Yi5iaW5kKFwibW91c2Vtb3ZlLnNsaW1zY3JvbGxcIixmdW5jdGlvbihhKXtjdXJyVG9wPXQrYS5wYWdlWS1wYWdlWTtjLmNzcyhcInRvcFwiLGN1cnJUb3ApO20oMCxjLnBvc2l0aW9uKCkudG9wLCExKX0pO2IuYmluZChcIm1vdXNldXAuc2xpbXNjcm9sbFwiLGZ1bmN0aW9uKGEpe3o9ITE7cCgpO2IudW5iaW5kKFwiLnNsaW1zY3JvbGxcIil9KTtyZXR1cm4hMX0pLmJpbmQoXCJzZWxlY3RzdGFydC5zbGltc2Nyb2xsXCIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKTthLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuITF9KTtcbmguaG92ZXIoZnVuY3Rpb24oKXt3KCl9LGZ1bmN0aW9uKCl7cCgpfSk7Yy5ob3ZlcihmdW5jdGlvbigpe3k9ITB9LGZ1bmN0aW9uKCl7eT0hMX0pO2IuaG92ZXIoZnVuY3Rpb24oKXtyPSEwO3coKTtwKCl9LGZ1bmN0aW9uKCl7cj0hMTtwKCl9KTtiLmJpbmQoXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oYSxiKXthLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGgmJihBPWEub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZKX0pO2IuYmluZChcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGIpe2t8fGIub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2Iub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmKG0oKEEtYi5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpL2EudG91Y2hTY3JvbGxTdGVwLCEwKSxBPWIub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZKX0pO3goKTtcImJvdHRvbVwiPT09YS5zdGFydD8oYy5jc3Moe3RvcDpiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpfSksXG5tKDAsITApKTpcInRvcFwiIT09YS5zdGFydCYmKG0oZShhLnN0YXJ0KS5wb3NpdGlvbigpLnRvcCxudWxsLCEwKSxhLmFsd2F5c1Zpc2libGV8fGMuaGlkZSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj8odGhpcy5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIix2LCExKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsdiwhMSkpOmRvY3VtZW50LmF0dGFjaEV2ZW50KFwib25tb3VzZXdoZWVsXCIsdil9fSk7cmV0dXJuIHRoaXN9fSk7ZS5mbi5leHRlbmQoe3NsaW1zY3JvbGw6ZS5mbi5zbGltU2Nyb2xsfSl9KShqUXVlcnkpOyIsIi8qIVxuXG5Ib2xkZXIgLSBjbGllbnQgc2lkZSBpbWFnZSBwbGFjZWhvbGRlcnNcblZlcnNpb24gMi44LjIrYzM0cjlcbsKpIDIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvXG5cblNpdGU6ICAgICBodHRwOi8vaG9sZGVyanMuY29tXG5Jc3N1ZXM6ICAgaHR0cHM6Ly9naXRodWIuY29tL2ltc2t5L2hvbGRlci9pc3N1ZXNcbkxpY2Vuc2U6ICBNSVRcblxuKi9cbihmdW5jdGlvbiAod2luZG93KSB7XG4gIGlmICghd2luZG93LmRvY3VtZW50KSByZXR1cm47XG4gIHZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcblxuICAvL2h0dHBzOi8vZ2l0aHViLmNvbS9pbmV4b3JhYmxldGFzaC9wb2x5ZmlsbC9ibG9iL21hc3Rlci93ZWIuanNcbiAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPSBmdW5jdGlvbiAoc2VsZWN0b3JzKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksIGVsZW1lbnRzID0gW10sIGVsZW1lbnQ7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5maXJzdENoaWxkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgZG9jdW1lbnQuX3FzYSA9IFtdO1xuXG4gICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHNlbGVjdG9ycyArICd7eC1xc2E6ZXhwcmVzc2lvbihkb2N1bWVudC5fcXNhICYmIGRvY3VtZW50Ll9xc2EucHVzaCh0aGlzKSl9JztcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIDApO1xuICAgICAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuICAgICAgICB3aGlsZSAoZG9jdW1lbnQuX3FzYS5sZW5ndGgpIHtcbiAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuX3FzYS5zaGlmdCgpO1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlQXR0cmlidXRlKCd4LXFzYScpO1xuICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuX3FzYSA9IG51bGw7XG4gICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9ycykge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycyk7XG4gICAgICAgIHJldHVybiAoZWxlbWVudHMubGVuZ3RoKSA/IGVsZW1lbnRzWzBdIDogbnVsbDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24gKGNsYXNzTmFtZXMpIHtcbiAgICAgICAgY2xhc3NOYW1lcyA9IFN0cmluZyhjbGFzc05hbWVzKS5yZXBsYWNlKC9efFxccysvZywgJy4nKTtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY2xhc3NOYW1lcyk7XG4gICAgICB9O1xuICAgIH1cblxuICAvL2h0dHBzOi8vZ2l0aHViLmNvbS9pbmV4b3JhYmxldGFzaC9wb2x5ZmlsbFxuICAvLyBFUzUgMTUuMi4zLjE0IE9iamVjdC5rZXlzICggTyApXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9rZXlzXG4gIGlmICghT2JqZWN0LmtleXMpIHtcbiAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAobyAhPT0gT2JqZWN0KG8pKSB7IHRocm93IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTsgfVxuICAgICAgdmFyIHJldCA9IFtdLCBwO1xuICAgICAgZm9yIChwIGluIG8pIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkge1xuICAgICAgICAgIHJldC5wdXNoKHApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gIH1cblxuICAvLyBFUzUgMTUuNC40LjE4IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoICggY2FsbGJhY2tmbiBbICwgdGhpc0FyZyBdIClcbiAgLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9mb3JFYWNoXG4gIGlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICBpZiAodGhpcyA9PT0gdm9pZCAwIHx8IHRoaXMgPT09IG51bGwpIHsgdGhyb3cgVHlwZUVycm9yKCk7IH1cblxuICAgICAgdmFyIHQgPSBPYmplY3QodGhpcyk7XG4gICAgICB2YXIgbGVuID0gdC5sZW5ndGggPj4+IDA7XG4gICAgICBpZiAodHlwZW9mIGZ1biAhPT0gXCJmdW5jdGlvblwiKSB7IHRocm93IFR5cGVFcnJvcigpOyB9XG5cbiAgICAgIHZhciB0aGlzcCA9IGFyZ3VtZW50c1sxXSwgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoaSBpbiB0KSB7XG4gICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHRbaV0sIGksIHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vaHR0cHM6Ly9naXRodWIuY29tL2luZXhvcmFibGV0YXNoL3BvbHlmaWxsL2Jsb2IvbWFzdGVyL3dlYi5qc1xuICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgIHZhciBCNjRfQUxQSEFCRVQgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuICAgIGdsb2JhbC5hdG9iID0gZ2xvYmFsLmF0b2IgfHwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICBpbnB1dCA9IFN0cmluZyhpbnB1dCk7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLFxuICAgICAgICAgIG91dHB1dCA9IFtdLFxuICAgICAgICAgIGJ1ZmZlciA9IDAsIGJpdHMgPSAwLCBuO1xuXG4gICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICBpZiAoKGlucHV0Lmxlbmd0aCAlIDQpID09PSAwKSB7IGlucHV0ID0gaW5wdXQucmVwbGFjZSgvPSskLywgJycpOyB9XG4gICAgICBpZiAoKGlucHV0Lmxlbmd0aCAlIDQpID09PSAxKSB7IHRocm93IEVycm9yKCdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InKTsgfVxuICAgICAgaWYgKC9bXisvMC05QS1aYS16XS8udGVzdChpbnB1dCkpIHsgdGhyb3cgRXJyb3IoJ0ludmFsaWRDaGFyYWN0ZXJFcnJvcicpOyB9XG5cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICBuID0gQjY0X0FMUEhBQkVULmluZGV4T2YoaW5wdXQuY2hhckF0KHBvc2l0aW9uKSk7XG4gICAgICAgIGJ1ZmZlciA9IChidWZmZXIgPDwgNikgfCBuO1xuICAgICAgICBiaXRzICs9IDY7XG5cbiAgICAgICAgaWYgKGJpdHMgPT09IDI0KSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgoYnVmZmVyID4+IDE2KSAmIDB4RkYpKTtcbiAgICAgICAgICBvdXRwdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKChidWZmZXIgPj4gIDgpICYgMHhGRikpO1xuICAgICAgICAgIG91dHB1dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmZmVyICYgMHhGRikpO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIGJ1ZmZlciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcG9zaXRpb24gKz0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpdHMgPT09IDEyKSB7XG4gICAgICAgIGJ1ZmZlciA9IGJ1ZmZlciA+PiA0O1xuICAgICAgICBvdXRwdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZmZlciAmIDB4RkYpKTtcbiAgICAgIH0gZWxzZSBpZiAoYml0cyA9PT0gMTgpIHtcbiAgICAgICAgYnVmZmVyID0gYnVmZmVyID4+IDI7XG4gICAgICAgIG91dHB1dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKGJ1ZmZlciA+PiA4KSAmIDB4RkYpKTtcbiAgICAgICAgb3V0cHV0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShidWZmZXIgJiAweEZGKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XG4gICAgfTtcblxuICAgIGdsb2JhbC5idG9hID0gZ2xvYmFsLmJ0b2EgfHwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICBpbnB1dCA9IFN0cmluZyhpbnB1dCk7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLFxuICAgICAgICAgIG91dCA9IFtdLFxuICAgICAgICAgIG8xLCBvMiwgbzMsXG4gICAgICAgICAgZTEsIGUyLCBlMywgZTQ7XG5cbiAgICAgIGlmICgvW15cXHgwMC1cXHhGRl0vLnRlc3QoaW5wdXQpKSB7IHRocm93IEVycm9yKCdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InKTsgfVxuXG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgbzEgPSBpbnB1dC5jaGFyQ29kZUF0KHBvc2l0aW9uKyspO1xuICAgICAgICBvMiA9IGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24rKyk7XG4gICAgICAgIG8zID0gaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbisrKTtcblxuICAgICAgICAvLyAxMTExMTEgMTEyMjIyIDIyMjIzMyAzMzMzMzNcbiAgICAgICAgZTEgPSBvMSA+PiAyO1xuICAgICAgICBlMiA9ICgobzEgJiAweDMpIDw8IDQpIHwgKG8yID4+IDQpO1xuICAgICAgICBlMyA9ICgobzIgJiAweGYpIDw8IDIpIHwgKG8zID4+IDYpO1xuICAgICAgICBlNCA9IG8zICYgMHgzZjtcblxuICAgICAgICBpZiAocG9zaXRpb24gPT09IGlucHV0Lmxlbmd0aCArIDIpIHtcbiAgICAgICAgICBlMyA9IDY0OyBlNCA9IDY0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSBpbnB1dC5sZW5ndGggKyAxKSB7XG4gICAgICAgICAgZTQgPSA2NDtcbiAgICAgICAgfVxuXG4gICAgICAgIG91dC5wdXNoKEI2NF9BTFBIQUJFVC5jaGFyQXQoZTEpLFxuICAgICAgICAgICAgICAgICBCNjRfQUxQSEFCRVQuY2hhckF0KGUyKSxcbiAgICAgICAgICAgICAgICAgQjY0X0FMUEhBQkVULmNoYXJBdChlMyksXG4gICAgICAgICAgICAgICAgIEI2NF9BTFBIQUJFVC5jaGFyQXQoZTQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbiAgICB9O1xuICB9KHdpbmRvdykpO1xuXG4gIC8vaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamltZWgvMzMyMzU3XG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSl7XG4gICAgICAvKmpzaGludCAtVzAwMSwgLVcxMDMgKi9cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgICB2YXIgcHJvdG8gPSB0aGlzLl9fcHJvdG9fXyB8fCB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgICAgIHJldHVybiAocHJvcCBpbiB0aGlzKSAmJiAoIShwcm9wIGluIHByb3RvKSB8fCBwcm90b1twcm9wXSAhPT0gdGhpc1twcm9wXSk7XG4gICAgfTtcbiAgICAgIC8qanNoaW50ICtXMDAxLCArVzEwMyAqL1xuICB9XG5cbiAgLy8gQGxpY2Vuc2UgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICAvLyBjb3B5cmlnaHQgUGF1bCBJcmlzaCAyMDE1XG5cblxuICAvLyBEYXRlLm5vdygpIGlzIHN1cHBvcnRlZCBldmVyeXdoZXJlIGV4Y2VwdCBJRTguIEZvciBJRTggd2UgdXNlIHRoZSBEYXRlLm5vdyBwb2x5ZmlsbFxuICAvLyAgIGdpdGh1Yi5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvYmxvYi9tYXN0ZXIvcG9seWZpbGxzL0RhdGUubm93L3BvbHlmaWxsLmpzXG4gIC8vIGFzIFNhZmFyaSA2IGRvZXNuJ3QgaGF2ZSBzdXBwb3J0IGZvciBOYXZpZ2F0aW9uVGltaW5nLCB3ZSB1c2UgYSBEYXRlLm5vdygpIHRpbWVzdGFtcCBmb3IgcmVsYXRpdmUgdmFsdWVzXG5cbiAgLy8gaWYgeW91IHdhbnQgdmFsdWVzIHNpbWlsYXIgdG8gd2hhdCB5b3UnZCBnZXQgd2l0aCByZWFsIHBlcmYubm93LCBwbGFjZSB0aGlzIHRvd2FyZHMgdGhlIGhlYWQgb2YgdGhlIHBhZ2VcbiAgLy8gYnV0IGluIHJlYWxpdHksIHlvdSdyZSBqdXN0IGdldHRpbmcgdGhlIGRlbHRhIGJldHdlZW4gbm93KCkgY2FsbHMsIHNvIGl0J3Mgbm90IHRlcnJpYmx5IGltcG9ydGFudCB3aGVyZSBpdCdzIHBsYWNlZFxuXG5cbiAgKGZ1bmN0aW9uKCl7XG5cbiAgICBpZiAoJ3BlcmZvcm1hbmNlJyBpbiB3aW5kb3cgPT09IGZhbHNlKSB7XG4gICAgICAgIHdpbmRvdy5wZXJmb3JtYW5jZSA9IHt9O1xuICAgIH1cbiAgICBcbiAgICBEYXRlLm5vdyA9IChEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7ICAvLyB0aGFua3MgSUU4XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfSk7XG5cbiAgICBpZiAoJ25vdycgaW4gd2luZG93LnBlcmZvcm1hbmNlID09PSBmYWxzZSl7XG4gICAgICBcbiAgICAgIHZhciBub3dPZmZzZXQgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICBpZiAocGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpe1xuICAgICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0O1xuICAgICAgfVxuXG4gICAgICB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID0gZnVuY3Rpb24gbm93KCl7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgfSkoKTtcblxuICAvL3JlcXVlc3RBbmltYXRpb25GcmFtZSBwb2x5ZmlsbCBmb3Igb2xkZXIgRmlyZWZveC9DaHJvbWUgdmVyc2lvbnNcbiAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgaWYgKHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAvL2h0dHBzOi8vZ2l0aHViLmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtc2VydmljZS9ibG9iL21hc3Rlci9wb2x5ZmlsbHMvcmVxdWVzdEFuaW1hdGlvbkZyYW1lL3BvbHlmaWxsLXdlYmtpdC5qc1xuICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAvLyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbGxiYWNrKGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLy8gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gICAgICBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICB9KHdpbmRvdykpO1xuICAgIH0gZWxzZSBpZiAod2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgLy9odHRwczovL2dpdGh1Yi5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvYmxvYi9tYXN0ZXIvcG9seWZpbGxzL3JlcXVlc3RBbmltYXRpb25GcmFtZS9wb2x5ZmlsbC1tb3ouanNcbiAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgLy8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gbW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjayhnbG9iYWwucGVyZm9ybWFuY2Uubm93KCkpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8vIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZVxuICAgICAgZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gbW96Q2FuY2VsQW5pbWF0aW9uRnJhbWU7XG4gICAgfSh3aW5kb3cpKTtcbiAgICB9IGVsc2Uge1xuICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsLnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG4gICAgICB9O1xuXG4gICAgICBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBnbG9iYWwuY2xlYXJUaW1lb3V0O1xuICAgIH0pKHdpbmRvdyk7XG4gICAgfVxuICB9XG59KSh0aGlzKTtcblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJIb2xkZXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiSG9sZGVyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcblxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cblxuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdEhvbGRlci5qcyAtIGNsaWVudCBzaWRlIGltYWdlIHBsYWNlaG9sZGVyc1xuXHQoYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jb1xuXHQqL1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qXG5cdEhvbGRlci5qcyAtIGNsaWVudCBzaWRlIGltYWdlIHBsYWNlaG9sZGVyc1xuXHQoYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jb1xuXHQqL1xuXG5cdC8vTGlicmFyaWVzIGFuZCBmdW5jdGlvbnNcblx0dmFyIG9uRG9tUmVhZHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgcXVlcnlzdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5cdHZhciBTY2VuZUdyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFNWRyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBET00gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgQ29sb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuXHR2YXIgc3ZnUmVuZGVyZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxuXHR2YXIgZXh0ZW5kID0gdXRpbHMuZXh0ZW5kO1xuXHR2YXIgZGltZW5zaW9uQ2hlY2sgPSB1dGlscy5kaW1lbnNpb25DaGVjaztcblxuXHQvL0NvbnN0YW50cyBhbmQgZGVmaW5pdGlvbnNcblx0dmFyIFNWR19OUyA9IGNvbnN0YW50cy5zdmdfbnM7XG5cblx0dmFyIEhvbGRlciA9IHtcblx0ICAgIHZlcnNpb246IGNvbnN0YW50cy52ZXJzaW9uLFxuXG5cdCAgICAvKipcblx0ICAgICAqIEFkZHMgYSB0aGVtZSB0byBkZWZhdWx0IHNldHRpbmdzXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlbWUgbmFtZVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IHRoZW1lIFRoZW1lIG9iamVjdCwgd2l0aCBmb3JlZ3JvdW5kLCBiYWNrZ3JvdW5kLCBzaXplLCBmb250LCBhbmQgZm9udHdlaWdodCBwcm9wZXJ0aWVzLlxuXHQgICAgICovXG5cdCAgICBhZGRUaGVtZTogZnVuY3Rpb24obmFtZSwgdGhlbWUpIHtcblx0ICAgICAgICBuYW1lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCAmJiAoQXBwLnNldHRpbmdzLnRoZW1lc1tuYW1lXSA9IHRoZW1lKTtcblx0ICAgICAgICBkZWxldGUgQXBwLnZhcnMuY2FjaGUudGhlbWVLZXlzO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblxuXHQgICAgLyoqXG5cdCAgICAgKiBBcHBlbmRzIGEgcGxhY2Vob2xkZXIgdG8gYW4gZWxlbWVudFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgUGxhY2Vob2xkZXIgVVJMIHN0cmluZ1xuXHQgICAgICogQHBhcmFtIGVsIEEgc2VsZWN0b3Igb3IgYSByZWZlcmVuY2UgdG8gYSBET00gbm9kZVxuXHQgICAgICovXG5cdCAgICBhZGRJbWFnZTogZnVuY3Rpb24oc3JjLCBlbCkge1xuXHQgICAgICAgIC8vdG9kbzogdXNlIGpxdWVyeSBmYWxsYmFjayBpZiBhdmFpbGFibGUgZm9yIGFsbCBRU0EgcmVmZXJlbmNlc1xuXHQgICAgICAgIHZhciBub2RlcyA9IERPTS5nZXROb2RlQXJyYXkoZWwpO1xuXHQgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgICAgICAgICAgdmFyIGltZyA9IERPTS5uZXdFbCgnaW1nJyk7XG5cdCAgICAgICAgICAgIHZhciBkb21Qcm9wcyA9IHt9O1xuXHQgICAgICAgICAgICBkb21Qcm9wc1tBcHAuc2V0dXAuZGF0YUF0dHJdID0gc3JjO1xuXHQgICAgICAgICAgICBET00uc2V0QXR0cihpbWcsIGRvbVByb3BzKTtcblx0ICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChpbWcpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IGFuIGltYWdlIGlzIHVwZGF0ZWQgb24gcmVzaXplLlxuXHQgICAgICogSWYgYW4gaW1hZ2UgaXMgc2V0IHRvIGJlIHVwZGF0ZWQsIGl0IGlzIGltbWVkaWF0ZWx5IHJlbmRlcmVkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbCBJbWFnZSBET00gZWxlbWVudFxuXHQgICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSBSZXNpemFibGUgdXBkYXRlIGZsYWcgdmFsdWVcblx0ICAgICAqL1xuXHQgICAgc2V0UmVzaXplVXBkYXRlOiBmdW5jdGlvbihlbCwgdmFsdWUpIHtcblx0ICAgICAgICBpZiAoZWwuaG9sZGVyRGF0YSkge1xuXHQgICAgICAgICAgICBlbC5ob2xkZXJEYXRhLnJlc2l6ZVVwZGF0ZSA9ICEhdmFsdWU7XG5cdCAgICAgICAgICAgIGlmIChlbC5ob2xkZXJEYXRhLnJlc2l6ZVVwZGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgdXBkYXRlUmVzaXphYmxlRWxlbWVudHMoZWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblxuXHQgICAgLyoqXG5cdCAgICAgKiBSdW5zIEhvbGRlciB3aXRoIG9wdGlvbnMuIEJ5IGRlZmF1bHQgcnVucyBIb2xkZXIgb24gYWxsIGltYWdlcyB3aXRoIFwiaG9sZGVyLmpzXCIgaW4gdGhlaXIgc291cmNlIGF0dHJpYnV0ZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IHVzZXJPcHRpb25zIE9wdGlvbnMgb2JqZWN0LCBjYW4gY29udGFpbiBkb21haW4sIHRoZW1lcywgaW1hZ2VzLCBhbmQgYmdub2RlcyBwcm9wZXJ0aWVzXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24odXNlck9wdGlvbnMpIHtcblx0ICAgICAgICAvL3RvZG86IHNwbGl0IHByb2Nlc3NpbmcgaW50byBzZXBhcmF0ZSBxdWV1ZXNcblx0ICAgICAgICB1c2VyT3B0aW9ucyA9IHVzZXJPcHRpb25zIHx8IHt9O1xuXHQgICAgICAgIHZhciBlbmdpbmVTZXR0aW5ncyA9IHt9O1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kKEFwcC5zZXR0aW5ncywgdXNlck9wdGlvbnMpO1xuXG5cdCAgICAgICAgQXBwLnZhcnMucHJlZW1wdGVkID0gdHJ1ZTtcblx0ICAgICAgICBBcHAudmFycy5kYXRhQXR0ciA9IG9wdGlvbnMuZGF0YUF0dHIgfHwgQXBwLnNldHVwLmRhdGFBdHRyO1xuXHQgICAgICAgIEFwcC52YXJzLmxpbmVXcmFwUmF0aW8gPSBvcHRpb25zLmxpbmVXcmFwUmF0aW8gfHwgQXBwLnNldHVwLmxpbmVXcmFwUmF0aW87XG5cblx0ICAgICAgICBlbmdpbmVTZXR0aW5ncy5yZW5kZXJlciA9IG9wdGlvbnMucmVuZGVyZXIgPyBvcHRpb25zLnJlbmRlcmVyIDogQXBwLnNldHVwLnJlbmRlcmVyO1xuXHQgICAgICAgIGlmIChBcHAuc2V0dXAucmVuZGVyZXJzLmpvaW4oJywnKS5pbmRleE9mKGVuZ2luZVNldHRpbmdzLnJlbmRlcmVyKSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgZW5naW5lU2V0dGluZ3MucmVuZGVyZXIgPSBBcHAuc2V0dXAuc3VwcG9ydHNTVkcgPyAnc3ZnJyA6IChBcHAuc2V0dXAuc3VwcG9ydHNDYW52YXMgPyAnY2FudmFzJyA6ICdodG1sJyk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdmFyIGltYWdlcyA9IERPTS5nZXROb2RlQXJyYXkob3B0aW9ucy5pbWFnZXMpO1xuXHQgICAgICAgIHZhciBiZ25vZGVzID0gRE9NLmdldE5vZGVBcnJheShvcHRpb25zLmJnbm9kZXMpO1xuXHQgICAgICAgIHZhciBzdHlsZW5vZGVzID0gRE9NLmdldE5vZGVBcnJheShvcHRpb25zLnN0eWxlbm9kZXMpO1xuXHQgICAgICAgIHZhciBvYmplY3RzID0gRE9NLmdldE5vZGVBcnJheShvcHRpb25zLm9iamVjdHMpO1xuXG5cdCAgICAgICAgZW5naW5lU2V0dGluZ3Muc3R5bGVzaGVldHMgPSBbXTtcblx0ICAgICAgICBlbmdpbmVTZXR0aW5ncy5zdmdYTUxTdHlsZXNoZWV0ID0gdHJ1ZTtcblx0ICAgICAgICBlbmdpbmVTZXR0aW5ncy5ub0ZvbnRGYWxsYmFjayA9IG9wdGlvbnMubm9Gb250RmFsbGJhY2sgPyBvcHRpb25zLm5vRm9udEZhbGxiYWNrIDogZmFsc2U7XG5cblx0ICAgICAgICBzdHlsZW5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHN0eWxlTm9kZSkge1xuXHQgICAgICAgICAgICBpZiAoc3R5bGVOb2RlLmF0dHJpYnV0ZXMucmVsICYmIHN0eWxlTm9kZS5hdHRyaWJ1dGVzLmhyZWYgJiYgc3R5bGVOb2RlLmF0dHJpYnV0ZXMucmVsLnZhbHVlID09ICdzdHlsZXNoZWV0Jykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBzdHlsZU5vZGUuYXR0cmlidXRlcy5ocmVmLnZhbHVlO1xuXHQgICAgICAgICAgICAgICAgLy90b2RvOiB3cml0ZSBpc29tb3JwaGljIHJlbGF0aXZlLXRvLWFic29sdXRlIFVSTCBmdW5jdGlvblxuXHQgICAgICAgICAgICAgICAgdmFyIHByb3h5TGluayA9IERPTS5uZXdFbCgnYScpO1xuXHQgICAgICAgICAgICAgICAgcHJveHlMaW5rLmhyZWYgPSBocmVmO1xuXHQgICAgICAgICAgICAgICAgdmFyIHN0eWxlc2hlZXRVUkwgPSBwcm94eUxpbmsucHJvdG9jb2wgKyAnLy8nICsgcHJveHlMaW5rLmhvc3QgKyBwcm94eUxpbmsucGF0aG5hbWUgKyBwcm94eUxpbmsuc2VhcmNoO1xuXHQgICAgICAgICAgICAgICAgZW5naW5lU2V0dGluZ3Muc3R5bGVzaGVldHMucHVzaChzdHlsZXNoZWV0VVJMKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgYmdub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChiZ05vZGUpIHtcblx0ICAgICAgICAgICAgLy9Ta2lwIHByb2Nlc3NpbmcgYmFja2dyb3VuZCBub2RlcyBpZiBnZXRDb21wdXRlZFN0eWxlIGlzIHVuYXZhaWxhYmxlLCBzaW5jZSBvbmx5IG1vZGVybiBicm93c2VycyB3b3VsZCBiZSBhYmxlIHRvIHVzZSBjYW52YXMgb3IgU1ZHIHRvIHJlbmRlciB0byBiYWNrZ3JvdW5kXG5cdCAgICAgICAgICAgIGlmICghZ2xvYmFsLmdldENvbXB1dGVkU3R5bGUpIHJldHVybjtcblx0ICAgICAgICAgICAgdmFyIGJhY2tncm91bmRJbWFnZSA9IGdsb2JhbC5nZXRDb21wdXRlZFN0eWxlKGJnTm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnYmFja2dyb3VuZC1pbWFnZScpO1xuXHQgICAgICAgICAgICB2YXIgZGF0YUJhY2tncm91bmRJbWFnZSA9IGJnTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYmFja2dyb3VuZC1zcmMnKTtcblx0ICAgICAgICAgICAgdmFyIHJhd1VSTCA9IGRhdGFCYWNrZ3JvdW5kSW1hZ2UgfHwgYmFja2dyb3VuZEltYWdlO1xuXG5cdCAgICAgICAgICAgIHZhciBob2xkZXJVUkwgPSBudWxsO1xuXHQgICAgICAgICAgICB2YXIgaG9sZGVyU3RyaW5nID0gb3B0aW9ucy5kb21haW4gKyAnLyc7XG5cdCAgICAgICAgICAgIHZhciBob2xkZXJTdHJpbmdJbmRleCA9IHJhd1VSTC5pbmRleE9mKGhvbGRlclN0cmluZyk7XG5cblx0ICAgICAgICAgICAgaWYgKGhvbGRlclN0cmluZ0luZGV4ID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBob2xkZXJVUkwgPSByYXdVUkw7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoaG9sZGVyU3RyaW5nSW5kZXggPT09IDEgJiYgcmF3VVJMWzBdID09PSAnPycpIHtcblx0ICAgICAgICAgICAgICAgIGhvbGRlclVSTCA9IHJhd1VSTC5zbGljZSgxKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IHJhd1VSTC5zdWJzdHIoaG9sZGVyU3RyaW5nSW5kZXgpLm1hdGNoKC8oW15cXFwiXSopXCI/XFwpLyk7XG5cdCAgICAgICAgICAgICAgICBpZiAoZnJhZ21lbnQgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgICAgICBob2xkZXJVUkwgPSBmcmFnbWVudFsxXTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmF3VVJMLmluZGV4T2YoJ3VybCgnKSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRocm93ICdIb2xkZXI6IHVuYWJsZSB0byBwYXJzZSBiYWNrZ3JvdW5kIFVSTDogJyArIHJhd1VSTDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmIChob2xkZXJVUkwgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGhvbGRlckZsYWdzID0gcGFyc2VVUkwoaG9sZGVyVVJMLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgIGlmIChob2xkZXJGbGFncykge1xuXHQgICAgICAgICAgICAgICAgICAgIHByZXBhcmVET01FbGVtZW50KHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2JhY2tncm91bmQnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbDogYmdOb2RlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBmbGFnczogaG9sZGVyRmxhZ3MsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2luZVNldHRpbmdzOiBlbmdpbmVTZXR0aW5nc1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICBvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgICAgICAgICAgICB2YXIgb2JqZWN0QXR0ciA9IHt9O1xuXG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBvYmplY3RBdHRyLmRhdGEgPSBvYmplY3QuZ2V0QXR0cmlidXRlKCdkYXRhJyk7XG5cdCAgICAgICAgICAgICAgICBvYmplY3RBdHRyLmRhdGFTcmMgPSBvYmplY3QuZ2V0QXR0cmlidXRlKEFwcC52YXJzLmRhdGFBdHRyKTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0SGFzU3JjVVJMID0gb2JqZWN0QXR0ci5kYXRhICE9IG51bGwgJiYgb2JqZWN0QXR0ci5kYXRhLmluZGV4T2Yob3B0aW9ucy5kb21haW4pID09PSAwO1xuXHQgICAgICAgICAgICB2YXIgb2JqZWN0SGFzRGF0YVNyY1VSTCA9IG9iamVjdEF0dHIuZGF0YVNyYyAhPSBudWxsICYmIG9iamVjdEF0dHIuZGF0YVNyYy5pbmRleE9mKG9wdGlvbnMuZG9tYWluKSA9PT0gMDtcblxuXHQgICAgICAgICAgICBpZiAob2JqZWN0SGFzU3JjVVJMKSB7XG5cdCAgICAgICAgICAgICAgICBwcmVwYXJlSW1hZ2VFbGVtZW50KG9wdGlvbnMsIGVuZ2luZVNldHRpbmdzLCBvYmplY3RBdHRyLmRhdGEsIG9iamVjdCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqZWN0SGFzRGF0YVNyY1VSTCkge1xuXHQgICAgICAgICAgICAgICAgcHJlcGFyZUltYWdlRWxlbWVudChvcHRpb25zLCBlbmdpbmVTZXR0aW5ncywgb2JqZWN0QXR0ci5kYXRhU3JjLCBvYmplY3QpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1hZ2UpIHtcblx0ICAgICAgICAgICAgdmFyIGltYWdlQXR0ciA9IHt9O1xuXG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBpbWFnZUF0dHIuc3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0ICAgICAgICAgICAgICAgIGltYWdlQXR0ci5kYXRhU3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKEFwcC52YXJzLmRhdGFBdHRyKTtcblx0ICAgICAgICAgICAgICAgIGltYWdlQXR0ci5yZW5kZXJlZCA9IGltYWdlLmdldEF0dHJpYnV0ZSgnZGF0YS1ob2xkZXItcmVuZGVyZWQnKTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuXHQgICAgICAgICAgICB2YXIgaW1hZ2VIYXNTcmMgPSBpbWFnZUF0dHIuc3JjICE9IG51bGw7XG5cdCAgICAgICAgICAgIHZhciBpbWFnZUhhc0RhdGFTcmNVUkwgPSBpbWFnZUF0dHIuZGF0YVNyYyAhPSBudWxsICYmIGltYWdlQXR0ci5kYXRhU3JjLmluZGV4T2Yob3B0aW9ucy5kb21haW4pID09PSAwO1xuXHQgICAgICAgICAgICB2YXIgaW1hZ2VSZW5kZXJlZCA9IGltYWdlQXR0ci5yZW5kZXJlZCAhPSBudWxsICYmIGltYWdlQXR0ci5yZW5kZXJlZCA9PSAndHJ1ZSc7XG5cblx0ICAgICAgICAgICAgaWYgKGltYWdlSGFzU3JjKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VBdHRyLnNyYy5pbmRleE9mKG9wdGlvbnMuZG9tYWluKSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHByZXBhcmVJbWFnZUVsZW1lbnQob3B0aW9ucywgZW5naW5lU2V0dGluZ3MsIGltYWdlQXR0ci5zcmMsIGltYWdlKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VIYXNEYXRhU3JjVVJMKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy9JbWFnZSBoYXMgYSB2YWxpZCBkYXRhLXNyYyBhbmQgYW4gaW52YWxpZCBzcmNcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VSZW5kZXJlZCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBwbGFjZWhvbGRlciBoYXMgYWxyZWFkeSBiZWVuIHJlbmRlciwgcmUtcmVuZGVyIGl0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHByZXBhcmVJbWFnZUVsZW1lbnQob3B0aW9ucywgZW5naW5lU2V0dGluZ3MsIGltYWdlQXR0ci5kYXRhU3JjLCBpbWFnZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGUgcGxhY2Vob2xkZXIgaGFzIG5vdCBiZWVuIHJlbmRlcmVkLCBjaGVjayBpZiB0aGUgaW1hZ2UgZXhpc3RzIGFuZCByZW5kZXIgYSBmYWxsYmFjayBpZiBpdCBkb2Vzbid0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihzcmMsIG9wdGlvbnMsIGVuZ2luZVNldHRpbmdzLCBkYXRhU3JjLCBpbWFnZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaW1hZ2VFeGlzdHMoc3JjLCBmdW5jdGlvbihleGlzdHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVwYXJlSW1hZ2VFbGVtZW50KG9wdGlvbnMsIGVuZ2luZVNldHRpbmdzLCBkYXRhU3JjLCBpbWFnZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pKGltYWdlQXR0ci5zcmMsIG9wdGlvbnMsIGVuZ2luZVNldHRpbmdzLCBpbWFnZUF0dHIuZGF0YVNyYywgaW1hZ2UpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChpbWFnZUhhc0RhdGFTcmNVUkwpIHtcblx0ICAgICAgICAgICAgICAgIHByZXBhcmVJbWFnZUVsZW1lbnQob3B0aW9ucywgZW5naW5lU2V0dGluZ3MsIGltYWdlQXR0ci5kYXRhU3JjLCBpbWFnZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHR9O1xuXG5cdHZhciBBcHAgPSB7XG5cdCAgICBzZXR0aW5nczoge1xuXHQgICAgICAgIGRvbWFpbjogJ2hvbGRlci5qcycsXG5cdCAgICAgICAgaW1hZ2VzOiAnaW1nJyxcblx0ICAgICAgICBvYmplY3RzOiAnb2JqZWN0Jyxcblx0ICAgICAgICBiZ25vZGVzOiAnYm9keSAuaG9sZGVyanMnLFxuXHQgICAgICAgIHN0eWxlbm9kZXM6ICdoZWFkIGxpbmsuaG9sZGVyanMnLFxuXHQgICAgICAgIHRoZW1lczoge1xuXHQgICAgICAgICAgICAnZ3JheSc6IHtcblx0ICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjRUVFRUVFJyxcblx0ICAgICAgICAgICAgICAgIGZvcmVncm91bmQ6ICcjQUFBQUFBJ1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAnc29jaWFsJzoge1xuXHQgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyMzYTVhOTcnLFxuXHQgICAgICAgICAgICAgICAgZm9yZWdyb3VuZDogJyNGRkZGRkYnXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICdpbmR1c3RyaWFsJzoge1xuXHQgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyM0MzRBNTInLFxuXHQgICAgICAgICAgICAgICAgZm9yZWdyb3VuZDogJyNDMkYyMDAnXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICdza3knOiB7XG5cdCAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnIzBEOEZEQicsXG5cdCAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnI0ZGRkZGRidcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgJ3ZpbmUnOiB7XG5cdCAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnIzM5REJBQycsXG5cdCAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnIzFFMjkyQydcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgJ2xhdmEnOiB7XG5cdCAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI0Y4NTkxQScsXG5cdCAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnIzFDMjg0Nidcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIHNpemU6IDEwLFxuXHQgICAgICAgIHVuaXRzOiAncHQnLFxuXHQgICAgICAgIHNjYWxlOiAxIC8gMTZcblx0ICAgIH1cblx0fTtcblxuXHQvKipcblx0ICogUHJvY2Vzc2VzIHByb3ZpZGVkIHNvdXJjZSBhdHRyaWJ1dGUgYW5kIHNldHMgdXAgdGhlIGFwcHJvcHJpYXRlIHJlbmRlcmluZyB3b3JrZmxvd1xuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gb3B0aW9ucyBJbnN0YW5jZSBvcHRpb25zIGZyb20gSG9sZGVyLnJ1blxuXHQgKiBAcGFyYW0gcmVuZGVyU2V0dGluZ3MgSW5zdGFuY2UgY29uZmlndXJhdGlvblxuXHQgKiBAcGFyYW0gc3JjIEltYWdlIFVSTFxuXHQgKiBAcGFyYW0gZWwgSW1hZ2UgRE9NIGVsZW1lbnRcblx0ICovXG5cdGZ1bmN0aW9uIHByZXBhcmVJbWFnZUVsZW1lbnQob3B0aW9ucywgZW5naW5lU2V0dGluZ3MsIHNyYywgZWwpIHtcblx0ICAgIHZhciBob2xkZXJGbGFncyA9IHBhcnNlVVJMKHNyYy5zdWJzdHIoc3JjLmxhc3RJbmRleE9mKG9wdGlvbnMuZG9tYWluKSksIG9wdGlvbnMpO1xuXHQgICAgaWYgKGhvbGRlckZsYWdzKSB7XG5cdCAgICAgICAgcHJlcGFyZURPTUVsZW1lbnQoe1xuXHQgICAgICAgICAgICBtb2RlOiBudWxsLFxuXHQgICAgICAgICAgICBlbDogZWwsXG5cdCAgICAgICAgICAgIGZsYWdzOiBob2xkZXJGbGFncyxcblx0ICAgICAgICAgICAgZW5naW5lU2V0dGluZ3M6IGVuZ2luZVNldHRpbmdzXG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2Vzc2VzIGEgSG9sZGVyIFVSTCBhbmQgZXh0cmFjdHMgY29uZmlndXJhdGlvbiBmcm9tIHF1ZXJ5IHN0cmluZ1xuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gdXJsIFVSTFxuXHQgKiBAcGFyYW0gaW5zdGFuY2VPcHRpb25zIEluc3RhbmNlIG9wdGlvbnMgZnJvbSBIb2xkZXIucnVuXG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZVVSTCh1cmwsIGluc3RhbmNlT3B0aW9ucykge1xuXHQgICAgdmFyIGhvbGRlciA9IHtcblx0ICAgICAgICB0aGVtZTogZXh0ZW5kKEFwcC5zZXR0aW5ncy50aGVtZXMuZ3JheSwgbnVsbCksXG5cdCAgICAgICAgc3R5bGVzaGVldHM6IGluc3RhbmNlT3B0aW9ucy5zdHlsZXNoZWV0cyxcblx0ICAgICAgICBpbnN0YW5jZU9wdGlvbnM6IGluc3RhbmNlT3B0aW9uc1xuXHQgICAgfTtcblxuXHQgICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KCc/Jyk7XG5cdCAgICB2YXIgYmFzaWNzID0gcGFydHNbMF0uc3BsaXQoJy8nKTtcblxuXHQgICAgaG9sZGVyLmhvbGRlclVSTCA9IHVybDtcblxuXHQgICAgdmFyIGRpbWVuc2lvbnMgPSBiYXNpY3NbMV07XG5cdCAgICB2YXIgZGltZW5zaW9uRGF0YSA9IGRpbWVuc2lvbnMubWF0Y2goLyhbXFxkXStwPyl4KFtcXGRdK3A/KS8pO1xuXG5cdCAgICBpZiAoIWRpbWVuc2lvbkRhdGEpIHJldHVybiBmYWxzZTtcblxuXHQgICAgaG9sZGVyLmZsdWlkID0gZGltZW5zaW9ucy5pbmRleE9mKCdwJykgIT09IC0xO1xuXG5cdCAgICBob2xkZXIuZGltZW5zaW9ucyA9IHtcblx0ICAgICAgICB3aWR0aDogZGltZW5zaW9uRGF0YVsxXS5yZXBsYWNlKCdwJywgJyUnKSxcblx0ICAgICAgICBoZWlnaHQ6IGRpbWVuc2lvbkRhdGFbMl0ucmVwbGFjZSgncCcsICclJylcblx0ICAgIH07XG5cblx0ICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHBhcnRzWzFdKTtcblxuXHQgICAgICAgIC8vIENvbG9yc1xuXG5cdCAgICAgICAgaWYgKG9wdGlvbnMuYmcpIHtcblx0ICAgICAgICAgICAgaG9sZGVyLnRoZW1lLmJhY2tncm91bmQgPSB1dGlscy5wYXJzZUNvbG9yKG9wdGlvbnMuYmcpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChvcHRpb25zLmZnKSB7XG5cdCAgICAgICAgICAgIGhvbGRlci50aGVtZS5mb3JlZ3JvdW5kID0gdXRpbHMucGFyc2VDb2xvcihvcHRpb25zLmZnKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvL3RvZG86IGFkZCBhdXRvbWF0aWMgZm9yZWdyb3VuZCB0byB0aGVtZXMgd2l0aG91dCBmb3JlZ3JvdW5kXG5cdCAgICAgICAgaWYgKG9wdGlvbnMuYmcgJiYgIW9wdGlvbnMuZmcpIHtcblx0ICAgICAgICAgICAgaG9sZGVyLmF1dG9GZyA9IHRydWU7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKG9wdGlvbnMudGhlbWUgJiYgaG9sZGVyLmluc3RhbmNlT3B0aW9ucy50aGVtZXMuaGFzT3duUHJvcGVydHkob3B0aW9ucy50aGVtZSkpIHtcblx0ICAgICAgICAgICAgaG9sZGVyLnRoZW1lID0gZXh0ZW5kKGhvbGRlci5pbnN0YW5jZU9wdGlvbnMudGhlbWVzW29wdGlvbnMudGhlbWVdLCBudWxsKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBUZXh0XG5cblx0ICAgICAgICBpZiAob3B0aW9ucy50ZXh0KSB7XG5cdCAgICAgICAgICAgIGhvbGRlci50ZXh0ID0gb3B0aW9ucy50ZXh0O1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChvcHRpb25zLnRleHRtb2RlKSB7XG5cdCAgICAgICAgICAgIGhvbGRlci50ZXh0bW9kZSA9IG9wdGlvbnMudGV4dG1vZGU7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKG9wdGlvbnMuc2l6ZSkge1xuXHQgICAgICAgICAgICBob2xkZXIuc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAob3B0aW9ucy5mb250KSB7XG5cdCAgICAgICAgICAgIGhvbGRlci5mb250ID0gb3B0aW9ucy5mb250O1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChvcHRpb25zLmFsaWduKSB7XG5cdCAgICAgICAgICAgIGhvbGRlci5hbGlnbiA9IG9wdGlvbnMuYWxpZ247XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaG9sZGVyLm5vd3JhcCA9IHV0aWxzLnRydXRoeShvcHRpb25zLm5vd3JhcCk7XG5cblx0ICAgICAgICAvLyBNaXNjZWxsYW5lb3VzXG5cblx0ICAgICAgICBob2xkZXIuYXV0byA9IHV0aWxzLnRydXRoeShvcHRpb25zLmF1dG8pO1xuXG5cdCAgICAgICAgaG9sZGVyLm91dGxpbmUgPSB1dGlscy50cnV0aHkob3B0aW9ucy5vdXRsaW5lKTtcblxuXHQgICAgICAgIGlmICh1dGlscy50cnV0aHkob3B0aW9ucy5yYW5kb20pKSB7XG5cdCAgICAgICAgICAgIEFwcC52YXJzLmNhY2hlLnRoZW1lS2V5cyA9IEFwcC52YXJzLmNhY2hlLnRoZW1lS2V5cyB8fCBPYmplY3Qua2V5cyhob2xkZXIuaW5zdGFuY2VPcHRpb25zLnRoZW1lcyk7XG5cdCAgICAgICAgICAgIHZhciBfdGhlbWUgPSBBcHAudmFycy5jYWNoZS50aGVtZUtleXNbMCB8IE1hdGgucmFuZG9tKCkgKiBBcHAudmFycy5jYWNoZS50aGVtZUtleXMubGVuZ3RoXTtcblx0ICAgICAgICAgICAgaG9sZGVyLnRoZW1lID0gZXh0ZW5kKGhvbGRlci5pbnN0YW5jZU9wdGlvbnMudGhlbWVzW190aGVtZV0sIG51bGwpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIGhvbGRlcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBNb2RpZmllcyB0aGUgRE9NIHRvIGZpdCBwbGFjZWhvbGRlcnMgYW5kIHNldHMgdXAgcmVzaXphYmxlIGltYWdlIGNhbGxiYWNrcyAoZm9yIGZsdWlkIGFuZCBhdXRvbWF0aWNhbGx5IHNpemVkIHBsYWNlaG9sZGVycylcblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHNldHRpbmdzIERPTSBwcmVwIHNldHRpbmdzXG5cdCAqL1xuXHRmdW5jdGlvbiBwcmVwYXJlRE9NRWxlbWVudChwcmVwU2V0dGluZ3MpIHtcblx0ICAgIHZhciBtb2RlID0gcHJlcFNldHRpbmdzLm1vZGU7XG5cdCAgICB2YXIgZWwgPSBwcmVwU2V0dGluZ3MuZWw7XG5cdCAgICB2YXIgZmxhZ3MgPSBwcmVwU2V0dGluZ3MuZmxhZ3M7XG5cdCAgICB2YXIgX2VuZ2luZVNldHRpbmdzID0gcHJlcFNldHRpbmdzLmVuZ2luZVNldHRpbmdzO1xuXHQgICAgdmFyIGRpbWVuc2lvbnMgPSBmbGFncy5kaW1lbnNpb25zLFxuXHQgICAgICAgIHRoZW1lID0gZmxhZ3MudGhlbWU7XG5cdCAgICB2YXIgZGltZW5zaW9uc0NhcHRpb24gPSBkaW1lbnNpb25zLndpZHRoICsgJ3gnICsgZGltZW5zaW9ucy5oZWlnaHQ7XG5cdCAgICBtb2RlID0gbW9kZSA9PSBudWxsID8gKGZsYWdzLmZsdWlkID8gJ2ZsdWlkJyA6ICdpbWFnZScpIDogbW9kZTtcblxuXHQgICAgaWYgKGZsYWdzLnRleHQgIT0gbnVsbCkge1xuXHQgICAgICAgIHRoZW1lLnRleHQgPSBmbGFncy50ZXh0O1xuXG5cdCAgICAgICAgLy88b2JqZWN0PiBTVkcgZW1iZWRkaW5nIGRvZXNuJ3QgcGFyc2UgVW5pY29kZSBwcm9wZXJseVxuXHQgICAgICAgIGlmIChlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgICB2YXIgdGV4dExpbmVzID0gdGhlbWUudGV4dC5zcGxpdCgnXFxcXG4nKTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0ZXh0TGluZXMubGVuZ3RoOyBrKyspIHtcblx0ICAgICAgICAgICAgICAgIHRleHRMaW5lc1trXSA9IHV0aWxzLmVuY29kZUh0bWxFbnRpdHkodGV4dExpbmVzW2tdKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGVtZS50ZXh0ID0gdGV4dExpbmVzLmpvaW4oJ1xcXFxuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICB2YXIgaG9sZGVyVVJMID0gZmxhZ3MuaG9sZGVyVVJMO1xuXHQgICAgdmFyIGVuZ2luZVNldHRpbmdzID0gZXh0ZW5kKF9lbmdpbmVTZXR0aW5ncywgbnVsbCk7XG5cblx0ICAgIGlmIChmbGFncy5mb250KSB7XG5cdCAgICAgICAgLypcblx0ICAgICAgICBJZiBleHRlcm5hbCBmb250cyBhcmUgdXNlZCBpbiBhIDxpbWc+IHBsYWNlaG9sZGVyIHJlbmRlcmVkIHdpdGggU1ZHLCBIb2xkZXIgZmFsbHMgYmFjayB0byBjYW52YXMuXG5cblx0ICAgICAgICBUaGlzIGlzIGRvbmUgYmVjYXVzZSBGaXJlZm94IGFuZCBDaHJvbWUgZGlzYWxsb3cgZW1iZWRkZWQgU1ZHcyBmcm9tIHJlZmVyZW5jaW5nIGV4dGVybmFsIGFzc2V0cy5cblx0ICAgICAgICBUaGUgd29ya2Fyb3VuZCBpcyBlaXRoZXIgdG8gY2hhbmdlIHRoZSBwbGFjZWhvbGRlciB0YWcgZnJvbSA8aW1nPiB0byA8b2JqZWN0PiBvciB0byB1c2UgdGhlIGNhbnZhcyByZW5kZXJlci5cblx0ICAgICAgICAqL1xuXHQgICAgICAgIHRoZW1lLmZvbnQgPSBmbGFncy5mb250O1xuXHQgICAgICAgIGlmICghZW5naW5lU2V0dGluZ3Mubm9Gb250RmFsbGJhY2sgJiYgZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltZycgJiYgQXBwLnNldHVwLnN1cHBvcnRzQ2FudmFzICYmIGVuZ2luZVNldHRpbmdzLnJlbmRlcmVyID09PSAnc3ZnJykge1xuXHQgICAgICAgICAgICBlbmdpbmVTZXR0aW5ncyA9IGV4dGVuZChlbmdpbmVTZXR0aW5ncywge1xuXHQgICAgICAgICAgICAgICAgcmVuZGVyZXI6ICdjYW52YXMnXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgLy9DaHJvbWUgYW5kIE9wZXJhIHJlcXVpcmUgYSBxdWljayAxMG1zIHJlLXJlbmRlciBpZiB3ZWIgZm9udHMgYXJlIHVzZWQgd2l0aCBjYW52YXNcblx0ICAgIGlmIChmbGFncy5mb250ICYmIGVuZ2luZVNldHRpbmdzLnJlbmRlcmVyID09ICdjYW52YXMnKSB7XG5cdCAgICAgICAgZW5naW5lU2V0dGluZ3MucmVSZW5kZXIgPSB0cnVlO1xuXHQgICAgfVxuXG5cdCAgICBpZiAobW9kZSA9PSAnYmFja2dyb3VuZCcpIHtcblx0ICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWJhY2tncm91bmQtc3JjJykgPT0gbnVsbCkge1xuXHQgICAgICAgICAgICBET00uc2V0QXR0cihlbCwge1xuXHQgICAgICAgICAgICAgICAgJ2RhdGEtYmFja2dyb3VuZC1zcmMnOiBob2xkZXJVUkxcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgZG9tUHJvcHMgPSB7fTtcblx0ICAgICAgICBkb21Qcm9wc1tBcHAudmFycy5kYXRhQXR0cl0gPSBob2xkZXJVUkw7XG5cdCAgICAgICAgRE9NLnNldEF0dHIoZWwsIGRvbVByb3BzKTtcblx0ICAgIH1cblxuXHQgICAgZmxhZ3MudGhlbWUgPSB0aGVtZTtcblxuXHQgICAgLy90b2RvIGNvbnNpZGVyIHVzaW5nIGFsbCByZW5kZXJTZXR0aW5ncyBpbiBob2xkZXJEYXRhXG5cdCAgICBlbC5ob2xkZXJEYXRhID0ge1xuXHQgICAgICAgIGZsYWdzOiBmbGFncyxcblx0ICAgICAgICBlbmdpbmVTZXR0aW5nczogZW5naW5lU2V0dGluZ3Ncblx0ICAgIH07XG5cblx0ICAgIGlmIChtb2RlID09ICdpbWFnZScgfHwgbW9kZSA9PSAnZmx1aWQnKSB7XG5cdCAgICAgICAgRE9NLnNldEF0dHIoZWwsIHtcblx0ICAgICAgICAgICAgJ2FsdCc6ICh0aGVtZS50ZXh0ID8gdGhlbWUudGV4dCArICcgWycgKyBkaW1lbnNpb25zQ2FwdGlvbiArICddJyA6IGRpbWVuc2lvbnNDYXB0aW9uKVxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgcmVuZGVyU2V0dGluZ3MgPSB7XG5cdCAgICAgICAgbW9kZTogbW9kZSxcblx0ICAgICAgICBlbDogZWwsXG5cdCAgICAgICAgaG9sZGVyU2V0dGluZ3M6IHtcblx0ICAgICAgICAgICAgZGltZW5zaW9uczogZGltZW5zaW9ucyxcblx0ICAgICAgICAgICAgdGhlbWU6IHRoZW1lLFxuXHQgICAgICAgICAgICBmbGFnczogZmxhZ3Ncblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVuZ2luZVNldHRpbmdzOiBlbmdpbmVTZXR0aW5nc1xuXHQgICAgfTtcblxuXHQgICAgaWYgKG1vZGUgPT0gJ2ltYWdlJykge1xuXHQgICAgICAgIGlmICghZmxhZ3MuYXV0bykge1xuXHQgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGRpbWVuc2lvbnMud2lkdGggKyAncHgnO1xuXHQgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodCArICdweCc7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKGVuZ2luZVNldHRpbmdzLnJlbmRlcmVyID09ICdodG1sJykge1xuXHQgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGVtZS5iYWNrZ3JvdW5kO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJlbmRlcihyZW5kZXJTZXR0aW5ncyk7XG5cblx0ICAgICAgICAgICAgaWYgKGZsYWdzLnRleHRtb2RlID09ICdleGFjdCcpIHtcblx0ICAgICAgICAgICAgICAgIGVsLmhvbGRlckRhdGEucmVzaXplVXBkYXRlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIEFwcC52YXJzLnJlc2l6YWJsZUltYWdlcy5wdXNoKGVsKTtcblx0ICAgICAgICAgICAgICAgIHVwZGF0ZVJlc2l6YWJsZUVsZW1lbnRzKGVsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAobW9kZSA9PSAnYmFja2dyb3VuZCcgJiYgZW5naW5lU2V0dGluZ3MucmVuZGVyZXIgIT0gJ2h0bWwnKSB7XG5cdCAgICAgICAgcmVuZGVyKHJlbmRlclNldHRpbmdzKTtcblx0ICAgIH0gZWxzZSBpZiAobW9kZSA9PSAnZmx1aWQnKSB7XG5cdCAgICAgICAgZWwuaG9sZGVyRGF0YS5yZXNpemVVcGRhdGUgPSB0cnVlO1xuXG5cdCAgICAgICAgaWYgKGRpbWVuc2lvbnMuaGVpZ2h0LnNsaWNlKC0xKSA9PSAnJScpIHtcblx0ICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQ7XG5cdCAgICAgICAgfSBlbHNlIGlmIChmbGFncy5hdXRvID09IG51bGwgfHwgIWZsYWdzLmF1dG8pIHtcblx0ICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQgKyAncHgnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZGltZW5zaW9ucy53aWR0aC5zbGljZSgtMSkgPT0gJyUnKSB7XG5cdCAgICAgICAgICAgIGVsLnN0eWxlLndpZHRoID0gZGltZW5zaW9ucy53aWR0aDtcblx0ICAgICAgICB9IGVsc2UgaWYgKGZsYWdzLmF1dG8gPT0gbnVsbCB8fCAhZmxhZ3MuYXV0bykge1xuXHQgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGRpbWVuc2lvbnMud2lkdGggKyAncHgnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZWwuc3R5bGUuZGlzcGxheSA9PSAnaW5saW5lJyB8fCBlbC5zdHlsZS5kaXNwbGF5ID09PSAnJyB8fCBlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xuXHQgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBzZXRJbml0aWFsRGltZW5zaW9ucyhlbCk7XG5cblx0ICAgICAgICBpZiAoZW5naW5lU2V0dGluZ3MucmVuZGVyZXIgPT0gJ2h0bWwnKSB7XG5cdCAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoZW1lLmJhY2tncm91bmQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgQXBwLnZhcnMucmVzaXphYmxlSW1hZ2VzLnB1c2goZWwpO1xuXHQgICAgICAgICAgICB1cGRhdGVSZXNpemFibGVFbGVtZW50cyhlbCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cblx0LyoqXG5cdCAqIENvcmUgZnVuY3Rpb24gdGhhdCB0YWtlcyBvdXRwdXQgZnJvbSByZW5kZXJlcnMgYW5kIHNldHMgaXQgYXMgdGhlIHNvdXJjZSBvciBiYWNrZ3JvdW5kLWltYWdlIG9mIHRoZSB0YXJnZXQgZWxlbWVudFxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gcmVuZGVyU2V0dGluZ3MgUmVuZGVyZXIgc2V0dGluZ3Ncblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlcihyZW5kZXJTZXR0aW5ncykge1xuXHQgICAgdmFyIGltYWdlID0gbnVsbDtcblx0ICAgIHZhciBtb2RlID0gcmVuZGVyU2V0dGluZ3MubW9kZTtcblx0ICAgIHZhciBlbCA9IHJlbmRlclNldHRpbmdzLmVsO1xuXHQgICAgdmFyIGhvbGRlclNldHRpbmdzID0gcmVuZGVyU2V0dGluZ3MuaG9sZGVyU2V0dGluZ3M7XG5cdCAgICB2YXIgZW5naW5lU2V0dGluZ3MgPSByZW5kZXJTZXR0aW5ncy5lbmdpbmVTZXR0aW5ncztcblxuXHQgICAgc3dpdGNoIChlbmdpbmVTZXR0aW5ncy5yZW5kZXJlcikge1xuXHQgICAgICAgIGNhc2UgJ3N2Zyc6XG5cdCAgICAgICAgICAgIGlmICghQXBwLnNldHVwLnN1cHBvcnRzU1ZHKSByZXR1cm47XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIGNhc2UgJ2NhbnZhcyc6XG5cdCAgICAgICAgICAgIGlmICghQXBwLnNldHVwLnN1cHBvcnRzQ2FudmFzKSByZXR1cm47XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgIH1cblxuXHQgICAgLy90b2RvOiBtb3ZlIGdlbmVyYXRpb24gb2Ygc2NlbmUgdXAgdG8gZmxhZyBnZW5lcmF0aW9uIHRvIHJlZHVjZSBleHRyYSBvYmplY3QgY3JlYXRpb25cblx0ICAgIHZhciBzY2VuZSA9IHtcblx0ICAgICAgICB3aWR0aDogaG9sZGVyU2V0dGluZ3MuZGltZW5zaW9ucy53aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IGhvbGRlclNldHRpbmdzLmRpbWVuc2lvbnMuaGVpZ2h0LFxuXHQgICAgICAgIHRoZW1lOiBob2xkZXJTZXR0aW5ncy50aGVtZSxcblx0ICAgICAgICBmbGFnczogaG9sZGVyU2V0dGluZ3MuZmxhZ3Ncblx0ICAgIH07XG5cblx0ICAgIHZhciBzY2VuZUdyYXBoID0gYnVpbGRTY2VuZUdyYXBoKHNjZW5lKTtcblxuXHQgICAgZnVuY3Rpb24gZ2V0UmVuZGVyZWRJbWFnZSgpIHtcblx0ICAgICAgICB2YXIgaW1hZ2UgPSBudWxsO1xuXHQgICAgICAgIHN3aXRjaCAoZW5naW5lU2V0dGluZ3MucmVuZGVyZXIpIHtcblx0ICAgICAgICAgICAgY2FzZSAnY2FudmFzJzpcblx0ICAgICAgICAgICAgICAgIGltYWdlID0gc2dDYW52YXNSZW5kZXJlcihzY2VuZUdyYXBoLCByZW5kZXJTZXR0aW5ncyk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAnc3ZnJzpcblx0ICAgICAgICAgICAgICAgIGltYWdlID0gc3ZnUmVuZGVyZXIoc2NlbmVHcmFwaCwgcmVuZGVyU2V0dGluZ3MpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICB0aHJvdyAnSG9sZGVyOiBpbnZhbGlkIHJlbmRlcmVyOiAnICsgZW5naW5lU2V0dGluZ3MucmVuZGVyZXI7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgcmV0dXJuIGltYWdlO1xuXHQgICAgfVxuXG5cdCAgICBpbWFnZSA9IGdldFJlbmRlcmVkSW1hZ2UoKTtcblxuXHQgICAgaWYgKGltYWdlID09IG51bGwpIHtcblx0ICAgICAgICB0aHJvdyAnSG9sZGVyOiBjb3VsZG5cXCd0IHJlbmRlciBwbGFjZWhvbGRlcic7XG5cdCAgICB9XG5cblx0ICAgIC8vdG9kbzogYWRkIDxvYmplY3Q+IGNhbnZhcyByZW5kZXJpbmdcblx0ICAgIGlmIChtb2RlID09ICdiYWNrZ3JvdW5kJykge1xuXHQgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltYWdlICsgJyknO1xuXHQgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRTaXplID0gc2NlbmUud2lkdGggKyAncHggJyArIHNjZW5lLmhlaWdodCArICdweCc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1nJykge1xuXHQgICAgICAgICAgICBET00uc2V0QXR0cihlbCwge1xuXHQgICAgICAgICAgICAgICAgJ3NyYyc6IGltYWdlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgRE9NLnNldEF0dHIoZWwsIHtcblx0ICAgICAgICAgICAgICAgICdkYXRhJzogaW1hZ2Vcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIERPTS5zZXRBdHRyKGVsLCB7XG5cdCAgICAgICAgICAgICAgICAndHlwZSc6ICdpbWFnZS9zdmcreG1sJ1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGVuZ2luZVNldHRpbmdzLnJlUmVuZGVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IGdldFJlbmRlcmVkSW1hZ2UoKTtcblx0ICAgICAgICAgICAgICAgIGlmIChpbWFnZSA9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ0hvbGRlcjogY291bGRuXFwndCByZW5kZXIgcGxhY2Vob2xkZXInO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy90b2RvOiByZWZhY3RvciB0aGlzIGNvZGUgaW50byBhIGZ1bmN0aW9uXG5cdCAgICAgICAgICAgICAgICBpZiAoZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltZycpIHtcblx0ICAgICAgICAgICAgICAgICAgICBET00uc2V0QXR0cihlbCwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAnc3JjJzogaW1hZ2Vcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgICAgICAgICBET00uc2V0QXR0cihlbCwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IGltYWdlXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgRE9NLnNldEF0dHIoZWwsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnaW1hZ2Uvc3ZnK3htbCdcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgMTUwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICAvL3RvZG86IGFjY291bnQgZm9yIHJlLXJlbmRlcmluZ1xuXHQgICAgRE9NLnNldEF0dHIoZWwsIHtcblx0ICAgICAgICAnZGF0YS1ob2xkZXItcmVuZGVyZWQnOiB0cnVlXG5cdCAgICB9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb3JlIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBIb2xkZXIgc2NlbmUgZGVzY3JpcHRpb24gYW5kIGJ1aWxkcyBhIHNjZW5lIGdyYXBoXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSBzY2VuZSBIb2xkZXIgc2NlbmUgb2JqZWN0XG5cdCAqL1xuXHQvL3RvZG86IG1ha2UgdGhpcyBmdW5jdGlvbiByZXVzYWJsZVxuXHQvL3RvZG86IG1lcmdlIGFwcCBkZWZhdWx0cyBhbmQgc2V0dXAgcHJvcGVydGllcyBpbnRvIHRoZSBzY2VuZSBhcmd1bWVudFxuXHRmdW5jdGlvbiBidWlsZFNjZW5lR3JhcGgoc2NlbmUpIHtcblx0ICAgIHZhciBmb250U2l6ZSA9IEFwcC5kZWZhdWx0cy5zaXplO1xuXHQgICAgaWYgKHBhcnNlRmxvYXQoc2NlbmUudGhlbWUuc2l6ZSkpIHtcblx0ICAgICAgICBmb250U2l6ZSA9IHNjZW5lLnRoZW1lLnNpemU7XG5cdCAgICB9IGVsc2UgaWYgKHBhcnNlRmxvYXQoc2NlbmUuZmxhZ3Muc2l6ZSkpIHtcblx0ICAgICAgICBmb250U2l6ZSA9IHNjZW5lLmZsYWdzLnNpemU7XG5cdCAgICB9XG5cblx0ICAgIHNjZW5lLmZvbnQgPSB7XG5cdCAgICAgICAgZmFtaWx5OiBzY2VuZS50aGVtZS5mb250ID8gc2NlbmUudGhlbWUuZm9udCA6ICdBcmlhbCwgSGVsdmV0aWNhLCBPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgIHNpemU6IHRleHRTaXplKHNjZW5lLndpZHRoLCBzY2VuZS5oZWlnaHQsIGZvbnRTaXplLCBBcHAuZGVmYXVsdHMuc2NhbGUpLFxuXHQgICAgICAgIHVuaXRzOiBzY2VuZS50aGVtZS51bml0cyA/IHNjZW5lLnRoZW1lLnVuaXRzIDogQXBwLmRlZmF1bHRzLnVuaXRzLFxuXHQgICAgICAgIHdlaWdodDogc2NlbmUudGhlbWUuZm9udHdlaWdodCA/IHNjZW5lLnRoZW1lLmZvbnR3ZWlnaHQgOiAnYm9sZCdcblx0ICAgIH07XG5cblx0ICAgIHNjZW5lLnRleHQgPSBzY2VuZS50aGVtZS50ZXh0IHx8IE1hdGguZmxvb3Ioc2NlbmUud2lkdGgpICsgJ3gnICsgTWF0aC5mbG9vcihzY2VuZS5oZWlnaHQpO1xuXG5cdCAgICBzY2VuZS5ub1dyYXAgPSBzY2VuZS50aGVtZS5ub3dyYXAgfHwgc2NlbmUuZmxhZ3Mubm93cmFwO1xuXG5cdCAgICBzY2VuZS5hbGlnbiA9IHNjZW5lLnRoZW1lLmFsaWduIHx8IHNjZW5lLmZsYWdzLmFsaWduIHx8ICdjZW50ZXInO1xuXG5cdCAgICBzd2l0Y2ggKHNjZW5lLmZsYWdzLnRleHRtb2RlKSB7XG5cdCAgICAgICAgY2FzZSAnbGl0ZXJhbCc6XG5cdCAgICAgICAgICAgIHNjZW5lLnRleHQgPSBzY2VuZS5mbGFncy5kaW1lbnNpb25zLndpZHRoICsgJ3gnICsgc2NlbmUuZmxhZ3MuZGltZW5zaW9ucy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIGNhc2UgJ2V4YWN0Jzpcblx0ICAgICAgICAgICAgaWYgKCFzY2VuZS5mbGFncy5leGFjdERpbWVuc2lvbnMpIGJyZWFrO1xuXHQgICAgICAgICAgICBzY2VuZS50ZXh0ID0gTWF0aC5mbG9vcihzY2VuZS5mbGFncy5leGFjdERpbWVuc2lvbnMud2lkdGgpICsgJ3gnICsgTWF0aC5mbG9vcihzY2VuZS5mbGFncy5leGFjdERpbWVuc2lvbnMuaGVpZ2h0KTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cblx0ICAgIHZhciBzY2VuZUdyYXBoID0gbmV3IFNjZW5lR3JhcGgoe1xuXHQgICAgICAgIHdpZHRoOiBzY2VuZS53aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IHNjZW5lLmhlaWdodFxuXHQgICAgfSk7XG5cblx0ICAgIHZhciBTaGFwZSA9IHNjZW5lR3JhcGguU2hhcGU7XG5cblx0ICAgIHZhciBob2xkZXJCZyA9IG5ldyBTaGFwZS5SZWN0KCdob2xkZXJCZycsIHtcblx0ICAgICAgICBmaWxsOiBzY2VuZS50aGVtZS5iYWNrZ3JvdW5kXG5cdCAgICB9KTtcblxuXHQgICAgaG9sZGVyQmcucmVzaXplKHNjZW5lLndpZHRoLCBzY2VuZS5oZWlnaHQpO1xuXHQgICAgc2NlbmVHcmFwaC5yb290LmFkZChob2xkZXJCZyk7XG5cblx0ICAgIGlmIChzY2VuZS5mbGFncy5vdXRsaW5lKSB7XG5cdCAgICAgICAgdmFyIG91dGxpbmVDb2xvciA9IG5ldyBDb2xvcihob2xkZXJCZy5wcm9wZXJ0aWVzLmZpbGwpO1xuXHQgICAgICAgIG91dGxpbmVDb2xvciA9IG91dGxpbmVDb2xvci5saWdodGVuKG91dGxpbmVDb2xvci5saWdodGVyVGhhbignN2Y3ZjdmJykgPyAtMC4xIDogMC4xKTtcblx0ICAgICAgICBob2xkZXJCZy5wcm9wZXJ0aWVzLm91dGxpbmUgPSB7XG5cdCAgICAgICAgICAgIGZpbGw6IG91dGxpbmVDb2xvci50b0hleCh0cnVlKSxcblx0ICAgICAgICAgICAgd2lkdGg6IDJcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXG5cdCAgICB2YXIgaG9sZGVyVGV4dENvbG9yID0gc2NlbmUudGhlbWUuZm9yZWdyb3VuZDtcblxuXHQgICAgaWYgKHNjZW5lLmZsYWdzLmF1dG9GZykge1xuXHQgICAgICAgIHZhciBob2xkZXJCZ0NvbG9yID0gbmV3IENvbG9yKGhvbGRlckJnLnByb3BlcnRpZXMuZmlsbCk7XG5cdCAgICAgICAgdmFyIGxpZ2h0Q29sb3IgPSBuZXcgQ29sb3IoJ2ZmZicpO1xuXHQgICAgICAgIHZhciBkYXJrQ29sb3IgPSBuZXcgQ29sb3IoJzAwMCcsIHtcblx0ICAgICAgICAgICAgJ2FscGhhJzogMC4yODU3MTRcblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIGhvbGRlclRleHRDb2xvciA9IGhvbGRlckJnQ29sb3IuYmxlbmRBbHBoYShob2xkZXJCZ0NvbG9yLmxpZ2h0ZXJUaGFuKCc3ZjdmN2YnKSA/IGRhcmtDb2xvciA6IGxpZ2h0Q29sb3IpLnRvSGV4KHRydWUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgaG9sZGVyVGV4dEdyb3VwID0gbmV3IFNoYXBlLkdyb3VwKCdob2xkZXJUZXh0R3JvdXAnLCB7XG5cdCAgICAgICAgdGV4dDogc2NlbmUudGV4dCxcblx0ICAgICAgICBhbGlnbjogc2NlbmUuYWxpZ24sXG5cdCAgICAgICAgZm9udDogc2NlbmUuZm9udCxcblx0ICAgICAgICBmaWxsOiBob2xkZXJUZXh0Q29sb3Jcblx0ICAgIH0pO1xuXG5cdCAgICBob2xkZXJUZXh0R3JvdXAubW92ZVRvKG51bGwsIG51bGwsIDEpO1xuXHQgICAgc2NlbmVHcmFwaC5yb290LmFkZChob2xkZXJUZXh0R3JvdXApO1xuXG5cdCAgICB2YXIgdHBkYXRhID0gaG9sZGVyVGV4dEdyb3VwLnRleHRQb3NpdGlvbkRhdGEgPSBzdGFnaW5nUmVuZGVyZXIoc2NlbmVHcmFwaCk7XG5cdCAgICBpZiAoIXRwZGF0YSkge1xuXHQgICAgICAgIHRocm93ICdIb2xkZXI6IHN0YWdpbmcgZmFsbGJhY2sgbm90IHN1cHBvcnRlZCB5ZXQuJztcblx0ICAgIH1cblx0ICAgIGhvbGRlclRleHRHcm91cC5wcm9wZXJ0aWVzLmxlYWRpbmcgPSB0cGRhdGEuYm91bmRpbmdCb3guaGVpZ2h0O1xuXG5cdCAgICB2YXIgdGV4dE5vZGUgPSBudWxsO1xuXHQgICAgdmFyIGxpbmUgPSBudWxsO1xuXG5cdCAgICBmdW5jdGlvbiBmaW5hbGl6ZUxpbmUocGFyZW50LCBsaW5lLCB3aWR0aCwgaGVpZ2h0KSB7XG5cdCAgICAgICAgbGluZS53aWR0aCA9IHdpZHRoO1xuXHQgICAgICAgIGxpbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuXHQgICAgICAgIHBhcmVudC53aWR0aCA9IE1hdGgubWF4KHBhcmVudC53aWR0aCwgbGluZS53aWR0aCk7XG5cdCAgICAgICAgcGFyZW50LmhlaWdodCArPSBsaW5lLmhlaWdodDtcblx0ICAgIH1cblxuXHQgICAgdmFyIHNjZW5lTWFyZ2luID0gc2NlbmUud2lkdGggKiBBcHAudmFycy5saW5lV3JhcFJhdGlvO1xuXHQgICAgdmFyIG1heExpbmVXaWR0aCA9IHNjZW5lTWFyZ2luO1xuXG5cdCAgICBpZiAodHBkYXRhLmxpbmVDb3VudCA+IDEpIHtcblx0ICAgICAgICB2YXIgb2Zmc2V0WCA9IDA7XG5cdCAgICAgICAgdmFyIG9mZnNldFkgPSAwO1xuXHQgICAgICAgIHZhciBsaW5lSW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBsaW5lS2V5O1xuXHQgICAgICAgIGxpbmUgPSBuZXcgU2hhcGUuR3JvdXAoJ2xpbmUnICsgbGluZUluZGV4KTtcblxuXHQgICAgICAgIC8vRG91YmxlIG1hcmdpbiBzbyB0aGF0IGxlZnQvcmlnaHQtYWxpZ25lZCBuZXh0IGlzIG5vdCBmbHVzaCB3aXRoIGVkZ2Ugb2YgaW1hZ2Vcblx0ICAgICAgICBpZiAoc2NlbmUuYWxpZ24gPT09ICdsZWZ0JyB8fCBzY2VuZS5hbGlnbiA9PT0gJ3JpZ2h0Jykge1xuXHQgICAgICAgICAgICBtYXhMaW5lV2lkdGggPSBzY2VuZS53aWR0aCAqICgxIC0gKDEgLSAoQXBwLnZhcnMubGluZVdyYXBSYXRpbykpICogMik7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cGRhdGEud29yZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIHdvcmQgPSB0cGRhdGEud29yZHNbaV07XG5cdCAgICAgICAgICAgIHRleHROb2RlID0gbmV3IFNoYXBlLlRleHQod29yZC50ZXh0KTtcblx0ICAgICAgICAgICAgdmFyIG5ld2xpbmUgPSB3b3JkLnRleHQgPT0gJ1xcXFxuJztcblx0ICAgICAgICAgICAgaWYgKCFzY2VuZS5ub1dyYXAgJiYgKG9mZnNldFggKyB3b3JkLndpZHRoID49IG1heExpbmVXaWR0aCB8fCBuZXdsaW5lID09PSB0cnVlKSkge1xuXHQgICAgICAgICAgICAgICAgZmluYWxpemVMaW5lKGhvbGRlclRleHRHcm91cCwgbGluZSwgb2Zmc2V0WCwgaG9sZGVyVGV4dEdyb3VwLnByb3BlcnRpZXMubGVhZGluZyk7XG5cdCAgICAgICAgICAgICAgICBob2xkZXJUZXh0R3JvdXAuYWRkKGxpbmUpO1xuXHQgICAgICAgICAgICAgICAgb2Zmc2V0WCA9IDA7XG5cdCAgICAgICAgICAgICAgICBvZmZzZXRZICs9IGhvbGRlclRleHRHcm91cC5wcm9wZXJ0aWVzLmxlYWRpbmc7XG5cdCAgICAgICAgICAgICAgICBsaW5lSW5kZXggKz0gMTtcblx0ICAgICAgICAgICAgICAgIGxpbmUgPSBuZXcgU2hhcGUuR3JvdXAoJ2xpbmUnICsgbGluZUluZGV4KTtcblx0ICAgICAgICAgICAgICAgIGxpbmUueSA9IG9mZnNldFk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKG5ld2xpbmUgPT09IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRleHROb2RlLm1vdmVUbyhvZmZzZXRYLCAwKTtcblx0ICAgICAgICAgICAgb2Zmc2V0WCArPSB0cGRhdGEuc3BhY2VXaWR0aCArIHdvcmQud2lkdGg7XG5cdCAgICAgICAgICAgIGxpbmUuYWRkKHRleHROb2RlKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBmaW5hbGl6ZUxpbmUoaG9sZGVyVGV4dEdyb3VwLCBsaW5lLCBvZmZzZXRYLCBob2xkZXJUZXh0R3JvdXAucHJvcGVydGllcy5sZWFkaW5nKTtcblx0ICAgICAgICBob2xkZXJUZXh0R3JvdXAuYWRkKGxpbmUpO1xuXG5cdCAgICAgICAgaWYgKHNjZW5lLmFsaWduID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgaG9sZGVyVGV4dEdyb3VwLm1vdmVUbyhzY2VuZS53aWR0aCAtIHNjZW5lTWFyZ2luLCBudWxsLCBudWxsKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHNjZW5lLmFsaWduID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGZvciAobGluZUtleSBpbiBob2xkZXJUZXh0R3JvdXAuY2hpbGRyZW4pIHtcblx0ICAgICAgICAgICAgICAgIGxpbmUgPSBob2xkZXJUZXh0R3JvdXAuY2hpbGRyZW5bbGluZUtleV07XG5cdCAgICAgICAgICAgICAgICBsaW5lLm1vdmVUbyhzY2VuZS53aWR0aCAtIGxpbmUud2lkdGgsIG51bGwsIG51bGwpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgaG9sZGVyVGV4dEdyb3VwLm1vdmVUbygwIC0gKHNjZW5lLndpZHRoIC0gc2NlbmVNYXJnaW4pLCBudWxsLCBudWxsKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBmb3IgKGxpbmVLZXkgaW4gaG9sZGVyVGV4dEdyb3VwLmNoaWxkcmVuKSB7XG5cdCAgICAgICAgICAgICAgICBsaW5lID0gaG9sZGVyVGV4dEdyb3VwLmNoaWxkcmVuW2xpbmVLZXldO1xuXHQgICAgICAgICAgICAgICAgbGluZS5tb3ZlVG8oKGhvbGRlclRleHRHcm91cC53aWR0aCAtIGxpbmUud2lkdGgpIC8gMiwgbnVsbCwgbnVsbCk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBob2xkZXJUZXh0R3JvdXAubW92ZVRvKChzY2VuZS53aWR0aCAtIGhvbGRlclRleHRHcm91cC53aWR0aCkgLyAyLCBudWxsLCBudWxsKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBob2xkZXJUZXh0R3JvdXAubW92ZVRvKG51bGwsIChzY2VuZS5oZWlnaHQgLSBob2xkZXJUZXh0R3JvdXAuaGVpZ2h0KSAvIDIsIG51bGwpO1xuXG5cdCAgICAgICAgLy9JZiB0aGUgdGV4dCBleGNlZWRzIHZlcnRpY2FsIHNwYWNlLCBtb3ZlIGl0IGRvd24gc28gdGhlIGZpcnN0IGxpbmUgaXMgdmlzaWJsZVxuXHQgICAgICAgIGlmICgoc2NlbmUuaGVpZ2h0IC0gaG9sZGVyVGV4dEdyb3VwLmhlaWdodCkgLyAyIDwgMCkge1xuXHQgICAgICAgICAgICBob2xkZXJUZXh0R3JvdXAubW92ZVRvKG51bGwsIDAsIG51bGwpO1xuXHQgICAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGV4dE5vZGUgPSBuZXcgU2hhcGUuVGV4dChzY2VuZS50ZXh0KTtcblx0ICAgICAgICBsaW5lID0gbmV3IFNoYXBlLkdyb3VwKCdsaW5lMCcpO1xuXHQgICAgICAgIGxpbmUuYWRkKHRleHROb2RlKTtcblx0ICAgICAgICBob2xkZXJUZXh0R3JvdXAuYWRkKGxpbmUpO1xuXG5cdCAgICAgICAgaWYgKHNjZW5lLmFsaWduID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgaG9sZGVyVGV4dEdyb3VwLm1vdmVUbyhzY2VuZS53aWR0aCAtIHNjZW5lTWFyZ2luLCBudWxsLCBudWxsKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHNjZW5lLmFsaWduID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgIGhvbGRlclRleHRHcm91cC5tb3ZlVG8oMCAtIChzY2VuZS53aWR0aCAtIHNjZW5lTWFyZ2luKSwgbnVsbCwgbnVsbCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaG9sZGVyVGV4dEdyb3VwLm1vdmVUbygoc2NlbmUud2lkdGggLSB0cGRhdGEuYm91bmRpbmdCb3gud2lkdGgpIC8gMiwgbnVsbCwgbnVsbCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaG9sZGVyVGV4dEdyb3VwLm1vdmVUbyhudWxsLCAoc2NlbmUuaGVpZ2h0IC0gdHBkYXRhLmJvdW5kaW5nQm94LmhlaWdodCkgLyAyLCBudWxsKTtcblx0ICAgIH1cblxuXHQgICAgLy90b2RvOiByZW5kZXJsaXN0XG5cdCAgICByZXR1cm4gc2NlbmVHcmFwaDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGFwdGl2ZSB0ZXh0IHNpemluZyBmdW5jdGlvblxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gd2lkdGggUGFyZW50IHdpZHRoXG5cdCAqIEBwYXJhbSBoZWlnaHQgUGFyZW50IGhlaWdodFxuXHQgKiBAcGFyYW0gZm9udFNpemUgUmVxdWVzdGVkIHRleHQgc2l6ZVxuXHQgKiBAcGFyYW0gc2NhbGUgUHJvcG9ydGlvbmFsIHNjYWxlIG9mIHRleHRcblx0ICovXG5cdGZ1bmN0aW9uIHRleHRTaXplKHdpZHRoLCBoZWlnaHQsIGZvbnRTaXplLCBzY2FsZSkge1xuXHQgICAgdmFyIHN0YWdlV2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuXHQgICAgdmFyIHN0YWdlSGVpZ2h0ID0gcGFyc2VJbnQoaGVpZ2h0LCAxMCk7XG5cblx0ICAgIHZhciBiaWdTaWRlID0gTWF0aC5tYXgoc3RhZ2VXaWR0aCwgc3RhZ2VIZWlnaHQpO1xuXHQgICAgdmFyIHNtYWxsU2lkZSA9IE1hdGgubWluKHN0YWdlV2lkdGgsIHN0YWdlSGVpZ2h0KTtcblxuXHQgICAgdmFyIG5ld0hlaWdodCA9IDAuOCAqIE1hdGgubWluKHNtYWxsU2lkZSwgYmlnU2lkZSAqIHNjYWxlKTtcblx0ICAgIHJldHVybiBNYXRoLnJvdW5kKE1hdGgubWF4KGZvbnRTaXplLCBuZXdIZWlnaHQpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJdGVyYXRlcyBvdmVyIHJlc2l6YWJsZSAoZmx1aWQgb3IgYXV0bykgcGxhY2Vob2xkZXJzIGFuZCByZW5kZXJzIHRoZW1cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIGVsZW1lbnQgT3B0aW9uYWwgZWxlbWVudCBzZWxlY3Rvciwgc3BlY2lmaWVkIG9ubHkgaWYgYSBzcGVjaWZpYyBlbGVtZW50IG5lZWRzIHRvIGJlIHJlLXJlbmRlcmVkXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVSZXNpemFibGVFbGVtZW50cyhlbGVtZW50KSB7XG5cdCAgICB2YXIgaW1hZ2VzO1xuXHQgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCB8fCBlbGVtZW50Lm5vZGVUeXBlID09IG51bGwpIHtcblx0ICAgICAgICBpbWFnZXMgPSBBcHAudmFycy5yZXNpemFibGVJbWFnZXM7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGltYWdlcyA9IFtlbGVtZW50XTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gaW1hZ2VzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBlbCA9IGltYWdlc1tpXTtcblx0ICAgICAgICBpZiAoZWwuaG9sZGVyRGF0YSkge1xuXHQgICAgICAgICAgICB2YXIgZmxhZ3MgPSBlbC5ob2xkZXJEYXRhLmZsYWdzO1xuXHQgICAgICAgICAgICB2YXIgZGltZW5zaW9ucyA9IGRpbWVuc2lvbkNoZWNrKGVsKTtcblx0ICAgICAgICAgICAgaWYgKGRpbWVuc2lvbnMpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghZWwuaG9sZGVyRGF0YS5yZXNpemVVcGRhdGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgaWYgKGZsYWdzLmZsdWlkICYmIGZsYWdzLmF1dG8pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmx1aWRDb25maWcgPSBlbC5ob2xkZXJEYXRhLmZsdWlkQ29uZmlnO1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZmx1aWRDb25maWcubW9kZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb25zLmhlaWdodCA9IGRpbWVuc2lvbnMud2lkdGggLyBmbHVpZENvbmZpZy5yYXRpbztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9ucy53aWR0aCA9IGRpbWVuc2lvbnMuaGVpZ2h0ICogZmx1aWRDb25maWcucmF0aW87XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHtcblx0ICAgICAgICAgICAgICAgICAgICBtb2RlOiAnaW1hZ2UnLFxuXHQgICAgICAgICAgICAgICAgICAgIGhvbGRlclNldHRpbmdzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IGRpbWVuc2lvbnMsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiBmbGFncy50aGVtZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IGZsYWdzXG5cdCAgICAgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgICAgICBlbDogZWwsXG5cdCAgICAgICAgICAgICAgICAgICAgZW5naW5lU2V0dGluZ3M6IGVsLmhvbGRlckRhdGEuZW5naW5lU2V0dGluZ3Ncblx0ICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgIGlmIChmbGFncy50ZXh0bW9kZSA9PSAnZXhhY3QnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZXhhY3REaW1lbnNpb25zID0gZGltZW5zaW9ucztcblx0ICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5ob2xkZXJTZXR0aW5ncy5kaW1lbnNpb25zID0gZmxhZ3MuZGltZW5zaW9ucztcblx0ICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgcmVuZGVyKHNldHRpbmdzKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHNldEludmlzaWJsZShlbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyB1cCBhc3BlY3QgcmF0aW8gbWV0YWRhdGEgZm9yIGZsdWlkIHBsYWNlaG9sZGVycywgaW4gb3JkZXIgdG8gcHJlc2VydmUgcHJvcG9ydGlvbnMgd2hlbiByZXNpemluZ1xuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gZWwgSW1hZ2UgRE9NIGVsZW1lbnRcblx0ICovXG5cdGZ1bmN0aW9uIHNldEluaXRpYWxEaW1lbnNpb25zKGVsKSB7XG5cdCAgICBpZiAoZWwuaG9sZGVyRGF0YSkge1xuXHQgICAgICAgIHZhciBkaW1lbnNpb25zID0gZGltZW5zaW9uQ2hlY2soZWwpO1xuXHQgICAgICAgIGlmIChkaW1lbnNpb25zKSB7XG5cdCAgICAgICAgICAgIHZhciBmbGFncyA9IGVsLmhvbGRlckRhdGEuZmxhZ3M7XG5cblx0ICAgICAgICAgICAgdmFyIGZsdWlkQ29uZmlnID0ge1xuXHQgICAgICAgICAgICAgICAgZmx1aWRIZWlnaHQ6IGZsYWdzLmRpbWVuc2lvbnMuaGVpZ2h0LnNsaWNlKC0xKSA9PSAnJScsXG5cdCAgICAgICAgICAgICAgICBmbHVpZFdpZHRoOiBmbGFncy5kaW1lbnNpb25zLndpZHRoLnNsaWNlKC0xKSA9PSAnJScsXG5cdCAgICAgICAgICAgICAgICBtb2RlOiBudWxsLFxuXHQgICAgICAgICAgICAgICAgaW5pdGlhbERpbWVuc2lvbnM6IGRpbWVuc2lvbnNcblx0ICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICBpZiAoZmx1aWRDb25maWcuZmx1aWRXaWR0aCAmJiAhZmx1aWRDb25maWcuZmx1aWRIZWlnaHQpIHtcblx0ICAgICAgICAgICAgICAgIGZsdWlkQ29uZmlnLm1vZGUgPSAnd2lkdGgnO1xuXHQgICAgICAgICAgICAgICAgZmx1aWRDb25maWcucmF0aW8gPSBmbHVpZENvbmZpZy5pbml0aWFsRGltZW5zaW9ucy53aWR0aCAvIHBhcnNlRmxvYXQoZmxhZ3MuZGltZW5zaW9ucy5oZWlnaHQpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKCFmbHVpZENvbmZpZy5mbHVpZFdpZHRoICYmIGZsdWlkQ29uZmlnLmZsdWlkSGVpZ2h0KSB7XG5cdCAgICAgICAgICAgICAgICBmbHVpZENvbmZpZy5tb2RlID0gJ2hlaWdodCc7XG5cdCAgICAgICAgICAgICAgICBmbHVpZENvbmZpZy5yYXRpbyA9IHBhcnNlRmxvYXQoZmxhZ3MuZGltZW5zaW9ucy53aWR0aCkgLyBmbHVpZENvbmZpZy5pbml0aWFsRGltZW5zaW9ucy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBlbC5ob2xkZXJEYXRhLmZsdWlkQ29uZmlnID0gZmx1aWRDb25maWc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc2V0SW52aXNpYmxlKGVsKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblxuXHQvKipcblx0ICogSXRlcmF0ZXMgdGhyb3VnaCBhbGwgY3VycmVudCBpbnZpc2libGUgaW1hZ2VzLCBhbmQgaWYgdGhleSdyZSB2aXNpYmxlLCByZW5kZXJzIHRoZW0gYW5kIHJlbW92ZXMgdGhlbSBmcm9tIGZ1cnRoZXIgY2hlY2tzLiBSdW5zIGV2ZXJ5IGFuaW1hdGlvbiBmcmFtZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIHZpc2liaWxpdHlDaGVjaygpIHtcblx0ICAgIHZhciByZW5kZXJhYmxlSW1hZ2VzID0gW107XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKEFwcC52YXJzLmludmlzaWJsZUltYWdlcyk7XG5cdCAgICB2YXIgZWw7XG5cblx0ICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgZWwgPSBBcHAudmFycy5pbnZpc2libGVJbWFnZXNba2V5XTtcblx0ICAgICAgICBpZiAoZGltZW5zaW9uQ2hlY2soZWwpICYmIGVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ2ltZycpIHtcblx0ICAgICAgICAgICAgcmVuZGVyYWJsZUltYWdlcy5wdXNoKGVsKTtcblx0ICAgICAgICAgICAgZGVsZXRlIEFwcC52YXJzLmludmlzaWJsZUltYWdlc1trZXldO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBpZiAocmVuZGVyYWJsZUltYWdlcy5sZW5ndGgpIHtcblx0ICAgICAgICBIb2xkZXIucnVuKHtcblx0ICAgICAgICAgICAgaW1hZ2VzOiByZW5kZXJhYmxlSW1hZ2VzXG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIC8vIERvbmUgdG8gcHJldmVudCAxMDAlIENQVSB1c2FnZSB2aWEgYWdncmVzc2l2ZSBjYWxsaW5nIG9mIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSh2aXNpYmlsaXR5Q2hlY2spO1xuXHQgICAgfSwgMTApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN0YXJ0cyBjaGVja2luZyBmb3IgaW52aXNpYmxlIHBsYWNlaG9sZGVycyBpZiBub3QgZG9pbmcgc28geWV0LiBEb2VzIG5vdGhpbmcgb3RoZXJ3aXNlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhcnRWaXNpYmlsaXR5Q2hlY2soKSB7XG5cdCAgICBpZiAoIUFwcC52YXJzLnZpc2liaWxpdHlDaGVja1N0YXJ0ZWQpIHtcblx0ICAgICAgICBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHZpc2liaWxpdHlDaGVjayk7XG5cdCAgICAgICAgQXBwLnZhcnMudmlzaWJpbGl0eUNoZWNrU3RhcnRlZCA9IHRydWU7XG5cdCAgICB9XG5cdH1cblxuXHQvKipcblx0ICogU2V0cyBhIHVuaXF1ZSBJRCBmb3IgYW4gaW1hZ2UgZGV0ZWN0ZWQgdG8gYmUgaW52aXNpYmxlIGFuZCBhZGRzIGl0IHRvIHRoZSBtYXAgb2YgaW52aXNpYmxlIGltYWdlcyBjaGVja2VkIGJ5IHZpc2liaWxpdHlDaGVja1xuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gZWwgSW52aXNpYmxlIERPTSBlbGVtZW50XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRJbnZpc2libGUoZWwpIHtcblx0ICAgIGlmICghZWwuaG9sZGVyRGF0YS5pbnZpc2libGVJZCkge1xuXHQgICAgICAgIEFwcC52YXJzLmludmlzaWJsZUlkICs9IDE7XG5cdCAgICAgICAgQXBwLnZhcnMuaW52aXNpYmxlSW1hZ2VzWydpJyArIEFwcC52YXJzLmludmlzaWJsZUlkXSA9IGVsO1xuXHQgICAgICAgIGVsLmhvbGRlckRhdGEuaW52aXNpYmxlSWQgPSBBcHAudmFycy5pbnZpc2libGVJZDtcblx0ICAgIH1cblx0fVxuXG5cdC8vdG9kbzogc2VlIGlmIHBvc3NpYmxlIHRvIGNvbnZlcnQgc3RhZ2luZ1JlbmRlcmVyIHRvIHVzZSBIVE1MIG9ubHlcblx0dmFyIHN0YWdpbmdSZW5kZXJlciA9IChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBzdmcgPSBudWxsLFxuXHQgICAgICAgIHN0YWdpbmdUZXh0ID0gbnVsbCxcblx0ICAgICAgICBzdGFnaW5nVGV4dE5vZGUgPSBudWxsO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKGdyYXBoKSB7XG5cdCAgICAgICAgdmFyIHJvb3ROb2RlID0gZ3JhcGgucm9vdDtcblx0ICAgICAgICBpZiAoQXBwLnNldHVwLnN1cHBvcnRzU1ZHKSB7XG5cdCAgICAgICAgICAgIHZhciBmaXJzdFRpbWVTZXR1cCA9IGZhbHNlO1xuXHQgICAgICAgICAgICB2YXIgdG5vZGUgPSBmdW5jdGlvbih0ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmIChzdmcgPT0gbnVsbCB8fCBzdmcucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgICAgICAgICAgZmlyc3RUaW1lU2V0dXAgPSB0cnVlO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgc3ZnID0gU1ZHLmluaXRTVkcoc3ZnLCByb290Tm9kZS5wcm9wZXJ0aWVzLndpZHRoLCByb290Tm9kZS5wcm9wZXJ0aWVzLmhlaWdodCk7XG5cdCAgICAgICAgICAgIC8vU2hvdyBzdGFnaW5nIGVsZW1lbnQgYmVmb3JlIHN0YWdpbmdcblx0ICAgICAgICAgICAgc3ZnLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG5cdCAgICAgICAgICAgIGlmIChmaXJzdFRpbWVTZXR1cCkge1xuXHQgICAgICAgICAgICAgICAgc3RhZ2luZ1RleHQgPSBET00ubmV3RWwoJ3RleHQnLCBTVkdfTlMpO1xuXHQgICAgICAgICAgICAgICAgc3RhZ2luZ1RleHROb2RlID0gdG5vZGUobnVsbCk7XG5cdCAgICAgICAgICAgICAgICBET00uc2V0QXR0cihzdGFnaW5nVGV4dCwge1xuXHQgICAgICAgICAgICAgICAgICAgIHg6IDBcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgc3RhZ2luZ1RleHQuYXBwZW5kQ2hpbGQoc3RhZ2luZ1RleHROb2RlKTtcblx0ICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChzdGFnaW5nVGV4dCk7XG5cdCAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN2Zyk7XG5cdCAgICAgICAgICAgICAgICBzdmcuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXHQgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0ICAgICAgICAgICAgICAgIHN2Zy5zdHlsZS50b3AgPSAnLTEwMCUnO1xuXHQgICAgICAgICAgICAgICAgc3ZnLnN0eWxlLmxlZnQgPSAnLTEwMCUnO1xuXHQgICAgICAgICAgICAgICAgLy90b2RvOiB3b3JrYXJvdW5kIGZvciB6ZXJvLWRpbWVuc2lvbiA8c3ZnPiB0YWcgaW4gT3BlcmEgMTJcblx0ICAgICAgICAgICAgICAgIC8vc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAwKTtcblx0ICAgICAgICAgICAgICAgIC8vc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgMCk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICB2YXIgaG9sZGVyVGV4dEdyb3VwID0gcm9vdE5vZGUuY2hpbGRyZW4uaG9sZGVyVGV4dEdyb3VwO1xuXHQgICAgICAgICAgICB2YXIgaHRnUHJvcHMgPSBob2xkZXJUZXh0R3JvdXAucHJvcGVydGllcztcblx0ICAgICAgICAgICAgRE9NLnNldEF0dHIoc3RhZ2luZ1RleHQsIHtcblx0ICAgICAgICAgICAgICAgICd5JzogaHRnUHJvcHMuZm9udC5zaXplLFxuXHQgICAgICAgICAgICAgICAgJ3N0eWxlJzogdXRpbHMuY3NzUHJvcHMoe1xuXHQgICAgICAgICAgICAgICAgICAgICdmb250LXdlaWdodCc6IGh0Z1Byb3BzLmZvbnQud2VpZ2h0LFxuXHQgICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiBodGdQcm9wcy5mb250LnNpemUgKyBodGdQcm9wcy5mb250LnVuaXRzLFxuXHQgICAgICAgICAgICAgICAgICAgICdmb250LWZhbWlseSc6IGh0Z1Byb3BzLmZvbnQuZmFtaWx5XG5cdCAgICAgICAgICAgICAgICB9KVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvL0dldCBib3VuZGluZyBib3ggZm9yIHRoZSB3aG9sZSBzdHJpbmcgKHRvdGFsIHdpZHRoIGFuZCBoZWlnaHQpXG5cdCAgICAgICAgICAgIHN0YWdpbmdUZXh0Tm9kZS5ub2RlVmFsdWUgPSBodGdQcm9wcy50ZXh0O1xuXHQgICAgICAgICAgICB2YXIgc3RhZ2luZ1RleHRCQm94ID0gc3RhZ2luZ1RleHQuZ2V0QkJveCgpO1xuXG5cdCAgICAgICAgICAgIC8vR2V0IGxpbmUgY291bnQgYW5kIHNwbGl0IHRoZSBzdHJpbmcgaW50byB3b3Jkc1xuXHQgICAgICAgICAgICB2YXIgbGluZUNvdW50ID0gTWF0aC5jZWlsKHN0YWdpbmdUZXh0QkJveC53aWR0aCAvIChyb290Tm9kZS5wcm9wZXJ0aWVzLndpZHRoICogQXBwLnZhcnMubGluZVdyYXBSYXRpbykpO1xuXHQgICAgICAgICAgICB2YXIgd29yZHMgPSBodGdQcm9wcy50ZXh0LnNwbGl0KCcgJyk7XG5cdCAgICAgICAgICAgIHZhciBuZXdsaW5lcyA9IGh0Z1Byb3BzLnRleHQubWF0Y2goL1xcXFxuL2cpO1xuXHQgICAgICAgICAgICBsaW5lQ291bnQgKz0gbmV3bGluZXMgPT0gbnVsbCA/IDAgOiBuZXdsaW5lcy5sZW5ndGg7XG5cblx0ICAgICAgICAgICAgLy9HZXQgYm91bmRpbmcgYm94IGZvciB0aGUgc3RyaW5nIHdpdGggc3BhY2VzIHJlbW92ZWRcblx0ICAgICAgICAgICAgc3RhZ2luZ1RleHROb2RlLm5vZGVWYWx1ZSA9IGh0Z1Byb3BzLnRleHQucmVwbGFjZSgvWyBdKy9nLCAnJyk7XG5cdCAgICAgICAgICAgIHZhciBjb21wdXRlZE5vU3BhY2VMZW5ndGggPSBzdGFnaW5nVGV4dC5nZXRDb21wdXRlZFRleHRMZW5ndGgoKTtcblxuXHQgICAgICAgICAgICAvL0NvbXB1dGUgYXZlcmFnZSBzcGFjZSB3aWR0aFxuXHQgICAgICAgICAgICB2YXIgZGlmZkxlbmd0aCA9IHN0YWdpbmdUZXh0QkJveC53aWR0aCAtIGNvbXB1dGVkTm9TcGFjZUxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIHNwYWNlV2lkdGggPSBNYXRoLnJvdW5kKGRpZmZMZW5ndGggLyBNYXRoLm1heCgxLCB3b3Jkcy5sZW5ndGggLSAxKSk7XG5cblx0ICAgICAgICAgICAgLy9HZXQgd2lkdGhzIGZvciBldmVyeSB3b3JkIHdpdGggc3BhY2Ugb25seSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIGxpbmVcblx0ICAgICAgICAgICAgdmFyIHdvcmRXaWR0aHMgPSBbXTtcblx0ICAgICAgICAgICAgaWYgKGxpbmVDb3VudCA+IDEpIHtcblx0ICAgICAgICAgICAgICAgIHN0YWdpbmdUZXh0Tm9kZS5ub2RlVmFsdWUgPSAnJztcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAod29yZHNbaV0ubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblx0ICAgICAgICAgICAgICAgICAgICBzdGFnaW5nVGV4dE5vZGUubm9kZVZhbHVlID0gdXRpbHMuZGVjb2RlSHRtbEVudGl0eSh3b3Jkc1tpXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGJib3ggPSBzdGFnaW5nVGV4dC5nZXRCQm94KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgd29yZFdpZHRocy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogd29yZHNbaV0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBiYm94LndpZHRoXG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvL0hpZGUgc3RhZ2luZyBlbGVtZW50IGFmdGVyIHN0YWdpbmdcblx0ICAgICAgICAgICAgc3ZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgIHNwYWNlV2lkdGg6IHNwYWNlV2lkdGgsXG5cdCAgICAgICAgICAgICAgICBsaW5lQ291bnQ6IGxpbmVDb3VudCxcblx0ICAgICAgICAgICAgICAgIGJvdW5kaW5nQm94OiBzdGFnaW5nVGV4dEJCb3gsXG5cdCAgICAgICAgICAgICAgICB3b3Jkczogd29yZFdpZHRoc1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIC8vdG9kbzogY2FudmFzIGZhbGxiYWNrIGZvciBtZWFzdXJpbmcgdGV4dCBvbiBhbmRyb2lkIDIuM1xuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fSkoKTtcblxuXHR2YXIgc2dDYW52YXNSZW5kZXJlciA9IChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBjYW52YXMgPSBET00ubmV3RWwoJ2NhbnZhcycpO1xuXHQgICAgdmFyIGN0eCA9IG51bGw7XG5cblx0ICAgIHJldHVybiBmdW5jdGlvbihzY2VuZUdyYXBoKSB7XG5cdCAgICAgICAgaWYgKGN0eCA9PSBudWxsKSB7XG5cdCAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcm9vdCA9IHNjZW5lR3JhcGgucm9vdDtcblx0ICAgICAgICBjYW52YXMud2lkdGggPSBBcHAuZHByKHJvb3QucHJvcGVydGllcy53aWR0aCk7XG5cdCAgICAgICAgY2FudmFzLmhlaWdodCA9IEFwcC5kcHIocm9vdC5wcm9wZXJ0aWVzLmhlaWdodCk7XG5cdCAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG5cdCAgICAgICAgdmFyIGJnID0gcm9vdC5jaGlsZHJlbi5ob2xkZXJCZztcblx0ICAgICAgICB2YXIgYmdXaWR0aCA9IEFwcC5kcHIoYmcud2lkdGgpO1xuXHQgICAgICAgIHZhciBiZ0hlaWdodCA9IEFwcC5kcHIoYmcuaGVpZ2h0KTtcblx0ICAgICAgICAvL3RvZG86IHBhcmFtZXRyaXplIG91dGxpbmUgd2lkdGggKGUuZy4gaW4gc2NlbmUgb2JqZWN0KVxuXHQgICAgICAgIHZhciBvdXRsaW5lV2lkdGggPSAyO1xuXHQgICAgICAgIHZhciBvdXRsaW5lT2Zmc2V0V2lkdGggPSBvdXRsaW5lV2lkdGggLyAyO1xuXG5cdCAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJnLnByb3BlcnRpZXMuZmlsbDtcblx0ICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgYmdXaWR0aCwgYmdIZWlnaHQpO1xuXG5cdCAgICAgICAgaWYgKGJnLnByb3BlcnRpZXMub3V0bGluZSkge1xuXHQgICAgICAgICAgICAvL3RvZG86IGFic3RyYWN0IHRoaXMgaW50byBhIG1ldGhvZFxuXHQgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBiZy5wcm9wZXJ0aWVzLm91dGxpbmUuZmlsbDtcblx0ICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJnLnByb3BlcnRpZXMub3V0bGluZS53aWR0aDtcblx0ICAgICAgICAgICAgY3R4Lm1vdmVUbyhvdXRsaW5lT2Zmc2V0V2lkdGgsIG91dGxpbmVPZmZzZXRXaWR0aCk7XG5cdCAgICAgICAgICAgIC8vIFRMLCBUUiwgQlIsIEJMXG5cdCAgICAgICAgICAgIGN0eC5saW5lVG8oYmdXaWR0aCAtIG91dGxpbmVPZmZzZXRXaWR0aCwgb3V0bGluZU9mZnNldFdpZHRoKTtcblx0ICAgICAgICAgICAgY3R4LmxpbmVUbyhiZ1dpZHRoIC0gb3V0bGluZU9mZnNldFdpZHRoLCBiZ0hlaWdodCAtIG91dGxpbmVPZmZzZXRXaWR0aCk7XG5cdCAgICAgICAgICAgIGN0eC5saW5lVG8ob3V0bGluZU9mZnNldFdpZHRoLCBiZ0hlaWdodCAtIG91dGxpbmVPZmZzZXRXaWR0aCk7XG5cdCAgICAgICAgICAgIGN0eC5saW5lVG8ob3V0bGluZU9mZnNldFdpZHRoLCBvdXRsaW5lT2Zmc2V0V2lkdGgpO1xuXHQgICAgICAgICAgICAvLyBEaWFnb25hbHNcblx0ICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCBvdXRsaW5lT2Zmc2V0V2lkdGgpO1xuXHQgICAgICAgICAgICBjdHgubGluZVRvKGJnV2lkdGgsIGJnSGVpZ2h0IC0gb3V0bGluZU9mZnNldFdpZHRoKTtcblx0ICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCBiZ0hlaWdodCAtIG91dGxpbmVPZmZzZXRXaWR0aCk7XG5cdCAgICAgICAgICAgIGN0eC5saW5lVG8oYmdXaWR0aCwgb3V0bGluZU9mZnNldFdpZHRoKTtcblx0ICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciB0ZXh0R3JvdXAgPSByb290LmNoaWxkcmVuLmhvbGRlclRleHRHcm91cDtcblx0ICAgICAgICBjdHguZm9udCA9IHRleHRHcm91cC5wcm9wZXJ0aWVzLmZvbnQud2VpZ2h0ICsgJyAnICsgQXBwLmRwcih0ZXh0R3JvdXAucHJvcGVydGllcy5mb250LnNpemUpICsgdGV4dEdyb3VwLnByb3BlcnRpZXMuZm9udC51bml0cyArICcgJyArIHRleHRHcm91cC5wcm9wZXJ0aWVzLmZvbnQuZmFtaWx5ICsgJywgbW9ub3NwYWNlJztcblx0ICAgICAgICBjdHguZmlsbFN0eWxlID0gdGV4dEdyb3VwLnByb3BlcnRpZXMuZmlsbDtcblxuXHQgICAgICAgIGZvciAodmFyIGxpbmVLZXkgaW4gdGV4dEdyb3VwLmNoaWxkcmVuKSB7XG5cdCAgICAgICAgICAgIHZhciBsaW5lID0gdGV4dEdyb3VwLmNoaWxkcmVuW2xpbmVLZXldO1xuXHQgICAgICAgICAgICBmb3IgKHZhciB3b3JkS2V5IGluIGxpbmUuY2hpbGRyZW4pIHtcblx0ICAgICAgICAgICAgICAgIHZhciB3b3JkID0gbGluZS5jaGlsZHJlblt3b3JkS2V5XTtcblx0ICAgICAgICAgICAgICAgIHZhciB4ID0gQXBwLmRwcih0ZXh0R3JvdXAueCArIGxpbmUueCArIHdvcmQueCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgeSA9IEFwcC5kcHIodGV4dEdyb3VwLnkgKyBsaW5lLnkgKyB3b3JkLnkgKyAodGV4dEdyb3VwLnByb3BlcnRpZXMubGVhZGluZyAvIDIpKTtcblxuXHQgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHdvcmQucHJvcGVydGllcy50ZXh0LCB4LCB5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblx0ICAgIH07XG5cdH0pKCk7XG5cblx0Ly9IZWxwZXJzXG5cblx0LyoqXG5cdCAqIFByZXZlbnRzIGEgZnVuY3Rpb24gZnJvbSBiZWluZyBjYWxsZWQgdG9vIG9mdGVuLCB3YWl0cyB1bnRpbCBhIHRpbWVyIGVsYXBzZXMgdG8gY2FsbCBpdCBhZ2FpblxuXHQgKlxuXHQgKiBAcGFyYW0gZm4gRnVuY3Rpb24gdG8gY2FsbFxuXHQgKi9cblx0ZnVuY3Rpb24gZGVib3VuY2UoZm4pIHtcblx0ICAgIGlmICghQXBwLnZhcnMuZGVib3VuY2VUaW1lcikgZm4uY2FsbCh0aGlzKTtcblx0ICAgIGlmIChBcHAudmFycy5kZWJvdW5jZVRpbWVyKSBnbG9iYWwuY2xlYXJUaW1lb3V0KEFwcC52YXJzLmRlYm91bmNlVGltZXIpO1xuXHQgICAgQXBwLnZhcnMuZGVib3VuY2VUaW1lciA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIEFwcC52YXJzLmRlYm91bmNlVGltZXIgPSBudWxsO1xuXHQgICAgICAgIGZuLmNhbGwodGhpcyk7XG5cdCAgICB9LCBBcHAuc2V0dXAuZGVib3VuY2UpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhvbGRlci1zcGVjaWZpYyByZXNpemUvb3JpZW50YXRpb24gY2hhbmdlIGNhbGxiYWNrLCBkZWJvdW5jZWQgdG8gcHJldmVudCBleGNlc3NpdmUgZXhlY3V0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNpemVFdmVudCgpIHtcblx0ICAgIGRlYm91bmNlKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHVwZGF0ZVJlc2l6YWJsZUVsZW1lbnRzKG51bGwpO1xuXHQgICAgfSk7XG5cdH1cblxuXHQvL1NldCB1cCBmbGFnc1xuXG5cdGZvciAodmFyIGZsYWcgaW4gQXBwLmZsYWdzKSB7XG5cdCAgICBpZiAoIUFwcC5mbGFncy5oYXNPd25Qcm9wZXJ0eShmbGFnKSkgY29udGludWU7XG5cdCAgICBBcHAuZmxhZ3NbZmxhZ10ubWF0Y2ggPSBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICByZXR1cm4gdmFsLm1hdGNoKHRoaXMucmVnZXgpO1xuXHQgICAgfTtcblx0fVxuXG5cdC8vUHJvcGVydGllcyBzZXQgb25jZSBvbiBzZXR1cFxuXG5cdEFwcC5zZXR1cCA9IHtcblx0ICAgIHJlbmRlcmVyOiAnaHRtbCcsXG5cdCAgICBkZWJvdW5jZTogMTAwLFxuXHQgICAgcmF0aW86IDEsXG5cdCAgICBzdXBwb3J0c0NhbnZhczogZmFsc2UsXG5cdCAgICBzdXBwb3J0c1NWRzogZmFsc2UsXG5cdCAgICBsaW5lV3JhcFJhdGlvOiAwLjksXG5cdCAgICBkYXRhQXR0cjogJ2RhdGEtc3JjJyxcblx0ICAgIHJlbmRlcmVyczogWydodG1sJywgJ2NhbnZhcycsICdzdmcnXVxuXHR9O1xuXG5cdEFwcC5kcHIgPSBmdW5jdGlvbih2YWwpIHtcblx0ICAgIHJldHVybiB2YWwgKiBBcHAuc2V0dXAucmF0aW87XG5cdH07XG5cblx0Ly9Qcm9wZXJ0aWVzIG1vZGlmaWVkIGR1cmluZyBydW50aW1lXG5cblx0QXBwLnZhcnMgPSB7XG5cdCAgICBwcmVlbXB0ZWQ6IGZhbHNlLFxuXHQgICAgcmVzaXphYmxlSW1hZ2VzOiBbXSxcblx0ICAgIGludmlzaWJsZUltYWdlczoge30sXG5cdCAgICBpbnZpc2libGVJZDogMCxcblx0ICAgIHZpc2liaWxpdHlDaGVja1N0YXJ0ZWQ6IGZhbHNlLFxuXHQgICAgZGVib3VuY2VUaW1lcjogbnVsbCxcblx0ICAgIGNhY2hlOiB7fVxuXHR9O1xuXG5cdC8vUHJlLWZsaWdodFxuXG5cdChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBkZXZpY2VQaXhlbFJhdGlvID0gMSxcblx0ICAgICAgICBiYWNraW5nU3RvcmVSYXRpbyA9IDE7XG5cblx0ICAgIHZhciBjYW52YXMgPSBET00ubmV3RWwoJ2NhbnZhcycpO1xuXHQgICAgdmFyIGN0eCA9IG51bGw7XG5cblx0ICAgIGlmIChjYW52YXMuZ2V0Q29udGV4dCkge1xuXHQgICAgICAgIGlmIChjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKS5pbmRleE9mKCdkYXRhOmltYWdlL3BuZycpICE9IC0xKSB7XG5cdCAgICAgICAgICAgIEFwcC5zZXR1cC5yZW5kZXJlciA9ICdjYW52YXMnO1xuXHQgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblx0ICAgICAgICAgICAgQXBwLnNldHVwLnN1cHBvcnRzQ2FudmFzID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIGlmIChBcHAuc2V0dXAuc3VwcG9ydHNDYW52YXMpIHtcblx0ICAgICAgICBkZXZpY2VQaXhlbFJhdGlvID0gZ2xvYmFsLmRldmljZVBpeGVsUmF0aW8gfHwgMTtcblx0ICAgICAgICBiYWNraW5nU3RvcmVSYXRpbyA9IGN0eC53ZWJraXRCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgY3R4Lm9CYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IDE7XG5cdCAgICB9XG5cblx0ICAgIEFwcC5zZXR1cC5yYXRpbyA9IGRldmljZVBpeGVsUmF0aW8gLyBiYWNraW5nU3RvcmVSYXRpbztcblxuXHQgICAgaWYgKCEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgJ3N2ZycpLmNyZWF0ZVNWR1JlY3QpIHtcblx0ICAgICAgICBBcHAuc2V0dXAucmVuZGVyZXIgPSAnc3ZnJztcblx0ICAgICAgICBBcHAuc2V0dXAuc3VwcG9ydHNTVkcgPSB0cnVlO1xuXHQgICAgfVxuXHR9KSgpO1xuXG5cdC8vU3RhcnRzIGNoZWNraW5nIGZvciBpbnZpc2libGUgcGxhY2Vob2xkZXJzXG5cdHN0YXJ0VmlzaWJpbGl0eUNoZWNrKCk7XG5cblx0aWYgKG9uRG9tUmVhZHkpIHtcblx0ICAgIG9uRG9tUmVhZHkoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKCFBcHAudmFycy5wcmVlbXB0ZWQpIHtcblx0ICAgICAgICAgICAgSG9sZGVyLnJ1bigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUV2ZW50LCBmYWxzZSk7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHJlc2l6ZUV2ZW50LCBmYWxzZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KCdvbnJlc2l6ZScsIHJlc2l6ZUV2ZW50KTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodHlwZW9mIGdsb2JhbC5UdXJib2xpbmtzID09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwYWdlOmNoYW5nZScsIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgSG9sZGVyLnJ1bigpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gSG9sZGVyO1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBvbkRvbVJlYWR5LmpzIDEuNC4wIChjKSAyMDEzIFR1YmFsIE1hcnRpbiAtIE1JVCBsaWNlbnNlXG5cdCAqXG5cdCAqIFNwZWNpYWxseSBtb2RpZmllZCB0byB3b3JrIHdpdGggSG9sZGVyLmpzXG5cdCAqL1xuXG5cdGZ1bmN0aW9uIF9vbkRvbVJlYWR5KHdpbikge1xuXHQgICAgLy9MYXp5IGxvYWRpbmcgZml4IGZvciBGaXJlZm94IDwgMy42XG5cdCAgICAvL2h0dHA6Ly93ZWJyZWZsZWN0aW9uLmJsb2dzcG90LmNvbS8yMDA5LzExLzE5NS1jaGFycy10by1oZWxwLWxhenktbG9hZGluZy5odG1sXG5cdCAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSBudWxsICYmIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiBET01Db250ZW50TG9hZGVkKCkge1xuXHQgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBET01Db250ZW50TG9hZGVkLCBmYWxzZSk7XG5cdCAgICAgICAgICAgIGRvY3VtZW50LnJlYWR5U3RhdGUgPSBcImNvbXBsZXRlXCI7XG5cdCAgICAgICAgfSwgZmFsc2UpO1xuXHQgICAgICAgIGRvY3VtZW50LnJlYWR5U3RhdGUgPSBcImxvYWRpbmdcIjtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudCxcblx0ICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudCxcblx0ICAgIFxuXHQgICAgICAgIExPQUQgPSBcImxvYWRcIixcblx0ICAgICAgICBGQUxTRSA9IGZhbHNlLFxuXHQgICAgICAgIE9OTE9BRCA9IFwib25cIitMT0FELFxuXHQgICAgICAgIENPTVBMRVRFID0gXCJjb21wbGV0ZVwiLFxuXHQgICAgICAgIFJFQURZU1RBVEUgPSBcInJlYWR5U3RhdGVcIixcblx0ICAgICAgICBBVFRBQ0hFVkVOVCA9IFwiYXR0YWNoRXZlbnRcIixcblx0ICAgICAgICBERVRBQ0hFVkVOVCA9IFwiZGV0YWNoRXZlbnRcIixcblx0ICAgICAgICBBRERFVkVOVExJU1RFTkVSID0gXCJhZGRFdmVudExpc3RlbmVyXCIsXG5cdCAgICAgICAgRE9NQ09OVEVOVExPQURFRCA9IFwiRE9NQ29udGVudExvYWRlZFwiLFxuXHQgICAgICAgIE9OUkVBRFlTVEFURUNIQU5HRSA9IFwib25yZWFkeXN0YXRlY2hhbmdlXCIsXG5cdCAgICAgICAgUkVNT1ZFRVZFTlRMSVNURU5FUiA9IFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFxuXHQgICAgXG5cdCAgICAgICAgLy8gVzNDIEV2ZW50IG1vZGVsXG5cdCAgICAgICAgdzNjID0gQURERVZFTlRMSVNURU5FUiBpbiBkb2MsXG5cdCAgICAgICAgX3RvcCA9IEZBTFNFLFxuXHQgICAgXG5cdCAgICAgICAgLy8gaXNSZWFkeTogSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0ICAgICAgICBpc1JlYWR5ID0gRkFMU0UsXG5cdCAgICBcblx0ICAgICAgICAvLyBDYWxsYmFja3MgcGVuZGluZyBleGVjdXRpb24gdW50aWwgRE9NIGlzIHJlYWR5XG5cdCAgICAgICAgY2FsbGJhY2tzID0gW107XG5cdCAgICBcblx0ICAgIC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0ICAgIGZ1bmN0aW9uIHJlYWR5KCBmbiApIHtcblx0ICAgICAgICBpZiAoICFpc1JlYWR5ICkge1xuXHQgICAgXG5cdCAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBib2R5IGV4aXN0cywgYXQgbGVhc3QsIGluIGNhc2UgSUUgZ2V0cyBhIGxpdHRsZSBvdmVyemVhbG91cyAodGlja2V0ICM1NDQzKS5cblx0ICAgICAgICAgICAgaWYgKCAhZG9jLmJvZHkgKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIoIHJlYWR5ICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgIFxuXHQgICAgICAgICAgICAvLyBSZW1lbWJlciB0aGF0IHRoZSBET00gaXMgcmVhZHlcblx0ICAgICAgICAgICAgaXNSZWFkeSA9IHRydWU7XG5cdCAgICBcblx0ICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbGwgY2FsbGJhY2tzXG5cdCAgICAgICAgICAgIHdoaWxlICggZm4gPSBjYWxsYmFja3Muc2hpZnQoKSApIHtcblx0ICAgICAgICAgICAgICAgIGRlZmVyKCBmbiApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgXG5cdCAgICAvLyBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlclxuXHQgICAgZnVuY3Rpb24gY29tcGxldGVkKCBldmVudCApIHtcblx0ICAgICAgICAvLyByZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgaXMgZ29vZCBlbm91Z2ggZm9yIHVzIHRvIGNhbGwgdGhlIGRvbSByZWFkeSBpbiBvbGRJRVxuXHQgICAgICAgIGlmICggdzNjIHx8IGV2ZW50LnR5cGUgPT09IExPQUQgfHwgZG9jW1JFQURZU1RBVEVdID09PSBDT01QTEVURSApIHtcblx0ICAgICAgICAgICAgZGV0YWNoKCk7XG5cdCAgICAgICAgICAgIHJlYWR5KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgXG5cdCAgICAvLyBDbGVhbi11cCBtZXRob2QgZm9yIGRvbSByZWFkeSBldmVudHNcblx0ICAgIGZ1bmN0aW9uIGRldGFjaCgpIHtcblx0ICAgICAgICBpZiAoIHczYyApIHtcblx0ICAgICAgICAgICAgZG9jW1JFTU9WRUVWRU5UTElTVEVORVJdKCBET01DT05URU5UTE9BREVELCBjb21wbGV0ZWQsIEZBTFNFICk7XG5cdCAgICAgICAgICAgIHdpbltSRU1PVkVFVkVOVExJU1RFTkVSXSggTE9BRCwgY29tcGxldGVkLCBGQUxTRSApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGRvY1tERVRBQ0hFVkVOVF0oIE9OUkVBRFlTVEFURUNIQU5HRSwgY29tcGxldGVkICk7XG5cdCAgICAgICAgICAgIHdpbltERVRBQ0hFVkVOVF0oIE9OTE9BRCwgY29tcGxldGVkICk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgXG5cdCAgICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC5cblx0ICAgIGZ1bmN0aW9uIGRlZmVyKCBmbiwgd2FpdCApIHtcblx0ICAgICAgICAvLyBBbGxvdyAwIHRvIGJlIHBhc3NlZFxuXHQgICAgICAgIHNldFRpbWVvdXQoIGZuLCArd2FpdCA+PSAwID8gd2FpdCA6IDEgKTtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgLy8gQXR0YWNoIHRoZSBsaXN0ZW5lcnM6XG5cdCAgICBcblx0ICAgIC8vIENhdGNoIGNhc2VzIHdoZXJlIG9uRG9tUmVhZHkgaXMgY2FsbGVkIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLlxuXHQgICAgLy8gd2Ugb25jZSB0cmllZCB0byB1c2UgcmVhZHlTdGF0ZSBcImludGVyYWN0aXZlXCIgaGVyZSwgYnV0IGl0IGNhdXNlZCBpc3N1ZXMgbGlrZSB0aGUgb25lXG5cdCAgICAvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdCAgICBpZiAoIGRvY1tSRUFEWVNUQVRFXSA9PT0gQ09NUExFVEUgKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdCAgICAgICAgZGVmZXIoIHJlYWR5ICk7XG5cdCAgICBcblx0ICAgIC8vIFN0YW5kYXJkcy1iYXNlZCBicm93c2VycyBzdXBwb3J0IERPTUNvbnRlbnRMb2FkZWRcblx0ICAgIH0gZWxzZSBpZiAoIHczYyApIHtcblx0ICAgICAgICAvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdCAgICAgICAgZG9jW0FEREVWRU5UTElTVEVORVJdKCBET01DT05URU5UTE9BREVELCBjb21wbGV0ZWQsIEZBTFNFICk7XG5cdCAgICBcblx0ICAgICAgICAvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHQgICAgICAgIHdpbltBRERFVkVOVExJU1RFTkVSXSggTE9BRCwgY29tcGxldGVkLCBGQUxTRSApO1xuXHQgICAgXG5cdCAgICAvLyBJZiBJRSBldmVudCBtb2RlbCBpcyB1c2VkXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCwgbWF5YmUgbGF0ZSBidXQgc2FmZSBhbHNvIGZvciBpZnJhbWVzXG5cdCAgICAgICAgZG9jW0FUVEFDSEVWRU5UXSggT05SRUFEWVNUQVRFQ0hBTkdFLCBjb21wbGV0ZWQgKTtcblx0ICAgIFxuXHQgICAgICAgIC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG5cdCAgICAgICAgd2luW0FUVEFDSEVWRU5UXSggT05MT0FELCBjb21wbGV0ZWQgKTtcblx0ICAgIFxuXHQgICAgICAgIC8vIElmIElFIGFuZCBub3QgYSBmcmFtZVxuXHQgICAgICAgIC8vIGNvbnRpbnVhbGx5IGNoZWNrIHRvIHNlZSBpZiB0aGUgZG9jdW1lbnQgaXMgcmVhZHlcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBfdG9wID0gd2luLmZyYW1lRWxlbWVudCA9PSBudWxsICYmIGRvY0VsZW07XG5cdCAgICAgICAgfSBjYXRjaChlKSB7fVxuXHQgICAgXG5cdCAgICAgICAgaWYgKCBfdG9wICYmIF90b3AuZG9TY3JvbGwgKSB7XG5cdCAgICAgICAgICAgIChmdW5jdGlvbiBkb1Njcm9sbENoZWNrKCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCAhaXNSZWFkeSApIHtcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHRyaWNrIGJ5IERpZWdvIFBlcmluaVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkL1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdG9wLmRvU2Nyb2xsKFwibGVmdFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyKCBkb1Njcm9sbENoZWNrLCA1MCApO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgIFxuXHQgICAgICAgICAgICAgICAgICAgIC8vIGRldGFjaCBhbGwgZG9tIHJlYWR5IGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgICAgIGRldGFjaCgpO1xuXHQgICAgXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGV4ZWN1dGUgYW55IHdhaXRpbmcgZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICAgICAgcmVhZHkoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIGZ1bmN0aW9uIG9uRG9tUmVhZHkoIGZuICkge1xuXHQgICAgICAgIC8vIElmIERPTSBpcyByZWFkeSwgZXhlY3V0ZSB0aGUgZnVuY3Rpb24gKGFzeW5jKSwgb3RoZXJ3aXNlIHdhaXRcblx0ICAgICAgICBpc1JlYWR5ID8gZGVmZXIoIGZuICkgOiBjYWxsYmFja3MucHVzaCggZm4gKTtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgLy8gQWRkIHZlcnNpb25cblx0ICAgIG9uRG9tUmVhZHkudmVyc2lvbiA9IFwiMS40LjBcIjtcblx0ICAgIC8vIEFkZCBtZXRob2QgdG8gY2hlY2sgaWYgRE9NIGlzIHJlYWR5XG5cdCAgICBvbkRvbVJlYWR5LmlzUmVhZHkgPSBmdW5jdGlvbigpe1xuXHQgICAgICAgIHJldHVybiBpc1JlYWR5O1xuXHQgICAgfTtcblxuXHQgICAgcmV0dXJuIG9uRG9tUmVhZHk7XG5cdH1cblxuXHRtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgX29uRG9tUmVhZHkod2luZG93KTtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vTW9kaWZpZWQgdmVyc2lvbiBvZiBjb21wb25lbnQvcXVlcnlzdHJpbmdcblx0Ly9DaGFuZ2VzOiB1cGRhdGVkIGRlcGVuZGVuY2llcywgZG90IG5vdGF0aW9uIHBhcnNpbmcsIEpTSGludCBmaXhlc1xuXHQvL0ZvcmsgYXQgaHR0cHM6Ly9naXRodWIuY29tL2ltc2t5L3F1ZXJ5c3RyaW5nXG5cblx0LyoqXG5cdCAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG5cdCAqL1xuXG5cdHZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG5cdHZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cdHZhciB0cmltID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciB0eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cblx0dmFyIGFycmF5UmVnZXggPSAvKFxcdyspXFxbKFxcZCspXFxdLztcblx0dmFyIG9iamVjdFJlZ2V4ID0gL1xcdytcXC5cXHcrLztcblxuXHQvKipcblx0ICogUGFyc2UgdGhlIGdpdmVuIHF1ZXJ5IGBzdHJgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cblx0ZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKHN0cil7XG5cdCAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2Ygc3RyKSByZXR1cm4ge307XG5cblx0ICBzdHIgPSB0cmltKHN0cik7XG5cdCAgaWYgKCcnID09PSBzdHIpIHJldHVybiB7fTtcblx0ICBpZiAoJz8nID09PSBzdHIuY2hhckF0KDApKSBzdHIgPSBzdHIuc2xpY2UoMSk7XG5cblx0ICB2YXIgb2JqID0ge307XG5cdCAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KCcmJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHBhcnRzID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcblx0ICAgIHZhciBrZXkgPSBkZWNvZGUocGFydHNbMF0pO1xuXHQgICAgdmFyIG0sIGN0eCwgcHJvcDtcblxuXHQgICAgaWYgKG0gPSBhcnJheVJlZ2V4LmV4ZWMoa2V5KSkge1xuXHQgICAgICBvYmpbbVsxXV0gPSBvYmpbbVsxXV0gfHwgW107XG5cdCAgICAgIG9ialttWzFdXVttWzJdXSA9IGRlY29kZShwYXJ0c1sxXSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXG5cdCAgICBpZiAobSA9IG9iamVjdFJlZ2V4LnRlc3Qoa2V5KSkge1xuXHQgICAgICBtID0ga2V5LnNwbGl0KCcuJyk7XG5cdCAgICAgIGN0eCA9IG9iajtcblx0ICAgICAgXG5cdCAgICAgIHdoaWxlIChtLmxlbmd0aCkge1xuXHQgICAgICAgIHByb3AgPSBtLnNoaWZ0KCk7XG5cblx0ICAgICAgICBpZiAoIXByb3AubGVuZ3RoKSBjb250aW51ZTtcblxuXHQgICAgICAgIGlmICghY3R4W3Byb3BdKSB7XG5cdCAgICAgICAgICBjdHhbcHJvcF0gPSB7fTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGN0eFtwcm9wXSAmJiB0eXBlb2YgY3R4W3Byb3BdICE9PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKCFtLmxlbmd0aCkge1xuXHQgICAgICAgICAgY3R4W3Byb3BdID0gZGVjb2RlKHBhcnRzWzFdKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBjdHggPSBjdHhbcHJvcF07XG5cdCAgICAgIH1cblxuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblxuXHQgICAgb2JqW3BhcnRzWzBdXSA9IG51bGwgPT0gcGFydHNbMV0gPyAnJyA6IGRlY29kZShwYXJ0c1sxXSk7XG5cdCAgfVxuXG5cdCAgcmV0dXJuIG9iajtcblx0fTtcblxuXHQvKipcblx0ICogU3RyaW5naWZ5IHRoZSBnaXZlbiBgb2JqYC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXG5cdGV4cG9ydHMuc3RyaW5naWZ5ID0gZnVuY3Rpb24ob2JqKXtcblx0ICBpZiAoIW9iaikgcmV0dXJuICcnO1xuXHQgIHZhciBwYWlycyA9IFtdO1xuXG5cdCAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG5cblx0ICAgIGlmICgnYXJyYXknID09IHR5cGUodmFsdWUpKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyArK2kpIHtcblx0ICAgICAgICBwYWlycy5wdXNoKGVuY29kZShrZXkgKyAnWycgKyBpICsgJ10nKSArICc9JyArIGVuY29kZSh2YWx1ZVtpXSkpO1xuXHQgICAgICB9XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXG5cdCAgICBwYWlycy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKG9ialtrZXldKSk7XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFNjZW5lR3JhcGggPSBmdW5jdGlvbihzY2VuZVByb3BlcnRpZXMpIHtcblx0ICAgIHZhciBub2RlQ291bnQgPSAxO1xuXG5cdCAgICAvL3RvZG86IG1vdmUgbWVyZ2UgdG8gaGVscGVycyBzZWN0aW9uXG5cdCAgICBmdW5jdGlvbiBtZXJnZShwYXJlbnQsIGNoaWxkKSB7XG5cdCAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBjaGlsZCkge1xuXHQgICAgICAgICAgICBwYXJlbnRbcHJvcF0gPSBjaGlsZFtwcm9wXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHBhcmVudDtcblx0ICAgIH1cblxuXHQgICAgdmFyIFNjZW5lTm9kZSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICBub2RlQ291bnQrKztcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuXHQgICAgICAgIHRoaXMuaWQgPSBub2RlQ291bnQ7XG5cdCAgICAgICAgdGhpcy5uYW1lID0gJ24nICsgbm9kZUNvdW50O1xuXHQgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy54ID0gdGhpcy55ID0gdGhpcy56ID0gMDtcblx0ICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5oZWlnaHQgPSAwO1xuXHQgICAgfTtcblxuXHQgICAgU2NlbmVOb2RlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG5cdCAgICAgICAgaWYgKHdpZHRoICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaGVpZ2h0ICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblxuXHQgICAgU2NlbmVOb2RlLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5LCB6KSB7XG5cdCAgICAgICAgdGhpcy54ID0geCAhPSBudWxsID8geCA6IHRoaXMueDtcblx0ICAgICAgICB0aGlzLnkgPSB5ICE9IG51bGwgPyB5IDogdGhpcy55O1xuXHQgICAgICAgIHRoaXMueiA9IHogIT0gbnVsbCA/IHogOiB0aGlzLno7XG5cdCAgICB9O1xuXG5cdCAgICBTY2VuZU5vZGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNoaWxkKSB7XG5cdCAgICAgICAgdmFyIG5hbWUgPSBjaGlsZC5uYW1lO1xuXHQgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jaGlsZHJlbltuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgdGhpcy5jaGlsZHJlbltuYW1lXSA9IGNoaWxkO1xuXHQgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRocm93ICdTY2VuZUdyYXBoOiBjaGlsZCBhbHJlYWR5IGV4aXN0czogJyArIG5hbWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblxuXHQgICAgdmFyIFJvb3ROb2RlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgU2NlbmVOb2RlLmNhbGwodGhpcywgJ3Jvb3QnKTtcblx0ICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBzY2VuZVByb3BlcnRpZXM7XG5cdCAgICB9O1xuXG5cdCAgICBSb290Tm9kZS5wcm90b3R5cGUgPSBuZXcgU2NlbmVOb2RlKCk7XG5cblx0ICAgIHZhciBTaGFwZSA9IGZ1bmN0aW9uKG5hbWUsIHByb3BzKSB7XG5cdCAgICAgICAgU2NlbmVOb2RlLmNhbGwodGhpcywgbmFtZSk7XG5cdCAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0ge1xuXHQgICAgICAgICAgICAnZmlsbCc6ICcjMDAwMDAwJ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHR5cGVvZiBwcm9wcyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgbWVyZ2UodGhpcy5wcm9wZXJ0aWVzLCBwcm9wcyk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIHRocm93ICdTY2VuZUdyYXBoOiBpbnZhbGlkIG5vZGUgbmFtZSc7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblxuXHQgICAgU2hhcGUucHJvdG90eXBlID0gbmV3IFNjZW5lTm9kZSgpO1xuXG5cdCAgICB2YXIgR3JvdXAgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBTaGFwZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHRoaXMudHlwZSA9ICdncm91cCc7XG5cdCAgICB9O1xuXG5cdCAgICBHcm91cC5wcm90b3R5cGUgPSBuZXcgU2hhcGUoKTtcblxuXHQgICAgdmFyIFJlY3QgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBTaGFwZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHRoaXMudHlwZSA9ICdyZWN0Jztcblx0ICAgIH07XG5cblx0ICAgIFJlY3QucHJvdG90eXBlID0gbmV3IFNoYXBlKCk7XG5cblx0ICAgIHZhciBUZXh0ID0gZnVuY3Rpb24odGV4dCkge1xuXHQgICAgICAgIFNoYXBlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy50eXBlID0gJ3RleHQnO1xuXHQgICAgICAgIHRoaXMucHJvcGVydGllcy50ZXh0ID0gdGV4dDtcblx0ICAgIH07XG5cblx0ICAgIFRleHQucHJvdG90eXBlID0gbmV3IFNoYXBlKCk7XG5cblx0ICAgIHZhciByb290ID0gbmV3IFJvb3ROb2RlKCk7XG5cblx0ICAgIHRoaXMuU2hhcGUgPSB7XG5cdCAgICAgICAgJ1JlY3QnOiBSZWN0LFxuXHQgICAgICAgICdUZXh0JzogVGV4dCxcblx0ICAgICAgICAnR3JvdXAnOiBHcm91cFxuXHQgICAgfTtcblxuXHQgICAgdGhpcy5yb290ID0gcm9vdDtcblx0ICAgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gU2NlbmVHcmFwaDtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIFNoYWxsb3cgb2JqZWN0IGNsb25lIGFuZCBtZXJnZVxuXHQgKlxuXHQgKiBAcGFyYW0gYSBPYmplY3QgQVxuXHQgKiBAcGFyYW0gYiBPYmplY3QgQlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHdpdGggYWxsIG9mIEEncyBwcm9wZXJ0aWVzLCBhbmQgYWxsIG9mIEIncyBwcm9wZXJ0aWVzLCBvdmVyd3JpdGluZyBBJ3MgcHJvcGVydGllc1xuXHQgKi9cblx0ZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbihhLCBiKSB7XG5cdCAgICB2YXIgYyA9IHt9O1xuXHQgICAgZm9yICh2YXIgeCBpbiBhKSB7XG5cdCAgICAgICAgaWYgKGEuaGFzT3duUHJvcGVydHkoeCkpIHtcblx0ICAgICAgICAgICAgY1t4XSA9IGFbeF07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGIgIT0gbnVsbCkge1xuXHQgICAgICAgIGZvciAodmFyIHkgaW4gYikge1xuXHQgICAgICAgICAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eSh5KSkge1xuXHQgICAgICAgICAgICAgICAgY1t5XSA9IGJbeV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYztcblx0fTtcblxuXHQvKipcblx0ICogVGFrZXMgYSBrL3YgbGlzdCBvZiBDU1MgcHJvcGVydGllcyBhbmQgcmV0dXJucyBhIHJ1bGVcblx0ICpcblx0ICogQHBhcmFtIHByb3BzIENTUyBwcm9wZXJ0aWVzIG9iamVjdFxuXHQgKi9cblx0ZXhwb3J0cy5jc3NQcm9wcyA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgICB2YXIgcmV0ID0gW107XG5cdCAgICBmb3IgKHZhciBwIGluIHByb3BzKSB7XG5cdCAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHApKSB7XG5cdCAgICAgICAgICAgIHJldC5wdXNoKHAgKyAnOicgKyBwcm9wc1twXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJldC5qb2luKCc7Jyk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuY29kZXMgSFRNTCBlbnRpdGllcyBpbiBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0gc3RyIElucHV0IHN0cmluZ1xuXHQgKi9cblx0ZXhwb3J0cy5lbmNvZGVIdG1sRW50aXR5ID0gZnVuY3Rpb24oc3RyKSB7XG5cdCAgICB2YXIgYnVmID0gW107XG5cdCAgICB2YXIgY2hhckNvZGUgPSAwO1xuXHQgICAgZm9yICh2YXIgaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdCAgICAgICAgaWYgKGNoYXJDb2RlID4gMTI4KSB7XG5cdCAgICAgICAgICAgIGJ1Zi51bnNoaWZ0KFsnJiMnLCBjaGFyQ29kZSwgJzsnXS5qb2luKCcnKSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgYnVmLnVuc2hpZnQoc3RyW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYnVmLmpvaW4oJycpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYW4gaW1hZ2UgZXhpc3RzXG5cdCAqXG5cdCAqIEBwYXJhbSBzcmMgVVJMIG9mIGltYWdlXG5cdCAqIEBwYXJhbSBjYWxsYmFjayBDYWxsYmFjayB0byBjYWxsIG9uY2UgaW1hZ2Ugc3RhdHVzIGhhcyBiZWVuIGZvdW5kXG5cdCAqL1xuXHRleHBvcnRzLmltYWdlRXhpc3RzID0gZnVuY3Rpb24oc3JjLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG5cdCAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCBmYWxzZSk7XG5cdCAgICB9O1xuXHQgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCB0cnVlKTtcblx0ICAgIH07XG5cdCAgICBpbWFnZS5zcmMgPSBzcmM7XG5cdH07XG5cblx0LyoqXG5cdCAqIERlY29kZXMgSFRNTCBlbnRpdGllcyBpbiBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0gc3RyIElucHV0IHN0cmluZ1xuXHQgKi9cblx0ZXhwb3J0cy5kZWNvZGVIdG1sRW50aXR5ID0gZnVuY3Rpb24oc3RyKSB7XG5cdCAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyYjKFxcZCspOy9nLCBmdW5jdGlvbihtYXRjaCwgZGVjKSB7XG5cdCAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZGVjKTtcblx0ICAgIH0pO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFJldHVybnMgYW4gZWxlbWVudCdzIGRpbWVuc2lvbnMgaWYgaXQncyB2aXNpYmxlLCBgZmFsc2VgIG90aGVyd2lzZS5cblx0ICpcblx0ICogQHBhcmFtIGVsIERPTSBlbGVtZW50XG5cdCAqL1xuXHRleHBvcnRzLmRpbWVuc2lvbkNoZWNrID0gZnVuY3Rpb24oZWwpIHtcblx0ICAgIHZhciBkaW1lbnNpb25zID0ge1xuXHQgICAgICAgIGhlaWdodDogZWwuY2xpZW50SGVpZ2h0LFxuXHQgICAgICAgIHdpZHRoOiBlbC5jbGllbnRXaWR0aFxuXHQgICAgfTtcblxuXHQgICAgaWYgKGRpbWVuc2lvbnMuaGVpZ2h0ICYmIGRpbWVuc2lvbnMud2lkdGgpIHtcblx0ICAgICAgICByZXR1cm4gZGltZW5zaW9ucztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB2YWx1ZSBpcyB0cnV0aHkgb3IgaWYgaXQgaXMgXCJzZW1hbnRpY2FsbHkgdHJ1dGh5XCJcblx0ICogQHBhcmFtIHZhbFxuXHQgKi9cblx0ZXhwb3J0cy50cnV0aHkgPSBmdW5jdGlvbih2YWwpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHJldHVybiB2YWwgPT09ICd0cnVlJyB8fCB2YWwgPT09ICd5ZXMnIHx8IHZhbCA9PT0gJzEnIHx8IHZhbCA9PT0gJ29uJyB8fCB2YWwgPT09ICfinJMnO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICEhdmFsO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBQYXJzZXMgaW5wdXQgaW50byBhIHdlbGwtZm9ybWVkIENTUyBjb2xvclxuXHQgKiBAcGFyYW0gdmFsXG5cdCAqL1xuXHRleHBvcnRzLnBhcnNlQ29sb3IgPSBmdW5jdGlvbih2YWwpIHtcblx0ICAgIHZhciBoZXhyZSA9IC8oXig/OiM/KVswLTlhLWZdezZ9JCl8KF4oPzojPylbMC05YS1mXXszfSQpL2k7XG5cdCAgICB2YXIgcmdicmUgPSAvXnJnYlxcKChcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccypcXCkkLztcblx0ICAgIHZhciByZ2JhcmUgPSAvXnJnYmFcXCgoXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooMFxcLlxcZHsxLH18MSlcXCkkLztcblxuXHQgICAgdmFyIG1hdGNoID0gdmFsLm1hdGNoKGhleHJlKTtcblx0ICAgIHZhciByZXR2YWw7XG5cblx0ICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuXHQgICAgICAgIHJldHZhbCA9IG1hdGNoWzFdIHx8IG1hdGNoWzJdO1xuXHQgICAgICAgIGlmIChyZXR2YWxbMF0gIT09ICcjJykge1xuXHQgICAgICAgICAgICByZXR1cm4gJyMnICsgcmV0dmFsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXR2YWw7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBtYXRjaCA9IHZhbC5tYXRjaChyZ2JyZSk7XG5cblx0ICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuXHQgICAgICAgIHJldHZhbCA9ICdyZ2IoJyArIG1hdGNoLnNsaWNlKDEpLmpvaW4oJywnKSArICcpJztcblx0ICAgICAgICByZXR1cm4gcmV0dmFsO1xuXHQgICAgfVxuXG5cdCAgICBtYXRjaCA9IHZhbC5tYXRjaChyZ2JhcmUpO1xuXG5cdCAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcblx0ICAgICAgICByZXR2YWwgPSAncmdiYSgnICsgbWF0Y2guc2xpY2UoMSkuam9pbignLCcpICsgJyknO1xuXHQgICAgICAgIHJldHVybiByZXR2YWw7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBudWxsO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciBET00gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG5cdHZhciBTVkdfTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuXHR2YXIgTk9ERV9UWVBFX0NPTU1FTlQgPSA4O1xuXG5cdC8qKlxuXHQgKiBHZW5lcmljIFNWRyBlbGVtZW50IGNyZWF0aW9uIGZ1bmN0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSBzdmcgU1ZHIGNvbnRleHQsIHNldCB0byBudWxsIGlmIG5ld1xuXHQgKiBAcGFyYW0gd2lkdGggRG9jdW1lbnQgd2lkdGhcblx0ICogQHBhcmFtIGhlaWdodCBEb2N1bWVudCBoZWlnaHRcblx0ICovXG5cdGV4cG9ydHMuaW5pdFNWRyA9IGZ1bmN0aW9uKHN2Zywgd2lkdGgsIGhlaWdodCkge1xuXHQgICAgdmFyIGRlZnMsIHN0eWxlLCBpbml0aWFsaXplID0gZmFsc2U7XG5cblx0ICAgIGlmIChzdmcgJiYgc3ZnLnF1ZXJ5U2VsZWN0b3IpIHtcblx0ICAgICAgICBzdHlsZSA9IHN2Zy5xdWVyeVNlbGVjdG9yKCdzdHlsZScpO1xuXHQgICAgICAgIGlmIChzdHlsZSA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgICBpbml0aWFsaXplID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN2ZyA9IERPTS5uZXdFbCgnc3ZnJywgU1ZHX05TKTtcblx0ICAgICAgICBpbml0aWFsaXplID0gdHJ1ZTtcblx0ICAgIH1cblxuXHQgICAgaWYgKGluaXRpYWxpemUpIHtcblx0ICAgICAgICBkZWZzID0gRE9NLm5ld0VsKCdkZWZzJywgU1ZHX05TKTtcblx0ICAgICAgICBzdHlsZSA9IERPTS5uZXdFbCgnc3R5bGUnLCBTVkdfTlMpO1xuXHQgICAgICAgIERPTS5zZXRBdHRyKHN0eWxlLCB7XG5cdCAgICAgICAgICAgICd0eXBlJzogJ3RleHQvY3NzJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGRlZnMuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHQgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChkZWZzKTtcblx0ICAgIH1cblxuXHQgICAgLy9JRSB0aHJvd3MgYW4gZXhjZXB0aW9uIGlmIHRoaXMgaXMgc2V0IGFuZCBDaHJvbWUgcmVxdWlyZXMgaXQgdG8gYmUgc2V0XG5cdCAgICBpZiAoc3ZnLndlYmtpdE1hdGNoZXNTZWxlY3Rvcikge1xuXHQgICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgU1ZHX05TKTtcblx0ICAgIH1cblxuXHQgICAgLy9SZW1vdmUgY29tbWVudCBub2Rlc1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdmcuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGlmIChzdmcuY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0NPTU1FTlQpIHtcblx0ICAgICAgICAgICAgc3ZnLnJlbW92ZUNoaWxkKHN2Zy5jaGlsZE5vZGVzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIC8vUmVtb3ZlIENTU1xuXHQgICAgd2hpbGUgKHN0eWxlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuY2hpbGROb2Rlc1swXSk7XG5cdCAgICB9XG5cblx0ICAgIERPTS5zZXRBdHRyKHN2Zywge1xuXHQgICAgICAgICd3aWR0aCc6IHdpZHRoLFxuXHQgICAgICAgICdoZWlnaHQnOiBoZWlnaHQsXG5cdCAgICAgICAgJ3ZpZXdCb3gnOiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodCxcblx0ICAgICAgICAncHJlc2VydmVBc3BlY3RSYXRpbyc6ICdub25lJ1xuXHQgICAgfSk7XG5cblx0ICAgIHJldHVybiBzdmc7XG5cdH07XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIHNlcmlhbGl6ZWQgU1ZHIHRvIGEgc3RyaW5nIHN1aXRhYmxlIGZvciBkYXRhIFVSSSB1c2Vcblx0ICogQHBhcmFtIHN2Z1N0cmluZyBTZXJpYWxpemVkIFNWRyBzdHJpbmdcblx0ICogQHBhcmFtIFtiYXNlNjRdIFVzZSBiYXNlNjQgZW5jb2RpbmcgZm9yIGRhdGEgVVJJXG5cdCAqL1xuXHRleHBvcnRzLnN2Z1N0cmluZ1RvRGF0YVVSSSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHJhd1ByZWZpeCA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwnO1xuXHQgICAgdmFyIGJhc2U2NFByZWZpeCA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtODtiYXNlNjQsJztcblxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHN2Z1N0cmluZywgYmFzZTY0KSB7XG5cdCAgICAgICAgaWYgKGJhc2U2NCkge1xuXHQgICAgICAgICAgICByZXR1cm4gYmFzZTY0UHJlZml4ICsgYnRvYShnbG9iYWwudW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN2Z1N0cmluZykpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gcmF3UHJlZml4ICsgZW5jb2RlVVJJQ29tcG9uZW50KHN2Z1N0cmluZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fSgpO1xuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHNlcmlhbGl6ZWQgU1ZHIHdpdGggWE1MIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25zXG5cdCAqXG5cdCAqIEBwYXJhbSBzdmcgU1ZHIGNvbnRleHRcblx0ICogQHBhcmFtIHN0eWxlc2hlZXRzIENTUyBzdHlsZXNoZWV0cyB0byBpbmNsdWRlXG5cdCAqL1xuXHRleHBvcnRzLnNlcmlhbGl6ZVNWRyA9IGZ1bmN0aW9uKHN2ZywgZW5naW5lU2V0dGluZ3MpIHtcblx0ICAgIGlmICghZ2xvYmFsLlhNTFNlcmlhbGl6ZXIpIHJldHVybjtcblx0ICAgIHZhciBzZXJpYWxpemVyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcblx0ICAgIHZhciBzdmdDU1MgPSAnJztcblx0ICAgIHZhciBzdHlsZXNoZWV0cyA9IGVuZ2luZVNldHRpbmdzLnN0eWxlc2hlZXRzO1xuXG5cdCAgICAvL0V4dGVybmFsIHN0eWxlc2hlZXRzOiBQcm9jZXNzaW5nIEluc3RydWN0aW9uIG1ldGhvZFxuXHQgICAgaWYgKGVuZ2luZVNldHRpbmdzLnN2Z1hNTFN0eWxlc2hlZXQpIHtcblx0ICAgICAgICB2YXIgeG1sID0gRE9NLmNyZWF0ZVhNTCgpO1xuXHQgICAgICAgIC8vQWRkIDw/eG1sLXN0eWxlc2hlZXQgPz4gZGlyZWN0aXZlc1xuXHQgICAgICAgIGZvciAodmFyIGkgPSBzdHlsZXNoZWV0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgICAgICB2YXIgY3NzcGkgPSB4bWwuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKCd4bWwtc3R5bGVzaGVldCcsICdocmVmPVwiJyArIHN0eWxlc2hlZXRzW2ldICsgJ1wiIHJlbD1cInN0eWxlc2hlZXRcIicpO1xuXHQgICAgICAgICAgICB4bWwuaW5zZXJ0QmVmb3JlKGNzc3BpLCB4bWwuZmlyc3RDaGlsZCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgeG1sLnJlbW92ZUNoaWxkKHhtbC5kb2N1bWVudEVsZW1lbnQpO1xuXHQgICAgICAgIHN2Z0NTUyA9IHNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcoeG1sKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIHN2Z1RleHQgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKHN2Zyk7XG5cdCAgICBzdmdUZXh0ID0gc3ZnVGV4dC5yZXBsYWNlKC9cXCZhbXA7KFxcI1swLTldezIsfVxcOykvZywgJyYkMScpO1xuXHQgICAgcmV0dXJuIHN2Z0NTUyArIHN2Z1RleHQ7XG5cdH07XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qKlxuXHQgKiBHZW5lcmljIG5ldyBET00gZWxlbWVudCBmdW5jdGlvblxuXHQgKlxuXHQgKiBAcGFyYW0gdGFnIFRhZyB0byBjcmVhdGVcblx0ICogQHBhcmFtIG5hbWVzcGFjZSBPcHRpb25hbCBuYW1lc3BhY2UgdmFsdWVcblx0ICovXG5cdGV4cG9ydHMubmV3RWwgPSBmdW5jdGlvbih0YWcsIG5hbWVzcGFjZSkge1xuXHQgICAgaWYgKCFnbG9iYWwuZG9jdW1lbnQpIHJldHVybjtcblxuXHQgICAgaWYgKG5hbWVzcGFjZSA9PSBudWxsKSB7XG5cdCAgICAgICAgcmV0dXJuIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgdGFnKTtcblx0ICAgIH1cblx0fTtcblxuXHQvKipcblx0ICogR2VuZXJpYyBzZXRBdHRyaWJ1dGUgZnVuY3Rpb25cblx0ICpcblx0ICogQHBhcmFtIGVsIFJlZmVyZW5jZSB0byBET00gZWxlbWVudFxuXHQgKiBAcGFyYW0gYXR0cnMgT2JqZWN0IHdpdGggYXR0cmlidXRlIGtleXMgYW5kIHZhbHVlc1xuXHQgKi9cblx0ZXhwb3J0cy5zZXRBdHRyID0gZnVuY3Rpb24gKGVsLCBhdHRycykge1xuXHQgICAgZm9yICh2YXIgYSBpbiBhdHRycykge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhLCBhdHRyc1thXSk7XG5cdCAgICB9XG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBYTUwgZG9jdW1lbnRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGV4cG9ydHMuY3JlYXRlWE1MID0gZnVuY3Rpb24oKSB7XG5cdCAgICBpZiAoIWdsb2JhbC5ET01QYXJzZXIpIHJldHVybjtcblx0ICAgIHJldHVybiBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKCc8eG1sIC8+JywgJ2FwcGxpY2F0aW9uL3htbCcpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIHZhbHVlIGludG8gYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG5cdCAqXG5cdCAqIEBwYXJhbSB2YWwgQSBzdHJpbmcsIGEgTm9kZUxpc3QsIGEgTm9kZSwgb3IgYW4gSFRNTENvbGxlY3Rpb25cblx0ICovXG5cdGV4cG9ydHMuZ2V0Tm9kZUFycmF5ID0gZnVuY3Rpb24odmFsKSB7XG5cdCAgICB2YXIgcmV0dmFsID0gbnVsbDtcblx0ICAgIGlmICh0eXBlb2YodmFsKSA9PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHJldHZhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk5vZGVMaXN0ICYmIHZhbCBpbnN0YW5jZW9mIGdsb2JhbC5Ob2RlTGlzdCkge1xuXHQgICAgICAgIHJldHZhbCA9IHZhbDtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk5vZGUgJiYgdmFsIGluc3RhbmNlb2YgZ2xvYmFsLk5vZGUpIHtcblx0ICAgICAgICByZXR2YWwgPSBbdmFsXTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLkhUTUxDb2xsZWN0aW9uICYmIHZhbCBpbnN0YW5jZW9mIGdsb2JhbC5IVE1MQ29sbGVjdGlvbikge1xuXHQgICAgICAgIHJldHZhbCA9IHZhbDtcblx0ICAgIH0gZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgQXJyYXkpIHtcblx0ICAgICAgICByZXR2YWwgPSB2YWw7XG5cdCAgICB9IGVsc2UgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgICAgIHJldHZhbCA9IFtdO1xuXHQgICAgfVxuXG5cdCAgICByZXR2YWwgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyZXR2YWwpO1xuXG5cdCAgICByZXR1cm4gcmV0dmFsO1xuXHR9O1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBDb2xvciA9IGZ1bmN0aW9uKGNvbG9yLCBvcHRpb25zKSB7XG5cdCAgICAvL3RvZG86IHN1cHBvcnQgcmdiYSwgaHNsYSwgYW5kIHJyZ2diYmFhIG5vdGF0aW9uXG5cdCAgICAvL3RvZG86IHVzZSBDSUVMQUIgaW50ZXJuYWxseVxuXHQgICAgLy90b2RvOiBhZGQgY2xhbXAgZnVuY3Rpb24gKHdpdGggc2lnbilcblx0ICAgIGlmICh0eXBlb2YgY29sb3IgIT09ICdzdHJpbmcnKSByZXR1cm47XG5cblx0ICAgIHRoaXMub3JpZ2luYWwgPSBjb2xvcjtcblxuXHQgICAgaWYgKGNvbG9yLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cdCAgICAgICAgY29sb3IgPSBjb2xvci5zbGljZSgxKTtcblx0ICAgIH1cblxuXHQgICAgaWYgKC9bXmEtZjAtOV0rL2kudGVzdChjb2xvcikpIHJldHVybjtcblxuXHQgICAgaWYgKGNvbG9yLmxlbmd0aCA9PT0gMykge1xuXHQgICAgICAgIGNvbG9yID0gY29sb3IucmVwbGFjZSgvLi9nLCAnJCYkJicpO1xuXHQgICAgfVxuXG5cdCAgICBpZiAoY29sb3IubGVuZ3RoICE9PSA2KSByZXR1cm47XG5cblx0ICAgIHRoaXMuYWxwaGEgPSAxO1xuXG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFscGhhKSB7XG5cdCAgICAgICAgdGhpcy5hbHBoYSA9IG9wdGlvbnMuYWxwaGE7XG5cdCAgICB9XG5cblx0ICAgIHRoaXMuc2V0KHBhcnNlSW50KGNvbG9yLCAxNikpO1xuXHR9O1xuXG5cdC8vdG9kbzoganNkb2NzXG5cdENvbG9yLnJnYjJoZXggPSBmdW5jdGlvbihyLCBnLCBiKSB7XG5cdCAgICBmdW5jdGlvbiBmb3JtYXQgKGRlY2ltYWwpIHtcblx0ICAgICAgICB2YXIgaGV4ID0gKGRlY2ltYWwgfCAwKS50b1N0cmluZygxNik7XG5cdCAgICAgICAgaWYgKGRlY2ltYWwgPCAxNikge1xuXHQgICAgICAgICAgICBoZXggPSAnMCcgKyBoZXg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBoZXg7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBbciwgZywgYl0ubWFwKGZvcm1hdCkuam9pbignJyk7XG5cdH07XG5cblx0Ly90b2RvOiBqc2RvY3Ncblx0Q29sb3IuaHNsMnJnYiA9IGZ1bmN0aW9uIChoLCBzLCBsKSB7XG5cdCAgICB2YXIgSCA9IGggLyA2MDtcblx0ICAgIHZhciBDID0gKDEgLSBNYXRoLmFicygyICogbCAtIDEpKSAqIHM7XG5cdCAgICB2YXIgWCA9IEMgKiAoMSAtIE1hdGguYWJzKHBhcnNlSW50KEgpICUgMiAtIDEpKTtcblx0ICAgIHZhciBtID0gbCAtIChDIC8gMik7XG5cblx0ICAgIHZhciByID0gMCwgZyA9IDAsIGIgPSAwO1xuXG5cdCAgICBpZiAoSCA+PSAwICYmIEggPCAxKSB7XG5cdCAgICAgICAgciA9IEM7XG5cdCAgICAgICAgZyA9IFg7XG5cdCAgICB9IGVsc2UgaWYgKEggPj0gMSAmJiBIIDwgMikge1xuXHQgICAgICAgIHIgPSBYO1xuXHQgICAgICAgIGcgPSBDO1xuXHQgICAgfSBlbHNlIGlmIChIID49IDIgJiYgSCA8IDMpIHtcblx0ICAgICAgICBnID0gQztcblx0ICAgICAgICBiID0gWDtcblx0ICAgIH0gZWxzZSBpZiAoSCA+PSAzICYmIEggPCA0KSB7XG5cdCAgICAgICAgZyA9IFg7XG5cdCAgICAgICAgYiA9IEM7XG5cdCAgICB9IGVsc2UgaWYgKEggPj0gNCAmJiBIIDwgNSkge1xuXHQgICAgICAgIHIgPSBYO1xuXHQgICAgICAgIGIgPSBDO1xuXHQgICAgfSBlbHNlIGlmIChIID49IDUgJiYgSCA8IDYpIHtcblx0ICAgICAgICByID0gQztcblx0ICAgICAgICBiID0gWDtcblx0ICAgIH1cblxuXHQgICAgciArPSBtO1xuXHQgICAgZyArPSBtO1xuXHQgICAgYiArPSBtO1xuXG5cdCAgICByID0gcGFyc2VJbnQociAqIDI1NSk7XG5cdCAgICBnID0gcGFyc2VJbnQoZyAqIDI1NSk7XG5cdCAgICBiID0gcGFyc2VJbnQoYiAqIDI1NSk7XG5cblx0ICAgIHJldHVybiBbciwgZywgYl07XG5cdH07XG5cblx0LyoqXG5cdCAqIFNldHMgdGhlIGNvbG9yIGZyb20gYSByYXcgUkdCODg4IGludGVnZXJcblx0ICogQHBhcmFtIHJhdyBSR0I4ODggcmVwcmVzZW50YXRpb24gb2YgY29sb3Jcblx0ICovXG5cdC8vdG9kbzogcmVmYWN0b3IgaW50byBhIHN0YXRpYyBtZXRob2Rcblx0Ly90b2RvOiBmYWN0b3Igb3V0IGluZGl2aWR1YWwgY29sb3Igc3BhY2VzXG5cdC8vdG9kbzogYWRkIEhTTCwgQ0lFTEFCLCBhbmQgQ0lFTFVWXG5cdENvbG9yLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICB0aGlzLnJhdyA9IHZhbDtcblxuXHQgICAgdmFyIHIgPSAodGhpcy5yYXcgJiAweEZGMDAwMCkgPj4gMTY7XG5cdCAgICB2YXIgZyA9ICh0aGlzLnJhdyAmIDB4MDBGRjAwKSA+PiA4O1xuXHQgICAgdmFyIGIgPSAodGhpcy5yYXcgJiAweDAwMDBGRik7XG5cblx0ICAgIC8vIEJULjcwOVxuXHQgICAgdmFyIHkgPSAwLjIxMjYgKiByICsgMC43MTUyICogZyArIDAuMDcyMiAqIGI7XG5cdCAgICB2YXIgdSA9IC0wLjA5OTkxICogciAtIDAuMzM2MDkgKiBnICsgMC40MzYgKiBiO1xuXHQgICAgdmFyIHYgPSAwLjYxNSAqIHIgLSAwLjU1ODYxICogZyAtIDAuMDU2MzkgKiBiO1xuXG5cdCAgICB0aGlzLnJnYiA9IHtcblx0ICAgICAgICByOiByLFxuXHQgICAgICAgIGc6IGcsXG5cdCAgICAgICAgYjogYlxuXHQgICAgfTtcblxuXHQgICAgdGhpcy55dXYgPSB7XG5cdCAgICAgICAgeTogeSxcblx0ICAgICAgICB1OiB1LFxuXHQgICAgICAgIHY6IHZcblx0ICAgIH07XG5cblx0ICAgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBMaWdodGVuIG9yIGRhcmtlbiBhIGNvbG9yXG5cdCAqIEBwYXJhbSBtdWx0aXBsaWVyIEFtb3VudCB0byBsaWdodGVuIG9yIGRhcmtlbiAoLTEgdG8gMSlcblx0ICovXG5cdENvbG9yLnByb3RvdHlwZS5saWdodGVuID0gZnVuY3Rpb24obXVsdGlwbGllcikge1xuXHQgICAgdmFyIGNtID0gTWF0aC5taW4oMSwgTWF0aC5tYXgoMCwgTWF0aC5hYnMobXVsdGlwbGllcikpKSAqIChtdWx0aXBsaWVyIDwgMCA/IC0xIDogMSk7XG5cdCAgICB2YXIgYm0gPSAoMjU1ICogY20pIHwgMDtcblx0ICAgIHZhciBjciA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgdGhpcy5yZ2IuciArIGJtKSk7XG5cdCAgICB2YXIgY2cgPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIHRoaXMucmdiLmcgKyBibSkpO1xuXHQgICAgdmFyIGNiID0gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCB0aGlzLnJnYi5iICsgYm0pKTtcblx0ICAgIHZhciBoZXggPSBDb2xvci5yZ2IyaGV4KGNyLCBjZywgY2IpO1xuXHQgICAgcmV0dXJuIG5ldyBDb2xvcihoZXgpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBPdXRwdXQgY29sb3IgaW4gaGV4IGZvcm1hdFxuXHQgKiBAcGFyYW0gYWRkSGFzaCBBZGQgYSBoYXNoIGNoYXJhY3RlciB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBvdXRwdXRcblx0ICovXG5cdENvbG9yLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uKGFkZEhhc2gpIHtcblx0ICAgIHJldHVybiAoYWRkSGFzaCA/ICcjJyA6ICcnKSArIHRoaXMucmF3LnRvU3RyaW5nKDE2KTtcblx0fTtcblxuXHQvKipcblx0ICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBjdXJyZW50IGNvbG9yIGlzIGxpZ2h0ZXIgdGhhbiBhbm90aGVyIGNvbG9yXG5cdCAqIEBwYXJhbSBjb2xvciBDb2xvciB0byBjb21wYXJlIGFnYWluc3Rcblx0ICovXG5cdENvbG9yLnByb3RvdHlwZS5saWdodGVyVGhhbiA9IGZ1bmN0aW9uKGNvbG9yKSB7XG5cdCAgICBpZiAoIShjb2xvciBpbnN0YW5jZW9mIENvbG9yKSkge1xuXHQgICAgICAgIGNvbG9yID0gbmV3IENvbG9yKGNvbG9yKTtcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHRoaXMueXV2LnkgPiBjb2xvci55dXYueTtcblx0fTtcblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIG1peGluZyBjdXJyZW50IGNvbG9yIHdpdGggYW5vdGhlciBjb2xvclxuXHQgKiBAcGFyYW0gY29sb3IgQ29sb3IgdG8gbWl4IHdpdGhcblx0ICogQHBhcmFtIG11bHRpcGxpZXIgSG93IG11Y2ggdG8gbWl4IHdpdGggdGhlIG90aGVyIGNvbG9yXG5cdCAqL1xuXHQvKlxuXHRDb2xvci5wcm90b3R5cGUubWl4ID0gZnVuY3Rpb24gKGNvbG9yLCBtdWx0aXBsaWVyKSB7XG5cdCAgICBpZiAoIShjb2xvciBpbnN0YW5jZW9mIENvbG9yKSkge1xuXHQgICAgICAgIGNvbG9yID0gbmV3IENvbG9yKGNvbG9yKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIHIgPSB0aGlzLnJnYi5yO1xuXHQgICAgdmFyIGcgPSB0aGlzLnJnYi5nO1xuXHQgICAgdmFyIGIgPSB0aGlzLnJnYi5iO1xuXHQgICAgdmFyIGEgPSB0aGlzLmFscGhhO1xuXG5cdCAgICB2YXIgbSA9IHR5cGVvZiBtdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJyA/IG11bHRpcGxpZXIgOiAwLjU7XG5cblx0ICAgIC8vdG9kbzogd3JpdGUgYSBsZXJwIGZ1bmN0aW9uXG5cdCAgICByID0gciArIG0gKiAoY29sb3IucmdiLnIgLSByKTtcblx0ICAgIGcgPSBnICsgbSAqIChjb2xvci5yZ2IuZyAtIGcpO1xuXHQgICAgYiA9IGIgKyBtICogKGNvbG9yLnJnYi5iIC0gYik7XG5cdCAgICBhID0gYSArIG0gKiAoY29sb3IuYWxwaGEgLSBhKTtcblxuXHQgICAgcmV0dXJuIG5ldyBDb2xvcihDb2xvci5yZ2JUb0hleChyLCBnLCBiKSwge1xuXHQgICAgICAgICdhbHBoYSc6IGFcblx0ICAgIH0pO1xuXHR9O1xuXHQqL1xuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYmxlbmRpbmcgYW5vdGhlciBjb2xvciBvbiB0b3Agb2YgY3VycmVudCBjb2xvciB3aXRoIGFscGhhXG5cdCAqIEBwYXJhbSBjb2xvciBDb2xvciB0byBibGVuZCBvbiB0b3Agb2YgY3VycmVudCBjb2xvciwgaS5lLiBcIkNhXCJcblx0ICovXG5cdC8vdG9kbzogc2VlIGlmIC5ibGVuZEFscGhhIGNhbiBiZSBtZXJnZWQgaW50byAubWl4XG5cdENvbG9yLnByb3RvdHlwZS5ibGVuZEFscGhhID0gZnVuY3Rpb24oY29sb3IpIHtcblx0ICAgIGlmICghKGNvbG9yIGluc3RhbmNlb2YgQ29sb3IpKSB7XG5cdCAgICAgICAgY29sb3IgPSBuZXcgQ29sb3IoY29sb3IpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgQ2EgPSBjb2xvcjtcblx0ICAgIHZhciBDYiA9IHRoaXM7XG5cblx0ICAgIC8vdG9kbzogd3JpdGUgYWxwaGEgYmxlbmRpbmcgZnVuY3Rpb25cblx0ICAgIHZhciByID0gQ2EuYWxwaGEgKiBDYS5yZ2IuciArICgxIC0gQ2EuYWxwaGEpICogQ2IucmdiLnI7XG5cdCAgICB2YXIgZyA9IENhLmFscGhhICogQ2EucmdiLmcgKyAoMSAtIENhLmFscGhhKSAqIENiLnJnYi5nO1xuXHQgICAgdmFyIGIgPSBDYS5hbHBoYSAqIENhLnJnYi5iICsgKDEgLSBDYS5hbHBoYSkgKiBDYi5yZ2IuYjtcblxuXHQgICAgcmV0dXJuIG5ldyBDb2xvcihDb2xvci5yZ2IyaGV4KHIsIGcsIGIpKTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IENvbG9yO1xuXG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAndmVyc2lvbic6ICcyLjguMicsXG5cdCAgJ3N2Z19ucyc6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zydcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7dmFyIFNWRyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBET00gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuXHR2YXIgU1ZHX05TID0gY29uc3RhbnRzLnN2Z19ucztcblxuXHR2YXIgZ2VuZXJhdG9yQ29tbWVudCA9ICdcXG4nICtcblx0ICAgICdDcmVhdGVkIHdpdGggSG9sZGVyLmpzICcgKyBjb25zdGFudHMudmVyc2lvbiArICcuXFxuJyArXG5cdCAgICAnTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tXFxuJyArXG5cdCAgICAnKGMpIDIwMTItMjAxNSBJdmFuIE1hbG9waW5za3kgLSBodHRwOi8vaW1za3kuY29cXG4nO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgLy9QcmV2ZW50IElFIDw5IGZyb20gaW5pdGlhbGl6aW5nIFNWRyByZW5kZXJlclxuXHQgICAgaWYgKCFnbG9iYWwuWE1MU2VyaWFsaXplcikgcmV0dXJuO1xuXHQgICAgdmFyIHhtbCA9IERPTS5jcmVhdGVYTUwoKTtcblx0ICAgIHZhciBzdmcgPSBTVkcuaW5pdFNWRyhudWxsLCAwLCAwKTtcblx0ICAgIHZhciBiZ0VsID0gRE9NLm5ld0VsKCdyZWN0JywgU1ZHX05TKTtcblx0ICAgIHN2Zy5hcHBlbmRDaGlsZChiZ0VsKTtcblxuXHQgICAgLy90b2RvOiBjcmVhdGUgYSByZXVzYWJsZSBwb29sIGZvciB0ZXh0Tm9kZXMsIHJlc2l6ZSBpZiBtb3JlIHdvcmRzIHByZXNlbnRcblxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHNjZW5lR3JhcGgsIHJlbmRlclNldHRpbmdzKSB7XG5cdCAgICAgICAgdmFyIHJvb3QgPSBzY2VuZUdyYXBoLnJvb3Q7XG5cblx0ICAgICAgICBTVkcuaW5pdFNWRyhzdmcsIHJvb3QucHJvcGVydGllcy53aWR0aCwgcm9vdC5wcm9wZXJ0aWVzLmhlaWdodCk7XG5cblx0ICAgICAgICB2YXIgZ3JvdXBzID0gc3ZnLnF1ZXJ5U2VsZWN0b3JBbGwoJ2cnKTtcblxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwc1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdyb3Vwc1tpXSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdmFyIGhvbGRlclVSTCA9IHJlbmRlclNldHRpbmdzLmhvbGRlclNldHRpbmdzLmZsYWdzLmhvbGRlclVSTDtcblx0ICAgICAgICB2YXIgaG9sZGVySWQgPSAnaG9sZGVyXycgKyAoTnVtYmVyKG5ldyBEYXRlKCkpICsgMzI3NjggKyAoMCB8IE1hdGgucmFuZG9tKCkgKiAzMjc2OCkpLnRvU3RyaW5nKDE2KTtcblx0ICAgICAgICB2YXIgc2NlbmVHcm91cEVsID0gRE9NLm5ld0VsKCdnJywgU1ZHX05TKTtcblx0ICAgICAgICB2YXIgdGV4dEdyb3VwID0gcm9vdC5jaGlsZHJlbi5ob2xkZXJUZXh0R3JvdXA7XG5cdCAgICAgICAgdmFyIHRnUHJvcHMgPSB0ZXh0R3JvdXAucHJvcGVydGllcztcblx0ICAgICAgICB2YXIgdGV4dEdyb3VwRWwgPSBET00ubmV3RWwoJ2cnLCBTVkdfTlMpO1xuXHQgICAgICAgIHZhciB0cGRhdGEgPSB0ZXh0R3JvdXAudGV4dFBvc2l0aW9uRGF0YTtcblx0ICAgICAgICB2YXIgdGV4dENTU1J1bGUgPSAnIycgKyBob2xkZXJJZCArICcgdGV4dCB7ICcgK1xuXHQgICAgICAgICAgICB1dGlscy5jc3NQcm9wcyh7XG5cdCAgICAgICAgICAgICAgICAnZmlsbCc6IHRnUHJvcHMuZmlsbCxcblx0ICAgICAgICAgICAgICAgICdmb250LXdlaWdodCc6IHRnUHJvcHMuZm9udC53ZWlnaHQsXG5cdCAgICAgICAgICAgICAgICAnZm9udC1mYW1pbHknOiB0Z1Byb3BzLmZvbnQuZmFtaWx5ICsgJywgbW9ub3NwYWNlJyxcblx0ICAgICAgICAgICAgICAgICdmb250LXNpemUnOiB0Z1Byb3BzLmZvbnQuc2l6ZSArIHRnUHJvcHMuZm9udC51bml0c1xuXHQgICAgICAgICAgICB9KSArICcgfSAnO1xuXHQgICAgICAgIHZhciBjb21tZW50Tm9kZSA9IHhtbC5jcmVhdGVDb21tZW50KCdcXG4nICsgJ1NvdXJjZSBVUkw6ICcgKyBob2xkZXJVUkwgKyBnZW5lcmF0b3JDb21tZW50KTtcblx0ICAgICAgICB2YXIgaG9sZGVyQ1NTID0geG1sLmNyZWF0ZUNEQVRBU2VjdGlvbih0ZXh0Q1NTUnVsZSk7XG5cdCAgICAgICAgdmFyIHN0eWxlRWwgPSBzdmcucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcblx0ICAgICAgICB2YXIgYmcgPSByb290LmNoaWxkcmVuLmhvbGRlckJnO1xuXG5cdCAgICAgICAgRE9NLnNldEF0dHIoc2NlbmVHcm91cEVsLCB7XG5cdCAgICAgICAgICAgIGlkOiBob2xkZXJJZFxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgc3ZnLmluc2VydEJlZm9yZShjb21tZW50Tm9kZSwgc3ZnLmZpcnN0Q2hpbGQpO1xuXHQgICAgICAgIHN0eWxlRWwuYXBwZW5kQ2hpbGQoaG9sZGVyQ1NTKTtcblxuXHQgICAgICAgIHNjZW5lR3JvdXBFbC5hcHBlbmRDaGlsZChiZ0VsKTtcblxuXHQgICAgICAgIC8vdG9kbzogYWJzdHJhY3QgdGhpcyBpbnRvIGEgY3Jvc3MtYnJvd3NlciBTVkcgb3V0bGluZSBtZXRob2Rcblx0ICAgICAgICBpZiAoYmcucHJvcGVydGllcy5vdXRsaW5lKSB7XG5cdCAgICAgICAgICAgIHZhciBvdXRsaW5lRWwgPSBET00ubmV3RWwoJ3BhdGgnLCBTVkdfTlMpO1xuXHQgICAgICAgICAgICB2YXIgb3V0bGluZVdpZHRoID0gYmcucHJvcGVydGllcy5vdXRsaW5lLndpZHRoO1xuXHQgICAgICAgICAgICB2YXIgb3V0bGluZU9mZnNldFdpZHRoID0gb3V0bGluZVdpZHRoIC8gMjtcblx0ICAgICAgICAgICAgRE9NLnNldEF0dHIob3V0bGluZUVsLCB7XG5cdCAgICAgICAgICAgICAgICAnZCc6IFtcblx0ICAgICAgICAgICAgICAgICAgICAnTScsIG91dGxpbmVPZmZzZXRXaWR0aCwgb3V0bGluZU9mZnNldFdpZHRoLFxuXHQgICAgICAgICAgICAgICAgICAgICdIJywgYmcud2lkdGggLSBvdXRsaW5lT2Zmc2V0V2lkdGgsXG5cdCAgICAgICAgICAgICAgICAgICAgJ1YnLCBiZy5oZWlnaHQgLSBvdXRsaW5lT2Zmc2V0V2lkdGgsXG5cdCAgICAgICAgICAgICAgICAgICAgJ0gnLCBvdXRsaW5lT2Zmc2V0V2lkdGgsXG5cdCAgICAgICAgICAgICAgICAgICAgJ1YnLCAwLFxuXHQgICAgICAgICAgICAgICAgICAgICdNJywgMCwgb3V0bGluZU9mZnNldFdpZHRoLFxuXHQgICAgICAgICAgICAgICAgICAgICdMJywgYmcud2lkdGgsIGJnLmhlaWdodCAtIG91dGxpbmVPZmZzZXRXaWR0aCxcblx0ICAgICAgICAgICAgICAgICAgICAnTScsIDAsIGJnLmhlaWdodCAtIG91dGxpbmVPZmZzZXRXaWR0aCxcblx0ICAgICAgICAgICAgICAgICAgICAnTCcsIGJnLndpZHRoLCBvdXRsaW5lT2Zmc2V0V2lkdGhcblx0ICAgICAgICAgICAgICAgIF0uam9pbignICcpLFxuXHQgICAgICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IGJnLnByb3BlcnRpZXMub3V0bGluZS53aWR0aCxcblx0ICAgICAgICAgICAgICAgICdzdHJva2UnOiBiZy5wcm9wZXJ0aWVzLm91dGxpbmUuZmlsbCxcblx0ICAgICAgICAgICAgICAgICdmaWxsJzogJ25vbmUnXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBzY2VuZUdyb3VwRWwuYXBwZW5kQ2hpbGQob3V0bGluZUVsKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBzY2VuZUdyb3VwRWwuYXBwZW5kQ2hpbGQodGV4dEdyb3VwRWwpO1xuXHQgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChzY2VuZUdyb3VwRWwpO1xuXG5cdCAgICAgICAgRE9NLnNldEF0dHIoYmdFbCwge1xuXHQgICAgICAgICAgICAnd2lkdGgnOiBiZy53aWR0aCxcblx0ICAgICAgICAgICAgJ2hlaWdodCc6IGJnLmhlaWdodCxcblx0ICAgICAgICAgICAgJ2ZpbGwnOiBiZy5wcm9wZXJ0aWVzLmZpbGxcblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHRleHRHcm91cC55ICs9IHRwZGF0YS5ib3VuZGluZ0JveC5oZWlnaHQgKiAwLjg7XG5cblx0ICAgICAgICBmb3IgKHZhciBsaW5lS2V5IGluIHRleHRHcm91cC5jaGlsZHJlbikge1xuXHQgICAgICAgICAgICB2YXIgbGluZSA9IHRleHRHcm91cC5jaGlsZHJlbltsaW5lS2V5XTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgd29yZEtleSBpbiBsaW5lLmNoaWxkcmVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgd29yZCA9IGxpbmUuY2hpbGRyZW5bd29yZEtleV07XG5cdCAgICAgICAgICAgICAgICB2YXIgeCA9IHRleHRHcm91cC54ICsgbGluZS54ICsgd29yZC54O1xuXHQgICAgICAgICAgICAgICAgdmFyIHkgPSB0ZXh0R3JvdXAueSArIGxpbmUueSArIHdvcmQueTtcblxuXHQgICAgICAgICAgICAgICAgdmFyIHRleHRFbCA9IERPTS5uZXdFbCgndGV4dCcsIFNWR19OUyk7XG5cdCAgICAgICAgICAgICAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShudWxsKTtcblxuXHQgICAgICAgICAgICAgICAgRE9NLnNldEF0dHIodGV4dEVsLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgJ3gnOiB4LFxuXHQgICAgICAgICAgICAgICAgICAgICd5JzogeVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgIHRleHROb2RlLm5vZGVWYWx1ZSA9IHdvcmQucHJvcGVydGllcy50ZXh0O1xuXHQgICAgICAgICAgICAgICAgdGV4dEVsLmFwcGVuZENoaWxkKHRleHROb2RlKTtcblx0ICAgICAgICAgICAgICAgIHRleHRHcm91cEVsLmFwcGVuZENoaWxkKHRleHRFbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvL3RvZG86IGZhY3RvciB0aGUgYmFja2dyb3VuZCBjaGVjayB1cCB0aGUgY2hhaW4sIHBlcmhhcHMgb25seSByZXR1cm4gcmVmZXJlbmNlXG5cdCAgICAgICAgdmFyIHN2Z1N0cmluZyA9IFNWRy5zdmdTdHJpbmdUb0RhdGFVUkkoU1ZHLnNlcmlhbGl6ZVNWRyhzdmcsIHJlbmRlclNldHRpbmdzLmVuZ2luZVNldHRpbmdzKSwgcmVuZGVyU2V0dGluZ3MubW9kZSA9PT0gJ2JhY2tncm91bmQnKTtcblx0ICAgICAgICByZXR1cm4gc3ZnU3RyaW5nO1xuXHQgICAgfTtcblx0fSkoKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuXG5cdGZ1bmN0aW9uIHRyaW0oc3RyKXtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcblx0fVxuXG5cdGV4cG9ydHMubGVmdCA9IGZ1bmN0aW9uKHN0cil7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKTtcblx0fTtcblxuXHRleHBvcnRzLnJpZ2h0ID0gZnVuY3Rpb24oc3RyKXtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL1xccyokLywgJycpO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHRvU3RyaW5nIHJlZi5cblx0ICovXG5cblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuXHQvKipcblx0ICogUmV0dXJuIHRoZSB0eXBlIG9mIGB2YWxgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSB2YWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCl7XG5cdCAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcblx0ICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOiByZXR1cm4gJ2RhdGUnO1xuXHQgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzogcmV0dXJuICdyZWdleHAnO1xuXHQgICAgY2FzZSAnW29iamVjdCBBcmd1bWVudHNdJzogcmV0dXJuICdhcmd1bWVudHMnO1xuXHQgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOiByZXR1cm4gJ2FycmF5Jztcblx0ICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzogcmV0dXJuICdlcnJvcic7XG5cdCAgfVxuXG5cdCAgaWYgKHZhbCA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcblx0ICBpZiAodmFsID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcblx0ICBpZiAodmFsICE9PSB2YWwpIHJldHVybiAnbmFuJztcblx0ICBpZiAodmFsICYmIHZhbC5ub2RlVHlwZSA9PT0gMSkgcmV0dXJuICdlbGVtZW50JztcblxuXHQgIHZhbCA9IHZhbC52YWx1ZU9mXG5cdCAgICA/IHZhbC52YWx1ZU9mKClcblx0ICAgIDogT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mLmFwcGx5KHZhbClcblxuXHQgIHJldHVybiB0eXBlb2YgdmFsO1xuXHR9O1xuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcbihmdW5jdGlvbihjdHgsIGlzTWV0ZW9yUGFja2FnZSkge1xuICAgIGlmIChpc01ldGVvclBhY2thZ2UpIHtcbiAgICAgICAgSG9sZGVyID0gY3R4LkhvbGRlcjtcbiAgICB9XG59KSh0aGlzLCB0eXBlb2YgTWV0ZW9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgUGFja2FnZSAhPT0gJ3VuZGVmaW5lZCcpO1xuIiwiLyogQGxpY2Vuc2Vcbm1vcnJpcy5qcyB2MC41LjBcbkNvcHlyaWdodCAyMDE0IE9sbHkgU21pdGggQWxsIHJpZ2h0cyByZXNlcnZlZC5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QtMi1DbGF1c2UgTGljZW5zZS5cbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgTW9ycmlzLCBtaW51dGVzU3BlY0hlbHBlciwgc2Vjb25kc1NwZWNIZWxwZXIsXG4gICAgX19zbGljZSA9IFtdLnNsaWNlLFxuICAgIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgTW9ycmlzID0gd2luZG93Lk1vcnJpcyA9IHt9O1xuXG4gICQgPSBqUXVlcnk7XG5cbiAgTW9ycmlzLkV2ZW50RW1pdHRlciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7fVxuXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKG5hbWUsIGhhbmRsZXIpIHtcbiAgICAgIGlmICh0aGlzLmhhbmRsZXJzID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFuZGxlcnNbbmFtZV0gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzW25hbWVdID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLmhhbmRsZXJzW25hbWVdLnB1c2goaGFuZGxlcik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgaGFuZGxlciwgbmFtZSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgbmFtZSA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICBpZiAoKHRoaXMuaGFuZGxlcnMgIT0gbnVsbCkgJiYgKHRoaXMuaGFuZGxlcnNbbmFtZV0gIT0gbnVsbCkpIHtcbiAgICAgICAgX3JlZiA9IHRoaXMuaGFuZGxlcnNbbmFtZV07XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGhhbmRsZXIgPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGhhbmRsZXIuYXBwbHkobnVsbCwgYXJncykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcblxuICB9KSgpO1xuXG4gIE1vcnJpcy5jb21tYXMgPSBmdW5jdGlvbihudW0pIHtcbiAgICB2YXIgYWJzbnVtLCBpbnRudW0sIHJldCwgc3RyYWJzbnVtO1xuICAgIGlmIChudW0gIT0gbnVsbCkge1xuICAgICAgcmV0ID0gbnVtIDwgMCA/IFwiLVwiIDogXCJcIjtcbiAgICAgIGFic251bSA9IE1hdGguYWJzKG51bSk7XG4gICAgICBpbnRudW0gPSBNYXRoLmZsb29yKGFic251bSkudG9GaXhlZCgwKTtcbiAgICAgIHJldCArPSBpbnRudW0ucmVwbGFjZSgvKD89KD86XFxkezN9KSskKSg/IV4pL2csICcsJyk7XG4gICAgICBzdHJhYnNudW0gPSBhYnNudW0udG9TdHJpbmcoKTtcbiAgICAgIGlmIChzdHJhYnNudW0ubGVuZ3RoID4gaW50bnVtLmxlbmd0aCkge1xuICAgICAgICByZXQgKz0gc3RyYWJzbnVtLnNsaWNlKGludG51bS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICctJztcbiAgICB9XG4gIH07XG5cbiAgTW9ycmlzLnBhZDIgPSBmdW5jdGlvbihudW1iZXIpIHtcbiAgICByZXR1cm4gKG51bWJlciA8IDEwID8gJzAnIDogJycpICsgbnVtYmVyO1xuICB9O1xuXG4gIE1vcnJpcy5HcmlkID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcmlkLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gR3JpZChvcHRpb25zKSB7XG4gICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSBfX2JpbmQodGhpcy5yZXNpemVIYW5kbGVyLCB0aGlzKTtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5lbCA9ICQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5lbGVtZW50KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsID0gJChvcHRpb25zLmVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKCh0aGlzLmVsID09IG51bGwpIHx8IHRoaXMuZWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdyYXBoIGNvbnRhaW5lciBlbGVtZW50IG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmVsLmNzcygncG9zaXRpb24nKSA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgdGhpcy5lbC5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5ncmlkRGVmYXVsdHMsIHRoaXMuZGVmYXVsdHMgfHwge30sIG9wdGlvbnMpO1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMudW5pdHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wb3N0VW5pdHMgPSBvcHRpb25zLnVuaXRzO1xuICAgICAgfVxuICAgICAgdGhpcy5yYXBoYWVsID0gbmV3IFJhcGhhZWwodGhpcy5lbFswXSk7XG4gICAgICB0aGlzLmVsZW1lbnRXaWR0aCA9IG51bGw7XG4gICAgICB0aGlzLmVsZW1lbnRIZWlnaHQgPSBudWxsO1xuICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgdGhpcy5zZWxlY3RGcm9tID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLmluaXQpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldERhdGEodGhpcy5vcHRpb25zLmRhdGEpO1xuICAgICAgdGhpcy5lbC5iaW5kKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgdmFyIGxlZnQsIG9mZnNldCwgcmlnaHQsIHdpZHRoLCB4O1xuICAgICAgICBvZmZzZXQgPSBfdGhpcy5lbC5vZmZzZXQoKTtcbiAgICAgICAgeCA9IGV2dC5wYWdlWCAtIG9mZnNldC5sZWZ0O1xuICAgICAgICBpZiAoX3RoaXMuc2VsZWN0RnJvbSkge1xuICAgICAgICAgIGxlZnQgPSBfdGhpcy5kYXRhW190aGlzLmhpdFRlc3QoTWF0aC5taW4oeCwgX3RoaXMuc2VsZWN0RnJvbSkpXS5feDtcbiAgICAgICAgICByaWdodCA9IF90aGlzLmRhdGFbX3RoaXMuaGl0VGVzdChNYXRoLm1heCh4LCBfdGhpcy5zZWxlY3RGcm9tKSldLl94O1xuICAgICAgICAgIHdpZHRoID0gcmlnaHQgLSBsZWZ0O1xuICAgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3Rpb25SZWN0LmF0dHIoe1xuICAgICAgICAgICAgeDogbGVmdCxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5maXJlKCdob3Zlcm1vdmUnLCB4LCBldnQucGFnZVkgLSBvZmZzZXQudG9wKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmVsLmJpbmQoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKF90aGlzLnNlbGVjdEZyb20pIHtcbiAgICAgICAgICBfdGhpcy5zZWxlY3Rpb25SZWN0LmhpZGUoKTtcbiAgICAgICAgICBfdGhpcy5zZWxlY3RGcm9tID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXMuZmlyZSgnaG92ZXJvdXQnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbC5iaW5kKCd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCcsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICB2YXIgb2Zmc2V0LCB0b3VjaDtcbiAgICAgICAgdG91Y2ggPSBldnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdIHx8IGV2dC5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICBvZmZzZXQgPSBfdGhpcy5lbC5vZmZzZXQoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzLmZpcmUoJ2hvdmVybW92ZScsIHRvdWNoLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHRvdWNoLnBhZ2VZIC0gb2Zmc2V0LnRvcCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZWwuYmluZCgnY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgdmFyIG9mZnNldDtcbiAgICAgICAgb2Zmc2V0ID0gX3RoaXMuZWwub2Zmc2V0KCk7XG4gICAgICAgIHJldHVybiBfdGhpcy5maXJlKCdncmlkY2xpY2snLCBldnQucGFnZVggLSBvZmZzZXQubGVmdCwgZXZ0LnBhZ2VZIC0gb2Zmc2V0LnRvcCk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VTZWxlY3QpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SZWN0ID0gdGhpcy5yYXBoYWVsLnJlY3QoMCwgMCwgMCwgdGhpcy5lbC5pbm5lckhlaWdodCgpKS5hdHRyKHtcbiAgICAgICAgICBmaWxsOiB0aGlzLm9wdGlvbnMucmFuZ2VTZWxlY3RDb2xvcixcbiAgICAgICAgICBzdHJva2U6IGZhbHNlXG4gICAgICAgIH0pLnRvQmFjaygpLmhpZGUoKTtcbiAgICAgICAgdGhpcy5lbC5iaW5kKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0O1xuICAgICAgICAgIG9mZnNldCA9IF90aGlzLmVsLm9mZnNldCgpO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5zdGFydFJhbmdlKGV2dC5wYWdlWCAtIG9mZnNldC5sZWZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWwuYmluZCgnbW91c2V1cCcsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgIHZhciBvZmZzZXQ7XG4gICAgICAgICAgb2Zmc2V0ID0gX3RoaXMuZWwub2Zmc2V0KCk7XG4gICAgICAgICAgX3RoaXMuZW5kUmFuZ2UoZXZ0LnBhZ2VYIC0gb2Zmc2V0LmxlZnQpO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5maXJlKCdob3Zlcm1vdmUnLCBldnQucGFnZVggLSBvZmZzZXQubGVmdCwgZXZ0LnBhZ2VZIC0gb2Zmc2V0LnRvcCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemUpIHtcbiAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgIGlmIChfdGhpcy50aW1lb3V0SWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChfdGhpcy50aW1lb3V0SWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3RoaXMudGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoX3RoaXMucmVzaXplSGFuZGxlciwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsLmNzcygnLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yJywgJ3JnYmEoMCwwLDAsMCknKTtcbiAgICAgIGlmICh0aGlzLnBvc3RJbml0KSB7XG4gICAgICAgIHRoaXMucG9zdEluaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBHcmlkLnByb3RvdHlwZS5ncmlkRGVmYXVsdHMgPSB7XG4gICAgICBkYXRlRm9ybWF0OiBudWxsLFxuICAgICAgYXhlczogdHJ1ZSxcbiAgICAgIGdyaWQ6IHRydWUsXG4gICAgICBncmlkTGluZUNvbG9yOiAnI2FhYScsXG4gICAgICBncmlkU3Ryb2tlV2lkdGg6IDAuNSxcbiAgICAgIGdyaWRUZXh0Q29sb3I6ICcjODg4JyxcbiAgICAgIGdyaWRUZXh0U2l6ZTogMTIsXG4gICAgICBncmlkVGV4dEZhbWlseTogJ3NhbnMtc2VyaWYnLFxuICAgICAgZ3JpZFRleHRXZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgaGlkZUhvdmVyOiBmYWxzZSxcbiAgICAgIHlMYWJlbEZvcm1hdDogbnVsbCxcbiAgICAgIHhMYWJlbEFuZ2xlOiAwLFxuICAgICAgbnVtTGluZXM6IDUsXG4gICAgICBwYWRkaW5nOiAyNSxcbiAgICAgIHBhcnNlVGltZTogdHJ1ZSxcbiAgICAgIHBvc3RVbml0czogJycsXG4gICAgICBwcmVVbml0czogJycsXG4gICAgICB5bWF4OiAnYXV0bycsXG4gICAgICB5bWluOiAnYXV0byAwJyxcbiAgICAgIGdvYWxzOiBbXSxcbiAgICAgIGdvYWxTdHJva2VXaWR0aDogMS4wLFxuICAgICAgZ29hbExpbmVDb2xvcnM6IFsnIzY2NjYzMycsICcjOTk5OTY2JywgJyNjYzY2NjYnLCAnIzY2MzMzMyddLFxuICAgICAgZXZlbnRzOiBbXSxcbiAgICAgIGV2ZW50U3Ryb2tlV2lkdGg6IDEuMCxcbiAgICAgIGV2ZW50TGluZUNvbG9yczogWycjMDA1YTA0JywgJyNjY2ZmYmInLCAnIzNhNWYwYicsICcjMDA1NTAyJ10sXG4gICAgICByYW5nZVNlbGVjdDogbnVsbCxcbiAgICAgIHJhbmdlU2VsZWN0Q29sb3I6ICcjZWVmJyxcbiAgICAgIHJlc2l6ZTogZmFsc2VcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uKGRhdGEsIHJlZHJhdykge1xuICAgICAgdmFyIGUsIGlkeCwgaW5kZXgsIG1heEdvYWwsIG1pbkdvYWwsIHJldCwgcm93LCBzdGVwLCB0b3RhbCwgeSwgeWtleSwgeW1heCwgeW1pbiwgeXZhbCwgX3JlZjtcbiAgICAgIGlmIChyZWRyYXcgPT0gbnVsbCkge1xuICAgICAgICByZWRyYXcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgaWYgKChkYXRhID09IG51bGwpIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLnJhcGhhZWwuY2xlYXIoKTtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXIgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuaG92ZXIuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHltYXggPSB0aGlzLmN1bXVsYXRpdmUgPyAwIDogbnVsbDtcbiAgICAgIHltaW4gPSB0aGlzLmN1bXVsYXRpdmUgPyAwIDogbnVsbDtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ29hbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBtaW5Hb2FsID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdGhpcy5vcHRpb25zLmdvYWxzKTtcbiAgICAgICAgbWF4R29hbCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHRoaXMub3B0aW9ucy5nb2Fscyk7XG4gICAgICAgIHltaW4gPSB5bWluICE9IG51bGwgPyBNYXRoLm1pbih5bWluLCBtaW5Hb2FsKSA6IG1pbkdvYWw7XG4gICAgICAgIHltYXggPSB5bWF4ICE9IG51bGwgPyBNYXRoLm1heCh5bWF4LCBtYXhHb2FsKSA6IG1heEdvYWw7XG4gICAgICB9XG4gICAgICB0aGlzLmRhdGEgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaW5kZXggPSBfaSA9IDAsIF9sZW4gPSBkYXRhLmxlbmd0aDsgX2kgPCBfbGVuOyBpbmRleCA9ICsrX2kpIHtcbiAgICAgICAgICByb3cgPSBkYXRhW2luZGV4XTtcbiAgICAgICAgICByZXQgPSB7XG4gICAgICAgICAgICBzcmM6IHJvd1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0LmxhYmVsID0gcm93W3RoaXMub3B0aW9ucy54a2V5XTtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBhcnNlVGltZSkge1xuICAgICAgICAgICAgcmV0LnggPSBNb3JyaXMucGFyc2VEYXRlKHJldC5sYWJlbCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgICAgcmV0LmxhYmVsID0gdGhpcy5vcHRpb25zLmRhdGVGb3JtYXQocmV0LngpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmV0LmxhYmVsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICByZXQubGFiZWwgPSBuZXcgRGF0ZShyZXQubGFiZWwpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldC54ID0gaW5kZXg7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnhMYWJlbEZvcm1hdCkge1xuICAgICAgICAgICAgICByZXQubGFiZWwgPSB0aGlzLm9wdGlvbnMueExhYmVsRm9ybWF0KHJldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvdGFsID0gMDtcbiAgICAgICAgICByZXQueSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYsIF9yZXN1bHRzMTtcbiAgICAgICAgICAgIF9yZWYgPSB0aGlzLm9wdGlvbnMueWtleXM7XG4gICAgICAgICAgICBfcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaWR4ID0gX2ogPSAwLCBfbGVuMSA9IF9yZWYubGVuZ3RoOyBfaiA8IF9sZW4xOyBpZHggPSArK19qKSB7XG4gICAgICAgICAgICAgIHlrZXkgPSBfcmVmW2lkeF07XG4gICAgICAgICAgICAgIHl2YWwgPSByb3dbeWtleV07XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgeXZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB5dmFsID0gcGFyc2VGbG9hdCh5dmFsKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKHl2YWwgIT0gbnVsbCkgJiYgdHlwZW9mIHl2YWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgeXZhbCA9IG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHl2YWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1bXVsYXRpdmUpIHtcbiAgICAgICAgICAgICAgICAgIHRvdGFsICs9IHl2YWw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGlmICh5bWF4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgeW1heCA9IE1hdGgubWF4KHl2YWwsIHltYXgpO1xuICAgICAgICAgICAgICAgICAgICB5bWluID0gTWF0aC5taW4oeXZhbCwgeW1pbik7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5bWF4ID0geW1pbiA9IHl2YWw7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmN1bXVsYXRpdmUgJiYgKHRvdGFsICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgeW1heCA9IE1hdGgubWF4KHRvdGFsLCB5bWF4KTtcbiAgICAgICAgICAgICAgICB5bWluID0gTWF0aC5taW4odG90YWwsIHltaW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKHl2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gocmV0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYXJzZVRpbWUpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgIHJldHVybiAoYS54ID4gYi54KSAtIChiLnggPiBhLngpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMueG1pbiA9IHRoaXMuZGF0YVswXS54O1xuICAgICAgdGhpcy54bWF4ID0gdGhpcy5kYXRhW3RoaXMuZGF0YS5sZW5ndGggLSAxXS54O1xuICAgICAgdGhpcy5ldmVudHMgPSBbXTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYXJzZVRpbWUpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgICAgICBfcmVmID0gdGhpcy5vcHRpb25zLmV2ZW50cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgZSA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKE1vcnJpcy5wYXJzZURhdGUoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5ldmVudHMgPSB0aGlzLm9wdGlvbnMuZXZlbnRzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueG1heCA9IE1hdGgubWF4KHRoaXMueG1heCwgTWF0aC5tYXguYXBwbHkoTWF0aCwgdGhpcy5ldmVudHMpKTtcbiAgICAgICAgdGhpcy54bWluID0gTWF0aC5taW4odGhpcy54bWluLCBNYXRoLm1pbi5hcHBseShNYXRoLCB0aGlzLmV2ZW50cykpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMueG1pbiA9PT0gdGhpcy54bWF4KSB7XG4gICAgICAgIHRoaXMueG1pbiAtPSAxO1xuICAgICAgICB0aGlzLnhtYXggKz0gMTtcbiAgICAgIH1cbiAgICAgIHRoaXMueW1pbiA9IHRoaXMueWJvdW5kYXJ5KCdtaW4nLCB5bWluKTtcbiAgICAgIHRoaXMueW1heCA9IHRoaXMueWJvdW5kYXJ5KCdtYXgnLCB5bWF4KTtcbiAgICAgIGlmICh0aGlzLnltaW4gPT09IHRoaXMueW1heCkge1xuICAgICAgICBpZiAoeW1pbikge1xuICAgICAgICAgIHRoaXMueW1pbiAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueW1heCArPSAxO1xuICAgICAgfVxuICAgICAgaWYgKCgoX3JlZiA9IHRoaXMub3B0aW9ucy5heGVzKSA9PT0gdHJ1ZSB8fCBfcmVmID09PSAnYm90aCcgfHwgX3JlZiA9PT0gJ3knKSB8fCB0aGlzLm9wdGlvbnMuZ3JpZCA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnltYXggPT09IHRoaXMuZ3JpZERlZmF1bHRzLnltYXggJiYgdGhpcy5vcHRpb25zLnltaW4gPT09IHRoaXMuZ3JpZERlZmF1bHRzLnltaW4pIHtcbiAgICAgICAgICB0aGlzLmdyaWQgPSB0aGlzLmF1dG9HcmlkTGluZXModGhpcy55bWluLCB0aGlzLnltYXgsIHRoaXMub3B0aW9ucy5udW1MaW5lcyk7XG4gICAgICAgICAgdGhpcy55bWluID0gTWF0aC5taW4odGhpcy55bWluLCB0aGlzLmdyaWRbMF0pO1xuICAgICAgICAgIHRoaXMueW1heCA9IE1hdGgubWF4KHRoaXMueW1heCwgdGhpcy5ncmlkW3RoaXMuZ3JpZC5sZW5ndGggLSAxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RlcCA9ICh0aGlzLnltYXggLSB0aGlzLnltaW4pIC8gKHRoaXMub3B0aW9ucy5udW1MaW5lcyAtIDEpO1xuICAgICAgICAgIHRoaXMuZ3JpZCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfaSwgX3JlZjEsIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKHkgPSBfaSA9IF9yZWYxID0gdGhpcy55bWluLCBfcmVmMiA9IHRoaXMueW1heDsgc3RlcCA+IDAgPyBfaSA8PSBfcmVmMiA6IF9pID49IF9yZWYyOyB5ID0gX2kgKz0gc3RlcCkge1xuICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgaWYgKHJlZHJhdykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWRyYXcoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUueWJvdW5kYXJ5ID0gZnVuY3Rpb24oYm91bmRhcnlUeXBlLCBjdXJyZW50VmFsdWUpIHtcbiAgICAgIHZhciBib3VuZGFyeU9wdGlvbiwgc3VnZ2VzdGVkVmFsdWU7XG4gICAgICBib3VuZGFyeU9wdGlvbiA9IHRoaXMub3B0aW9uc1tcInlcIiArIGJvdW5kYXJ5VHlwZV07XG4gICAgICBpZiAodHlwZW9mIGJvdW5kYXJ5T3B0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoYm91bmRhcnlPcHRpb24uc2xpY2UoMCwgNCkgPT09ICdhdXRvJykge1xuICAgICAgICAgIGlmIChib3VuZGFyeU9wdGlvbi5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICBzdWdnZXN0ZWRWYWx1ZSA9IHBhcnNlSW50KGJvdW5kYXJ5T3B0aW9uLnNsaWNlKDUpLCAxMCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHN1Z2dlc3RlZFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIE1hdGhbYm91bmRhcnlUeXBlXShjdXJyZW50VmFsdWUsIHN1Z2dlc3RlZFZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGJvdW5kYXJ5T3B0aW9uLCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBib3VuZGFyeU9wdGlvbjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUuYXV0b0dyaWRMaW5lcyA9IGZ1bmN0aW9uKHltaW4sIHltYXgsIG5saW5lcykge1xuICAgICAgdmFyIGdtYXgsIGdtaW4sIGdyaWQsIHNtYWcsIHNwYW4sIHN0ZXAsIHVuaXQsIHksIHltYWc7XG4gICAgICBzcGFuID0geW1heCAtIHltaW47XG4gICAgICB5bWFnID0gTWF0aC5mbG9vcihNYXRoLmxvZyhzcGFuKSAvIE1hdGgubG9nKDEwKSk7XG4gICAgICB1bml0ID0gTWF0aC5wb3coMTAsIHltYWcpO1xuICAgICAgZ21pbiA9IE1hdGguZmxvb3IoeW1pbiAvIHVuaXQpICogdW5pdDtcbiAgICAgIGdtYXggPSBNYXRoLmNlaWwoeW1heCAvIHVuaXQpICogdW5pdDtcbiAgICAgIHN0ZXAgPSAoZ21heCAtIGdtaW4pIC8gKG5saW5lcyAtIDEpO1xuICAgICAgaWYgKHVuaXQgPT09IDEgJiYgc3RlcCA+IDEgJiYgTWF0aC5jZWlsKHN0ZXApICE9PSBzdGVwKSB7XG4gICAgICAgIHN0ZXAgPSBNYXRoLmNlaWwoc3RlcCk7XG4gICAgICAgIGdtYXggPSBnbWluICsgc3RlcCAqIChubGluZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChnbWluIDwgMCAmJiBnbWF4ID4gMCkge1xuICAgICAgICBnbWluID0gTWF0aC5mbG9vcih5bWluIC8gc3RlcCkgKiBzdGVwO1xuICAgICAgICBnbWF4ID0gTWF0aC5jZWlsKHltYXggLyBzdGVwKSAqIHN0ZXA7XG4gICAgICB9XG4gICAgICBpZiAoc3RlcCA8IDEpIHtcbiAgICAgICAgc21hZyA9IE1hdGguZmxvb3IoTWF0aC5sb2coc3RlcCkgLyBNYXRoLmxvZygxMCkpO1xuICAgICAgICBncmlkID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaSwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHkgPSBfaSA9IGdtaW47IHN0ZXAgPiAwID8gX2kgPD0gZ21heCA6IF9pID49IGdtYXg7IHkgPSBfaSArPSBzdGVwKSB7XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHBhcnNlRmxvYXQoeS50b0ZpeGVkKDEgLSBzbWFnKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncmlkID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaSwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHkgPSBfaSA9IGdtaW47IHN0ZXAgPiAwID8gX2kgPD0gZ21heCA6IF9pID49IGdtYXg7IHkgPSBfaSArPSBzdGVwKSB7XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZ3JpZDtcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUuX2NhbGMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib3R0b21PZmZzZXRzLCBncmlkTGluZSwgaCwgaSwgdywgeUxhYmVsV2lkdGhzLCBfcmVmLCBfcmVmMTtcbiAgICAgIHcgPSB0aGlzLmVsLndpZHRoKCk7XG4gICAgICBoID0gdGhpcy5lbC5oZWlnaHQoKTtcbiAgICAgIGlmICh0aGlzLmVsZW1lbnRXaWR0aCAhPT0gdyB8fCB0aGlzLmVsZW1lbnRIZWlnaHQgIT09IGggfHwgdGhpcy5kaXJ0eSkge1xuICAgICAgICB0aGlzLmVsZW1lbnRXaWR0aCA9IHc7XG4gICAgICAgIHRoaXMuZWxlbWVudEhlaWdodCA9IGg7XG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gdGhpcy5vcHRpb25zLnBhZGRpbmc7XG4gICAgICAgIHRoaXMucmlnaHQgPSB0aGlzLmVsZW1lbnRXaWR0aCAtIHRoaXMub3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICB0aGlzLnRvcCA9IHRoaXMub3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMuZWxlbWVudEhlaWdodCAtIHRoaXMub3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICBpZiAoKF9yZWYgPSB0aGlzLm9wdGlvbnMuYXhlcykgPT09IHRydWUgfHwgX3JlZiA9PT0gJ2JvdGgnIHx8IF9yZWYgPT09ICd5Jykge1xuICAgICAgICAgIHlMYWJlbFdpZHRocyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjEsIF9yZXN1bHRzO1xuICAgICAgICAgICAgX3JlZjEgPSB0aGlzLmdyaWQ7XG4gICAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICBncmlkTGluZSA9IF9yZWYxW19pXTtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm1lYXN1cmVUZXh0KHRoaXMueUF4aXNGb3JtYXQoZ3JpZExpbmUpKS53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmxlZnQgKz0gTWF0aC5tYXguYXBwbHkoTWF0aCwgeUxhYmVsV2lkdGhzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9yZWYxID0gdGhpcy5vcHRpb25zLmF4ZXMpID09PSB0cnVlIHx8IF9yZWYxID09PSAnYm90aCcgfHwgX3JlZjEgPT09ICd4Jykge1xuICAgICAgICAgIGJvdHRvbU9mZnNldHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX2ksIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9yZWYyID0gdGhpcy5kYXRhLmxlbmd0aDsgMCA8PSBfcmVmMiA/IF9pIDwgX3JlZjIgOiBfaSA+IF9yZWYyOyBpID0gMCA8PSBfcmVmMiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5tZWFzdXJlVGV4dCh0aGlzLmRhdGFbaV0udGV4dCwgLXRoaXMub3B0aW9ucy54TGFiZWxBbmdsZSkuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICAgIHRoaXMuYm90dG9tIC09IE1hdGgubWF4LmFwcGx5KE1hdGgsIGJvdHRvbU9mZnNldHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCgxLCB0aGlzLnJpZ2h0IC0gdGhpcy5sZWZ0KTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCB0aGlzLmJvdHRvbSAtIHRoaXMudG9wKTtcbiAgICAgICAgdGhpcy5keCA9IHRoaXMud2lkdGggLyAodGhpcy54bWF4IC0gdGhpcy54bWluKTtcbiAgICAgICAgdGhpcy5keSA9IHRoaXMuaGVpZ2h0IC8gKHRoaXMueW1heCAtIHRoaXMueW1pbik7XG4gICAgICAgIGlmICh0aGlzLmNhbGMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUudHJhbnNZID0gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIHRoaXMuYm90dG9tIC0gKHkgLSB0aGlzLnltaW4pICogdGhpcy5keTtcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUudHJhbnNYID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmxlZnQgKyB0aGlzLnJpZ2h0KSAvIDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0ICsgKHggLSB0aGlzLnhtaW4pICogdGhpcy5keDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnJhcGhhZWwuY2xlYXIoKTtcbiAgICAgIHRoaXMuX2NhbGMoKTtcbiAgICAgIHRoaXMuZHJhd0dyaWQoKTtcbiAgICAgIHRoaXMuZHJhd0dvYWxzKCk7XG4gICAgICB0aGlzLmRyYXdFdmVudHMoKTtcbiAgICAgIGlmICh0aGlzLmRyYXcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhdygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5tZWFzdXJlVGV4dCA9IGZ1bmN0aW9uKHRleHQsIGFuZ2xlKSB7XG4gICAgICB2YXIgcmV0LCB0dDtcbiAgICAgIGlmIChhbmdsZSA9PSBudWxsKSB7XG4gICAgICAgIGFuZ2xlID0gMDtcbiAgICAgIH1cbiAgICAgIHR0ID0gdGhpcy5yYXBoYWVsLnRleHQoMTAwLCAxMDAsIHRleHQpLmF0dHIoJ2ZvbnQtc2l6ZScsIHRoaXMub3B0aW9ucy5ncmlkVGV4dFNpemUpLmF0dHIoJ2ZvbnQtZmFtaWx5JywgdGhpcy5vcHRpb25zLmdyaWRUZXh0RmFtaWx5KS5hdHRyKCdmb250LXdlaWdodCcsIHRoaXMub3B0aW9ucy5ncmlkVGV4dFdlaWdodCkucm90YXRlKGFuZ2xlKTtcbiAgICAgIHJldCA9IHR0LmdldEJCb3goKTtcbiAgICAgIHR0LnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUueUF4aXNGb3JtYXQgPSBmdW5jdGlvbihsYWJlbCkge1xuICAgICAgcmV0dXJuIHRoaXMueUxhYmVsRm9ybWF0KGxhYmVsKTtcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUueUxhYmVsRm9ybWF0ID0gZnVuY3Rpb24obGFiZWwpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnlMYWJlbEZvcm1hdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnlMYWJlbEZvcm1hdChsYWJlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJcIiArIHRoaXMub3B0aW9ucy5wcmVVbml0cyArIChNb3JyaXMuY29tbWFzKGxhYmVsKSkgKyB0aGlzLm9wdGlvbnMucG9zdFVuaXRzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5kcmF3R3JpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxpbmVZLCB5LCBfaSwgX2xlbiwgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JpZCA9PT0gZmFsc2UgJiYgKChfcmVmID0gdGhpcy5vcHRpb25zLmF4ZXMpICE9PSB0cnVlICYmIF9yZWYgIT09ICdib3RoJyAmJiBfcmVmICE9PSAneScpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF9yZWYxID0gdGhpcy5ncmlkO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbGluZVkgPSBfcmVmMVtfaV07XG4gICAgICAgIHkgPSB0aGlzLnRyYW5zWShsaW5lWSk7XG4gICAgICAgIGlmICgoX3JlZjIgPSB0aGlzLm9wdGlvbnMuYXhlcykgPT09IHRydWUgfHwgX3JlZjIgPT09ICdib3RoJyB8fCBfcmVmMiA9PT0gJ3knKSB7XG4gICAgICAgICAgdGhpcy5kcmF3WUF4aXNMYWJlbCh0aGlzLmxlZnQgLSB0aGlzLm9wdGlvbnMucGFkZGluZyAvIDIsIHksIHRoaXMueUF4aXNGb3JtYXQobGluZVkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyaWQpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuZHJhd0dyaWRMaW5lKFwiTVwiICsgdGhpcy5sZWZ0ICsgXCIsXCIgKyB5ICsgXCJIXCIgKyAodGhpcy5sZWZ0ICsgdGhpcy53aWR0aCkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUuZHJhd0dvYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29sb3IsIGdvYWwsIGksIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIF9yZWYgPSB0aGlzLm9wdGlvbnMuZ29hbHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgZ29hbCA9IF9yZWZbaV07XG4gICAgICAgIGNvbG9yID0gdGhpcy5vcHRpb25zLmdvYWxMaW5lQ29sb3JzW2kgJSB0aGlzLm9wdGlvbnMuZ29hbExpbmVDb2xvcnMubGVuZ3RoXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLmRyYXdHb2FsKGdvYWwsIGNvbG9yKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIEdyaWQucHJvdG90eXBlLmRyYXdFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb2xvciwgZXZlbnQsIGksIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIF9yZWYgPSB0aGlzLmV2ZW50cztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBldmVudCA9IF9yZWZbaV07XG4gICAgICAgIGNvbG9yID0gdGhpcy5vcHRpb25zLmV2ZW50TGluZUNvbG9yc1tpICUgdGhpcy5vcHRpb25zLmV2ZW50TGluZUNvbG9ycy5sZW5ndGhdO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuZHJhd0V2ZW50KGV2ZW50LCBjb2xvcikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5kcmF3R29hbCA9IGZ1bmN0aW9uKGdvYWwsIGNvbG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXBoYWVsLnBhdGgoXCJNXCIgKyB0aGlzLmxlZnQgKyBcIixcIiArICh0aGlzLnRyYW5zWShnb2FsKSkgKyBcIkhcIiArIHRoaXMucmlnaHQpLmF0dHIoJ3N0cm9rZScsIGNvbG9yKS5hdHRyKCdzdHJva2Utd2lkdGgnLCB0aGlzLm9wdGlvbnMuZ29hbFN0cm9rZVdpZHRoKTtcbiAgICB9O1xuXG4gICAgR3JpZC5wcm90b3R5cGUuZHJhd0V2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGNvbG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXBoYWVsLnBhdGgoXCJNXCIgKyAodGhpcy50cmFuc1goZXZlbnQpKSArIFwiLFwiICsgdGhpcy5ib3R0b20gKyBcIlZcIiArIHRoaXMudG9wKS5hdHRyKCdzdHJva2UnLCBjb2xvcikuYXR0cignc3Ryb2tlLXdpZHRoJywgdGhpcy5vcHRpb25zLmV2ZW50U3Ryb2tlV2lkdGgpO1xuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5kcmF3WUF4aXNMYWJlbCA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJhcGhhZWwudGV4dCh4UG9zLCB5UG9zLCB0ZXh0KS5hdHRyKCdmb250LXNpemUnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRTaXplKS5hdHRyKCdmb250LWZhbWlseScsIHRoaXMub3B0aW9ucy5ncmlkVGV4dEZhbWlseSkuYXR0cignZm9udC13ZWlnaHQnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRXZWlnaHQpLmF0dHIoJ2ZpbGwnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRDb2xvcikuYXR0cigndGV4dC1hbmNob3InLCAnZW5kJyk7XG4gICAgfTtcblxuICAgIEdyaWQucHJvdG90eXBlLmRyYXdHcmlkTGluZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJhcGhhZWwucGF0aChwYXRoKS5hdHRyKCdzdHJva2UnLCB0aGlzLm9wdGlvbnMuZ3JpZExpbmVDb2xvcikuYXR0cignc3Ryb2tlLXdpZHRoJywgdGhpcy5vcHRpb25zLmdyaWRTdHJva2VXaWR0aCk7XG4gICAgfTtcblxuICAgIEdyaWQucHJvdG90eXBlLnN0YXJ0UmFuZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICB0aGlzLmhvdmVyLmhpZGUoKTtcbiAgICAgIHRoaXMuc2VsZWN0RnJvbSA9IHg7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25SZWN0LmF0dHIoe1xuICAgICAgICB4OiB4LFxuICAgICAgICB3aWR0aDogMFxuICAgICAgfSkuc2hvdygpO1xuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5lbmRSYW5nZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBlbmQsIHN0YXJ0O1xuICAgICAgaWYgKHRoaXMuc2VsZWN0RnJvbSkge1xuICAgICAgICBzdGFydCA9IE1hdGgubWluKHRoaXMuc2VsZWN0RnJvbSwgeCk7XG4gICAgICAgIGVuZCA9IE1hdGgubWF4KHRoaXMuc2VsZWN0RnJvbSwgeCk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5yYW5nZVNlbGVjdC5jYWxsKHRoaXMuZWwsIHtcbiAgICAgICAgICBzdGFydDogdGhpcy5kYXRhW3RoaXMuaGl0VGVzdChzdGFydCldLngsXG4gICAgICAgICAgZW5kOiB0aGlzLmRhdGFbdGhpcy5oaXRUZXN0KGVuZCldLnhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdEZyb20gPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBHcmlkLnByb3RvdHlwZS5yZXNpemVIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XG4gICAgICB0aGlzLnJhcGhhZWwuc2V0U2l6ZSh0aGlzLmVsLndpZHRoKCksIHRoaXMuZWwuaGVpZ2h0KCkpO1xuICAgICAgcmV0dXJuIHRoaXMucmVkcmF3KCk7XG4gICAgfTtcblxuICAgIHJldHVybiBHcmlkO1xuXG4gIH0pKE1vcnJpcy5FdmVudEVtaXR0ZXIpO1xuXG4gIE1vcnJpcy5wYXJzZURhdGUgPSBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIGlzZWNzLCBtLCBtc2Vjcywgbiwgbywgb2Zmc2V0bWlucywgcCwgcSwgciwgcmV0LCBzZWNzO1xuICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICBtID0gZGF0ZS5tYXRjaCgvXihcXGQrKSBRKFxcZCkkLyk7XG4gICAgbiA9IGRhdGUubWF0Y2goL14oXFxkKyktKFxcZCspJC8pO1xuICAgIG8gPSBkYXRlLm1hdGNoKC9eKFxcZCspLShcXGQrKS0oXFxkKykkLyk7XG4gICAgcCA9IGRhdGUubWF0Y2goL14oXFxkKykgVyhcXGQrKSQvKTtcbiAgICBxID0gZGF0ZS5tYXRjaCgvXihcXGQrKS0oXFxkKyktKFxcZCspWyBUXShcXGQrKTooXFxkKykoWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyQvKTtcbiAgICByID0gZGF0ZS5tYXRjaCgvXihcXGQrKS0oXFxkKyktKFxcZCspWyBUXShcXGQrKTooXFxkKyk6KFxcZCsoXFwuXFxkKyk/KShafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/JC8pO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQobVsxXSwgMTApLCBwYXJzZUludChtWzJdLCAxMCkgKiAzIC0gMSwgMSkuZ2V0VGltZSgpO1xuICAgIH0gZWxzZSBpZiAobikge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KG5bMV0sIDEwKSwgcGFyc2VJbnQoblsyXSwgMTApIC0gMSwgMSkuZ2V0VGltZSgpO1xuICAgIH0gZWxzZSBpZiAobykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KG9bMV0sIDEwKSwgcGFyc2VJbnQob1syXSwgMTApIC0gMSwgcGFyc2VJbnQob1szXSwgMTApKS5nZXRUaW1lKCk7XG4gICAgfSBlbHNlIGlmIChwKSB7XG4gICAgICByZXQgPSBuZXcgRGF0ZShwYXJzZUludChwWzFdLCAxMCksIDAsIDEpO1xuICAgICAgaWYgKHJldC5nZXREYXkoKSAhPT0gNCkge1xuICAgICAgICByZXQuc2V0TW9udGgoMCwgMSArICgoNCAtIHJldC5nZXREYXkoKSkgKyA3KSAlIDcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldC5nZXRUaW1lKCkgKyBwYXJzZUludChwWzJdLCAxMCkgKiA2MDQ4MDAwMDA7XG4gICAgfSBlbHNlIGlmIChxKSB7XG4gICAgICBpZiAoIXFbNl0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHFbMV0sIDEwKSwgcGFyc2VJbnQocVsyXSwgMTApIC0gMSwgcGFyc2VJbnQocVszXSwgMTApLCBwYXJzZUludChxWzRdLCAxMCksIHBhcnNlSW50KHFbNV0sIDEwKSkuZ2V0VGltZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2Zmc2V0bWlucyA9IDA7XG4gICAgICAgIGlmIChxWzZdICE9PSAnWicpIHtcbiAgICAgICAgICBvZmZzZXRtaW5zID0gcGFyc2VJbnQocVs4XSwgMTApICogNjAgKyBwYXJzZUludChxWzldLCAxMCk7XG4gICAgICAgICAgaWYgKHFbN10gPT09ICcrJykge1xuICAgICAgICAgICAgb2Zmc2V0bWlucyA9IDAgLSBvZmZzZXRtaW5zO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGF0ZS5VVEMocGFyc2VJbnQocVsxXSwgMTApLCBwYXJzZUludChxWzJdLCAxMCkgLSAxLCBwYXJzZUludChxWzNdLCAxMCksIHBhcnNlSW50KHFbNF0sIDEwKSwgcGFyc2VJbnQocVs1XSwgMTApICsgb2Zmc2V0bWlucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyKSB7XG4gICAgICBzZWNzID0gcGFyc2VGbG9hdChyWzZdKTtcbiAgICAgIGlzZWNzID0gTWF0aC5mbG9vcihzZWNzKTtcbiAgICAgIG1zZWNzID0gTWF0aC5yb3VuZCgoc2VjcyAtIGlzZWNzKSAqIDEwMDApO1xuICAgICAgaWYgKCFyWzhdKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUludChyWzFdLCAxMCksIHBhcnNlSW50KHJbMl0sIDEwKSAtIDEsIHBhcnNlSW50KHJbM10sIDEwKSwgcGFyc2VJbnQocls0XSwgMTApLCBwYXJzZUludChyWzVdLCAxMCksIGlzZWNzLCBtc2VjcykuZ2V0VGltZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2Zmc2V0bWlucyA9IDA7XG4gICAgICAgIGlmIChyWzhdICE9PSAnWicpIHtcbiAgICAgICAgICBvZmZzZXRtaW5zID0gcGFyc2VJbnQoclsxMF0sIDEwKSAqIDYwICsgcGFyc2VJbnQoclsxMV0sIDEwKTtcbiAgICAgICAgICBpZiAocls5XSA9PT0gJysnKSB7XG4gICAgICAgICAgICBvZmZzZXRtaW5zID0gMCAtIG9mZnNldG1pbnM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBEYXRlLlVUQyhwYXJzZUludChyWzFdLCAxMCksIHBhcnNlSW50KHJbMl0sIDEwKSAtIDEsIHBhcnNlSW50KHJbM10sIDEwKSwgcGFyc2VJbnQocls0XSwgMTApLCBwYXJzZUludChyWzVdLCAxMCkgKyBvZmZzZXRtaW5zLCBpc2VjcywgbXNlY3MpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoZGF0ZSwgMTApLCAwLCAxKS5nZXRUaW1lKCk7XG4gICAgfVxuICB9O1xuXG4gIE1vcnJpcy5Ib3ZlciA9IChmdW5jdGlvbigpIHtcbiAgICBIb3Zlci5kZWZhdWx0cyA9IHtcbiAgICAgIFwiY2xhc3NcIjogJ21vcnJpcy1ob3ZlciBtb3JyaXMtZGVmYXVsdC1zdHlsZSdcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSG92ZXIob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTW9ycmlzLkhvdmVyLmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuZWwgPSAkKFwiPGRpdiBjbGFzcz0nXCIgKyB0aGlzLm9wdGlvbnNbXCJjbGFzc1wiXSArIFwiJz48L2Rpdj5cIik7XG4gICAgICB0aGlzLmVsLmhpZGUoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5wYXJlbnQuYXBwZW5kKHRoaXMuZWwpO1xuICAgIH1cblxuICAgIEhvdmVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihodG1sLCB4LCB5KSB7XG4gICAgICBpZiAoIWh0bWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5odG1sKGh0bWwpO1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBIb3Zlci5wcm90b3R5cGUuaHRtbCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsLmh0bWwoY29udGVudCk7XG4gICAgfTtcblxuICAgIEhvdmVyLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICB2YXIgaG92ZXJIZWlnaHQsIGhvdmVyV2lkdGgsIGxlZnQsIHBhcmVudEhlaWdodCwgcGFyZW50V2lkdGgsIHRvcDtcbiAgICAgIHBhcmVudFdpZHRoID0gdGhpcy5vcHRpb25zLnBhcmVudC5pbm5lcldpZHRoKCk7XG4gICAgICBwYXJlbnRIZWlnaHQgPSB0aGlzLm9wdGlvbnMucGFyZW50LmlubmVySGVpZ2h0KCk7XG4gICAgICBob3ZlcldpZHRoID0gdGhpcy5lbC5vdXRlcldpZHRoKCk7XG4gICAgICBob3ZlckhlaWdodCA9IHRoaXMuZWwub3V0ZXJIZWlnaHQoKTtcbiAgICAgIGxlZnQgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB4IC0gaG92ZXJXaWR0aCAvIDIpLCBwYXJlbnRXaWR0aCAtIGhvdmVyV2lkdGgpO1xuICAgICAgaWYgKHkgIT0gbnVsbCkge1xuICAgICAgICB0b3AgPSB5IC0gaG92ZXJIZWlnaHQgLSAxMDtcbiAgICAgICAgaWYgKHRvcCA8IDApIHtcbiAgICAgICAgICB0b3AgPSB5ICsgMTA7XG4gICAgICAgICAgaWYgKHRvcCArIGhvdmVySGVpZ2h0ID4gcGFyZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICB0b3AgPSBwYXJlbnRIZWlnaHQgLyAyIC0gaG92ZXJIZWlnaHQgLyAyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9wID0gcGFyZW50SGVpZ2h0IC8gMiAtIGhvdmVySGVpZ2h0IC8gMjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmVsLmNzcyh7XG4gICAgICAgIGxlZnQ6IGxlZnQgKyBcInB4XCIsXG4gICAgICAgIHRvcDogcGFyc2VJbnQodG9wKSArIFwicHhcIlxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEhvdmVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5zaG93KCk7XG4gICAgfTtcblxuICAgIEhvdmVyLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5oaWRlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIb3ZlcjtcblxuICB9KSgpO1xuXG4gIE1vcnJpcy5MaW5lID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMaW5lLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTGluZShvcHRpb25zKSB7XG4gICAgICB0aGlzLmhpbGlnaHQgPSBfX2JpbmQodGhpcy5oaWxpZ2h0LCB0aGlzKTtcbiAgICAgIHRoaXMub25Ib3Zlck91dCA9IF9fYmluZCh0aGlzLm9uSG92ZXJPdXQsIHRoaXMpO1xuICAgICAgdGhpcy5vbkhvdmVyTW92ZSA9IF9fYmluZCh0aGlzLm9uSG92ZXJNb3ZlLCB0aGlzKTtcbiAgICAgIHRoaXMub25HcmlkQ2xpY2sgPSBfX2JpbmQodGhpcy5vbkdyaWRDbGljaywgdGhpcyk7XG4gICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgTW9ycmlzLkxpbmUpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9ycmlzLkxpbmUob3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBMaW5lLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIExpbmUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlkZUhvdmVyICE9PSAnYWx3YXlzJykge1xuICAgICAgICB0aGlzLmhvdmVyID0gbmV3IE1vcnJpcy5Ib3Zlcih7XG4gICAgICAgICAgcGFyZW50OiB0aGlzLmVsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKCdob3Zlcm1vdmUnLCB0aGlzLm9uSG92ZXJNb3ZlKTtcbiAgICAgICAgdGhpcy5vbignaG92ZXJvdXQnLCB0aGlzLm9uSG92ZXJPdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5vbignZ3JpZGNsaWNrJywgdGhpcy5vbkdyaWRDbGljayk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICAgICAgbGluZVdpZHRoOiAzLFxuICAgICAgcG9pbnRTaXplOiA0LFxuICAgICAgbGluZUNvbG9yczogWycjMGI2MmE0JywgJyM3QTkyQTMnLCAnIzRkYTc0ZCcsICcjYWZkOGY4JywgJyNlZGMyNDAnLCAnI2NiNGI0YicsICcjOTQ0MGVkJ10sXG4gICAgICBwb2ludFN0cm9rZVdpZHRoczogWzFdLFxuICAgICAgcG9pbnRTdHJva2VDb2xvcnM6IFsnI2ZmZmZmZiddLFxuICAgICAgcG9pbnRGaWxsQ29sb3JzOiBbXSxcbiAgICAgIHNtb290aDogdHJ1ZSxcbiAgICAgIHhMYWJlbHM6ICdhdXRvJyxcbiAgICAgIHhMYWJlbEZvcm1hdDogbnVsbCxcbiAgICAgIHhMYWJlbE1hcmdpbjogMjQsXG4gICAgICBoaWRlSG92ZXI6IGZhbHNlXG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLmNhbGMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2FsY1BvaW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVQYXRocygpO1xuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5jYWxjUG9pbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcm93LCB5LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmID0gdGhpcy5kYXRhO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICByb3cgPSBfcmVmW19pXTtcbiAgICAgICAgcm93Ll94ID0gdGhpcy50cmFuc1gocm93LngpO1xuICAgICAgICByb3cuX3kgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9qLCBfbGVuMSwgX3JlZjEsIF9yZXN1bHRzMTtcbiAgICAgICAgICBfcmVmMSA9IHJvdy55O1xuICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgeSA9IF9yZWYxW19qXTtcbiAgICAgICAgICAgIGlmICh5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2godGhpcy50cmFuc1koeSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIF9yZXN1bHRzLnB1c2gocm93Ll95bWF4ID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgW3RoaXMuYm90dG9tXS5jb25jYXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYxLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3JlZjEgPSByb3cuX3k7XG4gICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICB5ID0gX3JlZjFbX2pdO1xuICAgICAgICAgICAgaWYgKHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBfcmVzdWx0czEucHVzaCh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfSkoKSkpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuaGl0VGVzdCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBpbmRleCwgciwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIF9yZWYgPSB0aGlzLmRhdGEuc2xpY2UoMSk7XG4gICAgICBmb3IgKGluZGV4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaW5kZXggPSArK19pKSB7XG4gICAgICAgIHIgPSBfcmVmW2luZGV4XTtcbiAgICAgICAgaWYgKHggPCAoci5feCArIHRoaXMuZGF0YVtpbmRleF0uX3gpIC8gMikge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLm9uR3JpZENsaWNrID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIGluZGV4O1xuICAgICAgaW5kZXggPSB0aGlzLmhpdFRlc3QoeCk7XG4gICAgICByZXR1cm4gdGhpcy5maXJlKCdjbGljaycsIGluZGV4LCB0aGlzLmRhdGFbaW5kZXhdLnNyYywgeCwgeSk7XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLm9uSG92ZXJNb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIGluZGV4O1xuICAgICAgaW5kZXggPSB0aGlzLmhpdFRlc3QoeCk7XG4gICAgICByZXR1cm4gdGhpcy5kaXNwbGF5SG92ZXJGb3JSb3coaW5kZXgpO1xuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5vbkhvdmVyT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhpZGVIb3ZlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheUhvdmVyRm9yUm93KG51bGwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5kaXNwbGF5SG92ZXJGb3JSb3cgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgICAoX3JlZiA9IHRoaXMuaG92ZXIpLnVwZGF0ZS5hcHBseShfcmVmLCB0aGlzLmhvdmVyQ29udGVudEZvclJvdyhpbmRleCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5oaWxpZ2h0KGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaG92ZXIuaGlkZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5oaWxpZ2h0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLmhvdmVyQ29udGVudEZvclJvdyA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXIgY29udGVudCwgaiwgcm93LCB5LCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHJvdyA9IHRoaXMuZGF0YVtpbmRleF07XG4gICAgICBjb250ZW50ID0gXCI8ZGl2IGNsYXNzPSdtb3JyaXMtaG92ZXItcm93LWxhYmVsJz5cIiArIHJvdy5sYWJlbCArIFwiPC9kaXY+XCI7XG4gICAgICBfcmVmID0gcm93Lnk7XG4gICAgICBmb3IgKGogPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBqID0gKytfaSkge1xuICAgICAgICB5ID0gX3JlZltqXTtcbiAgICAgICAgY29udGVudCArPSBcIjxkaXYgY2xhc3M9J21vcnJpcy1ob3Zlci1wb2ludCcgc3R5bGU9J2NvbG9yOiBcIiArICh0aGlzLmNvbG9yRm9yKHJvdywgaiwgJ2xhYmVsJykpICsgXCInPlxcbiAgXCIgKyB0aGlzLm9wdGlvbnMubGFiZWxzW2pdICsgXCI6XFxuICBcIiArICh0aGlzLnlMYWJlbEZvcm1hdCh5KSkgKyBcIlxcbjwvZGl2PlwiO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuaG92ZXJDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb250ZW50ID0gdGhpcy5vcHRpb25zLmhvdmVyQ2FsbGJhY2soaW5kZXgsIHRoaXMub3B0aW9ucywgY29udGVudCwgcm93LnNyYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2NvbnRlbnQsIHJvdy5feCwgcm93Ll95bWF4XTtcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuZ2VuZXJhdGVQYXRocyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvb3JkcywgaSwgciwgc21vb3RoO1xuICAgICAgcmV0dXJuIHRoaXMucGF0aHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX3JlZiwgX3JlZjEsIF9yZXN1bHRzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9yZWYgPSB0aGlzLm9wdGlvbnMueWtleXMubGVuZ3RoOyAwIDw9IF9yZWYgPyBfaSA8IF9yZWYgOiBfaSA+IF9yZWY7IGkgPSAwIDw9IF9yZWYgPyArK19pIDogLS1faSkge1xuICAgICAgICAgIHNtb290aCA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuc21vb3RoID09PSBcImJvb2xlYW5cIiA/IHRoaXMub3B0aW9ucy5zbW9vdGggOiAoX3JlZjEgPSB0aGlzLm9wdGlvbnMueWtleXNbaV0sIF9faW5kZXhPZi5jYWxsKHRoaXMub3B0aW9ucy5zbW9vdGgsIF9yZWYxKSA+PSAwKTtcbiAgICAgICAgICBjb29yZHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX2osIF9sZW4sIF9yZWYyLCBfcmVzdWx0czE7XG4gICAgICAgICAgICBfcmVmMiA9IHRoaXMuZGF0YTtcbiAgICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9qIDwgX2xlbjsgX2orKykge1xuICAgICAgICAgICAgICByID0gX3JlZjJbX2pdO1xuICAgICAgICAgICAgICBpZiAoci5feVtpXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2goe1xuICAgICAgICAgICAgICAgICAgeDogci5feCxcbiAgICAgICAgICAgICAgICAgIHk6IHIuX3lbaV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICAgIGlmIChjb29yZHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChNb3JyaXMuTGluZS5jcmVhdGVQYXRoKGNvb3Jkcywgc21vb3RoLCB0aGlzLmJvdHRvbSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIGlmICgoX3JlZiA9IHRoaXMub3B0aW9ucy5heGVzKSA9PT0gdHJ1ZSB8fCBfcmVmID09PSAnYm90aCcgfHwgX3JlZiA9PT0gJ3gnKSB7XG4gICAgICAgIHRoaXMuZHJhd1hBeGlzKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRyYXdTZXJpZXMoKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlkZUhvdmVyID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5SG92ZXJGb3JSb3codGhpcy5kYXRhLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5kcmF3WEF4aXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkcmF3TGFiZWwsIGwsIGxhYmVscywgcHJldkFuZ2xlTWFyZ2luLCBwcmV2TGFiZWxNYXJnaW4sIHJvdywgeXBvcywgX2ksIF9sZW4sIF9yZXN1bHRzLFxuICAgICAgICBfdGhpcyA9IHRoaXM7XG4gICAgICB5cG9zID0gdGhpcy5ib3R0b20gKyB0aGlzLm9wdGlvbnMucGFkZGluZyAvIDI7XG4gICAgICBwcmV2TGFiZWxNYXJnaW4gPSBudWxsO1xuICAgICAgcHJldkFuZ2xlTWFyZ2luID0gbnVsbDtcbiAgICAgIGRyYXdMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsVGV4dCwgeHBvcykge1xuICAgICAgICB2YXIgbGFiZWwsIGxhYmVsQm94LCBtYXJnaW4sIG9mZnNldCwgdGV4dEJveDtcbiAgICAgICAgbGFiZWwgPSBfdGhpcy5kcmF3WEF4aXNMYWJlbChfdGhpcy50cmFuc1goeHBvcyksIHlwb3MsIGxhYmVsVGV4dCk7XG4gICAgICAgIHRleHRCb3ggPSBsYWJlbC5nZXRCQm94KCk7XG4gICAgICAgIGxhYmVsLnRyYW5zZm9ybShcInJcIiArICgtX3RoaXMub3B0aW9ucy54TGFiZWxBbmdsZSkpO1xuICAgICAgICBsYWJlbEJveCA9IGxhYmVsLmdldEJCb3goKTtcbiAgICAgICAgbGFiZWwudHJhbnNmb3JtKFwidDAsXCIgKyAobGFiZWxCb3guaGVpZ2h0IC8gMikgKyBcIi4uLlwiKTtcbiAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMueExhYmVsQW5nbGUgIT09IDApIHtcbiAgICAgICAgICBvZmZzZXQgPSAtMC41ICogdGV4dEJveC53aWR0aCAqIE1hdGguY29zKF90aGlzLm9wdGlvbnMueExhYmVsQW5nbGUgKiBNYXRoLlBJIC8gMTgwLjApO1xuICAgICAgICAgIGxhYmVsLnRyYW5zZm9ybShcInRcIiArIG9mZnNldCArIFwiLDAuLi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGFiZWxCb3ggPSBsYWJlbC5nZXRCQm94KCk7XG4gICAgICAgIGlmICgoKHByZXZMYWJlbE1hcmdpbiA9PSBudWxsKSB8fCBwcmV2TGFiZWxNYXJnaW4gPj0gbGFiZWxCb3gueCArIGxhYmVsQm94LndpZHRoIHx8IChwcmV2QW5nbGVNYXJnaW4gIT0gbnVsbCkgJiYgcHJldkFuZ2xlTWFyZ2luID49IGxhYmVsQm94LngpICYmIGxhYmVsQm94LnggPj0gMCAmJiAobGFiZWxCb3gueCArIGxhYmVsQm94LndpZHRoKSA8IF90aGlzLmVsLndpZHRoKCkpIHtcbiAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy54TGFiZWxBbmdsZSAhPT0gMCkge1xuICAgICAgICAgICAgbWFyZ2luID0gMS4yNSAqIF90aGlzLm9wdGlvbnMuZ3JpZFRleHRTaXplIC8gTWF0aC5zaW4oX3RoaXMub3B0aW9ucy54TGFiZWxBbmdsZSAqIE1hdGguUEkgLyAxODAuMCk7XG4gICAgICAgICAgICBwcmV2QW5nbGVNYXJnaW4gPSBsYWJlbEJveC54IC0gbWFyZ2luO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldkxhYmVsTWFyZ2luID0gbGFiZWxCb3gueCAtIF90aGlzLm9wdGlvbnMueExhYmVsTWFyZ2luO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBsYWJlbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFyc2VUaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAxICYmIHRoaXMub3B0aW9ucy54TGFiZWxzID09PSAnYXV0bycpIHtcbiAgICAgICAgICBsYWJlbHMgPSBbW3RoaXMuZGF0YVswXS5sYWJlbCwgdGhpcy5kYXRhWzBdLnhdXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYWJlbHMgPSBNb3JyaXMubGFiZWxTZXJpZXModGhpcy54bWluLCB0aGlzLnhtYXgsIHRoaXMud2lkdGgsIHRoaXMub3B0aW9ucy54TGFiZWxzLCB0aGlzLm9wdGlvbnMueExhYmVsRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGFiZWxzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3JlZiA9IHRoaXMuZGF0YTtcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgcm93ID0gX3JlZltfaV07XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKFtyb3cubGFiZWwsIHJvdy54XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIGxhYmVscy5yZXZlcnNlKCk7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBsYWJlbHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbCA9IGxhYmVsc1tfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goZHJhd0xhYmVsKGxbMF0sIGxbMV0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuZHJhd1NlcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIF9pLCBfaiwgX3JlZiwgX3JlZjEsIF9yZXN1bHRzO1xuICAgICAgdGhpcy5zZXJpZXNQb2ludHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9pID0gX3JlZiA9IHRoaXMub3B0aW9ucy55a2V5cy5sZW5ndGggLSAxOyBfcmVmIDw9IDAgPyBfaSA8PSAwIDogX2kgPj0gMDsgaSA9IF9yZWYgPD0gMCA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgIHRoaXMuX2RyYXdMaW5lRm9yKGkpO1xuICAgICAgfVxuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9qID0gX3JlZjEgPSB0aGlzLm9wdGlvbnMueWtleXMubGVuZ3RoIC0gMTsgX3JlZjEgPD0gMCA/IF9qIDw9IDAgOiBfaiA+PSAwOyBpID0gX3JlZjEgPD0gMCA/ICsrX2ogOiAtLV9qKSB7XG4gICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5fZHJhd1BvaW50Rm9yKGkpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuX2RyYXdQb2ludEZvciA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXIgY2lyY2xlLCByb3csIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIHRoaXMuc2VyaWVzUG9pbnRzW2luZGV4XSA9IFtdO1xuICAgICAgX3JlZiA9IHRoaXMuZGF0YTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcm93ID0gX3JlZltfaV07XG4gICAgICAgIGNpcmNsZSA9IG51bGw7XG4gICAgICAgIGlmIChyb3cuX3lbaW5kZXhdICE9IG51bGwpIHtcbiAgICAgICAgICBjaXJjbGUgPSB0aGlzLmRyYXdMaW5lUG9pbnQocm93Ll94LCByb3cuX3lbaW5kZXhdLCB0aGlzLmNvbG9yRm9yKHJvdywgaW5kZXgsICdwb2ludCcpLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLnNlcmllc1BvaW50c1tpbmRleF0ucHVzaChjaXJjbGUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuX2RyYXdMaW5lRm9yID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHZhciBwYXRoO1xuICAgICAgcGF0aCA9IHRoaXMucGF0aHNbaW5kZXhdO1xuICAgICAgaWYgKHBhdGggIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhd0xpbmVQYXRoKHBhdGgsIHRoaXMuY29sb3JGb3IobnVsbCwgaW5kZXgsICdsaW5lJyksIGluZGV4KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGluZS5jcmVhdGVQYXRoID0gZnVuY3Rpb24oY29vcmRzLCBzbW9vdGgsIGJvdHRvbSkge1xuICAgICAgdmFyIGNvb3JkLCBnLCBncmFkcywgaSwgaXgsIGxnLCBwYXRoLCBwcmV2Q29vcmQsIHgxLCB4MiwgeTEsIHkyLCBfaSwgX2xlbjtcbiAgICAgIHBhdGggPSBcIlwiO1xuICAgICAgaWYgKHNtb290aCkge1xuICAgICAgICBncmFkcyA9IE1vcnJpcy5MaW5lLmdyYWRpZW50cyhjb29yZHMpO1xuICAgICAgfVxuICAgICAgcHJldkNvb3JkID0ge1xuICAgICAgICB5OiBudWxsXG4gICAgICB9O1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gY29vcmRzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBjb29yZCA9IGNvb3Jkc1tpXTtcbiAgICAgICAgaWYgKGNvb3JkLnkgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChwcmV2Q29vcmQueSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoc21vb3RoKSB7XG4gICAgICAgICAgICAgIGcgPSBncmFkc1tpXTtcbiAgICAgICAgICAgICAgbGcgPSBncmFkc1tpIC0gMV07XG4gICAgICAgICAgICAgIGl4ID0gKGNvb3JkLnggLSBwcmV2Q29vcmQueCkgLyA0O1xuICAgICAgICAgICAgICB4MSA9IHByZXZDb29yZC54ICsgaXg7XG4gICAgICAgICAgICAgIHkxID0gTWF0aC5taW4oYm90dG9tLCBwcmV2Q29vcmQueSArIGl4ICogbGcpO1xuICAgICAgICAgICAgICB4MiA9IGNvb3JkLnggLSBpeDtcbiAgICAgICAgICAgICAgeTIgPSBNYXRoLm1pbihib3R0b20sIGNvb3JkLnkgLSBpeCAqIGcpO1xuICAgICAgICAgICAgICBwYXRoICs9IFwiQ1wiICsgeDEgKyBcIixcIiArIHkxICsgXCIsXCIgKyB4MiArIFwiLFwiICsgeTIgKyBcIixcIiArIGNvb3JkLnggKyBcIixcIiArIGNvb3JkLnk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXRoICs9IFwiTFwiICsgY29vcmQueCArIFwiLFwiICsgY29vcmQueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFzbW9vdGggfHwgKGdyYWRzW2ldICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgIHBhdGggKz0gXCJNXCIgKyBjb29yZC54ICsgXCIsXCIgKyBjb29yZC55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcmV2Q29vcmQgPSBjb29yZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXRoO1xuICAgIH07XG5cbiAgICBMaW5lLmdyYWRpZW50cyA9IGZ1bmN0aW9uKGNvb3Jkcykge1xuICAgICAgdmFyIGNvb3JkLCBncmFkLCBpLCBuZXh0Q29vcmQsIHByZXZDb29yZCwgX2ksIF9sZW4sIF9yZXN1bHRzO1xuICAgICAgZ3JhZCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIChhLnkgLSBiLnkpIC8gKGEueCAtIGIueCk7XG4gICAgICB9O1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IGNvb3Jkcy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgY29vcmQgPSBjb29yZHNbaV07XG4gICAgICAgIGlmIChjb29yZC55ICE9IG51bGwpIHtcbiAgICAgICAgICBuZXh0Q29vcmQgPSBjb29yZHNbaSArIDFdIHx8IHtcbiAgICAgICAgICAgIHk6IG51bGxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHByZXZDb29yZCA9IGNvb3Jkc1tpIC0gMV0gfHwge1xuICAgICAgICAgICAgeTogbnVsbFxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKChwcmV2Q29vcmQueSAhPSBudWxsKSAmJiAobmV4dENvb3JkLnkgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZ3JhZChwcmV2Q29vcmQsIG5leHRDb29yZCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocHJldkNvb3JkLnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChncmFkKHByZXZDb29yZCwgY29vcmQpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5leHRDb29yZC55ICE9IG51bGwpIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZ3JhZChjb29yZCwgbmV4dENvb3JkKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2gobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuaGlsaWdodCA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXIgaSwgX2ksIF9qLCBfcmVmLCBfcmVmMTtcbiAgICAgIGlmICh0aGlzLnByZXZIaWxpZ2h0ICE9PSBudWxsICYmIHRoaXMucHJldkhpbGlnaHQgIT09IGluZGV4KSB7XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZiA9IHRoaXMuc2VyaWVzUG9pbnRzLmxlbmd0aCAtIDE7IDAgPD0gX3JlZiA/IF9pIDw9IF9yZWYgOiBfaSA+PSBfcmVmOyBpID0gMCA8PSBfcmVmID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICBpZiAodGhpcy5zZXJpZXNQb2ludHNbaV1bdGhpcy5wcmV2SGlsaWdodF0pIHtcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzUG9pbnRzW2ldW3RoaXMucHJldkhpbGlnaHRdLmFuaW1hdGUodGhpcy5wb2ludFNocmlua1NlcmllcyhpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggIT09IG51bGwgJiYgdGhpcy5wcmV2SGlsaWdodCAhPT0gaW5kZXgpIHtcbiAgICAgICAgZm9yIChpID0gX2ogPSAwLCBfcmVmMSA9IHRoaXMuc2VyaWVzUG9pbnRzLmxlbmd0aCAtIDE7IDAgPD0gX3JlZjEgPyBfaiA8PSBfcmVmMSA6IF9qID49IF9yZWYxOyBpID0gMCA8PSBfcmVmMSA/ICsrX2ogOiAtLV9qKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2VyaWVzUG9pbnRzW2ldW2luZGV4XSkge1xuICAgICAgICAgICAgdGhpcy5zZXJpZXNQb2ludHNbaV1baW5kZXhdLmFuaW1hdGUodGhpcy5wb2ludEdyb3dTZXJpZXMoaSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucHJldkhpbGlnaHQgPSBpbmRleDtcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuY29sb3JGb3IgPSBmdW5jdGlvbihyb3csIHNpZHgsIHR5cGUpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmxpbmVDb2xvcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5saW5lQ29sb3JzLmNhbGwodGhpcywgcm93LCBzaWR4LCB0eXBlKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvaW50Jykge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBvaW50RmlsbENvbG9yc1tzaWR4ICUgdGhpcy5vcHRpb25zLnBvaW50RmlsbENvbG9ycy5sZW5ndGhdIHx8IHRoaXMub3B0aW9ucy5saW5lQ29sb3JzW3NpZHggJSB0aGlzLm9wdGlvbnMubGluZUNvbG9ycy5sZW5ndGhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5saW5lQ29sb3JzW3NpZHggJSB0aGlzLm9wdGlvbnMubGluZUNvbG9ycy5sZW5ndGhdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5kcmF3WEF4aXNMYWJlbCA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJhcGhhZWwudGV4dCh4UG9zLCB5UG9zLCB0ZXh0KS5hdHRyKCdmb250LXNpemUnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRTaXplKS5hdHRyKCdmb250LWZhbWlseScsIHRoaXMub3B0aW9ucy5ncmlkVGV4dEZhbWlseSkuYXR0cignZm9udC13ZWlnaHQnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRXZWlnaHQpLmF0dHIoJ2ZpbGwnLCB0aGlzLm9wdGlvbnMuZ3JpZFRleHRDb2xvcik7XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLmRyYXdMaW5lUGF0aCA9IGZ1bmN0aW9uKHBhdGgsIGxpbmVDb2xvciwgbGluZUluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXBoYWVsLnBhdGgocGF0aCkuYXR0cignc3Ryb2tlJywgbGluZUNvbG9yKS5hdHRyKCdzdHJva2Utd2lkdGgnLCB0aGlzLmxpbmVXaWR0aEZvclNlcmllcyhsaW5lSW5kZXgpKTtcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUuZHJhd0xpbmVQb2ludCA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MsIHBvaW50Q29sb3IsIGxpbmVJbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMucmFwaGFlbC5jaXJjbGUoeFBvcywgeVBvcywgdGhpcy5wb2ludFNpemVGb3JTZXJpZXMobGluZUluZGV4KSkuYXR0cignZmlsbCcsIHBvaW50Q29sb3IpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIHRoaXMucG9pbnRTdHJva2VXaWR0aEZvclNlcmllcyhsaW5lSW5kZXgpKS5hdHRyKCdzdHJva2UnLCB0aGlzLnBvaW50U3Ryb2tlQ29sb3JGb3JTZXJpZXMobGluZUluZGV4KSk7XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLnBvaW50U3Ryb2tlV2lkdGhGb3JTZXJpZXMgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wb2ludFN0cm9rZVdpZHRoc1tpbmRleCAlIHRoaXMub3B0aW9ucy5wb2ludFN0cm9rZVdpZHRocy5sZW5ndGhdO1xuICAgIH07XG5cbiAgICBMaW5lLnByb3RvdHlwZS5wb2ludFN0cm9rZUNvbG9yRm9yU2VyaWVzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucG9pbnRTdHJva2VDb2xvcnNbaW5kZXggJSB0aGlzLm9wdGlvbnMucG9pbnRTdHJva2VDb2xvcnMubGVuZ3RoXTtcbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUubGluZVdpZHRoRm9yU2VyaWVzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGluZVdpZHRoIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5saW5lV2lkdGhbaW5kZXggJSB0aGlzLm9wdGlvbnMubGluZVdpZHRoLmxlbmd0aF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxpbmVXaWR0aDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUucG9pbnRTaXplRm9yU2VyaWVzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucG9pbnRTaXplIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wb2ludFNpemVbaW5kZXggJSB0aGlzLm9wdGlvbnMucG9pbnRTaXplLmxlbmd0aF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBvaW50U2l6ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGluZS5wcm90b3R5cGUucG9pbnRHcm93U2VyaWVzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiBSYXBoYWVsLmFuaW1hdGlvbih7XG4gICAgICAgIHI6IHRoaXMucG9pbnRTaXplRm9yU2VyaWVzKGluZGV4KSArIDNcbiAgICAgIH0sIDI1LCAnbGluZWFyJyk7XG4gICAgfTtcblxuICAgIExpbmUucHJvdG90eXBlLnBvaW50U2hyaW5rU2VyaWVzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiBSYXBoYWVsLmFuaW1hdGlvbih7XG4gICAgICAgIHI6IHRoaXMucG9pbnRTaXplRm9yU2VyaWVzKGluZGV4KVxuICAgICAgfSwgMjUsICdsaW5lYXInKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExpbmU7XG5cbiAgfSkoTW9ycmlzLkdyaWQpO1xuXG4gIE1vcnJpcy5sYWJlbFNlcmllcyA9IGZ1bmN0aW9uKGRtaW4sIGRtYXgsIHB4d2lkdGgsIHNwZWNOYW1lLCB4TGFiZWxGb3JtYXQpIHtcbiAgICB2YXIgZCwgZDAsIGRkZW5zaXR5LCBuYW1lLCByZXQsIHMsIHNwZWMsIHQsIF9pLCBfbGVuLCBfcmVmO1xuICAgIGRkZW5zaXR5ID0gMjAwICogKGRtYXggLSBkbWluKSAvIHB4d2lkdGg7XG4gICAgZDAgPSBuZXcgRGF0ZShkbWluKTtcbiAgICBzcGVjID0gTW9ycmlzLkxBQkVMX1NQRUNTW3NwZWNOYW1lXTtcbiAgICBpZiAoc3BlYyA9PT0gdm9pZCAwKSB7XG4gICAgICBfcmVmID0gTW9ycmlzLkFVVE9fTEFCRUxfT1JERVI7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbmFtZSA9IF9yZWZbX2ldO1xuICAgICAgICBzID0gTW9ycmlzLkxBQkVMX1NQRUNTW25hbWVdO1xuICAgICAgICBpZiAoZGRlbnNpdHkgPj0gcy5zcGFuKSB7XG4gICAgICAgICAgc3BlYyA9IHM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNwZWMgPT09IHZvaWQgMCkge1xuICAgICAgc3BlYyA9IE1vcnJpcy5MQUJFTF9TUEVDU1tcInNlY29uZFwiXTtcbiAgICB9XG4gICAgaWYgKHhMYWJlbEZvcm1hdCkge1xuICAgICAgc3BlYyA9ICQuZXh0ZW5kKHt9LCBzcGVjLCB7XG4gICAgICAgIGZtdDogeExhYmVsRm9ybWF0XG4gICAgICB9KTtcbiAgICB9XG4gICAgZCA9IHNwZWMuc3RhcnQoZDApO1xuICAgIHJldCA9IFtdO1xuICAgIHdoaWxlICgodCA9IGQuZ2V0VGltZSgpKSA8PSBkbWF4KSB7XG4gICAgICBpZiAodCA+PSBkbWluKSB7XG4gICAgICAgIHJldC5wdXNoKFtzcGVjLmZtdChkKSwgdF0pO1xuICAgICAgfVxuICAgICAgc3BlYy5pbmNyKGQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIG1pbnV0ZXNTcGVjSGVscGVyID0gZnVuY3Rpb24oaW50ZXJ2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3BhbjogaW50ZXJ2YWwgKiA2MCAqIDEwMDAsXG4gICAgICBzdGFydDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpLCBkLmdldEhvdXJzKCkpO1xuICAgICAgfSxcbiAgICAgIGZtdDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gXCJcIiArIChNb3JyaXMucGFkMihkLmdldEhvdXJzKCkpKSArIFwiOlwiICsgKE1vcnJpcy5wYWQyKGQuZ2V0TWludXRlcygpKSk7XG4gICAgICB9LFxuICAgICAgaW5jcjogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5zZXRVVENNaW51dGVzKGQuZ2V0VVRDTWludXRlcygpICsgaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgc2Vjb25kc1NwZWNIZWxwZXIgPSBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgIHJldHVybiB7XG4gICAgICBzcGFuOiBpbnRlcnZhbCAqIDEwMDAsXG4gICAgICBzdGFydDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpLCBkLmdldEhvdXJzKCksIGQuZ2V0TWludXRlcygpKTtcbiAgICAgIH0sXG4gICAgICBmbXQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyAoTW9ycmlzLnBhZDIoZC5nZXRIb3VycygpKSkgKyBcIjpcIiArIChNb3JyaXMucGFkMihkLmdldE1pbnV0ZXMoKSkpICsgXCI6XCIgKyAoTW9ycmlzLnBhZDIoZC5nZXRTZWNvbmRzKCkpKTtcbiAgICAgIH0sXG4gICAgICBpbmNyOiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLnNldFVUQ1NlY29uZHMoZC5nZXRVVENTZWNvbmRzKCkgKyBpbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBNb3JyaXMuTEFCRUxfU1BFQ1MgPSB7XG4gICAgXCJkZWNhZGVcIjoge1xuICAgICAgc3BhbjogMTcyODAwMDAwMDAwLFxuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSAtIGQuZ2V0RnVsbFllYXIoKSAlIDEwLCAwLCAxKTtcbiAgICAgIH0sXG4gICAgICBmbXQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyAoZC5nZXRGdWxsWWVhcigpKTtcbiAgICAgIH0sXG4gICAgICBpbmNyOiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLnNldEZ1bGxZZWFyKGQuZ2V0RnVsbFllYXIoKSArIDEwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFwieWVhclwiOiB7XG4gICAgICBzcGFuOiAxNzI4MDAwMDAwMCxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICAgICAgfSxcbiAgICAgIGZtdDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gXCJcIiArIChkLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgfSxcbiAgICAgIGluY3I6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuc2V0RnVsbFllYXIoZC5nZXRGdWxsWWVhcigpICsgMSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBcIm1vbnRoXCI6IHtcbiAgICAgIHNwYW46IDI0MTkyMDAwMDAsXG4gICAgICBzdGFydDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIDEpO1xuICAgICAgfSxcbiAgICAgIGZtdDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gXCJcIiArIChkLmdldEZ1bGxZZWFyKCkpICsgXCItXCIgKyAoTW9ycmlzLnBhZDIoZC5nZXRNb250aCgpICsgMSkpO1xuICAgICAgfSxcbiAgICAgIGluY3I6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgMSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBcIndlZWtcIjoge1xuICAgICAgc3BhbjogNjA0ODAwMDAwLFxuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSk7XG4gICAgICB9LFxuICAgICAgZm10OiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBcIlwiICsgKGQuZ2V0RnVsbFllYXIoKSkgKyBcIi1cIiArIChNb3JyaXMucGFkMihkLmdldE1vbnRoKCkgKyAxKSkgKyBcIi1cIiArIChNb3JyaXMucGFkMihkLmdldERhdGUoKSkpO1xuICAgICAgfSxcbiAgICAgIGluY3I6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDcpO1xuICAgICAgfVxuICAgIH0sXG4gICAgXCJkYXlcIjoge1xuICAgICAgc3BhbjogODY0MDAwMDAsXG4gICAgICBzdGFydDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKTtcbiAgICAgIH0sXG4gICAgICBmbXQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyAoZC5nZXRGdWxsWWVhcigpKSArIFwiLVwiICsgKE1vcnJpcy5wYWQyKGQuZ2V0TW9udGgoKSArIDEpKSArIFwiLVwiICsgKE1vcnJpcy5wYWQyKGQuZ2V0RGF0ZSgpKSk7XG4gICAgICB9LFxuICAgICAgaW5jcjogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBcImhvdXJcIjogbWludXRlc1NwZWNIZWxwZXIoNjApLFxuICAgIFwiMzBtaW5cIjogbWludXRlc1NwZWNIZWxwZXIoMzApLFxuICAgIFwiMTVtaW5cIjogbWludXRlc1NwZWNIZWxwZXIoMTUpLFxuICAgIFwiMTBtaW5cIjogbWludXRlc1NwZWNIZWxwZXIoMTApLFxuICAgIFwiNW1pblwiOiBtaW51dGVzU3BlY0hlbHBlcig1KSxcbiAgICBcIm1pbnV0ZVwiOiBtaW51dGVzU3BlY0hlbHBlcigxKSxcbiAgICBcIjMwc2VjXCI6IHNlY29uZHNTcGVjSGVscGVyKDMwKSxcbiAgICBcIjE1c2VjXCI6IHNlY29uZHNTcGVjSGVscGVyKDE1KSxcbiAgICBcIjEwc2VjXCI6IHNlY29uZHNTcGVjSGVscGVyKDEwKSxcbiAgICBcIjVzZWNcIjogc2Vjb25kc1NwZWNIZWxwZXIoNSksXG4gICAgXCJzZWNvbmRcIjogc2Vjb25kc1NwZWNIZWxwZXIoMSlcbiAgfTtcblxuICBNb3JyaXMuQVVUT19MQUJFTF9PUkRFUiA9IFtcImRlY2FkZVwiLCBcInllYXJcIiwgXCJtb250aFwiLCBcIndlZWtcIiwgXCJkYXlcIiwgXCJob3VyXCIsIFwiMzBtaW5cIiwgXCIxNW1pblwiLCBcIjEwbWluXCIsIFwiNW1pblwiLCBcIm1pbnV0ZVwiLCBcIjMwc2VjXCIsIFwiMTVzZWNcIiwgXCIxMHNlY1wiLCBcIjVzZWNcIiwgXCJzZWNvbmRcIl07XG5cbiAgTW9ycmlzLkFyZWEgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgdmFyIGFyZWFEZWZhdWx0cztcblxuICAgIF9fZXh0ZW5kcyhBcmVhLCBfc3VwZXIpO1xuXG4gICAgYXJlYURlZmF1bHRzID0ge1xuICAgICAgZmlsbE9wYWNpdHk6ICdhdXRvJyxcbiAgICAgIGJlaGF2ZUxpa2VMaW5lOiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBBcmVhKG9wdGlvbnMpIHtcbiAgICAgIHZhciBhcmVhT3B0aW9ucztcbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBNb3JyaXMuQXJlYSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb3JyaXMuQXJlYShvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGFyZWFPcHRpb25zID0gJC5leHRlbmQoe30sIGFyZWFEZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICB0aGlzLmN1bXVsYXRpdmUgPSAhYXJlYU9wdGlvbnMuYmVoYXZlTGlrZUxpbmU7XG4gICAgICBpZiAoYXJlYU9wdGlvbnMuZmlsbE9wYWNpdHkgPT09ICdhdXRvJykge1xuICAgICAgICBhcmVhT3B0aW9ucy5maWxsT3BhY2l0eSA9IGFyZWFPcHRpb25zLmJlaGF2ZUxpa2VMaW5lID8gLjggOiAxO1xuICAgICAgfVxuICAgICAgQXJlYS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBhcmVhT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgQXJlYS5wcm90b3R5cGUuY2FsY1BvaW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJvdywgdG90YWwsIHksIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIF9yZWYgPSB0aGlzLmRhdGE7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHJvdyA9IF9yZWZbX2ldO1xuICAgICAgICByb3cuX3ggPSB0aGlzLnRyYW5zWChyb3cueCk7XG4gICAgICAgIHRvdGFsID0gMDtcbiAgICAgICAgcm93Ll95ID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYxLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3JlZjEgPSByb3cueTtcbiAgICAgICAgICBfcmVzdWx0czEgPSBbXTtcbiAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMS5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgIHkgPSBfcmVmMVtfal07XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmJlaGF2ZUxpa2VMaW5lKSB7XG4gICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKHRoaXMudHJhbnNZKHkpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRvdGFsICs9IHkgfHwgMDtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2godGhpcy50cmFuc1kodG90YWwpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChyb3cuX3ltYXggPSBNYXRoLm1heC5hcHBseShNYXRoLCByb3cuX3kpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQXJlYS5wcm90b3R5cGUuZHJhd1NlcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIHJhbmdlLCBfaSwgX2osIF9rLCBfbGVuLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHMsIF9yZXN1bHRzMSwgX3Jlc3VsdHMyO1xuICAgICAgdGhpcy5zZXJpZXNQb2ludHMgPSBbXTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmVoYXZlTGlrZUxpbmUpIHtcbiAgICAgICAgcmFuZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9yZWYgPSB0aGlzLm9wdGlvbnMueWtleXMubGVuZ3RoIC0gMTsgMCA8PSBfcmVmID8gX2kgPD0gX3JlZiA6IF9pID49IF9yZWY7IDAgPD0gX3JlZiA/IF9pKysgOiBfaS0tKXsgX3Jlc3VsdHMucHVzaChfaSk7IH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmFwcGx5KHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yICh2YXIgX2ogPSBfcmVmMSA9IHRoaXMub3B0aW9ucy55a2V5cy5sZW5ndGggLSAxOyBfcmVmMSA8PSAwID8gX2ogPD0gMCA6IF9qID49IDA7IF9yZWYxIDw9IDAgPyBfaisrIDogX2otLSl7IF9yZXN1bHRzMS5wdXNoKF9qKTsgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgIH0pLmFwcGx5KHRoaXMpO1xuICAgICAgfVxuICAgICAgX3Jlc3VsdHMyID0gW107XG4gICAgICBmb3IgKF9rID0gMCwgX2xlbiA9IHJhbmdlLmxlbmd0aDsgX2sgPCBfbGVuOyBfaysrKSB7XG4gICAgICAgIGkgPSByYW5nZVtfa107XG4gICAgICAgIHRoaXMuX2RyYXdGaWxsRm9yKGkpO1xuICAgICAgICB0aGlzLl9kcmF3TGluZUZvcihpKTtcbiAgICAgICAgX3Jlc3VsdHMyLnB1c2godGhpcy5fZHJhd1BvaW50Rm9yKGkpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0czI7XG4gICAgfTtcblxuICAgIEFyZWEucHJvdG90eXBlLl9kcmF3RmlsbEZvciA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXIgcGF0aDtcbiAgICAgIHBhdGggPSB0aGlzLnBhdGhzW2luZGV4XTtcbiAgICAgIGlmIChwYXRoICE9PSBudWxsKSB7XG4gICAgICAgIHBhdGggPSBwYXRoICsgKFwiTFwiICsgKHRoaXMudHJhbnNYKHRoaXMueG1heCkpICsgXCIsXCIgKyB0aGlzLmJvdHRvbSArIFwiTFwiICsgKHRoaXMudHJhbnNYKHRoaXMueG1pbikpICsgXCIsXCIgKyB0aGlzLmJvdHRvbSArIFwiWlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhd0ZpbGxlZFBhdGgocGF0aCwgdGhpcy5maWxsRm9yU2VyaWVzKGluZGV4KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEFyZWEucHJvdG90eXBlLmZpbGxGb3JTZXJpZXMgPSBmdW5jdGlvbihpKSB7XG4gICAgICB2YXIgY29sb3I7XG4gICAgICBjb2xvciA9IFJhcGhhZWwucmdiMmhzbCh0aGlzLmNvbG9yRm9yKHRoaXMuZGF0YVtpXSwgaSwgJ2xpbmUnKSk7XG4gICAgICByZXR1cm4gUmFwaGFlbC5oc2woY29sb3IuaCwgdGhpcy5vcHRpb25zLmJlaGF2ZUxpa2VMaW5lID8gY29sb3IucyAqIDAuOSA6IGNvbG9yLnMgKiAwLjc1LCBNYXRoLm1pbigwLjk4LCB0aGlzLm9wdGlvbnMuYmVoYXZlTGlrZUxpbmUgPyBjb2xvci5sICogMS4yIDogY29sb3IubCAqIDEuMjUpKTtcbiAgICB9O1xuXG4gICAgQXJlYS5wcm90b3R5cGUuZHJhd0ZpbGxlZFBhdGggPSBmdW5jdGlvbihwYXRoLCBmaWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXBoYWVsLnBhdGgocGF0aCkuYXR0cignZmlsbCcsIGZpbGwpLmF0dHIoJ2ZpbGwtb3BhY2l0eScsIHRoaXMub3B0aW9ucy5maWxsT3BhY2l0eSkuYXR0cignc3Ryb2tlJywgJ25vbmUnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFyZWE7XG5cbiAgfSkoTW9ycmlzLkxpbmUpO1xuXG4gIE1vcnJpcy5CYXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhciwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEJhcihvcHRpb25zKSB7XG4gICAgICB0aGlzLm9uSG92ZXJPdXQgPSBfX2JpbmQodGhpcy5vbkhvdmVyT3V0LCB0aGlzKTtcbiAgICAgIHRoaXMub25Ib3Zlck1vdmUgPSBfX2JpbmQodGhpcy5vbkhvdmVyTW92ZSwgdGhpcyk7XG4gICAgICB0aGlzLm9uR3JpZENsaWNrID0gX19iaW5kKHRoaXMub25HcmlkQ2xpY2ssIHRoaXMpO1xuICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE1vcnJpcy5CYXIpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9ycmlzLkJhcihvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIEJhci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAkLmV4dGVuZCh7fSwgb3B0aW9ucywge1xuICAgICAgICBwYXJzZVRpbWU6IGZhbHNlXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgQmFyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmN1bXVsYXRpdmUgPSB0aGlzLm9wdGlvbnMuc3RhY2tlZDtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlkZUhvdmVyICE9PSAnYWx3YXlzJykge1xuICAgICAgICB0aGlzLmhvdmVyID0gbmV3IE1vcnJpcy5Ib3Zlcih7XG4gICAgICAgICAgcGFyZW50OiB0aGlzLmVsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKCdob3Zlcm1vdmUnLCB0aGlzLm9uSG92ZXJNb3ZlKTtcbiAgICAgICAgdGhpcy5vbignaG92ZXJvdXQnLCB0aGlzLm9uSG92ZXJPdXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5vbignZ3JpZGNsaWNrJywgdGhpcy5vbkdyaWRDbGljayk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gICAgICBiYXJTaXplUmF0aW86IDAuNzUsXG4gICAgICBiYXJHYXA6IDMsXG4gICAgICBiYXJDb2xvcnM6IFsnIzBiNjJhNCcsICcjN2E5MmEzJywgJyM0ZGE3NGQnLCAnI2FmZDhmOCcsICcjZWRjMjQwJywgJyNjYjRiNGInLCAnIzk0NDBlZCddLFxuICAgICAgYmFyT3BhY2l0eTogMS4wLFxuICAgICAgYmFyUmFkaXVzOiBbMCwgMCwgMCwgMF0sXG4gICAgICB4TGFiZWxNYXJnaW46IDUwXG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuY2FsYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICB0aGlzLmNhbGNCYXJzKCk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhpZGVIb3ZlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIChfcmVmID0gdGhpcy5ob3ZlcikudXBkYXRlLmFwcGx5KF9yZWYsIHRoaXMuaG92ZXJDb250ZW50Rm9yUm93KHRoaXMuZGF0YS5sZW5ndGggLSAxKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuY2FsY0JhcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpZHgsIHJvdywgeSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMuZGF0YTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHtcbiAgICAgICAgcm93ID0gX3JlZltpZHhdO1xuICAgICAgICByb3cuX3ggPSB0aGlzLmxlZnQgKyB0aGlzLndpZHRoICogKGlkeCArIDAuNSkgLyB0aGlzLmRhdGEubGVuZ3RoO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKHJvdy5feSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2osIF9sZW4xLCBfcmVmMSwgX3Jlc3VsdHMxO1xuICAgICAgICAgIF9yZWYxID0gcm93Lnk7XG4gICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICB5ID0gX3JlZjFbX2pdO1xuICAgICAgICAgICAgaWYgKHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBfcmVzdWx0czEucHVzaCh0aGlzLnRyYW5zWSh5KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfcmVzdWx0czEucHVzaChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBpZiAoKF9yZWYgPSB0aGlzLm9wdGlvbnMuYXhlcykgPT09IHRydWUgfHwgX3JlZiA9PT0gJ2JvdGgnIHx8IF9yZWYgPT09ICd4Jykge1xuICAgICAgICB0aGlzLmRyYXdYQXhpcygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZHJhd1NlcmllcygpO1xuICAgIH07XG5cbiAgICBCYXIucHJvdG90eXBlLmRyYXdYQXhpcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGxhYmVsLCBsYWJlbEJveCwgbWFyZ2luLCBvZmZzZXQsIHByZXZBbmdsZU1hcmdpbiwgcHJldkxhYmVsTWFyZ2luLCByb3csIHRleHRCb3gsIHlwb3MsIF9pLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgIHlwb3MgPSB0aGlzLmJvdHRvbSArICh0aGlzLm9wdGlvbnMueEF4aXNMYWJlbFRvcFBhZGRpbmcgfHwgdGhpcy5vcHRpb25zLnBhZGRpbmcgLyAyKTtcbiAgICAgIHByZXZMYWJlbE1hcmdpbiA9IG51bGw7XG4gICAgICBwcmV2QW5nbGVNYXJnaW4gPSBudWxsO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZiA9IHRoaXMuZGF0YS5sZW5ndGg7IDAgPD0gX3JlZiA/IF9pIDwgX3JlZiA6IF9pID4gX3JlZjsgaSA9IDAgPD0gX3JlZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgIHJvdyA9IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMSAtIGldO1xuICAgICAgICBsYWJlbCA9IHRoaXMuZHJhd1hBeGlzTGFiZWwocm93Ll94LCB5cG9zLCByb3cubGFiZWwpO1xuICAgICAgICB0ZXh0Qm94ID0gbGFiZWwuZ2V0QkJveCgpO1xuICAgICAgICBsYWJlbC50cmFuc2Zvcm0oXCJyXCIgKyAoLXRoaXMub3B0aW9ucy54TGFiZWxBbmdsZSkpO1xuICAgICAgICBsYWJlbEJveCA9IGxhYmVsLmdldEJCb3goKTtcbiAgICAgICAgbGFiZWwudHJhbnNmb3JtKFwidDAsXCIgKyAobGFiZWxCb3guaGVpZ2h0IC8gMikgKyBcIi4uLlwiKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy54TGFiZWxBbmdsZSAhPT0gMCkge1xuICAgICAgICAgIG9mZnNldCA9IC0wLjUgKiB0ZXh0Qm94LndpZHRoICogTWF0aC5jb3ModGhpcy5vcHRpb25zLnhMYWJlbEFuZ2xlICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgICAgICAgICBsYWJlbC50cmFuc2Zvcm0oXCJ0XCIgKyBvZmZzZXQgKyBcIiwwLi4uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoKHByZXZMYWJlbE1hcmdpbiA9PSBudWxsKSB8fCBwcmV2TGFiZWxNYXJnaW4gPj0gbGFiZWxCb3gueCArIGxhYmVsQm94LndpZHRoIHx8IChwcmV2QW5nbGVNYXJnaW4gIT0gbnVsbCkgJiYgcHJldkFuZ2xlTWFyZ2luID49IGxhYmVsQm94LngpICYmIGxhYmVsQm94LnggPj0gMCAmJiAobGFiZWxCb3gueCArIGxhYmVsQm94LndpZHRoKSA8IHRoaXMuZWwud2lkdGgoKSkge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMueExhYmVsQW5nbGUgIT09IDApIHtcbiAgICAgICAgICAgIG1hcmdpbiA9IDEuMjUgKiB0aGlzLm9wdGlvbnMuZ3JpZFRleHRTaXplIC8gTWF0aC5zaW4odGhpcy5vcHRpb25zLnhMYWJlbEFuZ2xlICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgICAgICAgICAgIHByZXZBbmdsZU1hcmdpbiA9IGxhYmVsQm94LnggLSBtYXJnaW47XG4gICAgICAgICAgfVxuICAgICAgICAgIF9yZXN1bHRzLnB1c2gocHJldkxhYmVsTWFyZ2luID0gbGFiZWxCb3gueCAtIHRoaXMub3B0aW9ucy54TGFiZWxNYXJnaW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobGFiZWwucmVtb3ZlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuZHJhd1NlcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJhcldpZHRoLCBib3R0b20sIGdyb3VwV2lkdGgsIGlkeCwgbGFzdFRvcCwgbGVmdCwgbGVmdFBhZGRpbmcsIG51bUJhcnMsIHJvdywgc2lkeCwgc2l6ZSwgc3BhY2VMZWZ0LCB0b3AsIHlwb3MsIHplcm9Qb3M7XG4gICAgICBncm91cFdpZHRoID0gdGhpcy53aWR0aCAvIHRoaXMub3B0aW9ucy5kYXRhLmxlbmd0aDtcbiAgICAgIG51bUJhcnMgPSB0aGlzLm9wdGlvbnMuc3RhY2tlZCA/IDEgOiB0aGlzLm9wdGlvbnMueWtleXMubGVuZ3RoO1xuICAgICAgYmFyV2lkdGggPSAoZ3JvdXBXaWR0aCAqIHRoaXMub3B0aW9ucy5iYXJTaXplUmF0aW8gLSB0aGlzLm9wdGlvbnMuYmFyR2FwICogKG51bUJhcnMgLSAxKSkgLyBudW1CYXJzO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYXJTaXplKSB7XG4gICAgICAgIGJhcldpZHRoID0gTWF0aC5taW4oYmFyV2lkdGgsIHRoaXMub3B0aW9ucy5iYXJTaXplKTtcbiAgICAgIH1cbiAgICAgIHNwYWNlTGVmdCA9IGdyb3VwV2lkdGggLSBiYXJXaWR0aCAqIG51bUJhcnMgLSB0aGlzLm9wdGlvbnMuYmFyR2FwICogKG51bUJhcnMgLSAxKTtcbiAgICAgIGxlZnRQYWRkaW5nID0gc3BhY2VMZWZ0IC8gMjtcbiAgICAgIHplcm9Qb3MgPSB0aGlzLnltaW4gPD0gMCAmJiB0aGlzLnltYXggPj0gMCA/IHRoaXMudHJhbnNZKDApIDogbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmJhcnMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSB0aGlzLmRhdGE7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaWR4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaWR4ID0gKytfaSkge1xuICAgICAgICAgIHJvdyA9IF9yZWZbaWR4XTtcbiAgICAgICAgICBsYXN0VG9wID0gMDtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYxLCBfcmVzdWx0czE7XG4gICAgICAgICAgICBfcmVmMSA9IHJvdy5feTtcbiAgICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgICAgZm9yIChzaWR4ID0gX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgc2lkeCA9ICsrX2opIHtcbiAgICAgICAgICAgICAgeXBvcyA9IF9yZWYxW3NpZHhdO1xuICAgICAgICAgICAgICBpZiAoeXBvcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh6ZXJvUG9zKSB7XG4gICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLm1pbih5cG9zLCB6ZXJvUG9zKTtcbiAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KHlwb3MsIHplcm9Qb3MpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0b3AgPSB5cG9zO1xuICAgICAgICAgICAgICAgICAgYm90dG9tID0gdGhpcy5ib3R0b207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxlZnQgPSB0aGlzLmxlZnQgKyBpZHggKiBncm91cFdpZHRoICsgbGVmdFBhZGRpbmc7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc3RhY2tlZCkge1xuICAgICAgICAgICAgICAgICAgbGVmdCArPSBzaWR4ICogKGJhcldpZHRoICsgdGhpcy5vcHRpb25zLmJhckdhcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNpemUgPSBib3R0b20gLSB0b3A7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJ0aWNhbEdyaWRDb25kaXRpb24gJiYgdGhpcy5vcHRpb25zLnZlcnRpY2FsR3JpZENvbmRpdGlvbihyb3cueCkpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0Jhcih0aGlzLmxlZnQgKyBpZHggKiBncm91cFdpZHRoLCB0aGlzLnRvcCwgZ3JvdXBXaWR0aCwgTWF0aC5hYnModGhpcy50b3AgLSB0aGlzLmJvdHRvbSksIHRoaXMub3B0aW9ucy52ZXJ0aWNhbEdyaWRDb2xvciwgdGhpcy5vcHRpb25zLnZlcnRpY2FsR3JpZE9wYWNpdHksIHRoaXMub3B0aW9ucy5iYXJSYWRpdXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN0YWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgIHRvcCAtPSBsYXN0VG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdCYXIobGVmdCwgdG9wLCBiYXJXaWR0aCwgc2l6ZSwgdGhpcy5jb2xvckZvcihyb3csIHNpZHgsICdiYXInKSwgdGhpcy5vcHRpb25zLmJhck9wYWNpdHksIHRoaXMub3B0aW9ucy5iYXJSYWRpdXMpO1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKGxhc3RUb3AgKz0gc2l6ZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMxLnB1c2gobnVsbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfcmVzdWx0czE7XG4gICAgICAgICAgfSkuY2FsbCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5jb2xvckZvciA9IGZ1bmN0aW9uKHJvdywgc2lkeCwgdHlwZSkge1xuICAgICAgdmFyIHIsIHM7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5iYXJDb2xvcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgciA9IHtcbiAgICAgICAgICB4OiByb3cueCxcbiAgICAgICAgICB5OiByb3cueVtzaWR4XSxcbiAgICAgICAgICBsYWJlbDogcm93LmxhYmVsXG4gICAgICAgIH07XG4gICAgICAgIHMgPSB7XG4gICAgICAgICAgaW5kZXg6IHNpZHgsXG4gICAgICAgICAga2V5OiB0aGlzLm9wdGlvbnMueWtleXNbc2lkeF0sXG4gICAgICAgICAgbGFiZWw6IHRoaXMub3B0aW9ucy5sYWJlbHNbc2lkeF1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5iYXJDb2xvcnMuY2FsbCh0aGlzLCByLCBzLCB0eXBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYmFyQ29sb3JzW3NpZHggJSB0aGlzLm9wdGlvbnMuYmFyQ29sb3JzLmxlbmd0aF07XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhci5wcm90b3R5cGUuaGl0VGVzdCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgeCA9IE1hdGgubWF4KE1hdGgubWluKHgsIHRoaXMucmlnaHQpLCB0aGlzLmxlZnQpO1xuICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuZGF0YS5sZW5ndGggLSAxLCBNYXRoLmZsb29yKCh4IC0gdGhpcy5sZWZ0KSAvICh0aGlzLndpZHRoIC8gdGhpcy5kYXRhLmxlbmd0aCkpKTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5vbkdyaWRDbGljayA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIHZhciBpbmRleDtcbiAgICAgIGluZGV4ID0gdGhpcy5oaXRUZXN0KHgpO1xuICAgICAgcmV0dXJuIHRoaXMuZmlyZSgnY2xpY2snLCBpbmRleCwgdGhpcy5kYXRhW2luZGV4XS5zcmMsIHgsIHkpO1xuICAgIH07XG5cbiAgICBCYXIucHJvdG90eXBlLm9uSG92ZXJNb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIGluZGV4LCBfcmVmO1xuICAgICAgaW5kZXggPSB0aGlzLmhpdFRlc3QoeCk7XG4gICAgICByZXR1cm4gKF9yZWYgPSB0aGlzLmhvdmVyKS51cGRhdGUuYXBwbHkoX3JlZiwgdGhpcy5ob3ZlckNvbnRlbnRGb3JSb3coaW5kZXgpKTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5vbkhvdmVyT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhpZGVIb3ZlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG92ZXIuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXIucHJvdG90eXBlLmhvdmVyQ29udGVudEZvclJvdyA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXIgY29udGVudCwgaiwgcm93LCB4LCB5LCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHJvdyA9IHRoaXMuZGF0YVtpbmRleF07XG4gICAgICBjb250ZW50ID0gXCI8ZGl2IGNsYXNzPSdtb3JyaXMtaG92ZXItcm93LWxhYmVsJz5cIiArIHJvdy5sYWJlbCArIFwiPC9kaXY+XCI7XG4gICAgICBfcmVmID0gcm93Lnk7XG4gICAgICBmb3IgKGogPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBqID0gKytfaSkge1xuICAgICAgICB5ID0gX3JlZltqXTtcbiAgICAgICAgY29udGVudCArPSBcIjxkaXYgY2xhc3M9J21vcnJpcy1ob3Zlci1wb2ludCcgc3R5bGU9J2NvbG9yOiBcIiArICh0aGlzLmNvbG9yRm9yKHJvdywgaiwgJ2xhYmVsJykpICsgXCInPlxcbiAgXCIgKyB0aGlzLm9wdGlvbnMubGFiZWxzW2pdICsgXCI6XFxuICBcIiArICh0aGlzLnlMYWJlbEZvcm1hdCh5KSkgKyBcIlxcbjwvZGl2PlwiO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuaG92ZXJDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb250ZW50ID0gdGhpcy5vcHRpb25zLmhvdmVyQ2FsbGJhY2soaW5kZXgsIHRoaXMub3B0aW9ucywgY29udGVudCwgcm93LnNyYyk7XG4gICAgICB9XG4gICAgICB4ID0gdGhpcy5sZWZ0ICsgKGluZGV4ICsgMC41KSAqIHRoaXMud2lkdGggLyB0aGlzLmRhdGEubGVuZ3RoO1xuICAgICAgcmV0dXJuIFtjb250ZW50LCB4XTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5kcmF3WEF4aXNMYWJlbCA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MsIHRleHQpIHtcbiAgICAgIHZhciBsYWJlbDtcbiAgICAgIHJldHVybiBsYWJlbCA9IHRoaXMucmFwaGFlbC50ZXh0KHhQb3MsIHlQb3MsIHRleHQpLmF0dHIoJ2ZvbnQtc2l6ZScsIHRoaXMub3B0aW9ucy5ncmlkVGV4dFNpemUpLmF0dHIoJ2ZvbnQtZmFtaWx5JywgdGhpcy5vcHRpb25zLmdyaWRUZXh0RmFtaWx5KS5hdHRyKCdmb250LXdlaWdodCcsIHRoaXMub3B0aW9ucy5ncmlkVGV4dFdlaWdodCkuYXR0cignZmlsbCcsIHRoaXMub3B0aW9ucy5ncmlkVGV4dENvbG9yKTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5kcmF3QmFyID0gZnVuY3Rpb24oeFBvcywgeVBvcywgd2lkdGgsIGhlaWdodCwgYmFyQ29sb3IsIG9wYWNpdHksIHJhZGl1c0FycmF5KSB7XG4gICAgICB2YXIgbWF4UmFkaXVzLCBwYXRoO1xuICAgICAgbWF4UmFkaXVzID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgcmFkaXVzQXJyYXkpO1xuICAgICAgaWYgKG1heFJhZGl1cyA9PT0gMCB8fCBtYXhSYWRpdXMgPiBoZWlnaHQpIHtcbiAgICAgICAgcGF0aCA9IHRoaXMucmFwaGFlbC5yZWN0KHhQb3MsIHlQb3MsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0aCA9IHRoaXMucmFwaGFlbC5wYXRoKHRoaXMucm91bmRlZFJlY3QoeFBvcywgeVBvcywgd2lkdGgsIGhlaWdodCwgcmFkaXVzQXJyYXkpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXRoLmF0dHIoJ2ZpbGwnLCBiYXJDb2xvcikuYXR0cignZmlsbC1vcGFjaXR5Jywgb3BhY2l0eSkuYXR0cignc3Ryb2tlJywgJ25vbmUnKTtcbiAgICB9O1xuXG4gICAgQmFyLnByb3RvdHlwZS5yb3VuZGVkUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgsIHIpIHtcbiAgICAgIGlmIChyID09IG51bGwpIHtcbiAgICAgICAgciA9IFswLCAwLCAwLCAwXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXCJNXCIsIHgsIHJbMF0gKyB5LCBcIlFcIiwgeCwgeSwgeCArIHJbMF0sIHksIFwiTFwiLCB4ICsgdyAtIHJbMV0sIHksIFwiUVwiLCB4ICsgdywgeSwgeCArIHcsIHkgKyByWzFdLCBcIkxcIiwgeCArIHcsIHkgKyBoIC0gclsyXSwgXCJRXCIsIHggKyB3LCB5ICsgaCwgeCArIHcgLSByWzJdLCB5ICsgaCwgXCJMXCIsIHggKyByWzNdLCB5ICsgaCwgXCJRXCIsIHgsIHkgKyBoLCB4LCB5ICsgaCAtIHJbM10sIFwiWlwiXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJhcjtcblxuICB9KShNb3JyaXMuR3JpZCk7XG5cbiAgTW9ycmlzLkRvbnV0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEb251dCwgX3N1cGVyKTtcblxuICAgIERvbnV0LnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICAgIGNvbG9yczogWycjMEI2MkE0JywgJyMzOTgwQjUnLCAnIzY3OURDNicsICcjOTVCQkQ3JywgJyNCMENDRTEnLCAnIzA5NTc5MScsICcjMDk1MDg1JywgJyMwODNFNjcnLCAnIzA1MkM0OCcsICcjMDQyMTM1J10sXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJyxcbiAgICAgIGxhYmVsQ29sb3I6ICcjMDAwMDAwJyxcbiAgICAgIGZvcm1hdHRlcjogTW9ycmlzLmNvbW1hcyxcbiAgICAgIHJlc2l6ZTogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRG9udXQob3B0aW9ucykge1xuICAgICAgdGhpcy5yZXNpemVIYW5kbGVyID0gX19iaW5kKHRoaXMucmVzaXplSGFuZGxlciwgdGhpcyk7XG4gICAgICB0aGlzLnNlbGVjdCA9IF9fYmluZCh0aGlzLnNlbGVjdCwgdGhpcyk7XG4gICAgICB0aGlzLmNsaWNrID0gX19iaW5kKHRoaXMuY2xpY2ssIHRoaXMpO1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBNb3JyaXMuRG9udXQpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9ycmlzLkRvbnV0KG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuZWwgPSAkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuZWxlbWVudCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbCA9ICQob3B0aW9ucy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmVsID09PSBudWxsIHx8IHRoaXMuZWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdyYXBoIHBsYWNlaG9sZGVyIG5vdCBmb3VuZC5cIik7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5kYXRhID09PSB2b2lkIDAgfHwgb3B0aW9ucy5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnJhcGhhZWwgPSBuZXcgUmFwaGFlbCh0aGlzLmVsWzBdKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzaXplKSB7XG4gICAgICAgICQod2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICBpZiAoX3RoaXMudGltZW91dElkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoX3RoaXMudGltZW91dElkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KF90aGlzLnJlc2l6ZUhhbmRsZXIsIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXREYXRhKG9wdGlvbnMuZGF0YSk7XG4gICAgfVxuXG4gICAgRG9udXQucHJvdG90eXBlLnJlZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIEMsIGN4LCBjeSwgaSwgaWR4LCBsYXN0LCBtYXhfdmFsdWUsIG1pbiwgbmV4dCwgc2VnLCB0b3RhbCwgdmFsdWUsIHcsIF9pLCBfaiwgX2ssIF9sZW4sIF9sZW4xLCBfbGVuMiwgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgIHRoaXMucmFwaGFlbC5jbGVhcigpO1xuICAgICAgY3ggPSB0aGlzLmVsLndpZHRoKCkgLyAyO1xuICAgICAgY3kgPSB0aGlzLmVsLmhlaWdodCgpIC8gMjtcbiAgICAgIHcgPSAoTWF0aC5taW4oY3gsIGN5KSAtIDEwKSAvIDM7XG4gICAgICB0b3RhbCA9IDA7XG4gICAgICBfcmVmID0gdGhpcy52YWx1ZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdmFsdWUgPSBfcmVmW19pXTtcbiAgICAgICAgdG90YWwgKz0gdmFsdWU7XG4gICAgICB9XG4gICAgICBtaW4gPSA1IC8gKDIgKiB3KTtcbiAgICAgIEMgPSAxLjk5OTkgKiBNYXRoLlBJIC0gbWluICogdGhpcy5kYXRhLmxlbmd0aDtcbiAgICAgIGxhc3QgPSAwO1xuICAgICAgaWR4ID0gMDtcbiAgICAgIHRoaXMuc2VnbWVudHMgPSBbXTtcbiAgICAgIF9yZWYxID0gdGhpcy52YWx1ZXM7XG4gICAgICBmb3IgKGkgPSBfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBpID0gKytfaikge1xuICAgICAgICB2YWx1ZSA9IF9yZWYxW2ldO1xuICAgICAgICBuZXh0ID0gbGFzdCArIG1pbiArIEMgKiAodmFsdWUgLyB0b3RhbCk7XG4gICAgICAgIHNlZyA9IG5ldyBNb3JyaXMuRG9udXRTZWdtZW50KGN4LCBjeSwgdyAqIDIsIHcsIGxhc3QsIG5leHQsIHRoaXMuZGF0YVtpXS5jb2xvciB8fCB0aGlzLm9wdGlvbnMuY29sb3JzW2lkeCAlIHRoaXMub3B0aW9ucy5jb2xvcnMubGVuZ3RoXSwgdGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvciwgaWR4LCB0aGlzLnJhcGhhZWwpO1xuICAgICAgICBzZWcucmVuZGVyKCk7XG4gICAgICAgIHRoaXMuc2VnbWVudHMucHVzaChzZWcpO1xuICAgICAgICBzZWcub24oJ2hvdmVyJywgdGhpcy5zZWxlY3QpO1xuICAgICAgICBzZWcub24oJ2NsaWNrJywgdGhpcy5jbGljayk7XG4gICAgICAgIGxhc3QgPSBuZXh0O1xuICAgICAgICBpZHggKz0gMTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGV4dDEgPSB0aGlzLmRyYXdFbXB0eURvbnV0TGFiZWwoY3gsIGN5IC0gMTAsIHRoaXMub3B0aW9ucy5sYWJlbENvbG9yLCAxNSwgODAwKTtcbiAgICAgIHRoaXMudGV4dDIgPSB0aGlzLmRyYXdFbXB0eURvbnV0TGFiZWwoY3gsIGN5ICsgMTAsIHRoaXMub3B0aW9ucy5sYWJlbENvbG9yLCAxNCk7XG4gICAgICBtYXhfdmFsdWUgPSBNYXRoLm1heC5hcHBseShNYXRoLCB0aGlzLnZhbHVlcyk7XG4gICAgICBpZHggPSAwO1xuICAgICAgX3JlZjIgPSB0aGlzLnZhbHVlcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmMi5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHtcbiAgICAgICAgdmFsdWUgPSBfcmVmMltfa107XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbWF4X3ZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3QoaWR4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBfcmVzdWx0cy5wdXNoKGlkeCArPSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgRG9udXQucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgcm93O1xuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgIHRoaXMudmFsdWVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmID0gdGhpcy5kYXRhO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICByb3cgPSBfcmVmW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHBhcnNlRmxvYXQocm93LnZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLnJlZHJhdygpO1xuICAgIH07XG5cbiAgICBEb251dC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbihpZHgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpcmUoJ2NsaWNrJywgaWR4LCB0aGlzLmRhdGFbaWR4XSk7XG4gICAgfTtcblxuICAgIERvbnV0LnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihpZHgpIHtcbiAgICAgIHZhciByb3csIHMsIHNlZ21lbnQsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgX3JlZiA9IHRoaXMuc2VnbWVudHM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcyA9IF9yZWZbX2ldO1xuICAgICAgICBzLmRlc2VsZWN0KCk7XG4gICAgICB9XG4gICAgICBzZWdtZW50ID0gdGhpcy5zZWdtZW50c1tpZHhdO1xuICAgICAgc2VnbWVudC5zZWxlY3QoKTtcbiAgICAgIHJvdyA9IHRoaXMuZGF0YVtpZHhdO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0TGFiZWxzKHJvdy5sYWJlbCwgdGhpcy5vcHRpb25zLmZvcm1hdHRlcihyb3cudmFsdWUsIHJvdykpO1xuICAgIH07XG5cbiAgICBEb251dC5wcm90b3R5cGUuc2V0TGFiZWxzID0gZnVuY3Rpb24obGFiZWwxLCBsYWJlbDIpIHtcbiAgICAgIHZhciBpbm5lciwgbWF4SGVpZ2h0Qm90dG9tLCBtYXhIZWlnaHRUb3AsIG1heFdpZHRoLCB0ZXh0MWJib3gsIHRleHQxc2NhbGUsIHRleHQyYmJveCwgdGV4dDJzY2FsZTtcbiAgICAgIGlubmVyID0gKE1hdGgubWluKHRoaXMuZWwud2lkdGgoKSAvIDIsIHRoaXMuZWwuaGVpZ2h0KCkgLyAyKSAtIDEwKSAqIDIgLyAzO1xuICAgICAgbWF4V2lkdGggPSAxLjggKiBpbm5lcjtcbiAgICAgIG1heEhlaWdodFRvcCA9IGlubmVyIC8gMjtcbiAgICAgIG1heEhlaWdodEJvdHRvbSA9IGlubmVyIC8gMztcbiAgICAgIHRoaXMudGV4dDEuYXR0cih7XG4gICAgICAgIHRleHQ6IGxhYmVsMSxcbiAgICAgICAgdHJhbnNmb3JtOiAnJ1xuICAgICAgfSk7XG4gICAgICB0ZXh0MWJib3ggPSB0aGlzLnRleHQxLmdldEJCb3goKTtcbiAgICAgIHRleHQxc2NhbGUgPSBNYXRoLm1pbihtYXhXaWR0aCAvIHRleHQxYmJveC53aWR0aCwgbWF4SGVpZ2h0VG9wIC8gdGV4dDFiYm94LmhlaWdodCk7XG4gICAgICB0aGlzLnRleHQxLmF0dHIoe1xuICAgICAgICB0cmFuc2Zvcm06IFwiU1wiICsgdGV4dDFzY2FsZSArIFwiLFwiICsgdGV4dDFzY2FsZSArIFwiLFwiICsgKHRleHQxYmJveC54ICsgdGV4dDFiYm94LndpZHRoIC8gMikgKyBcIixcIiArICh0ZXh0MWJib3gueSArIHRleHQxYmJveC5oZWlnaHQpXG4gICAgICB9KTtcbiAgICAgIHRoaXMudGV4dDIuYXR0cih7XG4gICAgICAgIHRleHQ6IGxhYmVsMixcbiAgICAgICAgdHJhbnNmb3JtOiAnJ1xuICAgICAgfSk7XG4gICAgICB0ZXh0MmJib3ggPSB0aGlzLnRleHQyLmdldEJCb3goKTtcbiAgICAgIHRleHQyc2NhbGUgPSBNYXRoLm1pbihtYXhXaWR0aCAvIHRleHQyYmJveC53aWR0aCwgbWF4SGVpZ2h0Qm90dG9tIC8gdGV4dDJiYm94LmhlaWdodCk7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0Mi5hdHRyKHtcbiAgICAgICAgdHJhbnNmb3JtOiBcIlNcIiArIHRleHQyc2NhbGUgKyBcIixcIiArIHRleHQyc2NhbGUgKyBcIixcIiArICh0ZXh0MmJib3gueCArIHRleHQyYmJveC53aWR0aCAvIDIpICsgXCIsXCIgKyB0ZXh0MmJib3gueVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIERvbnV0LnByb3RvdHlwZS5kcmF3RW1wdHlEb251dExhYmVsID0gZnVuY3Rpb24oeFBvcywgeVBvcywgY29sb3IsIGZvbnRTaXplLCBmb250V2VpZ2h0KSB7XG4gICAgICB2YXIgdGV4dDtcbiAgICAgIHRleHQgPSB0aGlzLnJhcGhhZWwudGV4dCh4UG9zLCB5UG9zLCAnJykuYXR0cignZm9udC1zaXplJywgZm9udFNpemUpLmF0dHIoJ2ZpbGwnLCBjb2xvcik7XG4gICAgICBpZiAoZm9udFdlaWdodCAhPSBudWxsKSB7XG4gICAgICAgIHRleHQuYXR0cignZm9udC13ZWlnaHQnLCBmb250V2VpZ2h0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG5cbiAgICBEb251dC5wcm90b3R5cGUucmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50aW1lb3V0SWQgPSBudWxsO1xuICAgICAgdGhpcy5yYXBoYWVsLnNldFNpemUodGhpcy5lbC53aWR0aCgpLCB0aGlzLmVsLmhlaWdodCgpKTtcbiAgICAgIHJldHVybiB0aGlzLnJlZHJhdygpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRG9udXQ7XG5cbiAgfSkoTW9ycmlzLkV2ZW50RW1pdHRlcik7XG5cbiAgTW9ycmlzLkRvbnV0U2VnbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG9udXRTZWdtZW50LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRG9udXRTZWdtZW50KGN4LCBjeSwgaW5uZXIsIG91dGVyLCBwMCwgcDEsIGNvbG9yLCBiYWNrZ3JvdW5kQ29sb3IsIGluZGV4LCByYXBoYWVsKSB7XG4gICAgICB0aGlzLmN4ID0gY3g7XG4gICAgICB0aGlzLmN5ID0gY3k7XG4gICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICB0aGlzLm91dGVyID0gb3V0ZXI7XG4gICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjtcbiAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMucmFwaGFlbCA9IHJhcGhhZWw7XG4gICAgICB0aGlzLmRlc2VsZWN0ID0gX19iaW5kKHRoaXMuZGVzZWxlY3QsIHRoaXMpO1xuICAgICAgdGhpcy5zZWxlY3QgPSBfX2JpbmQodGhpcy5zZWxlY3QsIHRoaXMpO1xuICAgICAgdGhpcy5zaW5fcDAgPSBNYXRoLnNpbihwMCk7XG4gICAgICB0aGlzLmNvc19wMCA9IE1hdGguY29zKHAwKTtcbiAgICAgIHRoaXMuc2luX3AxID0gTWF0aC5zaW4ocDEpO1xuICAgICAgdGhpcy5jb3NfcDEgPSBNYXRoLmNvcyhwMSk7XG4gICAgICB0aGlzLmlzX2xvbmcgPSAocDEgLSBwMCkgPiBNYXRoLlBJID8gMSA6IDA7XG4gICAgICB0aGlzLnBhdGggPSB0aGlzLmNhbGNTZWdtZW50KHRoaXMuaW5uZXIgKyAzLCB0aGlzLmlubmVyICsgdGhpcy5vdXRlciAtIDUpO1xuICAgICAgdGhpcy5zZWxlY3RlZFBhdGggPSB0aGlzLmNhbGNTZWdtZW50KHRoaXMuaW5uZXIgKyAzLCB0aGlzLmlubmVyICsgdGhpcy5vdXRlcik7XG4gICAgICB0aGlzLmhpbGlnaHQgPSB0aGlzLmNhbGNBcmModGhpcy5pbm5lcik7XG4gICAgfVxuXG4gICAgRG9udXRTZWdtZW50LnByb3RvdHlwZS5jYWxjQXJjUG9pbnRzID0gZnVuY3Rpb24ocikge1xuICAgICAgcmV0dXJuIFt0aGlzLmN4ICsgciAqIHRoaXMuc2luX3AwLCB0aGlzLmN5ICsgciAqIHRoaXMuY29zX3AwLCB0aGlzLmN4ICsgciAqIHRoaXMuc2luX3AxLCB0aGlzLmN5ICsgciAqIHRoaXMuY29zX3AxXTtcbiAgICB9O1xuXG4gICAgRG9udXRTZWdtZW50LnByb3RvdHlwZS5jYWxjU2VnbWVudCA9IGZ1bmN0aW9uKHIxLCByMikge1xuICAgICAgdmFyIGl4MCwgaXgxLCBpeTAsIGl5MSwgb3gwLCBveDEsIG95MCwgb3kxLCBfcmVmLCBfcmVmMTtcbiAgICAgIF9yZWYgPSB0aGlzLmNhbGNBcmNQb2ludHMocjEpLCBpeDAgPSBfcmVmWzBdLCBpeTAgPSBfcmVmWzFdLCBpeDEgPSBfcmVmWzJdLCBpeTEgPSBfcmVmWzNdO1xuICAgICAgX3JlZjEgPSB0aGlzLmNhbGNBcmNQb2ludHMocjIpLCBveDAgPSBfcmVmMVswXSwgb3kwID0gX3JlZjFbMV0sIG94MSA9IF9yZWYxWzJdLCBveTEgPSBfcmVmMVszXTtcbiAgICAgIHJldHVybiAoXCJNXCIgKyBpeDAgKyBcIixcIiArIGl5MCkgKyAoXCJBXCIgKyByMSArIFwiLFwiICsgcjEgKyBcIiwwLFwiICsgdGhpcy5pc19sb25nICsgXCIsMCxcIiArIGl4MSArIFwiLFwiICsgaXkxKSArIChcIkxcIiArIG94MSArIFwiLFwiICsgb3kxKSArIChcIkFcIiArIHIyICsgXCIsXCIgKyByMiArIFwiLDAsXCIgKyB0aGlzLmlzX2xvbmcgKyBcIiwxLFwiICsgb3gwICsgXCIsXCIgKyBveTApICsgXCJaXCI7XG4gICAgfTtcblxuICAgIERvbnV0U2VnbWVudC5wcm90b3R5cGUuY2FsY0FyYyA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgIHZhciBpeDAsIGl4MSwgaXkwLCBpeTEsIF9yZWY7XG4gICAgICBfcmVmID0gdGhpcy5jYWxjQXJjUG9pbnRzKHIpLCBpeDAgPSBfcmVmWzBdLCBpeTAgPSBfcmVmWzFdLCBpeDEgPSBfcmVmWzJdLCBpeTEgPSBfcmVmWzNdO1xuICAgICAgcmV0dXJuIChcIk1cIiArIGl4MCArIFwiLFwiICsgaXkwKSArIChcIkFcIiArIHIgKyBcIixcIiArIHIgKyBcIiwwLFwiICsgdGhpcy5pc19sb25nICsgXCIsMCxcIiArIGl4MSArIFwiLFwiICsgaXkxKTtcbiAgICB9O1xuXG4gICAgRG9udXRTZWdtZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB0aGlzLmFyYyA9IHRoaXMuZHJhd0RvbnV0QXJjKHRoaXMuaGlsaWdodCwgdGhpcy5jb2xvcik7XG4gICAgICByZXR1cm4gdGhpcy5zZWcgPSB0aGlzLmRyYXdEb251dFNlZ21lbnQodGhpcy5wYXRoLCB0aGlzLmNvbG9yLCB0aGlzLmJhY2tncm91bmRDb2xvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5maXJlKCdob3ZlcicsIF90aGlzLmluZGV4KTtcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZmlyZSgnY2xpY2snLCBfdGhpcy5pbmRleCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgRG9udXRTZWdtZW50LnByb3RvdHlwZS5kcmF3RG9udXRBcmMgPSBmdW5jdGlvbihwYXRoLCBjb2xvcikge1xuICAgICAgcmV0dXJuIHRoaXMucmFwaGFlbC5wYXRoKHBhdGgpLmF0dHIoe1xuICAgICAgICBzdHJva2U6IGNvbG9yLFxuICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMixcbiAgICAgICAgb3BhY2l0eTogMFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIERvbnV0U2VnbWVudC5wcm90b3R5cGUuZHJhd0RvbnV0U2VnbWVudCA9IGZ1bmN0aW9uKHBhdGgsIGZpbGxDb2xvciwgc3Ryb2tlQ29sb3IsIGhvdmVyRnVuY3Rpb24sIGNsaWNrRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnJhcGhhZWwucGF0aChwYXRoKS5hdHRyKHtcbiAgICAgICAgZmlsbDogZmlsbENvbG9yLFxuICAgICAgICBzdHJva2U6IHN0cm9rZUNvbG9yLFxuICAgICAgICAnc3Ryb2tlLXdpZHRoJzogM1xuICAgICAgfSkuaG92ZXIoaG92ZXJGdW5jdGlvbikuY2xpY2soY2xpY2tGdW5jdGlvbik7XG4gICAgfTtcblxuICAgIERvbnV0U2VnbWVudC5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5zZWcuYW5pbWF0ZSh7XG4gICAgICAgICAgcGF0aDogdGhpcy5zZWxlY3RlZFBhdGhcbiAgICAgICAgfSwgMTUwLCAnPD4nKTtcbiAgICAgICAgdGhpcy5hcmMuYW5pbWF0ZSh7XG4gICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9LCAxNTAsICc8PicpO1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIERvbnV0U2VnbWVudC5wcm90b3R5cGUuZGVzZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMuc2VnLmFuaW1hdGUoe1xuICAgICAgICAgIHBhdGg6IHRoaXMucGF0aFxuICAgICAgICB9LCAxNTAsICc8PicpO1xuICAgICAgICB0aGlzLmFyYy5hbmltYXRlKHtcbiAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIDE1MCwgJzw+Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBEb251dFNlZ21lbnQ7XG5cbiAgfSkoTW9ycmlzLkV2ZW50RW1pdHRlcik7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvKiBKYXZhc2NyaXB0IHBsb3R0aW5nIGxpYnJhcnkgZm9yIGpRdWVyeSwgdmVyc2lvbiAwLjguMy5cblxuQ29weXJpZ2h0IChjKSAyMDA3LTIwMTQgSU9MQSBhbmQgT2xlIExhdXJzZW4uXG5MaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbiovXG5cbi8vIGZpcnN0IGFuIGlubGluZSBkZXBlbmRlbmN5LCBqcXVlcnkuY29sb3JoZWxwZXJzLmpzLCB3ZSBpbmxpbmUgaXQgaGVyZVxuLy8gZm9yIGNvbnZlbmllbmNlXG5cbi8qIFBsdWdpbiBmb3IgalF1ZXJ5IGZvciB3b3JraW5nIHdpdGggY29sb3JzLlxuICpcbiAqIFZlcnNpb24gMS4xLlxuICpcbiAqIEluc3BpcmF0aW9uIGZyb20galF1ZXJ5IGNvbG9yIGFuaW1hdGlvbiBwbHVnaW4gYnkgSm9obiBSZXNpZy5cbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgYnkgT2xlIExhdXJzZW4sIE9jdG9iZXIgMjAwOS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICQuY29sb3IucGFyc2UoXCIjZmZmXCIpLnNjYWxlKCdyZ2InLCAwLjI1KS5hZGQoJ2EnLCAtMC41KS50b1N0cmluZygpXG4gKiAgIHZhciBjID0gJC5jb2xvci5leHRyYWN0KCQoXCIjbXlkaXZcIiksICdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gKiAgIGNvbnNvbGUubG9nKGMuciwgYy5nLCBjLmIsIGMuYSk7XG4gKiAgICQuY29sb3IubWFrZSgxMDAsIDUwLCAyNSwgMC40KS50b1N0cmluZygpIC8vIHJldHVybnMgXCJyZ2JhKDEwMCw1MCwyNSwwLjQpXCJcbiAqXG4gKiBOb3RlIHRoYXQgLnNjYWxlKCkgYW5kIC5hZGQoKSByZXR1cm4gdGhlIHNhbWUgbW9kaWZpZWQgb2JqZWN0XG4gKiBpbnN0ZWFkIG9mIG1ha2luZyBhIG5ldyBvbmUuXG4gKlxuICogVi4gMS4xOiBGaXggZXJyb3IgaGFuZGxpbmcgc28gZS5nLiBwYXJzaW5nIGFuIGVtcHR5IHN0cmluZyBkb2VzXG4gKiBwcm9kdWNlIGEgY29sb3IgcmF0aGVyIHRoYW4ganVzdCBjcmFzaGluZy5cbiAqL1xuKGZ1bmN0aW9uKCQpeyQuY29sb3I9e307JC5jb2xvci5tYWtlPWZ1bmN0aW9uKHIsZyxiLGEpe3ZhciBvPXt9O28ucj1yfHwwO28uZz1nfHwwO28uYj1ifHwwO28uYT1hIT1udWxsP2E6MTtvLmFkZD1mdW5jdGlvbihjLGQpe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7KytpKW9bYy5jaGFyQXQoaSldKz1kO3JldHVybiBvLm5vcm1hbGl6ZSgpfTtvLnNjYWxlPWZ1bmN0aW9uKGMsZil7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDsrK2kpb1tjLmNoYXJBdChpKV0qPWY7cmV0dXJuIG8ubm9ybWFsaXplKCl9O28udG9TdHJpbmc9ZnVuY3Rpb24oKXtpZihvLmE+PTEpe3JldHVyblwicmdiKFwiK1tvLnIsby5nLG8uYl0uam9pbihcIixcIikrXCIpXCJ9ZWxzZXtyZXR1cm5cInJnYmEoXCIrW28ucixvLmcsby5iLG8uYV0uam9pbihcIixcIikrXCIpXCJ9fTtvLm5vcm1hbGl6ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGNsYW1wKG1pbix2YWx1ZSxtYXgpe3JldHVybiB2YWx1ZTxtaW4/bWluOnZhbHVlPm1heD9tYXg6dmFsdWV9by5yPWNsYW1wKDAscGFyc2VJbnQoby5yKSwyNTUpO28uZz1jbGFtcCgwLHBhcnNlSW50KG8uZyksMjU1KTtvLmI9Y2xhbXAoMCxwYXJzZUludChvLmIpLDI1NSk7by5hPWNsYW1wKDAsby5hLDEpO3JldHVybiBvfTtvLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuICQuY29sb3IubWFrZShvLnIsby5iLG8uZyxvLmEpfTtyZXR1cm4gby5ub3JtYWxpemUoKX07JC5jb2xvci5leHRyYWN0PWZ1bmN0aW9uKGVsZW0sY3NzKXt2YXIgYztkb3tjPWVsZW0uY3NzKGNzcykudG9Mb3dlckNhc2UoKTtpZihjIT1cIlwiJiZjIT1cInRyYW5zcGFyZW50XCIpYnJlYWs7ZWxlbT1lbGVtLnBhcmVudCgpfXdoaWxlKGVsZW0ubGVuZ3RoJiYhJC5ub2RlTmFtZShlbGVtLmdldCgwKSxcImJvZHlcIikpO2lmKGM9PVwicmdiYSgwLCAwLCAwLCAwKVwiKWM9XCJ0cmFuc3BhcmVudFwiO3JldHVybiAkLmNvbG9yLnBhcnNlKGMpfTskLmNvbG9yLnBhcnNlPWZ1bmN0aW9uKHN0cil7dmFyIHJlcyxtPSQuY29sb3IubWFrZTtpZihyZXM9L3JnYlxcKFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqXFwpLy5leGVjKHN0cikpcmV0dXJuIG0ocGFyc2VJbnQocmVzWzFdLDEwKSxwYXJzZUludChyZXNbMl0sMTApLHBhcnNlSW50KHJlc1szXSwxMCkpO2lmKHJlcz0vcmdiYVxcKFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV0rKD86XFwuWzAtOV0rKT8pXFxzKlxcKS8uZXhlYyhzdHIpKXJldHVybiBtKHBhcnNlSW50KHJlc1sxXSwxMCkscGFyc2VJbnQocmVzWzJdLDEwKSxwYXJzZUludChyZXNbM10sMTApLHBhcnNlRmxvYXQocmVzWzRdKSk7aWYocmVzPS9yZ2JcXChcXHMqKFswLTldKyg/OlxcLlswLTldKyk/KVxcJVxccyosXFxzKihbMC05XSsoPzpcXC5bMC05XSspPylcXCVcXHMqLFxccyooWzAtOV0rKD86XFwuWzAtOV0rKT8pXFwlXFxzKlxcKS8uZXhlYyhzdHIpKXJldHVybiBtKHBhcnNlRmxvYXQocmVzWzFdKSoyLjU1LHBhcnNlRmxvYXQocmVzWzJdKSoyLjU1LHBhcnNlRmxvYXQocmVzWzNdKSoyLjU1KTtpZihyZXM9L3JnYmFcXChcXHMqKFswLTldKyg/OlxcLlswLTldKyk/KVxcJVxccyosXFxzKihbMC05XSsoPzpcXC5bMC05XSspPylcXCVcXHMqLFxccyooWzAtOV0rKD86XFwuWzAtOV0rKT8pXFwlXFxzKixcXHMqKFswLTldKyg/OlxcLlswLTldKyk/KVxccypcXCkvLmV4ZWMoc3RyKSlyZXR1cm4gbShwYXJzZUZsb2F0KHJlc1sxXSkqMi41NSxwYXJzZUZsb2F0KHJlc1syXSkqMi41NSxwYXJzZUZsb2F0KHJlc1szXSkqMi41NSxwYXJzZUZsb2F0KHJlc1s0XSkpO2lmKHJlcz0vIyhbYS1mQS1GMC05XXsyfSkoW2EtZkEtRjAtOV17Mn0pKFthLWZBLUYwLTldezJ9KS8uZXhlYyhzdHIpKXJldHVybiBtKHBhcnNlSW50KHJlc1sxXSwxNikscGFyc2VJbnQocmVzWzJdLDE2KSxwYXJzZUludChyZXNbM10sMTYpKTtpZihyZXM9LyMoW2EtZkEtRjAtOV0pKFthLWZBLUYwLTldKShbYS1mQS1GMC05XSkvLmV4ZWMoc3RyKSlyZXR1cm4gbShwYXJzZUludChyZXNbMV0rcmVzWzFdLDE2KSxwYXJzZUludChyZXNbMl0rcmVzWzJdLDE2KSxwYXJzZUludChyZXNbM10rcmVzWzNdLDE2KSk7dmFyIG5hbWU9JC50cmltKHN0cikudG9Mb3dlckNhc2UoKTtpZihuYW1lPT1cInRyYW5zcGFyZW50XCIpcmV0dXJuIG0oMjU1LDI1NSwyNTUsMCk7ZWxzZXtyZXM9bG9va3VwQ29sb3JzW25hbWVdfHxbMCwwLDBdO3JldHVybiBtKHJlc1swXSxyZXNbMV0scmVzWzJdKX19O3ZhciBsb29rdXBDb2xvcnM9e2FxdWE6WzAsMjU1LDI1NV0sYXp1cmU6WzI0MCwyNTUsMjU1XSxiZWlnZTpbMjQ1LDI0NSwyMjBdLGJsYWNrOlswLDAsMF0sYmx1ZTpbMCwwLDI1NV0sYnJvd246WzE2NSw0Miw0Ml0sY3lhbjpbMCwyNTUsMjU1XSxkYXJrYmx1ZTpbMCwwLDEzOV0sZGFya2N5YW46WzAsMTM5LDEzOV0sZGFya2dyZXk6WzE2OSwxNjksMTY5XSxkYXJrZ3JlZW46WzAsMTAwLDBdLGRhcmtraGFraTpbMTg5LDE4MywxMDddLGRhcmttYWdlbnRhOlsxMzksMCwxMzldLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDddLGRhcmtvcmFuZ2U6WzI1NSwxNDAsMF0sZGFya29yY2hpZDpbMTUzLDUwLDIwNF0sZGFya3JlZDpbMTM5LDAsMF0sZGFya3NhbG1vbjpbMjMzLDE1MCwxMjJdLGRhcmt2aW9sZXQ6WzE0OCwwLDIxMV0sZnVjaHNpYTpbMjU1LDAsMjU1XSxnb2xkOlsyNTUsMjE1LDBdLGdyZWVuOlswLDEyOCwwXSxpbmRpZ286Wzc1LDAsMTMwXSxraGFraTpbMjQwLDIzMCwxNDBdLGxpZ2h0Ymx1ZTpbMTczLDIxNiwyMzBdLGxpZ2h0Y3lhbjpbMjI0LDI1NSwyNTVdLGxpZ2h0Z3JlZW46WzE0NCwyMzgsMTQ0XSxsaWdodGdyZXk6WzIxMSwyMTEsMjExXSxsaWdodHBpbms6WzI1NSwxODIsMTkzXSxsaWdodHllbGxvdzpbMjU1LDI1NSwyMjRdLGxpbWU6WzAsMjU1LDBdLG1hZ2VudGE6WzI1NSwwLDI1NV0sbWFyb29uOlsxMjgsMCwwXSxuYXZ5OlswLDAsMTI4XSxvbGl2ZTpbMTI4LDEyOCwwXSxvcmFuZ2U6WzI1NSwxNjUsMF0scGluazpbMjU1LDE5MiwyMDNdLHB1cnBsZTpbMTI4LDAsMTI4XSx2aW9sZXQ6WzEyOCwwLDEyOF0scmVkOlsyNTUsMCwwXSxzaWx2ZXI6WzE5MiwxOTIsMTkyXSx3aGl0ZTpbMjU1LDI1NSwyNTVdLHllbGxvdzpbMjU1LDI1NSwwXX19KShqUXVlcnkpO1xuXG4vLyB0aGUgYWN0dWFsIEZsb3QgY29kZVxuKGZ1bmN0aW9uKCQpIHtcblxuXHQvLyBDYWNoZSB0aGUgcHJvdG90eXBlIGhhc093blByb3BlcnR5IGZvciBmYXN0ZXIgYWNjZXNzXG5cblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuICAgIC8vIEEgc2hpbSB0byBwcm92aWRlICdkZXRhY2gnIHRvIGpRdWVyeSB2ZXJzaW9ucyBwcmlvciB0byAxLjQuICBVc2luZyBhIERPTVxuICAgIC8vIG9wZXJhdGlvbiBwcm9kdWNlcyB0aGUgc2FtZSBlZmZlY3QgYXMgZGV0YWNoLCBpLmUuIHJlbW92aW5nIHRoZSBlbGVtZW50XG4gICAgLy8gd2l0aG91dCB0b3VjaGluZyBpdHMgalF1ZXJ5IGRhdGEuXG5cbiAgICAvLyBEbyBub3QgbWVyZ2UgdGhpcyBpbnRvIEZsb3QgMC45LCBzaW5jZSBpdCByZXF1aXJlcyBqUXVlcnkgMS40LjQrLlxuXG4gICAgaWYgKCEkLmZuLmRldGFjaCkge1xuICAgICAgICAkLmZuLmRldGFjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdGhpcyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0Ly8gVGhlIENhbnZhcyBvYmplY3QgaXMgYSB3cmFwcGVyIGFyb3VuZCBhbiBIVE1MNSA8Y2FudmFzPiB0YWcuXG5cdC8vXG5cdC8vIEBjb25zdHJ1Y3RvclxuXHQvLyBAcGFyYW0ge3N0cmluZ30gY2xzIExpc3Qgb2YgY2xhc3NlcyB0byBhcHBseSB0byB0aGUgY2FudmFzLlxuXHQvLyBAcGFyYW0ge2VsZW1lbnR9IGNvbnRhaW5lciBFbGVtZW50IG9udG8gd2hpY2ggdG8gYXBwZW5kIHRoZSBjYW52YXMuXG5cdC8vXG5cdC8vIFJlcXVpcmluZyBhIGNvbnRhaW5lciBpcyBhIGxpdHRsZSBpZmZ5LCBidXQgdW5mb3J0dW5hdGVseSBjYW52YXNcblx0Ly8gb3BlcmF0aW9ucyBkb24ndCB3b3JrIHVubGVzcyB0aGUgY2FudmFzIGlzIGF0dGFjaGVkIHRvIHRoZSBET00uXG5cblx0ZnVuY3Rpb24gQ2FudmFzKGNscywgY29udGFpbmVyKSB7XG5cblx0XHR2YXIgZWxlbWVudCA9IGNvbnRhaW5lci5jaGlsZHJlbihcIi5cIiArIGNscylbMF07XG5cblx0XHRpZiAoZWxlbWVudCA9PSBudWxsKSB7XG5cblx0XHRcdGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHRcdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBjbHM7XG5cblx0XHRcdCQoZWxlbWVudCkuY3NzKHsgZGlyZWN0aW9uOiBcImx0clwiLCBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCBsZWZ0OiAwLCB0b3A6IDAgfSlcblx0XHRcdFx0LmFwcGVuZFRvKGNvbnRhaW5lcik7XG5cblx0XHRcdC8vIElmIEhUTUw1IENhbnZhcyBpc24ndCBhdmFpbGFibGUsIGZhbGwgYmFjayB0byBbRXh8Rmxhc2hdY2FudmFzXG5cblx0XHRcdGlmICghZWxlbWVudC5nZXRDb250ZXh0KSB7XG5cdFx0XHRcdGlmICh3aW5kb3cuR192bWxDYW52YXNNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0ZWxlbWVudCA9IHdpbmRvdy5HX3ZtbENhbnZhc01hbmFnZXIuaW5pdEVsZW1lbnQoZWxlbWVudCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2FudmFzIGlzIG5vdCBhdmFpbGFibGUuIElmIHlvdSdyZSB1c2luZyBJRSB3aXRoIGEgZmFsbC1iYWNrIHN1Y2ggYXMgRXhjYW52YXMsIHRoZW4gdGhlcmUncyBlaXRoZXIgYSBtaXN0YWtlIGluIHlvdXIgY29uZGl0aW9uYWwgaW5jbHVkZSwgb3IgdGhlIHBhZ2UgaGFzIG5vIERPQ1RZUEUgYW5kIGlzIHJlbmRlcmluZyBpbiBRdWlya3MgTW9kZS5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG5cdFx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQgPSBlbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcblxuXHRcdC8vIERldGVybWluZSB0aGUgc2NyZWVuJ3MgcmF0aW8gb2YgcGh5c2ljYWwgdG8gZGV2aWNlLWluZGVwZW5kZW50XG5cdFx0Ly8gcGl4ZWxzLiAgVGhpcyBpcyB0aGUgcmF0aW8gYmV0d2VlbiB0aGUgY2FudmFzIHdpZHRoIHRoYXQgdGhlIGJyb3dzZXJcblx0XHQvLyBhZHZlcnRpc2VzIGFuZCB0aGUgbnVtYmVyIG9mIHBpeGVscyBhY3R1YWxseSBwcmVzZW50IGluIHRoYXQgc3BhY2UuXG5cblx0XHQvLyBUaGUgaVBob25lIDQsIGZvciBleGFtcGxlLCBoYXMgYSBkZXZpY2UtaW5kZXBlbmRlbnQgd2lkdGggb2YgMzIwcHgsXG5cdFx0Ly8gYnV0IGl0cyBzY3JlZW4gaXMgYWN0dWFsbHkgNjQwcHggd2lkZS4gIEl0IHRoZXJlZm9yZSBoYXMgYSBwaXhlbFxuXHRcdC8vIHJhdGlvIG9mIDIsIHdoaWxlIG1vc3Qgbm9ybWFsIGRldmljZXMgaGF2ZSBhIHJhdGlvIG9mIDEuXG5cblx0XHR2YXIgZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsXG5cdFx0XHRiYWNraW5nU3RvcmVSYXRpbyA9XG5cdFx0XHRcdGNvbnRleHQud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuXHRcdFx0XHRjb250ZXh0Lm1vekJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcblx0XHRcdFx0Y29udGV4dC5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcblx0XHRcdFx0Y29udGV4dC5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuXHRcdFx0XHRjb250ZXh0LmJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgMTtcblxuXHRcdHRoaXMucGl4ZWxSYXRpbyA9IGRldmljZVBpeGVsUmF0aW8gLyBiYWNraW5nU3RvcmVSYXRpbztcblxuXHRcdC8vIFNpemUgdGhlIGNhbnZhcyB0byBtYXRjaCB0aGUgaW50ZXJuYWwgZGltZW5zaW9ucyBvZiBpdHMgY29udGFpbmVyXG5cblx0XHR0aGlzLnJlc2l6ZShjb250YWluZXIud2lkdGgoKSwgY29udGFpbmVyLmhlaWdodCgpKTtcblxuXHRcdC8vIENvbGxlY3Rpb24gb2YgSFRNTCBkaXYgbGF5ZXJzIGZvciB0ZXh0IG92ZXJsYWlkIG9udG8gdGhlIGNhbnZhc1xuXG5cdFx0dGhpcy50ZXh0Q29udGFpbmVyID0gbnVsbDtcblx0XHR0aGlzLnRleHQgPSB7fTtcblxuXHRcdC8vIENhY2hlIG9mIHRleHQgZnJhZ21lbnRzIGFuZCBtZXRyaWNzLCBzbyB3ZSBjYW4gYXZvaWQgZXhwZW5zaXZlbHlcblx0XHQvLyByZS1jYWxjdWxhdGluZyB0aGVtIHdoZW4gdGhlIHBsb3QgaXMgcmUtcmVuZGVyZWQgaW4gYSBsb29wLlxuXG5cdFx0dGhpcy5fdGV4dENhY2hlID0ge307XG5cdH1cblxuXHQvLyBSZXNpemVzIHRoZSBjYW52YXMgdG8gdGhlIGdpdmVuIGRpbWVuc2lvbnMuXG5cdC8vXG5cdC8vIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBOZXcgd2lkdGggb2YgdGhlIGNhbnZhcywgaW4gcGl4ZWxzLlxuXHQvLyBAcGFyYW0ge251bWJlcn0gd2lkdGggTmV3IGhlaWdodCBvZiB0aGUgY2FudmFzLCBpbiBwaXhlbHMuXG5cblx0Q2FudmFzLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG5cblx0XHRpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBkaW1lbnNpb25zIGZvciBwbG90LCB3aWR0aCA9IFwiICsgd2lkdGggKyBcIiwgaGVpZ2h0ID0gXCIgKyBoZWlnaHQpO1xuXHRcdH1cblxuXHRcdHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LFxuXHRcdFx0Y29udGV4dCA9IHRoaXMuY29udGV4dCxcblx0XHRcdHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW87XG5cblx0XHQvLyBSZXNpemUgdGhlIGNhbnZhcywgaW5jcmVhc2luZyBpdHMgZGVuc2l0eSBiYXNlZCBvbiB0aGUgZGlzcGxheSdzXG5cdFx0Ly8gcGl4ZWwgcmF0aW87IGJhc2ljYWxseSBnaXZpbmcgaXQgbW9yZSBwaXhlbHMgd2l0aG91dCBpbmNyZWFzaW5nIHRoZVxuXHRcdC8vIHNpemUgb2YgaXRzIGVsZW1lbnQsIHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSBmYWN0IHRoYXQgcmV0aW5hXG5cdFx0Ly8gZGlzcGxheXMgaGF2ZSB0aGF0IG1hbnkgbW9yZSBwaXhlbHMgaW4gdGhlIHNhbWUgYWR2ZXJ0aXNlZCBzcGFjZS5cblxuXHRcdC8vIFJlc2l6aW5nIHNob3VsZCByZXNldCB0aGUgc3RhdGUgKGV4Y2FudmFzIHNlZW1zIHRvIGJlIGJ1Z2d5IHRob3VnaClcblxuXHRcdGlmICh0aGlzLndpZHRoICE9IHdpZHRoKSB7XG5cdFx0XHRlbGVtZW50LndpZHRoID0gd2lkdGggKiBwaXhlbFJhdGlvO1xuXHRcdFx0ZWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuXHRcdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmhlaWdodCAhPSBoZWlnaHQpIHtcblx0XHRcdGVsZW1lbnQuaGVpZ2h0ID0gaGVpZ2h0ICogcGl4ZWxSYXRpbztcblx0XHRcdGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0fVxuXG5cdFx0Ly8gU2F2ZSB0aGUgY29udGV4dCwgc28gd2UgY2FuIHJlc2V0IGluIGNhc2Ugd2UgZ2V0IHJlcGxvdHRlZC4gIFRoZVxuXHRcdC8vIHJlc3RvcmUgZW5zdXJlIHRoYXQgd2UncmUgcmVhbGx5IGJhY2sgYXQgdGhlIGluaXRpYWwgc3RhdGUsIGFuZFxuXHRcdC8vIHNob3VsZCBiZSBzYWZlIGV2ZW4gaWYgd2UgaGF2ZW4ndCBzYXZlZCB0aGUgaW5pdGlhbCBzdGF0ZSB5ZXQuXG5cblx0XHRjb250ZXh0LnJlc3RvcmUoKTtcblx0XHRjb250ZXh0LnNhdmUoKTtcblxuXHRcdC8vIFNjYWxlIHRoZSBjb29yZGluYXRlIHNwYWNlIHRvIG1hdGNoIHRoZSBkaXNwbGF5IGRlbnNpdHk7IHNvIGV2ZW4gdGhvdWdoIHdlXG5cdFx0Ly8gbWF5IGhhdmUgdHdpY2UgYXMgbWFueSBwaXhlbHMsIHdlIHN0aWxsIHdhbnQgbGluZXMgYW5kIG90aGVyIGRyYXdpbmcgdG9cblx0XHQvLyBhcHBlYXIgYXQgdGhlIHNhbWUgc2l6ZTsgdGhlIGV4dHJhIHBpeGVscyB3aWxsIGp1c3QgbWFrZSB0aGVtIGNyaXNwZXIuXG5cblx0XHRjb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuXHR9O1xuXG5cdC8vIENsZWFycyB0aGUgZW50aXJlIGNhbnZhcyBhcmVhLCBub3QgaW5jbHVkaW5nIGFueSBvdmVybGFpZCBIVE1MIHRleHRcblxuXHRDYW52YXMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cdH07XG5cblx0Ly8gRmluaXNoZXMgcmVuZGVyaW5nIHRoZSBjYW52YXMsIGluY2x1ZGluZyBtYW5hZ2luZyB0aGUgdGV4dCBvdmVybGF5LlxuXG5cdENhbnZhcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgY2FjaGUgPSB0aGlzLl90ZXh0Q2FjaGU7XG5cblx0XHQvLyBGb3IgZWFjaCB0ZXh0IGxheWVyLCBhZGQgZWxlbWVudHMgbWFya2VkIGFzIGFjdGl2ZSB0aGF0IGhhdmVuJ3Rcblx0XHQvLyBhbHJlYWR5IGJlZW4gcmVuZGVyZWQsIGFuZCByZW1vdmUgdGhvc2UgdGhhdCBhcmUgbm8gbG9uZ2VyIGFjdGl2ZS5cblxuXHRcdGZvciAodmFyIGxheWVyS2V5IGluIGNhY2hlKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjYWNoZSwgbGF5ZXJLZXkpKSB7XG5cblx0XHRcdFx0dmFyIGxheWVyID0gdGhpcy5nZXRUZXh0TGF5ZXIobGF5ZXJLZXkpLFxuXHRcdFx0XHRcdGxheWVyQ2FjaGUgPSBjYWNoZVtsYXllcktleV07XG5cblx0XHRcdFx0bGF5ZXIuaGlkZSgpO1xuXG5cdFx0XHRcdGZvciAodmFyIHN0eWxlS2V5IGluIGxheWVyQ2FjaGUpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChsYXllckNhY2hlLCBzdHlsZUtleSkpIHtcblx0XHRcdFx0XHRcdHZhciBzdHlsZUNhY2hlID0gbGF5ZXJDYWNoZVtzdHlsZUtleV07XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gc3R5bGVDYWNoZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzdHlsZUNhY2hlLCBrZXkpKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgcG9zaXRpb25zID0gc3R5bGVDYWNoZVtrZXldLnBvc2l0aW9ucztcblxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBwb3NpdGlvbjsgcG9zaXRpb24gPSBwb3NpdGlvbnNbaV07IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBvc2l0aW9uLmFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXBvc2l0aW9uLnJlbmRlcmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGF5ZXIuYXBwZW5kKHBvc2l0aW9uLmVsZW1lbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uLnJlbmRlcmVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb25zLnNwbGljZShpLS0sIDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocG9zaXRpb24ucmVuZGVyZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3NpdGlvbi5lbGVtZW50LmRldGFjaCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBvc2l0aW9ucy5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIHN0eWxlQ2FjaGVba2V5XTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsYXllci5zaG93KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIENyZWF0ZXMgKGlmIG5lY2Vzc2FyeSkgYW5kIHJldHVybnMgdGhlIHRleHQgb3ZlcmxheSBjb250YWluZXIuXG5cdC8vXG5cdC8vIEBwYXJhbSB7c3RyaW5nfSBjbGFzc2VzIFN0cmluZyBvZiBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdXNlZCB0b1xuXHQvLyAgICAgdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHRleHQgbGF5ZXIuXG5cdC8vIEByZXR1cm4ge29iamVjdH0gVGhlIGpRdWVyeS13cmFwcGVkIHRleHQtbGF5ZXIgZGl2LlxuXG5cdENhbnZhcy5wcm90b3R5cGUuZ2V0VGV4dExheWVyID0gZnVuY3Rpb24oY2xhc3Nlcykge1xuXG5cdFx0dmFyIGxheWVyID0gdGhpcy50ZXh0W2NsYXNzZXNdO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0ZXh0IGxheWVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcblxuXHRcdGlmIChsYXllciA9PSBudWxsKSB7XG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgdGV4dCBsYXllciBjb250YWluZXIsIGlmIGl0IGRvZXNuJ3QgZXhpc3RcblxuXHRcdFx0aWYgKHRoaXMudGV4dENvbnRhaW5lciA9PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMudGV4dENvbnRhaW5lciA9ICQoXCI8ZGl2IGNsYXNzPSdmbG90LXRleHQnPjwvZGl2PlwiKVxuXHRcdFx0XHRcdC5jc3Moe1xuXHRcdFx0XHRcdFx0cG9zaXRpb246IFwiYWJzb2x1dGVcIixcblx0XHRcdFx0XHRcdHRvcDogMCxcblx0XHRcdFx0XHRcdGxlZnQ6IDAsXG5cdFx0XHRcdFx0XHRib3R0b206IDAsXG5cdFx0XHRcdFx0XHRyaWdodDogMCxcblx0XHRcdFx0XHRcdCdmb250LXNpemUnOiBcInNtYWxsZXJcIixcblx0XHRcdFx0XHRcdGNvbG9yOiBcIiM1NDU0NTRcIlxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Lmluc2VydEFmdGVyKHRoaXMuZWxlbWVudCk7XG5cdFx0XHR9XG5cblx0XHRcdGxheWVyID0gdGhpcy50ZXh0W2NsYXNzZXNdID0gJChcIjxkaXY+PC9kaXY+XCIpXG5cdFx0XHRcdC5hZGRDbGFzcyhjbGFzc2VzKVxuXHRcdFx0XHQuY3NzKHtcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuXHRcdFx0XHRcdHRvcDogMCxcblx0XHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHRcdGJvdHRvbTogMCxcblx0XHRcdFx0XHRyaWdodDogMFxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYXBwZW5kVG8odGhpcy50ZXh0Q29udGFpbmVyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbGF5ZXI7XG5cdH07XG5cblx0Ly8gQ3JlYXRlcyAoaWYgbmVjZXNzYXJ5KSBhbmQgcmV0dXJucyBhIHRleHQgaW5mbyBvYmplY3QuXG5cdC8vXG5cdC8vIFRoZSBvYmplY3QgbG9va3MgbGlrZSB0aGlzOlxuXHQvL1xuXHQvLyB7XG5cdC8vICAgICB3aWR0aDogV2lkdGggb2YgdGhlIHRleHQncyB3cmFwcGVyIGRpdi5cblx0Ly8gICAgIGhlaWdodDogSGVpZ2h0IG9mIHRoZSB0ZXh0J3Mgd3JhcHBlciBkaXYuXG5cdC8vICAgICBlbGVtZW50OiBUaGUgalF1ZXJ5LXdyYXBwZWQgSFRNTCBkaXYgY29udGFpbmluZyB0aGUgdGV4dC5cblx0Ly8gICAgIHBvc2l0aW9uczogQXJyYXkgb2YgcG9zaXRpb25zIGF0IHdoaWNoIHRoaXMgdGV4dCBpcyBkcmF3bi5cblx0Ly8gfVxuXHQvL1xuXHQvLyBUaGUgcG9zaXRpb25zIGFycmF5IGNvbnRhaW5zIG9iamVjdHMgdGhhdCBsb29rIGxpa2UgdGhpczpcblx0Ly9cblx0Ly8ge1xuXHQvLyAgICAgYWN0aXZlOiBGbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGUgdGV4dCBzaG91bGQgYmUgdmlzaWJsZS5cblx0Ly8gICAgIHJlbmRlcmVkOiBGbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGUgdGV4dCBpcyBjdXJyZW50bHkgdmlzaWJsZS5cblx0Ly8gICAgIGVsZW1lbnQ6IFRoZSBqUXVlcnktd3JhcHBlZCBIVE1MIGRpdiBjb250YWluaW5nIHRoZSB0ZXh0LlxuXHQvLyAgICAgeDogWCBjb29yZGluYXRlIGF0IHdoaWNoIHRvIGRyYXcgdGhlIHRleHQuXG5cdC8vICAgICB5OiBZIGNvb3JkaW5hdGUgYXQgd2hpY2ggdG8gZHJhdyB0aGUgdGV4dC5cblx0Ly8gfVxuXHQvL1xuXHQvLyBFYWNoIHBvc2l0aW9uIGFmdGVyIHRoZSBmaXJzdCByZWNlaXZlcyBhIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBlbGVtZW50LlxuXHQvL1xuXHQvLyBUaGUgaWRlYSBpcyB0aGF0IHRoYXQgdGhlIHdpZHRoLCBoZWlnaHQsIGFuZCBnZW5lcmFsICdpZGVudGl0eScgb2YgdGhlXG5cdC8vIHRleHQgaXMgY29uc3RhbnQgbm8gbWF0dGVyIHdoZXJlIGl0IGlzIHBsYWNlZDsgdGhlIHBsYWNlbWVudHMgYXJlIGFcblx0Ly8gc2Vjb25kYXJ5IHByb3BlcnR5LlxuXHQvL1xuXHQvLyBDYW52YXMgbWFpbnRhaW5zIGEgY2FjaGUgb2YgcmVjZW50bHktdXNlZCB0ZXh0IGluZm8gb2JqZWN0czsgZ2V0VGV4dEluZm9cblx0Ly8gZWl0aGVyIHJldHVybnMgdGhlIGNhY2hlZCBlbGVtZW50IG9yIGNyZWF0ZXMgYSBuZXcgZW50cnkuXG5cdC8vXG5cdC8vIEBwYXJhbSB7c3RyaW5nfSBsYXllciBBIHN0cmluZyBvZiBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdW5pcXVlbHlcblx0Ly8gICAgIGlkZW50aWZ5aW5nIHRoZSBsYXllciBjb250YWluaW5nIHRoaXMgdGV4dC5cblx0Ly8gQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dCBzdHJpbmcgdG8gcmV0cmlldmUgaW5mbyBmb3IuXG5cdC8vIEBwYXJhbSB7KHN0cmluZ3xvYmplY3QpPX0gZm9udCBFaXRoZXIgYSBzdHJpbmcgb2Ygc3BhY2Utc2VwYXJhdGVkIENTU1xuXHQvLyAgICAgY2xhc3NlcyBvciBhIGZvbnQtc3BlYyBvYmplY3QsIGRlZmluaW5nIHRoZSB0ZXh0J3MgZm9udCBhbmQgc3R5bGUuXG5cdC8vIEBwYXJhbSB7bnVtYmVyPX0gYW5nbGUgQW5nbGUgYXQgd2hpY2ggdG8gcm90YXRlIHRoZSB0ZXh0LCBpbiBkZWdyZWVzLlxuXHQvLyAgICAgQW5nbGUgaXMgY3VycmVudGx5IHVudXNlZCwgaXQgd2lsbCBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgZnV0dXJlLlxuXHQvLyBAcGFyYW0ge251bWJlcj19IHdpZHRoIE1heGltdW0gd2lkdGggb2YgdGhlIHRleHQgYmVmb3JlIGl0IHdyYXBzLlxuXHQvLyBAcmV0dXJuIHtvYmplY3R9IGEgdGV4dCBpbmZvIG9iamVjdC5cblxuXHRDYW52YXMucHJvdG90eXBlLmdldFRleHRJbmZvID0gZnVuY3Rpb24obGF5ZXIsIHRleHQsIGZvbnQsIGFuZ2xlLCB3aWR0aCkge1xuXG5cdFx0dmFyIHRleHRTdHlsZSwgbGF5ZXJDYWNoZSwgc3R5bGVDYWNoZSwgaW5mbztcblxuXHRcdC8vIENhc3QgdGhlIHZhbHVlIHRvIGEgc3RyaW5nLCBpbiBjYXNlIHdlIHdlcmUgZ2l2ZW4gYSBudW1iZXIgb3Igc3VjaFxuXG5cdFx0dGV4dCA9IFwiXCIgKyB0ZXh0O1xuXG5cdFx0Ly8gSWYgdGhlIGZvbnQgaXMgYSBmb250LXNwZWMgb2JqZWN0LCBnZW5lcmF0ZSBhIENTUyBmb250IGRlZmluaXRpb25cblxuXHRcdGlmICh0eXBlb2YgZm9udCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0dGV4dFN0eWxlID0gZm9udC5zdHlsZSArIFwiIFwiICsgZm9udC52YXJpYW50ICsgXCIgXCIgKyBmb250LndlaWdodCArIFwiIFwiICsgZm9udC5zaXplICsgXCJweC9cIiArIGZvbnQubGluZUhlaWdodCArIFwicHggXCIgKyBmb250LmZhbWlseTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGV4dFN0eWxlID0gZm9udDtcblx0XHR9XG5cblx0XHQvLyBSZXRyaWV2ZSAob3IgY3JlYXRlKSB0aGUgY2FjaGUgZm9yIHRoZSB0ZXh0J3MgbGF5ZXIgYW5kIHN0eWxlc1xuXG5cdFx0bGF5ZXJDYWNoZSA9IHRoaXMuX3RleHRDYWNoZVtsYXllcl07XG5cblx0XHRpZiAobGF5ZXJDYWNoZSA9PSBudWxsKSB7XG5cdFx0XHRsYXllckNhY2hlID0gdGhpcy5fdGV4dENhY2hlW2xheWVyXSA9IHt9O1xuXHRcdH1cblxuXHRcdHN0eWxlQ2FjaGUgPSBsYXllckNhY2hlW3RleHRTdHlsZV07XG5cblx0XHRpZiAoc3R5bGVDYWNoZSA9PSBudWxsKSB7XG5cdFx0XHRzdHlsZUNhY2hlID0gbGF5ZXJDYWNoZVt0ZXh0U3R5bGVdID0ge307XG5cdFx0fVxuXG5cdFx0aW5mbyA9IHN0eWxlQ2FjaGVbdGV4dF07XG5cblx0XHQvLyBJZiB3ZSBjYW4ndCBmaW5kIGEgbWF0Y2hpbmcgZWxlbWVudCBpbiBvdXIgY2FjaGUsIGNyZWF0ZSBhIG5ldyBvbmVcblxuXHRcdGlmIChpbmZvID09IG51bGwpIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSAkKFwiPGRpdj48L2Rpdj5cIikuaHRtbCh0ZXh0KVxuXHRcdFx0XHQuY3NzKHtcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuXHRcdFx0XHRcdCdtYXgtd2lkdGgnOiB3aWR0aCxcblx0XHRcdFx0XHR0b3A6IC05OTk5XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hcHBlbmRUbyh0aGlzLmdldFRleHRMYXllcihsYXllcikpO1xuXG5cdFx0XHRpZiAodHlwZW9mIGZvbnQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRcdGZvbnQ6IHRleHRTdHlsZSxcblx0XHRcdFx0XHRjb2xvcjogZm9udC5jb2xvclxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGZvbnQgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcyhmb250KTtcblx0XHRcdH1cblxuXHRcdFx0aW5mbyA9IHN0eWxlQ2FjaGVbdGV4dF0gPSB7XG5cdFx0XHRcdHdpZHRoOiBlbGVtZW50Lm91dGVyV2lkdGgodHJ1ZSksXG5cdFx0XHRcdGhlaWdodDogZWxlbWVudC5vdXRlckhlaWdodCh0cnVlKSxcblx0XHRcdFx0ZWxlbWVudDogZWxlbWVudCxcblx0XHRcdFx0cG9zaXRpb25zOiBbXVxuXHRcdFx0fTtcblxuXHRcdFx0ZWxlbWVudC5kZXRhY2goKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaW5mbztcblx0fTtcblxuXHQvLyBBZGRzIGEgdGV4dCBzdHJpbmcgdG8gdGhlIGNhbnZhcyB0ZXh0IG92ZXJsYXkuXG5cdC8vXG5cdC8vIFRoZSB0ZXh0IGlzbid0IGRyYXduIGltbWVkaWF0ZWx5OyBpdCBpcyBtYXJrZWQgYXMgcmVuZGVyaW5nLCB3aGljaCB3aWxsXG5cdC8vIHJlc3VsdCBpbiBpdHMgYWRkaXRpb24gdG8gdGhlIGNhbnZhcyBvbiB0aGUgbmV4dCByZW5kZXIgcGFzcy5cblx0Ly9cblx0Ly8gQHBhcmFtIHtzdHJpbmd9IGxheWVyIEEgc3RyaW5nIG9mIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB1bmlxdWVseVxuXHQvLyAgICAgaWRlbnRpZnlpbmcgdGhlIGxheWVyIGNvbnRhaW5pbmcgdGhpcyB0ZXh0LlxuXHQvLyBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUgYXQgd2hpY2ggdG8gZHJhdyB0aGUgdGV4dC5cblx0Ly8gQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlIGF0IHdoaWNoIHRvIGRyYXcgdGhlIHRleHQuXG5cdC8vIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQgc3RyaW5nIHRvIGRyYXcuXG5cdC8vIEBwYXJhbSB7KHN0cmluZ3xvYmplY3QpPX0gZm9udCBFaXRoZXIgYSBzdHJpbmcgb2Ygc3BhY2Utc2VwYXJhdGVkIENTU1xuXHQvLyAgICAgY2xhc3NlcyBvciBhIGZvbnQtc3BlYyBvYmplY3QsIGRlZmluaW5nIHRoZSB0ZXh0J3MgZm9udCBhbmQgc3R5bGUuXG5cdC8vIEBwYXJhbSB7bnVtYmVyPX0gYW5nbGUgQW5nbGUgYXQgd2hpY2ggdG8gcm90YXRlIHRoZSB0ZXh0LCBpbiBkZWdyZWVzLlxuXHQvLyAgICAgQW5nbGUgaXMgY3VycmVudGx5IHVudXNlZCwgaXQgd2lsbCBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgZnV0dXJlLlxuXHQvLyBAcGFyYW0ge251bWJlcj19IHdpZHRoIE1heGltdW0gd2lkdGggb2YgdGhlIHRleHQgYmVmb3JlIGl0IHdyYXBzLlxuXHQvLyBAcGFyYW0ge3N0cmluZz19IGhhbGlnbiBIb3Jpem9udGFsIGFsaWdubWVudCBvZiB0aGUgdGV4dDsgZWl0aGVyIFwibGVmdFwiLFxuXHQvLyAgICAgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIuXG5cdC8vIEBwYXJhbSB7c3RyaW5nPX0gdmFsaWduIFZlcnRpY2FsIGFsaWdubWVudCBvZiB0aGUgdGV4dDsgZWl0aGVyIFwidG9wXCIsXG5cdC8vICAgICBcIm1pZGRsZVwiIG9yIFwiYm90dG9tXCIuXG5cblx0Q2FudmFzLnByb3RvdHlwZS5hZGRUZXh0ID0gZnVuY3Rpb24obGF5ZXIsIHgsIHksIHRleHQsIGZvbnQsIGFuZ2xlLCB3aWR0aCwgaGFsaWduLCB2YWxpZ24pIHtcblxuXHRcdHZhciBpbmZvID0gdGhpcy5nZXRUZXh0SW5mbyhsYXllciwgdGV4dCwgZm9udCwgYW5nbGUsIHdpZHRoKSxcblx0XHRcdHBvc2l0aW9ucyA9IGluZm8ucG9zaXRpb25zO1xuXG5cdFx0Ly8gVHdlYWsgdGhlIGRpdidzIHBvc2l0aW9uIHRvIG1hdGNoIHRoZSB0ZXh0J3MgYWxpZ25tZW50XG5cblx0XHRpZiAoaGFsaWduID09IFwiY2VudGVyXCIpIHtcblx0XHRcdHggLT0gaW5mby53aWR0aCAvIDI7XG5cdFx0fSBlbHNlIGlmIChoYWxpZ24gPT0gXCJyaWdodFwiKSB7XG5cdFx0XHR4IC09IGluZm8ud2lkdGg7XG5cdFx0fVxuXG5cdFx0aWYgKHZhbGlnbiA9PSBcIm1pZGRsZVwiKSB7XG5cdFx0XHR5IC09IGluZm8uaGVpZ2h0IC8gMjtcblx0XHR9IGVsc2UgaWYgKHZhbGlnbiA9PSBcImJvdHRvbVwiKSB7XG5cdFx0XHR5IC09IGluZm8uaGVpZ2h0O1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSB3aGV0aGVyIHRoaXMgdGV4dCBhbHJlYWR5IGV4aXN0cyBhdCB0aGlzIHBvc2l0aW9uLlxuXHRcdC8vIElmIHNvLCBtYXJrIGl0IGZvciBpbmNsdXNpb24gaW4gdGhlIG5leHQgcmVuZGVyIHBhc3MuXG5cblx0XHRmb3IgKHZhciBpID0gMCwgcG9zaXRpb247IHBvc2l0aW9uID0gcG9zaXRpb25zW2ldOyBpKyspIHtcblx0XHRcdGlmIChwb3NpdGlvbi54ID09IHggJiYgcG9zaXRpb24ueSA9PSB5KSB7XG5cdFx0XHRcdHBvc2l0aW9uLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgdGV4dCBkb2Vzbid0IGV4aXN0IGF0IHRoaXMgcG9zaXRpb24sIGNyZWF0ZSBhIG5ldyBlbnRyeVxuXG5cdFx0Ly8gRm9yIHRoZSB2ZXJ5IGZpcnN0IHBvc2l0aW9uIHdlJ2xsIHJlLXVzZSB0aGUgb3JpZ2luYWwgZWxlbWVudCxcblx0XHQvLyB3aGlsZSBmb3Igc3Vic2VxdWVudCBvbmVzIHdlJ2xsIGNsb25lIGl0LlxuXG5cdFx0cG9zaXRpb24gPSB7XG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0XHRyZW5kZXJlZDogZmFsc2UsXG5cdFx0XHRlbGVtZW50OiBwb3NpdGlvbnMubGVuZ3RoID8gaW5mby5lbGVtZW50LmNsb25lKCkgOiBpbmZvLmVsZW1lbnQsXG5cdFx0XHR4OiB4LFxuXHRcdFx0eTogeVxuXHRcdH07XG5cblx0XHRwb3NpdGlvbnMucHVzaChwb3NpdGlvbik7XG5cblx0XHQvLyBNb3ZlIHRoZSBlbGVtZW50IHRvIGl0cyBmaW5hbCBwb3NpdGlvbiB3aXRoaW4gdGhlIGNvbnRhaW5lclxuXG5cdFx0cG9zaXRpb24uZWxlbWVudC5jc3Moe1xuXHRcdFx0dG9wOiBNYXRoLnJvdW5kKHkpLFxuXHRcdFx0bGVmdDogTWF0aC5yb3VuZCh4KSxcblx0XHRcdCd0ZXh0LWFsaWduJzogaGFsaWduXHQvLyBJbiBjYXNlIHRoZSB0ZXh0IHdyYXBzXG5cdFx0fSk7XG5cdH07XG5cblx0Ly8gUmVtb3ZlcyBvbmUgb3IgbW9yZSB0ZXh0IHN0cmluZ3MgZnJvbSB0aGUgY2FudmFzIHRleHQgb3ZlcmxheS5cblx0Ly9cblx0Ly8gSWYgbm8gcGFyYW1ldGVycyBhcmUgZ2l2ZW4sIGFsbCB0ZXh0IHdpdGhpbiB0aGUgbGF5ZXIgaXMgcmVtb3ZlZC5cblx0Ly9cblx0Ly8gTm90ZSB0aGF0IHRoZSB0ZXh0IGlzIG5vdCBpbW1lZGlhdGVseSByZW1vdmVkOyBpdCBpcyBzaW1wbHkgbWFya2VkIGFzXG5cdC8vIGluYWN0aXZlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBpdHMgcmVtb3ZhbCBvbiB0aGUgbmV4dCByZW5kZXIgcGFzcy5cblx0Ly8gVGhpcyBhdm9pZHMgdGhlIHBlcmZvcm1hbmNlIHBlbmFsdHkgZm9yICdjbGVhciBhbmQgcmVkcmF3JyBiZWhhdmlvcixcblx0Ly8gd2hlcmUgd2UgcG90ZW50aWFsbHkgZ2V0IHJpZCBvZiBhbGwgdGV4dCBvbiBhIGxheWVyLCBidXQgd2lsbCBsaWtlbHlcblx0Ly8gYWRkIGJhY2sgbW9zdCBvciBhbGwgb2YgaXQgbGF0ZXIsIGFzIHdoZW4gcmVkcmF3aW5nIGF4ZXMsIGZvciBleGFtcGxlLlxuXHQvL1xuXHQvLyBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgQSBzdHJpbmcgb2Ygc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHVuaXF1ZWx5XG5cdC8vICAgICBpZGVudGlmeWluZyB0aGUgbGF5ZXIgY29udGFpbmluZyB0aGlzIHRleHQuXG5cdC8vIEBwYXJhbSB7bnVtYmVyPX0geCBYIGNvb3JkaW5hdGUgb2YgdGhlIHRleHQuXG5cdC8vIEBwYXJhbSB7bnVtYmVyPX0geSBZIGNvb3JkaW5hdGUgb2YgdGhlIHRleHQuXG5cdC8vIEBwYXJhbSB7c3RyaW5nPX0gdGV4dCBUZXh0IHN0cmluZyB0byByZW1vdmUuXG5cdC8vIEBwYXJhbSB7KHN0cmluZ3xvYmplY3QpPX0gZm9udCBFaXRoZXIgYSBzdHJpbmcgb2Ygc3BhY2Utc2VwYXJhdGVkIENTU1xuXHQvLyAgICAgY2xhc3NlcyBvciBhIGZvbnQtc3BlYyBvYmplY3QsIGRlZmluaW5nIHRoZSB0ZXh0J3MgZm9udCBhbmQgc3R5bGUuXG5cdC8vIEBwYXJhbSB7bnVtYmVyPX0gYW5nbGUgQW5nbGUgYXQgd2hpY2ggdGhlIHRleHQgaXMgcm90YXRlZCwgaW4gZGVncmVlcy5cblx0Ly8gICAgIEFuZ2xlIGlzIGN1cnJlbnRseSB1bnVzZWQsIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWQgaW4gdGhlIGZ1dHVyZS5cblxuXHRDYW52YXMucHJvdG90eXBlLnJlbW92ZVRleHQgPSBmdW5jdGlvbihsYXllciwgeCwgeSwgdGV4dCwgZm9udCwgYW5nbGUpIHtcblx0XHRpZiAodGV4dCA9PSBudWxsKSB7XG5cdFx0XHR2YXIgbGF5ZXJDYWNoZSA9IHRoaXMuX3RleHRDYWNoZVtsYXllcl07XG5cdFx0XHRpZiAobGF5ZXJDYWNoZSAhPSBudWxsKSB7XG5cdFx0XHRcdGZvciAodmFyIHN0eWxlS2V5IGluIGxheWVyQ2FjaGUpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChsYXllckNhY2hlLCBzdHlsZUtleSkpIHtcblx0XHRcdFx0XHRcdHZhciBzdHlsZUNhY2hlID0gbGF5ZXJDYWNoZVtzdHlsZUtleV07XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gc3R5bGVDYWNoZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzdHlsZUNhY2hlLCBrZXkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHBvc2l0aW9ucyA9IHN0eWxlQ2FjaGVba2V5XS5wb3NpdGlvbnM7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIHBvc2l0aW9uOyBwb3NpdGlvbiA9IHBvc2l0aW9uc1tpXTsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwb3NpdGlvbi5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBvc2l0aW9ucyA9IHRoaXMuZ2V0VGV4dEluZm8obGF5ZXIsIHRleHQsIGZvbnQsIGFuZ2xlKS5wb3NpdGlvbnM7XG5cdFx0XHRmb3IgKHZhciBpID0gMCwgcG9zaXRpb247IHBvc2l0aW9uID0gcG9zaXRpb25zW2ldOyBpKyspIHtcblx0XHRcdFx0aWYgKHBvc2l0aW9uLnggPT0geCAmJiBwb3NpdGlvbi55ID09IHkpIHtcblx0XHRcdFx0XHRwb3NpdGlvbi5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0Ly8gVGhlIHRvcC1sZXZlbCBjb250YWluZXIgZm9yIHRoZSBlbnRpcmUgcGxvdC5cblxuICAgIGZ1bmN0aW9uIFBsb3QocGxhY2Vob2xkZXIsIGRhdGFfLCBvcHRpb25zXywgcGx1Z2lucykge1xuICAgICAgICAvLyBkYXRhIGlzIG9uIHRoZSBmb3JtOlxuICAgICAgICAvLyAgIFsgc2VyaWVzMSwgc2VyaWVzMiAuLi4gXVxuICAgICAgICAvLyB3aGVyZSBzZXJpZXMgaXMgZWl0aGVyIGp1c3QgdGhlIGRhdGEgYXMgWyBbeDEsIHkxXSwgW3gyLCB5Ml0sIC4uLiBdXG4gICAgICAgIC8vIG9yIHsgZGF0YTogWyBbeDEsIHkxXSwgW3gyLCB5Ml0sIC4uLiBdLCBsYWJlbDogXCJzb21lIGxhYmVsXCIsIC4uLiB9XG5cbiAgICAgICAgdmFyIHNlcmllcyA9IFtdLFxuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29sb3IgdGhlbWUgdXNlZCBmb3IgZ3JhcGhzXG4gICAgICAgICAgICAgICAgY29sb3JzOiBbXCIjZWRjMjQwXCIsIFwiI2FmZDhmOFwiLCBcIiNjYjRiNGJcIiwgXCIjNGRhNzRkXCIsIFwiIzk0NDBlZFwiXSxcbiAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbm9Db2x1bW5zOiAxLCAvLyBudW1iZXIgb2YgY29sdW1zIGluIGxlZ2VuZCB0YWJsZVxuICAgICAgICAgICAgICAgICAgICBsYWJlbEZvcm1hdHRlcjogbnVsbCwgLy8gZm46IHN0cmluZyAtPiBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxCb3hCb3JkZXJDb2xvcjogXCIjY2NjXCIsIC8vIGJvcmRlciBjb2xvciBmb3IgdGhlIGxpdHRsZSBsYWJlbCBib3hlc1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IG51bGwsIC8vIGNvbnRhaW5lciAoYXMgalF1ZXJ5IG9iamVjdCkgdG8gcHV0IGxlZ2VuZCBpbiwgbnVsbCBtZWFucyBkZWZhdWx0IG9uIHRvcCBvZiBncmFwaFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJuZVwiLCAvLyBwb3NpdGlvbiBvZiBkZWZhdWx0IGxlZ2VuZCBjb250YWluZXIgd2l0aGluIHBsb3RcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA1LCAvLyBkaXN0YW5jZSBmcm9tIGdyaWQgZWRnZSB0byBkZWZhdWx0IGxlZ2VuZCBjb250YWluZXIgd2l0aGluIHBsb3RcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBudWxsLCAvLyBudWxsIG1lYW5zIGF1dG8tZGV0ZWN0XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRPcGFjaXR5OiAwLjg1LCAvLyBzZXQgdG8gMCB0byBhdm9pZCBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgIHNvcnRlZDogbnVsbCAgICAvLyBkZWZhdWx0IHRvIG5vIGxlZ2VuZCBzb3J0aW5nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB4YXhpczoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBudWxsLCAvLyBudWxsID0gYXV0by1kZXRlY3QsIHRydWUgPSBhbHdheXMsIGZhbHNlID0gbmV2ZXJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYm90dG9tXCIsIC8vIG9yIFwidG9wXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogbnVsbCwgLy8gbnVsbCBvciBcInRpbWVcIlxuICAgICAgICAgICAgICAgICAgICBmb250OiBudWxsLCAvLyBudWxsIChkZXJpdmVkIGZyb20gQ1NTIGluIHBsYWNlaG9sZGVyKSBvciBvYmplY3QgbGlrZSB7IHNpemU6IDExLCBsaW5lSGVpZ2h0OiAxMywgc3R5bGU6IFwiaXRhbGljXCIsIHdlaWdodDogXCJib2xkXCIsIGZhbWlseTogXCJzYW5zLXNlcmlmXCIsIHZhcmlhbnQ6IFwic21hbGwtY2Fwc1wiIH1cbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IG51bGwsIC8vIGJhc2UgY29sb3IsIGxhYmVscywgdGlja3NcbiAgICAgICAgICAgICAgICAgICAgdGlja0NvbG9yOiBudWxsLCAvLyBwb3NzaWJseSBkaWZmZXJlbnQgY29sb3Igb2YgdGlja3MsIGUuZy4gXCJyZ2JhKDAsMCwwLDAuMTUpXCJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBudWxsLCAvLyBudWxsIG9yIGY6IG51bWJlciAtPiBudW1iZXIgdG8gdHJhbnNmb3JtIGF4aXNcbiAgICAgICAgICAgICAgICAgICAgaW52ZXJzZVRyYW5zZm9ybTogbnVsbCwgLy8gaWYgdHJhbnNmb3JtIGlzIHNldCwgdGhpcyBzaG91bGQgYmUgdGhlIGludmVyc2UgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgbWluOiBudWxsLCAvLyBtaW4uIHZhbHVlIHRvIHNob3csIG51bGwgbWVhbnMgc2V0IGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBudWxsLCAvLyBtYXguIHZhbHVlIHRvIHNob3csIG51bGwgbWVhbnMgc2V0IGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICAgICAgICAgICAgYXV0b3NjYWxlTWFyZ2luOiBudWxsLCAvLyBtYXJnaW4gaW4gJSB0byBhZGQgaWYgYXV0by1zZXR0aW5nIG1pbi9tYXhcbiAgICAgICAgICAgICAgICAgICAgdGlja3M6IG51bGwsIC8vIGVpdGhlciBbMSwgM10gb3IgW1sxLCBcImFcIl0sIDNdIG9yIChmbjogYXhpcyBpbmZvIC0+IHRpY2tzKSBvciBhcHAuIG51bWJlciBvZiB0aWNrcyBmb3IgYXV0by10aWNrc1xuICAgICAgICAgICAgICAgICAgICB0aWNrRm9ybWF0dGVyOiBudWxsLCAvLyBmbjogbnVtYmVyIC0+IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICBsYWJlbFdpZHRoOiBudWxsLCAvLyBzaXplIG9mIHRpY2sgbGFiZWxzIGluIHBpeGVsc1xuICAgICAgICAgICAgICAgICAgICBsYWJlbEhlaWdodDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcmVzZXJ2ZVNwYWNlOiBudWxsLCAvLyB3aGV0aGVyIHRvIHJlc2VydmUgc3BhY2UgZXZlbiBpZiBheGlzIGlzbid0IHNob3duXG4gICAgICAgICAgICAgICAgICAgIHRpY2tMZW5ndGg6IG51bGwsIC8vIHNpemUgaW4gcGl4ZWxzIG9mIHRpY2tzLCBvciBcImZ1bGxcIiBmb3Igd2hvbGUgbGluZVxuICAgICAgICAgICAgICAgICAgICBhbGlnblRpY2tzV2l0aEF4aXM6IG51bGwsIC8vIGF4aXMgbnVtYmVyIG9yIG51bGwgZm9yIG5vIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgdGlja0RlY2ltYWxzOiBudWxsLCAvLyBuby4gb2YgZGVjaW1hbHMsIG51bGwgbWVhbnMgYXV0b1xuICAgICAgICAgICAgICAgICAgICB0aWNrU2l6ZTogbnVsbCwgLy8gbnVtYmVyIG9yIFtudW1iZXIsIFwidW5pdFwiXVxuICAgICAgICAgICAgICAgICAgICBtaW5UaWNrU2l6ZTogbnVsbCAvLyBudW1iZXIgb3IgW251bWJlciwgXCJ1bml0XCJdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5YXhpczoge1xuICAgICAgICAgICAgICAgICAgICBhdXRvc2NhbGVNYXJnaW46IDAuMDIsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImxlZnRcIiAvLyBvciBcInJpZ2h0XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHhheGVzOiBbXSxcbiAgICAgICAgICAgICAgICB5YXhlczogW10sXG4gICAgICAgICAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IDIsIC8vIGluIHBpeGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IFwiY2lyY2xlXCIgLy8gb3IgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbGluZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IHB1dCBpbiBzaG93OiBmYWxzZSBzbyB3ZSBjYW4gc2VlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGV0aGVyIGxpbmVzIHdlcmUgYWN0aXZlbHkgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogMiwgLy8gaW4gcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT21pdCAnemVybycsIHNvIHdlIGNhbiBsYXRlciBkZWZhdWx0IGl0cyB2YWx1ZSB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhhdCBvZiB0aGUgJ2ZpbGwnIG9wdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmFyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IDIsIC8vIGluIHBpeGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFyV2lkdGg6IDEsIC8vIGluIHVuaXRzIG9mIHRoZSB4IGF4aXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogXCJsZWZ0XCIsIC8vIFwibGVmdFwiLCBcInJpZ2h0XCIsIG9yIFwiY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgemVybzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dTaXplOiAzLFxuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDb2xvcjogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhYm92ZURhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjNTQ1NDU0XCIsIC8vIHByaW1hcnkgY29sb3IgdXNlZCBmb3Igb3V0bGluZSBhbmQgbGFiZWxzXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbnVsbCwgLy8gbnVsbCBmb3IgdHJhbnNwYXJlbnQsIGVsc2UgY29sb3JcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IG51bGwsIC8vIHNldCBpZiBkaWZmZXJlbnQgZnJvbSB0aGUgZ3JpZCBjb2xvclxuICAgICAgICAgICAgICAgICAgICB0aWNrQ29sb3I6IG51bGwsIC8vIGNvbG9yIGZvciB0aGUgdGlja3MsIGUuZy4gXCJyZ2JhKDAsMCwwLDAuMTUpXCJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwLCAvLyBkaXN0YW5jZSBmcm9tIHRoZSBjYW52YXMgZWRnZSB0byB0aGUgZ3JpZFxuICAgICAgICAgICAgICAgICAgICBsYWJlbE1hcmdpbjogNSwgLy8gaW4gcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgIGF4aXNNYXJnaW46IDgsIC8vIGluIHBpeGVsc1xuICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMiwgLy8gaW4gcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgIG1pbkJvcmRlck1hcmdpbjogbnVsbCwgLy8gaW4gcGl4ZWxzLCBudWxsIG1lYW5zIHRha2VuIGZyb20gcG9pbnRzIHJhZGl1c1xuICAgICAgICAgICAgICAgICAgICBtYXJraW5nczogbnVsbCwgLy8gYXJyYXkgb2YgcmFuZ2VzIG9yIGZuOiBheGVzIC0+IGFycmF5IG9mIHJhbmdlc1xuICAgICAgICAgICAgICAgICAgICBtYXJraW5nc0NvbG9yOiBcIiNmNGY0ZjRcIixcbiAgICAgICAgICAgICAgICAgICAgbWFya2luZ3NMaW5lV2lkdGg6IDIsXG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVyYWN0aXZlIHN0dWZmXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9IaWdobGlnaHQ6IHRydWUsIC8vIGhpZ2hsaWdodCBpbiBjYXNlIG1vdXNlIGlzIG5lYXJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VBY3RpdmVSYWRpdXM6IDEwIC8vIGhvdyBmYXIgdGhlIG1vdXNlIGNhbiBiZSBhd2F5IHRvIGFjdGl2YXRlIGFuIGl0ZW1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGludGVyYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZHJhd092ZXJsYXlJbnRlcnZhbDogMTAwMC82MCAvLyB0aW1lIGJldHdlZW4gdXBkYXRlcywgLTEgbWVhbnMgaW4gc2FtZSBmbG93XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBob29rczoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgIHN1cmZhY2UgPSBudWxsLCAgICAgLy8gdGhlIGNhbnZhcyBmb3IgdGhlIHBsb3QgaXRzZWxmXG4gICAgICAgIG92ZXJsYXkgPSBudWxsLCAgICAgLy8gY2FudmFzIGZvciBpbnRlcmFjdGl2ZSBzdHVmZiBvbiB0b3Agb2YgcGxvdFxuICAgICAgICBldmVudEhvbGRlciA9IG51bGwsIC8vIGpRdWVyeSBvYmplY3QgdGhhdCBldmVudHMgc2hvdWxkIGJlIGJvdW5kIHRvXG4gICAgICAgIGN0eCA9IG51bGwsIG9jdHggPSBudWxsLFxuICAgICAgICB4YXhlcyA9IFtdLCB5YXhlcyA9IFtdLFxuICAgICAgICBwbG90T2Zmc2V0ID0geyBsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCBib3R0b206IDB9LFxuICAgICAgICBwbG90V2lkdGggPSAwLCBwbG90SGVpZ2h0ID0gMCxcbiAgICAgICAgaG9va3MgPSB7XG4gICAgICAgICAgICBwcm9jZXNzT3B0aW9uczogW10sXG4gICAgICAgICAgICBwcm9jZXNzUmF3RGF0YTogW10sXG4gICAgICAgICAgICBwcm9jZXNzRGF0YXBvaW50czogW10sXG4gICAgICAgICAgICBwcm9jZXNzT2Zmc2V0OiBbXSxcbiAgICAgICAgICAgIGRyYXdCYWNrZ3JvdW5kOiBbXSxcbiAgICAgICAgICAgIGRyYXdTZXJpZXM6IFtdLFxuICAgICAgICAgICAgZHJhdzogW10sXG4gICAgICAgICAgICBiaW5kRXZlbnRzOiBbXSxcbiAgICAgICAgICAgIGRyYXdPdmVybGF5OiBbXSxcbiAgICAgICAgICAgIHNodXRkb3duOiBbXVxuICAgICAgICB9LFxuICAgICAgICBwbG90ID0gdGhpcztcblxuICAgICAgICAvLyBwdWJsaWMgZnVuY3Rpb25zXG4gICAgICAgIHBsb3Quc2V0RGF0YSA9IHNldERhdGE7XG4gICAgICAgIHBsb3Quc2V0dXBHcmlkID0gc2V0dXBHcmlkO1xuICAgICAgICBwbG90LmRyYXcgPSBkcmF3O1xuICAgICAgICBwbG90LmdldFBsYWNlaG9sZGVyID0gZnVuY3Rpb24oKSB7IHJldHVybiBwbGFjZWhvbGRlcjsgfTtcbiAgICAgICAgcGxvdC5nZXRDYW52YXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cmZhY2UuZWxlbWVudDsgfTtcbiAgICAgICAgcGxvdC5nZXRQbG90T2Zmc2V0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBwbG90T2Zmc2V0OyB9O1xuICAgICAgICBwbG90LndpZHRoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGxvdFdpZHRoOyB9O1xuICAgICAgICBwbG90LmhlaWdodCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBsb3RIZWlnaHQ7IH07XG4gICAgICAgIHBsb3Qub2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG8gPSBldmVudEhvbGRlci5vZmZzZXQoKTtcbiAgICAgICAgICAgIG8ubGVmdCArPSBwbG90T2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICBvLnRvcCArPSBwbG90T2Zmc2V0LnRvcDtcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9O1xuICAgICAgICBwbG90LmdldERhdGEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXJpZXM7IH07XG4gICAgICAgIHBsb3QuZ2V0QXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSB7fSwgaTtcbiAgICAgICAgICAgICQuZWFjaCh4YXhlcy5jb25jYXQoeWF4ZXMpLCBmdW5jdGlvbiAoXywgYXhpcykge1xuICAgICAgICAgICAgICAgIGlmIChheGlzKVxuICAgICAgICAgICAgICAgICAgICByZXNbYXhpcy5kaXJlY3Rpb24gKyAoYXhpcy5uICE9IDEgPyBheGlzLm4gOiBcIlwiKSArIFwiYXhpc1wiXSA9IGF4aXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIHBsb3QuZ2V0WEF4ZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB4YXhlczsgfTtcbiAgICAgICAgcGxvdC5nZXRZQXhlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHlheGVzOyB9O1xuICAgICAgICBwbG90LmMycCA9IGNhbnZhc1RvQXhpc0Nvb3JkcztcbiAgICAgICAgcGxvdC5wMmMgPSBheGlzVG9DYW52YXNDb29yZHM7XG4gICAgICAgIHBsb3QuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9wdGlvbnM7IH07XG4gICAgICAgIHBsb3QuaGlnaGxpZ2h0ID0gaGlnaGxpZ2h0O1xuICAgICAgICBwbG90LnVuaGlnaGxpZ2h0ID0gdW5oaWdobGlnaHQ7XG4gICAgICAgIHBsb3QudHJpZ2dlclJlZHJhd092ZXJsYXkgPSB0cmlnZ2VyUmVkcmF3T3ZlcmxheTtcbiAgICAgICAgcGxvdC5wb2ludE9mZnNldCA9IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHBhcnNlSW50KHhheGVzW2F4aXNOdW1iZXIocG9pbnQsIFwieFwiKSAtIDFdLnAyYygrcG9pbnQueCkgKyBwbG90T2Zmc2V0LmxlZnQsIDEwKSxcbiAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KHlheGVzW2F4aXNOdW1iZXIocG9pbnQsIFwieVwiKSAtIDFdLnAyYygrcG9pbnQueSkgKyBwbG90T2Zmc2V0LnRvcCwgMTApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBwbG90LnNodXRkb3duID0gc2h1dGRvd247XG4gICAgICAgIHBsb3QuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNodXRkb3duKCk7XG4gICAgICAgICAgICBwbGFjZWhvbGRlci5yZW1vdmVEYXRhKFwicGxvdFwiKS5lbXB0eSgpO1xuXG4gICAgICAgICAgICBzZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgc3VyZmFjZSA9IG51bGw7XG4gICAgICAgICAgICBvdmVybGF5ID0gbnVsbDtcbiAgICAgICAgICAgIGV2ZW50SG9sZGVyID0gbnVsbDtcbiAgICAgICAgICAgIGN0eCA9IG51bGw7XG4gICAgICAgICAgICBvY3R4ID0gbnVsbDtcbiAgICAgICAgICAgIHhheGVzID0gW107XG4gICAgICAgICAgICB5YXhlcyA9IFtdO1xuICAgICAgICAgICAgaG9va3MgPSBudWxsO1xuICAgICAgICAgICAgaGlnaGxpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgcGxvdCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHBsb3QucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBcdHZhciB3aWR0aCA9IHBsYWNlaG9sZGVyLndpZHRoKCksXG4gICAgICAgIFx0XHRoZWlnaHQgPSBwbGFjZWhvbGRlci5oZWlnaHQoKTtcbiAgICAgICAgICAgIHN1cmZhY2UucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgb3ZlcmxheS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gcHVibGljIGF0dHJpYnV0ZXNcbiAgICAgICAgcGxvdC5ob29rcyA9IGhvb2tzO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgICAgaW5pdFBsdWdpbnMocGxvdCk7XG4gICAgICAgIHBhcnNlT3B0aW9ucyhvcHRpb25zXyk7XG4gICAgICAgIHNldHVwQ2FudmFzZXMoKTtcbiAgICAgICAgc2V0RGF0YShkYXRhXyk7XG4gICAgICAgIHNldHVwR3JpZCgpO1xuICAgICAgICBkcmF3KCk7XG4gICAgICAgIGJpbmRFdmVudHMoKTtcblxuXG4gICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGVIb29rcyhob29rLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzID0gW3Bsb3RdLmNvbmNhdChhcmdzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9vay5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBob29rW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdFBsdWdpbnMoKSB7XG5cbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZXMgdG8ga2V5IGNsYXNzZXMsIGFsbG93aW5nIHBsdWdpbnMgdG8gbW9kaWZ5IHRoZW1cblxuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSB7XG4gICAgICAgICAgICAgICAgQ2FudmFzOiBDYW52YXNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gcGx1Z2luc1tpXTtcbiAgICAgICAgICAgICAgICBwLmluaXQocGxvdCwgY2xhc3Nlcyk7XG4gICAgICAgICAgICAgICAgaWYgKHAub3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgb3B0aW9ucywgcC5vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlT3B0aW9ucyhvcHRzKSB7XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG9wdGlvbnMsIG9wdHMpO1xuXG4gICAgICAgICAgICAvLyAkLmV4dGVuZCBtZXJnZXMgYXJyYXlzLCByYXRoZXIgdGhhbiByZXBsYWNpbmcgdGhlbS4gIFdoZW4gbGVzc1xuICAgICAgICAgICAgLy8gY29sb3JzIGFyZSBwcm92aWRlZCB0aGFuIHRoZSBzaXplIG9mIHRoZSBkZWZhdWx0IHBhbGV0dGUsIHdlXG4gICAgICAgICAgICAvLyBlbmQgdXAgd2l0aCB0aG9zZSBjb2xvcnMgcGx1cyB0aGUgcmVtYWluaW5nIGRlZmF1bHRzLCB3aGljaCBpc1xuICAgICAgICAgICAgLy8gbm90IGV4cGVjdGVkIGJlaGF2aW9yOyBhdm9pZCBpdCBieSByZXBsYWNpbmcgdGhlbSBoZXJlLlxuXG4gICAgICAgICAgICBpZiAob3B0cyAmJiBvcHRzLmNvbG9ycykge1xuICAgICAgICAgICAgXHRvcHRpb25zLmNvbG9ycyA9IG9wdHMuY29sb3JzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy54YXhpcy5jb2xvciA9PSBudWxsKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMueGF4aXMuY29sb3IgPSAkLmNvbG9yLnBhcnNlKG9wdGlvbnMuZ3JpZC5jb2xvcikuc2NhbGUoJ2EnLCAwLjIyKS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMueWF4aXMuY29sb3IgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBvcHRpb25zLnlheGlzLmNvbG9yID0gJC5jb2xvci5wYXJzZShvcHRpb25zLmdyaWQuY29sb3IpLnNjYWxlKCdhJywgMC4yMikudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMueGF4aXMudGlja0NvbG9yID09IG51bGwpIC8vIGdyaWQudGlja0NvbG9yIGZvciBiYWNrLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBvcHRpb25zLnhheGlzLnRpY2tDb2xvciA9IG9wdGlvbnMuZ3JpZC50aWNrQ29sb3IgfHwgb3B0aW9ucy54YXhpcy5jb2xvcjtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnlheGlzLnRpY2tDb2xvciA9PSBudWxsKSAvLyBncmlkLnRpY2tDb2xvciBmb3IgYmFjay1jb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgb3B0aW9ucy55YXhpcy50aWNrQ29sb3IgPSBvcHRpb25zLmdyaWQudGlja0NvbG9yIHx8IG9wdGlvbnMueWF4aXMuY29sb3I7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyaWQuYm9yZGVyQ29sb3IgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBvcHRpb25zLmdyaWQuYm9yZGVyQ29sb3IgPSBvcHRpb25zLmdyaWQuY29sb3I7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncmlkLnRpY2tDb2xvciA9PSBudWxsKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3JpZC50aWNrQ29sb3IgPSAkLmNvbG9yLnBhcnNlKG9wdGlvbnMuZ3JpZC5jb2xvcikuc2NhbGUoJ2EnLCAwLjIyKS50b1N0cmluZygpO1xuXG4gICAgICAgICAgICAvLyBGaWxsIGluIGRlZmF1bHRzIGZvciBheGlzIG9wdGlvbnMsIGluY2x1ZGluZyBhbnkgdW5zcGVjaWZpZWRcbiAgICAgICAgICAgIC8vIGZvbnQtc3BlYyBmaWVsZHMsIGlmIGEgZm9udC1zcGVjIHdhcyBwcm92aWRlZC5cblxuICAgICAgICAgICAgLy8gSWYgbm8geC95IGF4aXMgb3B0aW9ucyB3ZXJlIHByb3ZpZGVkLCBjcmVhdGUgb25lIG9mIGVhY2ggYW55d2F5LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIHJlc3Qgb2YgdGhlIGNvZGUgYXNzdW1lcyB0aGF0IHRoZXkgZXhpc3QuXG5cbiAgICAgICAgICAgIHZhciBpLCBheGlzT3B0aW9ucywgYXhpc0NvdW50LFxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gcGxhY2Vob2xkZXIuY3NzKFwiZm9udC1zaXplXCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplRGVmYXVsdCA9IGZvbnRTaXplID8gK2ZvbnRTaXplLnJlcGxhY2UoXCJweFwiLCBcIlwiKSA6IDEzLFxuICAgICAgICAgICAgICAgIGZvbnREZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHBsYWNlaG9sZGVyLmNzcyhcImZvbnQtc3R5bGVcIiksXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IE1hdGgucm91bmQoMC44ICogZm9udFNpemVEZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogcGxhY2Vob2xkZXIuY3NzKFwiZm9udC12YXJpYW50XCIpLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IHBsYWNlaG9sZGVyLmNzcyhcImZvbnQtd2VpZ2h0XCIpLFxuICAgICAgICAgICAgICAgICAgICBmYW1pbHk6IHBsYWNlaG9sZGVyLmNzcyhcImZvbnQtZmFtaWx5XCIpXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXhpc0NvdW50ID0gb3B0aW9ucy54YXhlcy5sZW5ndGggfHwgMTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBheGlzQ291bnQ7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgYXhpc09wdGlvbnMgPSBvcHRpb25zLnhheGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChheGlzT3B0aW9ucyAmJiAhYXhpc09wdGlvbnMudGlja0NvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXNPcHRpb25zLnRpY2tDb2xvciA9IGF4aXNPcHRpb25zLmNvbG9yO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF4aXNPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMueGF4aXMsIGF4aXNPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnhheGVzW2ldID0gYXhpc09wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXhpc09wdGlvbnMuZm9udCkge1xuICAgICAgICAgICAgICAgICAgICBheGlzT3B0aW9ucy5mb250ID0gJC5leHRlbmQoe30sIGZvbnREZWZhdWx0cywgYXhpc09wdGlvbnMuZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXhpc09wdGlvbnMuZm9udC5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpc09wdGlvbnMuZm9udC5jb2xvciA9IGF4aXNPcHRpb25zLmNvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXhpc09wdGlvbnMuZm9udC5saW5lSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzT3B0aW9ucy5mb250LmxpbmVIZWlnaHQgPSBNYXRoLnJvdW5kKGF4aXNPcHRpb25zLmZvbnQuc2l6ZSAqIDEuMTUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBheGlzQ291bnQgPSBvcHRpb25zLnlheGVzLmxlbmd0aCB8fCAxO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGF4aXNDb3VudDsgKytpKSB7XG5cbiAgICAgICAgICAgICAgICBheGlzT3B0aW9ucyA9IG9wdGlvbnMueWF4ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXNPcHRpb25zICYmICFheGlzT3B0aW9ucy50aWNrQ29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpc09wdGlvbnMudGlja0NvbG9yID0gYXhpc09wdGlvbnMuY29sb3I7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXhpc09wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucy55YXhpcywgYXhpc09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMueWF4ZXNbaV0gPSBheGlzT3B0aW9ucztcblxuICAgICAgICAgICAgICAgIGlmIChheGlzT3B0aW9ucy5mb250KSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXNPcHRpb25zLmZvbnQgPSAkLmV4dGVuZCh7fSwgZm9udERlZmF1bHRzLCBheGlzT3B0aW9ucy5mb250KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFheGlzT3B0aW9ucy5mb250LmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzT3B0aW9ucy5mb250LmNvbG9yID0gYXhpc09wdGlvbnMuY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFheGlzT3B0aW9ucy5mb250LmxpbmVIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNPcHRpb25zLmZvbnQubGluZUhlaWdodCA9IE1hdGgucm91bmQoYXhpc09wdGlvbnMuZm9udC5zaXplICogMS4xNSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB0byBiZSByZW1vdmVkIGluIGZ1dHVyZVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMueGF4aXMubm9UaWNrcyAmJiBvcHRpb25zLnhheGlzLnRpY2tzID09IG51bGwpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy54YXhpcy50aWNrcyA9IG9wdGlvbnMueGF4aXMubm9UaWNrcztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnlheGlzLm5vVGlja3MgJiYgb3B0aW9ucy55YXhpcy50aWNrcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMueWF4aXMudGlja3MgPSBvcHRpb25zLnlheGlzLm5vVGlja3M7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy54MmF4aXMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnhheGVzWzFdID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMueGF4aXMsIG9wdGlvbnMueDJheGlzKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnhheGVzWzFdLnBvc2l0aW9uID0gXCJ0b3BcIjtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgaW5oZXJpdCB0byBhbGxvdyB0aGUgYXhpcyB0byBhdXRvLXNjYWxlXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueDJheGlzLm1pbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueGF4ZXNbMV0ubWluID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueDJheGlzLm1heCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueGF4ZXNbMV0ubWF4ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy55MmF4aXMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnlheGVzWzFdID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMueWF4aXMsIG9wdGlvbnMueTJheGlzKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnlheGVzWzFdLnBvc2l0aW9uID0gXCJyaWdodFwiO1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBpbmhlcml0IHRvIGFsbG93IHRoZSBheGlzIHRvIGF1dG8tc2NhbGVcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy55MmF4aXMubWluID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy55YXhlc1sxXS5taW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy55MmF4aXMubWF4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy55YXhlc1sxXS5tYXggPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyaWQuY29sb3JlZEFyZWFzKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3JpZC5tYXJraW5ncyA9IG9wdGlvbnMuZ3JpZC5jb2xvcmVkQXJlYXM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncmlkLmNvbG9yZWRBcmVhc0NvbG9yKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3JpZC5tYXJraW5nc0NvbG9yID0gb3B0aW9ucy5ncmlkLmNvbG9yZWRBcmVhc0NvbG9yO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGluZXMpXG4gICAgICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgb3B0aW9ucy5zZXJpZXMubGluZXMsIG9wdGlvbnMubGluZXMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucG9pbnRzKVxuICAgICAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG9wdGlvbnMuc2VyaWVzLnBvaW50cywgb3B0aW9ucy5wb2ludHMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYmFycylcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBvcHRpb25zLnNlcmllcy5iYXJzLCBvcHRpb25zLmJhcnMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hhZG93U2l6ZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzLnNoYWRvd1NpemUgPSBvcHRpb25zLnNoYWRvd1NpemU7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oaWdobGlnaHRDb2xvciAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzLmhpZ2hsaWdodENvbG9yID0gb3B0aW9ucy5oaWdobGlnaHRDb2xvcjtcblxuICAgICAgICAgICAgLy8gc2F2ZSBvcHRpb25zIG9uIGF4ZXMgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLnhheGVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGdldE9yQ3JlYXRlQXhpcyh4YXhlcywgaSArIDEpLm9wdGlvbnMgPSBvcHRpb25zLnhheGVzW2ldO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMueWF4ZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgZ2V0T3JDcmVhdGVBeGlzKHlheGVzLCBpICsgMSkub3B0aW9ucyA9IG9wdGlvbnMueWF4ZXNbaV07XG5cbiAgICAgICAgICAgIC8vIGFkZCBob29rcyBmcm9tIG9wdGlvbnNcbiAgICAgICAgICAgIGZvciAodmFyIG4gaW4gaG9va3MpXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaG9va3Nbbl0gJiYgb3B0aW9ucy5ob29rc1tuXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGhvb2tzW25dID0gaG9va3Nbbl0uY29uY2F0KG9wdGlvbnMuaG9va3Nbbl0pO1xuXG4gICAgICAgICAgICBleGVjdXRlSG9va3MoaG9va3MucHJvY2Vzc09wdGlvbnMsIFtvcHRpb25zXSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXREYXRhKGQpIHtcbiAgICAgICAgICAgIHNlcmllcyA9IHBhcnNlRGF0YShkKTtcbiAgICAgICAgICAgIGZpbGxJblNlcmllc09wdGlvbnMoKTtcbiAgICAgICAgICAgIHByb2Nlc3NEYXRhKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXJzZURhdGEoZCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucy5zZXJpZXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRbaV0uZGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHMuZGF0YSA9IGRbaV0uZGF0YTsgLy8gbW92ZSB0aGUgZGF0YSBpbnN0ZWFkIG9mIGRlZXAtY29weVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZFtpXS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHMsIGRbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGRbaV0uZGF0YSA9IHMuZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzLmRhdGEgPSBkW2ldO1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXhpc051bWJlcihvYmosIGNvb3JkKSB7XG4gICAgICAgICAgICB2YXIgYSA9IG9ialtjb29yZCArIFwiYXhpc1wiXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PSBcIm9iamVjdFwiKSAvLyBpZiB3ZSBnb3QgYSByZWFsIGF4aXMsIGV4dHJhY3QgbnVtYmVyXG4gICAgICAgICAgICAgICAgYSA9IGEubjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIGEgPSAxOyAvLyBkZWZhdWx0IHRvIGZpcnN0IGF4aXNcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWxsQXhlcygpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBmbGF0IGFycmF5IHdpdGhvdXQgYW5ub3lpbmcgbnVsbCBlbnRyaWVzXG4gICAgICAgICAgICByZXR1cm4gJC5ncmVwKHhheGVzLmNvbmNhdCh5YXhlcyksIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbnZhc1RvQXhpc0Nvb3Jkcyhwb3MpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBhbiBvYmplY3Qgd2l0aCB4L3kgY29ycmVzcG9uZGluZyB0byBhbGwgdXNlZCBheGVzXG4gICAgICAgICAgICB2YXIgcmVzID0ge30sIGksIGF4aXM7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeGF4ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBheGlzID0geGF4ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMgJiYgYXhpcy51c2VkKVxuICAgICAgICAgICAgICAgICAgICByZXNbXCJ4XCIgKyBheGlzLm5dID0gYXhpcy5jMnAocG9zLmxlZnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeWF4ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBheGlzID0geWF4ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMgJiYgYXhpcy51c2VkKVxuICAgICAgICAgICAgICAgICAgICByZXNbXCJ5XCIgKyBheGlzLm5dID0gYXhpcy5jMnAocG9zLnRvcCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXMueDEgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXMueCA9IHJlcy54MTtcbiAgICAgICAgICAgIGlmIChyZXMueTEgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXMueSA9IHJlcy55MTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGF4aXNUb0NhbnZhc0Nvb3Jkcyhwb3MpIHtcbiAgICAgICAgICAgIC8vIGdldCBjYW52YXMgY29vcmRzIGZyb20gdGhlIGZpcnN0IHBhaXIgb2YgeC95IGZvdW5kIGluIHBvc1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9LCBpLCBheGlzLCBrZXk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB4YXhlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGF4aXMgPSB4YXhlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcyAmJiBheGlzLnVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJ4XCIgKyBheGlzLm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3Nba2V5XSA9PSBudWxsICYmIGF4aXMubiA9PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJ4XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc1trZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5sZWZ0ID0gYXhpcy5wMmMocG9zW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB5YXhlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGF4aXMgPSB5YXhlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcyAmJiBheGlzLnVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJ5XCIgKyBheGlzLm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3Nba2V5XSA9PSBudWxsICYmIGF4aXMubiA9PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJ5XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc1trZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy50b3AgPSBheGlzLnAyYyhwb3Nba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yQ3JlYXRlQXhpcyhheGVzLCBudW1iZXIpIHtcbiAgICAgICAgICAgIGlmICghYXhlc1tudW1iZXIgLSAxXSlcbiAgICAgICAgICAgICAgICBheGVzW251bWJlciAtIDFdID0ge1xuICAgICAgICAgICAgICAgICAgICBuOiBudW1iZXIsIC8vIHNhdmUgdGhlIG51bWJlciBmb3IgZnV0dXJlIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGF4ZXMgPT0geGF4ZXMgPyBcInhcIiA6IFwieVwiLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiAkLmV4dGVuZCh0cnVlLCB7fSwgYXhlcyA9PSB4YXhlcyA/IG9wdGlvbnMueGF4aXMgOiBvcHRpb25zLnlheGlzKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBheGVzW251bWJlciAtIDFdO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlsbEluU2VyaWVzT3B0aW9ucygpIHtcblxuICAgICAgICAgICAgdmFyIG5lZWRlZENvbG9ycyA9IHNlcmllcy5sZW5ndGgsIG1heEluZGV4ID0gLTEsIGk7XG5cbiAgICAgICAgICAgIC8vIFN1YnRyYWN0IHRoZSBudW1iZXIgb2Ygc2VyaWVzIHRoYXQgYWxyZWFkeSBoYXZlIGZpeGVkIGNvbG9ycyBvclxuICAgICAgICAgICAgLy8gY29sb3IgaW5kZXhlcyBmcm9tIHRoZSBudW1iZXIgdGhhdCB3ZSBzdGlsbCBuZWVkIHRvIGdlbmVyYXRlLlxuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2VyaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjID0gc2VyaWVzW2ldLmNvbG9yO1xuICAgICAgICAgICAgICAgIGlmIChzYyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRlZENvbG9ycy0tO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNjID09IFwibnVtYmVyXCIgJiYgc2MgPiBtYXhJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SW5kZXggPSBzYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYW55IG9mIHRoZSBzZXJpZXMgaGF2ZSBmaXhlZCBjb2xvciBpbmRleGVzLCB0aGVuIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIGF0IGxlYXN0IGFzIG1hbnkgY29sb3JzIGFzIHRoZSBoaWdoZXN0IGluZGV4LlxuXG4gICAgICAgICAgICBpZiAobmVlZGVkQ29sb3JzIDw9IG1heEluZGV4KSB7XG4gICAgICAgICAgICAgICAgbmVlZGVkQ29sb3JzID0gbWF4SW5kZXggKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhbGwgdGhlIGNvbG9ycywgdXNpbmcgZmlyc3QgdGhlIG9wdGlvbiBjb2xvcnMgYW5kIHRoZW5cbiAgICAgICAgICAgIC8vIHZhcmlhdGlvbnMgb24gdGhvc2UgY29sb3JzIG9uY2UgdGhleSdyZSBleGhhdXN0ZWQuXG5cbiAgICAgICAgICAgIHZhciBjLCBjb2xvcnMgPSBbXSwgY29sb3JQb29sID0gb3B0aW9ucy5jb2xvcnMsXG4gICAgICAgICAgICAgICAgY29sb3JQb29sU2l6ZSA9IGNvbG9yUG9vbC5sZW5ndGgsIHZhcmlhdGlvbiA9IDA7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuZWVkZWRDb2xvcnM7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgYyA9ICQuY29sb3IucGFyc2UoY29sb3JQb29sW2kgJSBjb2xvclBvb2xTaXplXSB8fCBcIiM2NjZcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBFYWNoIHRpbWUgd2UgZXhoYXVzdCB0aGUgY29sb3JzIGluIHRoZSBwb29sIHdlIGFkanVzdFxuICAgICAgICAgICAgICAgIC8vIGEgc2NhbGluZyBmYWN0b3IgdXNlZCB0byBwcm9kdWNlIG1vcmUgdmFyaWF0aW9ucyBvblxuICAgICAgICAgICAgICAgIC8vIHRob3NlIGNvbG9ycy4gVGhlIGZhY3RvciBhbHRlcm5hdGVzIG5lZ2F0aXZlL3Bvc2l0aXZlXG4gICAgICAgICAgICAgICAgLy8gdG8gcHJvZHVjZSBsaWdodGVyL2RhcmtlciBjb2xvcnMuXG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdmFyaWF0aW9uIGFmdGVyIGV2ZXJ5IGZldyBjeWNsZXMsIG9yIGVsc2VcbiAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIGVuZCB1cCBwcm9kdWNpbmcgb25seSB3aGl0ZSBvciBibGFjayBjb2xvcnMuXG5cbiAgICAgICAgICAgICAgICBpZiAoaSAlIGNvbG9yUG9vbFNpemUgPT0gMCAmJiBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYXRpb24gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcmlhdGlvbiA8IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhdGlvbiA9IC12YXJpYXRpb24gLSAwLjI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdmFyaWF0aW9uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHZhcmlhdGlvbiA9IC12YXJpYXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29sb3JzW2ldID0gYy5zY2FsZSgncmdiJywgMSArIHZhcmlhdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZpbmFsaXplIHRoZSBzZXJpZXMgb3B0aW9ucywgZmlsbGluZyBpbiB0aGVpciBjb2xvcnNcblxuICAgICAgICAgICAgdmFyIGNvbG9yaSA9IDAsIHM7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2VyaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcyA9IHNlcmllc1tpXTtcblxuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBjb2xvcnNcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xvciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHMuY29sb3IgPSBjb2xvcnNbY29sb3JpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICArK2NvbG9yaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHMuY29sb3IgPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgcy5jb2xvciA9IGNvbG9yc1tzLmNvbG9yXS50b1N0cmluZygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdHVybiBvbiBsaW5lcyBhdXRvbWF0aWNhbGx5IGluIGNhc2Ugbm90aGluZyBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAocy5saW5lcy5zaG93ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYsIHNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHYgaW4gcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzW3ZdICYmIHNbdl0uc2hvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3cpXG4gICAgICAgICAgICAgICAgICAgICAgICBzLmxpbmVzLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIG5vdGhpbmcgd2FzIHByb3ZpZGVkIGZvciBsaW5lcy56ZXJvLCBkZWZhdWx0IGl0IHRvIG1hdGNoXG4gICAgICAgICAgICAgICAgLy8gbGluZXMuZmlsbCwgc2luY2UgYXJlYXMgYnkgZGVmYXVsdCBzaG91bGQgZXh0ZW5kIHRvIHplcm8uXG5cbiAgICAgICAgICAgICAgICBpZiAocy5saW5lcy56ZXJvID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5saW5lcy56ZXJvID0gISFzLmxpbmVzLmZpbGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc2V0dXAgYXhlc1xuICAgICAgICAgICAgICAgIHMueGF4aXMgPSBnZXRPckNyZWF0ZUF4aXMoeGF4ZXMsIGF4aXNOdW1iZXIocywgXCJ4XCIpKTtcbiAgICAgICAgICAgICAgICBzLnlheGlzID0gZ2V0T3JDcmVhdGVBeGlzKHlheGVzLCBheGlzTnVtYmVyKHMsIFwieVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzRGF0YSgpIHtcbiAgICAgICAgICAgIHZhciB0b3BTZW50cnkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICAgICAgYm90dG9tU2VudHJ5ID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgICAgIGZha2VJbmZpbml0eSA9IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgICAgICAgaSwgaiwgaywgbSwgbGVuZ3RoLFxuICAgICAgICAgICAgICAgIHMsIHBvaW50cywgcHMsIHgsIHksIGF4aXMsIHZhbCwgZiwgcCxcbiAgICAgICAgICAgICAgICBkYXRhLCBmb3JtYXQ7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUF4aXMoYXhpcywgbWluLCBtYXgpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluIDwgYXhpcy5kYXRhbWluICYmIG1pbiAhPSAtZmFrZUluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICBheGlzLmRhdGFtaW4gPSBtaW47XG4gICAgICAgICAgICAgICAgaWYgKG1heCA+IGF4aXMuZGF0YW1heCAmJiBtYXggIT0gZmFrZUluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICBheGlzLmRhdGFtYXggPSBtYXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZWFjaChhbGxBeGVzKCksIGZ1bmN0aW9uIChfLCBheGlzKSB7XG4gICAgICAgICAgICAgICAgLy8gaW5pdCBheGlzXG4gICAgICAgICAgICAgICAgYXhpcy5kYXRhbWluID0gdG9wU2VudHJ5O1xuICAgICAgICAgICAgICAgIGF4aXMuZGF0YW1heCA9IGJvdHRvbVNlbnRyeTtcbiAgICAgICAgICAgICAgICBheGlzLnVzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2VyaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcyA9IHNlcmllc1tpXTtcbiAgICAgICAgICAgICAgICBzLmRhdGFwb2ludHMgPSB7IHBvaW50czogW10gfTtcblxuICAgICAgICAgICAgICAgIGV4ZWN1dGVIb29rcyhob29rcy5wcm9jZXNzUmF3RGF0YSwgWyBzLCBzLmRhdGEsIHMuZGF0YXBvaW50cyBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZmlyc3QgcGFzczogY2xlYW4gYW5kIGNvcHkgZGF0YVxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlcmllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHMgPSBzZXJpZXNbaV07XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gcy5kYXRhO1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IHMuZGF0YXBvaW50cy5mb3JtYXQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBvdXQgaG93IHRvIGNvcHlcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LnB1c2goeyB4OiB0cnVlLCBudW1iZXI6IHRydWUsIHJlcXVpcmVkOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQucHVzaCh7IHk6IHRydWUsIG51bWJlcjogdHJ1ZSwgcmVxdWlyZWQ6IHRydWUgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuYmFycy5zaG93IHx8IChzLmxpbmVzLnNob3cgJiYgcy5saW5lcy5maWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dG9zY2FsZSA9ICEhKChzLmJhcnMuc2hvdyAmJiBzLmJhcnMuemVybykgfHwgKHMubGluZXMuc2hvdyAmJiBzLmxpbmVzLnplcm8pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5wdXNoKHsgeTogdHJ1ZSwgbnVtYmVyOiB0cnVlLCByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHRWYWx1ZTogMCwgYXV0b3NjYWxlOiBhdXRvc2NhbGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5iYXJzLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZm9ybWF0W2Zvcm1hdC5sZW5ndGggLSAxXS55O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFtmb3JtYXQubGVuZ3RoIC0gMV0ueCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzLmRhdGFwb2ludHMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzLmRhdGFwb2ludHMucG9pbnRzaXplICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBhbHJlYWR5IGZpbGxlZCBpblxuXG4gICAgICAgICAgICAgICAgcy5kYXRhcG9pbnRzLnBvaW50c2l6ZSA9IGZvcm1hdC5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBwcyA9IHMuZGF0YXBvaW50cy5wb2ludHNpemU7XG4gICAgICAgICAgICAgICAgcG9pbnRzID0gcy5kYXRhcG9pbnRzLnBvaW50cztcblxuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRTdGVwcyA9IHMubGluZXMuc2hvdyAmJiBzLmxpbmVzLnN0ZXBzO1xuICAgICAgICAgICAgICAgIHMueGF4aXMudXNlZCA9IHMueWF4aXMudXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGogPSBrID0gMDsgaiA8IGRhdGEubGVuZ3RoOyArK2osIGsgKz0gcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcCA9IGRhdGFbal07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bGxpZnkgPSBwID09IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbnVsbGlmeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IHBzOyArK20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBwW21dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmb3JtYXRbbV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5udW1iZXIgJiYgdmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICt2YWw7IC8vIGNvbnZlcnQgdG8gbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsID09IEluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGZha2VJbmZpbml0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA9PSAtSW5maW5pdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gLWZha2VJbmZpbml0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYucmVxdWlyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGlmeSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLmRlZmF1bHRWYWx1ZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGYuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2sgKyBtXSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsaWZ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBvaW50c1trICsgbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmb3JtYXRbbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dHJhY3QgbWluL21heCBpbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLmF1dG9zY2FsZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBeGlzKHMueGF4aXMsIHZhbCwgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBeGlzKHMueWF4aXMsIHZhbCwgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbayArIG1dID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbGl0dGxlIGJpdCBvZiBsaW5lIHNwZWNpZmljIHN0dWZmIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBlcmhhcHMgc2hvdWxkbid0IGJlIGhlcmUsIGJ1dCBsYWNraW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZXR0ZXIgbWVhbnMuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRTdGVwcyAmJiBrID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHBvaW50c1trIC0gcHNdICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBwb2ludHNbayAtIHBzXSAhPSBwb2ludHNba11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBwb2ludHNbayAtIHBzICsgMV0gIT0gcG9pbnRzW2sgKyAxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgdGhlIHBvaW50IHRvIG1ha2Ugcm9vbSBmb3IgYSBtaWRkbGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2sgKyBwcyArIG1dID0gcG9pbnRzW2sgKyBtXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1pZGRsZSBwb2ludCBoYXMgc2FtZSB5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2sgKyAxXSA9IHBvaW50c1trIC0gcHMgKyAxXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIGFkZGVkIGEgcG9pbnQsIGJldHRlciByZWZsZWN0IHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrICs9IHBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnaXZlIHRoZSBob29rcyBhIGNoYW5jZSB0byBydW5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZXJpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBzID0gc2VyaWVzW2ldO1xuXG4gICAgICAgICAgICAgICAgZXhlY3V0ZUhvb2tzKGhvb2tzLnByb2Nlc3NEYXRhcG9pbnRzLCBbIHMsIHMuZGF0YXBvaW50c10pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzZWNvbmQgcGFzczogZmluZCBkYXRhbWF4L2RhdGFtaW4gZm9yIGF1dG8tc2NhbGluZ1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlcmllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHMgPSBzZXJpZXNbaV07XG4gICAgICAgICAgICAgICAgcG9pbnRzID0gcy5kYXRhcG9pbnRzLnBvaW50cztcbiAgICAgICAgICAgICAgICBwcyA9IHMuZGF0YXBvaW50cy5wb2ludHNpemU7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gcy5kYXRhcG9pbnRzLmZvcm1hdDtcblxuICAgICAgICAgICAgICAgIHZhciB4bWluID0gdG9wU2VudHJ5LCB5bWluID0gdG9wU2VudHJ5LFxuICAgICAgICAgICAgICAgICAgICB4bWF4ID0gYm90dG9tU2VudHJ5LCB5bWF4ID0gYm90dG9tU2VudHJ5O1xuXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHBvaW50cy5sZW5ndGg7IGogKz0gcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50c1tqXSA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IHBzOyArK20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBvaW50c1tqICsgbV07XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZm9ybWF0W21dO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmIHx8IGYuYXV0b3NjYWxlID09PSBmYWxzZSB8fCB2YWwgPT0gZmFrZUluZmluaXR5IHx8IHZhbCA9PSAtZmFrZUluZmluaXR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi54KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA8IHhtaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtaW4gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA+IHhtYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtYXggPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA8IHltaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHltaW4gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA+IHltYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHltYXggPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocy5iYXJzLnNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHdlIGdvdCByb29tIGZvciB0aGUgYmFyIG9uIHRoZSBkYW5jaW5nIGZsb29yXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHMuYmFycy5hbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IC1zLmJhcnMuYmFyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhID0gLXMuYmFycy5iYXJXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocy5iYXJzLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHltaW4gKz0gZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5bWF4ICs9IGRlbHRhICsgcy5iYXJzLmJhcldpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgeG1pbiArPSBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhtYXggKz0gZGVsdGEgKyBzLmJhcnMuYmFyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB1cGRhdGVBeGlzKHMueGF4aXMsIHhtaW4sIHhtYXgpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUF4aXMocy55YXhpcywgeW1pbiwgeW1heCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZWFjaChhbGxBeGVzKCksIGZ1bmN0aW9uIChfLCBheGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuZGF0YW1pbiA9PSB0b3BTZW50cnkpXG4gICAgICAgICAgICAgICAgICAgIGF4aXMuZGF0YW1pbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuZGF0YW1heCA9PSBib3R0b21TZW50cnkpXG4gICAgICAgICAgICAgICAgICAgIGF4aXMuZGF0YW1heCA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwQ2FudmFzZXMoKSB7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgcGxhY2Vob2xkZXIgaXMgY2xlYXIgb2YgZXZlcnl0aGluZyBleGNlcHQgY2FudmFzZXNcbiAgICAgICAgICAgIC8vIGZyb20gYSBwcmV2aW91cyBwbG90IGluIHRoaXMgY29udGFpbmVyIHRoYXQgd2UnbGwgdHJ5IHRvIHJlLXVzZS5cblxuICAgICAgICAgICAgcGxhY2Vob2xkZXIuY3NzKFwicGFkZGluZ1wiLCAwKSAvLyBwYWRkaW5nIG1lc3NlcyB1cCB0aGUgcG9zaXRpb25pbmdcbiAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKS5maWx0ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkKHRoaXMpLmhhc0NsYXNzKFwiZmxvdC1vdmVybGF5XCIpICYmICEkKHRoaXMpLmhhc0NsYXNzKCdmbG90LWJhc2UnKTtcbiAgICAgICAgICAgICAgICB9KS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyLmNzcyhcInBvc2l0aW9uXCIpID09ICdzdGF0aWMnKVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyhcInBvc2l0aW9uXCIsIFwicmVsYXRpdmVcIik7IC8vIGZvciBwb3NpdGlvbmluZyBsYWJlbHMgYW5kIG92ZXJsYXlcblxuICAgICAgICAgICAgc3VyZmFjZSA9IG5ldyBDYW52YXMoXCJmbG90LWJhc2VcIiwgcGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgb3ZlcmxheSA9IG5ldyBDYW52YXMoXCJmbG90LW92ZXJsYXlcIiwgcGxhY2Vob2xkZXIpOyAvLyBvdmVybGF5IGNhbnZhcyBmb3IgaW50ZXJhY3RpdmUgZmVhdHVyZXNcblxuICAgICAgICAgICAgY3R4ID0gc3VyZmFjZS5jb250ZXh0O1xuICAgICAgICAgICAgb2N0eCA9IG92ZXJsYXkuY29udGV4dDtcblxuICAgICAgICAgICAgLy8gZGVmaW5lIHdoaWNoIGVsZW1lbnQgd2UncmUgbGlzdGVuaW5nIGZvciBldmVudHMgb25cbiAgICAgICAgICAgIGV2ZW50SG9sZGVyID0gJChvdmVybGF5LmVsZW1lbnQpLnVuYmluZCgpO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSByZS11c2luZyBhIHBsb3Qgb2JqZWN0LCBzaHV0IGRvd24gdGhlIG9sZCBvbmVcblxuICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gcGxhY2Vob2xkZXIuZGF0YShcInBsb3RcIik7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nLnNodXRkb3duKCk7XG4gICAgICAgICAgICAgICAgb3ZlcmxheS5jbGVhcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzYXZlIGluIGNhc2Ugd2UgZ2V0IHJlcGxvdHRlZFxuICAgICAgICAgICAgcGxhY2Vob2xkZXIuZGF0YShcInBsb3RcIiwgcGxvdCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICAgICAgLy8gYmluZCBldmVudHNcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyaWQuaG92ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRIb2xkZXIubW91c2Vtb3ZlKG9uTW91c2VNb3ZlKTtcblxuICAgICAgICAgICAgICAgIC8vIFVzZSBiaW5kLCByYXRoZXIgdGhhbiAubW91c2VsZWF2ZSwgYmVjYXVzZSB3ZSBvZmZpY2lhbGx5XG4gICAgICAgICAgICAgICAgLy8gc3RpbGwgc3VwcG9ydCBqUXVlcnkgMS4yLjYsIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGEgc2hvcnRjdXRcbiAgICAgICAgICAgICAgICAvLyBmb3IgbW91c2VlbnRlciBvciBtb3VzZWxlYXZlLiAgVGhpcyB3YXMgYSBidWcvb3ZlcnNpZ2h0IHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3YXMgZml4ZWQgc29tZXdoZXJlIGFyb3VuZCAxLjMueC4gIFdlIGNhbiByZXR1cm4gdG8gdXNpbmdcbiAgICAgICAgICAgICAgICAvLyAubW91c2VsZWF2ZSB3aGVuIHdlIGRyb3Agc3VwcG9ydCBmb3IgMS4yLjYuXG5cbiAgICAgICAgICAgICAgICBldmVudEhvbGRlci5iaW5kKFwibW91c2VsZWF2ZVwiLCBvbk1vdXNlTGVhdmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncmlkLmNsaWNrYWJsZSlcbiAgICAgICAgICAgICAgICBldmVudEhvbGRlci5jbGljayhvbkNsaWNrKTtcblxuICAgICAgICAgICAgZXhlY3V0ZUhvb2tzKGhvb2tzLmJpbmRFdmVudHMsIFtldmVudEhvbGRlcl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2h1dGRvd24oKSB7XG4gICAgICAgICAgICBpZiAocmVkcmF3VGltZW91dClcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVkcmF3VGltZW91dCk7XG5cbiAgICAgICAgICAgIGV2ZW50SG9sZGVyLnVuYmluZChcIm1vdXNlbW92ZVwiLCBvbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICBldmVudEhvbGRlci51bmJpbmQoXCJtb3VzZWxlYXZlXCIsIG9uTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICBldmVudEhvbGRlci51bmJpbmQoXCJjbGlja1wiLCBvbkNsaWNrKTtcblxuICAgICAgICAgICAgZXhlY3V0ZUhvb2tzKGhvb2tzLnNodXRkb3duLCBbZXZlbnRIb2xkZXJdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFRyYW5zZm9ybWF0aW9uSGVscGVycyhheGlzKSB7XG4gICAgICAgICAgICAvLyBzZXQgaGVscGVyIGZ1bmN0aW9ucyBvbiB0aGUgYXhpcywgYXNzdW1lcyBwbG90IGFyZWFcbiAgICAgICAgICAgIC8vIGhhcyBiZWVuIGNvbXB1dGVkIGFscmVhZHlcblxuICAgICAgICAgICAgZnVuY3Rpb24gaWRlbnRpdHkoeCkgeyByZXR1cm4geDsgfVxuXG4gICAgICAgICAgICB2YXIgcywgbSwgdCA9IGF4aXMub3B0aW9ucy50cmFuc2Zvcm0gfHwgaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgaXQgPSBheGlzLm9wdGlvbnMuaW52ZXJzZVRyYW5zZm9ybTtcblxuICAgICAgICAgICAgLy8gcHJlY29tcHV0ZSBob3cgbXVjaCB0aGUgYXhpcyBpcyBzY2FsaW5nIGEgcG9pbnRcbiAgICAgICAgICAgIC8vIGluIGNhbnZhcyBzcGFjZVxuICAgICAgICAgICAgaWYgKGF4aXMuZGlyZWN0aW9uID09IFwieFwiKSB7XG4gICAgICAgICAgICAgICAgcyA9IGF4aXMuc2NhbGUgPSBwbG90V2lkdGggLyBNYXRoLmFicyh0KGF4aXMubWF4KSAtIHQoYXhpcy5taW4pKTtcbiAgICAgICAgICAgICAgICBtID0gTWF0aC5taW4odChheGlzLm1heCksIHQoYXhpcy5taW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMgPSBheGlzLnNjYWxlID0gcGxvdEhlaWdodCAvIE1hdGguYWJzKHQoYXhpcy5tYXgpIC0gdChheGlzLm1pbikpO1xuICAgICAgICAgICAgICAgIHMgPSAtcztcbiAgICAgICAgICAgICAgICBtID0gTWF0aC5tYXgodChheGlzLm1heCksIHQoYXhpcy5taW4pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGF0YSBwb2ludCB0byBjYW52YXMgY29vcmRpbmF0ZVxuICAgICAgICAgICAgaWYgKHQgPT0gaWRlbnRpdHkpIC8vIHNsaWdodCBvcHRpbWl6YXRpb25cbiAgICAgICAgICAgICAgICBheGlzLnAyYyA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiAocCAtIG0pICogczsgfTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBheGlzLnAyYyA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiAodChwKSAtIG0pICogczsgfTtcbiAgICAgICAgICAgIC8vIGNhbnZhcyBjb29yZGluYXRlIHRvIGRhdGEgcG9pbnRcbiAgICAgICAgICAgIGlmICghaXQpXG4gICAgICAgICAgICAgICAgYXhpcy5jMnAgPSBmdW5jdGlvbiAoYykgeyByZXR1cm4gbSArIGMgLyBzOyB9O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGF4aXMuYzJwID0gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGl0KG0gKyBjIC8gcyk7IH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtZWFzdXJlVGlja0xhYmVscyhheGlzKSB7XG5cbiAgICAgICAgICAgIHZhciBvcHRzID0gYXhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHRpY2tzID0gYXhpcy50aWNrcyB8fCBbXSxcbiAgICAgICAgICAgICAgICBsYWJlbFdpZHRoID0gb3B0cy5sYWJlbFdpZHRoIHx8IDAsXG4gICAgICAgICAgICAgICAgbGFiZWxIZWlnaHQgPSBvcHRzLmxhYmVsSGVpZ2h0IHx8IDAsXG4gICAgICAgICAgICAgICAgbWF4V2lkdGggPSBsYWJlbFdpZHRoIHx8IChheGlzLmRpcmVjdGlvbiA9PSBcInhcIiA/IE1hdGguZmxvb3Ioc3VyZmFjZS53aWR0aCAvICh0aWNrcy5sZW5ndGggfHwgMSkpIDogbnVsbCksXG4gICAgICAgICAgICAgICAgbGVnYWN5U3R5bGVzID0gYXhpcy5kaXJlY3Rpb24gKyBcIkF4aXMgXCIgKyBheGlzLmRpcmVjdGlvbiArIGF4aXMubiArIFwiQXhpc1wiLFxuICAgICAgICAgICAgICAgIGxheWVyID0gXCJmbG90LVwiICsgYXhpcy5kaXJlY3Rpb24gKyBcIi1heGlzIGZsb3QtXCIgKyBheGlzLmRpcmVjdGlvbiArIGF4aXMubiArIFwiLWF4aXMgXCIgKyBsZWdhY3lTdHlsZXMsXG4gICAgICAgICAgICAgICAgZm9udCA9IG9wdHMuZm9udCB8fCBcImZsb3QtdGljay1sYWJlbCB0aWNrTGFiZWxcIjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWNrcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aWNrc1tpXTtcblxuICAgICAgICAgICAgICAgIGlmICghdC5sYWJlbClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHN1cmZhY2UuZ2V0VGV4dEluZm8obGF5ZXIsIHQubGFiZWwsIGZvbnQsIG51bGwsIG1heFdpZHRoKTtcblxuICAgICAgICAgICAgICAgIGxhYmVsV2lkdGggPSBNYXRoLm1heChsYWJlbFdpZHRoLCBpbmZvLndpZHRoKTtcbiAgICAgICAgICAgICAgICBsYWJlbEhlaWdodCA9IE1hdGgubWF4KGxhYmVsSGVpZ2h0LCBpbmZvLmhlaWdodCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF4aXMubGFiZWxXaWR0aCA9IG9wdHMubGFiZWxXaWR0aCB8fCBsYWJlbFdpZHRoO1xuICAgICAgICAgICAgYXhpcy5sYWJlbEhlaWdodCA9IG9wdHMubGFiZWxIZWlnaHQgfHwgbGFiZWxIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhbGxvY2F0ZUF4aXNCb3hGaXJzdFBoYXNlKGF4aXMpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgYXhpcyBieSBsb29raW5nIGF0IGxhYmVsXG4gICAgICAgICAgICAvLyB3aWR0aHMvaGVpZ2h0cyBhbmQgdGlja3MsIG1ha2Ugcm9vbSBieSBkaW1pbmlzaGluZyB0aGVcbiAgICAgICAgICAgIC8vIHBsb3RPZmZzZXQ7IHRoaXMgZmlyc3QgcGhhc2Ugb25seSBsb29rcyBhdCBvbmVcbiAgICAgICAgICAgIC8vIGRpbWVuc2lvbiBwZXIgYXhpcywgdGhlIG90aGVyIGRpbWVuc2lvbiBkZXBlbmRzIG9uIHRoZVxuICAgICAgICAgICAgLy8gb3RoZXIgYXhlcyBzbyB3aWxsIGhhdmUgdG8gd2FpdFxuXG4gICAgICAgICAgICB2YXIgbHcgPSBheGlzLmxhYmVsV2lkdGgsXG4gICAgICAgICAgICAgICAgbGggPSBheGlzLmxhYmVsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHBvcyA9IGF4aXMub3B0aW9ucy5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBpc1hBeGlzID0gYXhpcy5kaXJlY3Rpb24gPT09IFwieFwiLFxuICAgICAgICAgICAgICAgIHRpY2tMZW5ndGggPSBheGlzLm9wdGlvbnMudGlja0xlbmd0aCxcbiAgICAgICAgICAgICAgICBheGlzTWFyZ2luID0gb3B0aW9ucy5ncmlkLmF4aXNNYXJnaW4sXG4gICAgICAgICAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMuZ3JpZC5sYWJlbE1hcmdpbixcbiAgICAgICAgICAgICAgICBpbm5lcm1vc3QgPSB0cnVlLFxuICAgICAgICAgICAgICAgIG91dGVybW9zdCA9IHRydWUsXG4gICAgICAgICAgICAgICAgZmlyc3QgPSB0cnVlLFxuICAgICAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgYXhpcydzIHBvc2l0aW9uIGluIGl0cyBkaXJlY3Rpb24gYW5kIG9uIGl0cyBzaWRlXG5cbiAgICAgICAgICAgICQuZWFjaChpc1hBeGlzID8geGF4ZXMgOiB5YXhlcywgZnVuY3Rpb24oaSwgYSkge1xuICAgICAgICAgICAgICAgIGlmIChhICYmIChhLnNob3cgfHwgYS5yZXNlcnZlU3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhID09PSBheGlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5vcHRpb25zLnBvc2l0aW9uID09PSBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGVybW9zdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lcm1vc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFRoZSBvdXRlcm1vc3QgYXhpcyBvbiBlYWNoIHNpZGUgaGFzIG5vIG1hcmdpblxuXG4gICAgICAgICAgICBpZiAob3V0ZXJtb3N0KSB7XG4gICAgICAgICAgICAgICAgYXhpc01hcmdpbiA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRoZSB0aWNrcyBmb3IgdGhlIGZpcnN0IGF4aXMgaW4gZWFjaCBkaXJlY3Rpb24gc3RyZXRjaCBhY3Jvc3NcblxuICAgICAgICAgICAgaWYgKHRpY2tMZW5ndGggPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRpY2tMZW5ndGggPSBmaXJzdCA/IFwiZnVsbFwiIDogNTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc05hTigrdGlja0xlbmd0aCkpXG4gICAgICAgICAgICAgICAgcGFkZGluZyArPSArdGlja0xlbmd0aDtcblxuICAgICAgICAgICAgaWYgKGlzWEF4aXMpIHtcbiAgICAgICAgICAgICAgICBsaCArPSBwYWRkaW5nO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBcImJvdHRvbVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsb3RPZmZzZXQuYm90dG9tICs9IGxoICsgYXhpc01hcmdpbjtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5ib3ggPSB7IHRvcDogc3VyZmFjZS5oZWlnaHQgLSBwbG90T2Zmc2V0LmJvdHRvbSwgaGVpZ2h0OiBsaCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5ib3ggPSB7IHRvcDogcGxvdE9mZnNldC50b3AgKyBheGlzTWFyZ2luLCBoZWlnaHQ6IGxoIH07XG4gICAgICAgICAgICAgICAgICAgIHBsb3RPZmZzZXQudG9wICs9IGxoICsgYXhpc01hcmdpbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsdyArPSBwYWRkaW5nO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBcImxlZnRcIikge1xuICAgICAgICAgICAgICAgICAgICBheGlzLmJveCA9IHsgbGVmdDogcGxvdE9mZnNldC5sZWZ0ICsgYXhpc01hcmdpbiwgd2lkdGg6IGx3IH07XG4gICAgICAgICAgICAgICAgICAgIHBsb3RPZmZzZXQubGVmdCArPSBsdyArIGF4aXNNYXJnaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbG90T2Zmc2V0LnJpZ2h0ICs9IGx3ICsgYXhpc01hcmdpbjtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5ib3ggPSB7IGxlZnQ6IHN1cmZhY2Uud2lkdGggLSBwbG90T2Zmc2V0LnJpZ2h0LCB3aWR0aDogbHcgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAvLyBzYXZlIGZvciBmdXR1cmUgcmVmZXJlbmNlXG4gICAgICAgICAgICBheGlzLnBvc2l0aW9uID0gcG9zO1xuICAgICAgICAgICAgYXhpcy50aWNrTGVuZ3RoID0gdGlja0xlbmd0aDtcbiAgICAgICAgICAgIGF4aXMuYm94LnBhZGRpbmcgPSBwYWRkaW5nO1xuICAgICAgICAgICAgYXhpcy5pbm5lcm1vc3QgPSBpbm5lcm1vc3Q7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhbGxvY2F0ZUF4aXNCb3hTZWNvbmRQaGFzZShheGlzKSB7XG4gICAgICAgICAgICAvLyBub3cgdGhhdCBhbGwgYXhpcyBib3hlcyBoYXZlIGJlZW4gcGxhY2VkIGluIG9uZVxuICAgICAgICAgICAgLy8gZGltZW5zaW9uLCB3ZSBjYW4gc2V0IHRoZSByZW1haW5pbmcgZGltZW5zaW9uIGNvb3JkaW5hdGVzXG4gICAgICAgICAgICBpZiAoYXhpcy5kaXJlY3Rpb24gPT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICBheGlzLmJveC5sZWZ0ID0gcGxvdE9mZnNldC5sZWZ0IC0gYXhpcy5sYWJlbFdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICBheGlzLmJveC53aWR0aCA9IHN1cmZhY2Uud2lkdGggLSBwbG90T2Zmc2V0LmxlZnQgLSBwbG90T2Zmc2V0LnJpZ2h0ICsgYXhpcy5sYWJlbFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXhpcy5ib3gudG9wID0gcGxvdE9mZnNldC50b3AgLSBheGlzLmxhYmVsSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICBheGlzLmJveC5oZWlnaHQgPSBzdXJmYWNlLmhlaWdodCAtIHBsb3RPZmZzZXQuYm90dG9tIC0gcGxvdE9mZnNldC50b3AgKyBheGlzLmxhYmVsSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRqdXN0TGF5b3V0Rm9yVGhpbmdzU3RpY2tpbmdPdXQoKSB7XG4gICAgICAgICAgICAvLyBwb3NzaWJseSBhZGp1c3QgcGxvdCBvZmZzZXQgdG8gZW5zdXJlIGV2ZXJ5dGhpbmcgc3RheXNcbiAgICAgICAgICAgIC8vIGluc2lkZSB0aGUgY2FudmFzIGFuZCBpc24ndCBjbGlwcGVkIG9mZlxuXG4gICAgICAgICAgICB2YXIgbWluTWFyZ2luID0gb3B0aW9ucy5ncmlkLm1pbkJvcmRlck1hcmdpbixcbiAgICAgICAgICAgICAgICBheGlzLCBpO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBzdHVmZiBmcm9tIHRoZSBwbG90IChGSVhNRTogdGhpcyBzaG91bGQganVzdCByZWFkXG4gICAgICAgICAgICAvLyBhIHZhbHVlIGZyb20gdGhlIHNlcmllcywgb3RoZXJ3aXNlIGl0J3MgaW1wb3NzaWJsZSB0b1xuICAgICAgICAgICAgLy8gY3VzdG9taXplKVxuICAgICAgICAgICAgaWYgKG1pbk1hcmdpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWluTWFyZ2luID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2VyaWVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBtaW5NYXJnaW4gPSBNYXRoLm1heChtaW5NYXJnaW4sIDIgKiAoc2VyaWVzW2ldLnBvaW50cy5yYWRpdXMgKyBzZXJpZXNbaV0ucG9pbnRzLmxpbmVXaWR0aC8yKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtYXJnaW5zID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IG1pbk1hcmdpbixcbiAgICAgICAgICAgICAgICByaWdodDogbWluTWFyZ2luLFxuICAgICAgICAgICAgICAgIHRvcDogbWluTWFyZ2luLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogbWluTWFyZ2luXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBjaGVjayBheGlzIGxhYmVscywgbm90ZSB3ZSBkb24ndCBjaGVjayB0aGUgYWN0dWFsXG4gICAgICAgICAgICAvLyBsYWJlbHMgYnV0IGluc3RlYWQgdXNlIHRoZSBvdmVyYWxsIHdpZHRoL2hlaWdodCB0byBub3RcbiAgICAgICAgICAgIC8vIGp1bXAgYXMgbXVjaCBhcm91bmQgd2l0aCByZXBsb3RzXG4gICAgICAgICAgICAkLmVhY2goYWxsQXhlcygpLCBmdW5jdGlvbiAoXywgYXhpcykge1xuICAgICAgICAgICAgICAgIGlmIChheGlzLnJlc2VydmVTcGFjZSAmJiBheGlzLnRpY2tzICYmIGF4aXMudGlja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChheGlzLmRpcmVjdGlvbiA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbnMubGVmdCA9IE1hdGgubWF4KG1hcmdpbnMubGVmdCwgYXhpcy5sYWJlbFdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5zLnJpZ2h0ID0gTWF0aC5tYXgobWFyZ2lucy5yaWdodCwgYXhpcy5sYWJlbFdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5zLmJvdHRvbSA9IE1hdGgubWF4KG1hcmdpbnMuYm90dG9tLCBheGlzLmxhYmVsSGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5zLnRvcCA9IE1hdGgubWF4KG1hcmdpbnMudG9wLCBheGlzLmxhYmVsSGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGxvdE9mZnNldC5sZWZ0ID0gTWF0aC5jZWlsKE1hdGgubWF4KG1hcmdpbnMubGVmdCwgcGxvdE9mZnNldC5sZWZ0KSk7XG4gICAgICAgICAgICBwbG90T2Zmc2V0LnJpZ2h0ID0gTWF0aC5jZWlsKE1hdGgubWF4KG1hcmdpbnMucmlnaHQsIHBsb3RPZmZzZXQucmlnaHQpKTtcbiAgICAgICAgICAgIHBsb3RPZmZzZXQudG9wID0gTWF0aC5jZWlsKE1hdGgubWF4KG1hcmdpbnMudG9wLCBwbG90T2Zmc2V0LnRvcCkpO1xuICAgICAgICAgICAgcGxvdE9mZnNldC5ib3R0b20gPSBNYXRoLmNlaWwoTWF0aC5tYXgobWFyZ2lucy5ib3R0b20sIHBsb3RPZmZzZXQuYm90dG9tKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXR1cEdyaWQoKSB7XG4gICAgICAgICAgICB2YXIgaSwgYXhlcyA9IGFsbEF4ZXMoKSwgc2hvd0dyaWQgPSBvcHRpb25zLmdyaWQuc2hvdztcblxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcGxvdCdzIG9mZnNldCBmcm9tIHRoZSBlZGdlIG9mIHRoZSBjYW52YXNcblxuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBwbG90T2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmdpbiA9IG9wdGlvbnMuZ3JpZC5tYXJnaW4gfHwgMDtcbiAgICAgICAgICAgICAgICBwbG90T2Zmc2V0W2FdID0gdHlwZW9mIG1hcmdpbiA9PSBcIm51bWJlclwiID8gbWFyZ2luIDogbWFyZ2luW2FdIHx8IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV4ZWN1dGVIb29rcyhob29rcy5wcm9jZXNzT2Zmc2V0LCBbcGxvdE9mZnNldF0pO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZ3JpZCBpcyB2aXNpYmxlLCBhZGQgaXRzIGJvcmRlciB3aWR0aCB0byB0aGUgb2Zmc2V0XG5cbiAgICAgICAgICAgIGZvciAodmFyIGEgaW4gcGxvdE9mZnNldCkge1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihvcHRpb25zLmdyaWQuYm9yZGVyV2lkdGgpID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxvdE9mZnNldFthXSArPSBzaG93R3JpZCA/IG9wdGlvbnMuZ3JpZC5ib3JkZXJXaWR0aFthXSA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbG90T2Zmc2V0W2FdICs9IHNob3dHcmlkID8gb3B0aW9ucy5ncmlkLmJvcmRlcldpZHRoIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZWFjaChheGVzLCBmdW5jdGlvbiAoXywgYXhpcykge1xuICAgICAgICAgICAgICAgIHZhciBheGlzT3B0cyA9IGF4aXMub3B0aW9ucztcbiAgICAgICAgICAgICAgICBheGlzLnNob3cgPSBheGlzT3B0cy5zaG93ID09IG51bGwgPyBheGlzLnVzZWQgOiBheGlzT3B0cy5zaG93O1xuICAgICAgICAgICAgICAgIGF4aXMucmVzZXJ2ZVNwYWNlID0gYXhpc09wdHMucmVzZXJ2ZVNwYWNlID09IG51bGwgPyBheGlzLnNob3cgOiBheGlzT3B0cy5yZXNlcnZlU3BhY2U7XG4gICAgICAgICAgICAgICAgc2V0UmFuZ2UoYXhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNob3dHcmlkKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWxsb2NhdGVkQXhlcyA9ICQuZ3JlcChheGVzLCBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpcy5zaG93IHx8IGF4aXMucmVzZXJ2ZVNwYWNlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKGFsbG9jYXRlZEF4ZXMsIGZ1bmN0aW9uIChfLCBheGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIHRpY2tzXG4gICAgICAgICAgICAgICAgICAgIHNldHVwVGlja0dlbmVyYXRpb24oYXhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpY2tzKGF4aXMpO1xuICAgICAgICAgICAgICAgICAgICBzbmFwUmFuZ2VUb1RpY2tzKGF4aXMsIGF4aXMudGlja3MpO1xuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIGxhYmVsV2lkdGgvSGVpZ2h0IGZvciBheGlzXG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVUaWNrTGFiZWxzKGF4aXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhbGwgZGltZW5zaW9ucyBjYWxjdWxhdGVkLCB3ZSBjYW4gY29tcHV0ZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBheGlzIGJvdW5kaW5nIGJveGVzLCBzdGFydCBmcm9tIHRoZSBvdXRzaWRlXG4gICAgICAgICAgICAgICAgLy8gKHJldmVyc2Ugb3JkZXIpXG4gICAgICAgICAgICAgICAgZm9yIChpID0gYWxsb2NhdGVkQXhlcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcbiAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVBeGlzQm94Rmlyc3RQaGFzZShhbGxvY2F0ZWRBeGVzW2ldKTtcblxuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSd2ZSBnb3QgZW5vdWdoIHNwYWNlIGZvciB0aGluZ3MgdGhhdFxuICAgICAgICAgICAgICAgIC8vIG1pZ2h0IHN0aWNrIG91dFxuICAgICAgICAgICAgICAgIGFkanVzdExheW91dEZvclRoaW5nc1N0aWNraW5nT3V0KCk7XG5cbiAgICAgICAgICAgICAgICAkLmVhY2goYWxsb2NhdGVkQXhlcywgZnVuY3Rpb24gKF8sIGF4aXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVBeGlzQm94U2Vjb25kUGhhc2UoYXhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBsb3RXaWR0aCA9IHN1cmZhY2Uud2lkdGggLSBwbG90T2Zmc2V0LmxlZnQgLSBwbG90T2Zmc2V0LnJpZ2h0O1xuICAgICAgICAgICAgcGxvdEhlaWdodCA9IHN1cmZhY2UuaGVpZ2h0IC0gcGxvdE9mZnNldC5ib3R0b20gLSBwbG90T2Zmc2V0LnRvcDtcblxuICAgICAgICAgICAgLy8gbm93IHdlIGdvdCB0aGUgcHJvcGVyIHBsb3QgZGltZW5zaW9ucywgd2UgY2FuIGNvbXB1dGUgdGhlIHNjYWxpbmdcbiAgICAgICAgICAgICQuZWFjaChheGVzLCBmdW5jdGlvbiAoXywgYXhpcykge1xuICAgICAgICAgICAgICAgIHNldFRyYW5zZm9ybWF0aW9uSGVscGVycyhheGlzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2hvd0dyaWQpIHtcbiAgICAgICAgICAgICAgICBkcmF3QXhpc0xhYmVscygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnNlcnRMZWdlbmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFJhbmdlKGF4aXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRzID0gYXhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIG1pbiA9ICsob3B0cy5taW4gIT0gbnVsbCA/IG9wdHMubWluIDogYXhpcy5kYXRhbWluKSxcbiAgICAgICAgICAgICAgICBtYXggPSArKG9wdHMubWF4ICE9IG51bGwgPyBvcHRzLm1heCA6IGF4aXMuZGF0YW1heCksXG4gICAgICAgICAgICAgICAgZGVsdGEgPSBtYXggLSBtaW47XG5cbiAgICAgICAgICAgIGlmIChkZWx0YSA9PSAwLjApIHtcbiAgICAgICAgICAgICAgICAvLyBkZWdlbmVyYXRlIGNhc2VcbiAgICAgICAgICAgICAgICB2YXIgd2lkZW4gPSBtYXggPT0gMCA/IDEgOiAwLjAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMubWluID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1pbiAtPSB3aWRlbjtcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgd2lkZW4gbWF4IGlmIHdlIGNvdWxkbid0IHdpZGVuIG1pbiB0byBlbnN1cmUgd2VcbiAgICAgICAgICAgICAgICAvLyBkb24ndCBmYWxsIGludG8gbWluID09IG1heCB3aGljaCBkb2Vzbid0IHdvcmtcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5tYXggPT0gbnVsbCB8fCBvcHRzLm1pbiAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtYXggKz0gd2lkZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zaWRlciBhdXRvc2NhbGluZ1xuICAgICAgICAgICAgICAgIHZhciBtYXJnaW4gPSBvcHRzLmF1dG9zY2FsZU1hcmdpbjtcbiAgICAgICAgICAgICAgICBpZiAobWFyZ2luICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMubWluID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbiAtPSBkZWx0YSAqIG1hcmdpbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBnbyBiZWxvdyB6ZXJvIGlmIGFsbCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZSBwb3NpdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbiA8IDAgJiYgYXhpcy5kYXRhbWluICE9IG51bGwgJiYgYXhpcy5kYXRhbWluID49IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tYXggPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4ICs9IGRlbHRhICogbWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heCA+IDAgJiYgYXhpcy5kYXRhbWF4ICE9IG51bGwgJiYgYXhpcy5kYXRhbWF4IDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXMubWluID0gbWluO1xuICAgICAgICAgICAgYXhpcy5tYXggPSBtYXg7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXR1cFRpY2tHZW5lcmF0aW9uKGF4aXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRzID0gYXhpcy5vcHRpb25zO1xuXG4gICAgICAgICAgICAvLyBlc3RpbWF0ZSBudW1iZXIgb2YgdGlja3NcbiAgICAgICAgICAgIHZhciBub1RpY2tzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnRpY2tzID09IFwibnVtYmVyXCIgJiYgb3B0cy50aWNrcyA+IDApXG4gICAgICAgICAgICAgICAgbm9UaWNrcyA9IG9wdHMudGlja3M7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgLy8gaGV1cmlzdGljIGJhc2VkIG9uIHRoZSBtb2RlbCBhKnNxcnQoeCkgZml0dGVkIHRvXG4gICAgICAgICAgICAgICAgLy8gc29tZSBkYXRhIHBvaW50cyB0aGF0IHNlZW1lZCByZWFzb25hYmxlXG4gICAgICAgICAgICAgICAgbm9UaWNrcyA9IDAuMyAqIE1hdGguc3FydChheGlzLmRpcmVjdGlvbiA9PSBcInhcIiA/IHN1cmZhY2Uud2lkdGggOiBzdXJmYWNlLmhlaWdodCk7XG5cbiAgICAgICAgICAgIHZhciBkZWx0YSA9IChheGlzLm1heCAtIGF4aXMubWluKSAvIG5vVGlja3MsXG4gICAgICAgICAgICAgICAgZGVjID0gLU1hdGguZmxvb3IoTWF0aC5sb2coZGVsdGEpIC8gTWF0aC5MTjEwKSxcbiAgICAgICAgICAgICAgICBtYXhEZWMgPSBvcHRzLnRpY2tEZWNpbWFscztcblxuICAgICAgICAgICAgaWYgKG1heERlYyAhPSBudWxsICYmIGRlYyA+IG1heERlYykge1xuICAgICAgICAgICAgICAgIGRlYyA9IG1heERlYztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG1hZ24gPSBNYXRoLnBvdygxMCwgLWRlYyksXG4gICAgICAgICAgICAgICAgbm9ybSA9IGRlbHRhIC8gbWFnbiwgLy8gbm9ybSBpcyBiZXR3ZWVuIDEuMCBhbmQgMTAuMFxuICAgICAgICAgICAgICAgIHNpemU7XG5cbiAgICAgICAgICAgIGlmIChub3JtIDwgMS41KSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vcm0gPCAzKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDI7XG4gICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciAyLjUsIHJlcXVpcmVzIGFuIGV4dHJhIGRlY2ltYWxcbiAgICAgICAgICAgICAgICBpZiAobm9ybSA+IDIuMjUgJiYgKG1heERlYyA9PSBudWxsIHx8IGRlYyArIDEgPD0gbWF4RGVjKSkge1xuICAgICAgICAgICAgICAgICAgICBzaXplID0gMi41O1xuICAgICAgICAgICAgICAgICAgICArK2RlYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vcm0gPCA3LjUpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gNTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDEwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzaXplICo9IG1hZ247XG5cbiAgICAgICAgICAgIGlmIChvcHRzLm1pblRpY2tTaXplICE9IG51bGwgJiYgc2l6ZSA8IG9wdHMubWluVGlja1NpemUpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gb3B0cy5taW5UaWNrU2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXhpcy5kZWx0YSA9IGRlbHRhO1xuICAgICAgICAgICAgYXhpcy50aWNrRGVjaW1hbHMgPSBNYXRoLm1heCgwLCBtYXhEZWMgIT0gbnVsbCA/IG1heERlYyA6IGRlYyk7XG4gICAgICAgICAgICBheGlzLnRpY2tTaXplID0gb3B0cy50aWNrU2l6ZSB8fCBzaXplO1xuXG4gICAgICAgICAgICAvLyBUaW1lIG1vZGUgd2FzIG1vdmVkIHRvIGEgcGx1Zy1pbiBpbiAwLjgsIGFuZCBzaW5jZSBzbyBtYW55IHBlb3BsZSB1c2UgaXRcbiAgICAgICAgICAgIC8vIHdlJ2xsIGFkZCBhbiBlc3BlY2lhbGx5IGZyaWVuZGx5IHJlbWluZGVyIHRvIG1ha2Ugc3VyZSB0aGV5IGluY2x1ZGVkIGl0LlxuXG4gICAgICAgICAgICBpZiAob3B0cy5tb2RlID09IFwidGltZVwiICYmICFheGlzLnRpY2tHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaW1lIG1vZGUgcmVxdWlyZXMgdGhlIGZsb3QudGltZSBwbHVnaW4uXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGbG90IHN1cHBvcnRzIGJhc2UtMTAgYXhlczsgYW55IG90aGVyIG1vZGUgZWxzZSBpcyBoYW5kbGVkIGJ5IGEgcGx1Zy1pbixcbiAgICAgICAgICAgIC8vIGxpa2UgZmxvdC50aW1lLmpzLlxuXG4gICAgICAgICAgICBpZiAoIWF4aXMudGlja0dlbmVyYXRvcikge1xuXG4gICAgICAgICAgICAgICAgYXhpcy50aWNrR2VuZXJhdG9yID0gZnVuY3Rpb24gKGF4aXMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGlja3MgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZmxvb3JJbkJhc2UoYXhpcy5taW4sIGF4aXMudGlja1NpemUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTnVtYmVyLk5hTixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXY7XG5cbiAgICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gc3RhcnQgKyBpICogYXhpcy50aWNrU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tzLnB1c2godik7XG4gICAgICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKHYgPCBheGlzLm1heCAmJiB2ICE9IHByZXYpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGlja3M7XG4gICAgICAgICAgICAgICAgfTtcblxuXHRcdFx0XHRheGlzLnRpY2tGb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsdWUsIGF4aXMpIHtcblxuXHRcdFx0XHRcdHZhciBmYWN0b3IgPSBheGlzLnRpY2tEZWNpbWFscyA/IE1hdGgucG93KDEwLCBheGlzLnRpY2tEZWNpbWFscykgOiAxO1xuXHRcdFx0XHRcdHZhciBmb3JtYXR0ZWQgPSBcIlwiICsgTWF0aC5yb3VuZCh2YWx1ZSAqIGZhY3RvcikgLyBmYWN0b3I7XG5cblx0XHRcdFx0XHQvLyBJZiB0aWNrRGVjaW1hbHMgd2FzIHNwZWNpZmllZCwgZW5zdXJlIHRoYXQgd2UgaGF2ZSBleGFjdGx5IHRoYXRcblx0XHRcdFx0XHQvLyBtdWNoIHByZWNpc2lvbjsgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIHZhbHVlJ3Mgb3duIHByZWNpc2lvbi5cblxuXHRcdFx0XHRcdGlmIChheGlzLnRpY2tEZWNpbWFscyAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHR2YXIgZGVjaW1hbCA9IGZvcm1hdHRlZC5pbmRleE9mKFwiLlwiKTtcblx0XHRcdFx0XHRcdHZhciBwcmVjaXNpb24gPSBkZWNpbWFsID09IC0xID8gMCA6IGZvcm1hdHRlZC5sZW5ndGggLSBkZWNpbWFsIC0gMTtcblx0XHRcdFx0XHRcdGlmIChwcmVjaXNpb24gPCBheGlzLnRpY2tEZWNpbWFscykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKHByZWNpc2lvbiA/IGZvcm1hdHRlZCA6IGZvcm1hdHRlZCArIFwiLlwiKSArIChcIlwiICsgZmFjdG9yKS5zdWJzdHIoMSwgYXhpcy50aWNrRGVjaW1hbHMgLSBwcmVjaXNpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0cy50aWNrRm9ybWF0dGVyKSlcbiAgICAgICAgICAgICAgICBheGlzLnRpY2tGb3JtYXR0ZXIgPSBmdW5jdGlvbiAodiwgYXhpcykgeyByZXR1cm4gXCJcIiArIG9wdHMudGlja0Zvcm1hdHRlcih2LCBheGlzKTsgfTtcblxuICAgICAgICAgICAgaWYgKG9wdHMuYWxpZ25UaWNrc1dpdGhBeGlzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3RoZXJBeGlzID0gKGF4aXMuZGlyZWN0aW9uID09IFwieFwiID8geGF4ZXMgOiB5YXhlcylbb3B0cy5hbGlnblRpY2tzV2l0aEF4aXMgLSAxXTtcbiAgICAgICAgICAgICAgICBpZiAob3RoZXJBeGlzICYmIG90aGVyQXhpcy51c2VkICYmIG90aGVyQXhpcyAhPSBheGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNpZGVyIHNuYXBwaW5nIG1pbi9tYXggdG8gb3V0ZXJtb3N0IG5pY2UgdGlja3NcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5pY2VUaWNrcyA9IGF4aXMudGlja0dlbmVyYXRvcihheGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5pY2VUaWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5taW4gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzLm1pbiA9IE1hdGgubWluKGF4aXMubWluLCBuaWNlVGlja3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMubWF4ID09IG51bGwgJiYgbmljZVRpY2tzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpcy5tYXggPSBNYXRoLm1heChheGlzLm1heCwgbmljZVRpY2tzW25pY2VUaWNrcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBheGlzLnRpY2tHZW5lcmF0b3IgPSBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSB0aWNrcywgc2NhbGVkIHRvIHRoaXMgYXhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpY2tzID0gW10sIHYsIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb3RoZXJBeGlzLnRpY2tzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IChvdGhlckF4aXMudGlja3NbaV0udiAtIG90aGVyQXhpcy5taW4pIC8gKG90aGVyQXhpcy5tYXggLSBvdGhlckF4aXMubWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gYXhpcy5taW4gKyB2ICogKGF4aXMubWF4IC0gYXhpcy5taW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tzLnB1c2godik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGlja3M7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbWlnaHQgbmVlZCBhbiBleHRyYSBkZWNpbWFsIHNpbmNlIGZvcmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyB0aWNrcyBkb24ndCBuZWNlc3NhcmlseSBmaXQgbmF0dXJhbGx5XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXhpcy5tb2RlICYmIG9wdHMudGlja0RlY2ltYWxzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYURlYyA9IE1hdGgubWF4KDAsIC1NYXRoLmZsb29yKE1hdGgubG9nKGF4aXMuZGVsdGEpIC8gTWF0aC5MTjEwKSArIDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzID0gYXhpcy50aWNrR2VuZXJhdG9yKGF4aXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHByb2NlZWQgaWYgdGhlIHRpY2sgaW50ZXJ2YWwgcm91bmRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBhbiBleHRyYSBkZWNpbWFsIGRvZXNuJ3QgZ2l2ZSB1cyBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB6ZXJvIGF0IGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHMubGVuZ3RoID4gMSAmJiAvXFwuLiowJC8udGVzdCgodHNbMV0gLSB0c1swXSkudG9GaXhlZChleHRyYURlYykpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzLnRpY2tEZWNpbWFscyA9IGV4dHJhRGVjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VGlja3MoYXhpcykge1xuICAgICAgICAgICAgdmFyIG90aWNrcyA9IGF4aXMub3B0aW9ucy50aWNrcywgdGlja3MgPSBbXTtcbiAgICAgICAgICAgIGlmIChvdGlja3MgPT0gbnVsbCB8fCAodHlwZW9mIG90aWNrcyA9PSBcIm51bWJlclwiICYmIG90aWNrcyA+IDApKVxuICAgICAgICAgICAgICAgIHRpY2tzID0gYXhpcy50aWNrR2VuZXJhdG9yKGF4aXMpO1xuICAgICAgICAgICAgZWxzZSBpZiAob3RpY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihvdGlja3MpKVxuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSB0aGUgdGlja3NcbiAgICAgICAgICAgICAgICAgICAgdGlja3MgPSBvdGlja3MoYXhpcyk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aWNrcyA9IG90aWNrcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2xlYW4gdXAvbGFiZWxpZnkgdGhlIHN1cHBsaWVkIHRpY2tzLCBjb3B5IHRoZW0gb3ZlclxuICAgICAgICAgICAgdmFyIGksIHY7XG4gICAgICAgICAgICBheGlzLnRpY2tzID0gW107XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGlja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciB0ID0gdGlja3NbaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9ICt0WzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPiAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0WzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHYgPSArdDtcbiAgICAgICAgICAgICAgICBpZiAobGFiZWwgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBheGlzLnRpY2tGb3JtYXR0ZXIodiwgYXhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTih2KSlcbiAgICAgICAgICAgICAgICAgICAgYXhpcy50aWNrcy5wdXNoKHsgdjogdiwgbGFiZWw6IGxhYmVsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc25hcFJhbmdlVG9UaWNrcyhheGlzLCB0aWNrcykge1xuICAgICAgICAgICAgaWYgKGF4aXMub3B0aW9ucy5hdXRvc2NhbGVNYXJnaW4gJiYgdGlja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIHNuYXAgdG8gdGlja3NcbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5vcHRpb25zLm1pbiA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBheGlzLm1pbiA9IE1hdGgubWluKGF4aXMubWluLCB0aWNrc1swXS52KTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5vcHRpb25zLm1heCA9PSBudWxsICYmIHRpY2tzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICAgICAgICAgIGF4aXMubWF4ID0gTWF0aC5tYXgoYXhpcy5tYXgsIHRpY2tzW3RpY2tzLmxlbmd0aCAtIDFdLnYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhdygpIHtcblxuICAgICAgICAgICAgc3VyZmFjZS5jbGVhcigpO1xuXG4gICAgICAgICAgICBleGVjdXRlSG9va3MoaG9va3MuZHJhd0JhY2tncm91bmQsIFtjdHhdKTtcblxuICAgICAgICAgICAgdmFyIGdyaWQgPSBvcHRpb25zLmdyaWQ7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgYmFja2dyb3VuZCwgaWYgYW55XG4gICAgICAgICAgICBpZiAoZ3JpZC5zaG93ICYmIGdyaWQuYmFja2dyb3VuZENvbG9yKVxuICAgICAgICAgICAgICAgIGRyYXdCYWNrZ3JvdW5kKCk7XG5cbiAgICAgICAgICAgIGlmIChncmlkLnNob3cgJiYgIWdyaWQuYWJvdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgZHJhd0dyaWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlSG9va3MoaG9va3MuZHJhd1NlcmllcywgW2N0eCwgc2VyaWVzW2ldXSk7XG4gICAgICAgICAgICAgICAgZHJhd1NlcmllcyhzZXJpZXNbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBleGVjdXRlSG9va3MoaG9va3MuZHJhdywgW2N0eF0pO1xuXG4gICAgICAgICAgICBpZiAoZ3JpZC5zaG93ICYmIGdyaWQuYWJvdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgZHJhd0dyaWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3VyZmFjZS5yZW5kZXIoKTtcblxuICAgICAgICAgICAgLy8gQSBkcmF3IGltcGxpZXMgdGhhdCBlaXRoZXIgdGhlIGF4ZXMgb3IgZGF0YSBoYXZlIGNoYW5nZWQsIHNvIHdlXG4gICAgICAgICAgICAvLyBzaG91bGQgcHJvYmFibHkgdXBkYXRlIHRoZSBvdmVybGF5IGhpZ2hsaWdodHMgYXMgd2VsbC5cblxuICAgICAgICAgICAgdHJpZ2dlclJlZHJhd092ZXJsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGV4dHJhY3RSYW5nZShyYW5nZXMsIGNvb3JkKSB7XG4gICAgICAgICAgICB2YXIgYXhpcywgZnJvbSwgdG8sIGtleSwgYXhlcyA9IGFsbEF4ZXMoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBheGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXhpcyA9IGF4ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuZGlyZWN0aW9uID09IGNvb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGNvb3JkICsgYXhpcy5uICsgXCJheGlzXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmFuZ2VzW2tleV0gJiYgYXhpcy5uID09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBjb29yZCArIFwiYXhpc1wiOyAvLyBzdXBwb3J0IHgxYXhpcyBhcyB4YXhpc1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSByYW5nZXNba2V5XS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG8gPSByYW5nZXNba2V5XS50bztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBiYWNrd2FyZHMtY29tcGF0IHN0dWZmIC0gdG8gYmUgcmVtb3ZlZCBpbiBmdXR1cmVcbiAgICAgICAgICAgIGlmICghcmFuZ2VzW2tleV0pIHtcbiAgICAgICAgICAgICAgICBheGlzID0gY29vcmQgPT0gXCJ4XCIgPyB4YXhlc1swXSA6IHlheGVzWzBdO1xuICAgICAgICAgICAgICAgIGZyb20gPSByYW5nZXNbY29vcmQgKyBcIjFcIl07XG4gICAgICAgICAgICAgICAgdG8gPSByYW5nZXNbY29vcmQgKyBcIjJcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGF1dG8tcmV2ZXJzZSBhcyBhbiBhZGRlZCBib251c1xuICAgICAgICAgICAgaWYgKGZyb20gIT0gbnVsbCAmJiB0byAhPSBudWxsICYmIGZyb20gPiB0bykge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBmcm9tO1xuICAgICAgICAgICAgICAgIGZyb20gPSB0bztcbiAgICAgICAgICAgICAgICB0byA9IHRtcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZnJvbSwgdG86IHRvLCBheGlzOiBheGlzIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3QmFja2dyb3VuZCgpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHBsb3RPZmZzZXQubGVmdCwgcGxvdE9mZnNldC50b3ApO1xuXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ2V0Q29sb3JPckdyYWRpZW50KG9wdGlvbnMuZ3JpZC5iYWNrZ3JvdW5kQ29sb3IsIHBsb3RIZWlnaHQsIDAsIFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwKVwiKTtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBwbG90V2lkdGgsIHBsb3RIZWlnaHQpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdHcmlkKCkge1xuICAgICAgICAgICAgdmFyIGksIGF4ZXMsIGJ3LCBiYztcblxuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocGxvdE9mZnNldC5sZWZ0LCBwbG90T2Zmc2V0LnRvcCk7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgbWFya2luZ3NcbiAgICAgICAgICAgIHZhciBtYXJraW5ncyA9IG9wdGlvbnMuZ3JpZC5tYXJraW5ncztcbiAgICAgICAgICAgIGlmIChtYXJraW5ncykge1xuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24obWFya2luZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4ZXMgPSBwbG90LmdldEF4ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8geG1pbiBldGMuIGlzIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB0byBiZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmVkIGluIHRoZSBmdXR1cmVcbiAgICAgICAgICAgICAgICAgICAgYXhlcy54bWluID0gYXhlcy54YXhpcy5taW47XG4gICAgICAgICAgICAgICAgICAgIGF4ZXMueG1heCA9IGF4ZXMueGF4aXMubWF4O1xuICAgICAgICAgICAgICAgICAgICBheGVzLnltaW4gPSBheGVzLnlheGlzLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgYXhlcy55bWF4ID0gYXhlcy55YXhpcy5tYXg7XG5cbiAgICAgICAgICAgICAgICAgICAgbWFya2luZ3MgPSBtYXJraW5ncyhheGVzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWFya2luZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtYXJraW5nc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHhyYW5nZSA9IGV4dHJhY3RSYW5nZShtLCBcInhcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICB5cmFuZ2UgPSBleHRyYWN0UmFuZ2UobSwgXCJ5XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbGwgaW4gbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoeHJhbmdlLmZyb20gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHhyYW5nZS5mcm9tID0geHJhbmdlLmF4aXMubWluO1xuICAgICAgICAgICAgICAgICAgICBpZiAoeHJhbmdlLnRvID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB4cmFuZ2UudG8gPSB4cmFuZ2UuYXhpcy5tYXg7XG4gICAgICAgICAgICAgICAgICAgIGlmICh5cmFuZ2UuZnJvbSA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgeXJhbmdlLmZyb20gPSB5cmFuZ2UuYXhpcy5taW47XG4gICAgICAgICAgICAgICAgICAgIGlmICh5cmFuZ2UudG8gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHlyYW5nZS50byA9IHlyYW5nZS5heGlzLm1heDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjbGlwXG4gICAgICAgICAgICAgICAgICAgIGlmICh4cmFuZ2UudG8gPCB4cmFuZ2UuYXhpcy5taW4gfHwgeHJhbmdlLmZyb20gPiB4cmFuZ2UuYXhpcy5tYXggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHlyYW5nZS50byA8IHlyYW5nZS5heGlzLm1pbiB8fCB5cmFuZ2UuZnJvbSA+IHlyYW5nZS5heGlzLm1heClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHhyYW5nZS5mcm9tID0gTWF0aC5tYXgoeHJhbmdlLmZyb20sIHhyYW5nZS5heGlzLm1pbik7XG4gICAgICAgICAgICAgICAgICAgIHhyYW5nZS50byA9IE1hdGgubWluKHhyYW5nZS50bywgeHJhbmdlLmF4aXMubWF4KTtcbiAgICAgICAgICAgICAgICAgICAgeXJhbmdlLmZyb20gPSBNYXRoLm1heCh5cmFuZ2UuZnJvbSwgeXJhbmdlLmF4aXMubWluKTtcbiAgICAgICAgICAgICAgICAgICAgeXJhbmdlLnRvID0gTWF0aC5taW4oeXJhbmdlLnRvLCB5cmFuZ2UuYXhpcy5tYXgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ZXF1YWwgPSB4cmFuZ2UuZnJvbSA9PT0geHJhbmdlLnRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgeWVxdWFsID0geXJhbmdlLmZyb20gPT09IHlyYW5nZS50bztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoeGVxdWFsICYmIHllcXVhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGRyYXdcbiAgICAgICAgICAgICAgICAgICAgeHJhbmdlLmZyb20gPSBNYXRoLmZsb29yKHhyYW5nZS5heGlzLnAyYyh4cmFuZ2UuZnJvbSkpO1xuICAgICAgICAgICAgICAgICAgICB4cmFuZ2UudG8gPSBNYXRoLmZsb29yKHhyYW5nZS5heGlzLnAyYyh4cmFuZ2UudG8pKTtcbiAgICAgICAgICAgICAgICAgICAgeXJhbmdlLmZyb20gPSBNYXRoLmZsb29yKHlyYW5nZS5heGlzLnAyYyh5cmFuZ2UuZnJvbSkpO1xuICAgICAgICAgICAgICAgICAgICB5cmFuZ2UudG8gPSBNYXRoLmZsb29yKHlyYW5nZS5heGlzLnAyYyh5cmFuZ2UudG8pKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoeGVxdWFsIHx8IHllcXVhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVXaWR0aCA9IG0ubGluZVdpZHRoIHx8IG9wdGlvbnMuZ3JpZC5tYXJraW5nc0xpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJQaXhlbCA9IGxpbmVXaWR0aCAlIDIgPyAwLjUgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gbS5jb2xvciB8fCBvcHRpb25zLmdyaWQubWFya2luZ3NDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGVxdWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4cmFuZ2UudG8gKyBzdWJQaXhlbCwgeXJhbmdlLmZyb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeHJhbmdlLnRvICsgc3ViUGl4ZWwsIHlyYW5nZS50byk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeHJhbmdlLmZyb20sIHlyYW5nZS50byArIHN1YlBpeGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHhyYW5nZS50bywgeXJhbmdlLnRvICsgc3ViUGl4ZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBtLmNvbG9yIHx8IG9wdGlvbnMuZ3JpZC5tYXJraW5nc0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHhyYW5nZS5mcm9tLCB5cmFuZ2UudG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHJhbmdlLnRvIC0geHJhbmdlLmZyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeXJhbmdlLmZyb20gLSB5cmFuZ2UudG8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkcmF3IHRoZSB0aWNrc1xuICAgICAgICAgICAgYXhlcyA9IGFsbEF4ZXMoKTtcbiAgICAgICAgICAgIGJ3ID0gb3B0aW9ucy5ncmlkLmJvcmRlcldpZHRoO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGF4ZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgYXhpcyA9IGF4ZXNbal0sIGJveCA9IGF4aXMuYm94LFxuICAgICAgICAgICAgICAgICAgICB0ID0gYXhpcy50aWNrTGVuZ3RoLCB4LCB5LCB4b2ZmLCB5b2ZmO1xuICAgICAgICAgICAgICAgIGlmICghYXhpcy5zaG93IHx8IGF4aXMudGlja3MubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBlZGdlc1xuICAgICAgICAgICAgICAgIGlmIChheGlzLmRpcmVjdGlvbiA9PSBcInhcIikge1xuICAgICAgICAgICAgICAgICAgICB4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT0gXCJmdWxsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gKGF4aXMucG9zaXRpb24gPT0gXCJ0b3BcIiA/IDAgOiBwbG90SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGJveC50b3AgLSBwbG90T2Zmc2V0LnRvcCArIChheGlzLnBvc2l0aW9uID09IFwidG9wXCIgPyBib3guaGVpZ2h0IDogMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT0gXCJmdWxsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gKGF4aXMucG9zaXRpb24gPT0gXCJsZWZ0XCIgPyAwIDogcGxvdFdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGJveC5sZWZ0IC0gcGxvdE9mZnNldC5sZWZ0ICsgKGF4aXMucG9zaXRpb24gPT0gXCJsZWZ0XCIgPyBib3gud2lkdGggOiAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBkcmF3IHRpY2sgYmFyXG4gICAgICAgICAgICAgICAgaWYgKCFheGlzLmlubmVybW9zdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBheGlzLm9wdGlvbnMuY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgeG9mZiA9IHlvZmYgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy5kaXJlY3Rpb24gPT0gXCJ4XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB4b2ZmID0gcGxvdFdpZHRoICsgMTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgeW9mZiA9IHBsb3RIZWlnaHQgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdHgubGluZVdpZHRoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChheGlzLmRpcmVjdGlvbiA9PSBcInhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLmZsb29yKHkpICsgMC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gTWF0aC5mbG9vcih4KSArIDAuNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIHhvZmYsIHkgKyB5b2ZmKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGRyYXcgdGlja3NcblxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGF4aXMub3B0aW9ucy50aWNrQ29sb3I7XG5cbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGF4aXMudGlja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBheGlzLnRpY2tzW2ldLnY7XG5cbiAgICAgICAgICAgICAgICAgICAgeG9mZiA9IHlvZmYgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih2KSB8fCB2IDwgYXhpcy5taW4gfHwgdiA+IGF4aXMubWF4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBza2lwIHRob3NlIGx5aW5nIG9uIHRoZSBheGVzIGlmIHdlIGdvdCBhIGJvcmRlclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHQgPT0gXCJmdWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoKHR5cGVvZiBidyA9PSBcIm9iamVjdFwiICYmIGJ3W2F4aXMucG9zaXRpb25dID4gMCkgfHwgYncgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICh2ID09IGF4aXMubWluIHx8IHYgPT0gYXhpcy5tYXgpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChheGlzLmRpcmVjdGlvbiA9PSBcInhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGF4aXMucDJjKHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeW9mZiA9IHQgPT0gXCJmdWxsXCIgPyAtcGxvdEhlaWdodCA6IHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChheGlzLnBvc2l0aW9uID09IFwidG9wXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeW9mZiA9IC15b2ZmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGF4aXMucDJjKHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeG9mZiA9IHQgPT0gXCJmdWxsXCIgPyAtcGxvdFdpZHRoIDogdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMucG9zaXRpb24gPT0gXCJsZWZ0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeG9mZiA9IC14b2ZmO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5saW5lV2lkdGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMuZGlyZWN0aW9uID09IFwieFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHgpICsgMC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLmZsb29yKHkpICsgMC41O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgeG9mZiwgeSArIHlvZmYpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBkcmF3IGJvcmRlclxuICAgICAgICAgICAgaWYgKGJ3KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZWl0aGVyIGJvcmRlcldpZHRoIG9yIGJvcmRlckNvbG9yIGlzIGFuIG9iamVjdCwgdGhlbiBkcmF3IHRoZSBib3JkZXJcbiAgICAgICAgICAgICAgICAvLyBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiBhcyBvbmUgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgICAgYmMgPSBvcHRpb25zLmdyaWQuYm9yZGVyQ29sb3I7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGJ3ID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGJjID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYncgPSB7dG9wOiBidywgcmlnaHQ6IGJ3LCBib3R0b206IGJ3LCBsZWZ0OiBid307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiYyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmMgPSB7dG9wOiBiYywgcmlnaHQ6IGJjLCBib3R0b206IGJjLCBsZWZ0OiBiY307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYncudG9wID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYmMudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJ3LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCAtIGJ3LmxlZnQsIDAgLSBidy50b3AvMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHBsb3RXaWR0aCwgMCAtIGJ3LnRvcC8yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChidy5yaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGJjLnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJ3LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhwbG90V2lkdGggKyBidy5yaWdodCAvIDIsIDAgLSBidy50b3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhwbG90V2lkdGggKyBidy5yaWdodCAvIDIsIHBsb3RIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ3LmJvdHRvbSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGJjLmJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBidy5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHBsb3RXaWR0aCArIGJ3LnJpZ2h0LCBwbG90SGVpZ2h0ICsgYncuYm90dG9tIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDAsIHBsb3RIZWlnaHQgKyBidy5ib3R0b20gLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChidy5sZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYmMubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBidy5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygwIC0gYncubGVmdC8yLCBwbG90SGVpZ2h0ICsgYncuYm90dG9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oMC0gYncubGVmdC8yLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGJ3O1xuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLmdyaWQuYm9yZGVyQ29sb3I7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KC1idy8yLCAtYncvMiwgcGxvdFdpZHRoICsgYncsIHBsb3RIZWlnaHQgKyBidyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0F4aXNMYWJlbHMoKSB7XG5cbiAgICAgICAgICAgICQuZWFjaChhbGxBeGVzKCksIGZ1bmN0aW9uIChfLCBheGlzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJveCA9IGF4aXMuYm94LFxuICAgICAgICAgICAgICAgICAgICBsZWdhY3lTdHlsZXMgPSBheGlzLmRpcmVjdGlvbiArIFwiQXhpcyBcIiArIGF4aXMuZGlyZWN0aW9uICsgYXhpcy5uICsgXCJBeGlzXCIsXG4gICAgICAgICAgICAgICAgICAgIGxheWVyID0gXCJmbG90LVwiICsgYXhpcy5kaXJlY3Rpb24gKyBcIi1heGlzIGZsb3QtXCIgKyBheGlzLmRpcmVjdGlvbiArIGF4aXMubiArIFwiLWF4aXMgXCIgKyBsZWdhY3lTdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIGZvbnQgPSBheGlzLm9wdGlvbnMuZm9udCB8fCBcImZsb3QtdGljay1sYWJlbCB0aWNrTGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgdGljaywgeCwgeSwgaGFsaWduLCB2YWxpZ247XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGV4dCBiZWZvcmUgY2hlY2tpbmcgZm9yIGF4aXMuc2hvdyBhbmQgdGlja3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBwbHVnaW5zLCBsaWtlIGZsb3QtdGlja3JvdG9yLCB0aGF0IGRyYXcgdGhlaXIgb3duXG4gICAgICAgICAgICAgICAgLy8gdGljayBsYWJlbHMgd2lsbCBlbmQgdXAgd2l0aCBib3RoIHRoZWlycyBhbmQgdGhlIGRlZmF1bHRzLlxuXG4gICAgICAgICAgICAgICAgc3VyZmFjZS5yZW1vdmVUZXh0KGxheWVyKTtcblxuICAgICAgICAgICAgICAgIGlmICghYXhpcy5zaG93IHx8IGF4aXMudGlja3MubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXhpcy50aWNrcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRpY2sgPSBheGlzLnRpY2tzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpY2subGFiZWwgfHwgdGljay52IDwgYXhpcy5taW4gfHwgdGljay52ID4gYXhpcy5tYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy5kaXJlY3Rpb24gPT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gcGxvdE9mZnNldC5sZWZ0ICsgYXhpcy5wMmModGljay52KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChheGlzLnBvc2l0aW9uID09IFwiYm90dG9tXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gYm94LnRvcCArIGJveC5wYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gYm94LnRvcCArIGJveC5oZWlnaHQgLSBib3gucGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZ24gPSBcImJvdHRvbVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWduID0gXCJtaWRkbGVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBwbG90T2Zmc2V0LnRvcCArIGF4aXMucDJjKHRpY2sudik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy5wb3NpdGlvbiA9PSBcImxlZnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBib3gubGVmdCArIGJveC53aWR0aCAtIGJveC5wYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbGlnbiA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGJveC5sZWZ0ICsgYm94LnBhZGRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzdXJmYWNlLmFkZFRleHQobGF5ZXIsIHgsIHksIHRpY2subGFiZWwsIGZvbnQsIG51bGwsIG51bGwsIGhhbGlnbiwgdmFsaWduKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdTZXJpZXMoc2VyaWVzKSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmxpbmVzLnNob3cpXG4gICAgICAgICAgICAgICAgZHJhd1Nlcmllc0xpbmVzKHNlcmllcyk7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmJhcnMuc2hvdylcbiAgICAgICAgICAgICAgICBkcmF3U2VyaWVzQmFycyhzZXJpZXMpO1xuICAgICAgICAgICAgaWYgKHNlcmllcy5wb2ludHMuc2hvdylcbiAgICAgICAgICAgICAgICBkcmF3U2VyaWVzUG9pbnRzKHNlcmllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3U2VyaWVzTGluZXMoc2VyaWVzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBwbG90TGluZShkYXRhcG9pbnRzLCB4b2Zmc2V0LCB5b2Zmc2V0LCBheGlzeCwgYXhpc3kpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gZGF0YXBvaW50cy5wb2ludHMsXG4gICAgICAgICAgICAgICAgICAgIHBzID0gZGF0YXBvaW50cy5wb2ludHNpemUsXG4gICAgICAgICAgICAgICAgICAgIHByZXZ4ID0gbnVsbCwgcHJldnkgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBwczsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gcG9pbnRzW2kgLSBwc10sIHkxID0gcG9pbnRzW2kgLSBwcyArIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBwb2ludHNbaV0sIHkyID0gcG9pbnRzW2kgKyAxXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoeDEgPT0gbnVsbCB8fCB4MiA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpcCB3aXRoIHltaW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHkxIDw9IHkyICYmIHkxIDwgYXhpc3kubWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeTIgPCBheGlzeS5taW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7ICAgLy8gbGluZSBzZWdtZW50IGlzIG91dHNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXB1dGUgbmV3IGludGVyc2VjdGlvbiBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgeDEgPSAoYXhpc3kubWluIC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGF4aXN5Lm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5MiA8PSB5MSAmJiB5MiA8IGF4aXN5Lm1pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkxIDwgYXhpc3kubWluKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSAoYXhpc3kubWluIC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGF4aXN5Lm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaXAgd2l0aCB5bWF4XG4gICAgICAgICAgICAgICAgICAgIGlmICh5MSA+PSB5MiAmJiB5MSA+IGF4aXN5Lm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkyID4gYXhpc3kubWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDEgPSAoYXhpc3kubWF4IC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGF4aXN5Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5MiA+PSB5MSAmJiB5MiA+IGF4aXN5Lm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkxID4gYXhpc3kubWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSAoYXhpc3kubWF4IC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGF4aXN5Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaXAgd2l0aCB4bWluXG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSA8PSB4MiAmJiB4MSA8IGF4aXN4Lm1pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgyIDwgYXhpc3gubWluKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSAoYXhpc3gubWluIC0geDEpIC8gKHgyIC0geDEpICogKHkyIC0geTEpICsgeTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MSA9IGF4aXN4Lm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4MiA8PSB4MSAmJiB4MiA8IGF4aXN4Lm1pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgxIDwgYXhpc3gubWluKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSAoYXhpc3gubWluIC0geDEpIC8gKHgyIC0geDEpICogKHkyIC0geTEpICsgeTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MiA9IGF4aXN4Lm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaXAgd2l0aCB4bWF4XG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSA+PSB4MiAmJiB4MSA+IGF4aXN4Lm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgyID4gYXhpc3gubWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSAoYXhpc3gubWF4IC0geDEpIC8gKHgyIC0geDEpICogKHkyIC0geTEpICsgeTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MSA9IGF4aXN4Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4MiA+PSB4MSAmJiB4MiA+IGF4aXN4Lm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgxID4gYXhpc3gubWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSAoYXhpc3gubWF4IC0geDEpIC8gKHgyIC0geDEpICogKHkyIC0geTEpICsgeTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MiA9IGF4aXN4Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSAhPSBwcmV2eCB8fCB5MSAhPSBwcmV2eSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oYXhpc3gucDJjKHgxKSArIHhvZmZzZXQsIGF4aXN5LnAyYyh5MSkgKyB5b2Zmc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBwcmV2eCA9IHgyO1xuICAgICAgICAgICAgICAgICAgICBwcmV2eSA9IHkyO1xuICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGF4aXN4LnAyYyh4MikgKyB4b2Zmc2V0LCBheGlzeS5wMmMoeTIpICsgeW9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcGxvdExpbmVBcmVhKGRhdGFwb2ludHMsIGF4aXN4LCBheGlzeSkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSBkYXRhcG9pbnRzLnBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgcHMgPSBkYXRhcG9pbnRzLnBvaW50c2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgYXhpc3kubWluKSwgYXhpc3kubWF4KSxcbiAgICAgICAgICAgICAgICAgICAgaSA9IDAsIHRvcCwgYXJlYU9wZW4gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgeXBvcyA9IDEsIHNlZ21lbnRTdGFydCA9IDAsIHNlZ21lbnRFbmQgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gd2UgcHJvY2VzcyBlYWNoIHNlZ21lbnQgaW4gdHdvIHR1cm5zLCBmaXJzdCBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHRvIHNrZXRjaCBvdXQgdG9wLCB0aGVuIG9uY2Ugd2UgaGl0IHRoZVxuICAgICAgICAgICAgICAgIC8vIGVuZCB3ZSBnbyBiYWNrd2FyZHMgdG8gc2tldGNoIHRoZSBib3R0b21cbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHMgPiAwICYmIGkgPiBwb2ludHMubGVuZ3RoICsgcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBpICs9IHBzOyAvLyBwcyBpcyBuZWdhdGl2ZSBpZiBnb2luZyBiYWNrd2FyZHNcblxuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBwb2ludHNbaSAtIHBzXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkxID0gcG9pbnRzW2kgLSBwcyArIHlwb3NdLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBwb2ludHNbaV0sIHkyID0gcG9pbnRzW2kgKyB5cG9zXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYU9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcyA+IDAgJiYgeDEgIT0gbnVsbCAmJiB4MiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXQgdHVybmluZyBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRFbmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBzID0gLXBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlwb3MgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHMgPCAwICYmIGkgPT0gc2VnbWVudFN0YXJ0ICsgcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb25lIHdpdGggdGhlIHJldmVyc2Ugc3dlZXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHMgPSAtcHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeXBvcyA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHNlZ21lbnRTdGFydCA9IHNlZ21lbnRFbmQgKyBwcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSA9PSBudWxsIHx8IHgyID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjbGlwIHggdmFsdWVzXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpcCB3aXRoIHhtaW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHgxIDw9IHgyICYmIHgxIDwgYXhpc3gubWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeDIgPCBheGlzeC5taW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IChheGlzeC5taW4gLSB4MSkgLyAoeDIgLSB4MSkgKiAoeTIgLSB5MSkgKyB5MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gYXhpc3gubWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHgyIDw9IHgxICYmIHgyIDwgYXhpc3gubWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeDEgPCBheGlzeC5taW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IChheGlzeC5taW4gLSB4MSkgLyAoeDIgLSB4MSkgKiAoeTIgLSB5MSkgKyB5MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gYXhpc3gubWluO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpcCB3aXRoIHhtYXhcbiAgICAgICAgICAgICAgICAgICAgaWYgKHgxID49IHgyICYmIHgxID4gYXhpc3gubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeDIgPiBheGlzeC5tYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IChheGlzeC5tYXggLSB4MSkgLyAoeDIgLSB4MSkgKiAoeTIgLSB5MSkgKyB5MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gYXhpc3gubWF4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHgyID49IHgxICYmIHgyID4gYXhpc3gubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeDEgPiBheGlzeC5tYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IChheGlzeC5tYXggLSB4MSkgLyAoeDIgLSB4MSkgKiAoeTIgLSB5MSkgKyB5MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gYXhpc3gubWF4O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmVhT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3BlbiBhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKGF4aXN4LnAyYyh4MSksIGF4aXN5LnAyYyhib3R0b20pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdyBmaXJzdCBjaGVjayB0aGUgY2FzZSB3aGVyZSBib3RoIGlzIG91dHNpZGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkxID49IGF4aXN5Lm1heCAmJiB5MiA+PSBheGlzeS5tYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oYXhpc3gucDJjKHgxKSwgYXhpc3kucDJjKGF4aXN5Lm1heCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhheGlzeC5wMmMoeDIpLCBheGlzeS5wMmMoYXhpc3kubWF4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5MSA8PSBheGlzeS5taW4gJiYgeTIgPD0gYXhpc3kubWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGF4aXN4LnAyYyh4MSksIGF4aXN5LnAyYyhheGlzeS5taW4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oYXhpc3gucDJjKHgyKSwgYXhpc3kucDJjKGF4aXN5Lm1pbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGl0J3MgYSBiaXQgbW9yZSBjb21wbGljYXRlZCwgdGhlcmUgbWlnaHRcbiAgICAgICAgICAgICAgICAgICAgLy8gYmUgYSBmbGF0IG1heGVkIG91dCByZWN0YW5nbGUgZmlyc3QsIHRoZW4gYVxuICAgICAgICAgICAgICAgICAgICAvLyB0cmlhbmd1bGFyIGN1dG91dCBvciByZXZlcnNlOyB0byBmaW5kIHRoZXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGN1cnJlbnQgeCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxb2xkID0geDEsIHgyb2xkID0geDI7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpcCB0aGUgeSB2YWx1ZXMsIHdpdGhvdXQgc2hvcnRjdXR0aW5nLCB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyBnbyB0aHJvdWdoIGFsbCBjYXNlcyBpbiB0dXJuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpcCB3aXRoIHltaW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHkxIDw9IHkyICYmIHkxIDwgYXhpc3kubWluICYmIHkyID49IGF4aXN5Lm1pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDEgPSAoYXhpc3kubWluIC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGF4aXN5Lm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5MiA8PSB5MSAmJiB5MiA8IGF4aXN5Lm1pbiAmJiB5MSA+PSBheGlzeS5taW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gKGF4aXN5Lm1pbiAtIHkxKSAvICh5MiAtIHkxKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSBheGlzeS5taW47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjbGlwIHdpdGggeW1heFxuICAgICAgICAgICAgICAgICAgICBpZiAoeTEgPj0geTIgJiYgeTEgPiBheGlzeS5tYXggJiYgeTIgPD0gYXhpc3kubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MSA9IChheGlzeS5tYXggLSB5MSkgLyAoeTIgLSB5MSkgKiAoeDIgLSB4MSkgKyB4MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkxID0gYXhpc3kubWF4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHkyID49IHkxICYmIHkyID4gYXhpc3kubWF4ICYmIHkxIDw9IGF4aXN5Lm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSAoYXhpc3kubWF4IC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGF4aXN5Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB4IHZhbHVlIHdhcyBjaGFuZ2VkIHdlIGdvdCBhIHJlY3RhbmdsZVxuICAgICAgICAgICAgICAgICAgICAvLyB0byBmaWxsXG4gICAgICAgICAgICAgICAgICAgIGlmICh4MSAhPSB4MW9sZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhheGlzeC5wMmMoeDFvbGQpLCBheGlzeS5wMmMoeTEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0IGdvZXMgdG8gKHgxLCB5MSksIGJ1dCB3ZSBmaWxsIHRoYXQgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbGwgdHJpYW5ndWxhciBzZWN0aW9uLCB0aGlzIHNvbWV0aW1lcyByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gcmVkdW5kYW50IHBvaW50cyBpZiAoeDEsIHkxKSBoYXNuJ3QgY2hhbmdlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIHByZXZpb3VzIGxpbmUgdG8sIGJ1dCB3ZSBqdXN0IGlnbm9yZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oYXhpc3gucDJjKHgxKSwgYXhpc3kucDJjKHkxKSk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oYXhpc3gucDJjKHgyKSwgYXhpc3kucDJjKHkyKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZmlsbCB0aGUgb3RoZXIgcmVjdGFuZ2xlIGlmIGl0J3MgdGhlcmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHgyICE9IHgyb2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGF4aXN4LnAyYyh4MiksIGF4aXN5LnAyYyh5MikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhheGlzeC5wMmMoeDJvbGQpLCBheGlzeS5wMmMoeTIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocGxvdE9mZnNldC5sZWZ0LCBwbG90T2Zmc2V0LnRvcCk7XG4gICAgICAgICAgICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XG5cbiAgICAgICAgICAgIHZhciBsdyA9IHNlcmllcy5saW5lcy5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgc3cgPSBzZXJpZXMuc2hhZG93U2l6ZTtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBjb25zaWRlciBhbm90aGVyIGZvcm0gb2Ygc2hhZG93IHdoZW4gZmlsbGluZyBpcyB0dXJuZWQgb25cbiAgICAgICAgICAgIGlmIChsdyA+IDAgJiYgc3cgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZHJhdyBzaGFkb3cgYXMgYSB0aGljayBhbmQgdGhpbiBsaW5lIHdpdGggdHJhbnNwYXJlbmN5XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHN3O1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwicmdiYSgwLDAsMCwwLjEpXCI7XG4gICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gc2hhZG93IGF0IGFuZ2xlIGZyb20gdGhlIG1pZCBvZiBsaW5lXG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5QSS8xODtcbiAgICAgICAgICAgICAgICBwbG90TGluZShzZXJpZXMuZGF0YXBvaW50cywgTWF0aC5zaW4oYW5nbGUpICogKGx3LzIgKyBzdy8yKSwgTWF0aC5jb3MoYW5nbGUpICogKGx3LzIgKyBzdy8yKSwgc2VyaWVzLnhheGlzLCBzZXJpZXMueWF4aXMpO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBzdy8yO1xuICAgICAgICAgICAgICAgIHBsb3RMaW5lKHNlcmllcy5kYXRhcG9pbnRzLCBNYXRoLnNpbihhbmdsZSkgKiAobHcvMiArIHN3LzQpLCBNYXRoLmNvcyhhbmdsZSkgKiAobHcvMiArIHN3LzQpLCBzZXJpZXMueGF4aXMsIHNlcmllcy55YXhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsdztcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHNlcmllcy5jb2xvcjtcbiAgICAgICAgICAgIHZhciBmaWxsU3R5bGUgPSBnZXRGaWxsU3R5bGUoc2VyaWVzLmxpbmVzLCBzZXJpZXMuY29sb3IsIDAsIHBsb3RIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICAgICAgICAgICAgcGxvdExpbmVBcmVhKHNlcmllcy5kYXRhcG9pbnRzLCBzZXJpZXMueGF4aXMsIHNlcmllcy55YXhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsdyA+IDApXG4gICAgICAgICAgICAgICAgcGxvdExpbmUoc2VyaWVzLmRhdGFwb2ludHMsIDAsIDAsIHNlcmllcy54YXhpcywgc2VyaWVzLnlheGlzKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3U2VyaWVzUG9pbnRzKHNlcmllcykge1xuICAgICAgICAgICAgZnVuY3Rpb24gcGxvdFBvaW50cyhkYXRhcG9pbnRzLCByYWRpdXMsIGZpbGxTdHlsZSwgb2Zmc2V0LCBzaGFkb3csIGF4aXN4LCBheGlzeSwgc3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IGRhdGFwb2ludHMucG9pbnRzLCBwcyA9IGRhdGFwb2ludHMucG9pbnRzaXplO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IHBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcG9pbnRzW2ldLCB5ID0gcG9pbnRzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gbnVsbCB8fCB4IDwgYXhpc3gubWluIHx8IHggPiBheGlzeC5tYXggfHwgeSA8IGF4aXN5Lm1pbiB8fCB5ID4gYXhpc3kubWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICB4ID0gYXhpc3gucDJjKHgpO1xuICAgICAgICAgICAgICAgICAgICB5ID0gYXhpc3kucDJjKHkpICsgb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ltYm9sID09IFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgc2hhZG93ID8gTWF0aC5QSSA6IE1hdGguUEkgKiAyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbChjdHgsIHgsIHksIHJhZGl1cywgc2hhZG93KTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHBsb3RPZmZzZXQubGVmdCwgcGxvdE9mZnNldC50b3ApO1xuXG4gICAgICAgICAgICB2YXIgbHcgPSBzZXJpZXMucG9pbnRzLmxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICBzdyA9IHNlcmllcy5zaGFkb3dTaXplLFxuICAgICAgICAgICAgICAgIHJhZGl1cyA9IHNlcmllcy5wb2ludHMucmFkaXVzLFxuICAgICAgICAgICAgICAgIHN5bWJvbCA9IHNlcmllcy5wb2ludHMuc3ltYm9sO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzZXRzIHRoZSBsaW5lIHdpZHRoIHRvIDAsIHdlIGNoYW5nZSBpdCB0byBhIHZlcnkgXG4gICAgICAgICAgICAvLyBzbWFsbCB2YWx1ZS4gQSBsaW5lIHdpZHRoIG9mIDAgc2VlbXMgdG8gZm9yY2UgdGhlIGRlZmF1bHQgb2YgMS5cbiAgICAgICAgICAgIC8vIERvaW5nIHRoZSBjb25kaXRpb25hbCBoZXJlIGFsbG93cyB0aGUgc2hhZG93IHNldHRpbmcgdG8gc3RpbGwgYmUgXG4gICAgICAgICAgICAvLyBvcHRpb25hbCBldmVuIHdpdGggYSBsaW5lV2lkdGggb2YgMC5cblxuICAgICAgICAgICAgaWYoIGx3ID09IDAgKVxuICAgICAgICAgICAgICAgIGx3ID0gMC4wMDAxO1xuXG4gICAgICAgICAgICBpZiAobHcgPiAwICYmIHN3ID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGRyYXcgc2hhZG93IGluIHR3byBzdGVwc1xuICAgICAgICAgICAgICAgIHZhciB3ID0gc3cgLyAyO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB3O1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwicmdiYSgwLDAsMCwwLjEpXCI7XG4gICAgICAgICAgICAgICAgcGxvdFBvaW50cyhzZXJpZXMuZGF0YXBvaW50cywgcmFkaXVzLCBudWxsLCB3ICsgdy8yLCB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnhheGlzLCBzZXJpZXMueWF4aXMsIHN5bWJvbCk7XG5cbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMC4yKVwiO1xuICAgICAgICAgICAgICAgIHBsb3RQb2ludHMoc2VyaWVzLmRhdGFwb2ludHMsIHJhZGl1cywgbnVsbCwgdy8yLCB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnhheGlzLCBzZXJpZXMueWF4aXMsIHN5bWJvbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsdztcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHNlcmllcy5jb2xvcjtcbiAgICAgICAgICAgIHBsb3RQb2ludHMoc2VyaWVzLmRhdGFwb2ludHMsIHJhZGl1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgZ2V0RmlsbFN0eWxlKHNlcmllcy5wb2ludHMsIHNlcmllcy5jb2xvciksIDAsIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMueGF4aXMsIHNlcmllcy55YXhpcywgc3ltYm9sKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3QmFyKHgsIHksIGIsIGJhckxlZnQsIGJhclJpZ2h0LCBmaWxsU3R5bGVDYWxsYmFjaywgYXhpc3gsIGF4aXN5LCBjLCBob3Jpem9udGFsLCBsaW5lV2lkdGgpIHtcbiAgICAgICAgICAgIHZhciBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsXG4gICAgICAgICAgICAgICAgZHJhd0xlZnQsIGRyYXdSaWdodCwgZHJhd1RvcCwgZHJhd0JvdHRvbSxcbiAgICAgICAgICAgICAgICB0bXA7XG5cbiAgICAgICAgICAgIC8vIGluIGhvcml6b250YWwgbW9kZSwgd2Ugc3RhcnQgdGhlIGJhciBmcm9tIHRoZSBsZWZ0XG4gICAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGZyb20gdGhlIGJvdHRvbSBzbyBpdCBhcHBlYXJzIHRvIGJlXG4gICAgICAgICAgICAvLyBob3Jpem9udGFsIHJhdGhlciB0aGFuIHZlcnRpY2FsXG4gICAgICAgICAgICBpZiAoaG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgICAgIGRyYXdCb3R0b20gPSBkcmF3UmlnaHQgPSBkcmF3VG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkcmF3TGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxlZnQgPSBiO1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0geDtcbiAgICAgICAgICAgICAgICB0b3AgPSB5ICsgYmFyTGVmdDtcbiAgICAgICAgICAgICAgICBib3R0b20gPSB5ICsgYmFyUmlnaHQ7XG5cbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciBuZWdhdGl2ZSBiYXJzXG4gICAgICAgICAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICB0bXAgPSByaWdodDtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gdG1wO1xuICAgICAgICAgICAgICAgICAgICBkcmF3TGVmdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYXdMZWZ0ID0gZHJhd1JpZ2h0ID0gZHJhd1RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZHJhd0JvdHRvbSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxlZnQgPSB4ICsgYmFyTGVmdDtcbiAgICAgICAgICAgICAgICByaWdodCA9IHggKyBiYXJSaWdodDtcbiAgICAgICAgICAgICAgICBib3R0b20gPSBiO1xuICAgICAgICAgICAgICAgIHRvcCA9IHk7XG5cbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciBuZWdhdGl2ZSBiYXJzXG4gICAgICAgICAgICAgICAgaWYgKHRvcCA8IGJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICB0bXAgPSB0b3A7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IGJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gdG1wO1xuICAgICAgICAgICAgICAgICAgICBkcmF3Qm90dG9tID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZHJhd1RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2xpcFxuICAgICAgICAgICAgaWYgKHJpZ2h0IDwgYXhpc3gubWluIHx8IGxlZnQgPiBheGlzeC5tYXggfHxcbiAgICAgICAgICAgICAgICB0b3AgPCBheGlzeS5taW4gfHwgYm90dG9tID4gYXhpc3kubWF4KVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGxlZnQgPCBheGlzeC5taW4pIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gYXhpc3gubWluO1xuICAgICAgICAgICAgICAgIGRyYXdMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyaWdodCA+IGF4aXN4Lm1heCkge1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gYXhpc3gubWF4O1xuICAgICAgICAgICAgICAgIGRyYXdSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm90dG9tIDwgYXhpc3kubWluKSB7XG4gICAgICAgICAgICAgICAgYm90dG9tID0gYXhpc3kubWluO1xuICAgICAgICAgICAgICAgIGRyYXdCb3R0b20gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRvcCA+IGF4aXN5Lm1heCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IGF4aXN5Lm1heDtcbiAgICAgICAgICAgICAgICBkcmF3VG9wID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxlZnQgPSBheGlzeC5wMmMobGVmdCk7XG4gICAgICAgICAgICBib3R0b20gPSBheGlzeS5wMmMoYm90dG9tKTtcbiAgICAgICAgICAgIHJpZ2h0ID0gYXhpc3gucDJjKHJpZ2h0KTtcbiAgICAgICAgICAgIHRvcCA9IGF4aXN5LnAyYyh0b3ApO1xuXG4gICAgICAgICAgICAvLyBmaWxsIHRoZSBiYXJcbiAgICAgICAgICAgIGlmIChmaWxsU3R5bGVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGMuZmlsbFN0eWxlID0gZmlsbFN0eWxlQ2FsbGJhY2soYm90dG9tLCB0b3ApO1xuICAgICAgICAgICAgICAgIGMuZmlsbFJlY3QobGVmdCwgdG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZHJhdyBvdXRsaW5lXG4gICAgICAgICAgICBpZiAobGluZVdpZHRoID4gMCAmJiAoZHJhd0xlZnQgfHwgZHJhd1JpZ2h0IHx8IGRyYXdUb3AgfHwgZHJhd0JvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICBjLmJlZ2luUGF0aCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IGlubGluZSBtb3ZlVG8gaXMgYnVnZ3kgd2l0aCBleGNhbnZhc1xuICAgICAgICAgICAgICAgIGMubW92ZVRvKGxlZnQsIGJvdHRvbSk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYXdMZWZ0KVxuICAgICAgICAgICAgICAgICAgICBjLmxpbmVUbyhsZWZ0LCB0b3ApO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYy5tb3ZlVG8obGVmdCwgdG9wKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhd1RvcClcbiAgICAgICAgICAgICAgICAgICAgYy5saW5lVG8ocmlnaHQsIHRvcCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjLm1vdmVUbyhyaWdodCwgdG9wKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhd1JpZ2h0KVxuICAgICAgICAgICAgICAgICAgICBjLmxpbmVUbyhyaWdodCwgYm90dG9tKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGMubW92ZVRvKHJpZ2h0LCBib3R0b20pO1xuICAgICAgICAgICAgICAgIGlmIChkcmF3Qm90dG9tKVxuICAgICAgICAgICAgICAgICAgICBjLmxpbmVUbyhsZWZ0LCBib3R0b20pO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYy5tb3ZlVG8obGVmdCwgYm90dG9tKTtcbiAgICAgICAgICAgICAgICBjLnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd1Nlcmllc0JhcnMoc2VyaWVzKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBwbG90QmFycyhkYXRhcG9pbnRzLCBiYXJMZWZ0LCBiYXJSaWdodCwgZmlsbFN0eWxlQ2FsbGJhY2ssIGF4aXN4LCBheGlzeSkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSBkYXRhcG9pbnRzLnBvaW50cywgcHMgPSBkYXRhcG9pbnRzLnBvaW50c2l6ZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSBwcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRzW2ldID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgZHJhd0Jhcihwb2ludHNbaV0sIHBvaW50c1tpICsgMV0sIHBvaW50c1tpICsgMl0sIGJhckxlZnQsIGJhclJpZ2h0LCBmaWxsU3R5bGVDYWxsYmFjaywgYXhpc3gsIGF4aXN5LCBjdHgsIHNlcmllcy5iYXJzLmhvcml6b250YWwsIHNlcmllcy5iYXJzLmxpbmVXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwbG90T2Zmc2V0LmxlZnQsIHBsb3RPZmZzZXQudG9wKTtcblxuICAgICAgICAgICAgLy8gRklYTUU6IGZpZ3VyZSBvdXQgYSB3YXkgdG8gYWRkIHNoYWRvd3MgKGZvciBpbnN0YW5jZSBhbG9uZyB0aGUgcmlnaHQgZWRnZSlcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBzZXJpZXMuYmFycy5saW5lV2lkdGg7XG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzZXJpZXMuY29sb3I7XG5cbiAgICAgICAgICAgIHZhciBiYXJMZWZ0O1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHNlcmllcy5iYXJzLmFsaWduKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICAgICAgYmFyTGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICBiYXJMZWZ0ID0gLXNlcmllcy5iYXJzLmJhcldpZHRoO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBiYXJMZWZ0ID0gLXNlcmllcy5iYXJzLmJhcldpZHRoIC8gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGZpbGxTdHlsZUNhbGxiYWNrID0gc2VyaWVzLmJhcnMuZmlsbCA/IGZ1bmN0aW9uIChib3R0b20sIHRvcCkgeyByZXR1cm4gZ2V0RmlsbFN0eWxlKHNlcmllcy5iYXJzLCBzZXJpZXMuY29sb3IsIGJvdHRvbSwgdG9wKTsgfSA6IG51bGw7XG4gICAgICAgICAgICBwbG90QmFycyhzZXJpZXMuZGF0YXBvaW50cywgYmFyTGVmdCwgYmFyTGVmdCArIHNlcmllcy5iYXJzLmJhcldpZHRoLCBmaWxsU3R5bGVDYWxsYmFjaywgc2VyaWVzLnhheGlzLCBzZXJpZXMueWF4aXMpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZpbGxTdHlsZShmaWxsb3B0aW9ucywgc2VyaWVzQ29sb3IsIGJvdHRvbSwgdG9wKSB7XG4gICAgICAgICAgICB2YXIgZmlsbCA9IGZpbGxvcHRpb25zLmZpbGw7XG4gICAgICAgICAgICBpZiAoIWZpbGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIGlmIChmaWxsb3B0aW9ucy5maWxsQ29sb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbG9yT3JHcmFkaWVudChmaWxsb3B0aW9ucy5maWxsQ29sb3IsIGJvdHRvbSwgdG9wLCBzZXJpZXNDb2xvcik7XG5cbiAgICAgICAgICAgIHZhciBjID0gJC5jb2xvci5wYXJzZShzZXJpZXNDb2xvcik7XG4gICAgICAgICAgICBjLmEgPSB0eXBlb2YgZmlsbCA9PSBcIm51bWJlclwiID8gZmlsbCA6IDAuNDtcbiAgICAgICAgICAgIGMubm9ybWFsaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gYy50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5zZXJ0TGVnZW5kKCkge1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZWdlbmQuY29udGFpbmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAkKG9wdGlvbnMubGVnZW5kLmNvbnRhaW5lcikuaHRtbChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIuZmluZChcIi5sZWdlbmRcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5sZWdlbmQuc2hvdykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGZyYWdtZW50cyA9IFtdLCBlbnRyaWVzID0gW10sIHJvd1N0YXJ0ZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBsZiA9IG9wdGlvbnMubGVnZW5kLmxhYmVsRm9ybWF0dGVyLCBzLCBsYWJlbDtcblxuICAgICAgICAgICAgLy8gQnVpbGQgYSBsaXN0IG9mIGxlZ2VuZCBlbnRyaWVzLCB3aXRoIGVhY2ggaGF2aW5nIGEgbGFiZWwgYW5kIGEgY29sb3JcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBzID0gc2VyaWVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChzLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsID0gbGYgPyBsZihzLmxhYmVsLCBzKSA6IHMubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHMuY29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTb3J0IHRoZSBsZWdlbmQgdXNpbmcgZWl0aGVyIHRoZSBkZWZhdWx0IG9yIGEgY3VzdG9tIGNvbXBhcmF0b3JcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVnZW5kLnNvcnRlZCkge1xuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0aW9ucy5sZWdlbmQuc29ydGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLnNvcnQob3B0aW9ucy5sZWdlbmQuc29ydGVkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubGVnZW5kLnNvcnRlZCA9PSBcInJldmVyc2VcIikge1xuICAgICAgICAgICAgICAgIFx0ZW50cmllcy5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzY2VuZGluZyA9IG9wdGlvbnMubGVnZW5kLnNvcnRlZCAhPSBcImRlc2NlbmRpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgZW50cmllcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmxhYmVsID09IGIubGFiZWwgPyAwIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhLmxhYmVsIDwgYi5sYWJlbCkgIT0gYXNjZW5kaW5nID8gMSA6IC0xICAgLy8gTG9naWNhbCBYT1JcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbWFya3VwIGZvciB0aGUgbGlzdCBvZiBlbnRyaWVzLCBpbiB0aGVpciBmaW5hbCBvcmRlclxuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyArK2kpIHtcblxuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAoaSAlIG9wdGlvbnMubGVnZW5kLm5vQ29sdW1ucyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dTdGFydGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2goJzwvdHI+Jyk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKCc8dHI+Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJvd1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwibGVnZW5kQ29sb3JCb3hcIj48ZGl2IHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZCAnICsgb3B0aW9ucy5sZWdlbmQubGFiZWxCb3hCb3JkZXJDb2xvciArICc7cGFkZGluZzoxcHhcIj48ZGl2IHN0eWxlPVwid2lkdGg6NHB4O2hlaWdodDowO2JvcmRlcjo1cHggc29saWQgJyArIGVudHJ5LmNvbG9yICsgJztvdmVyZmxvdzpoaWRkZW5cIj48L2Rpdj48L2Rpdj48L3RkPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwibGVnZW5kTGFiZWxcIj4nICsgZW50cnkubGFiZWwgKyAnPC90ZD4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvd1N0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2goJzwvdHI+Jyk7XG5cbiAgICAgICAgICAgIGlmIChmcmFnbWVudHMubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgdGFibGUgPSAnPHRhYmxlIHN0eWxlPVwiZm9udC1zaXplOnNtYWxsZXI7Y29sb3I6JyArIG9wdGlvbnMuZ3JpZC5jb2xvciArICdcIj4nICsgZnJhZ21lbnRzLmpvaW4oXCJcIikgKyAnPC90YWJsZT4nO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVnZW5kLmNvbnRhaW5lciAhPSBudWxsKVxuICAgICAgICAgICAgICAgICQob3B0aW9ucy5sZWdlbmQuY29udGFpbmVyKS5odG1sKHRhYmxlKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBwID0gb3B0aW9ucy5sZWdlbmQucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIG0gPSBvcHRpb25zLmxlZ2VuZC5tYXJnaW47XG4gICAgICAgICAgICAgICAgaWYgKG1bMF0gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbSA9IFttLCBtXTtcbiAgICAgICAgICAgICAgICBpZiAocC5jaGFyQXQoMCkgPT0gXCJuXCIpXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAndG9wOicgKyAobVsxXSArIHBsb3RPZmZzZXQudG9wKSArICdweDsnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHAuY2hhckF0KDApID09IFwic1wiKVxuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gJ2JvdHRvbTonICsgKG1bMV0gKyBwbG90T2Zmc2V0LmJvdHRvbSkgKyAncHg7JztcbiAgICAgICAgICAgICAgICBpZiAocC5jaGFyQXQoMSkgPT0gXCJlXCIpXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAncmlnaHQ6JyArIChtWzBdICsgcGxvdE9mZnNldC5yaWdodCkgKyAncHg7JztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwLmNoYXJBdCgxKSA9PSBcIndcIilcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9ICdsZWZ0OicgKyAobVswXSArIHBsb3RPZmZzZXQubGVmdCkgKyAncHg7JztcbiAgICAgICAgICAgICAgICB2YXIgbGVnZW5kID0gJCgnPGRpdiBjbGFzcz1cImxlZ2VuZFwiPicgKyB0YWJsZS5yZXBsYWNlKCdzdHlsZT1cIicsICdzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOycgKyBwb3MgKyc7JykgKyAnPC9kaXY+JykuYXBwZW5kVG8ocGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxlZ2VuZC5iYWNrZ3JvdW5kT3BhY2l0eSAhPSAwLjApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHV0IGluIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcGFyYXRlbHkgdG8gYXZvaWQgYmxlbmRlZCBsYWJlbHMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGxhYmVsIGJveGVzXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gb3B0aW9ucy5sZWdlbmQuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gb3B0aW9ucy5ncmlkLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICYmIHR5cGVvZiBjID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICQuY29sb3IucGFyc2UoYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICQuY29sb3IuZXh0cmFjdChsZWdlbmQsICdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjLmEgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gbGVnZW5kLmNoaWxkcmVuKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDonICsgZGl2LndpZHRoKCkgKyAncHg7aGVpZ2h0OicgKyBkaXYuaGVpZ2h0KCkgKyAncHg7JyArIHBvcyArJ2JhY2tncm91bmQtY29sb3I6JyArIGMgKyAnO1wiPiA8L2Rpdj4nKS5wcmVwZW5kVG8obGVnZW5kKS5jc3MoJ29wYWNpdHknLCBvcHRpb25zLmxlZ2VuZC5iYWNrZ3JvdW5kT3BhY2l0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBpbnRlcmFjdGl2ZSBmZWF0dXJlc1xuXG4gICAgICAgIHZhciBoaWdobGlnaHRzID0gW10sXG4gICAgICAgICAgICByZWRyYXdUaW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAvLyByZXR1cm5zIHRoZSBkYXRhIGl0ZW0gdGhlIG1vdXNlIGlzIG92ZXIsIG9yIG51bGwgaWYgbm9uZSBpcyBmb3VuZFxuICAgICAgICBmdW5jdGlvbiBmaW5kTmVhcmJ5SXRlbShtb3VzZVgsIG1vdXNlWSwgc2VyaWVzRmlsdGVyKSB7XG4gICAgICAgICAgICB2YXIgbWF4RGlzdGFuY2UgPSBvcHRpb25zLmdyaWQubW91c2VBY3RpdmVSYWRpdXMsXG4gICAgICAgICAgICAgICAgc21hbGxlc3REaXN0YW5jZSA9IG1heERpc3RhbmNlICogbWF4RGlzdGFuY2UgKyAxLFxuICAgICAgICAgICAgICAgIGl0ZW0gPSBudWxsLCBmb3VuZFBvaW50ID0gZmFsc2UsIGksIGosIHBzO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSBzZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcmllc0ZpbHRlcihzZXJpZXNbaV0pKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIHZhciBzID0gc2VyaWVzW2ldLFxuICAgICAgICAgICAgICAgICAgICBheGlzeCA9IHMueGF4aXMsXG4gICAgICAgICAgICAgICAgICAgIGF4aXN5ID0gcy55YXhpcyxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzID0gcy5kYXRhcG9pbnRzLnBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgbXggPSBheGlzeC5jMnAobW91c2VYKSwgLy8gcHJlY29tcHV0ZSBzb21lIHN0dWZmIHRvIG1ha2UgdGhlIGxvb3AgZmFzdGVyXG4gICAgICAgICAgICAgICAgICAgIG15ID0gYXhpc3kuYzJwKG1vdXNlWSksXG4gICAgICAgICAgICAgICAgICAgIG1heHggPSBtYXhEaXN0YW5jZSAvIGF4aXN4LnNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBtYXh5ID0gbWF4RGlzdGFuY2UgLyBheGlzeS5zY2FsZTtcblxuICAgICAgICAgICAgICAgIHBzID0gcy5kYXRhcG9pbnRzLnBvaW50c2l6ZTtcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGludmVyc2UgdHJhbnNmb3Jtcywgd2UgY2FuJ3QgdXNlIHRoZSBtYXh4L21heHlcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWl6YXRpb24sIHNhZGx5XG4gICAgICAgICAgICAgICAgaWYgKGF4aXN4Lm9wdGlvbnMuaW52ZXJzZVRyYW5zZm9ybSlcbiAgICAgICAgICAgICAgICAgICAgbWF4eCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXN5Lm9wdGlvbnMuaW52ZXJzZVRyYW5zZm9ybSlcbiAgICAgICAgICAgICAgICAgICAgbWF4eSA9IE51bWJlci5NQVhfVkFMVUU7XG5cbiAgICAgICAgICAgICAgICBpZiAocy5saW5lcy5zaG93IHx8IHMucG9pbnRzLnNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHBvaW50cy5sZW5ndGg7IGogKz0gcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcG9pbnRzW2pdLCB5ID0gcG9pbnRzW2ogKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBwb2ludHMgYW5kIGxpbmVzLCB0aGUgY3Vyc29yIG11c3QgYmUgd2l0aGluIGFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNlcnRhaW4gZGlzdGFuY2UgdG8gdGhlIGRhdGEgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4IC0gbXggPiBtYXh4IHx8IHggLSBteCA8IC1tYXh4IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSAtIG15ID4gbWF4eSB8fCB5IC0gbXkgPCAtbWF4eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBjYWxjdWxhdGUgZGlzdGFuY2VzIGluIHBpeGVscywgbm90IGluXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIHVuaXRzLCBiZWNhdXNlIHRoZSBzY2FsZXMgb2YgdGhlIGF4ZXMgbWF5IGJlIGRpZmZlcmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoYXhpc3gucDJjKHgpIC0gbW91c2VYKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeSA9IE1hdGguYWJzKGF4aXN5LnAyYyh5KSAtIG1vdXNlWSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdCA9IGR4ICogZHggKyBkeSAqIGR5OyAvLyB3ZSBzYXZlIHRoZSBzcXJ0XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSA8PSB0byBlbnN1cmUgbGFzdCBwb2ludCB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAobGFzdCBnZW5lcmFsbHkgbWVhbnMgb24gdG9wIG9mKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPCBzbWFsbGVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hbGxlc3REaXN0YW5jZSA9IGRpc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IFtpLCBqIC8gcHNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHMuYmFycy5zaG93ICYmICFpdGVtKSB7IC8vIG5vIG90aGVyIHBvaW50IGNhbiBiZSBuZWFyYnlcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFyTGVmdCwgYmFyUmlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzLmJhcnMuYWxpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFyTGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJMZWZ0ID0gLXMuYmFycy5iYXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFyTGVmdCA9IC1zLmJhcnMuYmFyV2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYmFyUmlnaHQgPSBiYXJMZWZ0ICsgcy5iYXJzLmJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqICs9IHBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHBvaW50c1tqXSwgeSA9IHBvaW50c1tqICsgMV0sIGIgPSBwb2ludHNbaiArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGEgYmFyIGdyYXBoLCB0aGUgY3Vyc29yIG11c3QgYmUgaW5zaWRlIHRoZSBiYXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXNbaV0uYmFycy5ob3Jpem9udGFsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobXggPD0gTWF0aC5tYXgoYiwgeCkgJiYgbXggPj0gTWF0aC5taW4oYiwgeCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXkgPj0geSArIGJhckxlZnQgJiYgbXkgPD0geSArIGJhclJpZ2h0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG14ID49IHggKyBiYXJMZWZ0ICYmIG14IDw9IHggKyBiYXJSaWdodCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteSA+PSBNYXRoLm1pbihiLCB5KSAmJiBteSA8PSBNYXRoLm1heChiLCB5KSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBbaSwgaiAvIHBzXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpID0gaXRlbVswXTtcbiAgICAgICAgICAgICAgICBqID0gaXRlbVsxXTtcbiAgICAgICAgICAgICAgICBwcyA9IHNlcmllc1tpXS5kYXRhcG9pbnRzLnBvaW50c2l6ZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGFwb2ludDogc2VyaWVzW2ldLmRhdGFwb2ludHMucG9pbnRzLnNsaWNlKGogKiBwcywgKGogKyAxKSAqIHBzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6IGosXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBzZXJpZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzSW5kZXg6IGkgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncmlkLmhvdmVyYWJsZSlcbiAgICAgICAgICAgICAgICB0cmlnZ2VyQ2xpY2tIb3ZlckV2ZW50KFwicGxvdGhvdmVyXCIsIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gc1tcImhvdmVyYWJsZVwiXSAhPSBmYWxzZTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ3JpZC5ob3ZlcmFibGUpXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNsaWNrSG92ZXJFdmVudChcInBsb3Rob3ZlclwiLCBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgdHJpZ2dlckNsaWNrSG92ZXJFdmVudChcInBsb3RjbGlja1wiLCBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gc1tcImNsaWNrYWJsZVwiXSAhPSBmYWxzZTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cmlnZ2VyIGNsaWNrIG9yIGhvdmVyIGV2ZW50ICh0aGV5IHNlbmQgdGhlIHNhbWUgcGFyYW1ldGVyc1xuICAgICAgICAvLyBzbyB3ZSBzaGFyZSB0aGVpciBjb2RlKVxuICAgICAgICBmdW5jdGlvbiB0cmlnZ2VyQ2xpY2tIb3ZlckV2ZW50KGV2ZW50bmFtZSwgZXZlbnQsIHNlcmllc0ZpbHRlcikge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGV2ZW50SG9sZGVyLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgIGNhbnZhc1ggPSBldmVudC5wYWdlWCAtIG9mZnNldC5sZWZ0IC0gcGxvdE9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICAgIGNhbnZhc1kgPSBldmVudC5wYWdlWSAtIG9mZnNldC50b3AgLSBwbG90T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgIHBvcyA9IGNhbnZhc1RvQXhpc0Nvb3Jkcyh7IGxlZnQ6IGNhbnZhc1gsIHRvcDogY2FudmFzWSB9KTtcblxuICAgICAgICAgICAgcG9zLnBhZ2VYID0gZXZlbnQucGFnZVg7XG4gICAgICAgICAgICBwb3MucGFnZVkgPSBldmVudC5wYWdlWTtcblxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBmaW5kTmVhcmJ5SXRlbShjYW52YXNYLCBjYW52YXNZLCBzZXJpZXNGaWx0ZXIpO1xuXG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIC8vIGZpbGwgaW4gbW91c2UgcG9zIGZvciBhbnkgbGlzdGVuZXJzIG91dCB0aGVyZVxuICAgICAgICAgICAgICAgIGl0ZW0ucGFnZVggPSBwYXJzZUludChpdGVtLnNlcmllcy54YXhpcy5wMmMoaXRlbS5kYXRhcG9pbnRbMF0pICsgb2Zmc2V0LmxlZnQgKyBwbG90T2Zmc2V0LmxlZnQsIDEwKTtcbiAgICAgICAgICAgICAgICBpdGVtLnBhZ2VZID0gcGFyc2VJbnQoaXRlbS5zZXJpZXMueWF4aXMucDJjKGl0ZW0uZGF0YXBvaW50WzFdKSArIG9mZnNldC50b3AgKyBwbG90T2Zmc2V0LnRvcCwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncmlkLmF1dG9IaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyBjbGVhciBhdXRvLWhpZ2hsaWdodHNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpZ2hsaWdodHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBoaWdobGlnaHRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaC5hdXRvID09IGV2ZW50bmFtZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIShpdGVtICYmIGguc2VyaWVzID09IGl0ZW0uc2VyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGgucG9pbnRbMF0gPT0gaXRlbS5kYXRhcG9pbnRbMF0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wb2ludFsxXSA9PSBpdGVtLmRhdGFwb2ludFsxXSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmhpZ2hsaWdodChoLnNlcmllcywgaC5wb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodChpdGVtLnNlcmllcywgaXRlbS5kYXRhcG9pbnQsIGV2ZW50bmFtZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyLnRyaWdnZXIoZXZlbnRuYW1lLCBbIHBvcywgaXRlbSBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJSZWRyYXdPdmVybGF5KCkge1xuICAgICAgICAgICAgdmFyIHQgPSBvcHRpb25zLmludGVyYWN0aW9uLnJlZHJhd092ZXJsYXlJbnRlcnZhbDtcbiAgICAgICAgICAgIGlmICh0ID09IC0xKSB7ICAgICAgLy8gc2tpcCBldmVudCBxdWV1ZVxuICAgICAgICAgICAgICAgIGRyYXdPdmVybGF5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXJlZHJhd1RpbWVvdXQpXG4gICAgICAgICAgICAgICAgcmVkcmF3VGltZW91dCA9IHNldFRpbWVvdXQoZHJhd092ZXJsYXksIHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd092ZXJsYXkoKSB7XG4gICAgICAgICAgICByZWRyYXdUaW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gZHJhdyBoaWdobGlnaHRzXG4gICAgICAgICAgICBvY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIG92ZXJsYXkuY2xlYXIoKTtcbiAgICAgICAgICAgIG9jdHgudHJhbnNsYXRlKHBsb3RPZmZzZXQubGVmdCwgcGxvdE9mZnNldC50b3ApO1xuXG4gICAgICAgICAgICB2YXIgaSwgaGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaGlnaGxpZ2h0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGhpID0gaGlnaGxpZ2h0c1tpXTtcblxuICAgICAgICAgICAgICAgIGlmIChoaS5zZXJpZXMuYmFycy5zaG93KVxuICAgICAgICAgICAgICAgICAgICBkcmF3QmFySGlnaGxpZ2h0KGhpLnNlcmllcywgaGkucG9pbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZHJhd1BvaW50SGlnaGxpZ2h0KGhpLnNlcmllcywgaGkucG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2N0eC5yZXN0b3JlKCk7XG5cbiAgICAgICAgICAgIGV4ZWN1dGVIb29rcyhob29rcy5kcmF3T3ZlcmxheSwgW29jdHhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodChzLCBwb2ludCwgYXV0bykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzID09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgcyA9IHNlcmllc1tzXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb2ludCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBzID0gcy5kYXRhcG9pbnRzLnBvaW50c2l6ZTtcbiAgICAgICAgICAgICAgICBwb2ludCA9IHMuZGF0YXBvaW50cy5wb2ludHMuc2xpY2UocHMgKiBwb2ludCwgcHMgKiAocG9pbnQgKyAxKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpID0gaW5kZXhPZkhpZ2hsaWdodChzLCBwb2ludCk7XG4gICAgICAgICAgICBpZiAoaSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodHMucHVzaCh7IHNlcmllczogcywgcG9pbnQ6IHBvaW50LCBhdXRvOiBhdXRvIH0pO1xuXG4gICAgICAgICAgICAgICAgdHJpZ2dlclJlZHJhd092ZXJsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFhdXRvKVxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodHNbaV0uYXV0byA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5oaWdobGlnaHQocywgcG9pbnQpIHtcbiAgICAgICAgICAgIGlmIChzID09IG51bGwgJiYgcG9pbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodHMgPSBbXTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyUmVkcmF3T3ZlcmxheSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzID09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgcyA9IHNlcmllc1tzXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb2ludCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBzID0gcy5kYXRhcG9pbnRzLnBvaW50c2l6ZTtcbiAgICAgICAgICAgICAgICBwb2ludCA9IHMuZGF0YXBvaW50cy5wb2ludHMuc2xpY2UocHMgKiBwb2ludCwgcHMgKiAocG9pbnQgKyAxKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpID0gaW5kZXhPZkhpZ2hsaWdodChzLCBwb2ludCk7XG4gICAgICAgICAgICBpZiAoaSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodHMuc3BsaWNlKGksIDEpO1xuXG4gICAgICAgICAgICAgICAgdHJpZ2dlclJlZHJhd092ZXJsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluZGV4T2ZIaWdobGlnaHQocywgcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaWdobGlnaHRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGggPSBoaWdobGlnaHRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChoLnNlcmllcyA9PSBzICYmIGgucG9pbnRbMF0gPT0gcFswXVxuICAgICAgICAgICAgICAgICAgICAmJiBoLnBvaW50WzFdID09IHBbMV0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd1BvaW50SGlnaGxpZ2h0KHNlcmllcywgcG9pbnQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcG9pbnRbMF0sIHkgPSBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICBheGlzeCA9IHNlcmllcy54YXhpcywgYXhpc3kgPSBzZXJpZXMueWF4aXMsXG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3IgPSAodHlwZW9mIHNlcmllcy5oaWdobGlnaHRDb2xvciA9PT0gXCJzdHJpbmdcIikgPyBzZXJpZXMuaGlnaGxpZ2h0Q29sb3IgOiAkLmNvbG9yLnBhcnNlKHNlcmllcy5jb2xvcikuc2NhbGUoJ2EnLCAwLjUpLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIGlmICh4IDwgYXhpc3gubWluIHx8IHggPiBheGlzeC5tYXggfHwgeSA8IGF4aXN5Lm1pbiB8fCB5ID4gYXhpc3kubWF4KVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIHBvaW50UmFkaXVzID0gc2VyaWVzLnBvaW50cy5yYWRpdXMgKyBzZXJpZXMucG9pbnRzLmxpbmVXaWR0aCAvIDI7XG4gICAgICAgICAgICBvY3R4LmxpbmVXaWR0aCA9IHBvaW50UmFkaXVzO1xuICAgICAgICAgICAgb2N0eC5zdHJva2VTdHlsZSA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IDEuNSAqIHBvaW50UmFkaXVzO1xuICAgICAgICAgICAgeCA9IGF4aXN4LnAyYyh4KTtcbiAgICAgICAgICAgIHkgPSBheGlzeS5wMmMoeSk7XG5cbiAgICAgICAgICAgIG9jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLnBvaW50cy5zeW1ib2wgPT0gXCJjaXJjbGVcIilcbiAgICAgICAgICAgICAgICBvY3R4LmFyYyh4LCB5LCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VyaWVzLnBvaW50cy5zeW1ib2wob2N0eCwgeCwgeSwgcmFkaXVzLCBmYWxzZSk7XG4gICAgICAgICAgICBvY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgb2N0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdCYXJIaWdobGlnaHQoc2VyaWVzLCBwb2ludCkge1xuICAgICAgICAgICAgdmFyIGhpZ2hsaWdodENvbG9yID0gKHR5cGVvZiBzZXJpZXMuaGlnaGxpZ2h0Q29sb3IgPT09IFwic3RyaW5nXCIpID8gc2VyaWVzLmhpZ2hsaWdodENvbG9yIDogJC5jb2xvci5wYXJzZShzZXJpZXMuY29sb3IpLnNjYWxlKCdhJywgMC41KS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGZpbGxTdHlsZSA9IGhpZ2hsaWdodENvbG9yLFxuICAgICAgICAgICAgICAgIGJhckxlZnQ7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoc2VyaWVzLmJhcnMuYWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICAgICAgICAgICAgICBiYXJMZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgICAgICAgICAgICAgIGJhckxlZnQgPSAtc2VyaWVzLmJhcnMuYmFyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJhckxlZnQgPSAtc2VyaWVzLmJhcnMuYmFyV2lkdGggLyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvY3R4LmxpbmVXaWR0aCA9IHNlcmllcy5iYXJzLmxpbmVXaWR0aDtcbiAgICAgICAgICAgIG9jdHguc3Ryb2tlU3R5bGUgPSBoaWdobGlnaHRDb2xvcjtcblxuICAgICAgICAgICAgZHJhd0Jhcihwb2ludFswXSwgcG9pbnRbMV0sIHBvaW50WzJdIHx8IDAsIGJhckxlZnQsIGJhckxlZnQgKyBzZXJpZXMuYmFycy5iYXJXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmlsbFN0eWxlOyB9LCBzZXJpZXMueGF4aXMsIHNlcmllcy55YXhpcywgb2N0eCwgc2VyaWVzLmJhcnMuaG9yaXpvbnRhbCwgc2VyaWVzLmJhcnMubGluZVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbG9yT3JHcmFkaWVudChzcGVjLCBib3R0b20sIHRvcCwgZGVmYXVsdENvbG9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gc3BlYztcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFzc3VtZSB0aGlzIGlzIGEgZ3JhZGllbnQgc3BlYzsgSUUgY3VycmVudGx5IG9ubHlcbiAgICAgICAgICAgICAgICAvLyBzdXBwb3J0cyBhIHNpbXBsZSB2ZXJ0aWNhbCBncmFkaWVudCBwcm9wZXJseSwgc28gdGhhdCdzXG4gICAgICAgICAgICAgICAgLy8gd2hhdCB3ZSBzdXBwb3J0IHRvb1xuICAgICAgICAgICAgICAgIHZhciBncmFkaWVudCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCB0b3AsIDAsIGJvdHRvbSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHNwZWMuY29sb3JzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNwZWMuY29sb3JzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGMgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvID0gJC5jb2xvci5wYXJzZShkZWZhdWx0Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuYnJpZ2h0bmVzcyAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvID0gY28uc2NhbGUoJ3JnYicsIGMuYnJpZ2h0bmVzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5vcGFjaXR5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY28uYSAqPSBjLm9wYWNpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gY28udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoaSAvIChsIC0gMSksIGMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBncmFkaWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgcGxvdCBmdW5jdGlvbiB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBqUXVlcnkgb2JqZWN0XG5cbiAgICAkLnBsb3QgPSBmdW5jdGlvbihwbGFjZWhvbGRlciwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgICAvL3ZhciB0MCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBwbG90ID0gbmV3IFBsb3QoJChwbGFjZWhvbGRlciksIGRhdGEsIG9wdGlvbnMsICQucGxvdC5wbHVnaW5zKTtcbiAgICAgICAgLy8od2luZG93LmNvbnNvbGUgPyBjb25zb2xlLmxvZyA6IGFsZXJ0KShcInRpbWUgdXNlZCAobXNlY3MpOiBcIiArICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gdDAuZ2V0VGltZSgpKSk7XG4gICAgICAgIHJldHVybiBwbG90O1xuICAgIH07XG5cbiAgICAkLnBsb3QudmVyc2lvbiA9IFwiMC44LjNcIjtcblxuICAgICQucGxvdC5wbHVnaW5zID0gW107XG5cbiAgICAvLyBBbHNvIGFkZCB0aGUgcGxvdCBmdW5jdGlvbiBhcyBhIGNoYWluYWJsZSBwcm9wZXJ0eVxuXG4gICAgJC5mbi5wbG90ID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJC5wbG90KHRoaXMsIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gcm91bmQgdG8gbmVhcmJ5IGxvd2VyIG11bHRpcGxlIG9mIGJhc2VcbiAgICBmdW5jdGlvbiBmbG9vckluQmFzZShuLCBiYXNlKSB7XG4gICAgICAgIHJldHVybiBiYXNlICogTWF0aC5mbG9vcihuIC8gYmFzZSk7XG4gICAgfVxuXG59KShqUXVlcnkpO1xuIiwiLyogRmxvdCBwbHVnaW4gZm9yIGF1dG9tYXRpY2FsbHkgcmVkcmF3aW5nIHBsb3RzIGFzIHRoZSBwbGFjZWhvbGRlciByZXNpemVzLlxuXG5Db3B5cmlnaHQgKGMpIDIwMDctMjAxNCBJT0xBIGFuZCBPbGUgTGF1cnNlbi5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuSXQgd29ya3MgYnkgbGlzdGVuaW5nIGZvciBjaGFuZ2VzIG9uIHRoZSBwbGFjZWhvbGRlciBkaXYgKHRocm91Z2ggdGhlIGpRdWVyeVxucmVzaXplIGV2ZW50IHBsdWdpbikgLSBpZiB0aGUgc2l6ZSBjaGFuZ2VzLCBpdCB3aWxsIHJlZHJhdyB0aGUgcGxvdC5cblxuVGhlcmUgYXJlIG5vIG9wdGlvbnMuIElmIHlvdSBuZWVkIHRvIGRpc2FibGUgdGhlIHBsdWdpbiBmb3Igc29tZSBwbG90cywgeW91XG5jYW4ganVzdCBmaXggdGhlIHNpemUgb2YgdGhlaXIgcGxhY2Vob2xkZXJzLlxuXG4qL1xuXG4vKiBJbmxpbmUgZGVwZW5kZW5jeTpcbiAqIGpRdWVyeSByZXNpemUgZXZlbnQgLSB2MS4xIC0gMy8xNC8yMDEwXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1yZXNpemUtcGx1Z2luL1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXG4gKi9cbihmdW5jdGlvbigkLGUsdCl7XCIkOm5vbXVuZ2VcIjt2YXIgaT1bXSxuPSQucmVzaXplPSQuZXh0ZW5kKCQucmVzaXplLHt9KSxhLHI9ZmFsc2Uscz1cInNldFRpbWVvdXRcIix1PVwicmVzaXplXCIsbT11K1wiLXNwZWNpYWwtZXZlbnRcIixvPVwicGVuZGluZ0RlbGF5XCIsbD1cImFjdGl2ZURlbGF5XCIsZj1cInRocm90dGxlV2luZG93XCI7bltvXT0yMDA7bltsXT0yMDtuW2ZdPXRydWU7JC5ldmVudC5zcGVjaWFsW3VdPXtzZXR1cDpmdW5jdGlvbigpe2lmKCFuW2ZdJiZ0aGlzW3NdKXtyZXR1cm4gZmFsc2V9dmFyIGU9JCh0aGlzKTtpLnB1c2godGhpcyk7ZS5kYXRhKG0se3c6ZS53aWR0aCgpLGg6ZS5oZWlnaHQoKX0pO2lmKGkubGVuZ3RoPT09MSl7YT10O2goKX19LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoIW5bZl0mJnRoaXNbc10pe3JldHVybiBmYWxzZX12YXIgZT0kKHRoaXMpO2Zvcih2YXIgdD1pLmxlbmd0aC0xO3Q+PTA7dC0tKXtpZihpW3RdPT10aGlzKXtpLnNwbGljZSh0LDEpO2JyZWFrfX1lLnJlbW92ZURhdGEobSk7aWYoIWkubGVuZ3RoKXtpZihyKXtjYW5jZWxBbmltYXRpb25GcmFtZShhKX1lbHNle2NsZWFyVGltZW91dChhKX1hPW51bGx9fSxhZGQ6ZnVuY3Rpb24oZSl7aWYoIW5bZl0mJnRoaXNbc10pe3JldHVybiBmYWxzZX12YXIgaTtmdW5jdGlvbiBhKGUsbixhKXt2YXIgcj0kKHRoaXMpLHM9ci5kYXRhKG0pfHx7fTtzLnc9biE9PXQ/bjpyLndpZHRoKCk7cy5oPWEhPT10P2E6ci5oZWlnaHQoKTtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1pZigkLmlzRnVuY3Rpb24oZSkpe2k9ZTtyZXR1cm4gYX1lbHNle2k9ZS5oYW5kbGVyO2UuaGFuZGxlcj1hfX19O2Z1bmN0aW9uIGgodCl7aWYocj09PXRydWUpe3I9dHx8MX1mb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSl7dmFyIGw9JChpW3NdKTtpZihsWzBdPT1lfHxsLmlzKFwiOnZpc2libGVcIikpe3ZhciBmPWwud2lkdGgoKSxjPWwuaGVpZ2h0KCksZD1sLmRhdGEobSk7aWYoZCYmKGYhPT1kLnd8fGMhPT1kLmgpKXtsLnRyaWdnZXIodSxbZC53PWYsZC5oPWNdKTtyPXR8fHRydWV9fWVsc2V7ZD1sLmRhdGEobSk7ZC53PTA7ZC5oPTB9fWlmKGEhPT1udWxsKXtpZihyJiYodD09bnVsbHx8dC1yPDFlMykpe2E9ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCl9ZWxzZXthPXNldFRpbWVvdXQoaCxuW29dKTtyPWZhbHNlfX19aWYoIWUucmVxdWVzdEFuaW1hdGlvbkZyYW1lKXtlLnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiBlLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGUub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dCgobmV3IERhdGUpLmdldFRpbWUoKSl9LG5bbF0pfX0oKX1pZighZS5jYW5jZWxBbmltYXRpb25GcmFtZSl7ZS5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiBlLndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS5tb3pDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGUub0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS5tc0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZXx8Y2xlYXJUaW1lb3V0fSgpfX0pKGpRdWVyeSx0aGlzKTtcblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7IH07IC8vIG5vIG9wdGlvbnNcblxuICAgIGZ1bmN0aW9uIGluaXQocGxvdCkge1xuICAgICAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IHBsb3QuZ2V0UGxhY2Vob2xkZXIoKTtcblxuICAgICAgICAgICAgLy8gc29tZWJvZHkgbWlnaHQgaGF2ZSBoaWRkZW4gdXMgYW5kIHdlIGNhbid0IHBsb3RcbiAgICAgICAgICAgIC8vIHdoZW4gd2UgZG9uJ3QgaGF2ZSB0aGUgZGltZW5zaW9uc1xuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyLndpZHRoKCkgPT0gMCB8fCBwbGFjZWhvbGRlci5oZWlnaHQoKSA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgcGxvdC5yZXNpemUoKTtcbiAgICAgICAgICAgIHBsb3Quc2V0dXBHcmlkKCk7XG4gICAgICAgICAgICBwbG90LmRyYXcoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYmluZEV2ZW50cyhwbG90LCBldmVudEhvbGRlcikge1xuICAgICAgICAgICAgcGxvdC5nZXRQbGFjZWhvbGRlcigpLnJlc2l6ZShvblJlc2l6ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzaHV0ZG93bihwbG90LCBldmVudEhvbGRlcikge1xuICAgICAgICAgICAgcGxvdC5nZXRQbGFjZWhvbGRlcigpLnVuYmluZChcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHBsb3QuaG9va3MuYmluZEV2ZW50cy5wdXNoKGJpbmRFdmVudHMpO1xuICAgICAgICBwbG90Lmhvb2tzLnNodXRkb3duLnB1c2goc2h1dGRvd24pO1xuICAgIH1cbiAgICBcbiAgICAkLnBsb3QucGx1Z2lucy5wdXNoKHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgbmFtZTogJ3Jlc2l6ZScsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgfSk7XG59KShqUXVlcnkpO1xuIiwiLyogRmxvdCBwbHVnaW4gZm9yIHJlbmRlcmluZyBwaWUgY2hhcnRzLlxuXG5Db3B5cmlnaHQgKGMpIDIwMDctMjAxNCBJT0xBIGFuZCBPbGUgTGF1cnNlbi5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuVGhlIHBsdWdpbiBhc3N1bWVzIHRoYXQgZWFjaCBzZXJpZXMgaGFzIGEgc2luZ2xlIGRhdGEgdmFsdWUsIGFuZCB0aGF0IGVhY2hcbnZhbHVlIGlzIGEgcG9zaXRpdmUgaW50ZWdlciBvciB6ZXJvLiAgTmVnYXRpdmUgbnVtYmVycyBkb24ndCBtYWtlIHNlbnNlIGZvciBhXG5waWUgY2hhcnQsIGFuZCBoYXZlIHVucHJlZGljdGFibGUgcmVzdWx0cy4gIFRoZSB2YWx1ZXMgZG8gTk9UIG5lZWQgdG8gYmVcbnBhc3NlZCBpbiBhcyBwZXJjZW50YWdlczsgdGhlIHBsdWdpbiB3aWxsIGNhbGN1bGF0ZSB0aGUgdG90YWwgYW5kIHBlci1zbGljZVxucGVyY2VudGFnZXMgaW50ZXJuYWxseS5cblxuKiBDcmVhdGVkIGJ5IEJyaWFuIE1lZGVuZG9ycFxuXG4qIFVwZGF0ZWQgd2l0aCBjb250cmlidXRpb25zIGZyb20gYnRidXJuZXR0MywgQW50aG9ueSBBcmFndWVzIGFuZCBYYXZpIEl2YXJzXG5cblRoZSBwbHVnaW4gc3VwcG9ydHMgdGhlc2Ugb3B0aW9uczpcblxuXHRzZXJpZXM6IHtcblx0XHRwaWU6IHtcblx0XHRcdHNob3c6IHRydWUvZmFsc2Vcblx0XHRcdHJhZGl1czogMC0xIGZvciBwZXJjZW50YWdlIG9mIGZ1bGxzaXplLCBvciBhIHNwZWNpZmllZCBwaXhlbCBsZW5ndGgsIG9yICdhdXRvJ1xuXHRcdFx0aW5uZXJSYWRpdXM6IDAtMSBmb3IgcGVyY2VudGFnZSBvZiBmdWxsc2l6ZSBvciBhIHNwZWNpZmllZCBwaXhlbCBsZW5ndGgsIGZvciBjcmVhdGluZyBhIGRvbnV0IGVmZmVjdFxuXHRcdFx0c3RhcnRBbmdsZTogMC0yIGZhY3RvciBvZiBQSSB1c2VkIGZvciBzdGFydGluZyBhbmdsZSAoaW4gcmFkaWFucykgaS5lIDMvMiBzdGFydHMgYXQgdGhlIHRvcCwgMCBhbmQgMiBoYXZlIHRoZSBzYW1lIHJlc3VsdFxuXHRcdFx0dGlsdDogMC0xIGZvciBwZXJjZW50YWdlIHRvIHRpbHQgdGhlIHBpZSwgd2hlcmUgMSBpcyBubyB0aWx0LCBhbmQgMCBpcyBjb21wbGV0ZWx5IGZsYXQgKG5vdGhpbmcgd2lsbCBzaG93KVxuXHRcdFx0b2Zmc2V0OiB7XG5cdFx0XHRcdHRvcDogaW50ZWdlciB2YWx1ZSB0byBtb3ZlIHRoZSBwaWUgdXAgb3IgZG93blxuXHRcdFx0XHRsZWZ0OiBpbnRlZ2VyIHZhbHVlIHRvIG1vdmUgdGhlIHBpZSBsZWZ0IG9yIHJpZ2h0LCBvciAnYXV0bydcblx0XHRcdH0sXG5cdFx0XHRzdHJva2U6IHtcblx0XHRcdFx0Y29sb3I6IGFueSBoZXhpZGVjaW1hbCBjb2xvciB2YWx1ZSAob3RoZXIgZm9ybWF0cyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBzbyBiZXN0IHRvIHN0aWNrIHdpdGggc29tZXRoaW5nIGxpa2UgJyNGRkYnKVxuXHRcdFx0XHR3aWR0aDogaW50ZWdlciBwaXhlbCB3aWR0aCBvZiB0aGUgc3Ryb2tlXG5cdFx0XHR9LFxuXHRcdFx0bGFiZWw6IHtcblx0XHRcdFx0c2hvdzogdHJ1ZS9mYWxzZSwgb3IgJ2F1dG8nXG5cdFx0XHRcdGZvcm1hdHRlcjogIGEgdXNlci1kZWZpbmVkIGZ1bmN0aW9uIHRoYXQgbW9kaWZpZXMgdGhlIHRleHQvc3R5bGUgb2YgdGhlIGxhYmVsIHRleHRcblx0XHRcdFx0cmFkaXVzOiAwLTEgZm9yIHBlcmNlbnRhZ2Ugb2YgZnVsbHNpemUsIG9yIGEgc3BlY2lmaWVkIHBpeGVsIGxlbmd0aFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiB7XG5cdFx0XHRcdFx0Y29sb3I6IGFueSBoZXhpZGVjaW1hbCBjb2xvciB2YWx1ZSAob3RoZXIgZm9ybWF0cyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBzbyBiZXN0IHRvIHN0aWNrIHdpdGggc29tZXRoaW5nIGxpa2UgJyMwMDAnKVxuXHRcdFx0XHRcdG9wYWNpdHk6IDAtMVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aHJlc2hvbGQ6IDAtMSBmb3IgdGhlIHBlcmNlbnRhZ2UgdmFsdWUgYXQgd2hpY2ggdG8gaGlkZSBsYWJlbHMgKGlmIHRoZXkncmUgdG9vIHNtYWxsKVxuXHRcdFx0fSxcblx0XHRcdGNvbWJpbmU6IHtcblx0XHRcdFx0dGhyZXNob2xkOiAwLTEgZm9yIHRoZSBwZXJjZW50YWdlIHZhbHVlIGF0IHdoaWNoIHRvIGNvbWJpbmUgc2xpY2VzIChpZiB0aGV5J3JlIHRvbyBzbWFsbClcblx0XHRcdFx0Y29sb3I6IGFueSBoZXhpZGVjaW1hbCBjb2xvciB2YWx1ZSAob3RoZXIgZm9ybWF0cyBtYXkgb3IgbWF5IG5vdCB3b3JrLCBzbyBiZXN0IHRvIHN0aWNrIHdpdGggc29tZXRoaW5nIGxpa2UgJyNDQ0MnKSwgaWYgbnVsbCwgdGhlIHBsdWdpbiB3aWxsIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBjb2xvciBvZiB0aGUgZmlyc3Qgc2xpY2UgdG8gYmUgY29tYmluZWRcblx0XHRcdFx0bGFiZWw6IGFueSB0ZXh0IHZhbHVlIG9mIHdoYXQgdGhlIGNvbWJpbmVkIHNsaWNlIHNob3VsZCBiZSBsYWJlbGVkXG5cdFx0XHR9XG5cdFx0XHRoaWdobGlnaHQ6IHtcblx0XHRcdFx0b3BhY2l0eTogMC0xXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbk1vcmUgZGV0YWlsIGFuZCBzcGVjaWZpYyBleGFtcGxlcyBjYW4gYmUgZm91bmQgaW4gdGhlIGluY2x1ZGVkIEhUTUwgZmlsZS5cblxuKi9cblxuKGZ1bmN0aW9uKCQpIHtcblxuXHQvLyBNYXhpbXVtIHJlZHJhdyBhdHRlbXB0cyB3aGVuIGZpdHRpbmcgbGFiZWxzIHdpdGhpbiB0aGUgcGxvdFxuXG5cdHZhciBSRURSQVdfQVRURU1QVFMgPSAxMDtcblxuXHQvLyBGYWN0b3IgYnkgd2hpY2ggdG8gc2hyaW5rIHRoZSBwaWUgd2hlbiBmaXR0aW5nIGxhYmVscyB3aXRoaW4gdGhlIHBsb3RcblxuXHR2YXIgUkVEUkFXX1NIUklOSyA9IDAuOTU7XG5cblx0ZnVuY3Rpb24gaW5pdChwbG90KSB7XG5cblx0XHR2YXIgY2FudmFzID0gbnVsbCxcblx0XHRcdHRhcmdldCA9IG51bGwsXG5cdFx0XHRvcHRpb25zID0gbnVsbCxcblx0XHRcdG1heFJhZGl1cyA9IG51bGwsXG5cdFx0XHRjZW50ZXJMZWZ0ID0gbnVsbCxcblx0XHRcdGNlbnRlclRvcCA9IG51bGwsXG5cdFx0XHRwcm9jZXNzZWQgPSBmYWxzZSxcblx0XHRcdGN0eCA9IG51bGw7XG5cblx0XHQvLyBpbnRlcmFjdGl2ZSB2YXJpYWJsZXNcblxuXHRcdHZhciBoaWdobGlnaHRzID0gW107XG5cblx0XHQvLyBhZGQgaG9vayB0byBkZXRlcm1pbmUgaWYgcGllIHBsdWdpbiBpbiBlbmFibGVkLCBhbmQgdGhlbiBwZXJmb3JtIG5lY2Vzc2FyeSBvcGVyYXRpb25zXG5cblx0XHRwbG90Lmhvb2tzLnByb2Nlc3NPcHRpb25zLnB1c2goZnVuY3Rpb24ocGxvdCwgb3B0aW9ucykge1xuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zaG93KSB7XG5cblx0XHRcdFx0b3B0aW9ucy5ncmlkLnNob3cgPSBmYWxzZTtcblxuXHRcdFx0XHQvLyBzZXQgbGFiZWxzLnNob3dcblxuXHRcdFx0XHRpZiAob3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnNob3cgPT0gXCJhdXRvXCIpIHtcblx0XHRcdFx0XHRpZiAob3B0aW9ucy5sZWdlbmQuc2hvdykge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnNob3cgPSBmYWxzZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnNob3cgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHNldCByYWRpdXNcblxuXHRcdFx0XHRpZiAob3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA9PSBcImF1dG9cIikge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLnNlcmllcy5waWUubGFiZWwuc2hvdykge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA9IDMvNDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gZW5zdXJlIHNhbmUgdGlsdFxuXG5cdFx0XHRcdGlmIChvcHRpb25zLnNlcmllcy5waWUudGlsdCA+IDEpIHtcblx0XHRcdFx0XHRvcHRpb25zLnNlcmllcy5waWUudGlsdCA9IDE7XG5cdFx0XHRcdH0gZWxzZSBpZiAob3B0aW9ucy5zZXJpZXMucGllLnRpbHQgPCAwKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy5zZXJpZXMucGllLnRpbHQgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRwbG90Lmhvb2tzLmJpbmRFdmVudHMucHVzaChmdW5jdGlvbihwbG90LCBldmVudEhvbGRlcikge1xuXHRcdFx0dmFyIG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKTtcblx0XHRcdGlmIChvcHRpb25zLnNlcmllcy5waWUuc2hvdykge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5ncmlkLmhvdmVyYWJsZSkge1xuXHRcdFx0XHRcdGV2ZW50SG9sZGVyLnVuYmluZChcIm1vdXNlbW92ZVwiKS5tb3VzZW1vdmUob25Nb3VzZU1vdmUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChvcHRpb25zLmdyaWQuY2xpY2thYmxlKSB7XG5cdFx0XHRcdFx0ZXZlbnRIb2xkZXIudW5iaW5kKFwiY2xpY2tcIikuY2xpY2sob25DbGljayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHBsb3QuaG9va3MucHJvY2Vzc0RhdGFwb2ludHMucHVzaChmdW5jdGlvbihwbG90LCBzZXJpZXMsIGRhdGEsIGRhdGFwb2ludHMpIHtcblx0XHRcdHZhciBvcHRpb25zID0gcGxvdC5nZXRPcHRpb25zKCk7XG5cdFx0XHRpZiAob3B0aW9ucy5zZXJpZXMucGllLnNob3cpIHtcblx0XHRcdFx0cHJvY2Vzc0RhdGFwb2ludHMocGxvdCwgc2VyaWVzLCBkYXRhLCBkYXRhcG9pbnRzKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHBsb3QuaG9va3MuZHJhd092ZXJsYXkucHVzaChmdW5jdGlvbihwbG90LCBvY3R4KSB7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHBsb3QuZ2V0T3B0aW9ucygpO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zaG93KSB7XG5cdFx0XHRcdGRyYXdPdmVybGF5KHBsb3QsIG9jdHgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cGxvdC5ob29rcy5kcmF3LnB1c2goZnVuY3Rpb24ocGxvdCwgbmV3Q3R4KSB7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHBsb3QuZ2V0T3B0aW9ucygpO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zaG93KSB7XG5cdFx0XHRcdGRyYXcocGxvdCwgbmV3Q3R4KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIHByb2Nlc3NEYXRhcG9pbnRzKHBsb3QsIHNlcmllcywgZGF0YXBvaW50cykge1xuXHRcdFx0aWYgKCFwcm9jZXNzZWQpXHR7XG5cdFx0XHRcdHByb2Nlc3NlZCA9IHRydWU7XG5cdFx0XHRcdGNhbnZhcyA9IHBsb3QuZ2V0Q2FudmFzKCk7XG5cdFx0XHRcdHRhcmdldCA9ICQoY2FudmFzKS5wYXJlbnQoKTtcblx0XHRcdFx0b3B0aW9ucyA9IHBsb3QuZ2V0T3B0aW9ucygpO1xuXHRcdFx0XHRwbG90LnNldERhdGEoY29tYmluZShwbG90LmdldERhdGEoKSkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvbWJpbmUoZGF0YSkge1xuXG5cdFx0XHR2YXIgdG90YWwgPSAwLFxuXHRcdFx0XHRjb21iaW5lZCA9IDAsXG5cdFx0XHRcdG51bUNvbWJpbmVkID0gMCxcblx0XHRcdFx0Y29sb3IgPSBvcHRpb25zLnNlcmllcy5waWUuY29tYmluZS5jb2xvcixcblx0XHRcdFx0bmV3ZGF0YSA9IFtdO1xuXG5cdFx0XHQvLyBGaXggdXAgdGhlIHJhdyBkYXRhIGZyb20gRmxvdCwgZW5zdXJpbmcgdGhlIGRhdGEgaXMgbnVtZXJpY1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcblxuXHRcdFx0XHR2YXIgdmFsdWUgPSBkYXRhW2ldLmRhdGE7XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGRhdGEgaXMgYW4gYXJyYXksIHdlJ2xsIGFzc3VtZSB0aGF0IGl0J3MgYSBzdGFuZGFyZFxuXHRcdFx0XHQvLyBGbG90IHgteSBwYWlyLCBhbmQgYXJlIGNvbmNlcm5lZCBvbmx5IHdpdGggdGhlIHNlY29uZCB2YWx1ZS5cblxuXHRcdFx0XHQvLyBOb3RlIGhvdyB3ZSB1c2UgdGhlIG9yaWdpbmFsIGFycmF5LCByYXRoZXIgdGhhbiBjcmVhdGluZyBhXG5cdFx0XHRcdC8vIG5ldyBvbmU7IHRoaXMgaXMgbW9yZSBlZmZpY2llbnQgYW5kIHByZXNlcnZlcyBhbnkgZXh0cmEgZGF0YVxuXHRcdFx0XHQvLyB0aGF0IHRoZSB1c2VyIG1heSBoYXZlIHN0b3JlZCBpbiBoaWdoZXIgaW5kZXhlcy5cblxuXHRcdFx0XHRpZiAoJC5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT0gMSkge1xuICAgIFx0XHRcdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICgkLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0Ly8gRXF1aXZhbGVudCB0byAkLmlzTnVtZXJpYygpIGJ1dCBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IDwgMS43XG5cdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZUZsb2F0KHZhbHVlWzFdKSkgJiYgaXNGaW5pdGUodmFsdWVbMV0pKSB7XG5cdFx0XHRcdFx0XHR2YWx1ZVsxXSA9ICt2YWx1ZVsxXTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFsdWVbMV0gPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICghaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpICYmIGlzRmluaXRlKHZhbHVlKSkge1xuXHRcdFx0XHRcdHZhbHVlID0gWzEsICt2YWx1ZV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBbMSwgMF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkYXRhW2ldLmRhdGEgPSBbdmFsdWVdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdW0gdXAgYWxsIHRoZSBzbGljZXMsIHNvIHdlIGNhbiBjYWxjdWxhdGUgcGVyY2VudGFnZXMgZm9yIGVhY2hcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdHRvdGFsICs9IGRhdGFbaV0uZGF0YVswXVsxXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ291bnQgdGhlIG51bWJlciBvZiBzbGljZXMgd2l0aCBwZXJjZW50YWdlcyBiZWxvdyB0aGUgY29tYmluZVxuXHRcdFx0Ly8gdGhyZXNob2xkOyBpZiBpdCB0dXJucyBvdXQgdG8gYmUganVzdCBvbmUsIHdlIHdvbid0IGNvbWJpbmUuXG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHR2YXIgdmFsdWUgPSBkYXRhW2ldLmRhdGFbMF1bMV07XG5cdFx0XHRcdGlmICh2YWx1ZSAvIHRvdGFsIDw9IG9wdGlvbnMuc2VyaWVzLnBpZS5jb21iaW5lLnRocmVzaG9sZCkge1xuXHRcdFx0XHRcdGNvbWJpbmVkICs9IHZhbHVlO1xuXHRcdFx0XHRcdG51bUNvbWJpbmVkKys7XG5cdFx0XHRcdFx0aWYgKCFjb2xvcikge1xuXHRcdFx0XHRcdFx0Y29sb3IgPSBkYXRhW2ldLmNvbG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0dmFyIHZhbHVlID0gZGF0YVtpXS5kYXRhWzBdWzFdO1xuXHRcdFx0XHRpZiAobnVtQ29tYmluZWQgPCAyIHx8IHZhbHVlIC8gdG90YWwgPiBvcHRpb25zLnNlcmllcy5waWUuY29tYmluZS50aHJlc2hvbGQpIHtcblx0XHRcdFx0XHRuZXdkYXRhLnB1c2goXG5cdFx0XHRcdFx0XHQkLmV4dGVuZChkYXRhW2ldLCB7ICAgICAvKiBleHRlbmQgdG8gYWxsb3cga2VlcGluZyBhbGwgb3RoZXIgb3JpZ2luYWwgZGF0YSB2YWx1ZXNcblx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB1c2luZyB0aGVtIGUuZy4gaW4gbGFiZWxGb3JtYXR0ZXIuICovXG5cdFx0XHRcdFx0XHRcdGRhdGE6IFtbMSwgdmFsdWVdXSxcblx0XHRcdFx0XHRcdFx0Y29sb3I6IGRhdGFbaV0uY29sb3IsXG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBkYXRhW2ldLmxhYmVsLFxuXHRcdFx0XHRcdFx0XHRhbmdsZTogdmFsdWUgKiBNYXRoLlBJICogMiAvIHRvdGFsLFxuXHRcdFx0XHRcdFx0XHRwZXJjZW50OiB2YWx1ZSAvICh0b3RhbCAvIDEwMClcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAobnVtQ29tYmluZWQgPiAxKSB7XG5cdFx0XHRcdG5ld2RhdGEucHVzaCh7XG5cdFx0XHRcdFx0ZGF0YTogW1sxLCBjb21iaW5lZF1dLFxuXHRcdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0XHRsYWJlbDogb3B0aW9ucy5zZXJpZXMucGllLmNvbWJpbmUubGFiZWwsXG5cdFx0XHRcdFx0YW5nbGU6IGNvbWJpbmVkICogTWF0aC5QSSAqIDIgLyB0b3RhbCxcblx0XHRcdFx0XHRwZXJjZW50OiBjb21iaW5lZCAvICh0b3RhbCAvIDEwMClcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBuZXdkYXRhO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRyYXcocGxvdCwgbmV3Q3R4KSB7XG5cblx0XHRcdGlmICghdGFyZ2V0KSB7XG5cdFx0XHRcdHJldHVybjsgLy8gaWYgbm8gc2VyaWVzIHdlcmUgcGFzc2VkXG5cdFx0XHR9XG5cblx0XHRcdHZhciBjYW52YXNXaWR0aCA9IHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS53aWR0aCgpLFxuXHRcdFx0XHRjYW52YXNIZWlnaHQgPSBwbG90LmdldFBsYWNlaG9sZGVyKCkuaGVpZ2h0KCksXG5cdFx0XHRcdGxlZ2VuZFdpZHRoID0gdGFyZ2V0LmNoaWxkcmVuKCkuZmlsdGVyKFwiLmxlZ2VuZFwiKS5jaGlsZHJlbigpLndpZHRoKCkgfHwgMDtcblxuXHRcdFx0Y3R4ID0gbmV3Q3R4O1xuXG5cdFx0XHQvLyBXQVJOSU5HOiBIQUNLISBSRVdSSVRFIFRISVMgQ09ERSBBUyBTT09OIEFTIFBPU1NJQkxFIVxuXG5cdFx0XHQvLyBXaGVuIGNvbWJpbmluZyBzbWFsbGVyIHNsaWNlcyBpbnRvIGFuICdvdGhlcicgc2xpY2UsIHdlIG5lZWQgdG9cblx0XHRcdC8vIGFkZCBhIG5ldyBzZXJpZXMuICBTaW5jZSBGbG90IGdpdmVzIHBsdWdpbnMgbm8gd2F5IHRvIG1vZGlmeSB0aGVcblx0XHRcdC8vIGxpc3Qgb2Ygc2VyaWVzLCB0aGUgcGllIHBsdWdpbiB1c2VzIGEgaGFjayB3aGVyZSB0aGUgZmlyc3QgY2FsbFxuXHRcdFx0Ly8gdG8gcHJvY2Vzc0RhdGFwb2ludHMgcmVzdWx0cyBpbiBhIGNhbGwgdG8gc2V0RGF0YSB3aXRoIHRoZSBuZXdcblx0XHRcdC8vIGxpc3Qgb2Ygc2VyaWVzLCB0aGVuIHN1YnNlcXVlbnQgcHJvY2Vzc0RhdGFwb2ludHMgZG8gbm90aGluZy5cblxuXHRcdFx0Ly8gVGhlIHBsdWdpbi1nbG9iYWwgJ3Byb2Nlc3NlZCcgZmxhZyBpcyB1c2VkIHRvIGNvbnRyb2wgdGhpcyBoYWNrO1xuXHRcdFx0Ly8gaXQgc3RhcnRzIG91dCBmYWxzZSwgYW5kIGlzIHNldCB0byB0cnVlIGFmdGVyIHRoZSBmaXJzdCBjYWxsIHRvXG5cdFx0XHQvLyBwcm9jZXNzRGF0YXBvaW50cy5cblxuXHRcdFx0Ly8gVW5mb3J0dW5hdGVseSB0aGlzIHR1cm5zIGZ1dHVyZSBzZXREYXRhIGNhbGxzIGludG8gbm8tb3BzOyB0aGV5XG5cdFx0XHQvLyBjYWxsIHByb2Nlc3NEYXRhcG9pbnRzLCB0aGUgZmxhZyBpcyB0cnVlLCBhbmQgbm90aGluZyBoYXBwZW5zLlxuXG5cdFx0XHQvLyBUbyBmaXggdGhpcyB3ZSdsbCBzZXQgdGhlIGZsYWcgYmFjayB0byBmYWxzZSBoZXJlIGluIGRyYXcsIHdoZW5cblx0XHRcdC8vIGFsbCBzZXJpZXMgaGF2ZSBiZWVuIHByb2Nlc3NlZCwgc28gdGhlIG5leHQgc2VxdWVuY2Ugb2YgY2FsbHMgdG9cblx0XHRcdC8vIHByb2Nlc3NEYXRhcG9pbnRzIG9uY2UgYWdhaW4gc3RhcnRzIG91dCB3aXRoIGEgc2xpY2UtY29tYmluZS5cblx0XHRcdC8vIFRoaXMgaXMgcmVhbGx5IGEgaGFjazsgaW4gMC45IHdlIG5lZWQgdG8gZ2l2ZSBwbHVnaW5zIGEgcHJvcGVyXG5cdFx0XHQvLyB3YXkgdG8gbW9kaWZ5IHNlcmllcyBiZWZvcmUgYW55IHByb2Nlc3NpbmcgYmVnaW5zLlxuXG5cdFx0XHRwcm9jZXNzZWQgPSBmYWxzZTtcblxuXHRcdFx0Ly8gY2FsY3VsYXRlIG1heGltdW0gcmFkaXVzIGFuZCBjZW50ZXIgcG9pbnRcblxuXHRcdFx0bWF4UmFkaXVzID0gIE1hdGgubWluKGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQgLyBvcHRpb25zLnNlcmllcy5waWUudGlsdCkgLyAyO1xuXHRcdFx0Y2VudGVyVG9wID0gY2FudmFzSGVpZ2h0IC8gMiArIG9wdGlvbnMuc2VyaWVzLnBpZS5vZmZzZXQudG9wO1xuXHRcdFx0Y2VudGVyTGVmdCA9IGNhbnZhc1dpZHRoIC8gMjtcblxuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5vZmZzZXQubGVmdCA9PSBcImF1dG9cIikge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5sZWdlbmQucG9zaXRpb24ubWF0Y2goXCJ3XCIpKSB7XG5cdFx0XHRcdFx0Y2VudGVyTGVmdCArPSBsZWdlbmRXaWR0aCAvIDI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2VudGVyTGVmdCAtPSBsZWdlbmRXaWR0aCAvIDI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNlbnRlckxlZnQgPCBtYXhSYWRpdXMpIHtcblx0XHRcdFx0XHRjZW50ZXJMZWZ0ID0gbWF4UmFkaXVzO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNlbnRlckxlZnQgPiBjYW52YXNXaWR0aCAtIG1heFJhZGl1cykge1xuXHRcdFx0XHRcdGNlbnRlckxlZnQgPSBjYW52YXNXaWR0aCAtIG1heFJhZGl1cztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2VudGVyTGVmdCArPSBvcHRpb25zLnNlcmllcy5waWUub2Zmc2V0LmxlZnQ7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzbGljZXMgPSBwbG90LmdldERhdGEoKSxcblx0XHRcdFx0YXR0ZW1wdHMgPSAwO1xuXG5cdFx0XHQvLyBLZWVwIHNocmlua2luZyB0aGUgcGllJ3MgcmFkaXVzIHVudGlsIGRyYXdQaWUgcmV0dXJucyB0cnVlLFxuXHRcdFx0Ly8gaW5kaWNhdGluZyB0aGF0IGFsbCB0aGUgbGFiZWxzIGZpdCwgb3Igd2UgdHJ5IHRvbyBtYW55IHRpbWVzLlxuXG5cdFx0XHRkbyB7XG5cdFx0XHRcdGlmIChhdHRlbXB0cyA+IDApIHtcblx0XHRcdFx0XHRtYXhSYWRpdXMgKj0gUkVEUkFXX1NIUklOSztcblx0XHRcdFx0fVxuXHRcdFx0XHRhdHRlbXB0cyArPSAxO1xuXHRcdFx0XHRjbGVhcigpO1xuXHRcdFx0XHRpZiAob3B0aW9ucy5zZXJpZXMucGllLnRpbHQgPD0gMC44KSB7XG5cdFx0XHRcdFx0ZHJhd1NoYWRvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IHdoaWxlICghZHJhd1BpZSgpICYmIGF0dGVtcHRzIDwgUkVEUkFXX0FUVEVNUFRTKVxuXG5cdFx0XHRpZiAoYXR0ZW1wdHMgPj0gUkVEUkFXX0FUVEVNUFRTKSB7XG5cdFx0XHRcdGNsZWFyKCk7XG5cdFx0XHRcdHRhcmdldC5wcmVwZW5kKFwiPGRpdiBjbGFzcz0nZXJyb3InPkNvdWxkIG5vdCBkcmF3IHBpZSB3aXRoIGxhYmVscyBjb250YWluZWQgaW5zaWRlIGNhbnZhczwvZGl2PlwiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHBsb3Quc2V0U2VyaWVzICYmIHBsb3QuaW5zZXJ0TGVnZW5kKSB7XG5cdFx0XHRcdHBsb3Quc2V0U2VyaWVzKHNsaWNlcyk7XG5cdFx0XHRcdHBsb3QuaW5zZXJ0TGVnZW5kKCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHdlJ3JlIGFjdHVhbGx5IGRvbmUgYXQgdGhpcyBwb2ludCwganVzdCBkZWZpbmluZyBpbnRlcm5hbCBmdW5jdGlvbnMgYXQgdGhpcyBwb2ludFxuXG5cdFx0XHRmdW5jdGlvbiBjbGVhcigpIHtcblx0XHRcdFx0Y3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcblx0XHRcdFx0dGFyZ2V0LmNoaWxkcmVuKCkuZmlsdGVyKFwiLnBpZUxhYmVsLCAucGllTGFiZWxCYWNrZ3JvdW5kXCIpLnJlbW92ZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkcmF3U2hhZG93KCkge1xuXG5cdFx0XHRcdHZhciBzaGFkb3dMZWZ0ID0gb3B0aW9ucy5zZXJpZXMucGllLnNoYWRvdy5sZWZ0O1xuXHRcdFx0XHR2YXIgc2hhZG93VG9wID0gb3B0aW9ucy5zZXJpZXMucGllLnNoYWRvdy50b3A7XG5cdFx0XHRcdHZhciBlZGdlID0gMTA7XG5cdFx0XHRcdHZhciBhbHBoYSA9IG9wdGlvbnMuc2VyaWVzLnBpZS5zaGFkb3cuYWxwaGE7XG5cdFx0XHRcdHZhciByYWRpdXMgPSBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID4gMSA/IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgOiBtYXhSYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzO1xuXG5cdFx0XHRcdGlmIChyYWRpdXMgPj0gY2FudmFzV2lkdGggLyAyIC0gc2hhZG93TGVmdCB8fCByYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUudGlsdCA+PSBjYW52YXNIZWlnaHQgLyAyIC0gc2hhZG93VG9wIHx8IHJhZGl1cyA8PSBlZGdlKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1x0Ly8gc2hhZG93IHdvdWxkIGJlIG91dHNpZGUgY2FudmFzLCBzbyBkb24ndCBkcmF3IGl0XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjdHguc2F2ZSgpO1xuXHRcdFx0XHRjdHgudHJhbnNsYXRlKHNoYWRvd0xlZnQsc2hhZG93VG9wKTtcblx0XHRcdFx0Y3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7XG5cdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIiMwMDBcIjtcblxuXHRcdFx0XHQvLyBjZW50ZXIgYW5kIHJvdGF0ZSB0byBzdGFydGluZyBwb3NpdGlvblxuXG5cdFx0XHRcdGN0eC50cmFuc2xhdGUoY2VudGVyTGVmdCxjZW50ZXJUb3ApO1xuXHRcdFx0XHRjdHguc2NhbGUoMSwgb3B0aW9ucy5zZXJpZXMucGllLnRpbHQpO1xuXG5cdFx0XHRcdC8vcmFkaXVzIC09IGVkZ2U7XG5cblx0XHRcdFx0Zm9yICh2YXIgaSA9IDE7IGkgPD0gZWRnZTsgaSsrKSB7XG5cdFx0XHRcdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0XHRcdGN0eC5hcmMoMCwgMCwgcmFkaXVzLCAwLCBNYXRoLlBJICogMiwgZmFsc2UpO1xuXHRcdFx0XHRcdGN0eC5maWxsKCk7XG5cdFx0XHRcdFx0cmFkaXVzIC09IGk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjdHgucmVzdG9yZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkcmF3UGllKCkge1xuXG5cdFx0XHRcdHZhciBzdGFydEFuZ2xlID0gTWF0aC5QSSAqIG9wdGlvbnMuc2VyaWVzLnBpZS5zdGFydEFuZ2xlO1xuXHRcdFx0XHR2YXIgcmFkaXVzID0gb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA+IDEgPyBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzIDogbWF4UmFkaXVzICogb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cztcblxuXHRcdFx0XHQvLyBjZW50ZXIgYW5kIHJvdGF0ZSB0byBzdGFydGluZyBwb3NpdGlvblxuXG5cdFx0XHRcdGN0eC5zYXZlKCk7XG5cdFx0XHRcdGN0eC50cmFuc2xhdGUoY2VudGVyTGVmdCxjZW50ZXJUb3ApO1xuXHRcdFx0XHRjdHguc2NhbGUoMSwgb3B0aW9ucy5zZXJpZXMucGllLnRpbHQpO1xuXHRcdFx0XHQvL2N0eC5yb3RhdGUoc3RhcnRBbmdsZSk7IC8vIHN0YXJ0IGF0IHRvcDsgLS0gVGhpcyBkb2Vzbid0IHdvcmsgcHJvcGVybHkgaW4gT3BlcmFcblxuXHRcdFx0XHQvLyBkcmF3IHNsaWNlc1xuXG5cdFx0XHRcdGN0eC5zYXZlKCk7XG5cdFx0XHRcdHZhciBjdXJyZW50QW5nbGUgPSBzdGFydEFuZ2xlO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlcy5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHRcdHNsaWNlc1tpXS5zdGFydEFuZ2xlID0gY3VycmVudEFuZ2xlO1xuXHRcdFx0XHRcdGRyYXdTbGljZShzbGljZXNbaV0uYW5nbGUsIHNsaWNlc1tpXS5jb2xvciwgdHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y3R4LnJlc3RvcmUoKTtcblxuXHRcdFx0XHQvLyBkcmF3IHNsaWNlIG91dGxpbmVzXG5cblx0XHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5zdHJva2Uud2lkdGggPiAwKSB7XG5cdFx0XHRcdFx0Y3R4LnNhdmUoKTtcblx0XHRcdFx0XHRjdHgubGluZVdpZHRoID0gb3B0aW9ucy5zZXJpZXMucGllLnN0cm9rZS53aWR0aDtcblx0XHRcdFx0XHRjdXJyZW50QW5nbGUgPSBzdGFydEFuZ2xlO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdFx0XHRkcmF3U2xpY2Uoc2xpY2VzW2ldLmFuZ2xlLCBvcHRpb25zLnNlcmllcy5waWUuc3Ryb2tlLmNvbG9yLCBmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGN0eC5yZXN0b3JlKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBkcmF3IGRvbnV0IGhvbGVcblxuXHRcdFx0XHRkcmF3RG9udXRIb2xlKGN0eCk7XG5cblx0XHRcdFx0Y3R4LnJlc3RvcmUoKTtcblxuXHRcdFx0XHQvLyBEcmF3IHRoZSBsYWJlbHMsIHJldHVybmluZyB0cnVlIGlmIHRoZXkgZml0IHdpdGhpbiB0aGUgcGxvdFxuXG5cdFx0XHRcdGlmIChvcHRpb25zLnNlcmllcy5waWUubGFiZWwuc2hvdykge1xuXHRcdFx0XHRcdHJldHVybiBkcmF3TGFiZWxzKCk7XG5cdFx0XHRcdH0gZWxzZSByZXR1cm4gdHJ1ZTtcblxuXHRcdFx0XHRmdW5jdGlvbiBkcmF3U2xpY2UoYW5nbGUsIGNvbG9yLCBmaWxsKSB7XG5cblx0XHRcdFx0XHRpZiAoYW5nbGUgPD0gMCB8fCBpc05hTihhbmdsZSkpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoZmlsbCkge1xuXHRcdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcblx0XHRcdFx0XHRcdGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRcdFx0aWYgKE1hdGguYWJzKGFuZ2xlIC0gTWF0aC5QSSAqIDIpID4gMC4wMDAwMDAwMDEpIHtcblx0XHRcdFx0XHRcdGN0eC5tb3ZlVG8oMCwgMCk7IC8vIENlbnRlciBvZiB0aGUgcGllXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly9jdHguYXJjKDAsIDAsIHJhZGl1cywgMCwgYW5nbGUsIGZhbHNlKTsgLy8gVGhpcyBkb2Vzbid0IHdvcmsgcHJvcGVybHkgaW4gT3BlcmFcblx0XHRcdFx0XHRjdHguYXJjKDAsIDAsIHJhZGl1cyxjdXJyZW50QW5nbGUsIGN1cnJlbnRBbmdsZSArIGFuZ2xlIC8gMiwgZmFsc2UpO1xuXHRcdFx0XHRcdGN0eC5hcmMoMCwgMCwgcmFkaXVzLGN1cnJlbnRBbmdsZSArIGFuZ2xlIC8gMiwgY3VycmVudEFuZ2xlICsgYW5nbGUsIGZhbHNlKTtcblx0XHRcdFx0XHRjdHguY2xvc2VQYXRoKCk7XG5cdFx0XHRcdFx0Ly9jdHgucm90YXRlKGFuZ2xlKTsgLy8gVGhpcyBkb2Vzbid0IHdvcmsgcHJvcGVybHkgaW4gT3BlcmFcblx0XHRcdFx0XHRjdXJyZW50QW5nbGUgKz0gYW5nbGU7XG5cblx0XHRcdFx0XHRpZiAoZmlsbCkge1xuXHRcdFx0XHRcdFx0Y3R4LmZpbGwoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIGRyYXdMYWJlbHMoKSB7XG5cblx0XHRcdFx0XHR2YXIgY3VycmVudEFuZ2xlID0gc3RhcnRBbmdsZTtcblx0XHRcdFx0XHR2YXIgcmFkaXVzID0gb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnJhZGl1cyA+IDEgPyBvcHRpb25zLnNlcmllcy5waWUubGFiZWwucmFkaXVzIDogbWF4UmFkaXVzICogb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnJhZGl1cztcblxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2xpY2VzW2ldLnBlcmNlbnQgPj0gb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLnRocmVzaG9sZCAqIDEwMCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIWRyYXdMYWJlbChzbGljZXNbaV0sIGN1cnJlbnRBbmdsZSwgaSkpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGN1cnJlbnRBbmdsZSArPSBzbGljZXNbaV0uYW5nbGU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdFx0XHRmdW5jdGlvbiBkcmF3TGFiZWwoc2xpY2UsIHN0YXJ0QW5nbGUsIGluZGV4KSB7XG5cblx0XHRcdFx0XHRcdGlmIChzbGljZS5kYXRhWzBdWzFdID09IDApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGZvcm1hdCBsYWJlbCB0ZXh0XG5cblx0XHRcdFx0XHRcdHZhciBsZiA9IG9wdGlvbnMubGVnZW5kLmxhYmVsRm9ybWF0dGVyLCB0ZXh0LCBwbGYgPSBvcHRpb25zLnNlcmllcy5waWUubGFiZWwuZm9ybWF0dGVyO1xuXG5cdFx0XHRcdFx0XHRpZiAobGYpIHtcblx0XHRcdFx0XHRcdFx0dGV4dCA9IGxmKHNsaWNlLmxhYmVsLCBzbGljZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0ZXh0ID0gc2xpY2UubGFiZWw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChwbGYpIHtcblx0XHRcdFx0XHRcdFx0dGV4dCA9IHBsZih0ZXh0LCBzbGljZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBoYWxmQW5nbGUgPSAoKHN0YXJ0QW5nbGUgKyBzbGljZS5hbmdsZSkgKyBzdGFydEFuZ2xlKSAvIDI7XG5cdFx0XHRcdFx0XHR2YXIgeCA9IGNlbnRlckxlZnQgKyBNYXRoLnJvdW5kKE1hdGguY29zKGhhbGZBbmdsZSkgKiByYWRpdXMpO1xuXHRcdFx0XHRcdFx0dmFyIHkgPSBjZW50ZXJUb3AgKyBNYXRoLnJvdW5kKE1hdGguc2luKGhhbGZBbmdsZSkgKiByYWRpdXMpICogb3B0aW9ucy5zZXJpZXMucGllLnRpbHQ7XG5cblx0XHRcdFx0XHRcdHZhciBodG1sID0gXCI8c3BhbiBjbGFzcz0ncGllTGFiZWwnIGlkPSdwaWVMYWJlbFwiICsgaW5kZXggKyBcIicgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDpcIiArIHkgKyBcInB4O2xlZnQ6XCIgKyB4ICsgXCJweDsnPlwiICsgdGV4dCArIFwiPC9zcGFuPlwiO1xuXHRcdFx0XHRcdFx0dGFyZ2V0LmFwcGVuZChodG1sKTtcblxuXHRcdFx0XHRcdFx0dmFyIGxhYmVsID0gdGFyZ2V0LmNoaWxkcmVuKFwiI3BpZUxhYmVsXCIgKyBpbmRleCk7XG5cdFx0XHRcdFx0XHR2YXIgbGFiZWxUb3AgPSAoeSAtIGxhYmVsLmhlaWdodCgpIC8gMik7XG5cdFx0XHRcdFx0XHR2YXIgbGFiZWxMZWZ0ID0gKHggLSBsYWJlbC53aWR0aCgpIC8gMik7XG5cblx0XHRcdFx0XHRcdGxhYmVsLmNzcyhcInRvcFwiLCBsYWJlbFRvcCk7XG5cdFx0XHRcdFx0XHRsYWJlbC5jc3MoXCJsZWZ0XCIsIGxhYmVsTGVmdCk7XG5cblx0XHRcdFx0XHRcdC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBsYWJlbCBpcyBub3Qgb3V0c2lkZSB0aGUgY2FudmFzXG5cblx0XHRcdFx0XHRcdGlmICgwIC0gbGFiZWxUb3AgPiAwIHx8IDAgLSBsYWJlbExlZnQgPiAwIHx8IGNhbnZhc0hlaWdodCAtIChsYWJlbFRvcCArIGxhYmVsLmhlaWdodCgpKSA8IDAgfHwgY2FudmFzV2lkdGggLSAobGFiZWxMZWZ0ICsgbGFiZWwud2lkdGgoKSkgPCAwKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5sYWJlbC5iYWNrZ3JvdW5kLm9wYWNpdHkgIT0gMCkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIHB1dCBpbiB0aGUgdHJhbnNwYXJlbnQgYmFja2dyb3VuZCBzZXBhcmF0ZWx5IHRvIGF2b2lkIGJsZW5kZWQgbGFiZWxzIGFuZCBsYWJlbCBib3hlc1xuXG5cdFx0XHRcdFx0XHRcdHZhciBjID0gb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLmJhY2tncm91bmQuY29sb3I7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGMgPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRcdGMgPSBzbGljZS5jb2xvcjtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHZhciBwb3MgPSBcInRvcDpcIiArIGxhYmVsVG9wICsgXCJweDtsZWZ0OlwiICsgbGFiZWxMZWZ0ICsgXCJweDtcIjtcblx0XHRcdFx0XHRcdFx0JChcIjxkaXYgY2xhc3M9J3BpZUxhYmVsQmFja2dyb3VuZCcgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOlwiICsgbGFiZWwud2lkdGgoKSArIFwicHg7aGVpZ2h0OlwiICsgbGFiZWwuaGVpZ2h0KCkgKyBcInB4O1wiICsgcG9zICsgXCJiYWNrZ3JvdW5kLWNvbG9yOlwiICsgYyArIFwiOyc+PC9kaXY+XCIpXG5cdFx0XHRcdFx0XHRcdFx0LmNzcyhcIm9wYWNpdHlcIiwgb3B0aW9ucy5zZXJpZXMucGllLmxhYmVsLmJhY2tncm91bmQub3BhY2l0eSlcblx0XHRcdFx0XHRcdFx0XHQuaW5zZXJ0QmVmb3JlKGxhYmVsKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fSAvLyBlbmQgaW5kaXZpZHVhbCBsYWJlbCBmdW5jdGlvblxuXHRcdFx0XHR9IC8vIGVuZCBkcmF3TGFiZWxzIGZ1bmN0aW9uXG5cdFx0XHR9IC8vIGVuZCBkcmF3UGllIGZ1bmN0aW9uXG5cdFx0fSAvLyBlbmQgZHJhdyBmdW5jdGlvblxuXG5cdFx0Ly8gUGxhY2VkIGhlcmUgYmVjYXVzZSBpdCBuZWVkcyB0byBiZSBhY2Nlc3NlZCBmcm9tIG11bHRpcGxlIGxvY2F0aW9uc1xuXG5cdFx0ZnVuY3Rpb24gZHJhd0RvbnV0SG9sZShsYXllcikge1xuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWVzLnBpZS5pbm5lclJhZGl1cyA+IDApIHtcblxuXHRcdFx0XHQvLyBzdWJ0cmFjdCB0aGUgY2VudGVyXG5cblx0XHRcdFx0bGF5ZXIuc2F2ZSgpO1xuXHRcdFx0XHR2YXIgaW5uZXJSYWRpdXMgPSBvcHRpb25zLnNlcmllcy5waWUuaW5uZXJSYWRpdXMgPiAxID8gb3B0aW9ucy5zZXJpZXMucGllLmlubmVyUmFkaXVzIDogbWF4UmFkaXVzICogb3B0aW9ucy5zZXJpZXMucGllLmlubmVyUmFkaXVzO1xuXHRcdFx0XHRsYXllci5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiOyAvLyB0aGlzIGRvZXMgbm90IHdvcmsgd2l0aCBleGNhbnZhcywgYnV0IGl0IHdpbGwgZmFsbCBiYWNrIHRvIHVzaW5nIHRoZSBzdHJva2UgY29sb3Jcblx0XHRcdFx0bGF5ZXIuYmVnaW5QYXRoKCk7XG5cdFx0XHRcdGxheWVyLmZpbGxTdHlsZSA9IG9wdGlvbnMuc2VyaWVzLnBpZS5zdHJva2UuY29sb3I7XG5cdFx0XHRcdGxheWVyLmFyYygwLCAwLCBpbm5lclJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcblx0XHRcdFx0bGF5ZXIuZmlsbCgpO1xuXHRcdFx0XHRsYXllci5jbG9zZVBhdGgoKTtcblx0XHRcdFx0bGF5ZXIucmVzdG9yZSgpO1xuXG5cdFx0XHRcdC8vIGFkZCBpbm5lciBzdHJva2VcblxuXHRcdFx0XHRsYXllci5zYXZlKCk7XG5cdFx0XHRcdGxheWVyLmJlZ2luUGF0aCgpO1xuXHRcdFx0XHRsYXllci5zdHJva2VTdHlsZSA9IG9wdGlvbnMuc2VyaWVzLnBpZS5zdHJva2UuY29sb3I7XG5cdFx0XHRcdGxheWVyLmFyYygwLCAwLCBpbm5lclJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcblx0XHRcdFx0bGF5ZXIuc3Ryb2tlKCk7XG5cdFx0XHRcdGxheWVyLmNsb3NlUGF0aCgpO1xuXHRcdFx0XHRsYXllci5yZXN0b3JlKCk7XG5cblx0XHRcdFx0Ly8gVE9ETzogYWRkIGV4dHJhIHNoYWRvdyBpbnNpZGUgaG9sZSAod2l0aCBhIG1hc2spIGlmIHRoZSBwaWUgaXMgdGlsdGVkLlxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vLS0gQWRkaXRpb25hbCBJbnRlcmFjdGl2ZSByZWxhdGVkIGZ1bmN0aW9ucyAtLVxuXG5cdFx0ZnVuY3Rpb24gaXNQb2ludEluUG9seShwb2x5LCBwdCkge1xuXHRcdFx0Zm9yKHZhciBjID0gZmFsc2UsIGkgPSAtMSwgbCA9IHBvbHkubGVuZ3RoLCBqID0gbCAtIDE7ICsraSA8IGw7IGogPSBpKVxuXHRcdFx0XHQoKHBvbHlbaV1bMV0gPD0gcHRbMV0gJiYgcHRbMV0gPCBwb2x5W2pdWzFdKSB8fCAocG9seVtqXVsxXSA8PSBwdFsxXSAmJiBwdFsxXTwgcG9seVtpXVsxXSkpXG5cdFx0XHRcdCYmIChwdFswXSA8IChwb2x5W2pdWzBdIC0gcG9seVtpXVswXSkgKiAocHRbMV0gLSBwb2x5W2ldWzFdKSAvIChwb2x5W2pdWzFdIC0gcG9seVtpXVsxXSkgKyBwb2x5W2ldWzBdKVxuXHRcdFx0XHQmJiAoYyA9ICFjKTtcblx0XHRcdHJldHVybiBjO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGZpbmROZWFyYnlTbGljZShtb3VzZVgsIG1vdXNlWSkge1xuXG5cdFx0XHR2YXIgc2xpY2VzID0gcGxvdC5nZXREYXRhKCksXG5cdFx0XHRcdG9wdGlvbnMgPSBwbG90LmdldE9wdGlvbnMoKSxcblx0XHRcdFx0cmFkaXVzID0gb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyA+IDEgPyBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzIDogbWF4UmFkaXVzICogb3B0aW9ucy5zZXJpZXMucGllLnJhZGl1cyxcblx0XHRcdFx0eCwgeTtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZXMubGVuZ3RoOyArK2kpIHtcblxuXHRcdFx0XHR2YXIgcyA9IHNsaWNlc1tpXTtcblxuXHRcdFx0XHRpZiAocy5waWUuc2hvdykge1xuXG5cdFx0XHRcdFx0Y3R4LnNhdmUoKTtcblx0XHRcdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRcdFx0Y3R4Lm1vdmVUbygwLCAwKTsgLy8gQ2VudGVyIG9mIHRoZSBwaWVcblx0XHRcdFx0XHQvL2N0eC5zY2FsZSgxLCBvcHRpb25zLnNlcmllcy5waWUudGlsdCk7XHQvLyB0aGlzIGFjdHVhbGx5IHNlZW1zIHRvIGJyZWFrIGV2ZXJ5dGhpbmcgd2hlbiBoZXJlLlxuXHRcdFx0XHRcdGN0eC5hcmMoMCwgMCwgcmFkaXVzLCBzLnN0YXJ0QW5nbGUsIHMuc3RhcnRBbmdsZSArIHMuYW5nbGUgLyAyLCBmYWxzZSk7XG5cdFx0XHRcdFx0Y3R4LmFyYygwLCAwLCByYWRpdXMsIHMuc3RhcnRBbmdsZSArIHMuYW5nbGUgLyAyLCBzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlLCBmYWxzZSk7XG5cdFx0XHRcdFx0Y3R4LmNsb3NlUGF0aCgpO1xuXHRcdFx0XHRcdHggPSBtb3VzZVggLSBjZW50ZXJMZWZ0O1xuXHRcdFx0XHRcdHkgPSBtb3VzZVkgLSBjZW50ZXJUb3A7XG5cblx0XHRcdFx0XHRpZiAoY3R4LmlzUG9pbnRJblBhdGgpIHtcblx0XHRcdFx0XHRcdGlmIChjdHguaXNQb2ludEluUGF0aChtb3VzZVggLSBjZW50ZXJMZWZ0LCBtb3VzZVkgLSBjZW50ZXJUb3ApKSB7XG5cdFx0XHRcdFx0XHRcdGN0eC5yZXN0b3JlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YXBvaW50OiBbcy5wZXJjZW50LCBzLmRhdGFdLFxuXHRcdFx0XHRcdFx0XHRcdGRhdGFJbmRleDogMCxcblx0XHRcdFx0XHRcdFx0XHRzZXJpZXM6IHMsXG5cdFx0XHRcdFx0XHRcdFx0c2VyaWVzSW5kZXg6IGlcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBleGNhbnZhcyBmb3IgSUUgZG9lc247dCBzdXBwb3J0IGlzUG9pbnRJblBhdGgsIHRoaXMgaXMgYSB3b3JrYXJvdW5kLlxuXG5cdFx0XHRcdFx0XHR2YXIgcDFYID0gcmFkaXVzICogTWF0aC5jb3Mocy5zdGFydEFuZ2xlKSxcblx0XHRcdFx0XHRcdFx0cDFZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlKSxcblx0XHRcdFx0XHRcdFx0cDJYID0gcmFkaXVzICogTWF0aC5jb3Mocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDQpLFxuXHRcdFx0XHRcdFx0XHRwMlkgPSByYWRpdXMgKiBNYXRoLnNpbihzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlIC8gNCksXG5cdFx0XHRcdFx0XHRcdHAzWCA9IHJhZGl1cyAqIE1hdGguY29zKHMuc3RhcnRBbmdsZSArIHMuYW5nbGUgLyAyKSxcblx0XHRcdFx0XHRcdFx0cDNZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDIpLFxuXHRcdFx0XHRcdFx0XHRwNFggPSByYWRpdXMgKiBNYXRoLmNvcyhzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlIC8gMS41KSxcblx0XHRcdFx0XHRcdFx0cDRZID0gcmFkaXVzICogTWF0aC5zaW4ocy5zdGFydEFuZ2xlICsgcy5hbmdsZSAvIDEuNSksXG5cdFx0XHRcdFx0XHRcdHA1WCA9IHJhZGl1cyAqIE1hdGguY29zKHMuc3RhcnRBbmdsZSArIHMuYW5nbGUpLFxuXHRcdFx0XHRcdFx0XHRwNVkgPSByYWRpdXMgKiBNYXRoLnNpbihzLnN0YXJ0QW5nbGUgKyBzLmFuZ2xlKSxcblx0XHRcdFx0XHRcdFx0YXJyUG9seSA9IFtbMCwgMF0sIFtwMVgsIHAxWV0sIFtwMlgsIHAyWV0sIFtwM1gsIHAzWV0sIFtwNFgsIHA0WV0sIFtwNVgsIHA1WV1dLFxuXHRcdFx0XHRcdFx0XHRhcnJQb2ludCA9IFt4LCB5XTtcblxuXHRcdFx0XHRcdFx0Ly8gVE9ETzogcGVyaGFwcyBkbyBzb21lIG1hdGhtYXRpY2FsIHRyaWNrZXJ5IGhlcmUgd2l0aCB0aGUgWS1jb29yZGluYXRlIHRvIGNvbXBlbnNhdGUgZm9yIHBpZSB0aWx0P1xuXG5cdFx0XHRcdFx0XHRpZiAoaXNQb2ludEluUG9seShhcnJQb2x5LCBhcnJQb2ludCkpIHtcblx0XHRcdFx0XHRcdFx0Y3R4LnJlc3RvcmUoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRkYXRhcG9pbnQ6IFtzLnBlcmNlbnQsIHMuZGF0YV0sXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUluZGV4OiAwLFxuXHRcdFx0XHRcdFx0XHRcdHNlcmllczogcyxcblx0XHRcdFx0XHRcdFx0XHRzZXJpZXNJbmRleDogaVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGN0eC5yZXN0b3JlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Nb3VzZU1vdmUoZSkge1xuXHRcdFx0dHJpZ2dlckNsaWNrSG92ZXJFdmVudChcInBsb3Rob3ZlclwiLCBlKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0XHRcdHRyaWdnZXJDbGlja0hvdmVyRXZlbnQoXCJwbG90Y2xpY2tcIiwgZSk7XG5cdFx0fVxuXG5cdFx0Ly8gdHJpZ2dlciBjbGljayBvciBob3ZlciBldmVudCAodGhleSBzZW5kIHRoZSBzYW1lIHBhcmFtZXRlcnMgc28gd2Ugc2hhcmUgdGhlaXIgY29kZSlcblxuXHRcdGZ1bmN0aW9uIHRyaWdnZXJDbGlja0hvdmVyRXZlbnQoZXZlbnRuYW1lLCBlKSB7XG5cblx0XHRcdHZhciBvZmZzZXQgPSBwbG90Lm9mZnNldCgpO1xuXHRcdFx0dmFyIGNhbnZhc1ggPSBwYXJzZUludChlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQpO1xuXHRcdFx0dmFyIGNhbnZhc1kgPSAgcGFyc2VJbnQoZS5wYWdlWSAtIG9mZnNldC50b3ApO1xuXHRcdFx0dmFyIGl0ZW0gPSBmaW5kTmVhcmJ5U2xpY2UoY2FudmFzWCwgY2FudmFzWSk7XG5cblx0XHRcdGlmIChvcHRpb25zLmdyaWQuYXV0b0hpZ2hsaWdodCkge1xuXG5cdFx0XHRcdC8vIGNsZWFyIGF1dG8taGlnaGxpZ2h0c1xuXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaGlnaGxpZ2h0cy5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHRcdHZhciBoID0gaGlnaGxpZ2h0c1tpXTtcblx0XHRcdFx0XHRpZiAoaC5hdXRvID09IGV2ZW50bmFtZSAmJiAhKGl0ZW0gJiYgaC5zZXJpZXMgPT0gaXRlbS5zZXJpZXMpKSB7XG5cdFx0XHRcdFx0XHR1bmhpZ2hsaWdodChoLnNlcmllcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGhpZ2hsaWdodCB0aGUgc2xpY2VcblxuXHRcdFx0aWYgKGl0ZW0pIHtcblx0XHRcdFx0aGlnaGxpZ2h0KGl0ZW0uc2VyaWVzLCBldmVudG5hbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB0cmlnZ2VyIGFueSBob3ZlciBiaW5kIGV2ZW50c1xuXG5cdFx0XHR2YXIgcG9zID0geyBwYWdlWDogZS5wYWdlWCwgcGFnZVk6IGUucGFnZVkgfTtcblx0XHRcdHRhcmdldC50cmlnZ2VyKGV2ZW50bmFtZSwgW3BvcywgaXRlbV0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhpZ2hsaWdodChzLCBhdXRvKSB7XG5cdFx0XHQvL2lmICh0eXBlb2YgcyA9PSBcIm51bWJlclwiKSB7XG5cdFx0XHQvL1x0cyA9IHNlcmllc1tzXTtcblx0XHRcdC8vfVxuXG5cdFx0XHR2YXIgaSA9IGluZGV4T2ZIaWdobGlnaHQocyk7XG5cblx0XHRcdGlmIChpID09IC0xKSB7XG5cdFx0XHRcdGhpZ2hsaWdodHMucHVzaCh7IHNlcmllczogcywgYXV0bzogYXV0byB9KTtcblx0XHRcdFx0cGxvdC50cmlnZ2VyUmVkcmF3T3ZlcmxheSgpO1xuXHRcdFx0fSBlbHNlIGlmICghYXV0bykge1xuXHRcdFx0XHRoaWdobGlnaHRzW2ldLmF1dG8gPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiB1bmhpZ2hsaWdodChzKSB7XG5cdFx0XHRpZiAocyA9PSBudWxsKSB7XG5cdFx0XHRcdGhpZ2hsaWdodHMgPSBbXTtcblx0XHRcdFx0cGxvdC50cmlnZ2VyUmVkcmF3T3ZlcmxheSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvL2lmICh0eXBlb2YgcyA9PSBcIm51bWJlclwiKSB7XG5cdFx0XHQvL1x0cyA9IHNlcmllc1tzXTtcblx0XHRcdC8vfVxuXG5cdFx0XHR2YXIgaSA9IGluZGV4T2ZIaWdobGlnaHQocyk7XG5cblx0XHRcdGlmIChpICE9IC0xKSB7XG5cdFx0XHRcdGhpZ2hsaWdodHMuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaW5kZXhPZkhpZ2hsaWdodChzKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGhpZ2hsaWdodHMubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0dmFyIGggPSBoaWdobGlnaHRzW2ldO1xuXHRcdFx0XHRpZiAoaC5zZXJpZXMgPT0gcylcblx0XHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAtMTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkcmF3T3ZlcmxheShwbG90LCBvY3R4KSB7XG5cblx0XHRcdHZhciBvcHRpb25zID0gcGxvdC5nZXRPcHRpb25zKCk7XG5cblx0XHRcdHZhciByYWRpdXMgPSBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzID4gMSA/IG9wdGlvbnMuc2VyaWVzLnBpZS5yYWRpdXMgOiBtYXhSYWRpdXMgKiBvcHRpb25zLnNlcmllcy5waWUucmFkaXVzO1xuXG5cdFx0XHRvY3R4LnNhdmUoKTtcblx0XHRcdG9jdHgudHJhbnNsYXRlKGNlbnRlckxlZnQsIGNlbnRlclRvcCk7XG5cdFx0XHRvY3R4LnNjYWxlKDEsIG9wdGlvbnMuc2VyaWVzLnBpZS50aWx0KTtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBoaWdobGlnaHRzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdGRyYXdIaWdobGlnaHQoaGlnaGxpZ2h0c1tpXS5zZXJpZXMpO1xuXHRcdFx0fVxuXG5cdFx0XHRkcmF3RG9udXRIb2xlKG9jdHgpO1xuXG5cdFx0XHRvY3R4LnJlc3RvcmUoKTtcblxuXHRcdFx0ZnVuY3Rpb24gZHJhd0hpZ2hsaWdodChzZXJpZXMpIHtcblxuXHRcdFx0XHRpZiAoc2VyaWVzLmFuZ2xlIDw9IDAgfHwgaXNOYU4oc2VyaWVzLmFuZ2xlKSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vb2N0eC5maWxsU3R5bGUgPSBwYXJzZUNvbG9yKG9wdGlvbnMuc2VyaWVzLnBpZS5oaWdobGlnaHQuY29sb3IpLnNjYWxlKG51bGwsIG51bGwsIG51bGwsIG9wdGlvbnMuc2VyaWVzLnBpZS5oaWdobGlnaHQub3BhY2l0eSkudG9TdHJpbmcoKTtcblx0XHRcdFx0b2N0eC5maWxsU3R5bGUgPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgXCIgKyBvcHRpb25zLnNlcmllcy5waWUuaGlnaGxpZ2h0Lm9wYWNpdHkgKyBcIilcIjsgLy8gdGhpcyBpcyB0ZW1wb3JhcnkgdW50aWwgd2UgaGF2ZSBhY2Nlc3MgdG8gcGFyc2VDb2xvclxuXHRcdFx0XHRvY3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0XHRpZiAoTWF0aC5hYnMoc2VyaWVzLmFuZ2xlIC0gTWF0aC5QSSAqIDIpID4gMC4wMDAwMDAwMDEpIHtcblx0XHRcdFx0XHRvY3R4Lm1vdmVUbygwLCAwKTsgLy8gQ2VudGVyIG9mIHRoZSBwaWVcblx0XHRcdFx0fVxuXHRcdFx0XHRvY3R4LmFyYygwLCAwLCByYWRpdXMsIHNlcmllcy5zdGFydEFuZ2xlLCBzZXJpZXMuc3RhcnRBbmdsZSArIHNlcmllcy5hbmdsZSAvIDIsIGZhbHNlKTtcblx0XHRcdFx0b2N0eC5hcmMoMCwgMCwgcmFkaXVzLCBzZXJpZXMuc3RhcnRBbmdsZSArIHNlcmllcy5hbmdsZSAvIDIsIHNlcmllcy5zdGFydEFuZ2xlICsgc2VyaWVzLmFuZ2xlLCBmYWxzZSk7XG5cdFx0XHRcdG9jdHguY2xvc2VQYXRoKCk7XG5cdFx0XHRcdG9jdHguZmlsbCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSAvLyBlbmQgaW5pdCAocGx1Z2luIGJvZHkpXG5cblx0Ly8gZGVmaW5lIHBpZSBzcGVjaWZpYyBvcHRpb25zIGFuZCB0aGVpciBkZWZhdWx0IHZhbHVlc1xuXG5cdHZhciBvcHRpb25zID0ge1xuXHRcdHNlcmllczoge1xuXHRcdFx0cGllOiB7XG5cdFx0XHRcdHNob3c6IGZhbHNlLFxuXHRcdFx0XHRyYWRpdXM6IFwiYXV0b1wiLFx0Ly8gYWN0dWFsIHJhZGl1cyBvZiB0aGUgdmlzaWJsZSBwaWUgKGJhc2VkIG9uIGZ1bGwgY2FsY3VsYXRlZCByYWRpdXMgaWYgPD0xLCBvciBoYXJkIHBpeGVsIHZhbHVlKVxuXHRcdFx0XHRpbm5lclJhZGl1czogMCwgLyogZm9yIGRvbnV0ICovXG5cdFx0XHRcdHN0YXJ0QW5nbGU6IDMvMixcblx0XHRcdFx0dGlsdDogMSxcblx0XHRcdFx0c2hhZG93OiB7XG5cdFx0XHRcdFx0bGVmdDogNSxcdC8vIHNoYWRvdyBsZWZ0IG9mZnNldFxuXHRcdFx0XHRcdHRvcDogMTUsXHQvLyBzaGFkb3cgdG9wIG9mZnNldFxuXHRcdFx0XHRcdGFscGhhOiAwLjAyXHQvLyBzaGFkb3cgYWxwaGFcblx0XHRcdFx0fSxcblx0XHRcdFx0b2Zmc2V0OiB7XG5cdFx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRcdGxlZnQ6IFwiYXV0b1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN0cm9rZToge1xuXHRcdFx0XHRcdGNvbG9yOiBcIiNmZmZcIixcblx0XHRcdFx0XHR3aWR0aDogMVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsYWJlbDoge1xuXHRcdFx0XHRcdHNob3c6IFwiYXV0b1wiLFxuXHRcdFx0XHRcdGZvcm1hdHRlcjogZnVuY3Rpb24obGFiZWwsIHNsaWNlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gXCI8ZGl2IHN0eWxlPSdmb250LXNpemU6eC1zbWFsbDt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjJweDtjb2xvcjpcIiArIHNsaWNlLmNvbG9yICsgXCI7Jz5cIiArIGxhYmVsICsgXCI8YnIvPlwiICsgTWF0aC5yb3VuZChzbGljZS5wZXJjZW50KSArIFwiJTwvZGl2PlwiO1xuXHRcdFx0XHRcdH0sXHQvLyBmb3JtYXR0ZXIgZnVuY3Rpb25cblx0XHRcdFx0XHRyYWRpdXM6IDEsXHQvLyByYWRpdXMgYXQgd2hpY2ggdG8gcGxhY2UgdGhlIGxhYmVscyAoYmFzZWQgb24gZnVsbCBjYWxjdWxhdGVkIHJhZGl1cyBpZiA8PTEsIG9yIGhhcmQgcGl4ZWwgdmFsdWUpXG5cdFx0XHRcdFx0YmFja2dyb3VuZDoge1xuXHRcdFx0XHRcdFx0Y29sb3I6IG51bGwsXG5cdFx0XHRcdFx0XHRvcGFjaXR5OiAwXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0aHJlc2hvbGQ6IDBcdC8vIHBlcmNlbnRhZ2UgYXQgd2hpY2ggdG8gaGlkZSB0aGUgbGFiZWwgKGkuZS4gdGhlIHNsaWNlIGlzIHRvbyBuYXJyb3cpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvbWJpbmU6IHtcblx0XHRcdFx0XHR0aHJlc2hvbGQ6IC0xLFx0Ly8gcGVyY2VudGFnZSBhdCB3aGljaCB0byBjb21iaW5lIGxpdHRsZSBzbGljZXMgaW50byBvbmUgbGFyZ2VyIHNsaWNlXG5cdFx0XHRcdFx0Y29sb3I6IG51bGwsXHQvLyBjb2xvciB0byBnaXZlIHRoZSBuZXcgc2xpY2UgKGF1dG8tZ2VuZXJhdGVkIGlmIG51bGwpXG5cdFx0XHRcdFx0bGFiZWw6IFwiT3RoZXJcIlx0Ly8gbGFiZWwgdG8gZ2l2ZSB0aGUgbmV3IHNsaWNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhpZ2hsaWdodDoge1xuXHRcdFx0XHRcdC8vY29sb3I6IFwiI2ZmZlwiLFx0XHQvLyB3aWxsIGFkZCB0aGlzIGZ1bmN0aW9uYWxpdHkgb25jZSBwYXJzZUNvbG9yIGlzIGF2YWlsYWJsZVxuXHRcdFx0XHRcdG9wYWNpdHk6IDAuNVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCQucGxvdC5wbHVnaW5zLnB1c2goe1xuXHRcdGluaXQ6IGluaXQsXG5cdFx0b3B0aW9uczogb3B0aW9ucyxcblx0XHRuYW1lOiBcInBpZVwiLFxuXHRcdHZlcnNpb246IFwiMS4xXCJcblx0fSk7XG5cbn0pKGpRdWVyeSk7XG4iLCIvKiBGbG90IHBsdWdpbiBmb3Igc3RhY2tpbmcgZGF0YSBzZXRzIHJhdGhlciB0aGFuIG92ZXJseWFpbmcgdGhlbS5cblxuQ29weXJpZ2h0IChjKSAyMDA3LTIwMTQgSU9MQSBhbmQgT2xlIExhdXJzZW4uXG5MaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cblRoZSBwbHVnaW4gYXNzdW1lcyB0aGUgZGF0YSBpcyBzb3J0ZWQgb24geCAob3IgeSBpZiBzdGFja2luZyBob3Jpem9udGFsbHkpLlxuRm9yIGxpbmUgY2hhcnRzLCBpdCBpcyBhc3N1bWVkIHRoYXQgaWYgYSBsaW5lIGhhcyBhbiB1bmRlZmluZWQgZ2FwIChmcm9tIGFcbm51bGwgcG9pbnQpLCB0aGVuIHRoZSBsaW5lIGFib3ZlIGl0IHNob3VsZCBoYXZlIHRoZSBzYW1lIGdhcCAtIGluc2VydCB6ZXJvc1xuaW5zdGVhZCBvZiBcIm51bGxcIiBpZiB5b3Ugd2FudCBhbm90aGVyIGJlaGF2aW91ci4gVGhpcyBhbHNvIGhvbGRzIGZvciB0aGUgc3RhcnRcbmFuZCBlbmQgb2YgdGhlIGNoYXJ0LiBOb3RlIHRoYXQgc3RhY2tpbmcgYSBtaXggb2YgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHZhbHVlc1xuaW4gbW9zdCBpbnN0YW5jZXMgZG9lc24ndCBtYWtlIHNlbnNlIChzbyBpdCBsb29rcyB3ZWlyZCkuXG5cblR3byBvciBtb3JlIHNlcmllcyBhcmUgc3RhY2tlZCB3aGVuIHRoZWlyIFwic3RhY2tcIiBhdHRyaWJ1dGUgaXMgc2V0IHRvIHRoZSBzYW1lXG5rZXkgKHdoaWNoIGNhbiBiZSBhbnkgbnVtYmVyIG9yIHN0cmluZyBvciBqdXN0IFwidHJ1ZVwiKS4gVG8gc3BlY2lmeSB0aGUgZGVmYXVsdFxuc3RhY2ssIHlvdSBjYW4gc2V0IHRoZSBzdGFjayBvcHRpb24gbGlrZSB0aGlzOlxuXG5cdHNlcmllczoge1xuXHRcdHN0YWNrOiBudWxsL2ZhbHNlLCB0cnVlLCBvciBhIGtleSAobnVtYmVyL3N0cmluZylcblx0fVxuXG5Zb3UgY2FuIGFsc28gc3BlY2lmeSBpdCBmb3IgYSBzaW5nbGUgc2VyaWVzLCBsaWtlIHRoaXM6XG5cblx0JC5wbG90KCAkKFwiI3BsYWNlaG9sZGVyXCIpLCBbe1xuXHRcdGRhdGE6IFsgLi4uIF0sXG5cdFx0c3RhY2s6IHRydWVcblx0fV0pXG5cblRoZSBzdGFja2luZyBvcmRlciBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciBvZiB0aGUgZGF0YSBzZXJpZXMgaW4gdGhlIGFycmF5XG4obGF0ZXIgc2VyaWVzIGVuZCB1cCBvbiB0b3Agb2YgdGhlIHByZXZpb3VzKS5cblxuSW50ZXJuYWxseSwgdGhlIHBsdWdpbiBtb2RpZmllcyB0aGUgZGF0YXBvaW50cyBpbiBlYWNoIHNlcmllcywgYWRkaW5nIGFuXG5vZmZzZXQgdG8gdGhlIHkgdmFsdWUuIEZvciBsaW5lIHNlcmllcywgZXh0cmEgZGF0YSBwb2ludHMgYXJlIGluc2VydGVkIHRocm91Z2hcbmludGVycG9sYXRpb24uIElmIHRoZXJlJ3MgYSBzZWNvbmQgeSB2YWx1ZSwgaXQncyBhbHNvIGFkanVzdGVkIChlLmcgZm9yIGJhclxuY2hhcnRzIG9yIGZpbGxlZCBhcmVhcykuXG5cbiovXG5cbihmdW5jdGlvbiAoJCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBzZXJpZXM6IHsgc3RhY2s6IG51bGwgfSAvLyBvciBudW1iZXIvc3RyaW5nXG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBpbml0KHBsb3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZmluZE1hdGNoaW5nU2VyaWVzKHMsIGFsbHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbHNlcmllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChzID09IGFsbHNlcmllc1tpXSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFsbHNlcmllc1tpXS5zdGFjayA9PSBzLnN0YWNrKVxuICAgICAgICAgICAgICAgICAgICByZXMgPSBhbGxzZXJpZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHN0YWNrRGF0YShwbG90LCBzLCBkYXRhcG9pbnRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGFjayA9PSBudWxsIHx8IHMuc3RhY2sgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIG90aGVyID0gZmluZE1hdGNoaW5nU2VyaWVzKHMsIHBsb3QuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIGlmICghb3RoZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgcHMgPSBkYXRhcG9pbnRzLnBvaW50c2l6ZSxcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBkYXRhcG9pbnRzLnBvaW50cyxcbiAgICAgICAgICAgICAgICBvdGhlcnBzID0gb3RoZXIuZGF0YXBvaW50cy5wb2ludHNpemUsXG4gICAgICAgICAgICAgICAgb3RoZXJwb2ludHMgPSBvdGhlci5kYXRhcG9pbnRzLnBvaW50cyxcbiAgICAgICAgICAgICAgICBuZXdwb2ludHMgPSBbXSxcbiAgICAgICAgICAgICAgICBweCwgcHksIGludGVyeSwgcXgsIHF5LCBib3R0b20sXG4gICAgICAgICAgICAgICAgd2l0aGxpbmVzID0gcy5saW5lcy5zaG93LFxuICAgICAgICAgICAgICAgIGhvcml6b250YWwgPSBzLmJhcnMuaG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB3aXRoYm90dG9tID0gcHMgPiAyICYmIChob3Jpem9udGFsID8gZGF0YXBvaW50cy5mb3JtYXRbMl0ueCA6IGRhdGFwb2ludHMuZm9ybWF0WzJdLnkpLFxuICAgICAgICAgICAgICAgIHdpdGhzdGVwcyA9IHdpdGhsaW5lcyAmJiBzLmxpbmVzLnN0ZXBzLFxuICAgICAgICAgICAgICAgIGZyb21nYXAgPSB0cnVlLFxuICAgICAgICAgICAgICAgIGtleU9mZnNldCA9IGhvcml6b250YWwgPyAxIDogMCxcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlT2Zmc2V0ID0gaG9yaXpvbnRhbCA/IDAgOiAxLFxuICAgICAgICAgICAgICAgIGkgPSAwLCBqID0gMCwgbCwgbTtcblxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBwb2ludHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGwgPSBuZXdwb2ludHMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgZ2Fwc1xuICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld3BvaW50cy5wdXNoKHBvaW50c1tpICsgbV0pO1xuICAgICAgICAgICAgICAgICAgICBpICs9IHBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChqID49IG90aGVycG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgbGluZXMsIHdlIGNhbid0IHVzZSB0aGUgcmVzdCBvZiB0aGUgcG9pbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2l0aGxpbmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdwb2ludHMucHVzaChwb2ludHNbaSArIG1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpICs9IHBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvdGhlcnBvaW50c1tqXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9vcHMsIGdvdCBhIGdhcFxuICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld3BvaW50cy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tZ2FwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaiArPSBvdGhlcnBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZXMgd2hlcmUgd2UgYWN0dWFsbHkgZ290IHR3byBwb2ludHNcbiAgICAgICAgICAgICAgICAgICAgcHggPSBwb2ludHNbaSArIGtleU9mZnNldF07XG4gICAgICAgICAgICAgICAgICAgIHB5ID0gcG9pbnRzW2kgKyBhY2N1bXVsYXRlT2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgcXggPSBvdGhlcnBvaW50c1tqICsga2V5T2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgcXkgPSBvdGhlcnBvaW50c1tqICsgYWNjdW11bGF0ZU9mZnNldF07XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHB4ID09IHF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdwb2ludHMucHVzaChwb2ludHNbaSArIG1dKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3cG9pbnRzW2wgKyBhY2N1bXVsYXRlT2Zmc2V0XSArPSBxeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IHF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpICs9IHBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgaiArPSBvdGhlcnBzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHB4ID4gcXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGdvdCBwYXN0IHBvaW50IGJlbG93LCBtaWdodCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnNlcnQgaW50ZXJwb2xhdGVkIGV4dHJhIHBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2l0aGxpbmVzICYmIGkgPiAwICYmIHBvaW50c1tpIC0gcHNdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnkgPSBweSArIChwb2ludHNbaSAtIHBzICsgYWNjdW11bGF0ZU9mZnNldF0gLSBweSkgKiAocXggLSBweCkgLyAocG9pbnRzW2kgLSBwcyArIGtleU9mZnNldF0gLSBweCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3cG9pbnRzLnB1c2gocXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3BvaW50cy5wdXNoKGludGVyeSArIHF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAyOyBtIDwgcHM7ICsrbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3cG9pbnRzLnB1c2gocG9pbnRzW2kgKyBtXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gcXk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBqICs9IG90aGVycHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vIHB4IDwgcXhcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcm9tZ2FwICYmIHdpdGhsaW5lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGNvbWUgZnJvbSBhIGdhcCwgd2UganVzdCBza2lwIHRoaXMgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IHBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IHBzOyArK20pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3cG9pbnRzLnB1c2gocG9pbnRzW2kgKyBtXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG1pZ2h0IGJlIGFibGUgdG8gaW50ZXJwb2xhdGUgYSBwb2ludCBiZWxvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgY2FuIGdpdmUgdXMgYSBiZXR0ZXIgeVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpdGhsaW5lcyAmJiBqID4gMCAmJiBvdGhlcnBvaW50c1tqIC0gb3RoZXJwc10gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBxeSArIChvdGhlcnBvaW50c1tqIC0gb3RoZXJwcyArIGFjY3VtdWxhdGVPZmZzZXRdIC0gcXkpICogKHB4IC0gcXgpIC8gKG90aGVycG9pbnRzW2ogLSBvdGhlcnBzICsga2V5T2Zmc2V0XSAtIHF4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3cG9pbnRzW2wgKyBhY2N1bXVsYXRlT2Zmc2V0XSArPSBib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcHM7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmcm9tZ2FwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobCAhPSBuZXdwb2ludHMubGVuZ3RoICYmIHdpdGhib3R0b20pXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdwb2ludHNbbCArIDJdICs9IGJvdHRvbTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBtYWludGFpbiB0aGUgbGluZSBzdGVwcyBpbnZhcmlhbnRcbiAgICAgICAgICAgICAgICBpZiAod2l0aHN0ZXBzICYmIGwgIT0gbmV3cG9pbnRzLmxlbmd0aCAmJiBsID4gMFxuICAgICAgICAgICAgICAgICAgICAmJiBuZXdwb2ludHNbbF0gIT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAmJiBuZXdwb2ludHNbbF0gIT0gbmV3cG9pbnRzW2wgLSBwc11cbiAgICAgICAgICAgICAgICAgICAgJiYgbmV3cG9pbnRzW2wgKyAxXSAhPSBuZXdwb2ludHNbbCAtIHBzICsgMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IHBzOyArK20pXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdwb2ludHNbbCArIHBzICsgbV0gPSBuZXdwb2ludHNbbCArIG1dO1xuICAgICAgICAgICAgICAgICAgICBuZXdwb2ludHNbbCArIDFdID0gbmV3cG9pbnRzW2wgLSBwcyArIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0YXBvaW50cy5wb2ludHMgPSBuZXdwb2ludHM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHBsb3QuaG9va3MucHJvY2Vzc0RhdGFwb2ludHMucHVzaChzdGFja0RhdGEpO1xuICAgIH1cbiAgICBcbiAgICAkLnBsb3QucGx1Z2lucy5wdXNoKHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgbmFtZTogJ3N0YWNrJyxcbiAgICAgICAgdmVyc2lvbjogJzEuMidcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIvKlxuICoganF1ZXJ5LmZsb3QudG9vbHRpcFxuICogXG4gKiBkZXNjcmlwdGlvbjogZWFzeS10by11c2UgdG9vbHRpcHMgZm9yIEZsb3QgY2hhcnRzXG4gKiB2ZXJzaW9uOiAwLjguNVxuICogYXV0aG9yczogS3J6eXN6dG9mIFVyYmFzIEBrcnp5c3UgW215dmlld3MucGxdLEV2YW4gU3RlaW5rZXJjaG5lciBAUm91bmRhcm91bmRcbiAqIHdlYnNpdGU6IGh0dHBzOi8vZ2l0aHViLmNvbS9rcnp5c3UvZmxvdC50b29sdGlwXG4gKiBcbiAqIGJ1aWxkIG9uIDIwMTUtMDUtMTFcbiAqIHJlbGVhc2VkIHVuZGVyIE1JVCBMaWNlbnNlLCAyMDEyXG4qLyBcbiFmdW5jdGlvbihhKXt2YXIgYj17dG9vbHRpcDp7c2hvdzohMSxjc3NDbGFzczpcImZsb3RUaXBcIixjb250ZW50OlwiJXMgfCBYOiAleCB8IFk6ICV5XCIseERhdGVGb3JtYXQ6bnVsbCx5RGF0ZUZvcm1hdDpudWxsLG1vbnRoTmFtZXM6bnVsbCxkYXlOYW1lczpudWxsLHNoaWZ0czp7eDoxMCx5OjIwfSxkZWZhdWx0VGhlbWU6ITAsbGluZXM6ITEsb25Ib3ZlcjpmdW5jdGlvbihhLGIpe30sJGNvbXBhdDohMX19O2IudG9vbHRpcE9wdHM9Yi50b29sdGlwO3ZhciBjPWZ1bmN0aW9uKGEpe3RoaXMudGlwUG9zaXRpb249e3g6MCx5OjB9LHRoaXMuaW5pdChhKX07Yy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKGEpe3ZhciBjPXt9O2MueD1hLnBhZ2VYLGMueT1hLnBhZ2VZLGIuc2V0VG9vbHRpcFBvc2l0aW9uKGMpfWZ1bmN0aW9uIGQoYyxkLGYpe3ZhciBnPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBNYXRoLnNxcnQoKGMtYSkqKGMtYSkrKGQtYikqKGQtYikpfSxoPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe2lmKCFofHwoaD1mdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGMpcmV0dXJue3g6Yyx5OmJ9O2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkKXJldHVybnt4OmEseTpkfTt2YXIgZyxoPS0xLygoZi1kKS8oZS1jKSk7cmV0dXJue3g6Zz0oZSooYSpoLWIrZCkrYyooYSotaCtiLWYpKS8oaCooZS1jKStkLWYpLHk6aCpnLWgqYStifX0oYSxiLGMsZCxlLGYpLGgueD49TWF0aC5taW4oYyxlKSYmaC54PD1NYXRoLm1heChjLGUpJiZoLnk+PU1hdGgubWluKGQsZikmJmgueTw9TWF0aC5tYXgoZCxmKSkpe3ZhciBpPWQtZixqPWUtYyxrPWMqZi1kKmU7cmV0dXJuIE1hdGguYWJzKGkqYStqKmIraykvTWF0aC5zcXJ0KGkqaStqKmopfXZhciBsPWcoYSxiLGMsZCksbT1nKGEsYixlLGYpO3JldHVybiBsPm0/bTpsfTtpZihmKWIuc2hvd1Rvb2x0aXAoZixkKTtlbHNlIGlmKGUucGxvdE9wdGlvbnMuc2VyaWVzLmxpbmVzLnNob3cmJmUudG9vbHRpcE9wdGlvbnMubGluZXM9PT0hMCl7dmFyIGk9ZS5wbG90T3B0aW9ucy5ncmlkLm1vdXNlQWN0aXZlUmFkaXVzLGo9e2Rpc3RhbmNlOmkrMX07YS5lYWNoKGIuZ2V0RGF0YSgpLGZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBlPTAsZj0tMSxpPTE7aTxjLmRhdGEubGVuZ3RoO2krKyljLmRhdGFbaS0xXVswXTw9ZC54JiZjLmRhdGFbaV1bMF0+PWQueCYmKGU9aS0xLGY9aSk7aWYoLTE9PT1mKXJldHVybiB2b2lkIGIuaGlkZVRvb2x0aXAoKTt2YXIgaz17eDpjLmRhdGFbZV1bMF0seTpjLmRhdGFbZV1bMV19LGw9e3g6Yy5kYXRhW2ZdWzBdLHk6Yy5kYXRhW2ZdWzFdfSxtPWgoYy54YXhpcy5wMmMoZC54KSxjLnlheGlzLnAyYyhkLnkpLGMueGF4aXMucDJjKGsueCksYy55YXhpcy5wMmMoay55KSxjLnhheGlzLnAyYyhsLngpLGMueWF4aXMucDJjKGwueSksITEpO2lmKG08ai5kaXN0YW5jZSl7dmFyIG49ZyhrLngsay55LGQueCxkLnkpPGcoZC54LGQueSxsLngsbC55KT9lOmYsbz0oYy5kYXRhcG9pbnRzLnBvaW50c2l6ZSxbZC54LGsueSsobC55LWsueSkqKChkLngtay54KS8obC54LWsueCkpXSkscD17ZGF0YXBvaW50Om8sZGF0YUluZGV4Om4sc2VyaWVzOmMsc2VyaWVzSW5kZXg6YX07aj17ZGlzdGFuY2U6bSxpdGVtOnB9fX0pLGouZGlzdGFuY2U8aSsxP2Iuc2hvd1Rvb2x0aXAoai5pdGVtLGQpOmIuaGlkZVRvb2x0aXAoKX1lbHNlIGIuaGlkZVRvb2x0aXAoKX12YXIgZT10aGlzLGY9YS5wbG90LnBsdWdpbnMubGVuZ3RoO2lmKHRoaXMucGxvdFBsdWdpbnM9W10sZilmb3IodmFyIGc9MDtmPmc7ZysrKXRoaXMucGxvdFBsdWdpbnMucHVzaChhLnBsb3QucGx1Z2luc1tnXS5uYW1lKTtiLmhvb2tzLmJpbmRFdmVudHMucHVzaChmdW5jdGlvbihiLGYpe2lmKGUucGxvdE9wdGlvbnM9Yi5nZXRPcHRpb25zKCksXCJib29sZWFuXCI9PXR5cGVvZiBlLnBsb3RPcHRpb25zLnRvb2x0aXAmJihlLnBsb3RPcHRpb25zLnRvb2x0aXBPcHRzLnNob3c9ZS5wbG90T3B0aW9ucy50b29sdGlwLGUucGxvdE9wdGlvbnMudG9vbHRpcD1lLnBsb3RPcHRpb25zLnRvb2x0aXBPcHRzLGRlbGV0ZSBlLnBsb3RPcHRpb25zLnRvb2x0aXBPcHRzKSxlLnBsb3RPcHRpb25zLnRvb2x0aXAuc2hvdyE9PSExJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5wbG90T3B0aW9ucy50b29sdGlwLnNob3cpe2UudG9vbHRpcE9wdGlvbnM9ZS5wbG90T3B0aW9ucy50b29sdGlwLGUudG9vbHRpcE9wdGlvbnMuJGNvbXBhdD8oZS53ZnVuYz1cIndpZHRoXCIsZS5oZnVuYz1cImhlaWdodFwiKTooZS53ZnVuYz1cImlubmVyV2lkdGhcIixlLmhmdW5jPVwiaW5uZXJIZWlnaHRcIik7ZS5nZXREb21FbGVtZW50KCk7YShiLmdldFBsYWNlaG9sZGVyKCkpLmJpbmQoXCJwbG90aG92ZXJcIixkKSxhKGYpLmJpbmQoXCJtb3VzZW1vdmVcIixjKX19KSxiLmhvb2tzLnNodXRkb3duLnB1c2goZnVuY3Rpb24oYixlKXthKGIuZ2V0UGxhY2Vob2xkZXIoKSkudW5iaW5kKFwicGxvdGhvdmVyXCIsZCksYShlKS51bmJpbmQoXCJtb3VzZW1vdmVcIixjKX0pLGIuc2V0VG9vbHRpcFBvc2l0aW9uPWZ1bmN0aW9uKGIpe3ZhciBjPWUuZ2V0RG9tRWxlbWVudCgpLGQ9Yy5vdXRlcldpZHRoKCkrZS50b29sdGlwT3B0aW9ucy5zaGlmdHMueCxmPWMub3V0ZXJIZWlnaHQoKStlLnRvb2x0aXBPcHRpb25zLnNoaWZ0cy55O2IueC1hKHdpbmRvdykuc2Nyb2xsTGVmdCgpPmEod2luZG93KVtlLndmdW5jXSgpLWQmJihiLngtPWQpLGIueS1hKHdpbmRvdykuc2Nyb2xsVG9wKCk+YSh3aW5kb3cpW2UuaGZ1bmNdKCktZiYmKGIueS09ZiksZS50aXBQb3NpdGlvbi54PWIueCxlLnRpcFBvc2l0aW9uLnk9Yi55fSxiLnNob3dUb29sdGlwPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZS5nZXREb21FbGVtZW50KCksZj1lLnN0cmluZ0Zvcm1hdChlLnRvb2x0aXBPcHRpb25zLmNvbnRlbnQsYSk7XCJcIiE9PWYmJihkLmh0bWwoZiksYi5zZXRUb29sdGlwUG9zaXRpb24oe3g6Yy5wYWdlWCx5OmMucGFnZVl9KSxkLmNzcyh7bGVmdDplLnRpcFBvc2l0aW9uLngrZS50b29sdGlwT3B0aW9ucy5zaGlmdHMueCx0b3A6ZS50aXBQb3NpdGlvbi55K2UudG9vbHRpcE9wdGlvbnMuc2hpZnRzLnl9KS5zaG93KCksXCJmdW5jdGlvblwiPT10eXBlb2YgZS50b29sdGlwT3B0aW9ucy5vbkhvdmVyJiZlLnRvb2x0aXBPcHRpb25zLm9uSG92ZXIoYSxkKSl9LGIuaGlkZVRvb2x0aXA9ZnVuY3Rpb24oKXtlLmdldERvbUVsZW1lbnQoKS5oaWRlKCkuaHRtbChcIlwiKX19LGMucHJvdG90eXBlLmdldERvbUVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYj1hKFwiLlwiK3RoaXMudG9vbHRpcE9wdGlvbnMuY3NzQ2xhc3MpO3JldHVybiAwPT09Yi5sZW5ndGgmJihiPWEoXCI8ZGl2IC8+XCIpLmFkZENsYXNzKHRoaXMudG9vbHRpcE9wdGlvbnMuY3NzQ2xhc3MpLGIuYXBwZW5kVG8oXCJib2R5XCIpLmhpZGUoKS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIn0pLHRoaXMudG9vbHRpcE9wdGlvbnMuZGVmYXVsdFRoZW1lJiZiLmNzcyh7YmFja2dyb3VuZDpcIiNmZmZcIixcInotaW5kZXhcIjpcIjEwNDBcIixwYWRkaW5nOlwiMC40ZW0gMC42ZW1cIixcImJvcmRlci1yYWRpdXNcIjpcIjAuNWVtXCIsXCJmb250LXNpemVcIjpcIjAuOGVtXCIsYm9yZGVyOlwiMXB4IHNvbGlkICMxMTFcIixkaXNwbGF5Olwibm9uZVwiLFwid2hpdGUtc3BhY2VcIjpcIm5vd3JhcFwifSkpLGJ9LGMucHJvdG90eXBlLnN0cmluZ0Zvcm1hdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9LyVwXFwuezAsMX0oXFxkezAsfSkvLGg9LyVzLyxpPS8lYy8saj0vJWx4LyxrPS8lbHkvLGw9LyV4XFwuezAsMX0oXFxkezAsfSkvLG09LyV5XFwuezAsMX0oXFxkezAsfSkvLG49XCIleFwiLG89XCIleVwiLHA9XCIlY3RcIjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXMudGhyZXNob2xkPyhjPWIuZGF0YXBvaW50WzBdLGQ9Yi5kYXRhcG9pbnRbMV0sZT1iLmRhdGFwb2ludFsyXSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuc2VyaWVzLmxpbmVzJiZiLnNlcmllcy5saW5lcy5zdGVwcz8oYz1iLnNlcmllcy5kYXRhcG9pbnRzLnBvaW50c1syKmIuZGF0YUluZGV4XSxkPWIuc2VyaWVzLmRhdGFwb2ludHMucG9pbnRzWzIqYi5kYXRhSW5kZXgrMV0sZT1cIlwiKTooYz1iLnNlcmllcy5kYXRhW2IuZGF0YUluZGV4XVswXSxkPWIuc2VyaWVzLmRhdGFbYi5kYXRhSW5kZXhdWzFdLGU9Yi5zZXJpZXMuZGF0YVtiLmRhdGFJbmRleF1bMl0pLG51bGw9PT1iLnNlcmllcy5sYWJlbCYmYi5zZXJpZXMub3JpZ2luU2VyaWVzJiYoYi5zZXJpZXMubGFiZWw9Yi5zZXJpZXMub3JpZ2luU2VyaWVzLmxhYmVsKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoYT1hKGIuc2VyaWVzLmxhYmVsLGMsZCxiKSksXCJib29sZWFuXCI9PXR5cGVvZiBhJiYhYSlyZXR1cm5cIlwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLnNlcmllcy5wZXJjZW50P2Y9Yi5zZXJpZXMucGVyY2VudDpcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXMucGVyY2VudHMmJihmPWIuc2VyaWVzLnBlcmNlbnRzW2IuZGF0YUluZGV4XSksXCJudW1iZXJcIj09dHlwZW9mIGYmJihhPXRoaXMuYWRqdXN0VmFsUHJlY2lzaW9uKGcsYSxmKSksYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXMubGFiZWw/YS5yZXBsYWNlKGgsYi5zZXJpZXMubGFiZWwpOmEucmVwbGFjZShoLFwiXCIpLGE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuc2VyaWVzLmNvbG9yP2EucmVwbGFjZShpLGIuc2VyaWVzLmNvbG9yKTphLnJlcGxhY2UoaSxcIlwiKSxhPXRoaXMuaGFzQXhpc0xhYmVsKFwieGF4aXNcIixiKT9hLnJlcGxhY2UoaixiLnNlcmllcy54YXhpcy5vcHRpb25zLmF4aXNMYWJlbCk6YS5yZXBsYWNlKGosXCJcIiksYT10aGlzLmhhc0F4aXNMYWJlbChcInlheGlzXCIsYik/YS5yZXBsYWNlKGssYi5zZXJpZXMueWF4aXMub3B0aW9ucy5heGlzTGFiZWwpOmEucmVwbGFjZShrLFwiXCIpLHRoaXMuaXNUaW1lTW9kZShcInhheGlzXCIsYikmJnRoaXMuaXNYRGF0ZUZvcm1hdChiKSYmKGE9YS5yZXBsYWNlKGwsdGhpcy50aW1lc3RhbXBUb0RhdGUoYyx0aGlzLnRvb2x0aXBPcHRpb25zLnhEYXRlRm9ybWF0LGIuc2VyaWVzLnhheGlzLm9wdGlvbnMpKSksdGhpcy5pc1RpbWVNb2RlKFwieWF4aXNcIixiKSYmdGhpcy5pc1lEYXRlRm9ybWF0KGIpJiYoYT1hLnJlcGxhY2UobSx0aGlzLnRpbWVzdGFtcFRvRGF0ZShkLHRoaXMudG9vbHRpcE9wdGlvbnMueURhdGVGb3JtYXQsYi5zZXJpZXMueWF4aXMub3B0aW9ucykpKSxcIm51bWJlclwiPT10eXBlb2YgYyYmKGE9dGhpcy5hZGp1c3RWYWxQcmVjaXNpb24obCxhLGMpKSxcIm51bWJlclwiPT10eXBlb2YgZCYmKGE9dGhpcy5hZGp1c3RWYWxQcmVjaXNpb24obSxhLGQpKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXMueGF4aXMudGlja3Mpe3ZhciBxO3E9dGhpcy5oYXNSb3RhdGVkWEF4aXNUaWNrcyhiKT9cInJvdGF0ZWRUaWNrc1wiOlwidGlja3NcIjt2YXIgcj1iLmRhdGFJbmRleCtiLnNlcmllc0luZGV4O2Zvcih2YXIgcyBpbiBiLnNlcmllcy54YXhpc1txXSlpZihiLnNlcmllcy54YXhpc1txXS5oYXNPd25Qcm9wZXJ0eShyKSYmIXRoaXMuaXNUaW1lTW9kZShcInhheGlzXCIsYikpe3ZhciB0PXRoaXMuaXNDYXRlZ29yaWVzTW9kZShcInhheGlzXCIsYik/Yi5zZXJpZXMueGF4aXNbcV1bcl0ubGFiZWw6Yi5zZXJpZXMueGF4aXNbcV1bcl0udjt0PT09YyYmKGE9YS5yZXBsYWNlKGwsYi5zZXJpZXMueGF4aXNbcV1bcl0ubGFiZWwpKX19aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuc2VyaWVzLnlheGlzLnRpY2tzKWZvcih2YXIgcyBpbiBiLnNlcmllcy55YXhpcy50aWNrcylpZihiLnNlcmllcy55YXhpcy50aWNrcy5oYXNPd25Qcm9wZXJ0eShzKSl7dmFyIHU9dGhpcy5pc0NhdGVnb3JpZXNNb2RlKFwieWF4aXNcIixiKT9iLnNlcmllcy55YXhpcy50aWNrc1tzXS5sYWJlbDpiLnNlcmllcy55YXhpcy50aWNrc1tzXS52O3U9PT1kJiYoYT1hLnJlcGxhY2UobSxiLnNlcmllcy55YXhpcy50aWNrc1tzXS5sYWJlbCkpfXJldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLnNlcmllcy54YXhpcy50aWNrRm9ybWF0dGVyJiYoYT1hLnJlcGxhY2UobixiLnNlcmllcy54YXhpcy50aWNrRm9ybWF0dGVyKGMsYi5zZXJpZXMueGF4aXMpLnJlcGxhY2UoL1xcJC9nLFwiJCRcIikpKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXMueWF4aXMudGlja0Zvcm1hdHRlciYmKGE9YS5yZXBsYWNlKG8sYi5zZXJpZXMueWF4aXMudGlja0Zvcm1hdHRlcihkLGIuc2VyaWVzLnlheGlzKS5yZXBsYWNlKC9cXCQvZyxcIiQkXCIpKSksZSYmKGE9YS5yZXBsYWNlKHAsZSkpLGF9LGMucHJvdG90eXBlLmlzVGltZU1vZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5zZXJpZXNbYV0ub3B0aW9ucy5tb2RlJiZcInRpbWVcIj09PWIuc2VyaWVzW2FdLm9wdGlvbnMubW9kZX0sYy5wcm90b3R5cGUuaXNYRGF0ZUZvcm1hdD1mdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy50b29sdGlwT3B0aW9ucy54RGF0ZUZvcm1hdCYmbnVsbCE9PXRoaXMudG9vbHRpcE9wdGlvbnMueERhdGVGb3JtYXR9LGMucHJvdG90eXBlLmlzWURhdGVGb3JtYXQ9ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMudG9vbHRpcE9wdGlvbnMueURhdGVGb3JtYXQmJm51bGwhPT10aGlzLnRvb2x0aXBPcHRpb25zLnlEYXRlRm9ybWF0fSxjLnByb3RvdHlwZS5pc0NhdGVnb3JpZXNNb2RlPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuc2VyaWVzW2FdLm9wdGlvbnMubW9kZSYmXCJjYXRlZ29yaWVzXCI9PT1iLnNlcmllc1thXS5vcHRpb25zLm1vZGV9LGMucHJvdG90eXBlLnRpbWVzdGFtcFRvRGF0ZT1mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5wbG90LmRhdGVHZW5lcmF0b3IoYixkKTtyZXR1cm4gYS5wbG90LmZvcm1hdERhdGUoZSxjLHRoaXMudG9vbHRpcE9wdGlvbnMubW9udGhOYW1lcyx0aGlzLnRvb2x0aXBPcHRpb25zLmRheU5hbWVzKX0sYy5wcm90b3R5cGUuYWRqdXN0VmFsUHJlY2lzaW9uPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWIubWF0Y2goYSk7cmV0dXJuIG51bGwhPT1lJiZcIlwiIT09UmVnRXhwLiQxJiYoZD1SZWdFeHAuJDEsYz1jLnRvRml4ZWQoZCksYj1iLnJlcGxhY2UoYSxjKSksYn0sYy5wcm90b3R5cGUuaGFzQXhpc0xhYmVsPWZ1bmN0aW9uKGIsYyl7cmV0dXJuLTEhPT1hLmluQXJyYXkodGhpcy5wbG90UGx1Z2lucyxcImF4aXNMYWJlbHNcIikmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLnNlcmllc1tiXS5vcHRpb25zLmF4aXNMYWJlbCYmYy5zZXJpZXNbYl0ub3B0aW9ucy5heGlzTGFiZWwubGVuZ3RoPjB9LGMucHJvdG90eXBlLmhhc1JvdGF0ZWRYQXhpc1RpY2tzPWZ1bmN0aW9uKGIpe3JldHVybi0xIT09YS5pbkFycmF5KHRoaXMucGxvdFBsdWdpbnMsXCJ0aWNrUm90b3JcIikmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLnNlcmllcy54YXhpcy5yb3RhdGVkVGlja3N9O3ZhciBkPWZ1bmN0aW9uKGEpe25ldyBjKGEpfTthLnBsb3QucGx1Z2lucy5wdXNoKHtpbml0OmQsb3B0aW9uczpiLG5hbWU6XCJ0b29sdGlwXCIsdmVyc2lvbjpcIjAuOC41XCJ9KX0oalF1ZXJ5KTsiLCIvKiBQcmV0dHkgaGFuZGxpbmcgb2YgdGltZSBheGVzLlxuXG5Db3B5cmlnaHQgKGMpIDIwMDctMjAxNCBJT0xBIGFuZCBPbGUgTGF1cnNlbi5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuU2V0IGF4aXMubW9kZSB0byBcInRpbWVcIiB0byBlbmFibGUuIFNlZSB0aGUgc2VjdGlvbiBcIlRpbWUgc2VyaWVzIGRhdGFcIiBpblxuQVBJLnR4dCBmb3IgZGV0YWlscy5cblxuKi9cblxuKGZ1bmN0aW9uKCQpIHtcblxuXHR2YXIgb3B0aW9ucyA9IHtcblx0XHR4YXhpczoge1xuXHRcdFx0dGltZXpvbmU6IG51bGwsXHRcdC8vIFwiYnJvd3NlclwiIGZvciBsb2NhbCB0byB0aGUgY2xpZW50IG9yIHRpbWV6b25lIGZvciB0aW1lem9uZS1qc1xuXHRcdFx0dGltZWZvcm1hdDogbnVsbCxcdC8vIGZvcm1hdCBzdHJpbmcgdG8gdXNlXG5cdFx0XHR0d2VsdmVIb3VyQ2xvY2s6IGZhbHNlLFx0Ly8gMTIgb3IgMjQgdGltZSBpbiB0aW1lIG1vZGVcblx0XHRcdG1vbnRoTmFtZXM6IG51bGxcdC8vIGxpc3Qgb2YgbmFtZXMgb2YgbW9udGhzXG5cdFx0fVxuXHR9O1xuXG5cdC8vIHJvdW5kIHRvIG5lYXJieSBsb3dlciBtdWx0aXBsZSBvZiBiYXNlXG5cblx0ZnVuY3Rpb24gZmxvb3JJbkJhc2UobiwgYmFzZSkge1xuXHRcdHJldHVybiBiYXNlICogTWF0aC5mbG9vcihuIC8gYmFzZSk7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGEgc3RyaW5nIHdpdGggdGhlIGRhdGUgZCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIGZtdC5cblx0Ly8gQSBzdWJzZXQgb2YgdGhlIE9wZW4gR3JvdXAncyBzdHJmdGltZSBmb3JtYXQgaXMgc3VwcG9ydGVkLlxuXG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZCwgZm10LCBtb250aE5hbWVzLCBkYXlOYW1lcykge1xuXG5cdFx0aWYgKHR5cGVvZiBkLnN0cmZ0aW1lID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0cmV0dXJuIGQuc3RyZnRpbWUoZm10KTtcblx0XHR9XG5cblx0XHR2YXIgbGVmdFBhZCA9IGZ1bmN0aW9uKG4sIHBhZCkge1xuXHRcdFx0biA9IFwiXCIgKyBuO1xuXHRcdFx0cGFkID0gXCJcIiArIChwYWQgPT0gbnVsbCA/IFwiMFwiIDogcGFkKTtcblx0XHRcdHJldHVybiBuLmxlbmd0aCA9PSAxID8gcGFkICsgbiA6IG47XG5cdFx0fTtcblxuXHRcdHZhciByID0gW107XG5cdFx0dmFyIGVzY2FwZSA9IGZhbHNlO1xuXHRcdHZhciBob3VycyA9IGQuZ2V0SG91cnMoKTtcblx0XHR2YXIgaXNBTSA9IGhvdXJzIDwgMTI7XG5cblx0XHRpZiAobW9udGhOYW1lcyA9PSBudWxsKSB7XG5cdFx0XHRtb250aE5hbWVzID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuXHRcdH1cblxuXHRcdGlmIChkYXlOYW1lcyA9PSBudWxsKSB7XG5cdFx0XHRkYXlOYW1lcyA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXTtcblx0XHR9XG5cblx0XHR2YXIgaG91cnMxMjtcblxuXHRcdGlmIChob3VycyA+IDEyKSB7XG5cdFx0XHRob3VyczEyID0gaG91cnMgLSAxMjtcblx0XHR9IGVsc2UgaWYgKGhvdXJzID09IDApIHtcblx0XHRcdGhvdXJzMTIgPSAxMjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aG91cnMxMiA9IGhvdXJzO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZm10Lmxlbmd0aDsgKytpKSB7XG5cblx0XHRcdHZhciBjID0gZm10LmNoYXJBdChpKTtcblxuXHRcdFx0aWYgKGVzY2FwZSkge1xuXHRcdFx0XHRzd2l0Y2ggKGMpIHtcblx0XHRcdFx0XHRjYXNlICdhJzogYyA9IFwiXCIgKyBkYXlOYW1lc1tkLmdldERheSgpXTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYic6IGMgPSBcIlwiICsgbW9udGhOYW1lc1tkLmdldE1vbnRoKCldOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkJzogYyA9IGxlZnRQYWQoZC5nZXREYXRlKCkpOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdlJzogYyA9IGxlZnRQYWQoZC5nZXREYXRlKCksIFwiIFwiKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaCc6XHQvLyBGb3IgYmFjay1jb21wYXQgd2l0aCAwLjc7IHJlbW92ZSBpbiAxLjBcblx0XHRcdFx0XHRjYXNlICdIJzogYyA9IGxlZnRQYWQoaG91cnMpOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdJJzogYyA9IGxlZnRQYWQoaG91cnMxMik7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2wnOiBjID0gbGVmdFBhZChob3VyczEyLCBcIiBcIik7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ20nOiBjID0gbGVmdFBhZChkLmdldE1vbnRoKCkgKyAxKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnTSc6IGMgPSBsZWZ0UGFkKGQuZ2V0TWludXRlcygpKTsgYnJlYWs7XG5cdFx0XHRcdFx0Ly8gcXVhcnRlcnMgbm90IGluIE9wZW4gR3JvdXAncyBzdHJmdGltZSBzcGVjaWZpY2F0aW9uXG5cdFx0XHRcdFx0Y2FzZSAncSc6XG5cdFx0XHRcdFx0XHRjID0gXCJcIiArIChNYXRoLmZsb29yKGQuZ2V0TW9udGgoKSAvIDMpICsgMSk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ1MnOiBjID0gbGVmdFBhZChkLmdldFNlY29uZHMoKSk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3knOiBjID0gbGVmdFBhZChkLmdldEZ1bGxZZWFyKCkgJSAxMDApOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdZJzogYyA9IFwiXCIgKyBkLmdldEZ1bGxZZWFyKCk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3AnOiBjID0gKGlzQU0pID8gKFwiXCIgKyBcImFtXCIpIDogKFwiXCIgKyBcInBtXCIpOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdQJzogYyA9IChpc0FNKSA/IChcIlwiICsgXCJBTVwiKSA6IChcIlwiICsgXCJQTVwiKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndyc6IGMgPSBcIlwiICsgZC5nZXREYXkoKTsgYnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0ci5wdXNoKGMpO1xuXHRcdFx0XHRlc2NhcGUgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChjID09IFwiJVwiKSB7XG5cdFx0XHRcdFx0ZXNjYXBlID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyLnB1c2goYyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gci5qb2luKFwiXCIpO1xuXHR9XG5cblx0Ly8gVG8gaGF2ZSBhIGNvbnNpc3RlbnQgdmlldyBvZiB0aW1lLWJhc2VkIGRhdGEgaW5kZXBlbmRlbnQgb2Ygd2hpY2ggdGltZVxuXHQvLyB6b25lIHRoZSBjbGllbnQgaGFwcGVucyB0byBiZSBpbiB3ZSBuZWVkIGEgZGF0ZS1saWtlIG9iamVjdCBpbmRlcGVuZGVudFxuXHQvLyBvZiB0aW1lIHpvbmVzLiAgVGhpcyBpcyBkb25lIHRocm91Z2ggYSB3cmFwcGVyIHRoYXQgb25seSBjYWxscyB0aGUgVVRDXG5cdC8vIHZlcnNpb25zIG9mIHRoZSBhY2Nlc3NvciBtZXRob2RzLlxuXG5cdGZ1bmN0aW9uIG1ha2VVdGNXcmFwcGVyKGQpIHtcblxuXHRcdGZ1bmN0aW9uIGFkZFByb3h5TWV0aG9kKHNvdXJjZU9iaiwgc291cmNlTWV0aG9kLCB0YXJnZXRPYmosIHRhcmdldE1ldGhvZCkge1xuXHRcdFx0c291cmNlT2JqW3NvdXJjZU1ldGhvZF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRhcmdldE9ialt0YXJnZXRNZXRob2RdLmFwcGx5KHRhcmdldE9iaiwgYXJndW1lbnRzKTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdHZhciB1dGMgPSB7XG5cdFx0XHRkYXRlOiBkXG5cdFx0fTtcblxuXHRcdC8vIHN1cHBvcnQgc3RyZnRpbWUsIGlmIGZvdW5kXG5cblx0XHRpZiAoZC5zdHJmdGltZSAhPSB1bmRlZmluZWQpIHtcblx0XHRcdGFkZFByb3h5TWV0aG9kKHV0YywgXCJzdHJmdGltZVwiLCBkLCBcInN0cmZ0aW1lXCIpO1xuXHRcdH1cblxuXHRcdGFkZFByb3h5TWV0aG9kKHV0YywgXCJnZXRUaW1lXCIsIGQsIFwiZ2V0VGltZVwiKTtcblx0XHRhZGRQcm94eU1ldGhvZCh1dGMsIFwic2V0VGltZVwiLCBkLCBcInNldFRpbWVcIik7XG5cblx0XHR2YXIgcHJvcHMgPSBbXCJEYXRlXCIsIFwiRGF5XCIsIFwiRnVsbFllYXJcIiwgXCJIb3Vyc1wiLCBcIk1pbGxpc2Vjb25kc1wiLCBcIk1pbnV0ZXNcIiwgXCJNb250aFwiLCBcIlNlY29uZHNcIl07XG5cblx0XHRmb3IgKHZhciBwID0gMDsgcCA8IHByb3BzLmxlbmd0aDsgcCsrKSB7XG5cdFx0XHRhZGRQcm94eU1ldGhvZCh1dGMsIFwiZ2V0XCIgKyBwcm9wc1twXSwgZCwgXCJnZXRVVENcIiArIHByb3BzW3BdKTtcblx0XHRcdGFkZFByb3h5TWV0aG9kKHV0YywgXCJzZXRcIiArIHByb3BzW3BdLCBkLCBcInNldFVUQ1wiICsgcHJvcHNbcF0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB1dGM7XG5cdH07XG5cblx0Ly8gc2VsZWN0IHRpbWUgem9uZSBzdHJhdGVneS4gIFRoaXMgcmV0dXJucyBhIGRhdGUtbGlrZSBvYmplY3QgdGllZCB0byB0aGVcblx0Ly8gZGVzaXJlZCB0aW1lem9uZVxuXG5cdGZ1bmN0aW9uIGRhdGVHZW5lcmF0b3IodHMsIG9wdHMpIHtcblx0XHRpZiAob3B0cy50aW1lem9uZSA9PSBcImJyb3dzZXJcIikge1xuXHRcdFx0cmV0dXJuIG5ldyBEYXRlKHRzKTtcblx0XHR9IGVsc2UgaWYgKCFvcHRzLnRpbWV6b25lIHx8IG9wdHMudGltZXpvbmUgPT0gXCJ1dGNcIikge1xuXHRcdFx0cmV0dXJuIG1ha2VVdGNXcmFwcGVyKG5ldyBEYXRlKHRzKSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgdGltZXpvbmVKUyAhPSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB0aW1lem9uZUpTLkRhdGUgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIGQgPSBuZXcgdGltZXpvbmVKUy5EYXRlKCk7XG5cdFx0XHQvLyB0aW1lem9uZS1qcyBpcyBmaWNrbGUsIHNvIGJlIHN1cmUgdG8gc2V0IHRoZSB0aW1lIHpvbmUgYmVmb3JlXG5cdFx0XHQvLyBzZXR0aW5nIHRoZSB0aW1lLlxuXHRcdFx0ZC5zZXRUaW1lem9uZShvcHRzLnRpbWV6b25lKTtcblx0XHRcdGQuc2V0VGltZSh0cyk7XG5cdFx0XHRyZXR1cm4gZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG1ha2VVdGNXcmFwcGVyKG5ldyBEYXRlKHRzKSk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBtYXAgb2YgYXBwLiBzaXplIG9mIHRpbWUgdW5pdHMgaW4gbWlsbGlzZWNvbmRzXG5cblx0dmFyIHRpbWVVbml0U2l6ZSA9IHtcblx0XHRcInNlY29uZFwiOiAxMDAwLFxuXHRcdFwibWludXRlXCI6IDYwICogMTAwMCxcblx0XHRcImhvdXJcIjogNjAgKiA2MCAqIDEwMDAsXG5cdFx0XCJkYXlcIjogMjQgKiA2MCAqIDYwICogMTAwMCxcblx0XHRcIm1vbnRoXCI6IDMwICogMjQgKiA2MCAqIDYwICogMTAwMCxcblx0XHRcInF1YXJ0ZXJcIjogMyAqIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCxcblx0XHRcInllYXJcIjogMzY1LjI0MjUgKiAyNCAqIDYwICogNjAgKiAxMDAwXG5cdH07XG5cblx0Ly8gdGhlIGFsbG93ZWQgdGljayBzaXplcywgYWZ0ZXIgMSB5ZWFyIHdlIHVzZVxuXHQvLyBhbiBpbnRlZ2VyIGFsZ29yaXRobVxuXG5cdHZhciBiYXNlU3BlYyA9IFtcblx0XHRbMSwgXCJzZWNvbmRcIl0sIFsyLCBcInNlY29uZFwiXSwgWzUsIFwic2Vjb25kXCJdLCBbMTAsIFwic2Vjb25kXCJdLFxuXHRcdFszMCwgXCJzZWNvbmRcIl0sIFxuXHRcdFsxLCBcIm1pbnV0ZVwiXSwgWzIsIFwibWludXRlXCJdLCBbNSwgXCJtaW51dGVcIl0sIFsxMCwgXCJtaW51dGVcIl0sXG5cdFx0WzMwLCBcIm1pbnV0ZVwiXSwgXG5cdFx0WzEsIFwiaG91clwiXSwgWzIsIFwiaG91clwiXSwgWzQsIFwiaG91clwiXSxcblx0XHRbOCwgXCJob3VyXCJdLCBbMTIsIFwiaG91clwiXSxcblx0XHRbMSwgXCJkYXlcIl0sIFsyLCBcImRheVwiXSwgWzMsIFwiZGF5XCJdLFxuXHRcdFswLjI1LCBcIm1vbnRoXCJdLCBbMC41LCBcIm1vbnRoXCJdLCBbMSwgXCJtb250aFwiXSxcblx0XHRbMiwgXCJtb250aFwiXVxuXHRdO1xuXG5cdC8vIHdlIGRvbid0IGtub3cgd2hpY2ggdmFyaWFudChzKSB3ZSdsbCBuZWVkIHlldCwgYnV0IGdlbmVyYXRpbmcgYm90aCBpc1xuXHQvLyBjaGVhcFxuXG5cdHZhciBzcGVjTW9udGhzID0gYmFzZVNwZWMuY29uY2F0KFtbMywgXCJtb250aFwiXSwgWzYsIFwibW9udGhcIl0sXG5cdFx0WzEsIFwieWVhclwiXV0pO1xuXHR2YXIgc3BlY1F1YXJ0ZXJzID0gYmFzZVNwZWMuY29uY2F0KFtbMSwgXCJxdWFydGVyXCJdLCBbMiwgXCJxdWFydGVyXCJdLFxuXHRcdFsxLCBcInllYXJcIl1dKTtcblxuXHRmdW5jdGlvbiBpbml0KHBsb3QpIHtcblx0XHRwbG90Lmhvb2tzLnByb2Nlc3NPcHRpb25zLnB1c2goZnVuY3Rpb24gKHBsb3QsIG9wdGlvbnMpIHtcblx0XHRcdCQuZWFjaChwbG90LmdldEF4ZXMoKSwgZnVuY3Rpb24oYXhpc05hbWUsIGF4aXMpIHtcblxuXHRcdFx0XHR2YXIgb3B0cyA9IGF4aXMub3B0aW9ucztcblxuXHRcdFx0XHRpZiAob3B0cy5tb2RlID09IFwidGltZVwiKSB7XG5cdFx0XHRcdFx0YXhpcy50aWNrR2VuZXJhdG9yID0gZnVuY3Rpb24oYXhpcykge1xuXG5cdFx0XHRcdFx0XHR2YXIgdGlja3MgPSBbXTtcblx0XHRcdFx0XHRcdHZhciBkID0gZGF0ZUdlbmVyYXRvcihheGlzLm1pbiwgb3B0cyk7XG5cdFx0XHRcdFx0XHR2YXIgbWluU2l6ZSA9IDA7XG5cblx0XHRcdFx0XHRcdC8vIG1ha2UgcXVhcnRlciB1c2UgYSBwb3NzaWJpbGl0eSBpZiBxdWFydGVycyBhcmVcblx0XHRcdFx0XHRcdC8vIG1lbnRpb25lZCBpbiBlaXRoZXIgb2YgdGhlc2Ugb3B0aW9uc1xuXG5cdFx0XHRcdFx0XHR2YXIgc3BlYyA9IChvcHRzLnRpY2tTaXplICYmIG9wdHMudGlja1NpemVbMV0gPT09XG5cdFx0XHRcdFx0XHRcdFwicXVhcnRlclwiKSB8fFxuXHRcdFx0XHRcdFx0XHQob3B0cy5taW5UaWNrU2l6ZSAmJiBvcHRzLm1pblRpY2tTaXplWzFdID09PVxuXHRcdFx0XHRcdFx0XHRcInF1YXJ0ZXJcIikgPyBzcGVjUXVhcnRlcnMgOiBzcGVjTW9udGhzO1xuXG5cdFx0XHRcdFx0XHRpZiAob3B0cy5taW5UaWNrU2l6ZSAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygb3B0cy50aWNrU2l6ZSA9PSBcIm51bWJlclwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0bWluU2l6ZSA9IG9wdHMudGlja1NpemU7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bWluU2l6ZSA9IG9wdHMubWluVGlja1NpemVbMF0gKiB0aW1lVW5pdFNpemVbb3B0cy5taW5UaWNrU2l6ZVsxXV07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzcGVjLmxlbmd0aCAtIDE7ICsraSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoYXhpcy5kZWx0YSA8IChzcGVjW2ldWzBdICogdGltZVVuaXRTaXplW3NwZWNbaV1bMV1dXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICArIHNwZWNbaSArIDFdWzBdICogdGltZVVuaXRTaXplW3NwZWNbaSArIDFdWzFdXSkgLyAyXG5cdFx0XHRcdFx0XHRcdFx0JiYgc3BlY1tpXVswXSAqIHRpbWVVbml0U2l6ZVtzcGVjW2ldWzFdXSA+PSBtaW5TaXplKSB7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHNpemUgPSBzcGVjW2ldWzBdO1xuXHRcdFx0XHRcdFx0dmFyIHVuaXQgPSBzcGVjW2ldWzFdO1xuXG5cdFx0XHRcdFx0XHQvLyBzcGVjaWFsLWNhc2UgdGhlIHBvc3NpYmlsaXR5IG9mIHNldmVyYWwgeWVhcnNcblxuXHRcdFx0XHRcdFx0aWYgKHVuaXQgPT0gXCJ5ZWFyXCIpIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZiBnaXZlbiBhIG1pblRpY2tTaXplIGluIHllYXJzLCBqdXN0IHVzZSBpdCxcblx0XHRcdFx0XHRcdFx0Ly8gZW5zdXJpbmcgdGhhdCBpdCdzIGFuIGludGVnZXJcblxuXHRcdFx0XHRcdFx0XHRpZiAob3B0cy5taW5UaWNrU2l6ZSAhPSBudWxsICYmIG9wdHMubWluVGlja1NpemVbMV0gPT0gXCJ5ZWFyXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRzaXplID0gTWF0aC5mbG9vcihvcHRzLm1pblRpY2tTaXplWzBdKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBtYWduID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2coYXhpcy5kZWx0YSAvIHRpbWVVbml0U2l6ZS55ZWFyKSAvIE1hdGguTE4xMCkpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciBub3JtID0gKGF4aXMuZGVsdGEgLyB0aW1lVW5pdFNpemUueWVhcikgLyBtYWduO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5vcm0gPCAxLjUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNpemUgPSAxO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobm9ybSA8IDMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNpemUgPSAyO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobm9ybSA8IDcuNSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZSA9IDU7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNpemUgPSAxMDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRzaXplICo9IG1hZ247XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBtaW5pbXVtIHNpemUgZm9yIHllYXJzIGlzIDFcblxuXHRcdFx0XHRcdFx0XHRpZiAoc2l6ZSA8IDEpIHtcblx0XHRcdFx0XHRcdFx0XHRzaXplID0gMTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRheGlzLnRpY2tTaXplID0gb3B0cy50aWNrU2l6ZSB8fCBbc2l6ZSwgdW5pdF07XG5cdFx0XHRcdFx0XHR2YXIgdGlja1NpemUgPSBheGlzLnRpY2tTaXplWzBdO1xuXHRcdFx0XHRcdFx0dW5pdCA9IGF4aXMudGlja1NpemVbMV07XG5cblx0XHRcdFx0XHRcdHZhciBzdGVwID0gdGlja1NpemUgKiB0aW1lVW5pdFNpemVbdW5pdF07XG5cblx0XHRcdFx0XHRcdGlmICh1bml0ID09IFwic2Vjb25kXCIpIHtcblx0XHRcdFx0XHRcdFx0ZC5zZXRTZWNvbmRzKGZsb29ySW5CYXNlKGQuZ2V0U2Vjb25kcygpLCB0aWNrU2l6ZSkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh1bml0ID09IFwibWludXRlXCIpIHtcblx0XHRcdFx0XHRcdFx0ZC5zZXRNaW51dGVzKGZsb29ySW5CYXNlKGQuZ2V0TWludXRlcygpLCB0aWNrU2l6ZSkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh1bml0ID09IFwiaG91clwiKSB7XG5cdFx0XHRcdFx0XHRcdGQuc2V0SG91cnMoZmxvb3JJbkJhc2UoZC5nZXRIb3VycygpLCB0aWNrU2l6ZSkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh1bml0ID09IFwibW9udGhcIikge1xuXHRcdFx0XHRcdFx0XHRkLnNldE1vbnRoKGZsb29ySW5CYXNlKGQuZ2V0TW9udGgoKSwgdGlja1NpemUpKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodW5pdCA9PSBcInF1YXJ0ZXJcIikge1xuXHRcdFx0XHRcdFx0XHRkLnNldE1vbnRoKDMgKiBmbG9vckluQmFzZShkLmdldE1vbnRoKCkgLyAzLFxuXHRcdFx0XHRcdFx0XHRcdHRpY2tTaXplKSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHVuaXQgPT0gXCJ5ZWFyXCIpIHtcblx0XHRcdFx0XHRcdFx0ZC5zZXRGdWxsWWVhcihmbG9vckluQmFzZShkLmdldEZ1bGxZZWFyKCksIHRpY2tTaXplKSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIHJlc2V0IHNtYWxsZXIgY29tcG9uZW50c1xuXG5cdFx0XHRcdFx0XHRkLnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdFx0XHRcdFx0aWYgKHN0ZXAgPj0gdGltZVVuaXRTaXplLm1pbnV0ZSkge1xuXHRcdFx0XHRcdFx0XHRkLnNldFNlY29uZHMoMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RlcCA+PSB0aW1lVW5pdFNpemUuaG91cikge1xuXHRcdFx0XHRcdFx0XHRkLnNldE1pbnV0ZXMoMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RlcCA+PSB0aW1lVW5pdFNpemUuZGF5KSB7XG5cdFx0XHRcdFx0XHRcdGQuc2V0SG91cnMoMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RlcCA+PSB0aW1lVW5pdFNpemUuZGF5ICogNCkge1xuXHRcdFx0XHRcdFx0XHRkLnNldERhdGUoMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RlcCA+PSB0aW1lVW5pdFNpemUubW9udGggKiAyKSB7XG5cdFx0XHRcdFx0XHRcdGQuc2V0TW9udGgoZmxvb3JJbkJhc2UoZC5nZXRNb250aCgpLCAzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RlcCA+PSB0aW1lVW5pdFNpemUucXVhcnRlciAqIDIpIHtcblx0XHRcdFx0XHRcdFx0ZC5zZXRNb250aChmbG9vckluQmFzZShkLmdldE1vbnRoKCksIDYpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzdGVwID49IHRpbWVVbml0U2l6ZS55ZWFyKSB7XG5cdFx0XHRcdFx0XHRcdGQuc2V0TW9udGgoMCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBjYXJyeSA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgdiA9IE51bWJlci5OYU47XG5cdFx0XHRcdFx0XHR2YXIgcHJldjtcblxuXHRcdFx0XHRcdFx0ZG8ge1xuXG5cdFx0XHRcdFx0XHRcdHByZXYgPSB2O1xuXHRcdFx0XHRcdFx0XHR2ID0gZC5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0XHRcdHRpY2tzLnB1c2godik7XG5cblx0XHRcdFx0XHRcdFx0aWYgKHVuaXQgPT0gXCJtb250aFwiIHx8IHVuaXQgPT0gXCJxdWFydGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGlja1NpemUgPCAxKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIGEgYml0IGNvbXBsaWNhdGVkIC0gd2UnbGwgZGl2aWRlIHRoZVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gbW9udGgvcXVhcnRlciB1cCBidXQgd2UgbmVlZCB0byB0YWtlXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBjYXJlIG9mIGZyYWN0aW9ucyBzbyB3ZSBkb24ndCBlbmQgdXAgaW5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRoZSBtaWRkbGUgb2YgYSBkYXlcblxuXHRcdFx0XHRcdFx0XHRcdFx0ZC5zZXREYXRlKDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHN0YXJ0ID0gZC5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCh1bml0ID09IFwicXVhcnRlclwiID8gMyA6IDEpKTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlbmQgPSBkLmdldFRpbWUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGQuc2V0VGltZSh2ICsgY2FycnkgKiB0aW1lVW5pdFNpemUuaG91ciArIChlbmQgLSBzdGFydCkgKiB0aWNrU2l6ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYXJyeSA9IGQuZ2V0SG91cnMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGQuc2V0SG91cnMoMCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGQuc2V0TW9udGgoZC5nZXRNb250aCgpICtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGlja1NpemUgKiAodW5pdCA9PSBcInF1YXJ0ZXJcIiA/IDMgOiAxKSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHVuaXQgPT0gXCJ5ZWFyXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRkLnNldEZ1bGxZZWFyKGQuZ2V0RnVsbFllYXIoKSArIHRpY2tTaXplKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRkLnNldFRpbWUodiArIHN0ZXApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IHdoaWxlICh2IDwgYXhpcy5tYXggJiYgdiAhPSBwcmV2KTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIHRpY2tzO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRheGlzLnRpY2tGb3JtYXR0ZXIgPSBmdW5jdGlvbiAodiwgYXhpcykge1xuXG5cdFx0XHRcdFx0XHR2YXIgZCA9IGRhdGVHZW5lcmF0b3IodiwgYXhpcy5vcHRpb25zKTtcblxuXHRcdFx0XHRcdFx0Ly8gZmlyc3QgY2hlY2sgZ2xvYmFsIGZvcm1hdFxuXG5cdFx0XHRcdFx0XHRpZiAob3B0cy50aW1lZm9ybWF0ICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZvcm1hdERhdGUoZCwgb3B0cy50aW1lZm9ybWF0LCBvcHRzLm1vbnRoTmFtZXMsIG9wdHMuZGF5TmFtZXMpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBwb3NzaWJseSB1c2UgcXVhcnRlcnMgaWYgcXVhcnRlcnMgYXJlIG1lbnRpb25lZCBpblxuXHRcdFx0XHRcdFx0Ly8gYW55IG9mIHRoZXNlIHBsYWNlc1xuXG5cdFx0XHRcdFx0XHR2YXIgdXNlUXVhcnRlcnMgPSAoYXhpcy5vcHRpb25zLnRpY2tTaXplICYmXG5cdFx0XHRcdFx0XHRcdFx0YXhpcy5vcHRpb25zLnRpY2tTaXplWzFdID09IFwicXVhcnRlclwiKSB8fFxuXHRcdFx0XHRcdFx0XHQoYXhpcy5vcHRpb25zLm1pblRpY2tTaXplICYmXG5cdFx0XHRcdFx0XHRcdFx0YXhpcy5vcHRpb25zLm1pblRpY2tTaXplWzFdID09IFwicXVhcnRlclwiKTtcblxuXHRcdFx0XHRcdFx0dmFyIHQgPSBheGlzLnRpY2tTaXplWzBdICogdGltZVVuaXRTaXplW2F4aXMudGlja1NpemVbMV1dO1xuXHRcdFx0XHRcdFx0dmFyIHNwYW4gPSBheGlzLm1heCAtIGF4aXMubWluO1xuXHRcdFx0XHRcdFx0dmFyIHN1ZmZpeCA9IChvcHRzLnR3ZWx2ZUhvdXJDbG9jaykgPyBcIiAlcFwiIDogXCJcIjtcblx0XHRcdFx0XHRcdHZhciBob3VyQ29kZSA9IChvcHRzLnR3ZWx2ZUhvdXJDbG9jaykgPyBcIiVJXCIgOiBcIiVIXCI7XG5cdFx0XHRcdFx0XHR2YXIgZm10O1xuXG5cdFx0XHRcdFx0XHRpZiAodCA8IHRpbWVVbml0U2l6ZS5taW51dGUpIHtcblx0XHRcdFx0XHRcdFx0Zm10ID0gaG91ckNvZGUgKyBcIjolTTolU1wiICsgc3VmZml4O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0IDwgdGltZVVuaXRTaXplLmRheSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3BhbiA8IDIgKiB0aW1lVW5pdFNpemUuZGF5KSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm10ID0gaG91ckNvZGUgKyBcIjolTVwiICsgc3VmZml4O1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGZtdCA9IFwiJWIgJWQgXCIgKyBob3VyQ29kZSArIFwiOiVNXCIgKyBzdWZmaXg7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodCA8IHRpbWVVbml0U2l6ZS5tb250aCkge1xuXHRcdFx0XHRcdFx0XHRmbXQgPSBcIiViICVkXCI7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCh1c2VRdWFydGVycyAmJiB0IDwgdGltZVVuaXRTaXplLnF1YXJ0ZXIpIHx8XG5cdFx0XHRcdFx0XHRcdCghdXNlUXVhcnRlcnMgJiYgdCA8IHRpbWVVbml0U2l6ZS55ZWFyKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3BhbiA8IHRpbWVVbml0U2l6ZS55ZWFyKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm10ID0gXCIlYlwiO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGZtdCA9IFwiJWIgJVlcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh1c2VRdWFydGVycyAmJiB0IDwgdGltZVVuaXRTaXplLnllYXIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNwYW4gPCB0aW1lVW5pdFNpemUueWVhcikge1xuXHRcdFx0XHRcdFx0XHRcdGZtdCA9IFwiUSVxXCI7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm10ID0gXCJRJXEgJVlcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Zm10ID0gXCIlWVwiO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgcnQgPSBmb3JtYXREYXRlKGQsIGZtdCwgb3B0cy5tb250aE5hbWVzLCBvcHRzLmRheU5hbWVzKTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIHJ0O1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0JC5wbG90LnBsdWdpbnMucHVzaCh7XG5cdFx0aW5pdDogaW5pdCxcblx0XHRvcHRpb25zOiBvcHRpb25zLFxuXHRcdG5hbWU6ICd0aW1lJyxcblx0XHR2ZXJzaW9uOiAnMS4wJ1xuXHR9KTtcblxuXHQvLyBUaW1lLWF4aXMgc3VwcG9ydCB1c2VkIHRvIGJlIGluIEZsb3QgY29yZSwgd2hpY2ggZXhwb3NlZCB0aGVcblx0Ly8gZm9ybWF0RGF0ZSBmdW5jdGlvbiBvbiB0aGUgcGxvdCBvYmplY3QuICBWYXJpb3VzIHBsdWdpbnMgZGVwZW5kXG5cdC8vIG9uIHRoZSBmdW5jdGlvbiwgc28gd2UgbmVlZCB0byByZS1leHBvc2UgaXQgaGVyZS5cblxuXHQkLnBsb3QuZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGU7XG5cdCQucGxvdC5kYXRlR2VuZXJhdG9yID0gZGF0ZUdlbmVyYXRvcjtcblxufSkoalF1ZXJ5KTtcbiIsIlxuKGZ1bmN0aW9uKCl7dmFyIEFuaW1hdGVkVGV4dCxBbmltYXRlZFRleHRGYWN0b3J5LEJhcixCYXNlRG9udXQsQmFzZUdhdWdlLERvbnV0LEdhdWdlLEdhdWdlUG9pbnRlcixUZXh0UmVuZGVyZXIsVmFsdWVVcGRhdGVyLGFkZENvbW1hcyxjdXRIZXgsZm9ybWF0TnVtYmVyLG1lcmdlT2JqZWN0cyxzZWNvbmRzVG9TdHJpbmcsdXBkYXRlT2JqZWN0VmFsdWVzLF9yZWYsX3JlZjEsX19oYXNQcm9wPXt9Lmhhc093blByb3BlcnR5LF9fZXh0ZW5kcz1mdW5jdGlvbihjaGlsZCxwYXJlbnQpe2Zvcih2YXIga2V5IGluIHBhcmVudCl7aWYoX19oYXNQcm9wLmNhbGwocGFyZW50LGtleSkpY2hpbGRba2V5XT1wYXJlbnRba2V5XTt9ZnVuY3Rpb24gY3Rvcigpe3RoaXMuY29uc3RydWN0b3I9Y2hpbGQ7fWN0b3IucHJvdG90eXBlPXBhcmVudC5wcm90b3R5cGU7Y2hpbGQucHJvdG90eXBlPW5ldyBjdG9yKCk7Y2hpbGQuX19zdXBlcl9fPXBhcmVudC5wcm90b3R5cGU7cmV0dXJuIGNoaWxkO307KGZ1bmN0aW9uKCl7dmFyIGJyb3dzZXJSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsaXNDYW5jZWxsZWQsbGFzdElkLHZlbmRvcix2ZW5kb3JzLF9pLF9sZW47dmVuZG9ycz1bJ21zJywnbW96Jywnd2Via2l0JywnbyddO2ZvcihfaT0wLF9sZW49dmVuZG9ycy5sZW5ndGg7X2k8X2xlbjtfaSsrKXt2ZW5kb3I9dmVuZG9yc1tfaV07aWYod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSl7YnJlYWs7fVxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT13aW5kb3dbdmVuZG9yKydSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTt3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9d2luZG93W3ZlbmRvcisnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXXx8d2luZG93W3ZlbmRvcisnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107fVxuYnJvd3NlclJlcXVlc3RBbmltYXRpb25GcmFtZT1udWxsO2xhc3RJZD0wO2lzQ2FuY2VsbGVkPXt9O2lmKCFyZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oY2FsbGJhY2ssZWxlbWVudCl7dmFyIGN1cnJUaW1lLGlkLGxhc3RUaW1lLHRpbWVUb0NhbGw7Y3VyclRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCk7dGltZVRvQ2FsbD1NYXRoLm1heCgwLDE2LShjdXJyVGltZS1sYXN0VGltZSkpO2lkPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGNhbGxiYWNrKGN1cnJUaW1lK3RpbWVUb0NhbGwpO30sdGltZVRvQ2FsbCk7bGFzdFRpbWU9Y3VyclRpbWUrdGltZVRvQ2FsbDtyZXR1cm4gaWQ7fTtyZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGlkKXtyZXR1cm4gY2xlYXJUaW1lb3V0KGlkKTt9O31lbHNlIGlmKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpe2Jyb3dzZXJSZXF1ZXN0QW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTt3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGNhbGxiYWNrLGVsZW1lbnQpe3ZhciBteUlkO215SWQ9KytsYXN0SWQ7YnJvd3NlclJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2lmKCFpc0NhbmNlbGxlZFtteUlkXSl7cmV0dXJuIGNhbGxiYWNrKCk7fX0sZWxlbWVudCk7cmV0dXJuIG15SWQ7fTtyZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGlkKXtyZXR1cm4gaXNDYW5jZWxsZWRbaWRdPXRydWU7fTt9fSkoKTtTdHJpbmcucHJvdG90eXBlLmhhc2hDb2RlPWZ1bmN0aW9uKCl7dmFyIGNoYXIsaGFzaCxpLF9pLF9yZWY7aGFzaD0wO2lmKHRoaXMubGVuZ3RoPT09MCl7cmV0dXJuIGhhc2g7fVxuZm9yKGk9X2k9MCxfcmVmPXRoaXMubGVuZ3RoOzA8PV9yZWY/X2k8X3JlZjpfaT5fcmVmO2k9MDw9X3JlZj8rK19pOi0tX2kpe2NoYXI9dGhpcy5jaGFyQ29kZUF0KGkpO2hhc2g9KChoYXNoPDw1KS1oYXNoKStjaGFyO2hhc2g9aGFzaCZoYXNoO31cbnJldHVybiBoYXNoO307c2Vjb25kc1RvU3RyaW5nPWZ1bmN0aW9uKHNlYyl7dmFyIGhyLG1pbjtocj1NYXRoLmZsb29yKHNlYy8zNjAwKTttaW49TWF0aC5mbG9vcigoc2VjLShociozNjAwKSkvNjApO3NlYy09KGhyKjM2MDApKyhtaW4qNjApO3NlYys9Jyc7bWluKz0nJzt3aGlsZShtaW4ubGVuZ3RoPDIpe21pbj0nMCcrbWluO31cbndoaWxlKHNlYy5sZW5ndGg8Mil7c2VjPScwJytzZWM7fVxuaHI9aHI/aHIrJzonOicnO3JldHVybiBocittaW4rJzonK3NlYzt9O2Zvcm1hdE51bWJlcj1mdW5jdGlvbihudW0pe3JldHVybiBhZGRDb21tYXMobnVtLnRvRml4ZWQoMCkpO307dXBkYXRlT2JqZWN0VmFsdWVzPWZ1bmN0aW9uKG9iajEsb2JqMil7dmFyIGtleSx2YWw7Zm9yKGtleSBpbiBvYmoyKXtpZighX19oYXNQcm9wLmNhbGwob2JqMixrZXkpKWNvbnRpbnVlO3ZhbD1vYmoyW2tleV07b2JqMVtrZXldPXZhbDt9XG5yZXR1cm4gb2JqMTt9O21lcmdlT2JqZWN0cz1mdW5jdGlvbihvYmoxLG9iajIpe3ZhciBrZXksb3V0LHZhbDtvdXQ9e307Zm9yKGtleSBpbiBvYmoxKXtpZighX19oYXNQcm9wLmNhbGwob2JqMSxrZXkpKWNvbnRpbnVlO3ZhbD1vYmoxW2tleV07b3V0W2tleV09dmFsO31cbmZvcihrZXkgaW4gb2JqMil7aWYoIV9faGFzUHJvcC5jYWxsKG9iajIsa2V5KSljb250aW51ZTt2YWw9b2JqMltrZXldO291dFtrZXldPXZhbDt9XG5yZXR1cm4gb3V0O307YWRkQ29tbWFzPWZ1bmN0aW9uKG5TdHIpe3ZhciByZ3gseCx4MSx4MjtuU3RyKz0nJzt4PW5TdHIuc3BsaXQoJy4nKTt4MT14WzBdO3gyPScnO2lmKHgubGVuZ3RoPjEpe3gyPScuJyt4WzFdO31cbnJneD0vKFxcZCspKFxcZHszfSkvO3doaWxlKHJneC50ZXN0KHgxKSl7eDE9eDEucmVwbGFjZShyZ3gsJyQxJysnLCcrJyQyJyk7fVxucmV0dXJuIHgxK3gyO307Y3V0SGV4PWZ1bmN0aW9uKG5TdHIpe2lmKG5TdHIuY2hhckF0KDApPT09XCIjXCIpe3JldHVybiBuU3RyLnN1YnN0cmluZygxLDcpO31cbnJldHVybiBuU3RyO307VmFsdWVVcGRhdGVyPShmdW5jdGlvbigpe1ZhbHVlVXBkYXRlci5wcm90b3R5cGUuYW5pbWF0aW9uU3BlZWQ9MzI7ZnVuY3Rpb24gVmFsdWVVcGRhdGVyKGFkZFRvQW5pbWF0aW9uUXVldWUsY2xlYXIpe2lmKGFkZFRvQW5pbWF0aW9uUXVldWU9PW51bGwpe2FkZFRvQW5pbWF0aW9uUXVldWU9dHJ1ZTt9XG50aGlzLmNsZWFyPWNsZWFyIT1udWxsP2NsZWFyOnRydWU7aWYoYWRkVG9BbmltYXRpb25RdWV1ZSl7QW5pbWF0aW9uVXBkYXRlci5hZGQodGhpcyk7fX1cblZhbHVlVXBkYXRlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGZvcmNlKXt2YXIgZGlmZjtpZihmb3JjZT09bnVsbCl7Zm9yY2U9ZmFsc2U7fVxuaWYoZm9yY2V8fHRoaXMuZGlzcGxheWVkVmFsdWUhPT10aGlzLnZhbHVlKXtpZih0aGlzLmN0eCYmdGhpcy5jbGVhcil7dGhpcy5jdHguY2xlYXJSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpO31cbmRpZmY9dGhpcy52YWx1ZS10aGlzLmRpc3BsYXllZFZhbHVlO2lmKE1hdGguYWJzKGRpZmYvdGhpcy5hbmltYXRpb25TcGVlZCk8PTAuMDAxKXt0aGlzLmRpc3BsYXllZFZhbHVlPXRoaXMudmFsdWU7fWVsc2V7dGhpcy5kaXNwbGF5ZWRWYWx1ZT10aGlzLmRpc3BsYXllZFZhbHVlK2RpZmYvdGhpcy5hbmltYXRpb25TcGVlZDt9XG50aGlzLnJlbmRlcigpO3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O3JldHVybiBWYWx1ZVVwZGF0ZXI7fSkoKTtCYXNlR2F1Z2U9KGZ1bmN0aW9uKF9zdXBlcil7X19leHRlbmRzKEJhc2VHYXVnZSxfc3VwZXIpO2Z1bmN0aW9uIEJhc2VHYXVnZSgpe19yZWY9QmFzZUdhdWdlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIF9yZWY7fVxuQmFzZUdhdWdlLnByb3RvdHlwZS5kaXNwbGF5U2NhbGU9MTtCYXNlR2F1Z2UucHJvdG90eXBlLnNldFRleHRGaWVsZD1mdW5jdGlvbih0ZXh0RmllbGQpe3JldHVybiB0aGlzLnRleHRGaWVsZD10ZXh0RmllbGQgaW5zdGFuY2VvZiBUZXh0UmVuZGVyZXI/dGV4dEZpZWxkOm5ldyBUZXh0UmVuZGVyZXIodGV4dEZpZWxkKTt9O0Jhc2VHYXVnZS5wcm90b3R5cGUuc2V0TWluVmFsdWU9ZnVuY3Rpb24obWluVmFsdWUsdXBkYXRlU3RhcnRWYWx1ZSl7dmFyIGdhdWdlLF9pLF9sZW4sX3JlZjEsX3Jlc3VsdHM7dGhpcy5taW5WYWx1ZT1taW5WYWx1ZTtpZih1cGRhdGVTdGFydFZhbHVlPT1udWxsKXt1cGRhdGVTdGFydFZhbHVlPXRydWU7fVxuaWYodXBkYXRlU3RhcnRWYWx1ZSl7dGhpcy5kaXNwbGF5ZWRWYWx1ZT10aGlzLm1pblZhbHVlO19yZWYxPXRoaXMuZ3B8fFtdO19yZXN1bHRzPVtdO2ZvcihfaT0wLF9sZW49X3JlZjEubGVuZ3RoO19pPF9sZW47X2krKyl7Z2F1Z2U9X3JlZjFbX2ldO19yZXN1bHRzLnB1c2goZ2F1Z2UuZGlzcGxheWVkVmFsdWU9dGhpcy5taW5WYWx1ZSk7fVxucmV0dXJuIF9yZXN1bHRzO319O0Jhc2VHYXVnZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbihvcHRpb25zKXtpZihvcHRpb25zPT1udWxsKXtvcHRpb25zPW51bGw7fVxudGhpcy5vcHRpb25zPW1lcmdlT2JqZWN0cyh0aGlzLm9wdGlvbnMsb3B0aW9ucyk7aWYodGhpcy50ZXh0RmllbGQpe3RoaXMudGV4dEZpZWxkLmVsLnN0eWxlLmZvbnRTaXplPW9wdGlvbnMuZm9udFNpemUrJ3B4Jzt9XG5pZih0aGlzLm9wdGlvbnMuYW5nbGU+LjUpe3RoaXMuZ2F1Z2Uub3B0aW9ucy5hbmdsZT0uNTt9XG50aGlzLmNvbmZpZ0Rpc3BsYXlTY2FsZSgpO3JldHVybiB0aGlzO307QmFzZUdhdWdlLnByb3RvdHlwZS5jb25maWdEaXNwbGF5U2NhbGU9ZnVuY3Rpb24oKXt2YXIgYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyxkZXZpY2VQaXhlbFJhdGlvLGhlaWdodCxwcmV2RGlzcGxheVNjYWxlLHdpZHRoO3ByZXZEaXNwbGF5U2NhbGU9dGhpcy5kaXNwbGF5U2NhbGU7aWYodGhpcy5vcHRpb25zLmhpZ2hEcGlTdXBwb3J0PT09ZmFsc2Upe2RlbGV0ZSB0aGlzLmRpc3BsYXlTY2FsZTt9ZWxzZXtkZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxO2JhY2tpbmdTdG9yZVBpeGVsUmF0aW89dGhpcy5jdHgud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8dGhpcy5jdHgubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8dGhpcy5jdHgubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvfHx0aGlzLmN0eC5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8dGhpcy5jdHguYmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8MTt0aGlzLmRpc3BsYXlTY2FsZT1kZXZpY2VQaXhlbFJhdGlvL2JhY2tpbmdTdG9yZVBpeGVsUmF0aW87fVxuaWYodGhpcy5kaXNwbGF5U2NhbGUhPT1wcmV2RGlzcGxheVNjYWxlKXt3aWR0aD10aGlzLmNhbnZhcy5HX193aWR0aHx8dGhpcy5jYW52YXMud2lkdGg7aGVpZ2h0PXRoaXMuY2FudmFzLkdfX2hlaWdodHx8dGhpcy5jYW52YXMuaGVpZ2h0O3RoaXMuY2FudmFzLndpZHRoPXdpZHRoKnRoaXMuZGlzcGxheVNjYWxlO3RoaXMuY2FudmFzLmhlaWdodD1oZWlnaHQqdGhpcy5kaXNwbGF5U2NhbGU7dGhpcy5jYW52YXMuc3R5bGUud2lkdGg9XCJcIit3aWR0aCtcInB4XCI7dGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0PVwiXCIraGVpZ2h0K1wicHhcIjt0aGlzLmNhbnZhcy5HX193aWR0aD13aWR0aDt0aGlzLmNhbnZhcy5HX19oZWlnaHQ9aGVpZ2h0O31cbnJldHVybiB0aGlzO307cmV0dXJuIEJhc2VHYXVnZTt9KShWYWx1ZVVwZGF0ZXIpO1RleHRSZW5kZXJlcj0oZnVuY3Rpb24oKXtmdW5jdGlvbiBUZXh0UmVuZGVyZXIoZWwpe3RoaXMuZWw9ZWw7fVxuVGV4dFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oZ2F1Z2Upe3JldHVybiB0aGlzLmVsLmlubmVySFRNTD1mb3JtYXROdW1iZXIoZ2F1Z2UuZGlzcGxheWVkVmFsdWUpO307cmV0dXJuIFRleHRSZW5kZXJlcjt9KSgpO0FuaW1hdGVkVGV4dD0oZnVuY3Rpb24oX3N1cGVyKXtfX2V4dGVuZHMoQW5pbWF0ZWRUZXh0LF9zdXBlcik7QW5pbWF0ZWRUZXh0LnByb3RvdHlwZS5kaXNwbGF5ZWRWYWx1ZT0wO0FuaW1hdGVkVGV4dC5wcm90b3R5cGUudmFsdWU9MDtBbmltYXRlZFRleHQucHJvdG90eXBlLnNldFZhbD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHRoaXMudmFsdWU9MSp2YWx1ZTt9O2Z1bmN0aW9uIEFuaW1hdGVkVGV4dChlbGVtLHRleHQpe3RoaXMuZWxlbT1lbGVtO3RoaXMudGV4dD10ZXh0IT1udWxsP3RleHQ6ZmFsc2U7dGhpcy52YWx1ZT0xKnRoaXMuZWxlbS5pbm5lckhUTUw7aWYodGhpcy50ZXh0KXt0aGlzLnZhbHVlPTA7fX1cbkFuaW1hdGVkVGV4dC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHRleHRWYWw7aWYodGhpcy50ZXh0KXt0ZXh0VmFsPXNlY29uZHNUb1N0cmluZyh0aGlzLmRpc3BsYXllZFZhbHVlLnRvRml4ZWQoMCkpO31lbHNle3RleHRWYWw9YWRkQ29tbWFzKGZvcm1hdE51bWJlcih0aGlzLmRpc3BsYXllZFZhbHVlKSk7fVxucmV0dXJuIHRoaXMuZWxlbS5pbm5lckhUTUw9dGV4dFZhbDt9O3JldHVybiBBbmltYXRlZFRleHQ7fSkoVmFsdWVVcGRhdGVyKTtBbmltYXRlZFRleHRGYWN0b3J5PXtjcmVhdGU6ZnVuY3Rpb24ob2JqTGlzdCl7dmFyIGVsZW0sb3V0LF9pLF9sZW47b3V0PVtdO2ZvcihfaT0wLF9sZW49b2JqTGlzdC5sZW5ndGg7X2k8X2xlbjtfaSsrKXtlbGVtPW9iakxpc3RbX2ldO291dC5wdXNoKG5ldyBBbmltYXRlZFRleHQoZWxlbSkpO31cbnJldHVybiBvdXQ7fX07R2F1Z2VQb2ludGVyPShmdW5jdGlvbihfc3VwZXIpe19fZXh0ZW5kcyhHYXVnZVBvaW50ZXIsX3N1cGVyKTtHYXVnZVBvaW50ZXIucHJvdG90eXBlLmRpc3BsYXllZFZhbHVlPTA7R2F1Z2VQb2ludGVyLnByb3RvdHlwZS52YWx1ZT0wO0dhdWdlUG9pbnRlci5wcm90b3R5cGUub3B0aW9ucz17c3Ryb2tlV2lkdGg6MC4wMzUsbGVuZ3RoOjAuMSxjb2xvcjpcIiMwMDAwMDBcIn07ZnVuY3Rpb24gR2F1Z2VQb2ludGVyKGdhdWdlKXt0aGlzLmdhdWdlPWdhdWdlO3RoaXMuY3R4PXRoaXMuZ2F1Z2UuY3R4O3RoaXMuY2FudmFzPXRoaXMuZ2F1Z2UuY2FudmFzO0dhdWdlUG9pbnRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGZhbHNlLGZhbHNlKTt0aGlzLnNldE9wdGlvbnMoKTt9XG5HYXVnZVBvaW50ZXIucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24ob3B0aW9ucyl7aWYob3B0aW9ucz09bnVsbCl7b3B0aW9ucz1udWxsO31cbnVwZGF0ZU9iamVjdFZhbHVlcyh0aGlzLm9wdGlvbnMsb3B0aW9ucyk7dGhpcy5sZW5ndGg9dGhpcy5jYW52YXMuaGVpZ2h0KnRoaXMub3B0aW9ucy5sZW5ndGg7dGhpcy5zdHJva2VXaWR0aD10aGlzLmNhbnZhcy5oZWlnaHQqdGhpcy5vcHRpb25zLnN0cm9rZVdpZHRoO3RoaXMubWF4VmFsdWU9dGhpcy5nYXVnZS5tYXhWYWx1ZTt0aGlzLm1pblZhbHVlPXRoaXMuZ2F1Z2UubWluVmFsdWU7dGhpcy5hbmltYXRpb25TcGVlZD10aGlzLmdhdWdlLmFuaW1hdGlvblNwZWVkO3JldHVybiB0aGlzLm9wdGlvbnMuYW5nbGU9dGhpcy5nYXVnZS5vcHRpb25zLmFuZ2xlO307R2F1Z2VQb2ludGVyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYW5nbGUsY2VudGVyWCxjZW50ZXJZLGVuZFgsZW5kWSxzdGFydFgsc3RhcnRZLHgseTthbmdsZT10aGlzLmdhdWdlLmdldEFuZ2xlLmNhbGwodGhpcyx0aGlzLmRpc3BsYXllZFZhbHVlKTtjZW50ZXJYPXRoaXMuY2FudmFzLndpZHRoLzI7Y2VudGVyWT10aGlzLmNhbnZhcy5oZWlnaHQqMC45O3g9TWF0aC5yb3VuZChjZW50ZXJYK3RoaXMubGVuZ3RoKk1hdGguY29zKGFuZ2xlKSk7eT1NYXRoLnJvdW5kKGNlbnRlclkrdGhpcy5sZW5ndGgqTWF0aC5zaW4oYW5nbGUpKTtzdGFydFg9TWF0aC5yb3VuZChjZW50ZXJYK3RoaXMuc3Ryb2tlV2lkdGgqTWF0aC5jb3MoYW5nbGUtTWF0aC5QSS8yKSk7c3RhcnRZPU1hdGgucm91bmQoY2VudGVyWSt0aGlzLnN0cm9rZVdpZHRoKk1hdGguc2luKGFuZ2xlLU1hdGguUEkvMikpO2VuZFg9TWF0aC5yb3VuZChjZW50ZXJYK3RoaXMuc3Ryb2tlV2lkdGgqTWF0aC5jb3MoYW5nbGUrTWF0aC5QSS8yKSk7ZW5kWT1NYXRoLnJvdW5kKGNlbnRlclkrdGhpcy5zdHJva2VXaWR0aCpNYXRoLnNpbihhbmdsZStNYXRoLlBJLzIpKTt0aGlzLmN0eC5maWxsU3R5bGU9dGhpcy5vcHRpb25zLmNvbG9yO3RoaXMuY3R4LmJlZ2luUGF0aCgpO3RoaXMuY3R4LmFyYyhjZW50ZXJYLGNlbnRlclksdGhpcy5zdHJva2VXaWR0aCwwLE1hdGguUEkqMix0cnVlKTt0aGlzLmN0eC5maWxsKCk7dGhpcy5jdHguYmVnaW5QYXRoKCk7dGhpcy5jdHgubW92ZVRvKHN0YXJ0WCxzdGFydFkpO3RoaXMuY3R4LmxpbmVUbyh4LHkpO3RoaXMuY3R4LmxpbmVUbyhlbmRYLGVuZFkpO3JldHVybiB0aGlzLmN0eC5maWxsKCk7fTtyZXR1cm4gR2F1Z2VQb2ludGVyO30pKFZhbHVlVXBkYXRlcik7QmFyPShmdW5jdGlvbigpe2Z1bmN0aW9uIEJhcihlbGVtKXt0aGlzLmVsZW09ZWxlbTt9XG5CYXIucHJvdG90eXBlLnVwZGF0ZVZhbHVlcz1mdW5jdGlvbihhcnJWYWx1ZXMpe3RoaXMudmFsdWU9YXJyVmFsdWVzWzBdO3RoaXMubWF4VmFsdWU9YXJyVmFsdWVzWzFdO3RoaXMuYXZnVmFsdWU9YXJyVmFsdWVzWzJdO3JldHVybiB0aGlzLnJlbmRlcigpO307QmFyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYXZnUGVyY2VudCx2YWxQZXJjZW50O2lmKHRoaXMudGV4dEZpZWxkKXt0aGlzLnRleHRGaWVsZC50ZXh0KGZvcm1hdE51bWJlcih0aGlzLnZhbHVlKSk7fVxuaWYodGhpcy5tYXhWYWx1ZT09PTApe3RoaXMubWF4VmFsdWU9dGhpcy5hdmdWYWx1ZSoyO31cbnZhbFBlcmNlbnQ9KHRoaXMudmFsdWUvdGhpcy5tYXhWYWx1ZSkqMTAwO2F2Z1BlcmNlbnQ9KHRoaXMuYXZnVmFsdWUvdGhpcy5tYXhWYWx1ZSkqMTAwOyQoXCIuYmFyLXZhbHVlXCIsdGhpcy5lbGVtKS5jc3Moe1wid2lkdGhcIjp2YWxQZXJjZW50K1wiJVwifSk7cmV0dXJuICQoXCIudHlwaWNhbC12YWx1ZVwiLHRoaXMuZWxlbSkuY3NzKHtcIndpZHRoXCI6YXZnUGVyY2VudCtcIiVcIn0pO307cmV0dXJuIEJhcjt9KSgpO0dhdWdlPShmdW5jdGlvbihfc3VwZXIpe19fZXh0ZW5kcyhHYXVnZSxfc3VwZXIpO0dhdWdlLnByb3RvdHlwZS5lbGVtPW51bGw7R2F1Z2UucHJvdG90eXBlLnZhbHVlPVsyMF07R2F1Z2UucHJvdG90eXBlLm1heFZhbHVlPTgwO0dhdWdlLnByb3RvdHlwZS5taW5WYWx1ZT0wO0dhdWdlLnByb3RvdHlwZS5kaXNwbGF5ZWRBbmdsZT0wO0dhdWdlLnByb3RvdHlwZS5kaXNwbGF5ZWRWYWx1ZT0wO0dhdWdlLnByb3RvdHlwZS5saW5lV2lkdGg9NDA7R2F1Z2UucHJvdG90eXBlLnBhZGRpbmdCb3R0b209MC4xO0dhdWdlLnByb3RvdHlwZS5wZXJjZW50Q29sb3JzPW51bGw7R2F1Z2UucHJvdG90eXBlLm9wdGlvbnM9e2NvbG9yU3RhcnQ6XCIjNmZhZGNmXCIsY29sb3JTdG9wOnZvaWQgMCxncmFkaWVudFR5cGU6MCxzdHJva2VDb2xvcjpcIiNlMGUwZTBcIixwb2ludGVyOntsZW5ndGg6MC44LHN0cm9rZVdpZHRoOjAuMDM1fSxhbmdsZTowLjE1LGxpbmVXaWR0aDowLjQ0LGZvbnRTaXplOjQwLGxpbWl0TWF4OmZhbHNlfTtmdW5jdGlvbiBHYXVnZShjYW52YXMpe3RoaXMuY2FudmFzPWNhbnZhcztHYXVnZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnBlcmNlbnRDb2xvcnM9bnVsbDtpZih0eXBlb2YgR192bWxDYW52YXNNYW5hZ2VyIT09J3VuZGVmaW5lZCcpe3RoaXMuY2FudmFzPXdpbmRvdy5HX3ZtbENhbnZhc01hbmFnZXIuaW5pdEVsZW1lbnQodGhpcy5jYW52YXMpO31cbnRoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7dGhpcy5ncD1bbmV3IEdhdWdlUG9pbnRlcih0aGlzKV07dGhpcy5zZXRPcHRpb25zKCk7dGhpcy5yZW5kZXIoKTt9XG5HYXVnZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbihvcHRpb25zKXt2YXIgZ2F1Z2UsX2ksX2xlbixfcmVmMTtpZihvcHRpb25zPT1udWxsKXtvcHRpb25zPW51bGw7fVxuR2F1Z2UuX19zdXBlcl9fLnNldE9wdGlvbnMuY2FsbCh0aGlzLG9wdGlvbnMpO3RoaXMuY29uZmlnUGVyY2VudENvbG9ycygpO3RoaXMubGluZVdpZHRoPXRoaXMuY2FudmFzLmhlaWdodCooMS10aGlzLnBhZGRpbmdCb3R0b20pKnRoaXMub3B0aW9ucy5saW5lV2lkdGg7dGhpcy5yYWRpdXM9dGhpcy5jYW52YXMuaGVpZ2h0KigxLXRoaXMucGFkZGluZ0JvdHRvbSktdGhpcy5saW5lV2lkdGg7dGhpcy5jdHguY2xlYXJSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpO3RoaXMucmVuZGVyKCk7X3JlZjE9dGhpcy5ncDtmb3IoX2k9MCxfbGVuPV9yZWYxLmxlbmd0aDtfaTxfbGVuO19pKyspe2dhdWdlPV9yZWYxW19pXTtnYXVnZS5zZXRPcHRpb25zKHRoaXMub3B0aW9ucy5wb2ludGVyKTtnYXVnZS5yZW5kZXIoKTt9XG5yZXR1cm4gdGhpczt9O0dhdWdlLnByb3RvdHlwZS5jb25maWdQZXJjZW50Q29sb3JzPWZ1bmN0aW9uKCl7dmFyIGJ2YWwsZ3ZhbCxpLHJ2YWwsX2ksX3JlZjEsX3Jlc3VsdHM7dGhpcy5wZXJjZW50Q29sb3JzPW51bGw7aWYodGhpcy5vcHRpb25zLnBlcmNlbnRDb2xvcnMhPT12b2lkIDApe3RoaXMucGVyY2VudENvbG9ycz1uZXcgQXJyYXkoKTtfcmVzdWx0cz1bXTtmb3IoaT1faT0wLF9yZWYxPXRoaXMub3B0aW9ucy5wZXJjZW50Q29sb3JzLmxlbmd0aC0xOzA8PV9yZWYxP19pPD1fcmVmMTpfaT49X3JlZjE7aT0wPD1fcmVmMT8rK19pOi0tX2kpe3J2YWw9cGFyc2VJbnQoKGN1dEhleCh0aGlzLm9wdGlvbnMucGVyY2VudENvbG9yc1tpXVsxXSkpLnN1YnN0cmluZygwLDIpLDE2KTtndmFsPXBhcnNlSW50KChjdXRIZXgodGhpcy5vcHRpb25zLnBlcmNlbnRDb2xvcnNbaV1bMV0pKS5zdWJzdHJpbmcoMiw0KSwxNik7YnZhbD1wYXJzZUludCgoY3V0SGV4KHRoaXMub3B0aW9ucy5wZXJjZW50Q29sb3JzW2ldWzFdKSkuc3Vic3RyaW5nKDQsNiksMTYpO19yZXN1bHRzLnB1c2godGhpcy5wZXJjZW50Q29sb3JzW2ldPXtwY3Q6dGhpcy5vcHRpb25zLnBlcmNlbnRDb2xvcnNbaV1bMF0sY29sb3I6e3I6cnZhbCxnOmd2YWwsYjpidmFsfX0pO31cbnJldHVybiBfcmVzdWx0czt9fTtHYXVnZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHZhbHVlKXt2YXIgaSxtYXhfaGl0LHZhbCxfaSxfaixfbGVuLF9yZWYxO2lmKCEodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpe3ZhbHVlPVt2YWx1ZV07fVxuaWYodmFsdWUubGVuZ3RoPnRoaXMuZ3AubGVuZ3RoKXtmb3IoaT1faT0wLF9yZWYxPXZhbHVlLmxlbmd0aC10aGlzLmdwLmxlbmd0aDswPD1fcmVmMT9faTxfcmVmMTpfaT5fcmVmMTtpPTA8PV9yZWYxPysrX2k6LS1faSl7dGhpcy5ncC5wdXNoKG5ldyBHYXVnZVBvaW50ZXIodGhpcykpO319XG5pPTA7bWF4X2hpdD1mYWxzZTtmb3IoX2o9MCxfbGVuPXZhbHVlLmxlbmd0aDtfajxfbGVuO19qKyspe3ZhbD12YWx1ZVtfal07aWYodmFsPnRoaXMubWF4VmFsdWUpe3RoaXMubWF4VmFsdWU9dGhpcy52YWx1ZSoxLjE7bWF4X2hpdD10cnVlO31cbnRoaXMuZ3BbaV0udmFsdWU9dmFsO3RoaXMuZ3BbaSsrXS5zZXRPcHRpb25zKHttYXhWYWx1ZTp0aGlzLm1heFZhbHVlLGFuZ2xlOnRoaXMub3B0aW9ucy5hbmdsZX0pO31cbnRoaXMudmFsdWU9dmFsdWVbdmFsdWUubGVuZ3RoLTFdO2lmKG1heF9oaXQpe2lmKCF0aGlzLm9wdGlvbnMubGltaXRNYXgpe3JldHVybiBBbmltYXRpb25VcGRhdGVyLnJ1bigpO319ZWxzZXtyZXR1cm4gQW5pbWF0aW9uVXBkYXRlci5ydW4oKTt9fTtHYXVnZS5wcm90b3R5cGUuZ2V0QW5nbGU9ZnVuY3Rpb24odmFsdWUpe3JldHVybigxK3RoaXMub3B0aW9ucy5hbmdsZSkqTWF0aC5QSSsoKHZhbHVlLXRoaXMubWluVmFsdWUpLyh0aGlzLm1heFZhbHVlLXRoaXMubWluVmFsdWUpKSooMS10aGlzLm9wdGlvbnMuYW5nbGUqMikqTWF0aC5QSTt9O0dhdWdlLnByb3RvdHlwZS5nZXRDb2xvckZvclBlcmNlbnRhZ2U9ZnVuY3Rpb24ocGN0LGdyYWQpe3ZhciBjb2xvcixlbmRDb2xvcixpLHJhbmdlUGN0LHN0YXJ0Q29sb3IsX2ksX3JlZjE7aWYocGN0PT09MCl7Y29sb3I9dGhpcy5wZXJjZW50Q29sb3JzWzBdLmNvbG9yO31lbHNle2NvbG9yPXRoaXMucGVyY2VudENvbG9yc1t0aGlzLnBlcmNlbnRDb2xvcnMubGVuZ3RoLTFdLmNvbG9yO2ZvcihpPV9pPTAsX3JlZjE9dGhpcy5wZXJjZW50Q29sb3JzLmxlbmd0aC0xOzA8PV9yZWYxP19pPD1fcmVmMTpfaT49X3JlZjE7aT0wPD1fcmVmMT8rK19pOi0tX2kpe2lmKHBjdDw9dGhpcy5wZXJjZW50Q29sb3JzW2ldLnBjdCl7aWYoZ3JhZD09PXRydWUpe3N0YXJ0Q29sb3I9dGhpcy5wZXJjZW50Q29sb3JzW2ktMV07ZW5kQ29sb3I9dGhpcy5wZXJjZW50Q29sb3JzW2ldO3JhbmdlUGN0PShwY3Qtc3RhcnRDb2xvci5wY3QpLyhlbmRDb2xvci5wY3Qtc3RhcnRDb2xvci5wY3QpO2NvbG9yPXtyOk1hdGguZmxvb3Ioc3RhcnRDb2xvci5jb2xvci5yKigxLXJhbmdlUGN0KStlbmRDb2xvci5jb2xvci5yKnJhbmdlUGN0KSxnOk1hdGguZmxvb3Ioc3RhcnRDb2xvci5jb2xvci5nKigxLXJhbmdlUGN0KStlbmRDb2xvci5jb2xvci5nKnJhbmdlUGN0KSxiOk1hdGguZmxvb3Ioc3RhcnRDb2xvci5jb2xvci5iKigxLXJhbmdlUGN0KStlbmRDb2xvci5jb2xvci5iKnJhbmdlUGN0KX07fWVsc2V7Y29sb3I9dGhpcy5wZXJjZW50Q29sb3JzW2ldLmNvbG9yO31cbmJyZWFrO319fVxucmV0dXJuJ3JnYignK1tjb2xvci5yLGNvbG9yLmcsY29sb3IuYl0uam9pbignLCcpKycpJzt9O0dhdWdlLnByb3RvdHlwZS5nZXRDb2xvckZvclZhbHVlPWZ1bmN0aW9uKHZhbCxncmFkKXt2YXIgcGN0O3BjdD0odmFsLXRoaXMubWluVmFsdWUpLyh0aGlzLm1heFZhbHVlLXRoaXMubWluVmFsdWUpO3JldHVybiB0aGlzLmdldENvbG9yRm9yUGVyY2VudGFnZShwY3QsZ3JhZCk7fTtHYXVnZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGRpc3BsYXllZEFuZ2xlLGZpbGxTdHlsZSxnYXVnZSxoLHcsX2ksX2xlbixfcmVmMSxfcmVzdWx0czt3PXRoaXMuY2FudmFzLndpZHRoLzI7aD10aGlzLmNhbnZhcy5oZWlnaHQqKDEtdGhpcy5wYWRkaW5nQm90dG9tKTtkaXNwbGF5ZWRBbmdsZT10aGlzLmdldEFuZ2xlKHRoaXMuZGlzcGxheWVkVmFsdWUpO2lmKHRoaXMudGV4dEZpZWxkKXt0aGlzLnRleHRGaWVsZC5yZW5kZXIodGhpcyk7fVxudGhpcy5jdHgubGluZUNhcD1cImJ1dHRcIjtpZih0aGlzLm9wdGlvbnMuY3VzdG9tRmlsbFN0eWxlIT09dm9pZCAwKXtmaWxsU3R5bGU9dGhpcy5vcHRpb25zLmN1c3RvbUZpbGxTdHlsZSh0aGlzKTt9ZWxzZSBpZih0aGlzLnBlcmNlbnRDb2xvcnMhPT1udWxsKXtmaWxsU3R5bGU9dGhpcy5nZXRDb2xvckZvclZhbHVlKHRoaXMuZGlzcGxheWVkVmFsdWUsdHJ1ZSk7fWVsc2UgaWYodGhpcy5vcHRpb25zLmNvbG9yU3RvcCE9PXZvaWQgMCl7aWYodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZT09PTApe2ZpbGxTdHlsZT10aGlzLmN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCh3LGgsOSx3LGgsNzApO31lbHNle2ZpbGxTdHlsZT10aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsdywwKTt9XG5maWxsU3R5bGUuYWRkQ29sb3JTdG9wKDAsdGhpcy5vcHRpb25zLmNvbG9yU3RhcnQpO2ZpbGxTdHlsZS5hZGRDb2xvclN0b3AoMSx0aGlzLm9wdGlvbnMuY29sb3JTdG9wKTt9ZWxzZXtmaWxsU3R5bGU9dGhpcy5vcHRpb25zLmNvbG9yU3RhcnQ7fVxudGhpcy5jdHguc3Ryb2tlU3R5bGU9ZmlsbFN0eWxlO3RoaXMuY3R4LmJlZ2luUGF0aCgpO3RoaXMuY3R4LmFyYyh3LGgsdGhpcy5yYWRpdXMsKDErdGhpcy5vcHRpb25zLmFuZ2xlKSpNYXRoLlBJLGRpc3BsYXllZEFuZ2xlLGZhbHNlKTt0aGlzLmN0eC5saW5lV2lkdGg9dGhpcy5saW5lV2lkdGg7dGhpcy5jdHguc3Ryb2tlKCk7dGhpcy5jdHguc3Ryb2tlU3R5bGU9dGhpcy5vcHRpb25zLnN0cm9rZUNvbG9yO3RoaXMuY3R4LmJlZ2luUGF0aCgpO3RoaXMuY3R4LmFyYyh3LGgsdGhpcy5yYWRpdXMsZGlzcGxheWVkQW5nbGUsKDItdGhpcy5vcHRpb25zLmFuZ2xlKSpNYXRoLlBJLGZhbHNlKTt0aGlzLmN0eC5zdHJva2UoKTtfcmVmMT10aGlzLmdwO19yZXN1bHRzPVtdO2ZvcihfaT0wLF9sZW49X3JlZjEubGVuZ3RoO19pPF9sZW47X2krKyl7Z2F1Z2U9X3JlZjFbX2ldO19yZXN1bHRzLnB1c2goZ2F1Z2UudXBkYXRlKHRydWUpKTt9XG5yZXR1cm4gX3Jlc3VsdHM7fTtyZXR1cm4gR2F1Z2U7fSkoQmFzZUdhdWdlKTtCYXNlRG9udXQ9KGZ1bmN0aW9uKF9zdXBlcil7X19leHRlbmRzKEJhc2VEb251dCxfc3VwZXIpO0Jhc2VEb251dC5wcm90b3R5cGUubGluZVdpZHRoPTE1O0Jhc2VEb251dC5wcm90b3R5cGUuZGlzcGxheWVkVmFsdWU9MDtCYXNlRG9udXQucHJvdG90eXBlLnZhbHVlPTMzO0Jhc2VEb251dC5wcm90b3R5cGUubWF4VmFsdWU9ODA7QmFzZURvbnV0LnByb3RvdHlwZS5taW5WYWx1ZT0wO0Jhc2VEb251dC5wcm90b3R5cGUub3B0aW9ucz17bGluZVdpZHRoOjAuMTAsY29sb3JTdGFydDpcIiM2ZjZlYTBcIixjb2xvclN0b3A6XCIjYzBjMGRiXCIsc3Ryb2tlQ29sb3I6XCIjZWVlZWVlXCIsc2hhZG93Q29sb3I6XCIjZDVkNWQ1XCIsYW5nbGU6MC4zNX07ZnVuY3Rpb24gQmFzZURvbnV0KGNhbnZhcyl7dGhpcy5jYW52YXM9Y2FudmFzO0Jhc2VEb251dC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtpZih0eXBlb2YgR192bWxDYW52YXNNYW5hZ2VyIT09J3VuZGVmaW5lZCcpe3RoaXMuY2FudmFzPXdpbmRvdy5HX3ZtbENhbnZhc01hbmFnZXIuaW5pdEVsZW1lbnQodGhpcy5jYW52YXMpO31cbnRoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7dGhpcy5zZXRPcHRpb25zKCk7dGhpcy5yZW5kZXIoKTt9XG5CYXNlRG9udXQucHJvdG90eXBlLmdldEFuZ2xlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4oMS10aGlzLm9wdGlvbnMuYW5nbGUpKk1hdGguUEkrKCh2YWx1ZS10aGlzLm1pblZhbHVlKS8odGhpcy5tYXhWYWx1ZS10aGlzLm1pblZhbHVlKSkqKCgyK3RoaXMub3B0aW9ucy5hbmdsZSktKDEtdGhpcy5vcHRpb25zLmFuZ2xlKSkqTWF0aC5QSTt9O0Jhc2VEb251dC5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbihvcHRpb25zKXtpZihvcHRpb25zPT1udWxsKXtvcHRpb25zPW51bGw7fVxuQmFzZURvbnV0Ll9fc3VwZXJfXy5zZXRPcHRpb25zLmNhbGwodGhpcyxvcHRpb25zKTt0aGlzLmxpbmVXaWR0aD10aGlzLmNhbnZhcy5oZWlnaHQqdGhpcy5vcHRpb25zLmxpbmVXaWR0aDt0aGlzLnJhZGl1cz10aGlzLmNhbnZhcy5oZWlnaHQvMi10aGlzLmxpbmVXaWR0aC8yO3JldHVybiB0aGlzO307QmFzZURvbnV0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odmFsdWUpe3RoaXMudmFsdWU9dmFsdWU7aWYodGhpcy52YWx1ZT50aGlzLm1heFZhbHVlKXt0aGlzLm1heFZhbHVlPXRoaXMudmFsdWUqMS4xO31cbnJldHVybiBBbmltYXRpb25VcGRhdGVyLnJ1bigpO307QmFzZURvbnV0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZGlzcGxheWVkQW5nbGUsZ3JkRmlsbCxoLHN0YXJ0LHN0b3AsdztkaXNwbGF5ZWRBbmdsZT10aGlzLmdldEFuZ2xlKHRoaXMuZGlzcGxheWVkVmFsdWUpO3c9dGhpcy5jYW52YXMud2lkdGgvMjtoPXRoaXMuY2FudmFzLmhlaWdodC8yO2lmKHRoaXMudGV4dEZpZWxkKXt0aGlzLnRleHRGaWVsZC5yZW5kZXIodGhpcyk7fVxuZ3JkRmlsbD10aGlzLmN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCh3LGgsMzksdyxoLDcwKTtncmRGaWxsLmFkZENvbG9yU3RvcCgwLHRoaXMub3B0aW9ucy5jb2xvclN0YXJ0KTtncmRGaWxsLmFkZENvbG9yU3RvcCgxLHRoaXMub3B0aW9ucy5jb2xvclN0b3ApO3N0YXJ0PXRoaXMucmFkaXVzLXRoaXMubGluZVdpZHRoLzI7c3RvcD10aGlzLnJhZGl1cyt0aGlzLmxpbmVXaWR0aC8yO3RoaXMuY3R4LnN0cm9rZVN0eWxlPXRoaXMub3B0aW9ucy5zdHJva2VDb2xvcjt0aGlzLmN0eC5iZWdpblBhdGgoKTt0aGlzLmN0eC5hcmModyxoLHRoaXMucmFkaXVzLCgxLXRoaXMub3B0aW9ucy5hbmdsZSkqTWF0aC5QSSwoMit0aGlzLm9wdGlvbnMuYW5nbGUpKk1hdGguUEksZmFsc2UpO3RoaXMuY3R4LmxpbmVXaWR0aD10aGlzLmxpbmVXaWR0aDt0aGlzLmN0eC5saW5lQ2FwPVwicm91bmRcIjt0aGlzLmN0eC5zdHJva2UoKTt0aGlzLmN0eC5zdHJva2VTdHlsZT1ncmRGaWxsO3RoaXMuY3R4LmJlZ2luUGF0aCgpO3RoaXMuY3R4LmFyYyh3LGgsdGhpcy5yYWRpdXMsKDEtdGhpcy5vcHRpb25zLmFuZ2xlKSpNYXRoLlBJLGRpc3BsYXllZEFuZ2xlLGZhbHNlKTtyZXR1cm4gdGhpcy5jdHguc3Ryb2tlKCk7fTtyZXR1cm4gQmFzZURvbnV0O30pKEJhc2VHYXVnZSk7RG9udXQ9KGZ1bmN0aW9uKF9zdXBlcil7X19leHRlbmRzKERvbnV0LF9zdXBlcik7ZnVuY3Rpb24gRG9udXQoKXtfcmVmMT1Eb251dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBfcmVmMTt9XG5Eb251dC5wcm90b3R5cGUuc3Ryb2tlR3JhZGllbnQ9ZnVuY3Rpb24odyxoLHN0YXJ0LHN0b3Ape3ZhciBncmQ7Z3JkPXRoaXMuY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHcsaCxzdGFydCx3LGgsc3RvcCk7Z3JkLmFkZENvbG9yU3RvcCgwLHRoaXMub3B0aW9ucy5zaGFkb3dDb2xvcik7Z3JkLmFkZENvbG9yU3RvcCgwLjEyLHRoaXMub3B0aW9ucy5fb3JnU3Ryb2tlQ29sb3IpO2dyZC5hZGRDb2xvclN0b3AoMC44OCx0aGlzLm9wdGlvbnMuX29yZ1N0cm9rZUNvbG9yKTtncmQuYWRkQ29sb3JTdG9wKDEsdGhpcy5vcHRpb25zLnNoYWRvd0NvbG9yKTtyZXR1cm4gZ3JkO307RG9udXQucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGgsc3RhcnQsc3RvcCx3O2lmKG9wdGlvbnM9PW51bGwpe29wdGlvbnM9bnVsbDt9XG5Eb251dC5fX3N1cGVyX18uc2V0T3B0aW9ucy5jYWxsKHRoaXMsb3B0aW9ucyk7dz10aGlzLmNhbnZhcy53aWR0aC8yO2g9dGhpcy5jYW52YXMuaGVpZ2h0LzI7c3RhcnQ9dGhpcy5yYWRpdXMtdGhpcy5saW5lV2lkdGgvMjtzdG9wPXRoaXMucmFkaXVzK3RoaXMubGluZVdpZHRoLzI7dGhpcy5vcHRpb25zLl9vcmdTdHJva2VDb2xvcj10aGlzLm9wdGlvbnMuc3Ryb2tlQ29sb3I7dGhpcy5vcHRpb25zLnN0cm9rZUNvbG9yPXRoaXMuc3Ryb2tlR3JhZGllbnQodyxoLHN0YXJ0LHN0b3ApO3JldHVybiB0aGlzO307cmV0dXJuIERvbnV0O30pKEJhc2VEb251dCk7d2luZG93LkFuaW1hdGlvblVwZGF0ZXI9e2VsZW1lbnRzOltdLGFuaW1JZDpudWxsLGFkZEFsbDpmdW5jdGlvbihsaXN0KXt2YXIgZWxlbSxfaSxfbGVuLF9yZXN1bHRzO19yZXN1bHRzPVtdO2ZvcihfaT0wLF9sZW49bGlzdC5sZW5ndGg7X2k8X2xlbjtfaSsrKXtlbGVtPWxpc3RbX2ldO19yZXN1bHRzLnB1c2goQW5pbWF0aW9uVXBkYXRlci5lbGVtZW50cy5wdXNoKGVsZW0pKTt9XG5yZXR1cm4gX3Jlc3VsdHM7fSxhZGQ6ZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gQW5pbWF0aW9uVXBkYXRlci5lbGVtZW50cy5wdXNoKG9iamVjdCk7fSxydW46ZnVuY3Rpb24oKXt2YXIgYW5pbWF0aW9uRmluaXNoZWQsZWxlbSxfaSxfbGVuLF9yZWYyO2FuaW1hdGlvbkZpbmlzaGVkPXRydWU7X3JlZjI9QW5pbWF0aW9uVXBkYXRlci5lbGVtZW50cztmb3IoX2k9MCxfbGVuPV9yZWYyLmxlbmd0aDtfaTxfbGVuO19pKyspe2VsZW09X3JlZjJbX2ldO2lmKGVsZW0udXBkYXRlKCkpe2FuaW1hdGlvbkZpbmlzaGVkPWZhbHNlO319XG5pZighYW5pbWF0aW9uRmluaXNoZWQpe3JldHVybiBBbmltYXRpb25VcGRhdGVyLmFuaW1JZD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoQW5pbWF0aW9uVXBkYXRlci5ydW4pO31lbHNle3JldHVybiBjYW5jZWxBbmltYXRpb25GcmFtZShBbmltYXRpb25VcGRhdGVyLmFuaW1JZCk7fX19O3dpbmRvdy5HYXVnZT1HYXVnZTt3aW5kb3cuRG9udXQ9RG9udXQ7d2luZG93LkJhc2VEb251dD1CYXNlRG9udXQ7d2luZG93LlRleHRSZW5kZXJlcj1UZXh0UmVuZGVyZXI7fSkuY2FsbCh0aGlzKTsiLCIvKiohXG4gKiBlYXN5UGllQ2hhcnRcbiAqIExpZ2h0d2VpZ2h0IHBsdWdpbiB0byByZW5kZXIgc2ltcGxlLCBhbmltYXRlZCBhbmQgcmV0aW5hIG9wdGltaXplZCBwaWUgY2hhcnRzXG4gKlxuICogQGxpY2Vuc2UgXG4gKiBAYXV0aG9yIFJvYmVydCBGbGVpc2NobWFubiA8cmVuZHJvODdAZ21haWwuY29tPiAoaHR0cDovL3JvYmVydC1mbGVpc2NobWFubi5kZSlcbiAqIEB2ZXJzaW9uIDIuMS42XG4gKiovXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJhbmd1bGFyXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImFuZ3VsYXJcIl0sYik6YihhLmFuZ3VsYXIpfSh0aGlzLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYS5tb2R1bGUoXCJlYXN5cGllY2hhcnRcIixbXSkuZGlyZWN0aXZlKFwiZWFzeXBpZWNoYXJ0XCIsW2Z1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLHNjb3BlOntwZXJjZW50OlwiPVwiLG9wdGlvbnM6XCI9XCJ9LGxpbms6ZnVuY3Rpb24oYixkKXtiLnBlcmNlbnQ9Yi5wZXJjZW50fHwwO3ZhciBlPXtiYXJDb2xvcjpcIiNlZjFlMjVcIix0cmFja0NvbG9yOlwiI2Y5ZjlmOVwiLHNjYWxlQ29sb3I6XCIjZGZlMGUwXCIsc2NhbGVMZW5ndGg6NSxsaW5lQ2FwOlwicm91bmRcIixsaW5lV2lkdGg6MyxzaXplOjExMCxyb3RhdGU6MCxhbmltYXRlOntkdXJhdGlvbjoxZTMsZW5hYmxlZDohMH19O2Iub3B0aW9ucz1hLmV4dGVuZChlLGIub3B0aW9ucyk7dmFyIGY9bmV3IGMoZFswXSxlKTtiLiR3YXRjaChcInBlcmNlbnRcIixmdW5jdGlvbihhKXtmLnVwZGF0ZShhKX0pfX19XSl9KGEpO3ZhciBiPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2EuYXBwZW5kQ2hpbGQoZCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEdfdm1sQ2FudmFzTWFuYWdlciYmR192bWxDYW52YXNNYW5hZ2VyLmluaXRFbGVtZW50KGQpO3ZhciBlPWQuZ2V0Q29udGV4dChcIjJkXCIpO2Qud2lkdGg9ZC5oZWlnaHQ9Yi5zaXplO3ZhciBmPTE7d2luZG93LmRldmljZVBpeGVsUmF0aW8+MSYmKGY9d2luZG93LmRldmljZVBpeGVsUmF0aW8sZC5zdHlsZS53aWR0aD1kLnN0eWxlLmhlaWdodD1bYi5zaXplLFwicHhcIl0uam9pbihcIlwiKSxkLndpZHRoPWQuaGVpZ2h0PWIuc2l6ZSpmLGUuc2NhbGUoZixmKSksZS50cmFuc2xhdGUoYi5zaXplLzIsYi5zaXplLzIpLGUucm90YXRlKCgtMC41K2Iucm90YXRlLzE4MCkqTWF0aC5QSSk7dmFyIGc9KGIuc2l6ZS1iLmxpbmVXaWR0aCkvMjtiLnNjYWxlQ29sb3ImJmIuc2NhbGVMZW5ndGgmJihnLT1iLnNjYWxlTGVuZ3RoKzIpLERhdGUubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX07dmFyIGg9ZnVuY3Rpb24oYSxiLGMpe2M9TWF0aC5taW4oTWF0aC5tYXgoLTEsY3x8MCksMSk7dmFyIGQ9MD49Yz8hMDohMTtlLmJlZ2luUGF0aCgpLGUuYXJjKDAsMCxnLDAsMipNYXRoLlBJKmMsZCksZS5zdHJva2VTdHlsZT1hLGUubGluZVdpZHRoPWIsZS5zdHJva2UoKX0saT1mdW5jdGlvbigpe3ZhciBhLGM7ZS5saW5lV2lkdGg9MSxlLmZpbGxTdHlsZT1iLnNjYWxlQ29sb3IsZS5zYXZlKCk7Zm9yKHZhciBkPTI0O2Q+MDstLWQpZCU2PT09MD8oYz1iLnNjYWxlTGVuZ3RoLGE9MCk6KGM9LjYqYi5zY2FsZUxlbmd0aCxhPWIuc2NhbGVMZW5ndGgtYyksZS5maWxsUmVjdCgtYi5zaXplLzIrYSwwLGMsMSksZS5yb3RhdGUoTWF0aC5QSS8xMik7ZS5yZXN0b3JlKCl9LGo9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7d2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSxrPWZ1bmN0aW9uKCl7Yi5zY2FsZUNvbG9yJiZpKCksYi50cmFja0NvbG9yJiZoKGIudHJhY2tDb2xvcixiLnRyYWNrV2lkdGh8fGIubGluZVdpZHRoLDEpfTt0aGlzLmdldENhbnZhcz1mdW5jdGlvbigpe3JldHVybiBkfSx0aGlzLmdldEN0eD1mdW5jdGlvbigpe3JldHVybiBlfSx0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7ZS5jbGVhclJlY3QoYi5zaXplLy0yLGIuc2l6ZS8tMixiLnNpemUsYi5zaXplKX0sdGhpcy5kcmF3PWZ1bmN0aW9uKGEpe2Iuc2NhbGVDb2xvcnx8Yi50cmFja0NvbG9yP2UuZ2V0SW1hZ2VEYXRhJiZlLnB1dEltYWdlRGF0YT9jP2UucHV0SW1hZ2VEYXRhKGMsMCwwKTooaygpLGM9ZS5nZXRJbWFnZURhdGEoMCwwLGIuc2l6ZSpmLGIuc2l6ZSpmKSk6KHRoaXMuY2xlYXIoKSxrKCkpOnRoaXMuY2xlYXIoKSxlLmxpbmVDYXA9Yi5saW5lQ2FwO3ZhciBkO2Q9XCJmdW5jdGlvblwiPT10eXBlb2YgYi5iYXJDb2xvcj9iLmJhckNvbG9yKGEpOmIuYmFyQ29sb3IsaChkLGIubGluZVdpZHRoLGEvMTAwKX0uYmluZCh0aGlzKSx0aGlzLmFuaW1hdGU9ZnVuY3Rpb24oYSxjKXt2YXIgZD1EYXRlLm5vdygpO2Iub25TdGFydChhLGMpO3ZhciBlPWZ1bmN0aW9uKCl7dmFyIGY9TWF0aC5taW4oRGF0ZS5ub3coKS1kLGIuYW5pbWF0ZS5kdXJhdGlvbiksZz1iLmVhc2luZyh0aGlzLGYsYSxjLWEsYi5hbmltYXRlLmR1cmF0aW9uKTt0aGlzLmRyYXcoZyksYi5vblN0ZXAoYSxjLGcpLGY+PWIuYW5pbWF0ZS5kdXJhdGlvbj9iLm9uU3RvcChhLGMpOmooZSl9LmJpbmQodGhpcyk7aihlKX0uYmluZCh0aGlzKX0sYz1mdW5jdGlvbihhLGMpe3ZhciBkPXtiYXJDb2xvcjpcIiNlZjFlMjVcIix0cmFja0NvbG9yOlwiI2Y5ZjlmOVwiLHNjYWxlQ29sb3I6XCIjZGZlMGUwXCIsc2NhbGVMZW5ndGg6NSxsaW5lQ2FwOlwicm91bmRcIixsaW5lV2lkdGg6Myx0cmFja1dpZHRoOnZvaWQgMCxzaXplOjExMCxyb3RhdGU6MCxhbmltYXRlOntkdXJhdGlvbjoxZTMsZW5hYmxlZDohMH0sZWFzaW5nOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGIvPWUvMiwxPmI/ZC8yKmIqYitjOi1kLzIqKC0tYiooYi0yKS0xKStjfSxvblN0YXJ0OmZ1bmN0aW9uKCl7fSxvblN0ZXA6ZnVuY3Rpb24oKXt9LG9uU3RvcDpmdW5jdGlvbigpe319O2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiKWQucmVuZGVyZXI9YjtlbHNle2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBTVkdSZW5kZXJlcil0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgbG9hZCBlaXRoZXIgdGhlIFNWRy0gb3IgdGhlIENhbnZhc1JlbmRlcmVyXCIpO2QucmVuZGVyZXI9U1ZHUmVuZGVyZXJ9dmFyIGU9e30sZj0wLGc9ZnVuY3Rpb24oKXt0aGlzLmVsPWEsdGhpcy5vcHRpb25zPWU7Zm9yKHZhciBiIGluIGQpZC5oYXNPd25Qcm9wZXJ0eShiKSYmKGVbYl09YyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNbYl0/Y1tiXTpkW2JdLFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbYl0mJihlW2JdPWVbYl0uYmluZCh0aGlzKSkpO2UuZWFzaW5nPVwic3RyaW5nXCI9PXR5cGVvZiBlLmVhc2luZyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGpRdWVyeSYmalF1ZXJ5LmlzRnVuY3Rpb24oalF1ZXJ5LmVhc2luZ1tlLmVhc2luZ10pP2pRdWVyeS5lYXNpbmdbZS5lYXNpbmddOmQuZWFzaW5nLFwibnVtYmVyXCI9PXR5cGVvZiBlLmFuaW1hdGUmJihlLmFuaW1hdGU9e2R1cmF0aW9uOmUuYW5pbWF0ZSxlbmFibGVkOiEwfSksXCJib29sZWFuXCIhPXR5cGVvZiBlLmFuaW1hdGV8fGUuYW5pbWF0ZXx8KGUuYW5pbWF0ZT17ZHVyYXRpb246MWUzLGVuYWJsZWQ6ZS5hbmltYXRlfSksdGhpcy5yZW5kZXJlcj1uZXcgZS5yZW5kZXJlcihhLGUpLHRoaXMucmVuZGVyZXIuZHJhdyhmKSxhLmRhdGFzZXQmJmEuZGF0YXNldC5wZXJjZW50P3RoaXMudXBkYXRlKHBhcnNlRmxvYXQoYS5kYXRhc2V0LnBlcmNlbnQpKTphLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBlcmNlbnRcIikmJnRoaXMudXBkYXRlKHBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBlcmNlbnRcIikpKX0uYmluZCh0aGlzKTt0aGlzLnVwZGF0ZT1mdW5jdGlvbihhKXtyZXR1cm4gYT1wYXJzZUZsb2F0KGEpLGUuYW5pbWF0ZS5lbmFibGVkP3RoaXMucmVuZGVyZXIuYW5pbWF0ZShmLGEpOnRoaXMucmVuZGVyZXIuZHJhdyhhKSxmPWEsdGhpc30uYmluZCh0aGlzKSx0aGlzLmRpc2FibGVBbmltYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZS5hbmltYXRlLmVuYWJsZWQ9ITEsdGhpc30sdGhpcy5lbmFibGVBbmltYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZS5hbmltYXRlLmVuYWJsZWQ9ITAsdGhpc30sZygpfX0pOyIsIi8qKlxuICogRWFzeSB0byB1c2UgV2l6YXJkIGxpYnJhcnkgZm9yIEFuZ3VsYXJKU1xuICogQHZlcnNpb24gdjAuNS40IC0gMjAxNS0wOC0yNCAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tZ29udG8vYW5ndWxhci13aXphcmRcbiAqIEBhdXRob3IgTWFydGluIEdvbnRvdm5pa2FzIDxtYXJ0aW5AZ29uLnRvPlxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbmZ1bmN0aW9uIHdpemFyZEJ1dHRvbkRpcmVjdGl2ZShhKXthbmd1bGFyLm1vZHVsZShcIm1nby1hbmd1bGFyLXdpemFyZFwiKS5kaXJlY3RpdmUoYSxmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXBsYWNlOiExLHJlcXVpcmU6XCJed2l6YXJkXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCksYi4kYXBwbHkoZnVuY3Rpb24oKXtiLiRldmFsKGRbYV0pLGVbYS5yZXBsYWNlKFwid3pcIixcIlwiKS50b0xvd2VyQ2FzZSgpXSgpfSl9KX19fSl9YW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZXMtYW5ndWxhcndpemFyZFwiLFtcInN0ZXAuaHRtbFwiLFwid2l6YXJkLmh0bWxcIl0pLGFuZ3VsYXIubW9kdWxlKFwic3RlcC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwic3RlcC5odG1sXCIsJzxzZWN0aW9uIG5nLXNob3c9XCJzZWxlY3RlZFwiIG5nLWNsYXNzPVwie2N1cnJlbnQ6IHNlbGVjdGVkLCBkb25lOiBjb21wbGV0ZWR9XCIgY2xhc3M9XCJzdGVwXCIgbmctdHJhbnNjbHVkZT5cXG48L3NlY3Rpb24+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ3aXphcmQuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcIndpemFyZC5odG1sXCIsJzxkaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJzdGVwc1wiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuICAgIDx1bCBjbGFzcz1cInN0ZXBzLWluZGljYXRvciBzdGVwcy17e2dldEVuYWJsZWRTdGVwcygpLmxlbmd0aH19XCIgbmctaWY9XCIhaGlkZUluZGljYXRvcnNcIj5cXG4gICAgICA8bGkgbmctY2xhc3M9XCJ7ZGVmYXVsdDogIXN0ZXAuY29tcGxldGVkICYmICFzdGVwLnNlbGVjdGVkLCBjdXJyZW50OiBzdGVwLnNlbGVjdGVkICYmICFzdGVwLmNvbXBsZXRlZCwgZG9uZTogc3RlcC5jb21wbGV0ZWQgJiYgIXN0ZXAuc2VsZWN0ZWQsIGVkaXRpbmc6IHN0ZXAuc2VsZWN0ZWQgJiYgc3RlcC5jb21wbGV0ZWR9XCIgbmctcmVwZWF0PVwic3RlcCBpbiBnZXRFbmFibGVkU3RlcHMoKVwiPlxcbiAgICAgICAgPGEgbmctY2xpY2s9XCJnb1RvKHN0ZXApXCI+e3tzdGVwLnRpdGxlIHx8IHN0ZXAud3pUaXRsZX19PC9hPlxcbiAgICAgIDwvbGk+XFxuICAgIDwvdWw+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJtZ28tYW5ndWxhci13aXphcmRcIixbXCJ0ZW1wbGF0ZXMtYW5ndWxhcndpemFyZFwiXSksYW5ndWxhci5tb2R1bGUoXCJtZ28tYW5ndWxhci13aXphcmRcIikuZGlyZWN0aXZlKFwid3pTdGVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxzY29wZTp7d3pUaXRsZTpcIkBcIix0aXRsZTpcIkBcIixjYW5lbnRlcjpcIj1cIixjYW5leGl0OlwiPVwiLGRpc2FibGVkOlwiQD93ekRpc2FibGVkXCJ9LHJlcXVpcmU6XCJed2l6YXJkXCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZXx8XCJzdGVwLmh0bWxcIn0sbGluazpmdW5jdGlvbihhLGIsYyxkKXthLnRpdGxlPWEudGl0bGV8fGEud3pUaXRsZSxkLmFkZFN0ZXAoYSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwibWdvLWFuZ3VsYXItd2l6YXJkXCIpLmRpcmVjdGl2ZShcIndpemFyZFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsc2NvcGU6e2N1cnJlbnRTdGVwOlwiPVwiLG9uRmluaXNoOlwiJlwiLGhpZGVJbmRpY2F0b3JzOlwiPVwiLGVkaXRNb2RlOlwiPVwiLG5hbWU6XCJAXCJ9LHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGV8fFwid2l6YXJkLmh0bWxcIn0sY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkbG9nXCIsXCJXaXphcmRIYW5kbGVyXCIsXCIkcVwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihiKXt2YXIgYyxkO3JldHVybiB2b2lkIDA9PT1iLmNhbmVudGVyPyEwOlwiYm9vbGVhblwiPT10eXBlb2YgYi5jYW5lbnRlcj9iLmNhbmVudGVyOihkPWIuY2FuZW50ZXIoYS5jb250ZXh0KSxhbmd1bGFyLmlzRnVuY3Rpb24oZC50aGVuKT8oYz1lLmRlZmVyKCksZC50aGVuKGZ1bmN0aW9uKGEpe2MucmVzb2x2ZShhKX0pLGMucHJvbWlzZSk6Yi5jYW5lbnRlcihhLmNvbnRleHQpPT09ITApfWZ1bmN0aW9uIGcoYixjKXt2YXIgZCxmO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBiLmNhbmV4aXR8fGEuZ2V0U3RlcE51bWJlcihjKTxhLmN1cnJlbnRTdGVwTnVtYmVyKCk/ITA6XCJib29sZWFuXCI9PXR5cGVvZiBiLmNhbmV4aXQ/Yi5jYW5leGl0OihmPWIuY2FuZXhpdChhLmNvbnRleHQpLGFuZ3VsYXIuaXNGdW5jdGlvbihmLnRoZW4pPyhkPWUuZGVmZXIoKSxmLnRoZW4oZnVuY3Rpb24oYSl7ZC5yZXNvbHZlKGEpfSksZC5wcm9taXNlKTpiLmNhbmV4aXQoYS5jb250ZXh0KT09PSEwKX1mdW5jdGlvbiBoKCl7Xy5lYWNoKGEuZ2V0RW5hYmxlZFN0ZXBzKCksZnVuY3Rpb24oYSl7YS5zZWxlY3RlZD0hMX0pLGEuc2VsZWN0ZWRTdGVwPW51bGx9dmFyIGk9ITA7ZC5hZGRXaXphcmQoYS5uYW1lfHxkLmRlZmF1bHROYW1lLHRoaXMpLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2QucmVtb3ZlV2l6YXJkKGEubmFtZXx8ZC5kZWZhdWx0TmFtZSl9KSxhLnN0ZXBzPVtdLGEuY29udGV4dD17fSxhLiR3YXRjaChcImN1cnJlbnRTdGVwXCIsZnVuY3Rpb24oYil7aWYoYil7dmFyIGM9YS5zZWxlY3RlZFN0ZXAudGl0bGV8fGEuc2VsZWN0ZWRTdGVwLnd6VGl0bGU7YS5zZWxlY3RlZFN0ZXAmJmMhPT1hLmN1cnJlbnRTdGVwJiZhLmdvVG8oXy5maW5kV2hlcmUoYS5nZXRFbmFibGVkU3RlcHMoKSx7dGl0bGU6YS5jdXJyZW50U3RlcH0pKX19KSxhLiR3YXRjaChcIltlZGl0TW9kZSwgc3RlcHMubGVuZ3RoXVwiLGZ1bmN0aW9uKCl7dmFyIGI9YS5lZGl0TW9kZTtfLmlzVW5kZWZpbmVkKGIpfHxfLmlzTnVsbChiKXx8YiYmXy5lYWNoKGEuZ2V0RW5hYmxlZFN0ZXBzKCksZnVuY3Rpb24oYSl7YS5jb21wbGV0ZWQ9ITB9KX0sITApLHRoaXMuYWRkU3RlcD1mdW5jdGlvbihiKXthLnN0ZXBzLnB1c2goYiksMT09PWEuZ2V0RW5hYmxlZFN0ZXBzKCkubGVuZ3RoJiZhLmdvVG8oYS5nZXRFbmFibGVkU3RlcHMoKVswXSl9LHRoaXMuY29udGV4dD1hLmNvbnRleHQsYS5nZXRTdGVwTnVtYmVyPWZ1bmN0aW9uKGIpe3JldHVybiBfLmluZGV4T2YoYS5nZXRFbmFibGVkU3RlcHMoKSxiKSsxfSxhLmdvVG89ZnVuY3Rpb24oYil7aWYoaSloKCksYS5zZWxlY3RlZFN0ZXA9YixfLmlzVW5kZWZpbmVkKGEuY3VycmVudFN0ZXApfHwoYS5jdXJyZW50U3RlcD1iLnRpdGxlfHxiLnd6VGl0bGUpLGIuc2VsZWN0ZWQ9ITAsYS4kZW1pdChcIndpemFyZDpzdGVwQ2hhbmdlZFwiLHtzdGVwOmIsaW5kZXg6Xy5pbmRleE9mKGEuZ2V0RW5hYmxlZFN0ZXBzKCksYil9KSxpPSExO2Vsc2V7dmFyIGM7YS5jdXJyZW50U3RlcE51bWJlcigpPjA/Yz1hLmN1cnJlbnRTdGVwTnVtYmVyKCktMTowPT09YS5jdXJyZW50U3RlcE51bWJlcigpJiYoYz0wKSxlLmFsbChbZyhhLmdldEVuYWJsZWRTdGVwcygpW2NdLGIpLGYoYildKS50aGVuKGZ1bmN0aW9uKGMpe2NbMF0mJmNbMV0mJihoKCksYS5zZWxlY3RlZFN0ZXA9YixfLmlzVW5kZWZpbmVkKGEuY3VycmVudFN0ZXApfHwoYS5jdXJyZW50U3RlcD1iLnRpdGxlfHxiLnd6VGl0bGUpLGIuc2VsZWN0ZWQ9ITAsYS4kZW1pdChcIndpemFyZDpzdGVwQ2hhbmdlZFwiLHtzdGVwOmIsaW5kZXg6Xy5pbmRleE9mKGEuZ2V0RW5hYmxlZFN0ZXBzKCksYil9KSl9KX19LGEuY3VycmVudFN0ZXBOdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gXy5pbmRleE9mKGEuZ2V0RW5hYmxlZFN0ZXBzKCksYS5zZWxlY3RlZFN0ZXApKzF9LGEuZ2V0RW5hYmxlZFN0ZXBzPWZ1bmN0aW9uKCl7cmV0dXJuIF8uZmlsdGVyKGEuc3RlcHMsZnVuY3Rpb24oYSl7cmV0dXJuXCJ0cnVlXCIhPT1hLmRpc2FibGVkfSl9LHRoaXMuY3VycmVudFN0ZXBOdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gYS5jdXJyZW50U3RlcE51bWJlcigpfSx0aGlzLm5leHQ9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRFbmFibGVkU3RlcHMoKSxkPV8uaW5kZXhPZihjLGEuc2VsZWN0ZWRTdGVwKTtpZihhbmd1bGFyLmlzRnVuY3Rpb24oYikpe2lmKCFiKCkpcmV0dXJuO2Q9PT1jLmxlbmd0aC0xP3RoaXMuZmluaXNoKCk6YS5nb1RvKGNbZCsxXSl9Ynx8KGEuc2VsZWN0ZWRTdGVwLmNvbXBsZXRlZD0hMCksZD09PWMubGVuZ3RoLTE/dGhpcy5maW5pc2goKTphLmdvVG8oY1tkKzFdKX0sdGhpcy5nb1RvPWZ1bmN0aW9uKGIpe3ZhciBjLGQ9YS5nZXRFbmFibGVkU3RlcHMoKTtjPV8uaXNOdW1iZXIoYik/ZFtiXTpfLmZpbmRXaGVyZShkLHt0aXRsZTpifSksYS5nb1RvKGMpfSx0aGlzLmZpbmlzaD1mdW5jdGlvbigpe2Eub25GaW5pc2gmJmEub25GaW5pc2goKX0sdGhpcy5wcmV2aW91cz1mdW5jdGlvbigpe3ZhciBiPV8uaW5kZXhPZihhLmdldEVuYWJsZWRTdGVwcygpLGEuc2VsZWN0ZWRTdGVwKTtpZigwPT09Yil0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnbyBiYWNrLiBJdCdzIGFscmVhZHkgaW4gc3RlcCAwXCIpO2EuZ29UbyhhLmdldEVuYWJsZWRTdGVwcygpW2ItMV0pfSx0aGlzLmNhbmNlbD1mdW5jdGlvbigpe3ZhciBiPV8uaW5kZXhPZihhLmdldEVuYWJsZWRTdGVwcygpLGEuc2VsZWN0ZWRTdGVwKTtpZigwPT09Yil0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnbyBiYWNrLiBJdCdzIGFscmVhZHkgaW4gc3RlcCAwXCIpO2EuZ29UbyhhLmdldEVuYWJsZWRTdGVwcygpWzBdKX19XX19KSx3aXphcmRCdXR0b25EaXJlY3RpdmUoXCJ3ek5leHRcIiksd2l6YXJkQnV0dG9uRGlyZWN0aXZlKFwid3pQcmV2aW91c1wiKSx3aXphcmRCdXR0b25EaXJlY3RpdmUoXCJ3ekZpbmlzaFwiKSx3aXphcmRCdXR0b25EaXJlY3RpdmUoXCJ3ekNhbmNlbFwiKSxhbmd1bGFyLm1vZHVsZShcIm1nby1hbmd1bGFyLXdpemFyZFwiKS5mYWN0b3J5KFwiV2l6YXJkSGFuZGxlclwiLGZ1bmN0aW9uKCl7dmFyIGE9e30sYj17fTtyZXR1cm4gYS5kZWZhdWx0TmFtZT1cImRlZmF1bHRXaXphcmRcIixhLmFkZFdpemFyZD1mdW5jdGlvbihhLGMpe2JbYV09Y30sYS5yZW1vdmVXaXphcmQ9ZnVuY3Rpb24oYSl7ZGVsZXRlIGJbYV19LGEud2l6YXJkPWZ1bmN0aW9uKGMpe3ZhciBkPWM7cmV0dXJuIGN8fChkPWEuZGVmYXVsdE5hbWUpLGJbZF19LGF9KTsiLCIhZnVuY3Rpb24oYSxiKXtiW1widHJ1ZVwiXT1hLGZ1bmN0aW9uKGIsYyl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgYT9tb2R1bGUuZXhwb3J0cz1iKCk6Yy5yYW5neT1iKCl9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPXR5cGVvZiBhW2JdO3JldHVybiBjPT11fHwhKGMhPXR8fCFhW2JdKXx8XCJ1bmtub3duXCI9PWN9ZnVuY3Rpb24gYihhLGIpe3JldHVybiEodHlwZW9mIGFbYl0hPXR8fCFhW2JdKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIHR5cGVvZiBhW2JdIT12fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPWMubGVuZ3RoO2QtLTspaWYoIWEoYixjW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmQShhLHopJiZDKGEseSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYihhLFwiYm9keVwiKT9hLmJvZHk6YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF19ZnVuY3Rpb24gZyhiKXt0eXBlb2YgY29uc29sZSE9diYmYShjb25zb2xlLFwibG9nXCIpJiZjb25zb2xlLmxvZyhiKX1mdW5jdGlvbiBoKGEsYil7RiYmYj9hbGVydChhKTpnKGEpfWZ1bmN0aW9uIGkoYSl7SC5pbml0aWFsaXplZD0hMCxILnN1cHBvcnRlZD0hMSxoKFwiUmFuZ3kgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBSZWFzb246IFwiK2EsSC5jb25maWcuYWxlcnRPbkZhaWwpfWZ1bmN0aW9uIGooYSl7aChcIlJhbmd5IHdhcm5pbmc6IFwiK2EsSC5jb25maWcuYWxlcnRPbldhcm4pfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGEubWVzc2FnZXx8YS5kZXNjcmlwdGlvbnx8U3RyaW5nKGEpfWZ1bmN0aW9uIGwoKXtpZihGJiYhSC5pbml0aWFsaXplZCl7dmFyIGIsYz0hMSxkPSExO2EoZG9jdW1lbnQsXCJjcmVhdGVSYW5nZVwiKSYmKGI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxBKGIseCkmJkMoYix3KSYmKGM9ITApKTt2YXIgaD1mKGRvY3VtZW50KTtpZighaHx8XCJib2R5XCIhPWgubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gdm9pZCBpKFwiTm8gYm9keSBlbGVtZW50IGZvdW5kXCIpO2lmKGgmJmEoaCxcImNyZWF0ZVRleHRSYW5nZVwiKSYmKGI9aC5jcmVhdGVUZXh0UmFuZ2UoKSxlKGIpJiYoZD0hMCkpLCFjJiYhZClyZXR1cm4gdm9pZCBpKFwiTmVpdGhlciBSYW5nZSBub3IgVGV4dFJhbmdlIGFyZSBhdmFpbGFibGVcIik7SC5pbml0aWFsaXplZD0hMCxILmZlYXR1cmVzPXtpbXBsZW1lbnRzRG9tUmFuZ2U6YyxpbXBsZW1lbnRzVGV4dFJhbmdlOmR9O3ZhciBqLGw7Zm9yKHZhciBtIGluIEUpKGo9RVttXSlpbnN0YW5jZW9mIHAmJmouaW5pdChqLEgpO2Zvcih2YXIgbj0wLG89Sy5sZW5ndGg7bz5uOysrbil0cnl7S1tuXShIKX1jYXRjaChxKXtsPVwiUmFuZ3kgaW5pdCBsaXN0ZW5lciB0aHJldyBhbiBleGNlcHRpb24uIENvbnRpbnVpbmcuIERldGFpbDogXCIrayhxKSxnKGwpfX19ZnVuY3Rpb24gbShhLGIsYyl7YyYmKGErPVwiIGluIG1vZHVsZSBcIitjLm5hbWUpLEgud2FybihcIkRFUFJFQ0FURUQ6IFwiK2ErXCIgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBcIitiK1wiIGluc3RlYWQuXCIpfWZ1bmN0aW9uIG4oYSxiLGMsZCl7YVtiXT1mdW5jdGlvbigpe3JldHVybiBtKGIsYyxkKSxhW2NdLmFwcGx5KGEsRy50b0FycmF5KGFyZ3VtZW50cykpfX1mdW5jdGlvbiBvKGEpe2E9YXx8d2luZG93LGwoKTtmb3IodmFyIGI9MCxjPUwubGVuZ3RoO2M+YjsrK2IpTFtiXShhKX1mdW5jdGlvbiBwKGEsYixjKXt0aGlzLm5hbWU9YSx0aGlzLmRlcGVuZGVuY2llcz1iLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5zdXBwb3J0ZWQ9ITEsdGhpcy5pbml0aWFsaXplcj1jfWZ1bmN0aW9uIHEoYSxiLGMpe3ZhciBkPW5ldyBwKGEsYixmdW5jdGlvbihiKXtpZighYi5pbml0aWFsaXplZCl7Yi5pbml0aWFsaXplZD0hMDt0cnl7YyhILGIpLGIuc3VwcG9ydGVkPSEwfWNhdGNoKGQpe3ZhciBlPVwiTW9kdWxlICdcIithK1wiJyBmYWlsZWQgdG8gbG9hZDogXCIrayhkKTtnKGUpLGQuc3RhY2smJmcoZC5zdGFjayl9fX0pO3JldHVybiBFW2FdPWQsZH1mdW5jdGlvbiByKCl7fWZ1bmN0aW9uIHMoKXt9dmFyIHQ9XCJvYmplY3RcIix1PVwiZnVuY3Rpb25cIix2PVwidW5kZWZpbmVkXCIsdz1bXCJzdGFydENvbnRhaW5lclwiLFwic3RhcnRPZmZzZXRcIixcImVuZENvbnRhaW5lclwiLFwiZW5kT2Zmc2V0XCIsXCJjb2xsYXBzZWRcIixcImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyXCJdLHg9W1wic2V0U3RhcnRcIixcInNldFN0YXJ0QmVmb3JlXCIsXCJzZXRTdGFydEFmdGVyXCIsXCJzZXRFbmRcIixcInNldEVuZEJlZm9yZVwiLFwic2V0RW5kQWZ0ZXJcIixcImNvbGxhcHNlXCIsXCJzZWxlY3ROb2RlXCIsXCJzZWxlY3ROb2RlQ29udGVudHNcIixcImNvbXBhcmVCb3VuZGFyeVBvaW50c1wiLFwiZGVsZXRlQ29udGVudHNcIixcImV4dHJhY3RDb250ZW50c1wiLFwiY2xvbmVDb250ZW50c1wiLFwiaW5zZXJ0Tm9kZVwiLFwic3Vycm91bmRDb250ZW50c1wiLFwiY2xvbmVSYW5nZVwiLFwidG9TdHJpbmdcIixcImRldGFjaFwiXSx5PVtcImJvdW5kaW5nSGVpZ2h0XCIsXCJib3VuZGluZ0xlZnRcIixcImJvdW5kaW5nVG9wXCIsXCJib3VuZGluZ1dpZHRoXCIsXCJodG1sVGV4dFwiLFwidGV4dFwiXSx6PVtcImNvbGxhcHNlXCIsXCJjb21wYXJlRW5kUG9pbnRzXCIsXCJkdXBsaWNhdGVcIixcIm1vdmVUb0VsZW1lbnRUZXh0XCIsXCJwYXJlbnRFbGVtZW50XCIsXCJzZWxlY3RcIixcInNldEVuZFBvaW50XCIsXCJnZXRCb3VuZGluZ0NsaWVudFJlY3RcIl0sQT1kKGEpLEI9ZChiKSxDPWQoYyksRD1bXS5mb3JFYWNoP2Z1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGIpfTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jOysrYyliKGFbY10sYyl9LEU9e30sRj10eXBlb2Ygd2luZG93IT12JiZ0eXBlb2YgZG9jdW1lbnQhPXYsRz17aXNIb3N0TWV0aG9kOmEsaXNIb3N0T2JqZWN0OmIsaXNIb3N0UHJvcGVydHk6YyxhcmVIb3N0TWV0aG9kczpBLGFyZUhvc3RPYmplY3RzOkIsYXJlSG9zdFByb3BlcnRpZXM6Qyxpc1RleHRSYW5nZTplLGdldEJvZHk6Zixmb3JFYWNoOkR9LEg9e3ZlcnNpb246XCIxLjMuMFwiLGluaXRpYWxpemVkOiExLGlzQnJvd3NlcjpGLHN1cHBvcnRlZDohMCx1dGlsOkcsZmVhdHVyZXM6e30sbW9kdWxlczpFLGNvbmZpZzp7YWxlcnRPbkZhaWw6ITEsYWxlcnRPbldhcm46ITEscHJlZmVyVGV4dFJhbmdlOiExLGF1dG9Jbml0aWFsaXplOnR5cGVvZiByYW5neUF1dG9Jbml0aWFsaXplPT12PyEwOnJhbmd5QXV0b0luaXRpYWxpemV9fTtILmZhaWw9aSxILndhcm49ajt2YXIgSTsoe30pLmhhc093blByb3BlcnR5PyhHLmV4dGVuZD1JPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2Zvcih2YXIgZiBpbiBiKWIuaGFzT3duUHJvcGVydHkoZikmJihkPWFbZl0sZT1iW2ZdLGMmJm51bGwhPT1kJiZcIm9iamVjdFwiPT10eXBlb2YgZCYmbnVsbCE9PWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZJKGQsZSwhMCksYVtmXT1lKTtyZXR1cm4gYi5oYXNPd25Qcm9wZXJ0eShcInRvU3RyaW5nXCIpJiYoYS50b1N0cmluZz1iLnRvU3RyaW5nKSxhfSxHLmNyZWF0ZU9wdGlvbnM9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtyZXR1cm4gSShjLGIpLGEmJkkoYyxhKSxjfSk6aShcImhhc093blByb3BlcnR5IG5vdCBzdXBwb3J0ZWRcIiksRnx8aShcIlJhbmd5IGNhbiBvbmx5IHJ1biBpbiBhIGJyb3dzZXJcIiksZnVuY3Rpb24oKXt2YXIgYTtpZihGKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpO3ZhciBjPVtdLnNsaWNlO3RyeXsxPT1jLmNhbGwoYi5jaGlsZE5vZGVzLDApWzBdLm5vZGVUeXBlJiYoYT1mdW5jdGlvbihhKXtyZXR1cm4gYy5jYWxsKGEsMCl9KX1jYXRjaChkKXt9fWF8fChhPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7KytjKWJbY109YVtjXTtyZXR1cm4gYn0pLEcudG9BcnJheT1hfSgpO3ZhciBKO0YmJihhKGRvY3VtZW50LFwiYWRkRXZlbnRMaXN0ZW5lclwiKT9KPWZ1bmN0aW9uKGEsYixjKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX06YShkb2N1bWVudCxcImF0dGFjaEV2ZW50XCIpP0o9ZnVuY3Rpb24oYSxiLGMpe2EuYXR0YWNoRXZlbnQoXCJvblwiK2IsYyl9OmkoXCJEb2N1bWVudCBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIGFkZEV2ZW50TGlzdGVuZXIgb3IgYXR0YWNoRXZlbnQgbWV0aG9kXCIpLEcuYWRkTGlzdGVuZXI9Sik7dmFyIEs9W107Ry5kZXByZWNhdGlvbk5vdGljZT1tLEcuY3JlYXRlQWxpYXNGb3JEZXByZWNhdGVkTWV0aG9kPW4sSC5pbml0PWwsSC5hZGRJbml0TGlzdGVuZXI9ZnVuY3Rpb24oYSl7SC5pbml0aWFsaXplZD9hKEgpOksucHVzaChhKX07dmFyIEw9W107SC5hZGRTaGltTGlzdGVuZXI9ZnVuY3Rpb24oYSl7TC5wdXNoKGEpfSxGJiYoSC5zaGltPUguY3JlYXRlTWlzc2luZ05hdGl2ZUFwaT1vLG4oSCxcImNyZWF0ZU1pc3NpbmdOYXRpdmVBcGlcIixcInNoaW1cIikpLHAucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz10aGlzLmRlcGVuZGVuY2llc3x8W10sZD0wLGU9Yy5sZW5ndGg7ZT5kOysrZCl7aWYoYj1jW2RdLGE9RVtiXSwhKGEmJmEgaW5zdGFuY2VvZiBwKSl0aHJvdyBuZXcgRXJyb3IoXCJyZXF1aXJlZCBtb2R1bGUgJ1wiK2IrXCInIG5vdCBmb3VuZFwiKTtpZihhLmluaXQoKSwhYS5zdXBwb3J0ZWQpdGhyb3cgbmV3IEVycm9yKFwicmVxdWlyZWQgbW9kdWxlICdcIitiK1wiJyBub3Qgc3VwcG9ydGVkXCIpfXRoaXMuaW5pdGlhbGl6ZXIodGhpcyl9LGZhaWw6ZnVuY3Rpb24oYSl7dGhyb3cgdGhpcy5pbml0aWFsaXplZD0hMCx0aGlzLnN1cHBvcnRlZD0hMSxuZXcgRXJyb3IoYSl9LHdhcm46ZnVuY3Rpb24oYSl7SC53YXJuKFwiTW9kdWxlIFwiK3RoaXMubmFtZStcIjogXCIrYSl9LGRlcHJlY2F0aW9uTm90aWNlOmZ1bmN0aW9uKGEsYil7SC53YXJuKFwiREVQUkVDQVRFRDogXCIrYStcIiBpbiBtb2R1bGUgXCIrdGhpcy5uYW1lK1wiIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgXCIrYitcIiBpbnN0ZWFkXCIpfSxjcmVhdGVFcnJvcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IEVycm9yKFwiRXJyb3IgaW4gUmFuZ3kgXCIrdGhpcy5uYW1lK1wiIG1vZHVsZTogXCIrYSl9fSxILmNyZWF0ZU1vZHVsZT1mdW5jdGlvbihhKXt2YXIgYixjOzI9PWFyZ3VtZW50cy5sZW5ndGg/KGI9YXJndW1lbnRzWzFdLGM9W10pOihiPWFyZ3VtZW50c1syXSxjPWFyZ3VtZW50c1sxXSk7dmFyIGQ9cShhLGMsYik7SC5pbml0aWFsaXplZCYmSC5zdXBwb3J0ZWQmJmQuaW5pdCgpfSxILmNyZWF0ZUNvcmVNb2R1bGU9ZnVuY3Rpb24oYSxiLGMpe3EoYSxiLGMpfSxILlJhbmdlUHJvdG90eXBlPXIsSC5yYW5nZVByb3RvdHlwZT1uZXcgcixILnNlbGVjdGlvblByb3RvdHlwZT1uZXcgcyxILmNyZWF0ZUNvcmVNb2R1bGUoXCJEb21VdGlsXCIsW10sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3ZhciBiO3JldHVybiB0eXBlb2YgYS5uYW1lc3BhY2VVUkk9PUZ8fG51bGw9PT0oYj1hLm5hbWVzcGFjZVVSSSl8fFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPT1ifWZ1bmN0aW9uIGQoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiAxPT1iLm5vZGVUeXBlP2I6bnVsbH1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj0wO2E9YS5wcmV2aW91c1NpYmxpbmc7KSsrYjtyZXR1cm4gYn1mdW5jdGlvbiBmKGEpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDc6Y2FzZSAxMDpyZXR1cm4gMDtjYXNlIDM6Y2FzZSA4OnJldHVybiBhLmxlbmd0aDtkZWZhdWx0OnJldHVybiBhLmNoaWxkTm9kZXMubGVuZ3RofX1mdW5jdGlvbiBnKGEsYil7dmFyIGMsZD1bXTtmb3IoYz1hO2M7Yz1jLnBhcmVudE5vZGUpZC5wdXNoKGMpO2ZvcihjPWI7YztjPWMucGFyZW50Tm9kZSlpZihLKGQsYykpcmV0dXJuIGM7cmV0dXJuIG51bGx9ZnVuY3Rpb24gaChhLGIsYyl7Zm9yKHZhciBkPWM/YjpiLnBhcmVudE5vZGU7ZDspe2lmKGQ9PT1hKXJldHVybiEwO2Q9ZC5wYXJlbnROb2RlfXJldHVybiExfWZ1bmN0aW9uIGkoYSxiKXtyZXR1cm4gaChhLGIsITApfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZCxlPWM/YTphLnBhcmVudE5vZGU7ZTspe2lmKGQ9ZS5wYXJlbnROb2RlLGQ9PT1iKXJldHVybiBlO2U9ZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBrKGEpe3ZhciBiPWEubm9kZVR5cGU7cmV0dXJuIDM9PWJ8fDQ9PWJ8fDg9PWJ9ZnVuY3Rpb24gbChhKXtpZighYSlyZXR1cm4hMTt2YXIgYj1hLm5vZGVUeXBlO3JldHVybiAzPT1ifHw4PT1ifWZ1bmN0aW9uIG0oYSxiKXt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9Yi5wYXJlbnROb2RlO3JldHVybiBjP2QuaW5zZXJ0QmVmb3JlKGEsYyk6ZC5hcHBlbmRDaGlsZChhKSxhfWZ1bmN0aW9uIG4oYSxiLGMpe3ZhciBkPWEuY2xvbmVOb2RlKCExKTtpZihkLmRlbGV0ZURhdGEoMCxiKSxhLmRlbGV0ZURhdGEoYixhLmxlbmd0aC1iKSxtKGQsYSksYylmb3IodmFyIGYsZz0wO2Y9Y1tnKytdOylmLm5vZGU9PWEmJmYub2Zmc2V0PmI/KGYubm9kZT1kLGYub2Zmc2V0LT1iKTpmLm5vZGU9PWEucGFyZW50Tm9kZSYmZi5vZmZzZXQ+ZShhKSYmKytmLm9mZnNldDtyZXR1cm4gZH1mdW5jdGlvbiBvKGEpe2lmKDk9PWEubm9kZVR5cGUpcmV0dXJuIGE7aWYodHlwZW9mIGEub3duZXJEb2N1bWVudCE9RilyZXR1cm4gYS5vd25lckRvY3VtZW50O2lmKHR5cGVvZiBhLmRvY3VtZW50IT1GKXJldHVybiBhLmRvY3VtZW50O2lmKGEucGFyZW50Tm9kZSlyZXR1cm4gbyhhLnBhcmVudE5vZGUpO3Rocm93IGIuY3JlYXRlRXJyb3IoXCJnZXREb2N1bWVudDogbm8gZG9jdW1lbnQgZm91bmQgZm9yIG5vZGVcIil9ZnVuY3Rpb24gcChhKXt2YXIgYz1vKGEpO2lmKHR5cGVvZiBjLmRlZmF1bHRWaWV3IT1GKXJldHVybiBjLmRlZmF1bHRWaWV3O2lmKHR5cGVvZiBjLnBhcmVudFdpbmRvdyE9RilyZXR1cm4gYy5wYXJlbnRXaW5kb3c7dGhyb3cgYi5jcmVhdGVFcnJvcihcIkNhbm5vdCBnZXQgYSB3aW5kb3cgb2JqZWN0IGZvciBub2RlXCIpfWZ1bmN0aW9uIHEoYSl7aWYodHlwZW9mIGEuY29udGVudERvY3VtZW50IT1GKXJldHVybiBhLmNvbnRlbnREb2N1bWVudDtpZih0eXBlb2YgYS5jb250ZW50V2luZG93IT1GKXJldHVybiBhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7dGhyb3cgYi5jcmVhdGVFcnJvcihcImdldElmcmFtZURvY3VtZW50OiBObyBEb2N1bWVudCBvYmplY3QgZm91bmQgZm9yIGlmcmFtZSBlbGVtZW50XCIpfWZ1bmN0aW9uIHIoYSl7aWYodHlwZW9mIGEuY29udGVudFdpbmRvdyE9RilyZXR1cm4gYS5jb250ZW50V2luZG93O2lmKHR5cGVvZiBhLmNvbnRlbnREb2N1bWVudCE9RilyZXR1cm4gYS5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7dGhyb3cgYi5jcmVhdGVFcnJvcihcImdldElmcmFtZVdpbmRvdzogTm8gV2luZG93IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1lbnRcIil9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gYSYmRy5pc0hvc3RNZXRob2QoYSxcInNldFRpbWVvdXRcIikmJkcuaXNIb3N0T2JqZWN0KGEsXCJkb2N1bWVudFwiKX1mdW5jdGlvbiB0KGEsYixjKXt2YXIgZDtpZihhP0cuaXNIb3N0UHJvcGVydHkoYSxcIm5vZGVUeXBlXCIpP2Q9MT09YS5ub2RlVHlwZSYmXCJpZnJhbWVcIj09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/cShhKTpvKGEpOnMoYSkmJihkPWEuZG9jdW1lbnQpOmQ9ZG9jdW1lbnQsIWQpdGhyb3cgYi5jcmVhdGVFcnJvcihjK1wiKCk6IFBhcmFtZXRlciBtdXN0IGJlIGEgV2luZG93IG9iamVjdCBvciBET00gbm9kZVwiKTtyZXR1cm4gZH1mdW5jdGlvbiB1KGEpe2Zvcih2YXIgYjtiPWEucGFyZW50Tm9kZTspYT1iO3JldHVybiBhfWZ1bmN0aW9uIHYoYSxjLGQsZil7dmFyIGgsaSxrLGwsbTtpZihhPT1kKXJldHVybiBjPT09Zj8wOmY+Yz8tMToxO2lmKGg9aihkLGEsITApKXJldHVybiBjPD1lKGgpPy0xOjE7aWYoaD1qKGEsZCwhMCkpcmV0dXJuIGUoaCk8Zj8tMToxO2lmKGk9ZyhhLGQpLCFpKXRocm93IG5ldyBFcnJvcihcImNvbXBhcmVQb2ludHMgZXJyb3I6IG5vZGVzIGhhdmUgbm8gY29tbW9uIGFuY2VzdG9yXCIpO2lmKGs9YT09PWk/aTpqKGEsaSwhMCksbD1kPT09aT9pOmooZCxpLCEwKSxrPT09bCl0aHJvdyBiLmNyZWF0ZUVycm9yKFwiY29tcGFyZVBvaW50cyBnb3QgdG8gY2FzZSA0IGFuZCBjaGlsZEEgYW5kIGNoaWxkQiBhcmUgdGhlIHNhbWUhXCIpO2ZvcihtPWkuZmlyc3RDaGlsZDttOyl7aWYobT09PWspcmV0dXJuLTE7aWYobT09PWwpcmV0dXJuIDE7bT1tLm5leHRTaWJsaW5nfX1mdW5jdGlvbiB3KGEpe3ZhciBiO3RyeXtyZXR1cm4gYj1hLnBhcmVudE5vZGUsITF9Y2F0Y2goYyl7cmV0dXJuITB9fWZ1bmN0aW9uIHgoYSl7aWYoIWEpcmV0dXJuXCJbTm8gbm9kZV1cIjtpZihMJiZ3KGEpKXJldHVyblwiW0Jyb2tlbiBub2RlXVwiO2lmKGsoYSkpcmV0dXJuJ1wiJythLmRhdGErJ1wiJztpZigxPT1hLm5vZGVUeXBlKXt2YXIgYj1hLmlkPycgaWQ9XCInK2EuaWQrJ1wiJzpcIlwiO3JldHVyblwiPFwiK2Eubm9kZU5hbWUrYitcIj5baW5kZXg6XCIrZShhKStcIixsZW5ndGg6XCIrYS5jaGlsZE5vZGVzLmxlbmd0aCtcIl1bXCIrKGEuaW5uZXJIVE1MfHxcIltpbm5lckhUTUwgbm90IHN1cHBvcnRlZF1cIikuc2xpY2UoMCwyNSkrXCJdXCJ9cmV0dXJuIGEubm9kZU5hbWV9ZnVuY3Rpb24geShhKXtmb3IodmFyIGIsYz1vKGEpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiPWEuZmlyc3RDaGlsZDspYy5hcHBlbmRDaGlsZChiKTtyZXR1cm4gY31mdW5jdGlvbiB6KGEsYixjKXt2YXIgZD1IKGEpLGU9YS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY29udGVudEVkaXRhYmxlPVwiXCIrISFjLGImJihlLmlubmVySFRNTD1iKTt2YXIgZj1kLmZpcnN0Q2hpbGQ7cmV0dXJuIGY/ZC5pbnNlcnRCZWZvcmUoZSxmKTpkLmFwcGVuZENoaWxkKGUpLGV9ZnVuY3Rpb24gQShhKXtyZXR1cm4gYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfWZ1bmN0aW9uIEIoYSl7dGhpcy5yb290PWEsdGhpcy5fbmV4dD1hfWZ1bmN0aW9uIEMoYSl7cmV0dXJuIG5ldyBCKGEpfWZ1bmN0aW9uIEQoYSxiKXt0aGlzLm5vZGU9YSx0aGlzLm9mZnNldD1ifWZ1bmN0aW9uIEUoYSl7dGhpcy5jb2RlPXRoaXNbYV0sdGhpcy5jb2RlTmFtZT1hLHRoaXMubWVzc2FnZT1cIkRPTUV4Y2VwdGlvbjogXCIrdGhpcy5jb2RlTmFtZX12YXIgRj1cInVuZGVmaW5lZFwiLEc9YS51dGlsLEg9Ry5nZXRCb2R5O0cuYXJlSG9zdE1ldGhvZHMoZG9jdW1lbnQsW1wiY3JlYXRlRG9jdW1lbnRGcmFnbWVudFwiLFwiY3JlYXRlRWxlbWVudFwiLFwiY3JlYXRlVGV4dE5vZGVcIl0pfHxiLmZhaWwoXCJkb2N1bWVudCBtaXNzaW5nIGEgTm9kZSBjcmVhdGlvbiBtZXRob2RcIiksRy5pc0hvc3RNZXRob2QoZG9jdW1lbnQsXCJnZXRFbGVtZW50c0J5VGFnTmFtZVwiKXx8Yi5mYWlsKFwiZG9jdW1lbnQgbWlzc2luZyBnZXRFbGVtZW50c0J5VGFnTmFtZSBtZXRob2RcIik7dmFyIEk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtHLmFyZUhvc3RNZXRob2RzKEksW1wiaW5zZXJ0QmVmb3JlXCIsXCJhcHBlbmRDaGlsZFwiLFwiY2xvbmVOb2RlXCJdfHwhRy5hcmVIb3N0T2JqZWN0cyhJLFtcInByZXZpb3VzU2libGluZ1wiLFwibmV4dFNpYmxpbmdcIixcImNoaWxkTm9kZXNcIixcInBhcmVudE5vZGVcIl0pKXx8Yi5mYWlsKFwiSW5jb21wbGV0ZSBFbGVtZW50IGltcGxlbWVudGF0aW9uXCIpLEcuaXNIb3N0UHJvcGVydHkoSSxcImlubmVySFRNTFwiKXx8Yi5mYWlsKFwiRWxlbWVudCBpcyBtaXNzaW5nIGlubmVySFRNTCBwcm9wZXJ0eVwiKTt2YXIgSj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInRlc3RcIik7Ry5hcmVIb3N0TWV0aG9kcyhKLFtcInNwbGl0VGV4dFwiLFwiZGVsZXRlRGF0YVwiLFwiaW5zZXJ0RGF0YVwiLFwiYXBwZW5kRGF0YVwiLFwiY2xvbmVOb2RlXCJdfHwhRy5hcmVIb3N0T2JqZWN0cyhJLFtcInByZXZpb3VzU2libGluZ1wiLFwibmV4dFNpYmxpbmdcIixcImNoaWxkTm9kZXNcIixcInBhcmVudE5vZGVcIl0pfHwhRy5hcmVIb3N0UHJvcGVydGllcyhKLFtcImRhdGFcIl0pKXx8Yi5mYWlsKFwiSW5jb21wbGV0ZSBUZXh0IE5vZGUgaW1wbGVtZW50YXRpb25cIik7dmFyIEs9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdPT09YilyZXR1cm4hMDtyZXR1cm4hMX0sTD0hMTshZnVuY3Rpb24oKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYlwiKTtiLmlubmVySFRNTD1cIjFcIjt2YXIgYz1iLmZpcnN0Q2hpbGQ7Yi5pbm5lckhUTUw9XCI8YnIgLz5cIixMPXcoYyksYS5mZWF0dXJlcy5jcmFzaHlUZXh0Tm9kZXM9TH0oKTt2YXIgTTt0eXBlb2Ygd2luZG93LmdldENvbXB1dGVkU3R5bGUhPUY/TT1mdW5jdGlvbihhLGIpe3JldHVybiBwKGEpLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKVtiXX06dHlwZW9mIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUhPUY/TT1mdW5jdGlvbihhLGIpe3JldHVybiBhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZVtiXTpcIlwifTpiLmZhaWwoXCJObyBtZWFucyBvZiBvYnRhaW5pbmcgY29tcHV0ZWQgc3R5bGUgcHJvcGVydGllcyBmb3VuZFwiKSxCLnByb3RvdHlwZT17X2N1cnJlbnQ6bnVsbCxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dDtpZih0aGlzLl9jdXJyZW50KWlmKGE9Yy5maXJzdENoaWxkKXRoaXMuX25leHQ9YTtlbHNle2ZvcihiPW51bGw7YyE9PXRoaXMucm9vdCYmIShiPWMubmV4dFNpYmxpbmcpOyljPWMucGFyZW50Tm9kZTt0aGlzLl9uZXh0PWJ9cmV0dXJuIHRoaXMuX2N1cnJlbnR9LGRldGFjaDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dD10aGlzLnJvb3Q9bnVsbH19LEQucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuISFhJiZ0aGlzLm5vZGU9PT1hLm5vZGUmJnRoaXMub2Zmc2V0PT1hLm9mZnNldH0saW5zcGVjdDpmdW5jdGlvbigpe3JldHVyblwiW0RvbVBvc2l0aW9uKFwiK3godGhpcy5ub2RlKStcIjpcIit0aGlzLm9mZnNldCtcIildXCJ9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zcGVjdCgpfX0sRS5wcm90b3R5cGU9e0lOREVYX1NJWkVfRVJSOjEsSElFUkFSQ0hZX1JFUVVFU1RfRVJSOjMsV1JPTkdfRE9DVU1FTlRfRVJSOjQsTk9fTU9ESUZJQ0FUSU9OX0FMTE9XRURfRVJSOjcsTk9UX0ZPVU5EX0VSUjo4LE5PVF9TVVBQT1JURURfRVJSOjksSU5WQUxJRF9TVEFURV9FUlI6MTEsSU5WQUxJRF9OT0RFX1RZUEVfRVJSOjI0fSxFLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2V9LGEuZG9tPXthcnJheUNvbnRhaW5zOkssaXNIdG1sTmFtZXNwYWNlOmMscGFyZW50RWxlbWVudDpkLGdldE5vZGVJbmRleDplLGdldE5vZGVMZW5ndGg6ZixnZXRDb21tb25BbmNlc3RvcjpnLGlzQW5jZXN0b3JPZjpoLGlzT3JJc0FuY2VzdG9yT2Y6aSxnZXRDbG9zZXN0QW5jZXN0b3JJbjpqLGlzQ2hhcmFjdGVyRGF0YU5vZGU6ayxpc1RleHRPckNvbW1lbnROb2RlOmwsaW5zZXJ0QWZ0ZXI6bSxzcGxpdERhdGFOb2RlOm4sZ2V0RG9jdW1lbnQ6byxnZXRXaW5kb3c6cCxnZXRJZnJhbWVXaW5kb3c6cixnZXRJZnJhbWVEb2N1bWVudDpxLGdldEJvZHk6SCxpc1dpbmRvdzpzLGdldENvbnRlbnREb2N1bWVudDp0LGdldFJvb3RDb250YWluZXI6dSxjb21wYXJlUG9pbnRzOnYsaXNCcm9rZW5Ob2RlOncsaW5zcGVjdE5vZGU6eCxnZXRDb21wdXRlZFN0eWxlUHJvcGVydHk6TSxjcmVhdGVUZXN0RWxlbWVudDp6LHJlbW92ZU5vZGU6QSxmcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW46eSxjcmVhdGVJdGVyYXRvcjpDLERvbVBvc2l0aW9uOkR9LGEuRE9NRXhjZXB0aW9uPUV9KSxILmNyZWF0ZUNvcmVNb2R1bGUoXCJEb21SYW5nZVwiLFtcIkRvbVV0aWxcIl0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7cmV0dXJuIDMhPWEubm9kZVR5cGUmJihQKGEsYi5zdGFydENvbnRhaW5lcil8fFAoYSxiLmVuZENvbnRhaW5lcikpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEuZG9jdW1lbnR8fFEoYS5zdGFydENvbnRhaW5lcil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gVyhhLnN0YXJ0Q29udGFpbmVyKX1mdW5jdGlvbiBmKGEpe3JldHVybiBuZXcgTChhLnBhcmVudE5vZGUsTyhhKSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbmV3IEwoYS5wYXJlbnROb2RlLE8oYSkrMSl9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9MTE9PWEubm9kZVR5cGU/YS5maXJzdENoaWxkOmE7cmV0dXJuIE4oYik/Yz09Yi5sZW5ndGg/Si5pbnNlcnRBZnRlcihhLGIpOmIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwwPT1jP2I6UyhiLGMpKTpjPj1iLmNoaWxkTm9kZXMubGVuZ3RoP2IuYXBwZW5kQ2hpbGQoYSk6Yi5pbnNlcnRCZWZvcmUoYSxiLmNoaWxkTm9kZXNbY10pLGR9ZnVuY3Rpb24gaShhLGIsYyl7aWYoeihhKSx6KGIpLGQoYikhPWQoYSkpdGhyb3cgbmV3IE0oXCJXUk9OR19ET0NVTUVOVF9FUlJcIik7dmFyIGU9UihhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQsYi5lbmRDb250YWluZXIsYi5lbmRPZmZzZXQpLGY9UihhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCxiLnN0YXJ0Q29udGFpbmVyLGIuc3RhcnRPZmZzZXQpO3JldHVybiBjPzA+PWUmJmY+PTA6MD5lJiZmPjB9ZnVuY3Rpb24gaihhKXtmb3IodmFyIGIsYyxlLGY9ZChhLnJhbmdlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yz1hLm5leHQoKTspe2lmKGI9YS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpLGM9Yy5jbG9uZU5vZGUoIWIpLGImJihlPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksYy5hcHBlbmRDaGlsZChqKGUpKSxlLmRldGFjaCgpKSwxMD09Yy5ub2RlVHlwZSl0aHJvdyBuZXcgTShcIkhJRVJBUkNIWV9SRVFVRVNUX0VSUlwiKTtmLmFwcGVuZENoaWxkKGMpfXJldHVybiBmfWZ1bmN0aW9uIGsoYSxiLGMpe3ZhciBkLGU7Yz1jfHx7c3RvcDohMX07Zm9yKHZhciBmLGc7Zj1hLm5leHQoKTspaWYoYS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpKXtpZihiKGYpPT09ITEpcmV0dXJuIHZvaWQoYy5zdG9wPSEwKTtpZihnPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksayhnLGIsYyksZy5kZXRhY2goKSxjLnN0b3ApcmV0dXJufWVsc2UgZm9yKGQ9Si5jcmVhdGVJdGVyYXRvcihmKTtlPWQubmV4dCgpOylpZihiKGUpPT09ITEpcmV0dXJuIHZvaWQoYy5zdG9wPSEwKX1mdW5jdGlvbiBsKGEpe2Zvcih2YXIgYjthLm5leHQoKTspYS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpPyhiPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksbChiKSxiLmRldGFjaCgpKTphLnJlbW92ZSgpfWZ1bmN0aW9uIG0oYSl7Zm9yKHZhciBiLGMsZT1kKGEucmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiPWEubmV4dCgpOyl7aWYoYS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpPyhiPWIuY2xvbmVOb2RlKCExKSxjPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksYi5hcHBlbmRDaGlsZChtKGMpKSxjLmRldGFjaCgpKTphLnJlbW92ZSgpLDEwPT1iLm5vZGVUeXBlKXRocm93IG5ldyBNKFwiSElFUkFSQ0hZX1JFUVVFU1RfRVJSXCIpO2UuYXBwZW5kQ2hpbGQoYil9cmV0dXJuIGV9ZnVuY3Rpb24gbihhLGIsYyl7dmFyIGQsZT0hKCFifHwhYi5sZW5ndGgpLGY9ISFjO2UmJihkPW5ldyBSZWdFeHAoXCJeKFwiK2Iuam9pbihcInxcIikrXCIpJFwiKSk7dmFyIGc9W107cmV0dXJuIGsobmV3IHAoYSwhMSksZnVuY3Rpb24oYil7aWYoIShlJiYhZC50ZXN0KGIubm9kZVR5cGUpfHxmJiYhYyhiKSkpe3ZhciBoPWEuc3RhcnRDb250YWluZXI7aWYoYiE9aHx8IU4oaCl8fGEuc3RhcnRPZmZzZXQhPWgubGVuZ3RoKXt2YXIgaT1hLmVuZENvbnRhaW5lcjtiPT1pJiZOKGkpJiYwPT1hLmVuZE9mZnNldHx8Zy5wdXNoKGIpfX19KSxnfWZ1bmN0aW9uIG8oYSl7dmFyIGI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0TmFtZT9cIlJhbmdlXCI6YS5nZXROYW1lKCk7cmV0dXJuXCJbXCIrYitcIihcIitKLmluc3BlY3ROb2RlKGEuc3RhcnRDb250YWluZXIpK1wiOlwiK2Euc3RhcnRPZmZzZXQrXCIsIFwiK0ouaW5zcGVjdE5vZGUoYS5lbmRDb250YWluZXIpK1wiOlwiK2EuZW5kT2Zmc2V0K1wiKV1cIn1mdW5jdGlvbiBwKGEsYil7aWYodGhpcy5yYW5nZT1hLHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2Rlcz1iLCFhLmNvbGxhcHNlZCl7dGhpcy5zYz1hLnN0YXJ0Q29udGFpbmVyLHRoaXMuc289YS5zdGFydE9mZnNldCx0aGlzLmVjPWEuZW5kQ29udGFpbmVyLHRoaXMuZW89YS5lbmRPZmZzZXQ7dmFyIGM9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjt0aGlzLnNjPT09dGhpcy5lYyYmTih0aGlzLnNjKT8odGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFOb2RlPSEwLHRoaXMuX2ZpcnN0PXRoaXMuX2xhc3Q9dGhpcy5fbmV4dD10aGlzLnNjKToodGhpcy5fZmlyc3Q9dGhpcy5fbmV4dD10aGlzLnNjIT09Y3x8Tih0aGlzLnNjKT9UKHRoaXMuc2MsYywhMCk6dGhpcy5zYy5jaGlsZE5vZGVzW3RoaXMuc29dLHRoaXMuX2xhc3Q9dGhpcy5lYyE9PWN8fE4odGhpcy5lYyk/VCh0aGlzLmVjLGMsITApOnRoaXMuZWMuY2hpbGROb2Rlc1t0aGlzLmVvLTFdKX19ZnVuY3Rpb24gcShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtmb3IodmFyIGQsZT1jP2I6Yi5wYXJlbnROb2RlO2U7KXtpZihkPWUubm9kZVR5cGUsVihhLGQpKXJldHVybiBlO2U9ZS5wYXJlbnROb2RlfXJldHVybiBudWxsfX1mdW5jdGlvbiByKGEsYil7aWYoZWEoYSxiKSl0aHJvdyBuZXcgTShcIklOVkFMSURfTk9ERV9UWVBFX0VSUlwiKX1mdW5jdGlvbiBzKGEsYil7aWYoIVYoYixhLm5vZGVUeXBlKSl0aHJvdyBuZXcgTShcIklOVkFMSURfTk9ERV9UWVBFX0VSUlwiKX1mdW5jdGlvbiB0KGEsYil7aWYoMD5ifHxiPihOKGEpP2EubGVuZ3RoOmEuY2hpbGROb2Rlcy5sZW5ndGgpKXRocm93IG5ldyBNKFwiSU5ERVhfU0laRV9FUlJcIil9ZnVuY3Rpb24gdShhLGIpe2lmKGNhKGEsITApIT09Y2EoYiwhMCkpdGhyb3cgbmV3IE0oXCJXUk9OR19ET0NVTUVOVF9FUlJcIil9ZnVuY3Rpb24gdihhKXtpZihkYShhLCEwKSl0aHJvdyBuZXcgTShcIk5PX01PRElGSUNBVElPTl9BTExPV0VEX0VSUlwiKX1mdW5jdGlvbiB3KGEsYil7aWYoIWEpdGhyb3cgbmV3IE0oYil9ZnVuY3Rpb24geChhLGIpe3JldHVybiBiPD0oTihhKT9hLmxlbmd0aDphLmNoaWxkTm9kZXMubGVuZ3RoKX1mdW5jdGlvbiB5KGEpe3JldHVybiEhYS5zdGFydENvbnRhaW5lciYmISFhLmVuZENvbnRhaW5lciYmIShYJiYoSi5pc0Jyb2tlbk5vZGUoYS5zdGFydENvbnRhaW5lcil8fEouaXNCcm9rZW5Ob2RlKGEuZW5kQ29udGFpbmVyKSkpJiZXKGEuc3RhcnRDb250YWluZXIpPT1XKGEuZW5kQ29udGFpbmVyKSYmeChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpJiZ4KGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KX1mdW5jdGlvbiB6KGEpe2lmKCF5KGEpKXRocm93IG5ldyBFcnJvcihcIlJhbmdlIGVycm9yOiBSYW5nZSBpcyBub3QgdmFsaWQuIFRoaXMgdXN1YWxseSBoYXBwZW5zIGFmdGVyIERPTSBtdXRhdGlvbi4gUmFuZ2U6IChcIithLmluc3BlY3QoKStcIilcIil9ZnVuY3Rpb24gQShhLGIpe3ooYSk7dmFyIGM9YS5zdGFydENvbnRhaW5lcixkPWEuc3RhcnRPZmZzZXQsZT1hLmVuZENvbnRhaW5lcixmPWEuZW5kT2Zmc2V0LGc9Yz09PWU7TihlKSYmZj4wJiZmPGUubGVuZ3RoJiZTKGUsZixiKSxOKGMpJiZkPjAmJmQ8Yy5sZW5ndGgmJihjPVMoYyxkLGIpLGc/KGYtPWQsZT1jKTplPT1jLnBhcmVudE5vZGUmJmY+PU8oYykmJmYrKyxkPTApLGEuc2V0U3RhcnRBbmRFbmQoYyxkLGUsZil9ZnVuY3Rpb24gQihhKXt6KGEpO3ZhciBiPWEuY29tbW9uQW5jZXN0b3JDb250YWluZXIucGFyZW50Tm9kZS5jbG9uZU5vZGUoITEpO3JldHVybiBiLmFwcGVuZENoaWxkKGEuY2xvbmVDb250ZW50cygpKSxiLmlubmVySFRNTH1mdW5jdGlvbiBDKGEpe2EuU1RBUlRfVE9fU1RBUlQ9a2EsYS5TVEFSVF9UT19FTkQ9bGEsYS5FTkRfVE9fRU5EPW1hLGEuRU5EX1RPX1NUQVJUPW5hLGEuTk9ERV9CRUZPUkU9b2EsYS5OT0RFX0FGVEVSPXBhLGEuTk9ERV9CRUZPUkVfQU5EX0FGVEVSPXFhLGEuTk9ERV9JTlNJREU9cmF9ZnVuY3Rpb24gRChhKXtDKGEpLEMoYS5wcm90b3R5cGUpfWZ1bmN0aW9uIEUoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXt6KHRoaXMpO3ZhciBjLGQsZT10aGlzLnN0YXJ0Q29udGFpbmVyLGY9dGhpcy5zdGFydE9mZnNldCxoPXRoaXMuY29tbW9uQW5jZXN0b3JDb250YWluZXIsaT1uZXcgcCh0aGlzLCEwKTtlIT09aCYmKGM9VChlLGgsITApLGQ9ZyhjKSxlPWQubm9kZSxmPWQub2Zmc2V0KSxrKGksdiksaS5yZXNldCgpO3ZhciBqPWEoaSk7cmV0dXJuIGkuZGV0YWNoKCksYih0aGlzLGUsZixlLGYpLGp9fWZ1bmN0aW9uIEYoYixkKXtmdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3MoYyxaKSxzKFcoYyksJCk7dmFyIGQ9KGE/ZjpnKShjKTsoYj9oOmkpKHRoaXMsZC5ub2RlLGQub2Zmc2V0KX19ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGU9YS5lbmRDb250YWluZXIsZj1hLmVuZE9mZnNldDsoYiE9PWEuc3RhcnRDb250YWluZXJ8fGMhPT1hLnN0YXJ0T2Zmc2V0KSYmKChXKGIpIT1XKGUpfHwxPT1SKGIsYyxlLGYpKSYmKGU9YixmPWMpLGQoYSxiLGMsZSxmKSl9ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGU9YS5zdGFydENvbnRhaW5lcixmPWEuc3RhcnRPZmZzZXQ7KGIhPT1hLmVuZENvbnRhaW5lcnx8YyE9PWEuZW5kT2Zmc2V0KSYmKChXKGIpIT1XKGUpfHwtMT09UihiLGMsZSxmKSkmJihlPWIsZj1jKSxkKGEsZSxmLGIsYykpfXZhciBqPWZ1bmN0aW9uKCl7fTtqLnByb3RvdHlwZT1hLnJhbmdlUHJvdG90eXBlLGIucHJvdG90eXBlPW5ldyBqLEsuZXh0ZW5kKGIucHJvdG90eXBlLHtzZXRTdGFydDpmdW5jdGlvbihhLGIpe3IoYSwhMCksdChhLGIpLGgodGhpcyxhLGIpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXtyKGEsITApLHQoYSxiKSxpKHRoaXMsYSxiKX0sc2V0U3RhcnRBbmRFbmQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMsYj1hWzBdLGM9YVsxXSxlPWIsZj1jO3N3aXRjaChhLmxlbmd0aCl7Y2FzZSAzOmY9YVsyXTticmVhaztjYXNlIDQ6ZT1hWzJdLGY9YVszXX1kKHRoaXMsYixjLGUsZil9LHNldEJvdW5kYXJ5OmZ1bmN0aW9uKGEsYixjKXt0aGlzW1wic2V0XCIrKGM/XCJTdGFydFwiOlwiRW5kXCIpXShhLGIpfSxzZXRTdGFydEJlZm9yZTplKCEwLCEwKSxzZXRTdGFydEFmdGVyOmUoITEsITApLHNldEVuZEJlZm9yZTplKCEwLCExKSxzZXRFbmRBZnRlcjplKCExLCExKSxjb2xsYXBzZTpmdW5jdGlvbihhKXt6KHRoaXMpLGE/ZCh0aGlzLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCx0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpOmQodGhpcyx0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCx0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXtyKGEsITApLGQodGhpcyxhLDAsYSxVKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXtyKGEsITEpLHMoYSxaKTt2YXIgYj1mKGEpLGM9ZyhhKTtkKHRoaXMsYi5ub2RlLGIub2Zmc2V0LGMubm9kZSxjLm9mZnNldCl9LGV4dHJhY3RDb250ZW50czpFKG0sZCksZGVsZXRlQ29udGVudHM6RShsLGQpLGNhblN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oKXt6KHRoaXMpLHYodGhpcy5zdGFydENvbnRhaW5lciksdih0aGlzLmVuZENvbnRhaW5lcik7dmFyIGE9bmV3IHAodGhpcywhMCksYj1hLl9maXJzdCYmYyhhLl9maXJzdCx0aGlzKXx8YS5fbGFzdCYmYyhhLl9sYXN0LHRoaXMpO3JldHVybiBhLmRldGFjaCgpLCFifSxzcGxpdEJvdW5kYXJpZXM6ZnVuY3Rpb24oKXtBKHRoaXMpfSxzcGxpdEJvdW5kYXJpZXNQcmVzZXJ2aW5nUG9zaXRpb25zOmZ1bmN0aW9uKGEpe0EodGhpcyxhKX0sbm9ybWFsaXplQm91bmRhcmllczpmdW5jdGlvbigpe3oodGhpcyk7dmFyIGEsYj10aGlzLnN0YXJ0Q29udGFpbmVyLGM9dGhpcy5zdGFydE9mZnNldCxlPXRoaXMuZW5kQ29udGFpbmVyLGY9dGhpcy5lbmRPZmZzZXQsZz1mdW5jdGlvbihhKXt2YXIgYj1hLm5leHRTaWJsaW5nO2ImJmIubm9kZVR5cGU9PWEubm9kZVR5cGUmJihlPWEsZj1hLmxlbmd0aCxhLmFwcGVuZERhdGEoYi5kYXRhKSxZKGIpKX0saD1mdW5jdGlvbihhKXt2YXIgZD1hLnByZXZpb3VzU2libGluZztpZihkJiZkLm5vZGVUeXBlPT1hLm5vZGVUeXBlKXtiPWE7dmFyIGc9YS5sZW5ndGg7aWYoYz1kLmxlbmd0aCxhLmluc2VydERhdGEoMCxkLmRhdGEpLFkoZCksYj09ZSlmKz1jLGU9YjtlbHNlIGlmKGU9PWEucGFyZW50Tm9kZSl7dmFyIGg9TyhhKTtmPT1oPyhlPWEsZj1nKTpmPmgmJmYtLX19fSxpPSEwO2lmKE4oZSkpZj09ZS5sZW5ndGg/ZyhlKTowPT1mJiYoYT1lLnByZXZpb3VzU2libGluZyxhJiZhLm5vZGVUeXBlPT1lLm5vZGVUeXBlJiYoZj1hLmxlbmd0aCxiPT1lJiYoaT0hMSksYS5hcHBlbmREYXRhKGUuZGF0YSksWShlKSxlPWEpKTtlbHNle2lmKGY+MCl7dmFyIGo9ZS5jaGlsZE5vZGVzW2YtMV07aiYmTihqKSYmZyhqKX1pPSF0aGlzLmNvbGxhcHNlZH1pZihpKXtpZihOKGIpKTA9PWM/aChiKTpjPT1iLmxlbmd0aCYmKGE9Yi5uZXh0U2libGluZyxhJiZhLm5vZGVUeXBlPT1iLm5vZGVUeXBlJiYoZT09YSYmKGU9YixmKz1iLmxlbmd0aCksYi5hcHBlbmREYXRhKGEuZGF0YSksWShhKSkpO2Vsc2UgaWYoYzxiLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgaz1iLmNoaWxkTm9kZXNbY107ayYmTihrKSYmaChrKX19ZWxzZSBiPWUsYz1mO2QodGhpcyxiLGMsZSxmKX0sY29sbGFwc2VUb1BvaW50OmZ1bmN0aW9uKGEsYil7cihhLCEwKSx0KGEsYiksdGhpcy5zZXRTdGFydEFuZEVuZChhLGIpfX0pLEQoYil9ZnVuY3Rpb24gRyhhKXthLmNvbGxhcHNlZD1hLnN0YXJ0Q29udGFpbmVyPT09YS5lbmRDb250YWluZXImJmEuc3RhcnRPZmZzZXQ9PT1hLmVuZE9mZnNldCxhLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyPWEuY29sbGFwc2VkP2Euc3RhcnRDb250YWluZXI6Si5nZXRDb21tb25BbmNlc3RvcihhLnN0YXJ0Q29udGFpbmVyLGEuZW5kQ29udGFpbmVyKX1mdW5jdGlvbiBIKGEsYixjLGQsZSl7YS5zdGFydENvbnRhaW5lcj1iLGEuc3RhcnRPZmZzZXQ9YyxhLmVuZENvbnRhaW5lcj1kLGEuZW5kT2Zmc2V0PWUsYS5kb2N1bWVudD1KLmdldERvY3VtZW50KGIpLEcoYSl9ZnVuY3Rpb24gSShhKXt0aGlzLnN0YXJ0Q29udGFpbmVyPWEsdGhpcy5zdGFydE9mZnNldD0wLHRoaXMuZW5kQ29udGFpbmVyPWEsdGhpcy5lbmRPZmZzZXQ9MCx0aGlzLmRvY3VtZW50PWEsRyh0aGlzKX12YXIgSj1hLmRvbSxLPWEudXRpbCxMPUouRG9tUG9zaXRpb24sTT1hLkRPTUV4Y2VwdGlvbixOPUouaXNDaGFyYWN0ZXJEYXRhTm9kZSxPPUouZ2V0Tm9kZUluZGV4LFA9Si5pc09ySXNBbmNlc3Rvck9mLFE9Si5nZXREb2N1bWVudCxSPUouY29tcGFyZVBvaW50cyxTPUouc3BsaXREYXRhTm9kZSxUPUouZ2V0Q2xvc2VzdEFuY2VzdG9ySW4sVT1KLmdldE5vZGVMZW5ndGgsVj1KLmFycmF5Q29udGFpbnMsVz1KLmdldFJvb3RDb250YWluZXIsWD1hLmZlYXR1cmVzLmNyYXNoeVRleHROb2RlcyxZPUoucmVtb3ZlTm9kZTtwLnByb3RvdHlwZT17X2N1cnJlbnQ6bnVsbCxfbmV4dDpudWxsLF9maXJzdDpudWxsLF9sYXN0Om51bGwsaXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZTohMSxyZXNldDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnQ9bnVsbCx0aGlzLl9uZXh0PXRoaXMuX2ZpcnN0fSxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY3VycmVudD10aGlzLl9uZXh0O3JldHVybiBhJiYodGhpcy5fbmV4dD1hIT09dGhpcy5fbGFzdD9hLm5leHRTaWJsaW5nOm51bGwsTihhKSYmdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzJiYoYT09PXRoaXMuZWMmJihhPWEuY2xvbmVOb2RlKCEwKSkuZGVsZXRlRGF0YSh0aGlzLmVvLGEubGVuZ3RoLXRoaXMuZW8pLHRoaXMuX2N1cnJlbnQ9PT10aGlzLnNjJiYoYT1hLmNsb25lTm9kZSghMCkpLmRlbGV0ZURhdGEoMCx0aGlzLnNvKSkpLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLl9jdXJyZW50OyFOKGMpfHxjIT09dGhpcy5zYyYmYyE9PXRoaXMuZWM/Yy5wYXJlbnROb2RlJiZZKGMpOihhPWM9PT10aGlzLnNjP3RoaXMuc286MCxiPWM9PT10aGlzLmVjP3RoaXMuZW86Yy5sZW5ndGgsYSE9YiYmYy5kZWxldGVEYXRhKGEsYi1hKSl9LGlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY3VycmVudDtyZXR1cm4gYyhhLHRoaXMucmFuZ2UpfSxnZXRTdWJ0cmVlSXRlcmF0b3I6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLmlzU2luZ2xlQ2hhcmFjdGVyRGF0YU5vZGUpYT10aGlzLnJhbmdlLmNsb25lUmFuZ2UoKSxhLmNvbGxhcHNlKCExKTtlbHNle2E9bmV3IEkoZCh0aGlzLnJhbmdlKSk7dmFyIGI9dGhpcy5fY3VycmVudCxjPWIsZT0wLGY9YixnPVUoYik7UChiLHRoaXMuc2MpJiYoYz10aGlzLnNjLGU9dGhpcy5zbyksUChiLHRoaXMuZWMpJiYoZj10aGlzLmVjLGc9dGhpcy5lbyksSChhLGMsZSxmLGcpfXJldHVybiBuZXcgcChhLHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2Rlcyl9LGRldGFjaDpmdW5jdGlvbigpe3RoaXMucmFuZ2U9dGhpcy5fY3VycmVudD10aGlzLl9uZXh0PXRoaXMuX2ZpcnN0PXRoaXMuX2xhc3Q9dGhpcy5zYz10aGlzLnNvPXRoaXMuZWM9dGhpcy5lbz1udWxsfX07dmFyIFo9WzEsMyw0LDUsNyw4LDEwXSwkPVsyLDksMTFdLF89WzUsNiwxMCwxMl0sYWE9WzEsMyw0LDUsNyw4LDEwLDExXSxiYT1bMSwzLDQsNSw3LDhdLGNhPXEoWzksMTFdKSxkYT1xKF8pLGVhPXEoWzYsMTAsMTJdKSxmYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksZ2E9ITE7dHJ5e2ZhLmlubmVySFRNTD1cIjxiPng8L2I+XCIsZ2E9Mz09ZmEuZmlyc3RDaGlsZC5ub2RlVHlwZX1jYXRjaChoYSl7fWEuZmVhdHVyZXMuaHRtbFBhcnNpbmdDb25mb3Jtcz1nYTt2YXIgaWE9Z2E/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdGFydENvbnRhaW5lcixjPVEoYik7aWYoIWIpdGhyb3cgbmV3IE0oXCJJTlZBTElEX1NUQVRFX0VSUlwiKTt2YXIgZD1udWxsO3JldHVybiAxPT1iLm5vZGVUeXBlP2Q9YjpOKGIpJiYoZD1KLnBhcmVudEVsZW1lbnQoYikpLGQ9bnVsbD09PWR8fFwiSFRNTFwiPT1kLm5vZGVOYW1lJiZKLmlzSHRtbE5hbWVzcGFjZShRKGQpLmRvY3VtZW50RWxlbWVudCkmJkouaXNIdG1sTmFtZXNwYWNlKGQpP2MuY3JlYXRlRWxlbWVudChcImJvZHlcIik6ZC5jbG9uZU5vZGUoITEpLGQuaW5uZXJIVE1MPWEsSi5mcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW4oZCl9OmZ1bmN0aW9uKGEpe3ZhciBiPWQodGhpcyksYz1iLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO3JldHVybiBjLmlubmVySFRNTD1hLEouZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuKGMpfSxqYT1bXCJzdGFydENvbnRhaW5lclwiLFwic3RhcnRPZmZzZXRcIixcImVuZENvbnRhaW5lclwiLFwiZW5kT2Zmc2V0XCIsXCJjb2xsYXBzZWRcIixcImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyXCJdLGthPTAsbGE9MSxtYT0yLG5hPTMsb2E9MCxwYT0xLHFhPTIscmE9MztLLmV4dGVuZChhLnJhbmdlUHJvdG90eXBlLHtjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXt6KHRoaXMpLHUodGhpcy5zdGFydENvbnRhaW5lcixiLnN0YXJ0Q29udGFpbmVyKTt2YXIgYyxkLGUsZixnPWE9PW5hfHxhPT1rYT9cInN0YXJ0XCI6XCJlbmRcIixoPWE9PWxhfHxhPT1rYT9cInN0YXJ0XCI6XCJlbmRcIjtyZXR1cm4gYz10aGlzW2crXCJDb250YWluZXJcIl0sZD10aGlzW2crXCJPZmZzZXRcIl0sZT1iW2grXCJDb250YWluZXJcIl0sZj1iW2grXCJPZmZzZXRcIl0sUihjLGQsZSxmKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXtpZih6KHRoaXMpLHMoYSxhYSksdih0aGlzLnN0YXJ0Q29udGFpbmVyKSxQKGEsdGhpcy5zdGFydENvbnRhaW5lcikpdGhyb3cgbmV3IE0oXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIik7dmFyIGI9aChhLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk7dGhpcy5zZXRTdGFydEJlZm9yZShiKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3oodGhpcyk7dmFyIGEsYjtpZih0aGlzLmNvbGxhcHNlZClyZXR1cm4gZCh0aGlzKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYodGhpcy5zdGFydENvbnRhaW5lcj09PXRoaXMuZW5kQ29udGFpbmVyJiZOKHRoaXMuc3RhcnRDb250YWluZXIpKXJldHVybiBhPXRoaXMuc3RhcnRDb250YWluZXIuY2xvbmVOb2RlKCEwKSxhLmRhdGE9YS5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsdGhpcy5lbmRPZmZzZXQpLGI9ZCh0aGlzKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYi5hcHBlbmRDaGlsZChhKSxiO3ZhciBjPW5ldyBwKHRoaXMsITApO3JldHVybiBhPWooYyksYy5kZXRhY2goKSxhfSxjYW5TdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKCl7eih0aGlzKSx2KHRoaXMuc3RhcnRDb250YWluZXIpLHYodGhpcy5lbmRDb250YWluZXIpO3ZhciBhPW5ldyBwKHRoaXMsITApLGI9YS5fZmlyc3QmJmMoYS5fZmlyc3QsdGhpcyl8fGEuX2xhc3QmJmMoYS5fbGFzdCx0aGlzKTtyZXR1cm4gYS5kZXRhY2goKSwhYn0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXtpZihzKGEsYmEpLCF0aGlzLmNhblN1cnJvdW5kQ29udGVudHMoKSl0aHJvdyBuZXcgTShcIklOVkFMSURfU1RBVEVfRVJSXCIpO3ZhciBiPXRoaXMuZXh0cmFjdENvbnRlbnRzKCk7aWYoYS5oYXNDaGlsZE5vZGVzKCkpZm9yKDthLmxhc3RDaGlsZDspYS5yZW1vdmVDaGlsZChhLmxhc3RDaGlsZCk7aChhLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCksYS5hcHBlbmRDaGlsZChiKSx0aGlzLnNlbGVjdE5vZGUoYSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXt6KHRoaXMpO2Zvcih2YXIgYSxiPW5ldyBJKGQodGhpcykpLGM9amEubGVuZ3RoO2MtLTspYT1qYVtjXSxiW2FdPXRoaXNbYV07cmV0dXJuIGJ9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7eih0aGlzKTt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyO2lmKGE9PT10aGlzLmVuZENvbnRhaW5lciYmTihhKSlyZXR1cm4gMz09YS5ub2RlVHlwZXx8ND09YS5ub2RlVHlwZT9hLmRhdGEuc2xpY2UodGhpcy5zdGFydE9mZnNldCx0aGlzLmVuZE9mZnNldCk6XCJcIjt2YXIgYj1bXSxjPW5ldyBwKHRoaXMsITApO3JldHVybiBrKGMsZnVuY3Rpb24oYSl7KDM9PWEubm9kZVR5cGV8fDQ9PWEubm9kZVR5cGUpJiZiLnB1c2goYS5kYXRhKX0pLGMuZGV0YWNoKCksYi5qb2luKFwiXCIpfSxjb21wYXJlTm9kZTpmdW5jdGlvbihhKXt6KHRoaXMpO3ZhciBiPWEucGFyZW50Tm9kZSxjPU8oYSk7aWYoIWIpdGhyb3cgbmV3IE0oXCJOT1RfRk9VTkRfRVJSXCIpO3ZhciBkPXRoaXMuY29tcGFyZVBvaW50KGIsYyksZT10aGlzLmNvbXBhcmVQb2ludChiLGMrMSk7cmV0dXJuIDA+ZD9lPjA/cWE6b2E6ZT4wP3BhOnJhfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4geih0aGlzKSx3KGEsXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIiksdShhLHRoaXMuc3RhcnRDb250YWluZXIpLFIoYSxiLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk8MD8tMTpSKGEsYix0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCk+MD8xOjB9LGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudDppYSx0b0h0bWw6ZnVuY3Rpb24oKXtyZXR1cm4gQih0aGlzKX0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSxiKXtpZih6KHRoaXMpLFcoYSkhPWUodGhpcykpcmV0dXJuITE7dmFyIGM9YS5wYXJlbnROb2RlLGQ9TyhhKTtpZighYylyZXR1cm4hMDt2YXIgZj1SKGMsZCx0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCksZz1SKGMsZCsxLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk7cmV0dXJuIGI/MD49ZiYmZz49MDowPmYmJmc+MH0saXNQb2ludEluUmFuZ2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4geih0aGlzKSx3KGEsXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIiksdShhLHRoaXMuc3RhcnRDb250YWluZXIpLFIoYSxiLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk+PTAmJlIoYSxiLHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0KTw9MH0saW50ZXJzZWN0c1JhbmdlOmZ1bmN0aW9uKGEpe3JldHVybiBpKHRoaXMsYSwhMSl9LGludGVyc2VjdHNPclRvdWNoZXNSYW5nZTpmdW5jdGlvbihhKXtyZXR1cm4gaSh0aGlzLGEsITApfSxpbnRlcnNlY3Rpb246ZnVuY3Rpb24oYSl7aWYodGhpcy5pbnRlcnNlY3RzUmFuZ2UoYSkpe3ZhciBiPVIodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0LGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksYz1SKHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0LGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KSxkPXRoaXMuY2xvbmVSYW5nZSgpO3JldHVybi0xPT1iJiZkLnNldFN0YXJ0KGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksMT09YyYmZC5zZXRFbmQoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpLGR9cmV0dXJuIG51bGx9LHVuaW9uOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaW50ZXJzZWN0c09yVG91Y2hlc1JhbmdlKGEpKXt2YXIgYj10aGlzLmNsb25lUmFuZ2UoKTtyZXR1cm4tMT09UihhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KSYmYi5zZXRTdGFydChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpLDE9PVIoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQpJiZiLnNldEVuZChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksYn10aHJvdyBuZXcgTShcIlJhbmdlcyBkbyBub3QgaW50ZXJzZWN0XCIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj90aGlzLmludGVyc2VjdHNOb2RlKGEsITEpOnRoaXMuY29tcGFyZU5vZGUoYSk9PXJhfSxjb250YWluc05vZGVDb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb21wYXJlUG9pbnQoYSwwKT49MCYmdGhpcy5jb21wYXJlUG9pbnQoYSxVKGEpKTw9MH0sY29udGFpbnNSYW5nZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVyc2VjdGlvbihhKTtyZXR1cm4gbnVsbCE9PWImJmEuZXF1YWxzKGIpfSxjb250YWluc05vZGVUZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmVSYW5nZSgpO2Iuc2VsZWN0Tm9kZShhKTt2YXIgYz1iLmdldE5vZGVzKFszXSk7aWYoYy5sZW5ndGg+MCl7Yi5zZXRTdGFydChjWzBdLDApO3ZhciBkPWMucG9wKCk7cmV0dXJuIGIuc2V0RW5kKGQsZC5sZW5ndGgpLHRoaXMuY29udGFpbnNSYW5nZShiKX1yZXR1cm4gdGhpcy5jb250YWluc05vZGVDb250ZW50cyhhKX0sZ2V0Tm9kZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4geih0aGlzKSxuKHRoaXMsYSxiKX0sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzKX0sY29sbGFwc2VCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5zZXRFbmRCZWZvcmUoYSksdGhpcy5jb2xsYXBzZSghMSl9LGNvbGxhcHNlQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zZXRTdGFydEFmdGVyKGEpLHRoaXMuY29sbGFwc2UoITApfSxnZXRCb29rbWFyazpmdW5jdGlvbihiKXt2YXIgYz1kKHRoaXMpLGU9YS5jcmVhdGVSYW5nZShjKTtiPWJ8fEouZ2V0Qm9keShjKSxlLnNlbGVjdE5vZGVDb250ZW50cyhiKTt2YXIgZj10aGlzLmludGVyc2VjdGlvbihlKSxnPTAsaD0wO3JldHVybiBmJiYoZS5zZXRFbmQoZi5zdGFydENvbnRhaW5lcixmLnN0YXJ0T2Zmc2V0KSxnPWUudG9TdHJpbmcoKS5sZW5ndGgsaD1nK2YudG9TdHJpbmcoKS5sZW5ndGgpLHtzdGFydDpnLGVuZDpoLGNvbnRhaW5lck5vZGU6Yn19LG1vdmVUb0Jvb2ttYXJrOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY29udGFpbmVyTm9kZSxjPTA7dGhpcy5zZXRTdGFydChiLDApLHRoaXMuY29sbGFwc2UoITApO2Zvcih2YXIgZCxlLGYsZyxoPVtiXSxpPSExLGo9ITE7IWomJihkPWgucG9wKCkpOylpZigzPT1kLm5vZGVUeXBlKWU9YytkLmxlbmd0aCwhaSYmYS5zdGFydD49YyYmYS5zdGFydDw9ZSYmKHRoaXMuc2V0U3RhcnQoZCxhLnN0YXJ0LWMpLGk9ITApLGkmJmEuZW5kPj1jJiZhLmVuZDw9ZSYmKHRoaXMuc2V0RW5kKGQsYS5lbmQtYyksaj0hMCksYz1lO2Vsc2UgZm9yKGc9ZC5jaGlsZE5vZGVzLGY9Zy5sZW5ndGg7Zi0tOyloLnB1c2goZ1tmXSl9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cIkRvbVJhbmdlXCJ9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gSS5yYW5nZXNFcXVhbCh0aGlzLGEpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcyl9LGluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzKX0sZGV0YWNoOmZ1bmN0aW9uKCl7fX0pLEYoSSxIKSxLLmV4dGVuZChJLHtyYW5nZVByb3BlcnRpZXM6amEsUmFuZ2VJdGVyYXRvcjpwLGNvcHlDb21wYXJpc29uQ29uc3RhbnRzOkQsY3JlYXRlUHJvdG90eXBlUmFuZ2U6RixpbnNwZWN0Om8sdG9IdG1sOkIsZ2V0UmFuZ2VEb2N1bWVudDpkLHJhbmdlc0VxdWFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3RhcnRDb250YWluZXI9PT1iLnN0YXJ0Q29udGFpbmVyJiZhLnN0YXJ0T2Zmc2V0PT09Yi5zdGFydE9mZnNldCYmYS5lbmRDb250YWluZXI9PT1iLmVuZENvbnRhaW5lciYmYS5lbmRPZmZzZXQ9PT1iLmVuZE9mZnNldH19KSxhLkRvbVJhbmdlPUl9KSxILmNyZWF0ZUNvcmVNb2R1bGUoXCJXcmFwcGVkUmFuZ2VcIixbXCJEb21SYW5nZVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLmRvbSxmPWEudXRpbCxnPWUuRG9tUG9zaXRpb24saD1hLkRvbVJhbmdlLGk9ZS5nZXRCb2R5LGo9ZS5nZXRDb250ZW50RG9jdW1lbnQsaz1lLmlzQ2hhcmFjdGVyRGF0YU5vZGU7aWYoYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2UmJiFmdW5jdGlvbigpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBiLGM9bS5sZW5ndGg7Yy0tOyliPW1bY10sYVtiXT1hLm5hdGl2ZVJhbmdlW2JdO2EuY29sbGFwc2VkPWEuc3RhcnRDb250YWluZXI9PT1hLmVuZENvbnRhaW5lciYmYS5zdGFydE9mZnNldD09PWEuZW5kT2Zmc2V0fWZ1bmN0aW9uIGcoYSxiLGMsZCxlKXt2YXIgZj1hLnN0YXJ0Q29udGFpbmVyIT09Ynx8YS5zdGFydE9mZnNldCE9YyxnPWEuZW5kQ29udGFpbmVyIT09ZHx8YS5lbmRPZmZzZXQhPWUsaD0hYS5lcXVhbHMoYS5uYXRpdmVSYW5nZSk7KGZ8fGd8fGgpJiYoYS5zZXRFbmQoZCxlKSxhLnNldFN0YXJ0KGIsYykpfXZhciBrLGwsbT1oLnJhbmdlUHJvcGVydGllcztjPWZ1bmN0aW9uKGEpe2lmKCFhKXRocm93IGIuY3JlYXRlRXJyb3IoXCJXcmFwcGVkUmFuZ2U6IFJhbmdlIG11c3QgYmUgc3BlY2lmaWVkXCIpO3RoaXMubmF0aXZlUmFuZ2U9YSxkKHRoaXMpfSxoLmNyZWF0ZVByb3RvdHlwZVJhbmdlKGMsZyksaz1jLnByb3RvdHlwZSxrLnNlbGVjdE5vZGU9ZnVuY3Rpb24oYSl7dGhpcy5uYXRpdmVSYW5nZS5zZWxlY3ROb2RlKGEpLGQodGhpcyl9LGsuY2xvbmVDb250ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hdGl2ZVJhbmdlLmNsb25lQ29udGVudHMoKX0say5zdXJyb3VuZENvbnRlbnRzPWZ1bmN0aW9uKGEpe3RoaXMubmF0aXZlUmFuZ2Uuc3Vycm91bmRDb250ZW50cyhhKSxkKHRoaXMpfSxrLmNvbGxhcHNlPWZ1bmN0aW9uKGEpe3RoaXMubmF0aXZlUmFuZ2UuY29sbGFwc2UoYSksZCh0aGlzKX0say5jbG9uZVJhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjKHRoaXMubmF0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpKX0say5yZWZyZXNoPWZ1bmN0aW9uKCl7ZCh0aGlzKX0say50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hdGl2ZVJhbmdlLnRvU3RyaW5nKCl9O3ZhciBuPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwidGVzdFwiKTtpKGRvY3VtZW50KS5hcHBlbmRDaGlsZChuKTt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0U3RhcnQobiwwKSxvLnNldEVuZChuLDApO3RyeXtvLnNldFN0YXJ0KG4sMSksay5zZXRTdGFydD1mdW5jdGlvbihhLGIpe3RoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQoYSxiKSxkKHRoaXMpfSxrLnNldEVuZD1mdW5jdGlvbihhLGIpe3RoaXMubmF0aXZlUmFuZ2Uuc2V0RW5kKGEsYiksZCh0aGlzKX0sbD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5uYXRpdmVSYW5nZVthXShiKSxkKHRoaXMpfX19Y2F0Y2gocCl7ay5zZXRTdGFydD1mdW5jdGlvbihhLGIpe3RyeXt0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYil9Y2F0Y2goYyl7dGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxiKSx0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYil9ZCh0aGlzKX0say5zZXRFbmQ9ZnVuY3Rpb24oYSxiKXt0cnl7dGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxiKX1jYXRjaChjKXt0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYiksdGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxiKX1kKHRoaXMpfSxsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3RyeXt0aGlzLm5hdGl2ZVJhbmdlW2FdKGMpfWNhdGNoKGUpe3RoaXMubmF0aXZlUmFuZ2VbYl0oYyksdGhpcy5uYXRpdmVSYW5nZVthXShjKX1kKHRoaXMpfX19ay5zZXRTdGFydEJlZm9yZT1sKFwic2V0U3RhcnRCZWZvcmVcIixcInNldEVuZEJlZm9yZVwiKSxrLnNldFN0YXJ0QWZ0ZXI9bChcInNldFN0YXJ0QWZ0ZXJcIixcInNldEVuZEFmdGVyXCIpLGsuc2V0RW5kQmVmb3JlPWwoXCJzZXRFbmRCZWZvcmVcIixcInNldFN0YXJ0QmVmb3JlXCIpLGsuc2V0RW5kQWZ0ZXI9bChcInNldEVuZEFmdGVyXCIsXCJzZXRTdGFydEFmdGVyXCIpLGsuc2VsZWN0Tm9kZUNvbnRlbnRzPWZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhcnRBbmRFbmQoYSwwLGUuZ2V0Tm9kZUxlbmd0aChhKSl9LG8uc2VsZWN0Tm9kZUNvbnRlbnRzKG4pLG8uc2V0RW5kKG4sMyk7dmFyIHE9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtxLnNlbGVjdE5vZGVDb250ZW50cyhuKSxxLnNldEVuZChuLDQpLHEuc2V0U3RhcnQobiwyKSwtMT09by5jb21wYXJlQm91bmRhcnlQb2ludHMoby5TVEFSVF9UT19FTkQscSkmJjE9PW8uY29tcGFyZUJvdW5kYXJ5UG9pbnRzKG8uRU5EX1RPX1NUQVJULHEpP2suY29tcGFyZUJvdW5kYXJ5UG9pbnRzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Yi5uYXRpdmVSYW5nZXx8YixhPT1iLlNUQVJUX1RPX0VORD9hPWIuRU5EX1RPX1NUQVJUOmE9PWIuRU5EX1RPX1NUQVJUJiYoYT1iLlNUQVJUX1RPX0VORCksdGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxiKX06ay5jb21wYXJlQm91bmRhcnlQb2ludHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxiLm5hdGl2ZVJhbmdlfHxiKX07dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyLmlubmVySFRNTD1cIjEyM1wiO3ZhciBzPXIuZmlyc3RDaGlsZCx0PWkoZG9jdW1lbnQpO3QuYXBwZW5kQ2hpbGQociksby5zZXRTdGFydChzLDEpLG8uc2V0RW5kKHMsMiksby5kZWxldGVDb250ZW50cygpLFwiMTNcIj09cy5kYXRhJiYoay5kZWxldGVDb250ZW50cz1mdW5jdGlvbigpe3RoaXMubmF0aXZlUmFuZ2UuZGVsZXRlQ29udGVudHMoKSxkKHRoaXMpfSxrLmV4dHJhY3RDb250ZW50cz1mdW5jdGlvbigpe3ZhciBhPXRoaXMubmF0aXZlUmFuZ2UuZXh0cmFjdENvbnRlbnRzKCk7cmV0dXJuIGQodGhpcyksYX0pLHQucmVtb3ZlQ2hpbGQociksdD1udWxsLGYuaXNIb3N0TWV0aG9kKG8sXCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnRcIikmJihrLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSl9KSxpKGRvY3VtZW50KS5yZW1vdmVDaGlsZChuKSxrLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIldyYXBwZWRSYW5nZVwifSxhLldyYXBwZWRSYW5nZT1jLGEuY3JlYXRlTmF0aXZlUmFuZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9aihhLGIsXCJjcmVhdGVOYXRpdmVSYW5nZVwiKSxhLmNyZWF0ZVJhbmdlKCl9fSgpLGEuZmVhdHVyZXMuaW1wbGVtZW50c1RleHRSYW5nZSl7dmFyIGw9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnRFbGVtZW50KCksYz1hLmR1cGxpY2F0ZSgpO2MuY29sbGFwc2UoITApO3ZhciBkPWMucGFyZW50RWxlbWVudCgpO2M9YS5kdXBsaWNhdGUoKSxjLmNvbGxhcHNlKCExKTt2YXIgZj1jLnBhcmVudEVsZW1lbnQoKSxnPWQ9PWY/ZDplLmdldENvbW1vbkFuY2VzdG9yKGQsZik7cmV0dXJuIGc9PWI/ZzplLmdldENvbW1vbkFuY2VzdG9yKGIsZyl9LG09ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PWEuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIixhKX0sbj1mdW5jdGlvbihhLGIsYyxkLGYpe3ZhciBoPWEuZHVwbGljYXRlKCk7aC5jb2xsYXBzZShjKTt2YXIgaT1oLnBhcmVudEVsZW1lbnQoKTtpZihlLmlzT3JJc0FuY2VzdG9yT2YoYixpKXx8KGk9YiksIWkuY2FuSGF2ZUhUTUwpe3ZhciBqPW5ldyBnKGkucGFyZW50Tm9kZSxlLmdldE5vZGVJbmRleChpKSk7cmV0dXJue2JvdW5kYXJ5UG9zaXRpb246aixub2RlSW5mbzp7bm9kZUluZGV4Omoub2Zmc2V0LGNvbnRhaW5lckVsZW1lbnQ6ai5ub2RlfX19dmFyIGw9ZS5nZXREb2N1bWVudChpKS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtsLnBhcmVudE5vZGUmJmUucmVtb3ZlTm9kZShsKTtmb3IodmFyIG0sbixvLHAscSxyPWM/XCJTdGFydFRvU3RhcnRcIjpcIlN0YXJ0VG9FbmRcIixzPWYmJmYuY29udGFpbmVyRWxlbWVudD09aT9mLm5vZGVJbmRleDowLHQ9aS5jaGlsZE5vZGVzLmxlbmd0aCx1PXQsdj11Ozspe2lmKHY9PXQ/aS5hcHBlbmRDaGlsZChsKTppLmluc2VydEJlZm9yZShsLGkuY2hpbGROb2Rlc1t2XSksaC5tb3ZlVG9FbGVtZW50VGV4dChsKSxtPWguY29tcGFyZUVuZFBvaW50cyhyLGEpLDA9PW18fHM9PXUpYnJlYWs7aWYoLTE9PW0pe2lmKHU9PXMrMSlicmVhaztzPXZ9ZWxzZSB1PXU9PXMrMT9zOnY7dj1NYXRoLmZsb29yKChzK3UpLzIpLGkucmVtb3ZlQ2hpbGQobCl9aWYocT1sLm5leHRTaWJsaW5nLC0xPT1tJiZxJiZrKHEpKXtoLnNldEVuZFBvaW50KGM/XCJFbmRUb1N0YXJ0XCI6XCJFbmRUb0VuZFwiLGEpO3ZhciB3O2lmKC9bXFxyXFxuXS8udGVzdChxLmRhdGEpKXt2YXIgeD1oLmR1cGxpY2F0ZSgpLHk9eC50ZXh0LnJlcGxhY2UoL1xcclxcbi9nLFwiXFxyXCIpLmxlbmd0aDtmb3Iodz14Lm1vdmVTdGFydChcImNoYXJhY3RlclwiLHkpOy0xPT0obT14LmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIseCkpOyl3KysseC5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwxKX1lbHNlIHc9aC50ZXh0Lmxlbmd0aDtwPW5ldyBnKHEsdyl9ZWxzZSBuPShkfHwhYykmJmwucHJldmlvdXNTaWJsaW5nLG89KGR8fGMpJiZsLm5leHRTaWJsaW5nLHA9byYmayhvKT9uZXcgZyhvLDApOm4mJmsobik/bmV3IGcobixuLmRhdGEubGVuZ3RoKTpuZXcgZyhpLGUuZ2V0Tm9kZUluZGV4KGwpKTtyZXR1cm4gZS5yZW1vdmVOb2RlKGwpLHtib3VuZGFyeVBvc2l0aW9uOnAsbm9kZUluZm86e25vZGVJbmRleDp2LGNvbnRhaW5lckVsZW1lbnQ6aX19fSxvPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxmLGcsaD1hLm9mZnNldCxqPWUuZ2V0RG9jdW1lbnQoYS5ub2RlKSxsPWkoaikuY3JlYXRlVGV4dFJhbmdlKCksbT1rKGEubm9kZSk7cmV0dXJuIG0/KGM9YS5ub2RlLGQ9Yy5wYXJlbnROb2RlKTooZz1hLm5vZGUuY2hpbGROb2RlcyxjPWg8Zy5sZW5ndGg/Z1toXTpudWxsLGQ9YS5ub2RlKSxmPWouY3JlYXRlRWxlbWVudChcInNwYW5cIiksZi5pbm5lckhUTUw9XCImI2ZlZmY7XCIsYz9kLmluc2VydEJlZm9yZShmLGMpOmQuYXBwZW5kQ2hpbGQoZiksbC5tb3ZlVG9FbGVtZW50VGV4dChmKSxsLmNvbGxhcHNlKCFiKSxkLnJlbW92ZUNoaWxkKGYpLG0mJmxbYj9cIm1vdmVTdGFydFwiOlwibW92ZUVuZFwiXShcImNoYXJhY3RlclwiLGgpLGx9O2Q9ZnVuY3Rpb24oYSl7dGhpcy50ZXh0UmFuZ2U9YSx0aGlzLnJlZnJlc2goKX0sZC5wcm90b3R5cGU9bmV3IGgoZG9jdW1lbnQpLFxuZC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkPWwodGhpcy50ZXh0UmFuZ2UpO20odGhpcy50ZXh0UmFuZ2UpP2I9YT1uKHRoaXMudGV4dFJhbmdlLGQsITAsITApLmJvdW5kYXJ5UG9zaXRpb246KGM9bih0aGlzLnRleHRSYW5nZSxkLCEwLCExKSxhPWMuYm91bmRhcnlQb3NpdGlvbixiPW4odGhpcy50ZXh0UmFuZ2UsZCwhMSwhMSxjLm5vZGVJbmZvKS5ib3VuZGFyeVBvc2l0aW9uKSx0aGlzLnNldFN0YXJ0KGEubm9kZSxhLm9mZnNldCksdGhpcy5zZXRFbmQoYi5ub2RlLGIub2Zmc2V0KX0sZC5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVyblwiV3JhcHBlZFRleHRSYW5nZVwifSxoLmNvcHlDb21wYXJpc29uQ29uc3RhbnRzKGQpO3ZhciBwPWZ1bmN0aW9uKGEpe2lmKGEuY29sbGFwc2VkKXJldHVybiBvKG5ldyBnKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksITApO3ZhciBiPW8obmV3IGcoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSwhMCksYz1vKG5ldyBnKGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KSwhMSksZD1pKGguZ2V0UmFuZ2VEb2N1bWVudChhKSkuY3JlYXRlVGV4dFJhbmdlKCk7cmV0dXJuIGQuc2V0RW5kUG9pbnQoXCJTdGFydFRvU3RhcnRcIixiKSxkLnNldEVuZFBvaW50KFwiRW5kVG9FbmRcIixjKSxkfTtpZihkLnJhbmdlVG9UZXh0UmFuZ2U9cCxkLnByb3RvdHlwZS50b1RleHRSYW5nZT1mdW5jdGlvbigpe3JldHVybiBwKHRoaXMpfSxhLldyYXBwZWRUZXh0UmFuZ2U9ZCwhYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2V8fGEuY29uZmlnLnByZWZlclRleHRSYW5nZSl7dmFyIHE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEoXCJyZXR1cm4gdGhpcztcIikoKX0oRnVuY3Rpb24pO1widW5kZWZpbmVkXCI9PXR5cGVvZiBxLlJhbmdlJiYocS5SYW5nZT1kKSxhLmNyZWF0ZU5hdGl2ZVJhbmdlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWooYSxiLFwiY3JlYXRlTmF0aXZlUmFuZ2VcIiksaShhKS5jcmVhdGVUZXh0UmFuZ2UoKX0sYS5XcmFwcGVkUmFuZ2U9ZH19YS5jcmVhdGVSYW5nZT1mdW5jdGlvbihjKXtyZXR1cm4gYz1qKGMsYixcImNyZWF0ZVJhbmdlXCIpLG5ldyBhLldyYXBwZWRSYW5nZShhLmNyZWF0ZU5hdGl2ZVJhbmdlKGMpKX0sYS5jcmVhdGVSYW5neVJhbmdlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWooYSxiLFwiY3JlYXRlUmFuZ3lSYW5nZVwiKSxuZXcgaChhKX0sZi5jcmVhdGVBbGlhc0ZvckRlcHJlY2F0ZWRNZXRob2QoYSxcImNyZWF0ZUlmcmFtZVJhbmdlXCIsXCJjcmVhdGVSYW5nZVwiKSxmLmNyZWF0ZUFsaWFzRm9yRGVwcmVjYXRlZE1ldGhvZChhLFwiY3JlYXRlSWZyYW1lUmFuZ3lSYW5nZVwiLFwiY3JlYXRlUmFuZ3lSYW5nZVwiKSxhLmFkZFNoaW1MaXN0ZW5lcihmdW5jdGlvbihiKXt2YXIgYz1iLmRvY3VtZW50O1widW5kZWZpbmVkXCI9PXR5cGVvZiBjLmNyZWF0ZVJhbmdlJiYoYy5jcmVhdGVSYW5nZT1mdW5jdGlvbigpe3JldHVybiBhLmNyZWF0ZVJhbmdlKGMpfSksYz1iPW51bGx9KX0pLEguY3JlYXRlQ29yZU1vZHVsZShcIldyYXBwZWRTZWxlY3Rpb25cIixbXCJEb21SYW5nZVwiLFwiV3JhcHBlZFJhbmdlXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT8vXmJhY2t3YXJkKHMpPyQvaS50ZXN0KGEpOiEhYX1mdW5jdGlvbiBkKGEsYyl7aWYoYSl7aWYoQy5pc1dpbmRvdyhhKSlyZXR1cm4gYTtpZihhIGluc3RhbmNlb2YgcilyZXR1cm4gYS53aW47dmFyIGQ9Qy5nZXRDb250ZW50RG9jdW1lbnQoYSxiLGMpO3JldHVybiBDLmdldFdpbmRvdyhkKX1yZXR1cm4gd2luZG93fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGQoYSxcImdldFdpblNlbGVjdGlvblwiKS5nZXRTZWxlY3Rpb24oKX1mdW5jdGlvbiBmKGEpe3JldHVybiBkKGEsXCJnZXREb2NTZWxlY3Rpb25cIikuZG9jdW1lbnQuc2VsZWN0aW9ufWZ1bmN0aW9uIGcoYSl7dmFyIGI9ITE7cmV0dXJuIGEuYW5jaG9yTm9kZSYmKGI9MT09Qy5jb21wYXJlUG9pbnRzKGEuYW5jaG9yTm9kZSxhLmFuY2hvck9mZnNldCxhLmZvY3VzTm9kZSxhLmZvY3VzT2Zmc2V0KSksYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jP1wiZW5kXCI6XCJzdGFydFwiLGU9Yz9cInN0YXJ0XCI6XCJlbmRcIjthLmFuY2hvck5vZGU9YltkK1wiQ29udGFpbmVyXCJdLGEuYW5jaG9yT2Zmc2V0PWJbZCtcIk9mZnNldFwiXSxhLmZvY3VzTm9kZT1iW2UrXCJDb250YWluZXJcIl0sYS5mb2N1c09mZnNldD1iW2UrXCJPZmZzZXRcIl19ZnVuY3Rpb24gaShhKXt2YXIgYj1hLm5hdGl2ZVNlbGVjdGlvbjthLmFuY2hvck5vZGU9Yi5hbmNob3JOb2RlLGEuYW5jaG9yT2Zmc2V0PWIuYW5jaG9yT2Zmc2V0LGEuZm9jdXNOb2RlPWIuZm9jdXNOb2RlLGEuZm9jdXNPZmZzZXQ9Yi5mb2N1c09mZnNldH1mdW5jdGlvbiBqKGEpe2EuYW5jaG9yTm9kZT1hLmZvY3VzTm9kZT1udWxsLGEuYW5jaG9yT2Zmc2V0PWEuZm9jdXNPZmZzZXQ9MCxhLnJhbmdlQ291bnQ9MCxhLmlzQ29sbGFwc2VkPSEwLGEuX3Jhbmdlcy5sZW5ndGg9MH1mdW5jdGlvbiBrKGIpe3ZhciBjO3JldHVybiBiIGluc3RhbmNlb2YgRj8oYz1hLmNyZWF0ZU5hdGl2ZVJhbmdlKGIuZ2V0RG9jdW1lbnQoKSksYy5zZXRFbmQoYi5lbmRDb250YWluZXIsYi5lbmRPZmZzZXQpLGMuc2V0U3RhcnQoYi5zdGFydENvbnRhaW5lcixiLnN0YXJ0T2Zmc2V0KSk6YiBpbnN0YW5jZW9mIEc/Yz1iLm5hdGl2ZVJhbmdlOkouaW1wbGVtZW50c0RvbVJhbmdlJiZiIGluc3RhbmNlb2YgQy5nZXRXaW5kb3coYi5zdGFydENvbnRhaW5lcikuUmFuZ2UmJihjPWIpLGN9ZnVuY3Rpb24gbChhKXtpZighYS5sZW5ndGh8fDEhPWFbMF0ubm9kZVR5cGUpcmV0dXJuITE7Zm9yKHZhciBiPTEsYz1hLmxlbmd0aDtjPmI7KytiKWlmKCFDLmlzQW5jZXN0b3JPZihhWzBdLGFbYl0pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIG0oYSl7dmFyIGM9YS5nZXROb2RlcygpO2lmKCFsKGMpKXRocm93IGIuY3JlYXRlRXJyb3IoXCJnZXRTaW5nbGVFbGVtZW50RnJvbVJhbmdlOiByYW5nZSBcIithLmluc3BlY3QoKStcIiBkaWQgbm90IGNvbnNpc3Qgb2YgYSBzaW5nbGUgZWxlbWVudFwiKTtyZXR1cm4gY1swXX1mdW5jdGlvbiBuKGEpe3JldHVybiEhYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEudGV4dH1mdW5jdGlvbiBvKGEsYil7dmFyIGM9bmV3IEcoYik7YS5fcmFuZ2VzPVtjXSxoKGEsYywhMSksYS5yYW5nZUNvdW50PTEsYS5pc0NvbGxhcHNlZD1jLmNvbGxhcHNlZH1mdW5jdGlvbiBwKGIpe2lmKGIuX3Jhbmdlcy5sZW5ndGg9MCxcIk5vbmVcIj09Yi5kb2NTZWxlY3Rpb24udHlwZSlqKGIpO2Vsc2V7dmFyIGM9Yi5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZihuKGMpKW8oYixjKTtlbHNle2IucmFuZ2VDb3VudD1jLmxlbmd0aDtmb3IodmFyIGQsZT1MKGMuaXRlbSgwKSksZj0wO2Y8Yi5yYW5nZUNvdW50OysrZilkPWEuY3JlYXRlUmFuZ2UoZSksZC5zZWxlY3ROb2RlKGMuaXRlbShmKSksYi5fcmFuZ2VzLnB1c2goZCk7Yi5pc0NvbGxhcHNlZD0xPT1iLnJhbmdlQ291bnQmJmIuX3Jhbmdlc1swXS5jb2xsYXBzZWQsaChiLGIuX3Jhbmdlc1tiLnJhbmdlQ291bnQtMV0sITEpfX19ZnVuY3Rpb24gcShhLGMpe2Zvcih2YXIgZD1hLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLGU9bShjKSxmPUwoZC5pdGVtKDApKSxnPU0oZikuY3JlYXRlQ29udHJvbFJhbmdlKCksaD0wLGk9ZC5sZW5ndGg7aT5oOysraClnLmFkZChkLml0ZW0oaCkpO3RyeXtnLmFkZChlKX1jYXRjaChqKXt0aHJvdyBiLmNyZWF0ZUVycm9yKFwiYWRkUmFuZ2UoKTogRWxlbWVudCB3aXRoaW4gdGhlIHNwZWNpZmllZCBSYW5nZSBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24gKGRvZXMgaXQgaGF2ZSBsYXlvdXQ/KVwiKX1nLnNlbGVjdCgpLHAoYSl9ZnVuY3Rpb24gcihhLGIsYyl7dGhpcy5uYXRpdmVTZWxlY3Rpb249YSx0aGlzLmRvY1NlbGVjdGlvbj1iLHRoaXMuX3Jhbmdlcz1bXSx0aGlzLndpbj1jLHRoaXMucmVmcmVzaCgpfWZ1bmN0aW9uIHMoYSl7YS53aW49YS5hbmNob3JOb2RlPWEuZm9jdXNOb2RlPWEuX3Jhbmdlcz1udWxsLGEucmFuZ2VDb3VudD1hLmFuY2hvck9mZnNldD1hLmZvY3VzT2Zmc2V0PTAsYS5kZXRhY2hlZD0hMH1mdW5jdGlvbiB0KGEsYil7Zm9yKHZhciBjLGQsZT1iYS5sZW5ndGg7ZS0tOylpZihjPWJhW2VdLGQ9Yy5zZWxlY3Rpb24sXCJkZWxldGVBbGxcIj09YilzKGQpO2Vsc2UgaWYoYy53aW49PWEpcmV0dXJuXCJkZWxldGVcIj09Yj8oYmEuc3BsaWNlKGUsMSksITApOmQ7cmV0dXJuXCJkZWxldGVBbGxcIj09YiYmKGJhLmxlbmd0aD0wKSxudWxsfWZ1bmN0aW9uIHUoYSxjKXtmb3IodmFyIGQsZT1MKGNbMF0uc3RhcnRDb250YWluZXIpLGY9TShlKS5jcmVhdGVDb250cm9sUmFuZ2UoKSxnPTAsaD1jLmxlbmd0aDtoPmc7KytnKXtkPW0oY1tnXSk7dHJ5e2YuYWRkKGQpfWNhdGNoKGkpe3Rocm93IGIuY3JlYXRlRXJyb3IoXCJzZXRSYW5nZXMoKTogRWxlbWVudCB3aXRoaW4gb25lIG9mIHRoZSBzcGVjaWZpZWQgUmFuZ2VzIGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbiAoZG9lcyBpdCBoYXZlIGxheW91dD8pXCIpfX1mLnNlbGVjdCgpLHAoYSl9ZnVuY3Rpb24gdihhLGIpe2lmKGEud2luLmRvY3VtZW50IT1MKGIpKXRocm93IG5ldyBIKFwiV1JPTkdfRE9DVU1FTlRfRVJSXCIpfWZ1bmN0aW9uIHcoYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU7dGhpcy5yYW5nZUNvdW50PyhlPXRoaXMuZ2V0UmFuZ2VBdCgwKSxlW1wic2V0XCIrKGI/XCJTdGFydFwiOlwiRW5kXCIpXShjLGQpKTooZT1hLmNyZWF0ZVJhbmdlKHRoaXMud2luLmRvY3VtZW50KSxlLnNldFN0YXJ0QW5kRW5kKGMsZCkpLHRoaXMuc2V0U2luZ2xlUmFuZ2UoZSx0aGlzLmlzQmFja3dhcmQoKSl9fWZ1bmN0aW9uIHgoYSl7dmFyIGI9W10sYz1uZXcgSShhLmFuY2hvck5vZGUsYS5hbmNob3JPZmZzZXQpLGQ9bmV3IEkoYS5mb2N1c05vZGUsYS5mb2N1c09mZnNldCksZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmdldE5hbWU/YS5nZXROYW1lKCk6XCJTZWxlY3Rpb25cIjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5yYW5nZUNvdW50KWZvcih2YXIgZj0wLGc9YS5yYW5nZUNvdW50O2c+ZjsrK2YpYltmXT1GLmluc3BlY3QoYS5nZXRSYW5nZUF0KGYpKTtyZXR1cm5cIltcIitlK1wiKFJhbmdlczogXCIrYi5qb2luKFwiLCBcIikrXCIpKGFuY2hvcjogXCIrYy5pbnNwZWN0KCkrXCIsIGZvY3VzOiBcIitkLmluc3BlY3QoKStcIl1cIn1hLmNvbmZpZy5jaGVja1NlbGVjdGlvblJhbmdlcz0hMDt2YXIgeSx6LEE9XCJib29sZWFuXCIsQj1cIm51bWJlclwiLEM9YS5kb20sRD1hLnV0aWwsRT1ELmlzSG9zdE1ldGhvZCxGPWEuRG9tUmFuZ2UsRz1hLldyYXBwZWRSYW5nZSxIPWEuRE9NRXhjZXB0aW9uLEk9Qy5Eb21Qb3NpdGlvbixKPWEuZmVhdHVyZXMsSz1cIkNvbnRyb2xcIixMPUMuZ2V0RG9jdW1lbnQsTT1DLmdldEJvZHksTj1GLnJhbmdlc0VxdWFsLE89RSh3aW5kb3csXCJnZXRTZWxlY3Rpb25cIiksUD1ELmlzSG9zdE9iamVjdChkb2N1bWVudCxcInNlbGVjdGlvblwiKTtKLmltcGxlbWVudHNXaW5HZXRTZWxlY3Rpb249TyxKLmltcGxlbWVudHNEb2NTZWxlY3Rpb249UDt2YXIgUT1QJiYoIU98fGEuY29uZmlnLnByZWZlclRleHRSYW5nZSk7aWYoUSl5PWYsYS5pc1NlbGVjdGlvblZhbGlkPWZ1bmN0aW9uKGEpe3ZhciBiPWQoYSxcImlzU2VsZWN0aW9uVmFsaWRcIikuZG9jdW1lbnQsYz1iLnNlbGVjdGlvbjtyZXR1cm5cIk5vbmVcIiE9Yy50eXBlfHxMKGMuY3JlYXRlUmFuZ2UoKS5wYXJlbnRFbGVtZW50KCkpPT1ifTtlbHNle2lmKCFPKXJldHVybiBiLmZhaWwoXCJOZWl0aGVyIGRvY3VtZW50LnNlbGVjdGlvbiBvciB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkgZGV0ZWN0ZWQuXCIpLCExO3k9ZSxhLmlzU2VsZWN0aW9uVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH19YS5nZXROYXRpdmVTZWxlY3Rpb249eTt2YXIgUj15KCk7aWYoIVIpcmV0dXJuIGIuZmFpbChcIk5hdGl2ZSBzZWxlY3Rpb24gd2FzIG51bGwgKHBvc3NpYmx5IGlzc3VlIDEzOD8pXCIpLCExO3ZhciBTPWEuY3JlYXRlTmF0aXZlUmFuZ2UoZG9jdW1lbnQpLFQ9TShkb2N1bWVudCksVT1ELmFyZUhvc3RQcm9wZXJ0aWVzKFIsW1wiYW5jaG9yTm9kZVwiLFwiZm9jdXNOb2RlXCIsXCJhbmNob3JPZmZzZXRcIixcImZvY3VzT2Zmc2V0XCJdKTtKLnNlbGVjdGlvbkhhc0FuY2hvckFuZEZvY3VzPVU7dmFyIFY9RShSLFwiZXh0ZW5kXCIpO0ouc2VsZWN0aW9uSGFzRXh0ZW5kPVY7dmFyIFc9dHlwZW9mIFIucmFuZ2VDb3VudD09QjtKLnNlbGVjdGlvbkhhc1JhbmdlQ291bnQ9Vzt2YXIgWD0hMSxZPSEwLFo9Vj9mdW5jdGlvbihiLGMpe3ZhciBkPUYuZ2V0UmFuZ2VEb2N1bWVudChjKSxlPWEuY3JlYXRlUmFuZ2UoZCk7ZS5jb2xsYXBzZVRvUG9pbnQoYy5lbmRDb250YWluZXIsYy5lbmRPZmZzZXQpLGIuYWRkUmFuZ2UoayhlKSksYi5leHRlbmQoYy5zdGFydENvbnRhaW5lcixjLnN0YXJ0T2Zmc2V0KX06bnVsbDtELmFyZUhvc3RNZXRob2RzKFIsW1wiYWRkUmFuZ2VcIixcImdldFJhbmdlQXRcIixcInJlbW92ZUFsbFJhbmdlc1wiXSkmJnR5cGVvZiBSLnJhbmdlQ291bnQ9PUImJkouaW1wbGVtZW50c0RvbVJhbmdlJiYhZnVuY3Rpb24oKXt2YXIgYj13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7aWYoYil7Zm9yKHZhciBjPWIucmFuZ2VDb3VudCxkPWM+MSxlPVtdLGY9ZyhiKSxoPTA7Yz5oOysraCllW2hdPWIuZ2V0UmFuZ2VBdChoKTt2YXIgaT1DLmNyZWF0ZVRlc3RFbGVtZW50KGRvY3VtZW50LFwiXCIsITEpLGo9aS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIsKgwqDCoFwiKSksaz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2lmKGsuc2V0U3RhcnQoaiwxKSxrLmNvbGxhcHNlKCEwKSxiLnJlbW92ZUFsbFJhbmdlcygpLGIuYWRkUmFuZ2UoayksWT0xPT1iLnJhbmdlQ291bnQsYi5yZW1vdmVBbGxSYW5nZXMoKSwhZCl7dmFyIGw9d2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9DaHJvbWVcXC8oLio/KSAvKTtpZihsJiZwYXJzZUludChsWzFdKT49MzYpWD0hMTtlbHNle3ZhciBtPWsuY2xvbmVSYW5nZSgpO2suc2V0U3RhcnQoaiwwKSxtLnNldEVuZChqLDMpLG0uc2V0U3RhcnQoaiwyKSxiLmFkZFJhbmdlKGspLGIuYWRkUmFuZ2UobSksWD0yPT1iLnJhbmdlQ291bnR9fWZvcihDLnJlbW92ZU5vZGUoaSksYi5yZW1vdmVBbGxSYW5nZXMoKSxoPTA7Yz5oOysraCkwPT1oJiZmP1o/WihiLGVbaF0pOihhLndhcm4oXCJSYW5neSBpbml0aWFsaXphdGlvbjogb3JpZ2luYWwgc2VsZWN0aW9uIHdhcyBiYWNrd2FyZHMgYnV0IHNlbGVjdGlvbiBoYXMgYmVlbiByZXN0b3JlZCBmb3J3YXJkcyBiZWNhdXNlIHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgU2VsZWN0aW9uLmV4dGVuZFwiKSxiLmFkZFJhbmdlKGVbaF0pKTpiLmFkZFJhbmdlKGVbaF0pfX0oKSxKLnNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXM9WCxKLmNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0aW9uc1N1cHBvcnRlZD1ZO3ZhciAkLF89ITE7VCYmRShULFwiY3JlYXRlQ29udHJvbFJhbmdlXCIpJiYoJD1ULmNyZWF0ZUNvbnRyb2xSYW5nZSgpLEQuYXJlSG9zdFByb3BlcnRpZXMoJCxbXCJpdGVtXCIsXCJhZGRcIl0pJiYoXz0hMCkpLEouaW1wbGVtZW50c0NvbnRyb2xSYW5nZT1fLHo9VT9mdW5jdGlvbihhKXtyZXR1cm4gYS5hbmNob3JOb2RlPT09YS5mb2N1c05vZGUmJmEuYW5jaG9yT2Zmc2V0PT09YS5mb2N1c09mZnNldH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmFuZ2VDb3VudD9hLmdldFJhbmdlQXQoYS5yYW5nZUNvdW50LTEpLmNvbGxhcHNlZDohMX07dmFyIGFhO0UoUixcImdldFJhbmdlQXRcIik/YWE9ZnVuY3Rpb24oYSxiKXt0cnl7cmV0dXJuIGEuZ2V0UmFuZ2VBdChiKX1jYXRjaChjKXtyZXR1cm4gbnVsbH19OlUmJihhYT1mdW5jdGlvbihiKXt2YXIgYz1MKGIuYW5jaG9yTm9kZSksZD1hLmNyZWF0ZVJhbmdlKGMpO3JldHVybiBkLnNldFN0YXJ0QW5kRW5kKGIuYW5jaG9yTm9kZSxiLmFuY2hvck9mZnNldCxiLmZvY3VzTm9kZSxiLmZvY3VzT2Zmc2V0KSxkLmNvbGxhcHNlZCE9PXRoaXMuaXNDb2xsYXBzZWQmJmQuc2V0U3RhcnRBbmRFbmQoYi5mb2N1c05vZGUsYi5mb2N1c09mZnNldCxiLmFuY2hvck5vZGUsYi5hbmNob3JPZmZzZXQpLGR9KSxyLnByb3RvdHlwZT1hLnNlbGVjdGlvblByb3RvdHlwZTt2YXIgYmE9W10sY2E9ZnVuY3Rpb24oYSl7aWYoYSYmYSBpbnN0YW5jZW9mIHIpcmV0dXJuIGEucmVmcmVzaCgpLGE7YT1kKGEsXCJnZXROYXRpdmVTZWxlY3Rpb25cIik7dmFyIGI9dChhKSxjPXkoYSksZT1QP2YoYSk6bnVsbDtyZXR1cm4gYj8oYi5uYXRpdmVTZWxlY3Rpb249YyxiLmRvY1NlbGVjdGlvbj1lLGIucmVmcmVzaCgpKTooYj1uZXcgcihjLGUsYSksYmEucHVzaCh7d2luOmEsc2VsZWN0aW9uOmJ9KSksYn07YS5nZXRTZWxlY3Rpb249Y2EsRC5jcmVhdGVBbGlhc0ZvckRlcHJlY2F0ZWRNZXRob2QoYSxcImdldElmcmFtZVNlbGVjdGlvblwiLFwiZ2V0U2VsZWN0aW9uXCIpO3ZhciBkYT1yLnByb3RvdHlwZTtpZighUSYmVSYmRC5hcmVIb3N0TWV0aG9kcyhSLFtcInJlbW92ZUFsbFJhbmdlc1wiLFwiYWRkUmFuZ2VcIl0pKXtkYS5yZW1vdmVBbGxSYW5nZXM9ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZVNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKSxqKHRoaXMpfTt2YXIgZWE9ZnVuY3Rpb24oYSxiKXtaKGEubmF0aXZlU2VsZWN0aW9uLGIpLGEucmVmcmVzaCgpfTtXP2RhLmFkZFJhbmdlPWZ1bmN0aW9uKGIsZCl7aWYoXyYmUCYmdGhpcy5kb2NTZWxlY3Rpb24udHlwZT09SylxKHRoaXMsYik7ZWxzZSBpZihjKGQpJiZWKWVhKHRoaXMsYik7ZWxzZXt2YXIgZTtYP2U9dGhpcy5yYW5nZUNvdW50Oih0aGlzLnJlbW92ZUFsbFJhbmdlcygpLGU9MCk7dmFyIGY9ayhiKS5jbG9uZVJhbmdlKCk7dHJ5e3RoaXMubmF0aXZlU2VsZWN0aW9uLmFkZFJhbmdlKGYpfWNhdGNoKGcpe31pZih0aGlzLnJhbmdlQ291bnQ9dGhpcy5uYXRpdmVTZWxlY3Rpb24ucmFuZ2VDb3VudCx0aGlzLnJhbmdlQ291bnQ9PWUrMSl7aWYoYS5jb25maWcuY2hlY2tTZWxlY3Rpb25SYW5nZXMpe3ZhciBpPWFhKHRoaXMubmF0aXZlU2VsZWN0aW9uLHRoaXMucmFuZ2VDb3VudC0xKTtpJiYhTihpLGIpJiYoYj1uZXcgRyhpKSl9dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudC0xXT1iLGgodGhpcyxiLGhhKHRoaXMubmF0aXZlU2VsZWN0aW9uKSksdGhpcy5pc0NvbGxhcHNlZD16KHRoaXMpfWVsc2UgdGhpcy5yZWZyZXNoKCl9fTpkYS5hZGRSYW5nZT1mdW5jdGlvbihhLGIpe2MoYikmJlY/ZWEodGhpcyxhKToodGhpcy5uYXRpdmVTZWxlY3Rpb24uYWRkUmFuZ2UoayhhKSksdGhpcy5yZWZyZXNoKCkpfSxkYS5zZXRSYW5nZXM9ZnVuY3Rpb24oYSl7aWYoXyYmUCYmYS5sZW5ndGg+MSl1KHRoaXMsYSk7ZWxzZXt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iOysrYil0aGlzLmFkZFJhbmdlKGFbYl0pfX19ZWxzZXtpZighKEUoUixcImVtcHR5XCIpJiZFKFMsXCJzZWxlY3RcIikmJl8mJlEpKXJldHVybiBiLmZhaWwoXCJObyBtZWFucyBvZiBzZWxlY3RpbmcgYSBSYW5nZSBvciBUZXh0UmFuZ2Ugd2FzIGZvdW5kXCIpLCExO2RhLnJlbW92ZUFsbFJhbmdlcz1mdW5jdGlvbigpe3RyeXtpZih0aGlzLmRvY1NlbGVjdGlvbi5lbXB0eSgpLFwiTm9uZVwiIT10aGlzLmRvY1NlbGVjdGlvbi50eXBlKXt2YXIgYTtpZih0aGlzLmFuY2hvck5vZGUpYT1MKHRoaXMuYW5jaG9yTm9kZSk7ZWxzZSBpZih0aGlzLmRvY1NlbGVjdGlvbi50eXBlPT1LKXt2YXIgYj10aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2IubGVuZ3RoJiYoYT1MKGIuaXRlbSgwKSkpfWlmKGEpe3ZhciBjPU0oYSkuY3JlYXRlVGV4dFJhbmdlKCk7Yy5zZWxlY3QoKSx0aGlzLmRvY1NlbGVjdGlvbi5lbXB0eSgpfX19Y2F0Y2goZCl7fWoodGhpcyl9LGRhLmFkZFJhbmdlPWZ1bmN0aW9uKGIpe3RoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUs/cSh0aGlzLGIpOihhLldyYXBwZWRUZXh0UmFuZ2UucmFuZ2VUb1RleHRSYW5nZShiKS5zZWxlY3QoKSx0aGlzLl9yYW5nZXNbMF09Yix0aGlzLnJhbmdlQ291bnQ9MSx0aGlzLmlzQ29sbGFwc2VkPXRoaXMuX3Jhbmdlc1swXS5jb2xsYXBzZWQsaCh0aGlzLGIsITEpKX0sZGEuc2V0UmFuZ2VzPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7dmFyIGI9YS5sZW5ndGg7Yj4xP3UodGhpcyxhKTpiJiZ0aGlzLmFkZFJhbmdlKGFbMF0pfX1kYS5nZXRSYW5nZUF0PWZ1bmN0aW9uKGEpe2lmKDA+YXx8YT49dGhpcy5yYW5nZUNvdW50KXRocm93IG5ldyBIKFwiSU5ERVhfU0laRV9FUlJcIik7cmV0dXJuIHRoaXMuX3Jhbmdlc1thXS5jbG9uZVJhbmdlKCl9O3ZhciBmYTtpZihRKWZhPWZ1bmN0aW9uKGIpe3ZhciBjO2EuaXNTZWxlY3Rpb25WYWxpZChiLndpbik/Yz1iLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOihjPU0oYi53aW4uZG9jdW1lbnQpLmNyZWF0ZVRleHRSYW5nZSgpLGMuY29sbGFwc2UoITApKSxiLmRvY1NlbGVjdGlvbi50eXBlPT1LP3AoYik6bihjKT9vKGIsYyk6aihiKX07ZWxzZSBpZihFKFIsXCJnZXRSYW5nZUF0XCIpJiZ0eXBlb2YgUi5yYW5nZUNvdW50PT1CKWZhPWZ1bmN0aW9uKGIpe2lmKF8mJlAmJmIuZG9jU2VsZWN0aW9uLnR5cGU9PUspcChiKTtlbHNlIGlmKGIuX3Jhbmdlcy5sZW5ndGg9Yi5yYW5nZUNvdW50PWIubmF0aXZlU2VsZWN0aW9uLnJhbmdlQ291bnQsYi5yYW5nZUNvdW50KXtmb3IodmFyIGM9MCxkPWIucmFuZ2VDb3VudDtkPmM7KytjKWIuX3Jhbmdlc1tjXT1uZXcgYS5XcmFwcGVkUmFuZ2UoYi5uYXRpdmVTZWxlY3Rpb24uZ2V0UmFuZ2VBdChjKSk7aChiLGIuX3Jhbmdlc1tiLnJhbmdlQ291bnQtMV0saGEoYi5uYXRpdmVTZWxlY3Rpb24pKSxiLmlzQ29sbGFwc2VkPXooYil9ZWxzZSBqKGIpfTtlbHNle2lmKCFVfHx0eXBlb2YgUi5pc0NvbGxhcHNlZCE9QXx8dHlwZW9mIFMuY29sbGFwc2VkIT1BfHwhSi5pbXBsZW1lbnRzRG9tUmFuZ2UpcmV0dXJuIGIuZmFpbChcIk5vIG1lYW5zIG9mIG9idGFpbmluZyBhIFJhbmdlIG9yIFRleHRSYW5nZSBmcm9tIHRoZSB1c2VyJ3Mgc2VsZWN0aW9uIHdhcyBmb3VuZFwiKSwhMTtmYT1mdW5jdGlvbihhKXt2YXIgYixjPWEubmF0aXZlU2VsZWN0aW9uO2MuYW5jaG9yTm9kZT8oYj1hYShjLDApLGEuX3Jhbmdlcz1bYl0sYS5yYW5nZUNvdW50PTEsaShhKSxhLmlzQ29sbGFwc2VkPXooYSkpOmooYSl9fWRhLnJlZnJlc2g9ZnVuY3Rpb24oYSl7dmFyIGI9YT90aGlzLl9yYW5nZXMuc2xpY2UoMCk6bnVsbCxjPXRoaXMuYW5jaG9yTm9kZSxkPXRoaXMuYW5jaG9yT2Zmc2V0O2lmKGZhKHRoaXMpLGEpe3ZhciBlPWIubGVuZ3RoO2lmKGUhPXRoaXMuX3Jhbmdlcy5sZW5ndGgpcmV0dXJuITA7aWYodGhpcy5hbmNob3JOb2RlIT1jfHx0aGlzLmFuY2hvck9mZnNldCE9ZClyZXR1cm4hMDtmb3IoO2UtLTspaWYoIU4oYltlXSx0aGlzLl9yYW5nZXNbZV0pKXJldHVybiEwO3JldHVybiExfX07dmFyIGdhPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBbGxSYW5nZXMoKTthLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih2YXIgZD0wLGU9Yy5sZW5ndGg7ZT5kOysrZClOKGIsY1tkXSl8fGEuYWRkUmFuZ2UoY1tkXSk7YS5yYW5nZUNvdW50fHxqKGEpfTtfJiZQP2RhLnJlbW92ZVJhbmdlPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUspe2Zvcih2YXIgYixjPXRoaXMuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksZD1tKGEpLGU9TChjLml0ZW0oMCkpLGY9TShlKS5jcmVhdGVDb250cm9sUmFuZ2UoKSxnPSExLGg9MCxpPWMubGVuZ3RoO2k+aDsrK2gpYj1jLml0ZW0oaCksYiE9PWR8fGc/Zi5hZGQoYy5pdGVtKGgpKTpnPSEwO2Yuc2VsZWN0KCkscCh0aGlzKX1lbHNlIGdhKHRoaXMsYSl9OmRhLnJlbW92ZVJhbmdlPWZ1bmN0aW9uKGEpe2dhKHRoaXMsYSl9O3ZhciBoYTshUSYmVSYmSi5pbXBsZW1lbnRzRG9tUmFuZ2U/KGhhPWcsZGEuaXNCYWNrd2FyZD1mdW5jdGlvbigpe3JldHVybiBoYSh0aGlzKX0pOmhhPWRhLmlzQmFja3dhcmQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZGEuaXNCYWNrd2FyZHM9ZGEuaXNCYWNrd2FyZCxkYS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLnJhbmdlQ291bnQ7Yz5iOysrYilhW2JdPVwiXCIrdGhpcy5fcmFuZ2VzW2JdO3JldHVybiBhLmpvaW4oXCJcIil9LGRhLmNvbGxhcHNlPWZ1bmN0aW9uKGIsYyl7dih0aGlzLGIpO3ZhciBkPWEuY3JlYXRlUmFuZ2UoYik7ZC5jb2xsYXBzZVRvUG9pbnQoYixjKSx0aGlzLnNldFNpbmdsZVJhbmdlKGQpLHRoaXMuaXNDb2xsYXBzZWQ9ITB9LGRhLmNvbGxhcHNlVG9TdGFydD1mdW5jdGlvbigpe2lmKCF0aGlzLnJhbmdlQ291bnQpdGhyb3cgbmV3IEgoXCJJTlZBTElEX1NUQVRFX0VSUlwiKTt2YXIgYT10aGlzLl9yYW5nZXNbMF07dGhpcy5jb2xsYXBzZShhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpfSxkYS5jb2xsYXBzZVRvRW5kPWZ1bmN0aW9uKCl7aWYoIXRoaXMucmFuZ2VDb3VudCl0aHJvdyBuZXcgSChcIklOVkFMSURfU1RBVEVfRVJSXCIpO3ZhciBhPXRoaXMuX3Jhbmdlc1t0aGlzLnJhbmdlQ291bnQtMV07dGhpcy5jb2xsYXBzZShhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCl9LGRhLnNlbGVjdEFsbENoaWxkcmVuPWZ1bmN0aW9uKGIpe3YodGhpcyxiKTt2YXIgYz1hLmNyZWF0ZVJhbmdlKGIpO2Muc2VsZWN0Tm9kZUNvbnRlbnRzKGIpLHRoaXMuc2V0U2luZ2xlUmFuZ2UoYyl9LGRhLmRlbGV0ZUZyb21Eb2N1bWVudD1mdW5jdGlvbigpe2lmKF8mJlAmJnRoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUspe2Zvcih2YXIgYSxiPXRoaXMuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7Yi5sZW5ndGg7KWE9Yi5pdGVtKDApLGIucmVtb3ZlKGEpLEMucmVtb3ZlTm9kZShhKTt0aGlzLnJlZnJlc2goKX1lbHNlIGlmKHRoaXMucmFuZ2VDb3VudCl7dmFyIGM9dGhpcy5nZXRBbGxSYW5nZXMoKTtpZihjLmxlbmd0aCl7dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2U+ZDsrK2QpY1tkXS5kZWxldGVDb250ZW50cygpO3RoaXMuYWRkUmFuZ2UoY1tlLTFdKX19fSxkYS5lYWNoUmFuZ2U9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuX3Jhbmdlcy5sZW5ndGg7ZD5jOysrYylpZihhKHRoaXMuZ2V0UmFuZ2VBdChjKSkpcmV0dXJuIGJ9LGRhLmdldEFsbFJhbmdlcz1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB0aGlzLmVhY2hSYW5nZShmdW5jdGlvbihiKXthLnB1c2goYil9KSxhfSxkYS5zZXRTaW5nbGVSYW5nZT1mdW5jdGlvbihhLGIpe3RoaXMucmVtb3ZlQWxsUmFuZ2VzKCksdGhpcy5hZGRSYW5nZShhLGIpfSxkYS5jYWxsTWV0aG9kT25FYWNoUmFuZ2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtyZXR1cm4gdGhpcy5lYWNoUmFuZ2UoZnVuY3Rpb24oZCl7Yy5wdXNoKGRbYV0uYXBwbHkoZCxifHxbXSkpfSksY30sZGEuc2V0U3RhcnQ9dyghMCksZGEuc2V0RW5kPXcoITEpLGEucmFuZ2VQcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKGEpe2NhKHRoaXMuZ2V0RG9jdW1lbnQoKSkuc2V0U2luZ2xlUmFuZ2UodGhpcyxhKX0sZGEuY2hhbmdlRWFjaFJhbmdlPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5pc0JhY2t3YXJkKCk7dGhpcy5lYWNoUmFuZ2UoZnVuY3Rpb24oYyl7YShjKSxiLnB1c2goYyl9KSx0aGlzLnJlbW92ZUFsbFJhbmdlcygpLGMmJjE9PWIubGVuZ3RoP3RoaXMuYWRkUmFuZ2UoYlswXSxcImJhY2t3YXJkXCIpOnRoaXMuc2V0UmFuZ2VzKGIpfSxkYS5jb250YWluc05vZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoUmFuZ2UoZnVuY3Rpb24oYyl7cmV0dXJuIGMuY29udGFpbnNOb2RlKGEsYil9LCEwKXx8ITF9LGRhLmdldEJvb2ttYXJrPWZ1bmN0aW9uKGEpe3JldHVybntiYWNrd2FyZDp0aGlzLmlzQmFja3dhcmQoKSxyYW5nZUJvb2ttYXJrczp0aGlzLmNhbGxNZXRob2RPbkVhY2hSYW5nZShcImdldEJvb2ttYXJrXCIsW2FdKX19LGRhLm1vdmVUb0Jvb2ttYXJrPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYyxkLGU9W10sZj0wO2M9Yi5yYW5nZUJvb2ttYXJrc1tmKytdOylkPWEuY3JlYXRlUmFuZ2UodGhpcy53aW4pLGQubW92ZVRvQm9va21hcmsoYyksZS5wdXNoKGQpO2IuYmFja3dhcmQ/dGhpcy5zZXRTaW5nbGVSYW5nZShlWzBdLFwiYmFja3dhcmRcIik6dGhpcy5zZXRSYW5nZXMoZSl9LGRhLnNhdmVSYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm57YmFja3dhcmQ6dGhpcy5pc0JhY2t3YXJkKCkscmFuZ2VzOnRoaXMuY2FsbE1ldGhvZE9uRWFjaFJhbmdlKFwiY2xvbmVSYW5nZVwiKX19LGRhLnJlc3RvcmVSYW5nZXM9ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTtmb3IodmFyIGIsYz0wO2I9YS5yYW5nZXNbY107KytjKXRoaXMuYWRkUmFuZ2UoYixhLmJhY2t3YXJkJiYwPT1jKX0sZGEudG9IdG1sPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMuZWFjaFJhbmdlKGZ1bmN0aW9uKGIpe2EucHVzaChGLnRvSHRtbChiKSl9KSxhLmpvaW4oXCJcIil9LEouaW1wbGVtZW50c1RleHRSYW5nZSYmKGRhLmdldE5hdGl2ZVRleHRSYW5nZT1mdW5jdGlvbigpe3ZhciBjO2lmKGM9dGhpcy5kb2NTZWxlY3Rpb24pe3ZhciBkPWMuY3JlYXRlUmFuZ2UoKTtpZihuKGQpKXJldHVybiBkO3Rocm93IGIuY3JlYXRlRXJyb3IoXCJnZXROYXRpdmVUZXh0UmFuZ2U6IHNlbGVjdGlvbiBpcyBhIGNvbnRyb2wgc2VsZWN0aW9uXCIpfWlmKHRoaXMucmFuZ2VDb3VudD4wKXJldHVybiBhLldyYXBwZWRUZXh0UmFuZ2UucmFuZ2VUb1RleHRSYW5nZSh0aGlzLmdldFJhbmdlQXQoMCkpO3Rocm93IGIuY3JlYXRlRXJyb3IoXCJnZXROYXRpdmVUZXh0UmFuZ2U6IHNlbGVjdGlvbiBjb250YWlucyBubyByYW5nZVwiKX0pLGRhLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIldyYXBwZWRTZWxlY3Rpb25cIn0sZGEuaW5zcGVjdD1mdW5jdGlvbigpe3JldHVybiB4KHRoaXMpfSxkYS5kZXRhY2g9ZnVuY3Rpb24oKXt0KHRoaXMud2luLFwiZGVsZXRlXCIpLHModGhpcyl9LHIuZGV0YWNoQWxsPWZ1bmN0aW9uKCl7dChudWxsLFwiZGVsZXRlQWxsXCIpfSxyLmluc3BlY3Q9eCxyLmlzRGlyZWN0aW9uQmFja3dhcmQ9YyxhLlNlbGVjdGlvbj1yLGEuc2VsZWN0aW9uUHJvdG90eXBlPWRhLGEuYWRkU2hpbUxpc3RlbmVyKGZ1bmN0aW9uKGEpe1widW5kZWZpbmVkXCI9PXR5cGVvZiBhLmdldFNlbGVjdGlvbiYmKGEuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGNhKGEpfSksYT1udWxsfSl9KTt2YXIgTT0hMSxOPWZ1bmN0aW9uKGEpe018fChNPSEwLCFILmluaXRpYWxpemVkJiZILmNvbmZpZy5hdXRvSW5pdGlhbGl6ZSYmbCgpKX07cmV0dXJuIEYmJihcImNvbXBsZXRlXCI9PWRvY3VtZW50LnJlYWR5U3RhdGU/TigpOihhKGRvY3VtZW50LFwiYWRkRXZlbnRMaXN0ZW5lclwiKSYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixOLCExKSxKKHdpbmRvdyxcImxvYWRcIixOKSkpLEh9LHRoaXMpLGZ1bmN0aW9uKGIsYyl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCIuL3Jhbmd5LWNvcmVcIl0sYik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIGE/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwicmFuZ3lcIikpOmIoYy5yYW5neSl9KGZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZU1vZHVsZShcIlNhdmVSZXN0b3JlXCIsW1wiV3JhcHBlZFJhbmdlXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3JldHVybihifHxkb2N1bWVudCkuZ2V0RWxlbWVudEJ5SWQoYSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBjLGQ9XCJzZWxlY3Rpb25Cb3VuZGFyeV9cIisgK25ldyBEYXRlK1wiX1wiKyhcIlwiK01hdGgucmFuZG9tKCkpLnNsaWNlKDIpLGU9by5nZXREb2N1bWVudChhLnN0YXJ0Q29udGFpbmVyKSxmPWEuY2xvbmVSYW5nZSgpO3JldHVybiBmLmNvbGxhcHNlKGIpLGM9ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxjLmlkPWQsYy5zdHlsZS5saW5lSGVpZ2h0PVwiMFwiLGMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixjLmNsYXNzTmFtZT1cInJhbmd5U2VsZWN0aW9uQm91bmRhcnlcIixjLmFwcGVuZENoaWxkKGUuY3JlYXRlVGV4dE5vZGUocikpLGYuaW5zZXJ0Tm9kZShjKSxjfWZ1bmN0aW9uIGUoYSxkLGUsZil7dmFyIGc9YyhlLGEpO2c/KGRbZj9cInNldFN0YXJ0QmVmb3JlXCI6XCJzZXRFbmRCZWZvcmVcIl0oZykscChnKSk6Yi53YXJuKFwiTWFya2VyIGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC4gQ2Fubm90IHJlc3RvcmUgc2VsZWN0aW9uLlwiKX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGIuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGEuU1RBUlRfVE9fU1RBUlQsYSl9ZnVuY3Rpb24gZyhiLGMpe3ZhciBlLGYsZz1hLkRvbVJhbmdlLmdldFJhbmdlRG9jdW1lbnQoYiksaD1iLnRvU3RyaW5nKCksaT1xKGMpO3JldHVybiBiLmNvbGxhcHNlZD8oZj1kKGIsITEpLHtkb2N1bWVudDpnLG1hcmtlcklkOmYuaWQsY29sbGFwc2VkOiEwfSk6KGY9ZChiLCExKSxlPWQoYiwhMCkse2RvY3VtZW50Omcsc3RhcnRNYXJrZXJJZDplLmlkLGVuZE1hcmtlcklkOmYuaWQsY29sbGFwc2VkOiExLGJhY2t3YXJkOmksdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIm9yaWdpbmFsIHRleHQ6ICdcIitoK1wiJywgbmV3IHRleHQ6ICdcIitiLnRvU3RyaW5nKCkrXCInXCJ9fSl9ZnVuY3Rpb24gaChkLGYpe3ZhciBnPWQuZG9jdW1lbnQ7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGYmJihmPSEwKTt2YXIgaD1hLmNyZWF0ZVJhbmdlKGcpO2lmKGQuY29sbGFwc2VkKXt2YXIgaT1jKGQubWFya2VySWQsZyk7aWYoaSl7aS5zdHlsZS5kaXNwbGF5PVwiaW5saW5lXCI7dmFyIGo9aS5wcmV2aW91c1NpYmxpbmc7aiYmMz09ai5ub2RlVHlwZT8ocChpKSxoLmNvbGxhcHNlVG9Qb2ludChqLGoubGVuZ3RoKSk6KGguY29sbGFwc2VCZWZvcmUoaSkscChpKSl9ZWxzZSBiLndhcm4oXCJNYXJrZXIgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkLiBDYW5ub3QgcmVzdG9yZSBzZWxlY3Rpb24uXCIpfWVsc2UgZShnLGgsZC5zdGFydE1hcmtlcklkLCEwKSxlKGcsaCxkLmVuZE1hcmtlcklkLCExKTtyZXR1cm4gZiYmaC5ub3JtYWxpemVCb3VuZGFyaWVzKCksaH1mdW5jdGlvbiBpKGIsZCl7dmFyIGUsaCxpPVtdLGo9cShkKTtiPWIuc2xpY2UoMCksYi5zb3J0KGYpO2Zvcih2YXIgaz0wLGw9Yi5sZW5ndGg7bD5rOysraylpW2tdPWcoYltrXSxqKTtmb3Ioaz1sLTE7az49MDstLWspZT1iW2tdLGg9YS5Eb21SYW5nZS5nZXRSYW5nZURvY3VtZW50KGUpLGUuY29sbGFwc2VkP2UuY29sbGFwc2VBZnRlcihjKGlba10ubWFya2VySWQsaCkpOihlLnNldEVuZEJlZm9yZShjKGlba10uZW5kTWFya2VySWQsaCkpLGUuc2V0U3RhcnRBZnRlcihjKGlba10uc3RhcnRNYXJrZXJJZCxoKSkpO3JldHVybiBpfWZ1bmN0aW9uIGooYyl7aWYoIWEuaXNTZWxlY3Rpb25WYWxpZChjKSlyZXR1cm4gYi53YXJuKFwiQ2Fubm90IHNhdmUgc2VsZWN0aW9uLiBUaGlzIHVzdWFsbHkgaGFwcGVucyB3aGVuIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkIGFuZCB0aGUgc2VsZWN0aW9uIGRvY3VtZW50IGhhcyBsb3N0IGZvY3VzLlwiKSxudWxsO3ZhciBkPWEuZ2V0U2VsZWN0aW9uKGMpLGU9ZC5nZXRBbGxSYW5nZXMoKSxmPTE9PWUubGVuZ3RoJiZkLmlzQmFja3dhcmQoKSxnPWkoZSxmKTtyZXR1cm4gZj9kLnNldFNpbmdsZVJhbmdlKGVbMF0sZik6ZC5zZXRSYW5nZXMoZSkse3dpbjpjLHJhbmdlSW5mb3M6ZyxyZXN0b3JlZDohMX19ZnVuY3Rpb24gayhhKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPWMtMTtkPj0wO2QtLSliW2RdPWgoYVtkXSwhMCk7cmV0dXJuIGJ9ZnVuY3Rpb24gbChiLGMpe2lmKCFiLnJlc3RvcmVkKXt2YXIgZD1iLnJhbmdlSW5mb3MsZT1hLmdldFNlbGVjdGlvbihiLndpbiksZj1rKGQpLGc9ZC5sZW5ndGg7MT09ZyYmYyYmYS5mZWF0dXJlcy5zZWxlY3Rpb25IYXNFeHRlbmQmJmRbMF0uYmFja3dhcmQ/KGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShmWzBdLCEwKSk6ZS5zZXRSYW5nZXMoZiksYi5yZXN0b3JlZD0hMH19ZnVuY3Rpb24gbShhLGIpe3ZhciBkPWMoYixhKTtkJiZwKGQpfWZ1bmN0aW9uIG4oYSl7Zm9yKHZhciBiLGM9YS5yYW5nZUluZm9zLGQ9MCxlPWMubGVuZ3RoO2U+ZDsrK2QpYj1jW2RdLGIuY29sbGFwc2VkP20oYS5kb2MsYi5tYXJrZXJJZCk6KG0oYS5kb2MsYi5zdGFydE1hcmtlcklkKSxtKGEuZG9jLGIuZW5kTWFya2VySWQpKX12YXIgbz1hLmRvbSxwPW8ucmVtb3ZlTm9kZSxxPWEuU2VsZWN0aW9uLmlzRGlyZWN0aW9uQmFja3dhcmQscj1cIlxcdWZlZmZcIjthLnV0aWwuZXh0ZW5kKGEse3NhdmVSYW5nZTpnLHJlc3RvcmVSYW5nZTpoLHNhdmVSYW5nZXM6aSxyZXN0b3JlUmFuZ2VzOmssc2F2ZVNlbGVjdGlvbjpqLHJlc3RvcmVTZWxlY3Rpb246bCxyZW1vdmVNYXJrZXJFbGVtZW50Om0scmVtb3ZlTWFya2VyczpufSl9KSxhfSx0aGlzKX0oe30sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSk7IiwiIWZ1bmN0aW9uKGEsYil7YltcInRydWVcIl09YSwvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjEwXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbmZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7dGhpcy4kZ2V0PVtcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGFyZ3VtZW50c1sxXSYmKGFyZ3VtZW50c1sxXS52ZXJzaW9uPVwidGFTYW5pdGl6ZVwiKTt2YXIgYz1bXTtyZXR1cm4gZyhiLGwoYyxmdW5jdGlvbihiLGMpe3JldHVybiEvXnVuc2FmZS8udGVzdChhKGIsYykpfSkpLGMuam9pbihcIlwiKX19XX1mdW5jdGlvbiBlKGEpe3ZhciBjPVtdLGQ9bChjLGIubm9vcCk7cmV0dXJuIGQuY2hhcnMoYSksYy5qb2luKFwiXCIpfWZ1bmN0aW9uIGYoYSl7dmFyIGIsYz17fSxkPWEuc3BsaXQoXCIsXCIpO2ZvcihiPTA7YjxkLmxlbmd0aDtiKyspY1tkW2JdXT0hMDtyZXR1cm4gY31mdW5jdGlvbiBnKGEsYyl7ZnVuY3Rpb24gZChhLGQsZixnKXtpZihkPWIubG93ZXJjYXNlKGQpLEJbZF0pZm9yKDtrLmxhc3QoKSYmQ1trLmxhc3QoKV07KWUoXCJcIixrLmxhc3QoKSk7QVtkXSYmay5sYXN0KCk9PWQmJmUoXCJcIixkKSxnPXhbZF18fCEhZyxnfHxrLnB1c2goZCk7dmFyIGk9e307Zi5yZXBsYWNlKHAsZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jfHxkfHxlfHxcIlwiO2lbYl09aChmKX0pLGMuc3RhcnQmJmMuc3RhcnQoZCxpLGcpfWZ1bmN0aW9uIGUoYSxkKXt2YXIgZSxmPTA7aWYoZD1iLmxvd2VyY2FzZShkKSlmb3IoZj1rLmxlbmd0aC0xO2Y+PTAmJmtbZl0hPWQ7Zi0tKTtpZihmPj0wKXtmb3IoZT1rLmxlbmd0aC0xO2U+PWY7ZS0tKWMuZW5kJiZjLmVuZChrW2VdKTtrLmxlbmd0aD1mfX1cInN0cmluZ1wiIT10eXBlb2YgYSYmKGE9bnVsbD09PWF8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBhP1wiXCI6XCJcIithKTt2YXIgZixnLGksaixrPVtdLGw9YTtmb3Ioay5sYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGtbay5sZW5ndGgtMV19O2E7KXtpZihqPVwiXCIsZz0hMCxrLmxhc3QoKSYmRVtrLmxhc3QoKV0/KGE9YS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoW15dKik8XFxcXHMqXFxcXC9cXFxccypcIitrLmxhc3QoKStcIltePl0qPlwiLFwiaVwiKSxmdW5jdGlvbihhLGIpe3JldHVybiBiPWIucmVwbGFjZShzLFwiJDFcIikucmVwbGFjZSh1LFwiJDFcIiksYy5jaGFycyYmYy5jaGFycyhoKGIpKSxcIlwifSksZShcIlwiLGsubGFzdCgpKSk6KDA9PT1hLmluZGV4T2YoXCI8IS0tXCIpPyhmPWEuaW5kZXhPZihcIi0tXCIsNCksZj49MCYmYS5sYXN0SW5kZXhPZihcIi0tPlwiLGYpPT09ZiYmKGMuY29tbWVudCYmYy5jb21tZW50KGEuc3Vic3RyaW5nKDQsZikpLGE9YS5zdWJzdHJpbmcoZiszKSxnPSExKSk6dC50ZXN0KGEpPyhpPWEubWF0Y2godCksaSYmKGE9YS5yZXBsYWNlKGlbMF0sXCJcIiksZz0hMSkpOnIudGVzdChhKT8oaT1hLm1hdGNoKG8pLGkmJihhPWEuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxpWzBdLnJlcGxhY2UobyxlKSxnPSExKSk6cS50ZXN0KGEpJiYoaT1hLm1hdGNoKG4pLGk/KGlbNF0mJihhPWEuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxpWzBdLnJlcGxhY2UobixkKSksZz0hMSk6KGorPVwiPFwiLGE9YS5zdWJzdHJpbmcoMSkpKSxnJiYoZj1hLmluZGV4T2YoXCI8XCIpLGorPTA+Zj9hOmEuc3Vic3RyaW5nKDAsZiksYT0wPmY/XCJcIjphLnN1YnN0cmluZyhmKSxjLmNoYXJzJiZjLmNoYXJzKGgoaikpKSksYT09bCl0aHJvdyBtKFwiYmFkcGFyc2VcIixcIlRoZSBzYW5pdGl6ZXIgd2FzIHVuYWJsZSB0byBwYXJzZSB0aGUgZm9sbG93aW5nIGJsb2NrIG9mIGh0bWw6IHswfVwiLGEpO2w9YX1lKCl9ZnVuY3Rpb24gaChhKXtpZighYSlyZXR1cm5cIlwiO3ZhciBiPUwuZXhlYyhhKSxjPWJbMV0sZD1iWzNdLGU9YlsyXTtyZXR1cm4gZSYmKEsuaW5uZXJIVE1MPWUucmVwbGFjZSgvPC9nLFwiJmx0O1wiKSxlPVwidGV4dENvbnRlbnRcImluIEs/Sy50ZXh0Q29udGVudDpLLmlubmVyVGV4dCksYytlK2R9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYS5yZXBsYWNlKC8mL2csXCImYW1wO1wiKS5yZXBsYWNlKHYsZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApLGM9YS5jaGFyQ29kZUF0KDEpO3JldHVyblwiJiNcIisoMTAyNCooYi01NTI5NikrKGMtNTYzMjApKzY1NTM2KStcIjtcIn0pLnJlcGxhY2UodyxmdW5jdGlvbihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIDE1OT49Ynx8MTczPT1ifHxiPj0xNTM2JiYxNTQwPj1ifHwxODA3PT1ifHw2MDY4PT1ifHw2MDY5PT1ifHxiPj04MjA0JiY4MjA3Pj1ifHxiPj04MjMyJiY4MjM5Pj1ifHxiPj04Mjg4JiY4MzAzPj1ifHw2NTI3OT09Ynx8Yj49NjU1MjAmJjY1NTM1Pj1iP1wiJiNcIitiK1wiO1wiOmF9KS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9ZnVuY3Rpb24gaihhKXt2YXIgYz1cIlwiLGQ9YS5zcGxpdChcIjtcIik7cmV0dXJuIGIuZm9yRWFjaChkLGZ1bmN0aW9uKGEpe3ZhciBkPWEuc3BsaXQoXCI6XCIpO2lmKDI9PWQubGVuZ3RoKXt2YXIgZT1NKGIubG93ZXJjYXNlKGRbMF0pKSxhPU0oYi5sb3dlcmNhc2UoZFsxXSkpOygoXCJjb2xvclwiPT09ZXx8XCJiYWNrZ3JvdW5kLWNvbG9yXCI9PT1lKSYmKGEubWF0Y2goL15yZ2JcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9ecmdiYVxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL15oc2xcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9eaHNsYVxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL14jWzAtOWEtZl17Myw2fSQvaSl8fGEubWF0Y2goL15bYS16XSokL2kpKXx8XCJ0ZXh0LWFsaWduXCI9PT1lJiYoXCJsZWZ0XCI9PT1hfHxcInJpZ2h0XCI9PT1hfHxcImNlbnRlclwiPT09YXx8XCJqdXN0aWZ5XCI9PT1hKXx8XCJmbG9hdFwiPT09ZSYmKFwibGVmdFwiPT09YXx8XCJyaWdodFwiPT09YXx8XCJub25lXCI9PT1hKXx8KFwid2lkdGhcIj09PWV8fFwiaGVpZ2h0XCI9PT1lKSYmYS5tYXRjaCgvWzAtOVxcLl0qKHB4fGVtfHJlbXwlKS8pfHxcImRpcmVjdGlvblwiPT09ZSYmYS5tYXRjaCgvXmx0cnxydGx8aW5pdGlhbHxpbmhlcml0JC8pKSYmKGMrPWUrXCI6IFwiK2ErXCI7XCIpfX0pLGN9ZnVuY3Rpb24gayhhLGIsYyxkKXtyZXR1cm5cImltZ1wiPT09YSYmYltcInRhLWluc2VydC12aWRlb1wiXSYmKFwidGEtaW5zZXJ0LXZpZGVvXCI9PT1jfHxcImFsbG93ZnVsbHNjcmVlblwiPT09Y3x8XCJmcmFtZWJvcmRlclwiPT09Y3x8XCJjb250ZW50ZWRpdGFibGVcIj09PWMmJlwiZmFsc2VcIj09PWQpPyEwOiExfWZ1bmN0aW9uIGwoYSxjKXt2YXIgZD0hMSxlPWIuYmluZChhLGEucHVzaCk7cmV0dXJue3N0YXJ0OmZ1bmN0aW9uKGEsZixnKXthPWIubG93ZXJjYXNlKGEpLCFkJiZFW2FdJiYoZD1hKSxkfHxGW2FdIT09ITB8fChlKFwiPFwiKSxlKGEpLGIuZm9yRWFjaChmLGZ1bmN0aW9uKGQsZyl7dmFyIGg9Yi5sb3dlcmNhc2UoZyksbD1cImltZ1wiPT09YSYmXCJzcmNcIj09PWh8fFwiYmFja2dyb3VuZFwiPT09aDsoXCJzdHlsZVwiPT09aCYmXCJcIiE9PShkPWooZCkpfHxrKGEsZixoLGQpfHxKW2hdPT09ITAmJihHW2hdIT09ITB8fGMoZCxsKSkpJiYoZShcIiBcIiksZShnKSxlKCc9XCInKSxlKGkoZCkpLGUoJ1wiJykpfSksZShnP1wiLz5cIjpcIj5cIikpfSxlbmQ6ZnVuY3Rpb24oYSl7YT1iLmxvd2VyY2FzZShhKSxkfHxGW2FdIT09ITB8fChlKFwiPC9cIiksZShhKSxlKFwiPlwiKSksYT09ZCYmKGQ9ITEpfSxjaGFyczpmdW5jdGlvbihhKXtkfHxlKGkoYSkpfX19dmFyIG09Yi4kJG1pbkVycihcIiRzYW5pdGl6ZVwiKSxuPS9ePCgoPzpbYS16QS1aXSlbXFx3Oi1dKikoKD86XFxzK1tcXHc6LV0rKD86XFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W14+XFxzXSspKT8pKilcXHMqKFxcLz8pXFxzKig+PykvLG89L148XFwvXFxzKihbXFx3Oi1dKylbXj5dKj4vLHA9LyhbXFx3Oi1dKykoPzpcXHMqPVxccyooPzooPzpcIigoPzpbXlwiXSkqKVwiKXwoPzonKCg/OlteJ10pKiknKXwoW14+XFxzXSspKSk/L2cscT0vXjwvLHI9L148XFwvLyxzPS88IS0tKC4qPyktLT4vZyx0PS88IURPQ1RZUEUoW14+XSo/KT4vaSx1PS88IVxcW0NEQVRBXFxbKC4qPyldXT4vZyx2PS9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csdz0vKFteXFwjLX58IHwhXSkvZyx4PWYoXCJhcmVhLGJyLGNvbCxocixpbWcsd2JyLGlucHV0XCIpLHk9ZihcImNvbGdyb3VwLGRkLGR0LGxpLHAsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHJcIiksej1mKFwicnAscnRcIiksQT1iLmV4dGVuZCh7fSx6LHkpLEI9Yi5leHRlbmQoe30seSxmKFwiYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGJsb2NrcXVvdGUsY2FwdGlvbixjZW50ZXIsZGVsLGRpcixkaXYsZGwsZmlndXJlLGZpZ2NhcHRpb24sZm9vdGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhlYWRlcixoZ3JvdXAsaHIsaW5zLG1hcCxtZW51LG5hdixvbCxwcmUsc2NyaXB0LHNlY3Rpb24sdGFibGUsdWxcIikpLEM9Yi5leHRlbmQoe30seixmKFwiYSxhYmJyLGFjcm9ueW0sYixiZGksYmRvLGJpZyxicixjaXRlLGNvZGUsZGVsLGRmbixlbSxmb250LGksaW1nLGlucyxrYmQsbGFiZWwsbWFwLG1hcmsscSxydWJ5LHJwLHJ0LHMsc2FtcCxzbWFsbCxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0aW1lLHR0LHUsdmFyXCIpKSxEPWYoXCJhbmltYXRlLGFuaW1hdGVDb2xvcixhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGRlZnMsZGVzYyxlbGxpcHNlLGZvbnQtZmFjZSxmb250LWZhY2UtbmFtZSxmb250LWZhY2Utc3JjLGcsZ2x5cGgsaGtlcm4saW1hZ2UsbGluZWFyR3JhZGllbnQsbGluZSxtYXJrZXIsbWV0YWRhdGEsbWlzc2luZy1nbHlwaCxtcGF0aCxwYXRoLHBvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsc3RvcCxzdmcsc3dpdGNoLHRleHQsdGl0bGUsdHNwYW4sdXNlXCIpLEU9ZihcInNjcmlwdCxzdHlsZVwiKSxGPWIuZXh0ZW5kKHt9LHgsQixDLEEsRCksRz1mKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHVzZW1hcCx4bGluazpocmVmXCIpLEg9ZihcImFiYnIsYWxpZ24sYWx0LGF4aXMsYmdjb2xvcixib3JkZXIsY2VsbHBhZGRpbmcsY2VsbHNwYWNpbmcsY2xhc3MsY2xlYXIsY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSxpZCxpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc3BhbixzdGFydCxzdW1tYXJ5LHRhcmdldCx0aXRsZSx0eXBlLHZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGhcIiksST1mKFwiYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFscGhhYmV0aWMsYXJhYmljLWZvcm0sYXNjZW50LGF0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJ5LGNhbGNNb2RlLGNhcC1oZWlnaHQsY2xhc3MsY29sb3IsY29sb3ItcmVuZGVyaW5nLGNvbnRlbnQsY3gsY3ksZCxkeCxkeSxkZXNjZW50LGRpc3BsYXksZHVyLGVuZCxmaWxsLGZpbGwtcnVsZSxmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zdHJldGNoLGZvbnQtc3R5bGUsZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZyb20sZngsZnksZzEsZzIsZ2x5cGgtbmFtZSxncmFkaWVudFVuaXRzLGhhbmdpbmcsaGVpZ2h0LGhvcml6LWFkdi14LGhvcml6LW9yaWdpbi14LGlkZW9ncmFwaGljLGssa2V5UG9pbnRzLGtleVNwbGluZXMsa2V5VGltZXMsbGFuZyxtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cyxtYXJrZXJXaWR0aCxtYXRoZW1hdGljYWwsbWF4LG1pbixvZmZzZXQsb3BhY2l0eSxvcmllbnQsb3JpZ2luLG92ZXJsaW5lLXBvc2l0aW9uLG92ZXJsaW5lLXRoaWNrbmVzcyxwYW5vc2UtMSxwYXRoLHBhdGhMZW5ndGgscG9pbnRzLHByZXNlcnZlQXNwZWN0UmF0aW8scixyZWZYLHJlZlkscmVwZWF0Q291bnQscmVwZWF0RHVyLHJlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLHJlc3RhcnQscm90YXRlLHJ4LHJ5LHNsb3BlLHN0ZW1oLHN0ZW12LHN0b3AtY29sb3Isc3RvcC1vcGFjaXR5LHN0cmlrZXRocm91Z2gtcG9zaXRpb24sc3RyaWtldGhyb3VnaC10aGlja25lc3Msc3Ryb2tlLHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLHN0cm9rZS1taXRlcmxpbWl0LHN0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzeXN0ZW1MYW5ndWFnZSx0YXJnZXQsdGV4dC1hbmNob3IsdG8sdHJhbnNmb3JtLHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLXJhbmdlLHVuaXRzLXBlci1lbSx2YWx1ZXMsdmVyc2lvbix2aWV3Qm94LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHgseC1oZWlnaHQseDEseDIseGxpbms6YWN0dWF0ZSx4bGluazphcmNyb2xlLHhsaW5rOnJvbGUseGxpbms6c2hvdyx4bGluazp0aXRsZSx4bGluazp0eXBlLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx4bWxucyx4bWxuczp4bGluayx5LHkxLHkyLHpvb21BbmRQYW5cIiksSj1iLmV4dGVuZCh7fSxHLEksSCksSz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpLEw9L14oXFxzKikoW1xcc1xcU10qPykoXFxzKikkLyxNPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihhKXtyZXR1cm4gYi5pc1N0cmluZyhhKT9hLnRyaW0oKTphfTpmdW5jdGlvbihhKXtyZXR1cm4gYi5pc1N0cmluZyhhKT9hLnJlcGxhY2UoL15cXHNcXHMqLyxcIlwiKS5yZXBsYWNlKC9cXHNcXHMqJC8sXCJcIik6YX19KCk7Yi5tb2R1bGUoXCJuZ1Nhbml0aXplXCIsW10pLnByb3ZpZGVyKFwiJHNhbml0aXplXCIsZCksYi5tb2R1bGUoXCJuZ1Nhbml0aXplXCIpLmZpbHRlcihcImxpbmt5XCIsW1wiJHNhbml0aXplXCIsZnVuY3Rpb24oYSl7dmFyIGM9LygoZnRwfGh0dHBzPyk6XFwvXFwvfCh3d3dcXC4pfChtYWlsdG86KT9bQS1aYS16MC05Ll8lKy1dK0ApXFxTKlteXFxzLjssKCl7fTw+XCLigJ3igJldLyxkPS9ebWFpbHRvOi87cmV0dXJuIGZ1bmN0aW9uKGYsZyl7ZnVuY3Rpb24gaChhKXthJiZuLnB1c2goZShhKSl9ZnVuY3Rpb24gaShhLGMpe24ucHVzaChcIjxhIFwiKSxiLmlzRGVmaW5lZChnKSYmbi5wdXNoKCd0YXJnZXQ9XCInLGcsJ1wiICcpLG4ucHVzaCgnaHJlZj1cIicsYS5yZXBsYWNlKC9cIi9nLFwiJnF1b3Q7XCIpLCdcIj4nKSxoKGMpLG4ucHVzaChcIjwvYT5cIil9aWYoIWYpcmV0dXJuIGY7Zm9yKHZhciBqLGssbCxtPWYsbj1bXTtqPW0ubWF0Y2goYyk7KWs9alswXSxqWzJdfHxqWzRdfHwoaz0oalszXT9cImh0dHA6Ly9cIjpcIm1haWx0bzpcIikrayksbD1qLmluZGV4LGgobS5zdWJzdHIoMCxsKSksaShrLGpbMF0ucmVwbGFjZShkLFwiXCIpKSxtPW0uc3Vic3RyaW5nKGwralswXS5sZW5ndGgpO3JldHVybiBoKG0pLGEobi5qb2luKFwiXCIpKX19XSl9KHdpbmRvdyx3aW5kb3cuYW5ndWxhcil9KHt9LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpOyIsIiFmdW5jdGlvbihhLGIpe2JbXCJ0cnVlXCJdPWEsLypcbkBsaWNlbnNlIHRleHRBbmd1bGFyXG5BdXRob3IgOiBBdXN0aW4gQW5kZXJzb25cbkxpY2Vuc2UgOiAyMDEzIE1JVFxuVmVyc2lvbiAxLjMuN1xuXG5TZWUgUkVBRE1FLm1kIG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mcmF5d2luZy90ZXh0QW5ndWxhci93aWtpIGZvciByZXF1aXJlbWVudHMgYW5kIHVzZS5cbiovXG5hbmd1bGFyLm1vZHVsZShcInRleHRBbmd1bGFyU2V0dXBcIixbXSkudmFsdWUoXCJ0YU9wdGlvbnNcIix7Zm9yY2VUZXh0QW5ndWxhclNhbml0aXplOiEwLGtleU1hcHBpbmdzOltdLHRvb2xiYXI6W1tcImgxXCIsXCJoMlwiLFwiaDNcIixcImg0XCIsXCJoNVwiLFwiaDZcIixcInBcIixcInByZVwiLFwicXVvdGVcIl0sW1wiYm9sZFwiLFwiaXRhbGljc1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2VUaHJvdWdoXCIsXCJ1bFwiLFwib2xcIixcInJlZG9cIixcInVuZG9cIixcImNsZWFyXCJdLFtcImp1c3RpZnlMZWZ0XCIsXCJqdXN0aWZ5Q2VudGVyXCIsXCJqdXN0aWZ5UmlnaHRcIixcImp1c3RpZnlGdWxsXCIsXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sW1wiaHRtbFwiLFwiaW5zZXJ0SW1hZ2VcIixcImluc2VydExpbmtcIixcImluc2VydFZpZGVvXCIsXCJ3b3JkY291bnRcIixcImNoYXJjb3VudFwiXV0sY2xhc3Nlczp7Zm9jdXNzZWQ6XCJmb2N1c3NlZFwiLHRvb2xiYXI6XCJidG4tdG9vbGJhclwiLHRvb2xiYXJHcm91cDpcImJ0bi1ncm91cFwiLHRvb2xiYXJCdXR0b246XCJidG4gYnRuLWRlZmF1bHRcIix0b29sYmFyQnV0dG9uQWN0aXZlOlwiYWN0aXZlXCIsZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLHRleHRFZGl0b3I6XCJmb3JtLWNvbnRyb2xcIixodG1sRWRpdG9yOlwiZm9ybS1jb250cm9sXCJ9LGRlZmF1bHRUYWdBdHRyaWJ1dGVzOnthOnt0YXJnZXQ6XCJcIn19LHNldHVwOnt0ZXh0RWRpdG9yU2V0dXA6ZnVuY3Rpb24oYSl7fSxodG1sRWRpdG9yU2V0dXA6ZnVuY3Rpb24oYSl7fX0sZGVmYXVsdEZpbGVEcm9wSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBGaWxlUmVhZGVyO3JldHVyblwiaW1hZ2VcIj09PWEudHlwZS5zdWJzdHJpbmcoMCw1KT8oYy5vbmxvYWQ9ZnVuY3Rpb24oKXtcIlwiIT09Yy5yZXN1bHQmJmIoXCJpbnNlcnRJbWFnZVwiLGMucmVzdWx0LCEwKX0sYy5yZWFkQXNEYXRhVVJMKGEpLCEwKTohMX19KS52YWx1ZShcInRhU2VsZWN0YWJsZUVsZW1lbnRzXCIsW1wiYVwiLFwiaW1nXCJdKS52YWx1ZShcInRhQ3VzdG9tUmVuZGVyZXJzXCIsW3tzZWxlY3RvcjpcImltZ1wiLGN1c3RvbUF0dHJpYnV0ZTpcInRhLWluc2VydC12aWRlb1wiLHJlbmRlckxvZ2ljOmZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxpZnJhbWU+PC9pZnJhbWU+XCIpLGM9YS5wcm9wKFwiYXR0cmlidXRlc1wiKTthbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihhKXtiLmF0dHIoYS5uYW1lLGEudmFsdWUpfSksYi5hdHRyKFwic3JjXCIsYi5hdHRyKFwidGEtaW5zZXJ0LXZpZGVvXCIpKSxhLnJlcGxhY2VXaXRoKGIpfX1dKS52YWx1ZShcInRhVHJhbnNsYXRpb25zXCIse2h0bWw6e3Rvb2x0aXA6XCJUb2dnbGUgaHRtbCAvIFJpY2ggVGV4dFwifSxoZWFkaW5nOnt0b29sdGlwOlwiSGVhZGluZyBcIn0scDp7dG9vbHRpcDpcIlBhcmFncmFwaFwifSxwcmU6e3Rvb2x0aXA6XCJQcmVmb3JtYXR0ZWQgdGV4dFwifSx1bDp7dG9vbHRpcDpcIlVub3JkZXJlZCBMaXN0XCJ9LG9sOnt0b29sdGlwOlwiT3JkZXJlZCBMaXN0XCJ9LHF1b3RlOnt0b29sdGlwOlwiUXVvdGUvdW5xdW90ZSBzZWxlY3Rpb24gb3IgcGFyYWdyYXBoXCJ9LHVuZG86e3Rvb2x0aXA6XCJVbmRvXCJ9LHJlZG86e3Rvb2x0aXA6XCJSZWRvXCJ9LGJvbGQ6e3Rvb2x0aXA6XCJCb2xkXCJ9LGl0YWxpYzp7dG9vbHRpcDpcIkl0YWxpY1wifSx1bmRlcmxpbmU6e3Rvb2x0aXA6XCJVbmRlcmxpbmVcIn0sc3RyaWtlVGhyb3VnaDp7dG9vbHRpcDpcIlN0cmlrZXRocm91Z2hcIn0sanVzdGlmeUxlZnQ6e3Rvb2x0aXA6XCJBbGlnbiB0ZXh0IGxlZnRcIn0sanVzdGlmeVJpZ2h0Ont0b29sdGlwOlwiQWxpZ24gdGV4dCByaWdodFwifSxqdXN0aWZ5RnVsbDp7dG9vbHRpcDpcIkp1c3RpZnkgdGV4dFwifSxqdXN0aWZ5Q2VudGVyOnt0b29sdGlwOlwiQ2VudGVyXCJ9LGluZGVudDp7dG9vbHRpcDpcIkluY3JlYXNlIGluZGVudFwifSxvdXRkZW50Ont0b29sdGlwOlwiRGVjcmVhc2UgaW5kZW50XCJ9LGNsZWFyOnt0b29sdGlwOlwiQ2xlYXIgZm9ybWF0dGluZ1wifSxpbnNlcnRJbWFnZTp7ZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGFuIGltYWdlIFVSTCB0byBpbnNlcnRcIix0b29sdGlwOlwiSW5zZXJ0IGltYWdlXCIsaG90a2V5OlwidGhlIC0gcG9zc2libHkgbGFuZ3VhZ2UgZGVwZW5kZW50IGhvdGtleSAuLi4gZm9yIHNvbWUgZnV0dXJlIGltcGxlbWVudGF0aW9uXCJ9LGluc2VydFZpZGVvOnt0b29sdGlwOlwiSW5zZXJ0IHZpZGVvXCIsZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGEgeW91dHViZSBVUkwgdG8gZW1iZWRcIn0saW5zZXJ0TGluazp7dG9vbHRpcDpcIkluc2VydCAvIGVkaXQgbGlua1wiLGRpYWxvZ1Byb21wdDpcIlBsZWFzZSBlbnRlciBhIFVSTCB0byBpbnNlcnRcIn0sZWRpdExpbms6e3JlTGlua0J1dHRvbjp7dG9vbHRpcDpcIlJlbGlua1wifSx1bkxpbmtCdXR0b246e3Rvb2x0aXA6XCJVbmxpbmtcIn0sdGFyZ2V0VG9nZ2xlOntidXR0b250ZXh0OlwiT3BlbiBpbiBOZXcgV2luZG93XCJ9fSx3b3JkY291bnQ6e3Rvb2x0aXA6XCJEaXNwbGF5IHdvcmRzIENvdW50XCJ9LGNoYXJjb3VudDp7dG9vbHRpcDpcIkRpc3BsYXkgY2hhcmFjdGVycyBDb3VudFwifX0pLmZhY3RvcnkoXCJ0YVRvb2xGdW5jdGlvbnNcIixbXCIkd2luZG93XCIsXCJ0YVRyYW5zbGF0aW9uc1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJue2ltZ09uU2VsZWN0QWN0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbigpe2MudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpLGMuaGlkZVBvcG92ZXIoKX07YS5wcmV2ZW50RGVmYXVsdCgpLGMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwid2lkdGhcIixcIjM3NXB4XCIpO3ZhciBlPWMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXI7ZS5lbXB0eSgpO3ZhciBmPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHN0eWxlPVwicGFkZGluZy1yaWdodDogNnB4O1wiPicpLGc9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+MTAwJSA8L2J1dHRvbj4nKTtnLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIlwifSksZCgpfSk7dmFyIGg9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+NTAlIDwvYnV0dG9uPicpO2gub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCI1MCVcIixoZWlnaHQ6XCJcIn0pLGQoKX0pO3ZhciBpPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjI1JSA8L2J1dHRvbj4nKTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMjUlXCIsaGVpZ2h0OlwiXCJ9KSxkKCl9KTt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYmluZGV4PVwiLTFcIj5SZXNldDwvYnV0dG9uPicpO2oub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCJcIixoZWlnaHQ6XCJcIn0pLGQoKX0pLGYuYXBwZW5kKGcpLGYuYXBwZW5kKGgpLGYuYXBwZW5kKGkpLGYuYXBwZW5kKGopLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCIgc3R5bGU9XCJwYWRkaW5nLXJpZ2h0OiA2cHg7XCI+Jyk7dmFyIGs9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPicpO2sub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJsZWZ0XCIpLGIuY3NzKFwiY3NzRmxvYXRcIixcImxlZnRcIiksYi5jc3MoXCJzdHlsZUZsb2F0XCIsXCJsZWZ0XCIpLGQoKX0pO3ZhciBsPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tcmlnaHRcIj48L2k+PC9idXR0b24+Jyk7bC5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGIuY3NzKFwiZmxvYXRcIixcInJpZ2h0XCIpLGIuY3NzKFwiY3NzRmxvYXRcIixcInJpZ2h0XCIpLGIuY3NzKFwic3R5bGVGbG9hdFwiLFwicmlnaHRcIiksZCgpfSk7dmFyIG09YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1qdXN0aWZ5XCI+PC9pPjwvYnV0dG9uPicpO20ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJcIiksYi5jc3MoXCJjc3NGbG9hdFwiLFwiXCIpLGIuY3NzKFwic3R5bGVGbG9hdFwiLFwiXCIpLGQoKX0pLGYuYXBwZW5kKGspLGYuYXBwZW5kKG0pLGYuYXBwZW5kKGwpLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+Jyk7dmFyIG49YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPjwvYnV0dG9uPicpO24ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLnJlbW92ZSgpLGQoKX0pLGYuYXBwZW5kKG4pLGUuYXBwZW5kKGYpLGMuc2hvd1BvcG92ZXIoYiksYy5zaG93UmVzaXplT3ZlcmxheShiKX0sYU9uU2VsZWN0QWN0aW9uOmZ1bmN0aW9uKGMsZCxlKXtjLnByZXZlbnREZWZhdWx0KCksZS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJ3aWR0aFwiLFwiNDM2cHhcIik7dmFyIGY9ZS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckNvbnRhaW5lcjtmLmVtcHR5KCksZi5jc3MoXCJsaW5lLWhlaWdodFwiLFwiMjhweFwiKTt2YXIgZz1hbmd1bGFyLmVsZW1lbnQoJzxhIGhyZWY9XCInK2QuYXR0cihcImhyZWZcIikrJ1wiIHRhcmdldD1cIl9ibGFua1wiPicrZC5hdHRyKFwiaHJlZlwiKStcIjwvYT5cIik7Zy5jc3Moe2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixcIm1heC13aWR0aFwiOlwiMjAwcHhcIixvdmVyZmxvdzpcImhpZGRlblwiLFwidGV4dC1vdmVyZmxvd1wiOlwiZWxsaXBzaXNcIixcIndoaXRlLXNwYWNlXCI6XCJub3dyYXBcIixcInZlcnRpY2FsLWFsaWduXCI6XCJtaWRkbGVcIn0pLGYuYXBwZW5kKGcpO3ZhciBoPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBwdWxsLXJpZ2h0XCI+JyksaT1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0aXRsZT1cIicrYi5lZGl0TGluay5yZUxpbmtCdXR0b24udG9vbHRpcCsnXCI+PGkgY2xhc3M9XCJmYSBmYS1lZGl0IGljb24tZWRpdFwiPjwvaT48L2J1dHRvbj4nKTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9YS5wcm9tcHQoYi5pbnNlcnRMaW5rLmRpYWxvZ1Byb21wdCxkLmF0dHIoXCJocmVmXCIpKTtmJiZcIlwiIT09ZiYmXCJodHRwOi8vXCIhPT1mJiYoZC5hdHRyKFwiaHJlZlwiLGYpLGUudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpKSxlLmhpZGVQb3BvdmVyKCl9KSxoLmFwcGVuZChpKTt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0aXRsZT1cIicrYi5lZGl0TGluay51bkxpbmtCdXR0b24udG9vbHRpcCsnXCI+PGkgY2xhc3M9XCJmYSBmYS11bmxpbmsgaWNvbi11bmxpbmtcIj48L2k+PC9idXR0b24+Jyk7ai5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGQucmVwbGFjZVdpdGgoZC5jb250ZW50cygpKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxlLmhpZGVQb3BvdmVyKCl9KSxoLmFwcGVuZChqKTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIj4nK2IuZWRpdExpbmsudGFyZ2V0VG9nZ2xlLmJ1dHRvbnRleHQrXCI8L2J1dHRvbj5cIik7XCJfYmxhbmtcIj09PWQuYXR0cihcInRhcmdldFwiKSYmay5hZGRDbGFzcyhcImFjdGl2ZVwiKSxrLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksZC5hdHRyKFwidGFyZ2V0XCIsXCJfYmxhbmtcIj09PWQuYXR0cihcInRhcmdldFwiKT9cIlwiOlwiX2JsYW5rXCIpLGsudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIiksZS51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50KCl9KSxoLmFwcGVuZChrKSxmLmFwcGVuZChoKSxlLnNob3dQb3BvdmVyKGQpfSxleHRyYWN0WW91dHViZVZpZGVvSWQ6ZnVuY3Rpb24oYSl7dmFyIGI9Lyg/OnlvdXR1YmUoPzotbm9jb29raWUpP1xcLmNvbVxcLyg/OlteXFwvXFxuXFxzXStcXC9cXFMrXFwvfCg/OnZ8ZSg/Om1iZWQpPylcXC98XFxTKj9bPyZddj0pfHlvdXR1XFwuYmVcXC8pKFthLXpBLVowLTlfLV17MTF9KS9pLGM9YS5tYXRjaChiKTtyZXR1cm4gYyYmY1sxXXx8bnVsbH19fV0pLnJ1bihbXCJ0YVJlZ2lzdGVyVG9vbFwiLFwiJHdpbmRvd1wiLFwidGFUcmFuc2xhdGlvbnNcIixcInRhU2VsZWN0aW9uXCIsXCJ0YVRvb2xGdW5jdGlvbnNcIixcIiRzYW5pdGl6ZVwiLFwidGFPcHRpb25zXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9e307aWYoZihcIlwiLGgpLGcuZm9yY2VUZXh0QW5ndWxhclNhbml0aXplPT09ITAmJlwidGFTYW5pdGl6ZVwiIT09aC52ZXJzaW9uKXRocm93IGFuZ3VsYXIuJCRtaW5FcnIoXCJ0ZXh0QW5ndWxhclwiKShcInRleHRBbmd1bGFyU2V0dXBcIixcIlRoZSB0ZXh0QW5ndWxhci1zYW5pdGl6ZSBwcm92aWRlciBoYXMgYmVlbiByZXBsYWNlZCBieSBhbm90aGVyIC0tIGhhdmUgeW91IGluY2x1ZGVkIGFuZ3VsYXItc2FuaXRpemUgYnkgbWlzdGFrZT9cIik7YShcImh0bWxcIix7aWNvbmNsYXNzOlwiZmEgZmEtY29kZVwiLHRvb2x0aXB0ZXh0OmMuaHRtbC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3RoaXMuJGVkaXRvcigpLnN3aXRjaFZpZXcoKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkuc2hvd0h0bWx9fSk7dmFyIGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShhKX19LGo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8XCIrdGhpcy5uYW1lLnRvVXBwZXJDYXNlKCkrXCI+XCIpfTthbmd1bGFyLmZvckVhY2goW1wiaDFcIixcImgyXCIsXCJoM1wiLFwiaDRcIixcImg1XCIsXCJoNlwiXSxmdW5jdGlvbihiKXthKGIudG9Mb3dlckNhc2UoKSx7YnV0dG9udGV4dDpiLnRvVXBwZXJDYXNlKCksdG9vbHRpcHRleHQ6Yy5oZWFkaW5nLnRvb2x0aXArYi5jaGFyQXQoMSksYWN0aW9uOmosYWN0aXZlU3RhdGU6aShiLnRvTG93ZXJDYXNlKCkpfSl9KSxhKFwicFwiLHtidXR0b250ZXh0OlwiUFwiLHRvb2x0aXB0ZXh0OmMucC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxQPlwiKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwicFwiKX19KSxhKFwicHJlXCIse2J1dHRvbnRleHQ6XCJwcmVcIix0b29sdGlwdGV4dDpjLnByZS50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxQUkU+XCIpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoXCJwcmVcIil9fSksYShcInVsXCIse2ljb25jbGFzczpcImZhIGZhLWxpc3QtdWxcIix0b29sdGlwdGV4dDpjLnVsLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaW5zZXJ0VW5vcmRlcmVkTGlzdFwiKX19KSxhKFwib2xcIix7aWNvbmNsYXNzOlwiZmEgZmEtbGlzdC1vbFwiLHRvb2x0aXB0ZXh0OmMub2wudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluc2VydE9yZGVyZWRMaXN0XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaW5zZXJ0T3JkZXJlZExpc3RcIil9fSksYShcInF1b3RlXCIse2ljb25jbGFzczpcImZhIGZhLXF1b3RlLXJpZ2h0XCIsdG9vbHRpcHRleHQ6Yy5xdW90ZS50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxCTE9DS1FVT1RFPlwiKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwiYmxvY2txdW90ZVwiKX19KSxhKFwidW5kb1wiLHtpY29uY2xhc3M6XCJmYSBmYS11bmRvXCIsdG9vbHRpcHRleHQ6Yy51bmRvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJ1bmRvXCIsbnVsbCl9fSksYShcInJlZG9cIix7aWNvbmNsYXNzOlwiZmEgZmEtcmVwZWF0XCIsdG9vbHRpcHRleHQ6Yy5yZWRvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJyZWRvXCIsbnVsbCl9fSksYShcImJvbGRcIix7aWNvbmNsYXNzOlwiZmEgZmEtYm9sZFwiLHRvb2x0aXB0ZXh0OmMuYm9sZC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiYm9sZFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImJvbGRcIil9LGNvbW1hbmRLZXlDb2RlOjk4fSksYShcImp1c3RpZnlMZWZ0XCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLWxlZnRcIix0b29sdGlwdGV4dDpjLmp1c3RpZnlMZWZ0LnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJqdXN0aWZ5TGVmdFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXtpZihhJiZcIiNkb2N1bWVudFwiPT09YS5ub2RlTmFtZSlyZXR1cm4hMTt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJsZWZ0XCI9PT1hLmNzcyhcInRleHQtYWxpZ25cIil8fFwibGVmdFwiPT09YS5hdHRyKFwiYWxpZ25cIil8fFwicmlnaHRcIiE9PWEuY3NzKFwidGV4dC1hbGlnblwiKSYmXCJjZW50ZXJcIiE9PWEuY3NzKFwidGV4dC1hbGlnblwiKSYmXCJqdXN0aWZ5XCIhPT1hLmNzcyhcInRleHQtYWxpZ25cIikmJiF0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlSaWdodFwiKSYmIXRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUNlbnRlclwiKSYmIXRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUZ1bGxcIikpLGI9Ynx8dGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5TGVmdFwiKX19KSxhKFwianVzdGlmeVJpZ2h0XCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLXJpZ2h0XCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5UmlnaHQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImp1c3RpZnlSaWdodFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXtpZihhJiZcIiNkb2N1bWVudFwiPT09YS5ub2RlTmFtZSlyZXR1cm4hMTt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJyaWdodFwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeVJpZ2h0XCIpfX0pLGEoXCJqdXN0aWZ5RnVsbFwiLHtpY29uY2xhc3M6XCJmYSBmYS1hbGlnbi1qdXN0aWZ5XCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5RnVsbC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwianVzdGlmeUZ1bGxcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGEmJihiPVwianVzdGlmeVwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUZ1bGxcIil9fSksYShcImp1c3RpZnlDZW50ZXJcIix7aWNvbmNsYXNzOlwiZmEgZmEtYWxpZ24tY2VudGVyXCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5Q2VudGVyLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJqdXN0aWZ5Q2VudGVyXCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKGEpe2lmKGEmJlwiI2RvY3VtZW50XCI9PT1hLm5vZGVOYW1lKXJldHVybiExO3ZhciBiPSExO3JldHVybiBhJiYoYj1cImNlbnRlclwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUNlbnRlclwiKX19KSxhKFwiaW5kZW50XCIse2ljb25jbGFzczpcImZhIGZhLWluZGVudFwiLHRvb2x0aXB0ZXh0OmMuaW5kZW50LnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbmRlbnRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwiYmxvY2txdW90ZVwiKX0sY29tbWFuZEtleUNvZGU6XCJUYWJLZXlcIn0pLGEoXCJvdXRkZW50XCIse2ljb25jbGFzczpcImZhIGZhLW91dGRlbnRcIix0b29sdGlwdGV4dDpjLm91dGRlbnQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcIm91dGRlbnRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sY29tbWFuZEtleUNvZGU6XCJTaGlmdFRhYktleVwifSksYShcIml0YWxpY3NcIix7aWNvbmNsYXNzOlwiZmEgZmEtaXRhbGljXCIsdG9vbHRpcHRleHQ6Yy5pdGFsaWMudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcIml0YWxpY1wiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcIml0YWxpY1wiKX0sY29tbWFuZEtleUNvZGU6MTA1fSksYShcInVuZGVybGluZVwiLHtpY29uY2xhc3M6XCJmYSBmYS11bmRlcmxpbmVcIix0b29sdGlwdGV4dDpjLnVuZGVybGluZS50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwidW5kZXJsaW5lXCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwidW5kZXJsaW5lXCIpfSxjb21tYW5kS2V5Q29kZToxMTd9KSxhKFwic3RyaWtlVGhyb3VnaFwiLHtpY29uY2xhc3M6XCJmYSBmYS1zdHJpa2V0aHJvdWdoXCIsdG9vbHRpcHRleHQ6Yy5zdHJpa2VUaHJvdWdoLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJzdHJpa2VUaHJvdWdoXCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKFwic3RyaWtlVGhyb3VnaFwiKX19KSxhKFwiY2xlYXJcIix7aWNvbmNsYXNzOlwiZmEgZmEtYmFuXCIsdG9vbHRpcHRleHQ6Yy5jbGVhci50b29sdGlwLGFjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjO3RoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJyZW1vdmVGb3JtYXRcIixudWxsKTt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoZC5nZXRTZWxlY3Rpb25FbGVtZW50KCkpLGY9ZnVuY3Rpb24oYSl7YT1hbmd1bGFyLmVsZW1lbnQoYSk7dmFyIGI9YTthbmd1bGFyLmZvckVhY2goYS5jaGlsZHJlbigpLGZ1bmN0aW9uKGEpe3ZhciBjPWFuZ3VsYXIuZWxlbWVudChcIjxwPjwvcD5cIik7Yy5odG1sKGFuZ3VsYXIuZWxlbWVudChhKS5odG1sKCkpLGIuYWZ0ZXIoYyksYj1jfSksYS5yZW1vdmUoKX07aWYoYW5ndWxhci5mb3JFYWNoKGUuZmluZChcInVsXCIpLGYpLGFuZ3VsYXIuZm9yRWFjaChlLmZpbmQoXCJvbFwiKSxmKSxcImxpXCI9PT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7dmFyIGc9ZVswXS5wYXJlbnROb2RlLmNoaWxkTm9kZXMsaD1bXSxpPVtdLGo9ITE7Zm9yKGM9MDtjPGcubGVuZ3RoO2MrKylnW2NdPT09ZVswXT9qPSEwOmo/aS5wdXNoKGdbY10pOmgucHVzaChnW2NdKTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoZVswXS5wYXJlbnROb2RlKSxsPWFuZ3VsYXIuZWxlbWVudChcIjxwPjwvcD5cIik7aWYobC5odG1sKGFuZ3VsYXIuZWxlbWVudChlWzBdKS5odG1sKCkpLDA9PT1oLmxlbmd0aHx8MD09PWkubGVuZ3RoKTA9PT1pLmxlbmd0aD9rLmFmdGVyKGwpOmtbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobFswXSxrWzBdKSwwPT09aC5sZW5ndGgmJjA9PT1pLmxlbmd0aD9rLnJlbW92ZSgpOmFuZ3VsYXIuZWxlbWVudChlWzBdKS5yZW1vdmUoKTtlbHNle3ZhciBtPWFuZ3VsYXIuZWxlbWVudChcIjxcIitrWzBdLnRhZ05hbWUrXCI+PC9cIitrWzBdLnRhZ05hbWUrXCI+XCIpLG49YW5ndWxhci5lbGVtZW50KFwiPFwiK2tbMF0udGFnTmFtZStcIj48L1wiK2tbMF0udGFnTmFtZStcIj5cIik7Zm9yKGM9MDtjPGgubGVuZ3RoO2MrKyltLmFwcGVuZChhbmd1bGFyLmVsZW1lbnQoaFtjXSkpO2ZvcihjPTA7YzxpLmxlbmd0aDtjKyspbi5hcHBlbmQoYW5ndWxhci5lbGVtZW50KGlbY10pKTtrLmFmdGVyKG4pLGsuYWZ0ZXIobCksay5hZnRlcihtKSxrLnJlbW92ZSgpfWQuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKGxbMF0pfXZhciBvPXRoaXMuJGVkaXRvcigpLHA9ZnVuY3Rpb24oYSl7YT1hbmd1bGFyLmVsZW1lbnQoYSksYVswXSE9PW8uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0mJmEucmVtb3ZlQXR0cihcImNsYXNzXCIpLGFuZ3VsYXIuZm9yRWFjaChhLmNoaWxkcmVuKCkscCl9O2FuZ3VsYXIuZm9yRWFjaChlLHApLFwibGlcIiE9PWVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcIm9sXCIhPT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmXCJ1bFwiIT09ZVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJmb3JtYXRCbG9ja1wiLFwiZGVmYXVsdFwiKSxiKCl9fSksYShcImluc2VydEltYWdlXCIse2ljb25jbGFzczpcImZhIGZhLXBpY3R1cmUtb1wiLHRvb2x0aXB0ZXh0OmMuaW5zZXJ0SW1hZ2UudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gYT1iLnByb21wdChjLmluc2VydEltYWdlLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YT90aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0SW1hZ2VcIixhLCEwKTp2b2lkIDB9LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImltZ1wiLGFjdGlvbjplLmltZ09uU2VsZWN0QWN0aW9ufX0pLGEoXCJpbnNlcnRWaWRlb1wiLHtpY29uY2xhc3M6XCJmYSBmYS15b3V0dWJlLXBsYXlcIix0b29sdGlwdGV4dDpjLmluc2VydFZpZGVvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7aWYoYT1iLnByb21wdChjLmluc2VydFZpZGVvLmRpYWxvZ1Byb21wdCxcImh0dHBzOi8vXCIpLGEmJlwiXCIhPT1hJiZcImh0dHBzOi8vXCIhPT1hJiYodmlkZW9JZD1lLmV4dHJhY3RZb3V0dWJlVmlkZW9JZChhKSx2aWRlb0lkKSl7dmFyIGQ9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIit2aWRlb0lkLGY9JzxpbWcgY2xhc3M9XCJ0YS1pbnNlcnQtdmlkZW9cIiBzcmM9XCJodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8nK3ZpZGVvSWQrJy9ocWRlZmF1bHQuanBnXCIgdGEtaW5zZXJ0LXZpZGVvPVwiJytkKydcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIiBmcmFtZWJvcmRlcj1cIjBcIiAvPic7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbnNlcnRIVE1MXCIsZiwhMCl9fSxvbkVsZW1lbnRTZWxlY3Q6e2VsZW1lbnQ6XCJpbWdcIixvbmx5V2l0aEF0dHJzOltcInRhLWluc2VydC12aWRlb1wiXSxhY3Rpb246ZS5pbWdPblNlbGVjdEFjdGlvbn19KSxhKFwiaW5zZXJ0TGlua1wiLHt0b29sdGlwdGV4dDpjLmluc2VydExpbmsudG9vbHRpcCxpY29uY2xhc3M6XCJmYSBmYS1saW5rXCIsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGE9Yi5wcm9tcHQoYy5pbnNlcnRMaW5rLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YT90aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiY3JlYXRlTGlua1wiLGEsITApOnZvaWQgMH0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJBXCI9PT1hWzBdLnRhZ05hbWU6ITF9LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImFcIixhY3Rpb246ZS5hT25TZWxlY3RBY3Rpb259fSksYShcIndvcmRjb3VudFwiLHtkaXNwbGF5Oic8ZGl2IGlkPVwidG9vbGJhcldDXCIgc3R5bGU9XCJkaXNwbGF5OmJsb2NrOyBtaW4td2lkdGg6MTAwcHg7XCI+V29yZHM6IDxzcGFuIG5nLWJpbmQ9XCJ3b3JkY291bnRcIj48L3NwYW4+PC9kaXY+JyxkaXNhYmxlZDohMCx3b3JkY291bnQ6MCxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVkaXRvcigpLmRpc3BsYXlFbGVtZW50cy50ZXh0LGI9YVswXS5pbm5lckhUTUx8fFwiXCIsYz0wO3JldHVyblwiXCIhPT1iLnJlcGxhY2UoL1xccyo8W14+XSo/PlxccyovZyxcIlwiKSYmKGM9Yi5yZXBsYWNlKC88XFwvPyhifGl8ZW18c3Ryb25nfHNwYW58dXxzdHJpa2V0aHJvdWdofGF8aW1nfHNtYWxsfHN1YnxzdXB8bGFiZWwpKCBbXj4qP10pPz4vZ2ksXCJcIikucmVwbGFjZSgvKDxbXj5dKj8+XFxzKjxbXj5dKj8+KS9naSxcIiBcIikucmVwbGFjZSgvKDxbXj5dKj8+KS9naSxcIlwiKS5yZXBsYWNlKC9cXHMrL2dpLFwiIFwiKS5tYXRjaCgvXFxTKy9nKS5sZW5ndGgpLHRoaXMud29yZGNvdW50PWMsdGhpcy4kZWRpdG9yKCkud29yZGNvdW50PWMsITF9fSksYShcImNoYXJjb3VudFwiLHtkaXNwbGF5Oic8ZGl2IGlkPVwidG9vbGJhckNDXCIgc3R5bGU9XCJkaXNwbGF5OmJsb2NrOyBtaW4td2lkdGg6MTIwcHg7XCI+Q2hhcmFjdGVyczogPHNwYW4gbmctYmluZD1cImNoYXJjb3VudFwiPjwvc3Bhbj48L2Rpdj4nLGRpc2FibGVkOiEwLGNoYXJjb3VudDowLGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWRpdG9yKCkuZGlzcGxheUVsZW1lbnRzLnRleHQsYj1hWzBdLmlubmVyVGV4dHx8YVswXS50ZXh0Q29udGVudCxjPWIucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSxcIlwiKS5yZXBsYWNlKC9eXFxzKy9nLFwiIFwiKS5yZXBsYWNlKC9cXHMrJC9nLFwiIFwiKS5sZW5ndGg7cmV0dXJuIHRoaXMuY2hhcmNvdW50PWMsdGhpcy4kZWRpdG9yKCkuY2hhcmNvdW50PWMsITF9fSl9XSksLypcbkBsaWNlbnNlIHRleHRBbmd1bGFyXG5BdXRob3IgOiBBdXN0aW4gQW5kZXJzb25cbkxpY2Vuc2UgOiAyMDEzIE1JVFxuVmVyc2lvbiAxLjQuM1xuXG5TZWUgUkVBRE1FLm1kIG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mcmF5d2luZy90ZXh0QW5ndWxhci93aWtpIGZvciByZXF1aXJlbWVudHMgYW5kIHVzZS5cbiovXG5mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEoYSl7dHJ5e3JldHVybiAwIT09YW5ndWxhci5lbGVtZW50KGEpLmxlbmd0aH1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYihiLGMpe2lmKCFifHxcIlwiPT09Ynx8ci5oYXNPd25Qcm9wZXJ0eShiKSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdW5pcXVlIG5hbWUgaXMgcmVxdWlyZWQgZm9yIGEgVG9vbCBEZWZpbml0aW9uXCI7aWYoYy5kaXNwbGF5JiYoXCJcIj09PWMuZGlzcGxheXx8IWEoYy5kaXNwbGF5KSl8fCFjLmRpc3BsYXkmJiFjLmJ1dHRvbnRleHQmJiFjLmljb25jbGFzcyl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciBcIicrYisnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO3JbYl09Y312YXIgYz17aWU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0zLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpXCIpO2MuaW5uZXJIVE1MPVwiPCEtLVtpZiBndCBJRSBcIisgKytiK1wiXT48aT48L2k+PCFbZW5kaWZdLS0+XCIsZFswXTspO3JldHVybiBiPjQ/YjphfSgpLHdlYmtpdDovQXBwbGVXZWJLaXRcXC8oW1xcZC5dKykvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxkPSExO2Mud2Via2l0JiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWF8fHdpbmRvdy5ldmVudCxjPWIudGFyZ2V0O2lmKGQmJm51bGwhPT1jKXtmb3IodmFyIGU9ITEsZj1jO251bGwhPT1mJiZcImh0bWxcIiE9PWYudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYhZTspZT1cInRydWVcIj09PWYuY29udGVudEVkaXRhYmxlLGY9Zi5wYXJlbnROb2RlO2V8fChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRBbmd1bGFyLWVkaXRhYmxlRml4LTAxMDIwMzA0MDUwNjA3MDgwOVwiKS5zZXRTZWxlY3Rpb25SYW5nZSgwLDApLGMuZm9jdXMoKSxjLnNlbGVjdCYmYy5zZWxlY3QoKSl9ZD0hMX0sITEpLGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKGFuZ3VsYXIuZWxlbWVudCgnPGlucHV0IGlkPVwidGV4dEFuZ3VsYXItZWRpdGFibGVGaXgtMDEwMjAzMDQwNTA2MDcwODA5XCIgY2xhc3M9XCJ0YS1oaWRkZW4taW5wdXRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYkluZGV4PVwiLTFcIj4nKSl9KSk7dmFyIGU9L14oYWRkcmVzc3xhcnRpY2xlfGFzaWRlfGF1ZGlvfGJsb2NrcXVvdGV8Y2FudmFzfGRkfGRpdnxkbHxmaWVsZHNldHxmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8Zm9ybXxoMXxoMnxoM3xoNHxoNXxoNnxoZWFkZXJ8aGdyb3VwfGhyfG5vc2NyaXB0fG9sfG91dHB1dHxwfHByZXxzZWN0aW9ufHRhYmxlfHRmb290fHVsfHZpZGVvKSQvaSxmPS9eKHVsfGxpfG9sKSQvaSxnPS9eKGFkZHJlc3N8YXJ0aWNsZXxhc2lkZXxhdWRpb3xibG9ja3F1b3RlfGNhbnZhc3xkZHxkaXZ8ZGx8ZmllbGRzZXR8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGZvcm18aDF8aDJ8aDN8aDR8aDV8aDZ8aGVhZGVyfGhncm91cHxocnxub3NjcmlwdHxvbHxvdXRwdXR8cHxwcmV8c2VjdGlvbnx0YWJsZXx0Zm9vdHx1bHx2aWRlb3xsaSkkL2k7U3RyaW5nLnByb3RvdHlwZS50cmltfHwoU3RyaW5nLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0pO3ZhciBoLGksaixrLGwsbTtpZihjLmllPjh8fHZvaWQgMD09PWMuaWUpe2Zvcih2YXIgbj1kb2N1bWVudC5zdHlsZVNoZWV0cyxvPTA7bzxuLmxlbmd0aDtvKyspaWYoKDA9PT1uW29dLm1lZGlhLmxlbmd0aHx8bltvXS5tZWRpYS5tZWRpYVRleHQubWF0Y2goLyhhbGx8c2NyZWVuKS9naSkpJiZuW29dLmhyZWYmJm5bb10uaHJlZi5tYXRjaCgvdGV4dGFuZ3VsYXJcXC4obWluXFwufCljc3MvZ2kpKXtoPW5bb107YnJlYWt9aHx8KGg9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7cmV0dXJuIGMud2Via2l0JiZhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoYSksYS5zaGVldH0oKSksaT1mdW5jdGlvbihhLGIpe3JldHVybiBrKGgsYSxiKX0saz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtyZXR1cm4gYS5jc3NSdWxlcz9kPU1hdGgubWF4KGEuY3NzUnVsZXMubGVuZ3RoLTEsMCk6YS5ydWxlcyYmKGQ9TWF0aC5tYXgoYS5ydWxlcy5sZW5ndGgtMSwwKSksYS5pbnNlcnRSdWxlP2EuaW5zZXJ0UnVsZShiK1wie1wiK2MrXCJ9XCIsZCk6YS5hZGRSdWxlKGIsYyxkKSxoLnJ1bGVzP2U9aC5ydWxlc1tkXTpoLmNzc1J1bGVzJiYoZT1oLmNzc1J1bGVzW2RdKSxlfSxtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10uY3NzVGV4dD09PWEuY3NzVGV4dCl7ZD1jO2JyZWFrfXJldHVybiBkfSxqPWZ1bmN0aW9uKGEpe2woaCxhKX0sbD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuY3NzUnVsZXN8fGEucnVsZXM7aWYoYyYmMCE9PWMubGVuZ3RoKXt2YXIgZD1tKGIsYyk7YS5yZW1vdmVSdWxlP2EucmVtb3ZlUnVsZShkKTphLmRlbGV0ZVJ1bGUoZCl9fX1hbmd1bGFyLm1vZHVsZShcInRleHRBbmd1bGFyLmZhY3Rvcmllc1wiLFtdKS5mYWN0b3J5KFwidGFCcm93c2VyVGFnXCIsW2Z1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhP1wiXCI9PT1hP3ZvaWQgMD09PWMuaWU/XCJkaXZcIjpjLmllPD04P1wiUFwiOlwicFwiOmMuaWU8PTg/YS50b1VwcGVyQ2FzZSgpOmE6Yy5pZTw9OD9cIlBcIjpcInBcIn19XSkuZmFjdG9yeShcInRhQXBwbHlDdXN0b21SZW5kZXJlcnNcIixbXCJ0YUN1c3RvbVJlbmRlcmVyc1wiLFwidGFET01cIixmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PjwvZGl2PlwiKTtyZXR1cm4gZFswXS5pbm5lckhUTUw9Yyxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXt2YXIgYz1bXTthLnNlbGVjdG9yJiZcIlwiIT09YS5zZWxlY3Rvcj9jPWQuZmluZChhLnNlbGVjdG9yKTphLmN1c3RvbUF0dHJpYnV0ZSYmXCJcIiE9PWEuY3VzdG9tQXR0cmlidXRlJiYoYz1iLmdldEJ5QXR0cmlidXRlKGQsYS5jdXN0b21BdHRyaWJ1dGUpKSxhbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihiKXtiPWFuZ3VsYXIuZWxlbWVudChiKSxhLnNlbGVjdG9yJiZcIlwiIT09YS5zZWxlY3RvciYmYS5jdXN0b21BdHRyaWJ1dGUmJlwiXCIhPT1hLmN1c3RvbUF0dHJpYnV0ZT92b2lkIDAhPT1iLmF0dHIoYS5jdXN0b21BdHRyaWJ1dGUpJiZhLnJlbmRlckxvZ2ljKGIpOmEucmVuZGVyTG9naWMoYil9KX0pLGRbMF0uaW5uZXJIVE1MfX1dKS5mYWN0b3J5KFwidGFGaXhDaHJvbWVcIixmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKGEpe2lmKCFhfHwhYW5ndWxhci5pc1N0cmluZyhhKXx8YS5sZW5ndGg8PTApcmV0dXJuIGE7Zm9yKHZhciBiLGMsZCxlPS88KFtePlxcL10rPylzdHlsZT0oXCIoW15cIl0rKVwifCcoW14nXSspJykoW14+XSopPi9naSxmPVwiXCIsZz0wO2I9ZS5leGVjKGEpOyljPWJbM118fGJbNF0sYyYmYy5tYXRjaCgvbGluZS1oZWlnaHQ6IDEuWzAtOV17MywxMn07fGNvbG9yOiBpbmhlcml0OyBsaW5lLWhlaWdodDogMS4xOy9pKSYmKGM9Yy5yZXBsYWNlKC8oIHwpZm9udC1mYW1pbHk6IGluaGVyaXQ7fCggfClsaW5lLWhlaWdodDogMS5bMC05XXszLDEyfTt8KCB8KWNvbG9yOiBpbmhlcml0Oy9naSxcIlwiKSxkPVwiPFwiK2JbMV0udHJpbSgpLGMudHJpbSgpLmxlbmd0aD4wJiYoZCs9XCIgc3R5bGU9XCIrYlsyXS5zdWJzdHJpbmcoMCwxKStjK2JbMl0uc3Vic3RyaW5nKDAsMSkpLGQrPWJbNV0udHJpbSgpK1wiPlwiLGYrPWEuc3Vic3RyaW5nKGcsYi5pbmRleCkrZCxnPWIuaW5kZXgrYlswXS5sZW5ndGgpO3JldHVybiBmKz1hLnN1YnN0cmluZyhnKSxnPjA/Zi5yZXBsYWNlKC88c3Bhblxccz8+KC4qPyk8XFwvc3Bhbj4oPGJyKFxcL3wpPnwpL2dpLFwiJDFcIik6YX07cmV0dXJuIGF9KS5mYWN0b3J5KFwidGFTYW5pdGl6ZVwiLFtcIiRzYW5pdGl6ZVwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGMsZD0wLGU9MCxmPS88W14+XSo+L2dpO2M9Zi5leGVjKGEpOylpZihlPWMuaW5kZXgsXCIvXCI9PT1jWzBdLnN1YnN0cigxLDEpKXtpZigwPT09ZClicmVhaztkLS19ZWxzZSBkKys7cmV0dXJuIGIrYS5zdWJzdHJpbmcoMCxlKSthbmd1bGFyLmVsZW1lbnQoYilbMF0ub3V0ZXJIVE1MLnN1YnN0cmluZyhiLmxlbmd0aCkrYS5zdWJzdHJpbmcoZSl9ZnVuY3Rpb24gYyhhKXtpZighYXx8IWFuZ3VsYXIuaXNTdHJpbmcoYSl8fGEubGVuZ3RoPD0wKXJldHVybiBhO2Zvcih2YXIgZCxmLGcsaCxpLGssbD0vPChbXj5cXC9dKz8pc3R5bGU9KFwiKFteXCJdKylcInwnKFteJ10rKScpKFtePl0qKT4vZ2ksbT1cIlwiLG49XCJcIixvPTA7Zj1sLmV4ZWMoYSk7KXtoPWZbM118fGZbNF07dmFyIHA9bmV3IFJlZ0V4cChqLFwiaVwiKTtpZihhbmd1bGFyLmlzU3RyaW5nKGgpJiZwLnRlc3QoaCkpe2k9XCJcIjtmb3IodmFyIHE9bmV3IFJlZ0V4cChqLFwiaWdcIik7Zz1xLmV4ZWMoaCk7KWZvcihkPTA7ZDxlLmxlbmd0aDtkKyspZ1syKmQrMl0mJihpKz1cIjxcIitlW2RdLnRhZytcIj5cIik7az1jKGEuc3Vic3RyaW5nKG8sZi5pbmRleCkpLG4rPW0ubGVuZ3RoPjA/YihrLG0pOmssaD1oLnJlcGxhY2UobmV3IFJlZ0V4cChqLFwiaWdcIiksXCJcIiksbis9XCI8XCIrZlsxXS50cmltKCksaC5sZW5ndGg+MCYmKG4rPScgc3R5bGU9XCInK2grJ1wiJyksbis9Zls1XStcIj5cIixvPWYuaW5kZXgrZlswXS5sZW5ndGgsbT1pfX1yZXR1cm4gbis9bS5sZW5ndGg+MD9iKGEuc3Vic3RyaW5nKG8pLG0pOmEuc3Vic3RyaW5nKG8pfWZ1bmN0aW9uIGQoYSl7aWYoIWF8fCFhbmd1bGFyLmlzU3RyaW5nKGEpfHxhLmxlbmd0aDw9MClyZXR1cm4gYTtmb3IodmFyIGIsYz0vPChbXj5cXC9dKz8pYWxpZ249KFwiKFteXCJdKylcInwnKFteJ10rKScpKFtePl0qKT4vZ2ksZD1cIlwiLGU9MDtiPWMuZXhlYyhhKTspe2QrPWEuc3Vic3RyaW5nKGUsYi5pbmRleCksZT1iLmluZGV4K2JbMF0ubGVuZ3RoO3ZhciBmPVwiPFwiK2JbMV0rYls1XTsvc3R5bGU9KFwiKFteXCJdKylcInwnKFteJ10rKScpL2dpLnRlc3QoZik/Zj1mLnJlcGxhY2UoL3N0eWxlPShcIihbXlwiXSspXCJ8JyhbXiddKyknKS9pLCdzdHlsZT1cIiQyJDMgdGV4dC1hbGlnbjonKyhiWzNdfHxiWzRdKSsnO1wiJyk6Zis9JyBzdHlsZT1cInRleHQtYWxpZ246JysoYlszXXx8Yls0XSkrJztcIicsZis9XCI+XCIsZCs9Zn1yZXR1cm4gZCthLnN1YnN0cmluZyhlKX1mb3IodmFyIGU9W3twcm9wZXJ0eTpcImZvbnQtd2VpZ2h0XCIsdmFsdWVzOltcImJvbGRcIl0sdGFnOlwiYlwifSx7cHJvcGVydHk6XCJmb250LXN0eWxlXCIsdmFsdWVzOltcIml0YWxpY1wiXSx0YWc6XCJpXCJ9XSxmPVtdLGc9MDtnPGUubGVuZ3RoO2crKyl7Zm9yKHZhciBoPVwiKFwiK2VbZ10ucHJvcGVydHkrXCI6XFxcXHMqKFwiLGk9MDtpPGVbZ10udmFsdWVzLmxlbmd0aDtpKyspaT4wJiYoaCs9XCJ8XCIpLGgrPWVbZ10udmFsdWVzW2ldO2grPVwiKTspXCIsZi5wdXNoKGgpfXZhciBqPVwiKFwiK2Yuam9pbihcInxcIikrXCIpXCI7cmV0dXJuIGZ1bmN0aW9uKGIsZSxmKXtpZighZil0cnl7Yj1jKGIpfWNhdGNoKGcpe31iPWQoYik7dmFyIGg7dHJ5e2g9YShiKSxmJiYoaD1iKX1jYXRjaChnKXtoPWV8fFwiXCJ9dmFyIGksaj1oLm1hdGNoKC8oPHByZVtePl0qPi4qPzxcXC9wcmVbXj5dKj4pL2dpKSxrPWgucmVwbGFjZSgvKCYjKDl8MTApOykqL2dpLFwiXCIpLGw9LzxwcmVbXj5dKj4uKj88XFwvcHJlW14+XSo+L2dpLG09MCxuPTA7Zm9yKGg9XCJcIjtudWxsIT09KGk9bC5leGVjKGspKSYmbTxqLmxlbmd0aDspaCs9ay5zdWJzdHJpbmcobixpLmluZGV4KStqW21dLG49aS5pbmRleCtpWzBdLmxlbmd0aCxtKys7cmV0dXJuIGgray5zdWJzdHJpbmcobil9fV0pLmZhY3RvcnkoXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsW1wiJHFcIixcIiRsb2dcIixmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjKXt2b2lkIDAhPT1jJiYodGhpcy4kZWRpdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGN9KTt2YXIgZCxlPWEuZGVmZXIoKSxmPWUucHJvbWlzZSxnPXRoaXMuJGVkaXRvcigpO3RyeXtkPXRoaXMuYWN0aW9uKGUsZy5zdGFydEFjdGlvbigpKSxmW1wiZmluYWxseVwiXShmdW5jdGlvbigpe2cuZW5kQWN0aW9uLmNhbGwoZyl9KX1jYXRjaChoKXtiLmVycm9yKGgpfShkfHx2b2lkIDA9PT1kKSYmZS5yZXNvbHZlKCl9fV0pLGFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXIuRE9NXCIsW1widGV4dEFuZ3VsYXIuZmFjdG9yaWVzXCJdKS5mYWN0b3J5KFwidGFFeGVjQ29tbWFuZFwiLFtcInRhU2VsZWN0aW9uXCIsXCJ0YUJyb3dzZXJUYWdcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihiLGMpe3ZhciBkLGUsZj1iLmZpbmQoXCJsaVwiKTtmb3IoZT1mLmxlbmd0aC0xO2U+PTA7ZS0tKWQ9YW5ndWxhci5lbGVtZW50KFwiPFwiK2MrXCI+XCIrZltlXS5pbm5lckhUTUwrXCI8L1wiK2MrXCI+XCIpLGIuYWZ0ZXIoZCk7Yi5yZW1vdmUoKSxhLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChkWzBdKX0sZz1mdW5jdGlvbihiKXsvKDxicih8XFwvKT4pJC9pLnRlc3QoYi5pbm5lckhUTUwudHJpbSgpKT9hLnNldFNlbGVjdGlvbkJlZm9yZUVsZW1lbnQoYW5ndWxhci5lbGVtZW50KGIpLmZpbmQoXCJiclwiKVswXSk6YS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQoYil9LGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrYitcIj5cIithWzBdLmlubmVySFRNTCtcIjwvXCIrYitcIj5cIik7YS5hZnRlcihjKSxhLnJlbW92ZSgpLGcoYy5maW5kKFwibGlcIilbMF0pfSxpPWZ1bmN0aW9uKGEsYyxkKXtmb3IodmFyIGU9XCJcIixmPTA7ZjxhLmxlbmd0aDtmKyspZSs9XCI8XCIrYihcImxpXCIpK1wiPlwiK2FbZl0uaW5uZXJIVE1MK1wiPC9cIitiKFwibGlcIikrXCI+XCI7dmFyIGg9YW5ndWxhci5lbGVtZW50KFwiPFwiK2QrXCI+XCIrZStcIjwvXCIrZCtcIj5cIik7Yy5hZnRlcihoKSxjLnJlbW92ZSgpLGcoaC5maW5kKFwibGlcIilbMF0pfTtyZXR1cm4gZnVuY3Rpb24oZyxqKXtyZXR1cm4gZz1iKGcpLGZ1bmN0aW9uKGssbCxtLG4pe3ZhciBvLHAscSxyLHMsdCx1LHY9YW5ndWxhci5lbGVtZW50KFwiPFwiK2crXCI+XCIpO3RyeXt1PWEuZ2V0U2VsZWN0aW9uRWxlbWVudCgpfWNhdGNoKHcpe312YXIgeD1hbmd1bGFyLmVsZW1lbnQodSk7aWYodm9pZCAwIT09dSl7dmFyIHk9dS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJpbnNlcnRvcmRlcmVkbGlzdFwiPT09ay50b0xvd2VyQ2FzZSgpfHxcImluc2VydHVub3JkZXJlZGxpc3RcIj09PWsudG9Mb3dlckNhc2UoKSl7dmFyIHo9YihcImluc2VydG9yZGVyZWRsaXN0XCI9PT1rLnRvTG93ZXJDYXNlKCk/XCJvbFwiOlwidWxcIik7aWYoeT09PXopcmV0dXJuIGQoeCxnKTtpZihcImxpXCI9PT15JiZ4LnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PXomJjE9PT14LnBhcmVudCgpLmNoaWxkcmVuKCkubGVuZ3RoKXJldHVybiBkKHgucGFyZW50KCksZyk7aWYoXCJsaVwiPT09eSYmeC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT16JiYxPT09eC5wYXJlbnQoKS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4gaCh4LnBhcmVudCgpLHopO2lmKHkubWF0Y2goZSkmJiF4Lmhhc0NsYXNzKFwidGEtYmluZFwiKSl7aWYoXCJvbFwiPT09eXx8XCJ1bFwiPT09eSlyZXR1cm4gaCh4LHopO3ZhciBBPSExO3JldHVybiBhbmd1bGFyLmZvckVhY2goeC5jaGlsZHJlbigpLGZ1bmN0aW9uKGEpe2EudGFnTmFtZS5tYXRjaChlKSYmKEE9ITApfSksQT9pKHguY2hpbGRyZW4oKSx4LHopOmkoW2FuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrdS5pbm5lckhUTUwrXCI8L2Rpdj5cIilbMF1dLHgseil9aWYoeS5tYXRjaChlKSl7aWYocj1hLmdldE9ubHlTZWxlY3RlZEVsZW1lbnRzKCksMD09PXIubGVuZ3RoKXA9YW5ndWxhci5lbGVtZW50KFwiPFwiK3orXCI+PGxpPlwiK3UuaW5uZXJIVE1MK1wiPC9saT48L1wiK3orXCI+XCIpLHguaHRtbChcIlwiKSx4LmFwcGVuZChwKTtlbHNle2lmKDE9PT1yLmxlbmd0aCYmKFwib2xcIj09PXJbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcInVsXCI9PT1yWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpcmV0dXJuIHJbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09ej9kKGFuZ3VsYXIuZWxlbWVudChyWzBdKSxnKTpoKGFuZ3VsYXIuZWxlbWVudChyWzBdKSx6KTtxPVwiXCI7dmFyIEI9W107Zm9yKG89MDtvPHIubGVuZ3RoO28rKylpZigzIT09cltvXS5ub2RlVHlwZSl7dmFyIEM9YW5ndWxhci5lbGVtZW50KHJbb10pO2lmKFwibGlcIj09PXJbb10udGFnTmFtZS50b0xvd2VyQ2FzZSgpKWNvbnRpbnVlO3ErPVwib2xcIj09PXJbb10udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcInVsXCI9PT1yW29dLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9DWzBdLmlubmVySFRNTDpcInNwYW5cIiE9PXJbb10udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcIm9sXCIhPT1yW29dLmNoaWxkTm9kZXNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcInVsXCIhPT1yW29dLmNoaWxkTm9kZXNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP1wiPFwiK2IoXCJsaVwiKStcIj5cIitDWzBdLmlubmVySFRNTCtcIjwvXCIrYihcImxpXCIpK1wiPlwiOkNbMF0uY2hpbGROb2Rlc1swXS5pbm5lckhUTUwsQi51bnNoaWZ0KEMpfXA9YW5ndWxhci5lbGVtZW50KFwiPFwiK3orXCI+XCIrcStcIjwvXCIreitcIj5cIiksQi5wb3AoKS5yZXBsYWNlV2l0aChwKSxhbmd1bGFyLmZvckVhY2goQixmdW5jdGlvbihhKXthLnJlbW92ZSgpfSl9cmV0dXJuIHZvaWQgYS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQocFswXSl9fWVsc2V7aWYoXCJmb3JtYXRibG9ja1wiPT09ay50b0xvd2VyQ2FzZSgpKXtmb3IodD1tLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWzw+XS9naSxcIlwiKSxcImRlZmF1bHRcIj09PXQudHJpbSgpJiYodD1nLG09XCI8XCIrZytcIj5cIikscD1cImxpXCI9PT15P3gucGFyZW50KCk6eDshcFswXS50YWdOYW1lfHwhcFswXS50YWdOYW1lLm1hdGNoKGUpJiYhcC5wYXJlbnQoKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpOylwPXAucGFyZW50KCkseT0ocFswXS50YWdOYW1lfHxcIlwiKS50b0xvd2VyQ2FzZSgpO2lmKHk9PT10KXtyPXAuY2hpbGRyZW4oKTt2YXIgRD0hMTtmb3Iobz0wO288ci5sZW5ndGg7bysrKUQ9RHx8cltvXS50YWdOYW1lLm1hdGNoKGUpO0Q/KHAuYWZ0ZXIocikscz1wLm5leHQoKSxwLnJlbW92ZSgpLHA9cyk6KHYuYXBwZW5kKHBbMF0uY2hpbGROb2RlcykscC5hZnRlcih2KSxwLnJlbW92ZSgpLHA9dil9ZWxzZSBpZihwLnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9PXR8fHAucGFyZW50KCkuaGFzQ2xhc3MoXCJ0YS1iaW5kXCIpKWlmKHkubWF0Y2goZikpcC53cmFwKG0pO2Vsc2V7Zm9yKHI9YS5nZXRPbmx5U2VsZWN0ZWRFbGVtZW50cygpLDA9PT1yLmxlbmd0aCYmKHI9W3BbMF1dKSxvPTA7bzxyLmxlbmd0aDtvKyspaWYoMz09PXJbb10ubm9kZVR5cGV8fCFyW29dLnRhZ05hbWUubWF0Y2goZSkpZm9yKDszPT09cltvXS5ub2RlVHlwZXx8IXJbb10udGFnTmFtZXx8IXJbb10udGFnTmFtZS5tYXRjaChlKTspcltvXT1yW29dLnBhcmVudE5vZGU7aWYoYW5ndWxhci5lbGVtZW50KHJbMF0pLmhhc0NsYXNzKFwidGEtYmluZFwiKSlwPWFuZ3VsYXIuZWxlbWVudChtKSxwWzBdLmlubmVySFRNTD1yWzBdLmlubmVySFRNTCxyWzBdLmlubmVySFRNTD1wWzBdLm91dGVySFRNTDtlbHNlIGlmKFwiYmxvY2txdW90ZVwiPT09dCl7Zm9yKHE9XCJcIixvPTA7bzxyLmxlbmd0aDtvKyspcSs9cltvXS5vdXRlckhUTUw7Zm9yKHA9YW5ndWxhci5lbGVtZW50KG0pLHBbMF0uaW5uZXJIVE1MPXEsclswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwWzBdLHJbMF0pLG89ci5sZW5ndGgtMTtvPj0wO28tLSlyW29dLnBhcmVudE5vZGUmJnJbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyW29dKX1lbHNlIGZvcihvPTA7bzxyLmxlbmd0aDtvKyspcD1hbmd1bGFyLmVsZW1lbnQobSkscFswXS5pbm5lckhUTUw9cltvXS5pbm5lckhUTUwscltvXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwWzBdLHJbb10pLHJbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyW29dKX1lbHNle3ZhciBFPXAucGFyZW50KCksRj1FLmNvbnRlbnRzKCk7Zm9yKG89MDtvPEYubGVuZ3RoO28rKylFLnBhcmVudCgpLmhhc0NsYXNzKFwidGEtYmluZFwiKSYmMz09PUZbb10ubm9kZVR5cGUmJih2PWFuZ3VsYXIuZWxlbWVudChcIjxcIitnK1wiPlwiKSx2WzBdLmlubmVySFRNTD1GW29dLm91dGVySFRNTCxGW29dPXZbMF0pLEUucGFyZW50KClbMF0uaW5zZXJ0QmVmb3JlKEZbb10sRVswXSk7RS5yZW1vdmUoKX1yZXR1cm4gdm9pZCBhLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChwWzBdKX1pZihcImNyZWF0ZWxpbmtcIj09PWsudG9Mb3dlckNhc2UoKSl7dmFyIEc9JzxhIGhyZWY9XCInK20rJ1wiIHRhcmdldD1cIicrKG4uYS50YXJnZXQ/bi5hLnRhcmdldDpcIlwiKSsnXCI+JyxIPVwiPC9hPlwiLEk9YS5nZXRTZWxlY3Rpb24oKTtpZihJLmNvbGxhcHNlZClhLmluc2VydEh0bWwoRyttK0gsaik7ZWxzZSBpZihyYW5neS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLmNhblN1cnJvdW5kQ29udGVudHMoKSl7dmFyIEo9YW5ndWxhci5lbGVtZW50KEcrSClbMF07cmFuZ3kuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKS5zdXJyb3VuZENvbnRlbnRzKEopfXJldHVybn1pZihcImluc2VydGh0bWxcIj09PWsudG9Mb3dlckNhc2UoKSlyZXR1cm4gdm9pZCBhLmluc2VydEh0bWwobSxqKX19dHJ5e2NbMF0uZXhlY0NvbW1hbmQoayxsLG0pfWNhdGNoKHcpe319fX1dKS5zZXJ2aWNlKFwidGFTZWxlY3Rpb25cIixbXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcInRhRE9NXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF0sZj1hLnJhbmd5LGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50YWdOYW1lJiZhLnRhZ05hbWUubWF0Y2goL15iciQvaSkmJjA9PT1iJiYhYS5wcmV2aW91c1NpYmxpbmc/e2VsZW1lbnQ6YS5wYXJlbnROb2RlLG9mZnNldDowfTp7ZWxlbWVudDphLG9mZnNldDpifX0saT17Z2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLGI9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcixjPXtzdGFydDpoKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksZW5kOmgoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpLGNvbGxhcHNlZDphLmNvbGxhcHNlZH07cmV0dXJuIGI9Mz09PWIubm9kZVR5cGU/Yi5wYXJlbnROb2RlOmIsYi5wYXJlbnROb2RlPT09Yy5zdGFydC5lbGVtZW50fHxiLnBhcmVudE5vZGU9PT1jLmVuZC5lbGVtZW50P2MuY29udGFpbmVyPWIucGFyZW50Tm9kZTpjLmNvbnRhaW5lcj1iLGN9LGdldE9ubHlTZWxlY3RlZEVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLGI9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtyZXR1cm4gYj0zPT09Yi5ub2RlVHlwZT9iLnBhcmVudE5vZGU6YixhLmdldE5vZGVzKFsxXSxmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlPT09Yn0pfSxnZXRTZWxlY3Rpb25FbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0U2VsZWN0aW9uKCkuY29udGFpbmVyfSxzZXRTZWxlY3Rpb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWYuY3JlYXRlUmFuZ2UoKTtkLnNldFN0YXJ0KGEsYiksZC5zZXRFbmQoYSxjKSxmLmdldFNlbGVjdGlvbigpLnNldFNpbmdsZVJhbmdlKGQpfSxzZXRTZWxlY3Rpb25CZWZvcmVFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWYuY3JlYXRlUmFuZ2UoKTtiLnNlbGVjdE5vZGUoYSksYi5jb2xsYXBzZSghMCksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0sc2V0U2VsZWN0aW9uQWZ0ZXJFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWYuY3JlYXRlUmFuZ2UoKTtiLnNlbGVjdE5vZGUoYSksYi5jb2xsYXBzZSghMSksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0sc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5jcmVhdGVSYW5nZSgpO2Iuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGIuY29sbGFwc2UoITApLGYuZ2V0U2VsZWN0aW9uKCkuc2V0U2luZ2xlUmFuZ2UoYil9LHNldFNlbGVjdGlvblRvRWxlbWVudEVuZDpmdW5jdGlvbihhKXt2YXIgYj1mLmNyZWF0ZVJhbmdlKCk7Yi5zZWxlY3ROb2RlQ29udGVudHMoYSksYi5jb2xsYXBzZSghMSksYS5jaGlsZE5vZGVzJiZhLmNoaWxkTm9kZXNbYS5jaGlsZE5vZGVzLmxlbmd0aC0xXSYmXCJiclwiPT09YS5jaGlsZE5vZGVzW2EuY2hpbGROb2Rlcy5sZW5ndGgtMV0ubm9kZU5hbWUmJihiLnN0YXJ0T2Zmc2V0PWIuZW5kT2Zmc2V0PWIuc3RhcnRPZmZzZXQtMSksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0saW5zZXJ0SHRtbDpmdW5jdGlvbihhLGIpe3ZhciBoLGosayxsLG0sbixvLHA9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIithK1wiPC9kaXY+XCIpLHE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLHI9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscz1wWzBdLmNoaWxkTm9kZXMsdD0hMDtpZihzLmxlbmd0aD4wKXtmb3IobD1bXSxrPTA7azxzLmxlbmd0aDtrKyspXCJwXCI9PT1zW2tdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwiXCI9PT1zW2tdLmlubmVySFRNTC50cmltKCl8fDM9PT1zW2tdLm5vZGVUeXBlJiZcIlwiPT09c1trXS5ub2RlVmFsdWUudHJpbSgpfHwodD10JiYhZS50ZXN0KHNba10ubm9kZU5hbWUpLGwucHVzaChzW2tdKSk7Zm9yKHZhciB1PTA7dTxsLmxlbmd0aDt1Kyspbj1yLmFwcGVuZENoaWxkKGxbdV0pOyF0JiZxLmNvbGxhcHNlZCYmL14ofDxicih8XFwvKT4pJC9pLnRlc3QocS5zdGFydENvbnRhaW5lci5pbm5lckhUTUwpJiZxLnNlbGVjdE5vZGUocS5zdGFydENvbnRhaW5lcil9ZWxzZSB0PSEwLG49cj1kLmNyZWF0ZVRleHROb2RlKGEpO2lmKHQpcS5kZWxldGVDb250ZW50cygpO2Vsc2UgaWYocS5jb2xsYXBzZWQmJnEuc3RhcnRDb250YWluZXIhPT1iKWlmKHEuc3RhcnRDb250YWluZXIuaW5uZXJIVE1MJiZxLnN0YXJ0Q29udGFpbmVyLmlubmVySFRNTC5tYXRjaCgvXjxbXj5dKj4kL2kpKWg9cS5zdGFydENvbnRhaW5lciwxPT09cS5zdGFydE9mZnNldD8ocS5zZXRTdGFydEFmdGVyKGgpLHEuc2V0RW5kQWZ0ZXIoaCkpOihxLnNldFN0YXJ0QmVmb3JlKGgpLHEuc2V0RW5kQmVmb3JlKGgpKTtlbHNle2lmKDM9PT1xLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlJiZxLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUhPT1iKWZvcihoPXEuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSxqPWguY2xvbmVOb2RlKCksYy5zcGxpdE5vZGVzKGguY2hpbGROb2RlcyxoLGoscS5zdGFydENvbnRhaW5lcixxLnN0YXJ0T2Zmc2V0KTshZy50ZXN0KGgubm9kZU5hbWUpOyl7YW5ndWxhci5lbGVtZW50KGgpLmFmdGVyKGopLGg9aC5wYXJlbnROb2RlO3ZhciB2PWo7aj1oLmNsb25lTm9kZSgpLGMuc3BsaXROb2RlcyhoLmNoaWxkTm9kZXMsaCxqLHYpfWVsc2UgaD1xLnN0YXJ0Q29udGFpbmVyLGo9aC5jbG9uZU5vZGUoKSxjLnNwbGl0Tm9kZXMoaC5jaGlsZE5vZGVzLGgsaix2b2lkIDAsdm9pZCAwLHEuc3RhcnRPZmZzZXQpO2lmKGFuZ3VsYXIuZWxlbWVudChoKS5hZnRlcihqKSxxLnNldFN0YXJ0QWZ0ZXIoaCkscS5zZXRFbmRBZnRlcihoKSwvXih8PGJyKHxcXC8pPikkL2kudGVzdChoLmlubmVySFRNTC50cmltKCkpJiYocS5zZXRTdGFydEJlZm9yZShoKSxxLnNldEVuZEJlZm9yZShoKSxhbmd1bGFyLmVsZW1lbnQoaCkucmVtb3ZlKCkpLC9eKHw8YnIofFxcLyk+KSQvaS50ZXN0KGouaW5uZXJIVE1MLnRyaW0oKSkmJmFuZ3VsYXIuZWxlbWVudChqKS5yZW1vdmUoKSxcImxpXCI9PT1oLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2ZvcihvPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG09MDttPHIuY2hpbGROb2Rlcy5sZW5ndGg7bSsrKXA9YW5ndWxhci5lbGVtZW50KFwiPGxpPlwiKSxjLnRyYW5zZmVyQ2hpbGROb2RlcyhyLmNoaWxkTm9kZXNbbV0scFswXSksYy50cmFuc2Zlck5vZGVBdHRyaWJ1dGVzKHIuY2hpbGROb2Rlc1ttXSxwWzBdKSxvLmFwcGVuZENoaWxkKHBbMF0pO3I9byxuJiYobj1yLmNoaWxkTm9kZXNbci5jaGlsZE5vZGVzLmxlbmd0aC0xXSxuPW4uY2hpbGROb2Rlc1tuLmNoaWxkTm9kZXMubGVuZ3RoLTFdKX19ZWxzZSBxLmRlbGV0ZUNvbnRlbnRzKCk7cS5pbnNlcnROb2RlKHIpLG4mJmkuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKG4pfX07cmV0dXJuIGl9XSkuc2VydmljZShcInRhRE9NXCIsZnVuY3Rpb24oKXt2YXIgYT17Z2V0QnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYixjKXt2YXIgZD1bXSxlPWIuY2hpbGRyZW4oKTtyZXR1cm4gZS5sZW5ndGgmJmFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGIpe2Q9ZC5jb25jYXQoYS5nZXRCeUF0dHJpYnV0ZShhbmd1bGFyLmVsZW1lbnQoYiksYykpfSksdm9pZCAwIT09Yi5hdHRyKGMpJiZkLnB1c2goYiksZH0sdHJhbnNmZXJDaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Zm9yKGIuaW5uZXJIVE1MPVwiXCI7YS5jaGlsZE5vZGVzLmxlbmd0aD4wOyliLmFwcGVuZENoaWxkKGEuY2hpbGROb2Rlc1swXSk7cmV0dXJuIGJ9LHNwbGl0Tm9kZXM6ZnVuY3Rpb24oYixjLGQsZSxmLGcpe2lmKCFlJiZpc05hTihnKSl0aHJvdyBuZXcgRXJyb3IoXCJ0YURPTS5zcGxpdE5vZGVzIHJlcXVpcmVzIGEgc3BsaXROb2RlIG9yIHNwbGl0SW5kZXhcIik7Zm9yKHZhciBoPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxpPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxqPTA7Yi5sZW5ndGg+MCYmKGlzTmFOKGcpfHxnIT09aikmJmJbMF0hPT1lOyloLmFwcGVuZENoaWxkKGJbMF0pLGorKztmb3IoIWlzTmFOKGYpJiZmPj0wJiZiWzBdJiYoaC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiWzBdLm5vZGVWYWx1ZS5zdWJzdHJpbmcoMCxmKSkpLGJbMF0ubm9kZVZhbHVlPWJbMF0ubm9kZVZhbHVlLnN1YnN0cmluZyhmKSk7Yi5sZW5ndGg+MDspaS5hcHBlbmRDaGlsZChiWzBdKTthLnRyYW5zZmVyQ2hpbGROb2RlcyhoLGMpLGEudHJhbnNmZXJDaGlsZE5vZGVzKGksZCl9LHRyYW5zZmVyTm9kZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPGEuYXR0cmlidXRlcy5sZW5ndGg7YysrKWIuc2V0QXR0cmlidXRlKGEuYXR0cmlidXRlc1tjXS5uYW1lLGEuYXR0cmlidXRlc1tjXS52YWx1ZSk7cmV0dXJuIGJ9fTtyZXR1cm4gYX0pLGFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXIudmFsaWRhdG9yc1wiLFtdKS5kaXJlY3RpdmUoXCJ0YU1heFRleHRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9cGFyc2VJbnQoYS4kZXZhbChjLnRhTWF4VGV4dCkpO2lmKGlzTmFOKGUpKXRocm93XCJNYXggdGV4dCBtdXN0IGJlIGFuIGludGVnZXJcIjtjLiRvYnNlcnZlKFwidGFNYXhUZXh0XCIsZnVuY3Rpb24oYSl7aWYoZT1wYXJzZUludChhKSxpc05hTihlKSl0aHJvd1wiTWF4IHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7ZC4kZGlydHkmJmQuJHZhbGlkYXRlKCl9KSxkLiR2YWxpZGF0b3JzLnRhTWF4VGV4dD1mdW5jdGlvbihhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2Lz5cIik7cmV0dXJuIGIuaHRtbChhKSxiLnRleHQoKS5sZW5ndGg8PWV9fX19KS5kaXJlY3RpdmUoXCJ0YU1pblRleHRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9cGFyc2VJbnQoYS4kZXZhbChjLnRhTWluVGV4dCkpO2lmKGlzTmFOKGUpKXRocm93XCJNaW4gdGV4dCBtdXN0IGJlIGFuIGludGVnZXJcIjtjLiRvYnNlcnZlKFwidGFNaW5UZXh0XCIsZnVuY3Rpb24oYSl7aWYoZT1wYXJzZUludChhKSxpc05hTihlKSl0aHJvd1wiTWluIHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7ZC4kZGlydHkmJmQuJHZhbGlkYXRlKCl9KSxkLiR2YWxpZGF0b3JzLnRhTWluVGV4dD1mdW5jdGlvbihhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2Lz5cIik7cmV0dXJuIGIuaHRtbChhKSwhYi50ZXh0KCkubGVuZ3RofHxiLnRleHQoKS5sZW5ndGg+PWV9fX19KSxhbmd1bGFyLm1vZHVsZShcInRleHRBbmd1bGFyLnRhQmluZFwiLFtcInRleHRBbmd1bGFyLmZhY3Rvcmllc1wiLFwidGV4dEFuZ3VsYXIuRE9NXCJdKS5zZXJ2aWNlKFwiX3RhQmxhbmtUZXN0XCIsW2Z1bmN0aW9uKCl7dmFyIGE9LzwoYXxhYmJyfGFjcm9ueW18YmRpfGJkb3xiaWd8Y2l0ZXxjb2RlfGRlbHxkZm58aW1nfGluc3xrYmR8bGFiZWx8bWFwfG1hcmt8cXxydWJ5fHJwfHJ0fHN8c2FtcHx0aW1lfHR0fHZhcilbXj5dKig+fCQpL2k7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihjKXtpZighYylyZXR1cm4hMDt2YXIgZCxlPS8oXltePF18PilbXjxdL2kuZXhlYyhjKTtyZXR1cm4gZT9kPWUuaW5kZXg6KGM9Yy50b1N0cmluZygpLnJlcGxhY2UoLz1cIlteXCJdKlwiL2ksXCJcIikucmVwbGFjZSgvPVwiW15cIl0qXCIvaSxcIlwiKS5yZXBsYWNlKC89XCJbXlwiXSpcIi9pLFwiXCIpLnJlcGxhY2UoLz1cIlteXCJdKlwiL2ksXCJcIiksZD1jLmluZGV4T2YoXCI+XCIpKSxjPWMudHJpbSgpLnN1YnN0cmluZyhkLGQrMTAwKSwvXltePD5dKyQvaS50ZXN0KGMpPyExOjA9PT1jLmxlbmd0aHx8Yz09PWJ8fC9ePihcXHN8Jm5ic3A7KSo8XFwvW14+XSs+JC9naS50ZXN0KGMpPyEwOi8+XFxzKlteXFxzPF0vaS50ZXN0KGMpfHxhLnRlc3QoYyk/ITE6ITB9fX1dKS5kaXJlY3RpdmUoXCJ0YUJ1dHRvblwiLFtmdW5jdGlvbigpe3JldHVybntsaW5rOmZ1bmN0aW9uKGEsYixjKXtiLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpLGIub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhLGIpe3JldHVybiBiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGEucHJldmVudERlZmF1bHQoKSwhMX0pfX19XSkuZGlyZWN0aXZlKFwidGFCaW5kXCIsW1widGFTYW5pdGl6ZVwiLFwiJHRpbWVvdXRcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwidGFGaXhDaHJvbWVcIixcInRhQnJvd3NlclRhZ1wiLFwidGFTZWxlY3Rpb25cIixcInRhU2VsZWN0YWJsZUVsZW1lbnRzXCIsXCJ0YUFwcGx5Q3VzdG9tUmVuZGVyZXJzXCIsXCJ0YU9wdGlvbnNcIixcIl90YUJsYW5rVGVzdFwiLFwiJHBhcnNlXCIsXCJ0YURPTVwiLFwidGV4dEFuZ3VsYXJNYW5hZ2VyXCIsZnVuY3Rpb24oYSxiLGYsaCxrLGwsbSxuLG8scSxyLHMsdCx1KXtyZXR1cm57cHJpb3JpdHk6MixyZXF1aXJlOltcIm5nTW9kZWxcIixcIj9uZ01vZGVsT3B0aW9uc1wiXSxsaW5rOmZ1bmN0aW9uKGwsdix3LHgpe2Z1bmN0aW9uIHkoYSl7dmFyIGI7cmV0dXJuIFIuZm9yRWFjaChmdW5jdGlvbihjKXtpZihjLmtleUNvZGU9PT1hLmtleUNvZGUpe3ZhciBkPShhLm1ldGFLZXk/TzowKSsoYS5jdHJsS2V5P046MCkrKGEuc2hpZnRLZXk/UTowKSsoYS5hbHRLZXk/UDowKTtpZihjLmZvcmJpZGRlbk1vZGlmaWVycyZkKXJldHVybjtjLm11c3RIYXZlTW9kaWZpZXJzLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBkJmF9KSYmKGI9Yy5zcGVjaWFsS2V5KX19KSxifXZhciB6LEEsQixDLEQ9eFswXSxFPXhbMV18fHt9LEY9dm9pZCAwIT09di5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZ2LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIiksRz1GfHxcInRleHRhcmVhXCI9PT12WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJpbnB1dFwiPT09dlswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCksSD0hMSxJPSExLEo9ITEsSz13LnRhVW5zYWZlU2FuaXRpemVyfHxxLmRpc2FibGVTYW5pdGl6ZXIsTD0vXig5fDE5fDIwfDI3fDMzfDM0fDM1fDM2fDM3fDM4fDM5fDQwfDQ1fDExMnwxMTN8MTE0fDExNXwxMTZ8MTE3fDExOHwxMTl8MTIwfDEyMXwxMjJ8MTIzfDE0NHwxNDUpJC9pLE09L14oOHwxM3wzMnw0Nnw1OXw2MXwxMDd8MTA5fDE3M3wxODZ8MTg3fDE4OHwxODl8MTkwfDE5MXwxOTJ8MjE5fDIyMHwyMjF8MjIyKSQvaSxOPTEsTz0yLFA9NCxRPTgsUj1be3NwZWNpYWxLZXk6XCJVbmRvS2V5XCIsZm9yYmlkZGVuTW9kaWZpZXJzOlArUSxtdXN0SGF2ZU1vZGlmaWVyczpbTytOXSxrZXlDb2RlOjkwfSx7c3BlY2lhbEtleTpcIlJlZG9LZXlcIixmb3JiaWRkZW5Nb2RpZmllcnM6UCxtdXN0SGF2ZU1vZGlmaWVyczpbTytOLFFdLGtleUNvZGU6OTB9LHtzcGVjaWFsS2V5OlwiUmVkb0tleVwiLGZvcmJpZGRlbk1vZGlmaWVyczpQK1EsbXVzdEhhdmVNb2RpZmllcnM6W08rTl0sa2V5Q29kZTo4OX0se3NwZWNpYWxLZXk6XCJUYWJLZXlcIixmb3JiaWRkZW5Nb2RpZmllcnM6TytRK1ArTixtdXN0SGF2ZU1vZGlmaWVyczpbXSxrZXlDb2RlOjl9LHtzcGVjaWFsS2V5OlwiU2hpZnRUYWJLZXlcIixmb3JiaWRkZW5Nb2RpZmllcnM6TytQK04sbXVzdEhhdmVNb2RpZmllcnM6W1FdLGtleUNvZGU6OX1dO3ZvaWQgMD09PXcudGFEZWZhdWx0V3JhcCYmKHcudGFEZWZhdWx0V3JhcD1cInBcIiksXCJcIj09PXcudGFEZWZhdWx0V3JhcD8oQj1cIlwiLEM9dm9pZCAwPT09Yy5pZT9cIjxkaXY+PGJyPjwvZGl2PlwiOmMuaWU+PTExP1wiPHA+PGJyPjwvcD5cIjpjLmllPD04P1wiPFA+Jm5ic3A7PC9QPlwiOlwiPHA+Jm5ic3A7PC9wPlwiKTooQj12b2lkIDA9PT1jLmllfHxjLmllPj0xMT9cIjxcIit3LnRhRGVmYXVsdFdyYXArXCI+PGJyPjwvXCIrdy50YURlZmF1bHRXcmFwK1wiPlwiOmMuaWU8PTg/XCI8XCIrdy50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+PC9cIit3LnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj5cIjpcIjxcIit3LnRhRGVmYXVsdFdyYXArXCI+PC9cIit3LnRhRGVmYXVsdFdyYXArXCI+XCIsQz12b2lkIDA9PT1jLmllfHxjLmllPj0xMT9cIjxcIit3LnRhRGVmYXVsdFdyYXArXCI+PGJyPjwvXCIrdy50YURlZmF1bHRXcmFwK1wiPlwiOmMuaWU8PTg/XCI8XCIrdy50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+Jm5ic3A7PC9cIit3LnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj5cIjpcIjxcIit3LnRhRGVmYXVsdFdyYXArXCI+Jm5ic3A7PC9cIit3LnRhRGVmYXVsdFdyYXArXCI+XCIpLEUuJG9wdGlvbnN8fChFLiRvcHRpb25zPXt9KTt2YXIgUz1yKEMpLFQ9ZnVuY3Rpb24oYSl7aWYoUyhhKSlyZXR1cm4gYTt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2ErXCI8L2Rpdj5cIik7aWYoMD09PWIuY2hpbGRyZW4oKS5sZW5ndGgpYT1cIjxcIit3LnRhRGVmYXVsdFdyYXArXCI+XCIrYStcIjwvXCIrdy50YURlZmF1bHRXcmFwK1wiPlwiO2Vsc2V7dmFyIGMsZD1iWzBdLmNoaWxkTm9kZXMsZj0hMTtmb3IoYz0wO2M8ZC5sZW5ndGgmJiEoZj1kW2NdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goZSkpO2MrKyk7aWYoZilmb3IoYT1cIlwiLGM9MDtjPGQubGVuZ3RoO2MrKylpZihkW2NdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goZSkpYSs9ZFtjXS5vdXRlckhUTUw7ZWxzZXt2YXIgZz1kW2NdLm91dGVySFRNTHx8ZFtjXS5ub2RlVmFsdWU7YSs9XCJcIiE9PWcudHJpbSgpP1wiPFwiK3cudGFEZWZhdWx0V3JhcCtcIj5cIitnK1wiPC9cIit3LnRhRGVmYXVsdFdyYXArXCI+XCI6Z31lbHNlIGE9XCI8XCIrdy50YURlZmF1bHRXcmFwK1wiPlwiK2ErXCI8L1wiK3cudGFEZWZhdWx0V3JhcCtcIj5cIn1yZXR1cm4gYX07dy50YVBhc3RlJiYoQT1zKHcudGFQYXN0ZSkpLHYuYWRkQ2xhc3MoXCJ0YS1iaW5kXCIpO3ZhciBVO2xbXCIkdW5kb01hbmFnZXJcIisody5pZHx8XCJcIildPUQuJHVuZG9NYW5hZ2VyPXtfc3RhY2s6W10sX2luZGV4OjAsX21heDoxZTMscHVzaDpmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgYXx8bnVsbD09PWF8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLmN1cnJlbnQoKSYmbnVsbCE9PXRoaXMuY3VycmVudCgpJiZhPT09dGhpcy5jdXJyZW50KCk/YToodGhpcy5faW5kZXg8dGhpcy5fc3RhY2subGVuZ3RoLTEmJih0aGlzLl9zdGFjaz10aGlzLl9zdGFjay5zbGljZSgwLHRoaXMuX2luZGV4KzEpKSx0aGlzLl9zdGFjay5wdXNoKGEpLFUmJmIuY2FuY2VsKFUpLHRoaXMuX3N0YWNrLmxlbmd0aD50aGlzLl9tYXgmJnRoaXMuX3N0YWNrLnNoaWZ0KCksdGhpcy5faW5kZXg9dGhpcy5fc3RhY2subGVuZ3RoLTEsYSl9LHVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRUb0luZGV4KHRoaXMuX2luZGV4LTEpfSxyZWRvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VG9JbmRleCh0aGlzLl9pbmRleCsxKX0sc2V0VG9JbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gMD5hfHxhPnRoaXMuX3N0YWNrLmxlbmd0aC0xP3ZvaWQgMDoodGhpcy5faW5kZXg9YSx0aGlzLmN1cnJlbnQoKSl9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhY2tbdGhpcy5faW5kZXhdfX07dmFyIFYsVz1sW1wiJHVuZG9UYUJpbmRcIisody5pZHx8XCJcIildPWZ1bmN0aW9uKCl7aWYoIUgmJkYpe3ZhciBhPUQuJHVuZG9NYW5hZ2VyLnVuZG8oKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYSYmbnVsbCE9PWEmJihqYShhKSxaKGEsITEpLFYmJmIuY2FuY2VsKFYpLFY9YihmdW5jdGlvbigpe3ZbMF0uZm9jdXMoKSxtLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZCh2WzBdKX0sMSkpfX0sWD1sW1wiJHJlZG9UYUJpbmRcIisody5pZHx8XCJcIildPWZ1bmN0aW9uKCl7aWYoIUgmJkYpe3ZhciBhPUQuJHVuZG9NYW5hZ2VyLnJlZG8oKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYSYmbnVsbCE9PWEmJihqYShhKSxaKGEsITEpLFYmJmIuY2FuY2VsKFYpLFY9YihmdW5jdGlvbigpe3ZbMF0uZm9jdXMoKSxtLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZCh2WzBdKX0sMSkpfX0sWT1mdW5jdGlvbigpe2lmKEYpcmV0dXJuIHZbMF0uaW5uZXJIVE1MO2lmKEcpcmV0dXJuIHYudmFsKCk7dGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBhdHRlbXB0aW5nIHRvIHVwZGF0ZSBub24tZWRpdGFibGUgdGFCaW5kXCJ9LFo9ZnVuY3Rpb24oYSxiLGMpe0o9Y3x8ITEsKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBifHxudWxsPT09YikmJihiPSEwJiZGKSwoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGF8fG51bGw9PT1hKSYmKGE9WSgpKSxTKGEpPyhcIlwiIT09RC4kdmlld1ZhbHVlJiZELiRzZXRWaWV3VmFsdWUoXCJcIiksYiYmXCJcIiE9PUQuJHVuZG9NYW5hZ2VyLmN1cnJlbnQoKSYmRC4kdW5kb01hbmFnZXIucHVzaChcIlwiKSk6KGlhKCksRC4kdmlld1ZhbHVlIT09YSYmKEQuJHNldFZpZXdWYWx1ZShhKSxiJiZELiR1bmRvTWFuYWdlci5wdXNoKGEpKSksRC4kcmVuZGVyKCl9O2xbXCJ1cGRhdGVUYUJpbmRcIisody5pZHx8XCJcIildPWZ1bmN0aW9uKCl7SHx8Wih2b2lkIDAsdm9pZCAwLCEwKX07dmFyICQ9ZnVuY3Rpb24oYil7cmV0dXJuIEQuJG9sZFZpZXdWYWx1ZT1hKGsoYiksRC4kb2xkVmlld1ZhbHVlLEspfTtpZih2LmF0dHIoXCJyZXF1aXJlZFwiKSYmKEQuJHZhbGlkYXRvcnMucmVxdWlyZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hUyhhfHxiKX0pLEQuJHBhcnNlcnMucHVzaCgkKSxELiRwYXJzZXJzLnVuc2hpZnQoVCksRC4kZm9ybWF0dGVycy5wdXNoKCQpLEQuJGZvcm1hdHRlcnMudW5zaGlmdChUKSxELiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7cmV0dXJuIEQuJHVuZG9NYW5hZ2VyLnB1c2goYXx8XCJcIil9KSxHKWlmKGwuZXZlbnRzPXt9LEYpe3ZhciBfPSExLGFhPWZ1bmN0aW9uKGMpe2lmKGMmJmMudHJpbSgpLmxlbmd0aCl7aWYoYy5tYXRjaCgvY2xhc3M9W1wiJ10qTXNvKE5vcm1hbHxMaXN0KS9pKSl7dmFyIGQ9Yy5tYXRjaCgvPCEtLVN0YXJ0RnJhZ21lbnQtLT4oW1xcc1xcU10qPyk8IS0tRW5kRnJhZ21lbnQtLT4vaSk7ZD1kP2RbMV06YyxkPWQucmVwbGFjZSgvPG86cD5bXFxzXFxTXSo/PFxcL286cD4vZ2ksXCJcIikucmVwbGFjZSgvY2xhc3M9KFtcIiddfClNc29Ob3JtYWwoW1wiJ118KS9naSxcIlwiKTt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2QrXCI8L2Rpdj5cIiksZj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PjwvZGl2PlwiKSxnPXtlbGVtZW50Om51bGwsbGFzdEluZGVudDpbXSxsYXN0TGk6bnVsbCxpc1VsOiExfTtnLmxhc3RJbmRlbnQucGVlaz1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoO3JldHVybiBhPjA/dGhpc1thLTFdOnZvaWQgMH07Zm9yKHZhciBoPWZ1bmN0aW9uKGEpe2cuaXNVbD1hLGcuZWxlbWVudD1hbmd1bGFyLmVsZW1lbnQoYT9cIjx1bD5cIjpcIjxvbD5cIiksZy5sYXN0SW5kZW50PVtdLGcubGFzdEluZGVudC5wZWVrPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7cmV0dXJuIGE+MD90aGlzW2EtMV06dm9pZCAwfSxnLmxhc3RMZXZlbE1hdGNoPW51bGx9LGk9MDtpPD1lWzBdLmNoaWxkTm9kZXMubGVuZ3RoO2krKylpZihlWzBdLmNoaWxkTm9kZXNbaV0mJlwiI3RleHRcIiE9PWVbMF0uY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSYmXCJwXCI9PT1lWzBdLmNoaWxkTm9kZXNbaV0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoZVswXS5jaGlsZE5vZGVzW2ldKSxrPShqLmF0dHIoXCJjbGFzc1wiKXx8XCJcIikubWF0Y2goL01zb0xpc3QoQnVsbGV0fE51bWJlcnxQYXJhZ3JhcGgpKEN4U3AoRmlyc3R8TWlkZGxlfExhc3QpfCkvaSk7aWYoayl7aWYoalswXS5jaGlsZE5vZGVzLmxlbmd0aDwyfHxqWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlcy5sZW5ndGg8MSljb250aW51ZTt2YXIgbj1cImJ1bGxldFwiPT09a1sxXS50b0xvd2VyQ2FzZSgpfHxcIm51bWJlclwiIT09a1sxXS50b0xvd2VyQ2FzZSgpJiYhKC9eW14wLTlhLXo8XSpbMC05YS16XStbXjAtOWEtejw+XTwvaS50ZXN0KGpbMF0uY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwpfHwvXlteMC05YS16PF0qWzAtOWEtel0rW14wLTlhLXo8Pl08L2kudGVzdChqWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5pbm5lckhUTUwpKSxvPShqLmF0dHIoXCJzdHlsZVwiKXx8XCJcIikubWF0Y2goL21hcmdpbi1sZWZ0OihbXFwtXFwuMC05XSopL2kpLHA9cGFyc2VGbG9hdChvP29bMV06MCkscT0oai5hdHRyKFwic3R5bGVcIil8fFwiXCIpLm1hdGNoKC9tc28tbGlzdDpsKFswLTldKykgbGV2ZWwoWzAtOV0rKSBsZm9bMC05K10oJHw7KS9pKTtpZihxJiZxWzJdJiYocD1wYXJzZUludChxWzJdKSkscSYmKCFnLmxhc3RMZXZlbE1hdGNofHxxWzFdIT09Zy5sYXN0TGV2ZWxNYXRjaFsxXSl8fCFrWzNdfHxcImZpcnN0XCI9PT1rWzNdLnRvTG93ZXJDYXNlKCl8fG51bGw9PT1nLmxhc3RJbmRlbnQucGVlaygpfHxnLmlzVWwhPT1uJiZnLmxhc3RJbmRlbnQucGVlaygpPT09cCloKG4pLGYuYXBwZW5kKGcuZWxlbWVudCk7ZWxzZSBpZihudWxsIT1nLmxhc3RJbmRlbnQucGVlaygpJiZnLmxhc3RJbmRlbnQucGVlaygpPHApZy5lbGVtZW50PWFuZ3VsYXIuZWxlbWVudChuP1wiPHVsPlwiOlwiPG9sPlwiKSxnLmxhc3RMaS5hcHBlbmQoZy5lbGVtZW50KTtlbHNlIGlmKG51bGwhPWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wZWVrKCk+cCl7Zm9yKDtudWxsIT1nLmxhc3RJbmRlbnQucGVlaygpJiZnLmxhc3RJbmRlbnQucGVlaygpPnA7KWlmKFwibGlcIiE9PWcuZWxlbWVudC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2lmKCEvW3VvXWwvaS50ZXN0KGcuZWxlbWVudC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKWJyZWFrO2cuZWxlbWVudD1nLmVsZW1lbnQucGFyZW50KCksZy5sYXN0SW5kZW50LnBvcCgpfWVsc2UgZy5lbGVtZW50PWcuZWxlbWVudC5wYXJlbnQoKTtnLmlzVWw9XCJ1bFwiPT09Zy5lbGVtZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxuIT09Zy5pc1VsJiYoaChuKSxmLmFwcGVuZChnLmVsZW1lbnQpKX1nLmxhc3RMZXZlbE1hdGNoPXEscCE9PWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wdXNoKHApLGcubGFzdExpPWFuZ3VsYXIuZWxlbWVudChcIjxsaT5cIiksZy5lbGVtZW50LmFwcGVuZChnLmxhc3RMaSksZy5sYXN0TGkuaHRtbChqLmh0bWwoKS5yZXBsYWNlKC88ISgtLXwpXFxbaWYgIXN1cHBvcnRMaXN0c1xcXSgtLXwpPltcXHNcXFNdKj88ISgtLXwpXFxbZW5kaWZcXF0oLS18KT4vZ2ksXCJcIikpLGoucmVtb3ZlKCl9ZWxzZSBoKCExKSxmLmFwcGVuZChqKX12YXIgcj1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKTtmb3IodmFyIGI9YVswXS5jaGlsZE5vZGVzLmxlbmd0aC0xO2I+PTA7Yi0tKWEuYWZ0ZXIoYVswXS5jaGlsZE5vZGVzW2JdKTthLnJlbW92ZSgpfTthbmd1bGFyLmZvckVhY2goZi5maW5kKFwic3BhblwiKSxmdW5jdGlvbihhKXthLnJlbW92ZUF0dHJpYnV0ZShcImxhbmdcIiksYS5hdHRyaWJ1dGVzLmxlbmd0aDw9MCYmcihhKX0pLGFuZ3VsYXIuZm9yRWFjaChmLmZpbmQoXCJmb250XCIpLHIpLGM9Zi5odG1sKCl9ZWxzZXtpZihjPWMucmVwbGFjZSgvPCh8XFwvKW1ldGFbXj5dKj8+L2dpLFwiXCIpLGMubWF0Y2goLzxbXj5dKj8odGEtYmluZClbXj5dKj8+Lykpe2lmKGMubWF0Y2goLzxbXj5dKj8odGV4dC1hbmd1bGFyKVtePl0qPz4vKSl7dmFyIHM9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIitjK1wiPC9kaXY+XCIpO3MuZmluZChcInRleHRhcmVhXCIpLnJlbW92ZSgpO2Zvcih2YXIgdT10LmdldEJ5QXR0cmlidXRlKHMsXCJ0YS1iaW5kXCIpLHc9MDt3PHUubGVuZ3RoO3crKyl7Zm9yKHZhciB4PXVbd11bMF0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLHk9MDt5PHVbd11bMF0uY2hpbGROb2Rlcy5sZW5ndGg7eSsrKXgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodVt3XVswXS5jaGlsZE5vZGVzW3ldLHgpO3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh4KX1jPXMuaHRtbCgpLnJlcGxhY2UoJzxiciBjbGFzcz1cIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIj4nLFwiXCIpfX1lbHNlIGMubWF0Y2goL148c3Bhbi8pJiYoYz1jLnJlcGxhY2UoLzwofFxcLylzcGFuW14+XSo/Pi9naSxcIlwiKSk7Yz1jLnJlcGxhY2UoLzxiciBjbGFzcz1cIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIltePl0qPz4vZ2ksXCJcIikucmVwbGFjZSgvPHNwYW4gY2xhc3M9XCJBcHBsZS1jb252ZXJ0ZWQtc3BhY2VcIj4oIHwmbmJzcDspPFxcL3NwYW4+L2dpLFwiJm5ic3A7XCIpfS88bGkoXFxzLiopPz4vaS50ZXN0KGMpJiYvKDx1bChcXHMuKik/Pnw8b2woXFxzLiopPz4pLio8bGkoXFxzLiopPz4vaS50ZXN0KGMpPT09ITEmJihjPWMucmVwbGFjZSgvPGxpKFxccy4qKT8+Lio8XFwvbGkoXFxzLiopPz4vaSxcIjx1bD4kJjwvdWw+XCIpKSxBJiYoYz1BKGwseyRodG1sOmN9KXx8YyksYz1hKGMsXCJcIixLKSxtLmluc2VydEh0bWwoYyx2WzBdKSxiKGZ1bmN0aW9uKCl7RC4kc2V0Vmlld1ZhbHVlKFkoKSksXz0hMSx2LnJlbW92ZUNsYXNzKFwicHJvY2Vzc2luZy1wYXN0ZVwiKX0sMCl9ZWxzZSBfPSExLHYucmVtb3ZlQ2xhc3MoXCJwcm9jZXNzaW5nLXBhc3RlXCIpfTt2Lm9uKFwicGFzdGVcIixsLmV2ZW50cy5wYXN0ZT1mdW5jdGlvbihhLGMpe2lmKGMmJmFuZ3VsYXIuZXh0ZW5kKGEsYyksSHx8XylyZXR1cm4gYS5zdG9wUHJvcGFnYXRpb24oKSxhLnByZXZlbnREZWZhdWx0KCksITE7Xz0hMCx2LmFkZENsYXNzKFwicHJvY2Vzc2luZy1wYXN0ZVwiKTt2YXIgZCxlPShhLm9yaWdpbmFsRXZlbnR8fGEpLmNsaXBib2FyZERhdGE7aWYoZSYmZS5nZXREYXRhJiZlLnR5cGVzLmxlbmd0aD4wKXtmb3IodmFyIGc9XCJcIixpPTA7aTxlLnR5cGVzLmxlbmd0aDtpKyspZys9XCIgXCIrZS50eXBlc1tpXTtyZXR1cm4vdGV4dFxcL2h0bWwvaS50ZXN0KGcpP2Q9ZS5nZXREYXRhKFwidGV4dC9odG1sXCIpOi90ZXh0XFwvcGxhaW4vaS50ZXN0KGcpJiYoZD1lLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKSxhYShkKSxhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSwhMX12YXIgaj1mLnJhbmd5LnNhdmVTZWxlY3Rpb24oKSxrPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLWhpZGRlbi1pbnB1dFwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj48L2Rpdj4nKTtoLmZpbmQoXCJib2R5XCIpLmFwcGVuZChrKSxrWzBdLmZvY3VzKCksYihmdW5jdGlvbigpe2YucmFuZ3kucmVzdG9yZVNlbGVjdGlvbihqKSxhYShrWzBdLmlubmVySFRNTCksdlswXS5mb2N1cygpLGsucmVtb3ZlKCl9LDApfSksdi5vbihcImN1dFwiLGwuZXZlbnRzLmN1dD1mdW5jdGlvbihhKXtIP2EucHJldmVudERlZmF1bHQoKTpiKGZ1bmN0aW9uKCl7RC4kc2V0Vmlld1ZhbHVlKFkoKSl9LDApfSksdi5vbihcImtleWRvd25cIixsLmV2ZW50cy5rZXlkb3duPWZ1bmN0aW9uKGEsYil7YiYmYW5ndWxhci5leHRlbmQoYSxiKSxhLnNwZWNpYWxLZXk9eShhKTt2YXIgYztpZihxLmtleU1hcHBpbmdzLmZvckVhY2goZnVuY3Rpb24oYil7YS5zcGVjaWFsS2V5PT09Yi5jb21tYW5kS2V5Q29kZSYmKGEuc3BlY2lhbEtleT12b2lkIDApLGIudGVzdEZvcktleShhKSYmKGM9Yi5jb21tYW5kS2V5Q29kZSksKFwiVW5kb0tleVwiPT09Yi5jb21tYW5kS2V5Q29kZXx8XCJSZWRvS2V5XCI9PT1iLmNvbW1hbmRLZXlDb2RlKSYmKGIuZW5hYmxlUHJvcGFnYXRpb258fGEucHJldmVudERlZmF1bHQoKSl9KSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYyYmKGEuc3BlY2lhbEtleT1jKSxcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5zcGVjaWFsS2V5fHxcIlVuZG9LZXlcIj09PWEuc3BlY2lhbEtleSYmXCJSZWRvS2V5XCI9PT1hLnNwZWNpYWxLZXl8fChhLnByZXZlbnREZWZhdWx0KCksdS5zZW5kS2V5Q29tbWFuZChsLGEpKSwhSCYmKFwiVW5kb0tleVwiPT09YS5zcGVjaWFsS2V5JiYoVygpLGEucHJldmVudERlZmF1bHQoKSksXCJSZWRvS2V5XCI9PT1hLnNwZWNpYWxLZXkmJihYKCksYS5wcmV2ZW50RGVmYXVsdCgpKSwxMz09PWEua2V5Q29kZSYmIWEuc2hpZnRLZXkpKXt2YXIgZCxlPW0uZ2V0U2VsZWN0aW9uRWxlbWVudCgpO2lmKCFlLnRhZ05hbWUubWF0Y2goZykpcmV0dXJuO3ZhciBmPWFuZ3VsYXIuZWxlbWVudChCKTtpZigvXjxicih8XFwvKT4kL2kudGVzdChlLmlubmVySFRNTC50cmltKCkpJiZcImJsb2NrcXVvdGVcIj09PWUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJiFlLm5leHRTaWJsaW5nKXtkPWFuZ3VsYXIuZWxlbWVudChlKTt2YXIgaD1kLnBhcmVudCgpO2guYWZ0ZXIoZiksZC5yZW1vdmUoKSwwPT09aC5jaGlsZHJlbigpLmxlbmd0aCYmaC5yZW1vdmUoKSxtLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KGZbMF0pLGEucHJldmVudERlZmF1bHQoKX1lbHNlL148W14+XSs+PGJyKHxcXC8pPjxcXC9bXj5dKz4kL2kudGVzdChlLmlubmVySFRNTC50cmltKCkpJiZcImJsb2NrcXVvdGVcIj09PWUudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoZD1hbmd1bGFyLmVsZW1lbnQoZSksZC5hZnRlcihmKSxkLnJlbW92ZSgpLG0uc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQoZlswXSksYS5wcmV2ZW50RGVmYXVsdCgpKX19KTt2YXIgYmE7aWYodi5vbihcImtleXVwXCIsbC5ldmVudHMua2V5dXA9ZnVuY3Rpb24oYSxjKXtpZihjJiZhbmd1bGFyLmV4dGVuZChhLGMpLDk9PT1hLmtleUNvZGUpe3ZhciBkPW0uZ2V0U2VsZWN0aW9uKCk7cmV0dXJuIHZvaWQoZC5zdGFydC5lbGVtZW50PT09dlswXSYmdi5jaGlsZHJlbigpLmxlbmd0aCYmbS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydCh2LmNoaWxkcmVuKClbMF0pKX1pZihVJiZiLmNhbmNlbChVKSwhSCYmIUwudGVzdChhLmtleUNvZGUpKXtpZihcIlwiIT09QiYmMTM9PT1hLmtleUNvZGUmJiFhLnNoaWZ0S2V5KXtmb3IodmFyIGU9bS5nZXRTZWxlY3Rpb25FbGVtZW50KCk7IWUudGFnTmFtZS5tYXRjaChnKSYmZSE9PXZbMF07KWU9ZS5wYXJlbnROb2RlO2lmKGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09dy50YURlZmF1bHRXcmFwJiZcImxpXCIhPT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKFwiXCI9PT1lLmlubmVySFRNTC50cmltKCl8fFwiPGJyPlwiPT09ZS5pbm5lckhUTUwudHJpbSgpKSl7dmFyIGg9YW5ndWxhci5lbGVtZW50KEIpO2FuZ3VsYXIuZWxlbWVudChlKS5yZXBsYWNlV2l0aChoKSxtLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KGhbMF0pfX12YXIgaT1ZKCk7aWYoXCJcIiE9PUImJlwiXCI9PT1pLnRyaW0oKSlqYShCKSxtLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KHYuY2hpbGRyZW4oKVswXSk7ZWxzZSBpZihcIjxcIiE9PWkuc3Vic3RyaW5nKDAsMSkmJlwiXCIhPT13LnRhRGVmYXVsdFdyYXApe3ZhciBqPWYucmFuZ3kuc2F2ZVNlbGVjdGlvbigpO2k9WSgpLGk9XCI8XCIrdy50YURlZmF1bHRXcmFwK1wiPlwiK2krXCI8L1wiK3cudGFEZWZhdWx0V3JhcCtcIj5cIixqYShpKSxmLnJhbmd5LnJlc3RvcmVTZWxlY3Rpb24oail9dmFyIGs9eiE9PWEua2V5Q29kZSYmTS50ZXN0KGEua2V5Q29kZSk7YmEmJmIuY2FuY2VsKGJhKSxiYT1iKGZ1bmN0aW9uKCl7WihpLGssITApfSxFLiRvcHRpb25zLmRlYm91bmNlfHw0MDApLGt8fChVPWIoZnVuY3Rpb24oKXtELiR1bmRvTWFuYWdlci5wdXNoKGkpfSwyNTApKSx6PWEua2V5Q29kZX19KSx2Lm9uKFwiYmx1clwiLGwuZXZlbnRzLmJsdXI9ZnVuY3Rpb24oKXtJPSExLEg/KEo9ITAsRC4kcmVuZGVyKCkpOloodm9pZCAwLHZvaWQgMCwhMCl9KSx3LnBsYWNlaG9sZGVyJiYoYy5pZT44fHx2b2lkIDA9PT1jLmllKSl7dmFyIGNhO2lmKCF3LmlkKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQW4gdW5pcXVlIElEIGlzIHJlcXVpcmVkIGZvciBwbGFjZWhvbGRlcnMgdG8gd29ya1wiO2NhPWkoXCIjXCIrdy5pZCtcIi5wbGFjZWhvbGRlci10ZXh0OmJlZm9yZVwiLCdjb250ZW50OiBcIicrdy5wbGFjZWhvbGRlcisnXCInKSxsLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtqKGNhKX0pfXYub24oXCJmb2N1c1wiLGwuZXZlbnRzLmZvY3VzPWZ1bmN0aW9uKCl7ST0hMCx2LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKSxpYSgpfSksdi5vbihcIm1vdXNldXBcIixsLmV2ZW50cy5tb3VzZXVwPWZ1bmN0aW9uKCl7dmFyIGE9bS5nZXRTZWxlY3Rpb24oKTthLnN0YXJ0LmVsZW1lbnQ9PT12WzBdJiZ2LmNoaWxkcmVuKCkubGVuZ3RoJiZtLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KHYuY2hpbGRyZW4oKVswXSl9KSx2Lm9uKFwibW91c2Vkb3duXCIsbC5ldmVudHMubW91c2Vkb3duPWZ1bmN0aW9uKGEsYil7YiYmYW5ndWxhci5leHRlbmQoYSxiKSxhLnN0b3BQcm9wYWdhdGlvbigpfSl9ZWxzZXt2Lm9uKFwiY2hhbmdlIGJsdXJcIixsLmV2ZW50cy5jaGFuZ2U9bC5ldmVudHMuYmx1cj1mdW5jdGlvbigpe0h8fEQuJHNldFZpZXdWYWx1ZShZKCkpfSksdi5vbihcImtleWRvd25cIixsLmV2ZW50cy5rZXlkb3duPWZ1bmN0aW9uKGEsYil7aWYoYiYmYW5ndWxhci5leHRlbmQoYSxiKSw5PT09YS5rZXlDb2RlKXt2YXIgYz10aGlzLnNlbGVjdGlvblN0YXJ0LGQ9dGhpcy5zZWxlY3Rpb25FbmQsZT12LnZhbCgpO2lmKGEuc2hpZnRLZXkpe3ZhciBmPWUubGFzdEluZGV4T2YoXCJcXG5cIixjKSxnPWUubGFzdEluZGV4T2YoXCJcdFwiLGMpOy0xIT09ZyYmZz49ZiYmKHYudmFsKGUuc3Vic3RyaW5nKDAsZykrZS5zdWJzdHJpbmcoZysxKSksdGhpcy5zZWxlY3Rpb25TdGFydD10aGlzLnNlbGVjdGlvbkVuZD1jLTEpfWVsc2Ugdi52YWwoZS5zdWJzdHJpbmcoMCxjKStcIlx0XCIrZS5zdWJzdHJpbmcoZCkpLHRoaXMuc2VsZWN0aW9uU3RhcnQ9dGhpcy5zZWxlY3Rpb25FbmQ9YysxO2EucHJldmVudERlZmF1bHQoKX19KTt2YXIgZGE9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9XCJcIixkPTA7Yj5kO2QrKyljKz1hO3JldHVybiBjfSxlYT1mdW5jdGlvbihhLGIpe3ZhciBjPVwiXCIsZD1hLmNoaWxkTm9kZXM7YisrLGMrPWRhKFwiXHRcIixiLTEpK2Eub3V0ZXJIVE1MLnN1YnN0cmluZygwLGEub3V0ZXJIVE1MLmluZGV4T2YoXCI8bGlcIikpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKWRbZV0ub3V0ZXJIVE1MJiYoYys9XCJ1bFwiPT09ZFtlXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfHxcIm9sXCI9PT1kW2VdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/XCJcXG5cIitlYShkW2VdLGIpOlwiXFxuXCIrZGEoXCJcdFwiLGIpK2RbZV0ub3V0ZXJIVE1MKTtyZXR1cm4gYys9XCJcXG5cIitkYShcIlx0XCIsYi0xKSthLm91dGVySFRNTC5zdWJzdHJpbmcoYS5vdXRlckhUTUwubGFzdEluZGV4T2YoXCI8XCIpKX07RC4kZm9ybWF0dGVycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrYStcIjwvZGl2PlwiKVswXS5jaGlsZE5vZGVzO2lmKGIubGVuZ3RoPjApe2E9XCJcIjtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLm91dGVySFRNTCYmKGEubGVuZ3RoPjAmJihhKz1cIlxcblwiKSxhKz1cInVsXCI9PT1iW2NdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl8fFwib2xcIj09PWJbY10ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT9cIlwiK2VhKGJbY10sMCk6XCJcIitiW2NdLm91dGVySFRNTCl9cmV0dXJuIGF9KX12YXIgZmEsZ2E9ZnVuY3Rpb24oYSl7cmV0dXJuIGwuJGVtaXQoXCJ0YS1lbGVtZW50LXNlbGVjdFwiLHRoaXMpLGEucHJldmVudERlZmF1bHQoKSwhMX0saGE9ZnVuY3Rpb24oYSxjKXtpZihjJiZhbmd1bGFyLmV4dGVuZChhLGMpLCFwJiYhSCl7cD0hMDt2YXIgZDtkPWEub3JpZ2luYWxFdmVudD9hLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyOmEuZGF0YVRyYW5zZmVyLGwuJGVtaXQoXCJ0YS1kcm9wLWV2ZW50XCIsdGhpcyxhLGQpLGIoZnVuY3Rpb24oKXtwPSExLFoodm9pZCAwLHZvaWQgMCwhMCl9LDEwMCl9fSxpYT1sW1wicmVBcHBseU9uU2VsZWN0b3JIYW5kbGVyc1wiKyh3LmlkfHxcIlwiKV09ZnVuY3Rpb24oKXtIfHxhbmd1bGFyLmZvckVhY2gobixmdW5jdGlvbihhKXt2LmZpbmQoYSkub2ZmKFwiY2xpY2tcIixnYSkub24oXCJjbGlja1wiLGdhKX0pfSxqYT1mdW5jdGlvbihhKXt2WzBdLmlubmVySFRNTD1hfSxrYT0hMTtELiRyZW5kZXI9ZnVuY3Rpb24oKXtpZigha2Epe2thPSEwO3ZhciBhPUQuJHZpZXdWYWx1ZXx8XCJcIjtKfHwoRiYmSSYmKHYucmVtb3ZlQ2xhc3MoXCJwbGFjZWhvbGRlci10ZXh0XCIpLGZhJiZiLmNhbmNlbChmYSksZmE9YihmdW5jdGlvbigpe0l8fCh2WzBdLmZvY3VzKCksbS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQodi5jaGlsZHJlbigpW3YuY2hpbGRyZW4oKS5sZW5ndGgtMV0pKSxmYT12b2lkIDB9LDEpKSxGPyhqYSh3LnBsYWNlaG9sZGVyP1wiXCI9PT1hP0I6YTpcIlwiPT09YT9COmEpLEg/di5vZmYoXCJkcm9wXCIsaGEpOihpYSgpLHYub24oXCJkcm9wXCIsaGEpKSk6XCJ0ZXh0YXJlYVwiIT09dlswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJlwiaW5wdXRcIiE9PXZbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP2phKG8oYSkpOnYudmFsKGEpKSxGJiZ3LnBsYWNlaG9sZGVyJiYoXCJcIj09PWE/ST92LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKTp2LmFkZENsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKTp2LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKSksa2E9Sj0hMX19LHcudGFSZWFkb25seSYmKEg9bC4kZXZhbCh3LnRhUmVhZG9ubHkpLEg/KHYuYWRkQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSwoXCJ0ZXh0YXJlYVwiPT09dlswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXZbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKSYmdi5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHZvaWQgMCE9PXYuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdi5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZ2LnJlbW92ZUF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikpOih2LnJlbW92ZUNsYXNzKFwidGEtcmVhZG9ubHlcIiksXCJ0ZXh0YXJlYVwiPT09dlswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXZbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP3YucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpOkYmJnYuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLFwidHJ1ZVwiKSksbC4kd2F0Y2gody50YVJlYWRvbmx5LGZ1bmN0aW9uKGEsYil7YiE9PWEmJihhPyh2LmFkZENsYXNzKFwidGEtcmVhZG9ubHlcIiksKFwidGV4dGFyZWFcIj09PXZbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT12WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkmJnYuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKSx2b2lkIDAhPT12LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikmJnYuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdi5yZW1vdmVBdHRyKFwiY29udGVudGVkaXRhYmxlXCIpLGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKGEpe3YuZmluZChhKS5vbihcImNsaWNrXCIsZ2EpfSksdi5vZmYoXCJkcm9wXCIsaGEpKToodi5yZW1vdmVDbGFzcyhcInRhLXJlYWRvbmx5XCIpLFwidGV4dGFyZWFcIj09PXZbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT12WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT92LnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTpGJiZ2LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIixcInRydWVcIiksXG5hbmd1bGFyLmZvckVhY2gobixmdW5jdGlvbihhKXt2LmZpbmQoYSkub2ZmKFwiY2xpY2tcIixnYSl9KSx2Lm9uKFwiZHJvcFwiLGhhKSksSD1hKX0pKSxGJiYhSCYmKGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKGEpe3YuZmluZChhKS5vbihcImNsaWNrXCIsZ2EpfSksdi5vbihcImRyb3BcIixoYSksdi5vbihcImJsdXJcIixmdW5jdGlvbigpe2Mud2Via2l0JiYoZD0hMCl9KSl9fX1dKTt2YXIgcD0hMSxxPWFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXJcIixbXCJuZ1Nhbml0aXplXCIsXCJ0ZXh0QW5ndWxhclNldHVwXCIsXCJ0ZXh0QW5ndWxhci5mYWN0b3JpZXNcIixcInRleHRBbmd1bGFyLkRPTVwiLFwidGV4dEFuZ3VsYXIudmFsaWRhdG9yc1wiLFwidGV4dEFuZ3VsYXIudGFCaW5kXCJdKSxyPXt9O3EuY29uc3RhbnQoXCJ0YVJlZ2lzdGVyVG9vbFwiLGIpLHEudmFsdWUoXCJ0YVRvb2xzXCIscikscS5jb25maWcoW2Z1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKHIsZnVuY3Rpb24oYSxiKXtkZWxldGUgcltiXX0pfV0pLHEucnVuKFtmdW5jdGlvbigpe2lmKCF3aW5kb3cucmFuZ3kpdGhyb3dcInJhbmd5LWNvcmUuanMgYW5kIHJhbmd5LXNlbGVjdGlvbnNhdmVyZXN0b3JlLmpzIGFyZSByZXF1aXJlZCBmb3IgdGV4dEFuZ3VsYXIgdG8gd29yayBjb3JyZWN0bHksIHJhbmd5LWNvcmUgaXMgbm90IHlldCBsb2FkZWQuXCI7aWYod2luZG93LnJhbmd5LmluaXQoKSwhd2luZG93LnJhbmd5LnNhdmVTZWxlY3Rpb24pdGhyb3dcInJhbmd5LXNlbGVjdGlvbnNhdmVyZXN0b3JlLmpzIGlzIHJlcXVpcmVkIGZvciB0ZXh0QW5ndWxhciB0byB3b3JrIGNvcnJlY3RseS5cIn1dKSxxLmRpcmVjdGl2ZShcInRleHRBbmd1bGFyXCIsW1wiJGNvbXBpbGVcIixcIiR0aW1lb3V0XCIsXCJ0YU9wdGlvbnNcIixcInRhU2VsZWN0aW9uXCIsXCJ0YUV4ZWNDb21tYW5kXCIsXCJ0ZXh0QW5ndWxhck1hbmFnZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwiJGFuaW1hdGVcIixcIiRsb2dcIixcIiRxXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLHNjb3BlOnt9LHJlc3RyaWN0OlwiRUFcIixwcmlvcml0eToyLGxpbms6ZnVuY3Rpb24obSxuLG8scCl7dmFyIHEscixzLHQsdSx2LHcseCx5LHosQSxCPW8uc2VyaWFsP28uc2VyaWFsOk1hdGguZmxvb3IoMWUxNipNYXRoLnJhbmRvbSgpKTttLl9uYW1lPW8ubmFtZT9vLm5hbWU6XCJ0ZXh0QW5ndWxhckVkaXRvclwiK0I7dmFyIEM9ZnVuY3Rpb24oYSxjLGQpe2IoZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbigpe2Eub2ZmKGMsYiksZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Eub24oYyxiKX0sMTAwKX07aWYoeT1lKG8udGFEZWZhdWx0V3JhcCksYW5ndWxhci5leHRlbmQobSxhbmd1bGFyLmNvcHkoYykse3dyYXBTZWxlY3Rpb246ZnVuY3Rpb24oYSxiLGMpe1widW5kb1wiPT09YS50b0xvd2VyQ2FzZSgpP21bXCIkdW5kb1RhQmluZHRhVGV4dEVsZW1lbnRcIitCXSgpOlwicmVkb1wiPT09YS50b0xvd2VyQ2FzZSgpP21bXCIkcmVkb1RhQmluZHRhVGV4dEVsZW1lbnRcIitCXSgpOih5KGEsITEsYixtLmRlZmF1bHRUYWdBdHRyaWJ1dGVzKSxjJiZtW1wicmVBcHBseU9uU2VsZWN0b3JIYW5kbGVyc3RhVGV4dEVsZW1lbnRcIitCXSgpLG0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKSl9LHNob3dIdG1sOm0uJGV2YWwoby50YVNob3dIdG1sKXx8ITF9KSxvLnRhRm9jdXNzZWRDbGFzcyYmKG0uY2xhc3Nlcy5mb2N1c3NlZD1vLnRhRm9jdXNzZWRDbGFzcyksby50YVRleHRFZGl0b3JDbGFzcyYmKG0uY2xhc3Nlcy50ZXh0RWRpdG9yPW8udGFUZXh0RWRpdG9yQ2xhc3MpLG8udGFIdG1sRWRpdG9yQ2xhc3MmJihtLmNsYXNzZXMuaHRtbEVkaXRvcj1vLnRhSHRtbEVkaXRvckNsYXNzKSxvLnRhRGVmYXVsdFRhZ0F0dHJpYnV0ZXMpdHJ5e2FuZ3VsYXIuZXh0ZW5kKG0uZGVmYXVsdFRhZ0F0dHJpYnV0ZXMsYW5ndWxhci5mcm9tSnNvbihvLnRhRGVmYXVsdFRhZ0F0dHJpYnV0ZXMpKX1jYXRjaChEKXtqLmVycm9yKEQpfW8udGFUZXh0RWRpdG9yU2V0dXAmJihtLnNldHVwLnRleHRFZGl0b3JTZXR1cD1tLiRwYXJlbnQuJGV2YWwoby50YVRleHRFZGl0b3JTZXR1cCkpLG8udGFIdG1sRWRpdG9yU2V0dXAmJihtLnNldHVwLmh0bWxFZGl0b3JTZXR1cD1tLiRwYXJlbnQuJGV2YWwoby50YUh0bWxFZGl0b3JTZXR1cCkpLG8udGFGaWxlRHJvcD9tLmZpbGVEcm9wSGFuZGxlcj1tLiRwYXJlbnQuJGV2YWwoby50YUZpbGVEcm9wKTptLmZpbGVEcm9wSGFuZGxlcj1tLmRlZmF1bHRGaWxlRHJvcEhhbmRsZXIsdz1uWzBdLmlubmVySFRNTCxuWzBdLmlubmVySFRNTD1cIlwiLG0uZGlzcGxheUVsZW1lbnRzPXtmb3JtaW5wdXQ6YW5ndWxhci5lbGVtZW50KFwiPGlucHV0IHR5cGU9J2hpZGRlbicgdGFiaW5kZXg9Jy0xJyBzdHlsZT0nZGlzcGxheTogbm9uZTsnPlwiKSxodG1sOmFuZ3VsYXIuZWxlbWVudChcIjx0ZXh0YXJlYT48L3RleHRhcmVhPlwiKSx0ZXh0OmFuZ3VsYXIuZWxlbWVudChcIjxkaXY+PC9kaXY+XCIpLHNjcm9sbFdpbmRvdzphbmd1bGFyLmVsZW1lbnQoXCI8ZGl2IGNsYXNzPSd0YS1zY3JvbGwtd2luZG93Jz48L2Rpdj5cIikscG9wb3Zlcjphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJwb3BvdmVyIGZhZGUgYm90dG9tXCIgc3R5bGU9XCJtYXgtd2lkdGg6IG5vbmU7IHdpZHRoOiAzMDVweDtcIj48L2Rpdj4nKSxwb3BvdmVyQXJyb3c6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj4nKSxwb3BvdmVyQ29udGFpbmVyOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PicpLHJlc2l6ZTp7b3ZlcmxheTphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1vdmVybGF5XCI+PC9kaXY+JyksYmFja2dyb3VuZDphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1iYWNrZ3JvdW5kXCI+PC9kaXY+JyksYW5jaG9yczpbYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtY29ybmVyIHRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci10bFwiPjwvZGl2PicpLGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lciB0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXItdHJcIj48L2Rpdj4nKSxhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLWJsXCI+PC9kaXY+JyksYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtY29ybmVyIHRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci1iclwiPjwvZGl2PicpXSxpbmZvOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWluZm9cIj48L2Rpdj4nKX19LG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuYXBwZW5kKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJBcnJvdyksbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckNvbnRhaW5lciksbS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyKSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmYW5ndWxhci5leHRlbmQoYSxiKSxhLnByZXZlbnREZWZhdWx0KCksITF9KSxtLnNob3dQb3BvdmVyPWZ1bmN0aW9uKGEpe20uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIiksbS5yZWZsb3dQb3BvdmVyKGEpLGkuYWRkQ2xhc3MobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlcixcImluXCIpLEMoaC5maW5kKFwiYm9keVwiKSxcImNsaWNrIGtleXVwXCIsZnVuY3Rpb24oKXttLmhpZGVQb3BvdmVyKCl9KX0sbS5yZWZsb3dQb3BvdmVyPWZ1bmN0aW9uKGEpe20uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0ub2Zmc2V0SGVpZ2h0LTUxPmFbMF0ub2Zmc2V0VG9wPyhtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcInRvcFwiLGFbMF0ub2Zmc2V0VG9wK2FbMF0ub2Zmc2V0SGVpZ2h0K20uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvd1swXS5zY3JvbGxUb3ArXCJweFwiKSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLnJlbW92ZUNsYXNzKFwidG9wXCIpLmFkZENsYXNzKFwiYm90dG9tXCIpKToobS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJ0b3BcIixhWzBdLm9mZnNldFRvcC01NCttLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3dbMF0uc2Nyb2xsVG9wK1wicHhcIiksbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5yZW1vdmVDbGFzcyhcImJvdHRvbVwiKS5hZGRDbGFzcyhcInRvcFwiKSk7dmFyIGI9bS5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5vZmZzZXRXaWR0aC1tLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyWzBdLm9mZnNldFdpZHRoLGM9YVswXS5vZmZzZXRMZWZ0K2FbMF0ub2Zmc2V0V2lkdGgvMi1tLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyWzBdLm9mZnNldFdpZHRoLzI7bS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJsZWZ0XCIsTWF0aC5tYXgoMCxNYXRoLm1pbihiLGMpKStcInB4XCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJBcnJvdy5jc3MoXCJtYXJnaW4tbGVmdFwiLE1hdGgubWluKGMsTWF0aC5tYXgoMCxjLWIpKS0xMStcInB4XCIpfSxtLmhpZGVQb3BvdmVyPWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXttLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcImRpc3BsYXlcIixcIlwiKSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyLmF0dHIoXCJzdHlsZVwiLFwiXCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXIuYXR0cihcImNsYXNzXCIsXCJwb3BvdmVyLWNvbnRlbnRcIil9O2sud2hlbihpLnJlbW92ZUNsYXNzKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIsXCJpblwiLGEpKS50aGVuKGEpfSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmJhY2tncm91bmQpLGFuZ3VsYXIuZm9yRWFjaChtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuYW5jaG9ycyxmdW5jdGlvbihhKXttLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQoYSl9KSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmluZm8pLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkpLG0ucmVmbG93UmVzaXplT3ZlcmxheT1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKVswXSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLGxlZnQ6YS5vZmZzZXRMZWZ0LTUrXCJweFwiLHRvcDphLm9mZnNldFRvcC01K1wicHhcIix3aWR0aDphLm9mZnNldFdpZHRoKzEwK1wicHhcIixoZWlnaHQ6YS5vZmZzZXRIZWlnaHQrMTArXCJweFwifSksbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmluZm8udGV4dChhLm9mZnNldFdpZHRoK1wiIHggXCIrYS5vZmZzZXRIZWlnaHQpfSxtLnNob3dSZXNpemVPdmVybGF5PWZ1bmN0aW9uKGEpe3ZhciBiPWguZmluZChcImJvZHlcIik7ej1mdW5jdGlvbihjKXt2YXIgZD17d2lkdGg6cGFyc2VJbnQoYS5hdHRyKFwid2lkdGhcIikpLGhlaWdodDpwYXJzZUludChhLmF0dHIoXCJoZWlnaHRcIikpLHg6Yy5jbGllbnRYLHk6Yy5jbGllbnRZfTsodm9pZCAwPT09ZC53aWR0aHx8aXNOYU4oZC53aWR0aCkpJiYoZC53aWR0aD1hWzBdLm9mZnNldFdpZHRoKSwodm9pZCAwPT09ZC5oZWlnaHR8fGlzTmFOKGQuaGVpZ2h0KSkmJihkLmhlaWdodD1hWzBdLm9mZnNldEhlaWdodCksbS5oaWRlUG9wb3ZlcigpO3ZhciBlPWQuaGVpZ2h0L2Qud2lkdGgsZj1mdW5jdGlvbihiKXt2YXIgYz17eDpNYXRoLm1heCgwLGQud2lkdGgrKGIuY2xpZW50WC1kLngpKSx5Ok1hdGgubWF4KDAsZC5oZWlnaHQrKGIuY2xpZW50WS1kLnkpKX0sZj12b2lkIDAhPT1vLnRhUmVzaXplRm9yY2VBc3BlY3RSYXRpbyxnPW8udGFSZXNpemVNYWludGFpbkFzcGVjdFJhdGlvLGg9Znx8ZyYmIWIuc2hpZnRLZXk7aWYoaCl7dmFyIGk9Yy55L2MueDtjLng9ZT5pP2MueDpjLnkvZSxjLnk9ZT5pP2MueCplOmMueX12YXIgaj1hbmd1bGFyLmVsZW1lbnQoYSk7ai5jc3MoXCJoZWlnaHRcIixNYXRoLnJvdW5kKE1hdGgubWF4KDAsYy55KStcInB4XCIpKSxqLmNzcyhcIndpZHRoXCIsTWF0aC5yb3VuZChNYXRoLm1heCgwLGMueCkrXCJweFwiKSksbS5yZWZsb3dSZXNpemVPdmVybGF5KGEpfTtiLm9uKFwibW91c2Vtb3ZlXCIsZiksQyhiLFwibW91c2V1cFwiLGZ1bmN0aW9uKGMpe2MucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLGIub2ZmKFwibW91c2Vtb3ZlXCIsZiksbS5zaG93UG9wb3ZlcihhKX0pLGMuc3RvcFByb3BhZ2F0aW9uKCksYy5wcmV2ZW50RGVmYXVsdCgpfSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuYW5jaG9yc1szXS5vZmYoXCJtb3VzZWRvd25cIiksbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnNbM10ub24oXCJtb3VzZWRvd25cIix6KSxtLnJlZmxvd1Jlc2l6ZU92ZXJsYXkoYSksQyhiLFwiY2xpY2tcIixmdW5jdGlvbigpe20uaGlkZVJlc2l6ZU92ZXJsYXkoKX0pfSxtLmhpZGVSZXNpemVPdmVybGF5PWZ1bmN0aW9uKCl7bS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnNbM10ub2ZmKFwibW91c2Vkb3duXCIseiksbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxtLnNldHVwLmh0bWxFZGl0b3JTZXR1cChtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxtLnNldHVwLnRleHRFZGl0b3JTZXR1cChtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoe2lkOlwidGFIdG1sRWxlbWVudFwiK0IsXCJuZy1zaG93XCI6XCJzaG93SHRtbFwiLFwidGEtYmluZFwiOlwidGEtYmluZFwiLFwibmctbW9kZWxcIjpcImh0bWxcIixcIm5nLW1vZGVsLW9wdGlvbnNcIjpuLmF0dHIoXCJuZy1tb2RlbC1vcHRpb25zXCIpfSksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKHtpZDpcInRhVGV4dEVsZW1lbnRcIitCLGNvbnRlbnRFZGl0YWJsZTpcInRydWVcIixcInRhLWJpbmRcIjpcInRhLWJpbmRcIixcIm5nLW1vZGVsXCI6XCJodG1sXCIsXCJuZy1tb2RlbC1vcHRpb25zXCI6bi5hdHRyKFwibmctbW9kZWwtb3B0aW9uc1wiKX0pLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hdHRyKHtcIm5nLWhpZGVcIjpcInNob3dIdG1sXCJ9KSxvLnRhRGVmYXVsdFdyYXAmJm0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLWRlZmF1bHQtd3JhcFwiLG8udGFEZWZhdWx0V3JhcCksby50YVVuc2FmZVNhbml0aXplciYmKG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLXVuc2FmZS1zYW5pdGl6ZXJcIixvLnRhVW5zYWZlU2FuaXRpemVyKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoXCJ0YS11bnNhZmUtc2FuaXRpemVyXCIsby50YVVuc2FmZVNhbml0aXplcikpLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMudGV4dCksbi5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93KSxuLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQuYXR0cihcIm5hbWVcIixtLl9uYW1lKSxuLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQpLG8udGFiaW5kZXgmJihuLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJ0YWJpbmRleFwiLG8udGFiaW5kZXgpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhYmluZGV4XCIsby50YWJpbmRleCkpLG8ucGxhY2Vob2xkZXImJihtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJwbGFjZWhvbGRlclwiLG8ucGxhY2Vob2xkZXIpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInBsYWNlaG9sZGVyXCIsby5wbGFjZWhvbGRlcikpLG8udGFEaXNhYmxlZCYmKG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLXJlYWRvbmx5XCIsXCJkaXNhYmxlZFwiKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoXCJ0YS1yZWFkb25seVwiLFwiZGlzYWJsZWRcIiksbS5kaXNhYmxlZD1tLiRwYXJlbnQuJGV2YWwoby50YURpc2FibGVkKSxtLiRwYXJlbnQuJHdhdGNoKG8udGFEaXNhYmxlZCxmdW5jdGlvbihhKXttLmRpc2FibGVkPWEsbS5kaXNhYmxlZD9uLmFkZENsYXNzKG0uY2xhc3Nlcy5kaXNhYmxlZCk6bi5yZW1vdmVDbGFzcyhtLmNsYXNzZXMuZGlzYWJsZWQpfSkpLG8udGFQYXN0ZSYmKG0uX3Bhc3RlSGFuZGxlcj1mdW5jdGlvbihhKXtyZXR1cm4gbChvLnRhUGFzdGUpKG0uJHBhcmVudCx7JGh0bWw6YX0pfSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJ0YS1wYXN0ZVwiLFwiX3Bhc3RlSGFuZGxlcigkaHRtbClcIikpLGEobS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93KShtKSxhKG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpKG0pLG0udXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudD1tW1widXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudFwiK0JdLG0udXBkYXRlVGFCaW5kdGFIdG1sRWxlbWVudD1tW1widXBkYXRlVGFCaW5kdGFIdG1sRWxlbWVudFwiK0JdLG4uYWRkQ2xhc3MoXCJ0YS1yb290XCIpLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hZGRDbGFzcyhcInRhLXRleHQgdGEtZWRpdG9yIFwiK20uY2xhc3Nlcy50ZXh0RWRpdG9yKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmFkZENsYXNzKFwidGEtaHRtbCB0YS1lZGl0b3IgXCIrbS5jbGFzc2VzLmh0bWxFZGl0b3IpLG0uX2FjdGlvblJ1bm5pbmc9ITE7dmFyIEU9ITE7aWYobS5zdGFydEFjdGlvbj1mdW5jdGlvbigpe3JldHVybiBtLl9hY3Rpb25SdW5uaW5nPSEwLEU9Zy5yYW5neS5zYXZlU2VsZWN0aW9uKCksZnVuY3Rpb24oKXtFJiZnLnJhbmd5LnJlc3RvcmVTZWxlY3Rpb24oRSl9fSxtLmVuZEFjdGlvbj1mdW5jdGlvbigpe20uX2FjdGlvblJ1bm5pbmc9ITEsRSYmKG0uc2hvd0h0bWw/bS5kaXNwbGF5RWxlbWVudHMuaHRtbFswXS5mb2N1cygpOm0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKSxnLnJhbmd5LnJlbW92ZU1hcmtlcnMoRSkpLEU9ITEsbS51cGRhdGVTZWxlY3RlZFN0eWxlcygpLG0uc2hvd0h0bWx8fG1bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQl0oKX0sdT1mdW5jdGlvbigpe20uZm9jdXNzZWQ9ITAsbi5hZGRDbGFzcyhtLmNsYXNzZXMuZm9jdXNzZWQpLHguZm9jdXMoKSxuLnRyaWdnZXJIYW5kbGVyKFwiZm9jdXNcIil9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJmb2N1c1wiLHUpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJmb2N1c1wiLHUpLHY9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uX2FjdGlvblJ1bm5pbmd8fGhbMF0uYWN0aXZlRWxlbWVudD09PW0uZGlzcGxheUVsZW1lbnRzLmh0bWxbMF18fGhbMF0uYWN0aXZlRWxlbWVudD09PW0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF18fChuLnJlbW92ZUNsYXNzKG0uY2xhc3Nlcy5mb2N1c3NlZCkseC51bmZvY3VzKCksYihmdW5jdGlvbigpe20uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMSxuLnRyaWdnZXJIYW5kbGVyKFwiYmx1clwiKSxtLmZvY3Vzc2VkPSExfSwwKSksYS5wcmV2ZW50RGVmYXVsdCgpLCExfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwiYmx1clwiLHYpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJibHVyXCIsdiksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7bi50cmlnZ2VySGFuZGxlcihcInBhc3RlXCIsYSl9KSxtLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZT1mdW5jdGlvbihhKXtyZXR1cm4hbS5zaG93SHRtbCYmYS50b0xvd2VyQ2FzZSgpPT09aFswXS5xdWVyeUNvbW1hbmRWYWx1ZShcImZvcm1hdEJsb2NrXCIpLnRvTG93ZXJDYXNlKCl9LG0ucXVlcnlDb21tYW5kU3RhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uc2hvd0h0bWw/XCJcIjpoWzBdLnF1ZXJ5Q29tbWFuZFN0YXRlKGEpfSxtLnN3aXRjaFZpZXc9ZnVuY3Rpb24oKXttLnNob3dIdG1sPSFtLnNob3dIdG1sLGkuZW5hYmxlZCghMSxtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxpLmVuYWJsZWQoITEsbS5kaXNwbGF5RWxlbWVudHMudGV4dCksbS5zaG93SHRtbD9iKGZ1bmN0aW9uKCl7cmV0dXJuIGkuZW5hYmxlZCghMCxtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxpLmVuYWJsZWQoITAsbS5kaXNwbGF5RWxlbWVudHMudGV4dCksbS5kaXNwbGF5RWxlbWVudHMuaHRtbFswXS5mb2N1cygpfSwxMDApOmIoZnVuY3Rpb24oKXtyZXR1cm4gaS5lbmFibGVkKCEwLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpLGkuZW5hYmxlZCghMCxtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLmZvY3VzKCl9LDEwMCl9LG8ubmdNb2RlbCl7dmFyIEY9ITA7cC4kcmVuZGVyPWZ1bmN0aW9uKCl7aWYoRil7Rj0hMTt2YXIgYT1tLiRwYXJlbnQuJGV2YWwoby5uZ01vZGVsKTt2b2lkIDAhPT1hJiZudWxsIT09YXx8IXd8fFwiXCI9PT13fHxwLiRzZXRWaWV3VmFsdWUodyl9bS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbChwLiR2aWV3VmFsdWUpLG0uaHRtbD1wLiR2aWV3VmFsdWV8fFwiXCJ9LG4uYXR0cihcInJlcXVpcmVkXCIpJiYocC4kdmFsaWRhdG9ycy5yZXF1aXJlZD1mdW5jdGlvbihhLGIpe3ZhciBjPWF8fGI7cmV0dXJuISghY3x8XCJcIj09PWMudHJpbSgpKX0pfWVsc2UgbS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbCh3KSxtLmh0bWw9dztpZihtLiR3YXRjaChcImh0bWxcIixmdW5jdGlvbihhLGIpe2EhPT1iJiYoby5uZ01vZGVsJiZwLiR2aWV3VmFsdWUhPT1hJiZwLiRzZXRWaWV3VmFsdWUoYSksbS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbChhKSl9KSxvLnRhVGFyZ2V0VG9vbGJhcnMpeD1mLnJlZ2lzdGVyRWRpdG9yKG0uX25hbWUsbSxvLnRhVGFyZ2V0VG9vbGJhcnMuc3BsaXQoXCIsXCIpKTtlbHNle3ZhciBHPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiB0ZXh0LWFuZ3VsYXItdG9vbGJhciBuYW1lPVwidGV4dEFuZ3VsYXJUb29sYmFyJytCKydcIj4nKTtvLnRhVG9vbGJhciYmRy5hdHRyKFwidGEtdG9vbGJhclwiLG8udGFUb29sYmFyKSxvLnRhVG9vbGJhckNsYXNzJiZHLmF0dHIoXCJ0YS10b29sYmFyLWNsYXNzXCIsby50YVRvb2xiYXJDbGFzcyksby50YVRvb2xiYXJHcm91cENsYXNzJiZHLmF0dHIoXCJ0YS10b29sYmFyLWdyb3VwLWNsYXNzXCIsby50YVRvb2xiYXJHcm91cENsYXNzKSxvLnRhVG9vbGJhckJ1dHRvbkNsYXNzJiZHLmF0dHIoXCJ0YS10b29sYmFyLWJ1dHRvbi1jbGFzc1wiLG8udGFUb29sYmFyQnV0dG9uQ2xhc3MpLG8udGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MmJkcuYXR0cihcInRhLXRvb2xiYXItYWN0aXZlLWJ1dHRvbi1jbGFzc1wiLG8udGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MpLG8udGFGb2N1c3NlZENsYXNzJiZHLmF0dHIoXCJ0YS1mb2N1c3NlZC1jbGFzc1wiLG8udGFGb2N1c3NlZENsYXNzKSxuLnByZXBlbmQoRyksYShHKShtLiRwYXJlbnQpLHg9Zi5yZWdpc3RlckVkaXRvcihtLl9uYW1lLG0sW1widGV4dEFuZ3VsYXJUb29sYmFyXCIrQl0pfW0uJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2YudW5yZWdpc3RlckVkaXRvcihtLl9uYW1lKX0pLG0uJG9uKFwidGEtZWxlbWVudC1zZWxlY3RcIixmdW5jdGlvbihhLGIpe3gudHJpZ2dlckVsZW1lbnRTZWxlY3QoYSxiKSYmbVtcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnN0YVRleHRFbGVtZW50XCIrQl0oKX0pLG0uJG9uKFwidGEtZHJvcC1ldmVudFwiLGZ1bmN0aW9uKGEsYyxkLGUpe20uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKSxlJiZlLmZpbGVzJiZlLmZpbGVzLmxlbmd0aD4wPyhhbmd1bGFyLmZvckVhY2goZS5maWxlcyxmdW5jdGlvbihhKXt0cnl7ay53aGVuKG0uZmlsZURyb3BIYW5kbGVyKGEsbS53cmFwU2VsZWN0aW9uKXx8bS5maWxlRHJvcEhhbmRsZXIhPT1tLmRlZmF1bHRGaWxlRHJvcEhhbmRsZXImJmsud2hlbihtLmRlZmF1bHRGaWxlRHJvcEhhbmRsZXIoYSxtLndyYXBTZWxlY3Rpb24pKSkudGhlbihmdW5jdGlvbigpe21bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQl0oKX0pfWNhdGNoKGIpe2ouZXJyb3IoYil9fSksZC5wcmV2ZW50RGVmYXVsdCgpLGQuc3RvcFByb3BhZ2F0aW9uKCkpOmIoZnVuY3Rpb24oKXttW1widXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudFwiK0JdKCl9LDApfSksbS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7bS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLG0uZm9jdXNzZWQ9ITF9KSxtLnVwZGF0ZVNlbGVjdGVkU3R5bGVzPWZ1bmN0aW9uKCl7dmFyIGE7QSYmYi5jYW5jZWwoQSksdm9pZCAwIT09KGE9ZC5nZXRTZWxlY3Rpb25FbGVtZW50KCkpJiZhLnBhcmVudE5vZGUhPT1tLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdP3gudXBkYXRlU2VsZWN0ZWRTdHlsZXMoYW5ndWxhci5lbGVtZW50KGEpKTp4LnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksbS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzJiYoQT1iKG0udXBkYXRlU2VsZWN0ZWRTdHlsZXMsMjAwKSl9LHE9ZnVuY3Rpb24oKXtyZXR1cm4gbS5mb2N1c3NlZD92b2lkKG0uX2JVcGRhdGVTZWxlY3RlZFN0eWxlc3x8KG0uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMCxtLiRhcHBseShmdW5jdGlvbigpe20udXBkYXRlU2VsZWN0ZWRTdHlsZXMoKX0pKSk6dm9pZChtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITEpfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwia2V5ZG93blwiLHEpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJrZXlkb3duXCIscSkscj1mdW5jdGlvbigpe20uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMX0sbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcImtleXVwXCIsciksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcImtleXVwXCIscikscz1mdW5jdGlvbihhLGIpe2ImJmFuZ3VsYXIuZXh0ZW5kKGEsYiksbS4kYXBwbHkoZnVuY3Rpb24oKXtyZXR1cm4geC5zZW5kS2V5Q29tbWFuZChhKT8obS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzfHxtLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksYS5wcmV2ZW50RGVmYXVsdCgpLCExKTp2b2lkIDB9KX0sbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcImtleXByZXNzXCIscyksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcImtleXByZXNzXCIscyksdD1mdW5jdGlvbigpe20uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMSxtLiRhcHBseShmdW5jdGlvbigpe20udXBkYXRlU2VsZWN0ZWRTdHlsZXMoKX0pfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwibW91c2V1cFwiLHQpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJtb3VzZXVwXCIsdCl9fX1dKSxxLnNlcnZpY2UoXCJ0ZXh0QW5ndWxhck1hbmFnZXJcIixbXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsXCJ0YVRvb2xzXCIsXCJ0YVJlZ2lzdGVyVG9vbFwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fSxlPXt9O3JldHVybntyZWdpc3RlckVkaXRvcjpmdW5jdGlvbihjLGYsZyl7aWYoIWN8fFwiXCI9PT1jKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQW4gZWRpdG9yIHJlcXVpcmVzIGEgbmFtZVwiO2lmKCFmKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQW4gZWRpdG9yIHJlcXVpcmVzIGEgc2NvcGVcIjtpZihlW2NdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBBbiBFZGl0b3Igd2l0aCBuYW1lIFwiJytjKydcIiBhbHJlYWR5IGV4aXN0cyc7dmFyIGg9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChnLGZ1bmN0aW9uKGEpe2RbYV0mJmgucHVzaChkW2FdKX0pLGVbY109e3Njb3BlOmYsdG9vbGJhcnM6ZyxfcmVnaXN0ZXJUb29sYmFyOmZ1bmN0aW9uKGEpe3RoaXMudG9vbGJhcnMuaW5kZXhPZihhLm5hbWUpPj0wJiZoLnB1c2goYSl9LGVkaXRvckZ1bmN0aW9uczp7ZGlzYWJsZTpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuZGlzYWJsZWQ9ITB9KX0sZW5hYmxlOmZ1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKGgsZnVuY3Rpb24oYSl7YS5kaXNhYmxlZD0hMX0pfSxmb2N1czpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuX3BhcmVudD1mLGEuZGlzYWJsZWQ9ITEsYS5mb2N1c3NlZD0hMCxmLmZvY3Vzc2VkPSEwfSl9LHVuZm9jdXM6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLmRpc2FibGVkPSEwLGEuZm9jdXNzZWQ9ITF9KSxmLmZvY3Vzc2VkPSExfSx1cGRhdGVTZWxlY3RlZFN0eWxlczpmdW5jdGlvbihhKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihiKXthbmd1bGFyLmZvckVhY2goYi50b29scyxmdW5jdGlvbihjKXtjLmFjdGl2ZVN0YXRlJiYoYi5fcGFyZW50PWYsYy5hY3RpdmU9Yy5hY3RpdmVTdGF0ZShhKSl9KX0pfSxzZW5kS2V5Q29tbWFuZDpmdW5jdGlvbihjKXt2YXIgZD0hMTtyZXR1cm4oYy5jdHJsS2V5fHxjLm1ldGFLZXl8fGMuc3BlY2lhbEtleSkmJmFuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIsZSl7aWYoYi5jb21tYW5kS2V5Q29kZSYmKGIuY29tbWFuZEtleUNvZGU9PT1jLndoaWNofHxiLmNvbW1hbmRLZXlDb2RlPT09Yy5zcGVjaWFsS2V5KSlmb3IodmFyIGc9MDtnPGgubGVuZ3RoO2crKylpZih2b2lkIDAhPT1oW2ddLnRvb2xzW2VdKXthLmNhbGwoaFtnXS50b29sc1tlXSxmKSxkPSEwO2JyZWFrfX0pLGR9LHRyaWdnZXJFbGVtZW50U2VsZWN0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9ITAsZD0wO2Q8Yi5sZW5ndGg7ZCsrKWM9YyYmYS5hdHRyKGJbZF0pO3JldHVybiBjfSxlPVtdLGc9e30saT0hMTtjPWFuZ3VsYXIuZWxlbWVudChjKTt2YXIgaj0hMTtpZihhbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihhLGIpe2Eub25FbGVtZW50U2VsZWN0JiZhLm9uRWxlbWVudFNlbGVjdC5lbGVtZW50JiZhLm9uRWxlbWVudFNlbGVjdC5lbGVtZW50LnRvTG93ZXJDYXNlKCk9PT1jWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKCFhLm9uRWxlbWVudFNlbGVjdC5maWx0ZXJ8fGEub25FbGVtZW50U2VsZWN0LmZpbHRlcihjKSkmJihqPWp8fGFuZ3VsYXIuaXNBcnJheShhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzKSYmZChjLGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpLCghYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRyc3x8ZChjLGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpKSYmKGdbYl09YSkpfSksaj8oYW5ndWxhci5mb3JFYWNoKGcsZnVuY3Rpb24oYSxiKXthLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzJiZkKGMsYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycykmJmUucHVzaCh7bmFtZTpiLHRvb2w6YX0pfSksZS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9vbC5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycy5sZW5ndGgtYS50b29sLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzLmxlbmd0aH0pKTphbmd1bGFyLmZvckVhY2goZyxmdW5jdGlvbihhLGIpe2UucHVzaCh7bmFtZTpiLHRvb2w6YX0pfSksZS5sZW5ndGg+MClmb3IodmFyIGs9MDtrPGUubGVuZ3RoO2srKyl7Zm9yKHZhciBsPWVba10udG9vbCxtPWVba10ubmFtZSxuPTA7bjxoLmxlbmd0aDtuKyspaWYodm9pZCAwIT09aFtuXS50b29sc1ttXSl7bC5vbkVsZW1lbnRTZWxlY3QuYWN0aW9uLmNhbGwoaFtuXS50b29sc1ttXSxhLGMsZiksaT0hMDticmVha31pZihpKWJyZWFrfXJldHVybiBpfX19LGVbY10uZWRpdG9yRnVuY3Rpb25zfSxyZXRyaWV2ZUVkaXRvcjpmdW5jdGlvbihhKXtyZXR1cm4gZVthXX0sdW5yZWdpc3RlckVkaXRvcjpmdW5jdGlvbihhKXtkZWxldGUgZVthXX0scmVnaXN0ZXJUb29sYmFyOmZ1bmN0aW9uKGEpe2lmKCFhKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHJlcXVpcmVzIGEgc2NvcGVcIjtpZighYS5uYW1lfHxcIlwiPT09YS5uYW1lKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHJlcXVpcmVzIGEgbmFtZVwiO2lmKGRbYS5uYW1lXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHdpdGggbmFtZSBcIicrYS5uYW1lKydcIiBhbHJlYWR5IGV4aXN0cyc7ZFthLm5hbWVdPWEsYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oYil7Yi5fcmVnaXN0ZXJUb29sYmFyKGEpfSl9LHJldHJpZXZlVG9vbGJhcjpmdW5jdGlvbihhKXtyZXR1cm4gZFthXX0scmV0cmlldmVUb29sYmFyc1ZpYUVkaXRvcjpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPXRoaXM7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLnJldHJpZXZlRWRpdG9yKGEpLnRvb2xiYXJzLGZ1bmN0aW9uKGEpe2IucHVzaChjLnJldHJpZXZlVG9vbGJhcihhKSl9KSxifSx1bnJlZ2lzdGVyVG9vbGJhcjpmdW5jdGlvbihhKXtkZWxldGUgZFthXX0sdXBkYXRlVG9vbHNEaXNwbGF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxjKXtiLnVwZGF0ZVRvb2xEaXNwbGF5KGMsYSl9KX0scmVzZXRUb29sc0Rpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2FuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIsYyl7YS5yZXNldFRvb2xEaXNwbGF5KGMpfSl9LHVwZGF0ZVRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczthbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihkLGUpe2MudXBkYXRlVG9vbGJhclRvb2xEaXNwbGF5KGUsYSxiKX0pfSxyZXNldFRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYyxkKXtiLnJlc2V0VG9vbGJhclRvb2xEaXNwbGF5KGQsYSl9KX0sdXBkYXRlVG9vbGJhclRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEsYixjKXtpZighZFthXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogTm8gVG9vbGJhciB3aXRoIG5hbWUgXCInK2ErJ1wiIGV4aXN0cyc7ZFthXS51cGRhdGVUb29sRGlzcGxheShiLGMpfSxyZXNldFRvb2xiYXJUb29sRGlzcGxheTpmdW5jdGlvbihhLGMpe2lmKCFkW2FdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBObyBUb29sYmFyIHdpdGggbmFtZSBcIicrYSsnXCIgZXhpc3RzJztkW2FdLnVwZGF0ZVRvb2xEaXNwbGF5KGMsYltjXSwhMCl9LHJlbW92ZVRvb2w6ZnVuY3Rpb24oYSl7ZGVsZXRlIGJbYV0sYW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYil7ZGVsZXRlIGIudG9vbHNbYV07Zm9yKHZhciBjPTA7YzxiLnRvb2xiYXIubGVuZ3RoO2MrKyl7Zm9yKHZhciBkLGU9MDtlPGIudG9vbGJhcltjXS5sZW5ndGg7ZSsrKXtpZihiLnRvb2xiYXJbY11bZV09PT1hKXtkPXtncm91cDpjLGluZGV4OmV9O2JyZWFrfWlmKHZvaWQgMCE9PWQpYnJlYWt9dm9pZCAwIT09ZCYmKGIudG9vbGJhcltkLmdyb3VwXS5zbGljZShkLmluZGV4LDEpLGIuXyRlbGVtZW50LmNoaWxkcmVuKCkuZXEoZC5ncm91cCkuY2hpbGRyZW4oKS5lcShkLmluZGV4KS5yZW1vdmUoKSl9fSl9LGFkZFRvb2w6ZnVuY3Rpb24oYSxiLGUsZil7YyhhLGIpLGFuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGMpe2MuYWRkVG9vbChhLGIsZSxmKX0pfSxhZGRUb29sVG9Ub29sYmFyOmZ1bmN0aW9uKGEsYixlLGYsZyl7YyhhLGIpLGRbZV0uYWRkVG9vbChhLGIsZixnKX0scmVmcmVzaEVkaXRvcjpmdW5jdGlvbihhKXtpZighZVthXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogTm8gRWRpdG9yIHdpdGggbmFtZSBcIicrYSsnXCIgZXhpc3RzJztlW2FdLnNjb3BlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxlW2FdLnNjb3BlLiQkcGhhc2V8fGVbYV0uc2NvcGUuJGRpZ2VzdCgpfSxzZW5kS2V5Q29tbWFuZDpmdW5jdGlvbihhLGIpe2FuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGMpe3JldHVybiBjLmVkaXRvckZ1bmN0aW9ucy5zZW5kS2V5Q29tbWFuZChiKT8oYS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzfHxhLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksYi5wcmV2ZW50RGVmYXVsdCgpLCExKTp2b2lkIDB9KX19fV0pLHEuZGlyZWN0aXZlKFwidGV4dEFuZ3VsYXJUb29sYmFyXCIsW1wiJGNvbXBpbGVcIixcInRleHRBbmd1bGFyTWFuYWdlclwiLFwidGFPcHRpb25zXCIsXCJ0YVRvb2xzXCIsXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3JldHVybntzY29wZTp7bmFtZTpcIkBcIn0scmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZyxoLGkpe2lmKCFnLm5hbWV8fFwiXCI9PT1nLm5hbWUpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgcmVxdWlyZXMgYSBuYW1lXCI7YW5ndWxhci5leHRlbmQoZyxhbmd1bGFyLmNvcHkoYykpLGkudGFUb29sYmFyJiYoZy50b29sYmFyPWcuJHBhcmVudC4kZXZhbChpLnRhVG9vbGJhcikpLGkudGFUb29sYmFyQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhcj1pLnRhVG9vbGJhckNsYXNzKSxpLnRhVG9vbGJhckdyb3VwQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckdyb3VwPWkudGFUb29sYmFyR3JvdXBDbGFzcyksaS50YVRvb2xiYXJCdXR0b25DbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyQnV0dG9uPWkudGFUb29sYmFyQnV0dG9uQ2xhc3MpLGkudGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZT1pLnRhVG9vbGJhckFjdGl2ZUJ1dHRvbkNsYXNzKSxpLnRhRm9jdXNzZWRDbGFzcyYmKGcuY2xhc3Nlcy5mb2N1c3NlZD1pLnRhRm9jdXNzZWRDbGFzcyksZy5kaXNhYmxlZD0hMCxnLmZvY3Vzc2VkPSExLGcuXyRlbGVtZW50PWgsaFswXS5pbm5lckhUTUw9XCJcIixoLmFkZENsYXNzKFwidGEtdG9vbGJhciBcIitnLmNsYXNzZXMudG9vbGJhciksZy4kd2F0Y2goXCJmb2N1c3NlZFwiLGZ1bmN0aW9uKCl7Zy5mb2N1c3NlZD9oLmFkZENsYXNzKGcuY2xhc3Nlcy5mb2N1c3NlZCk6aC5yZW1vdmVDbGFzcyhnLmNsYXNzZXMuZm9jdXNzZWQpfSk7dmFyIGo9ZnVuY3Rpb24oYixjKXt2YXIgZDtpZihkPWImJmIuZGlzcGxheT9hbmd1bGFyLmVsZW1lbnQoYi5kaXNwbGF5KTphbmd1bGFyLmVsZW1lbnQoXCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+XCIpLGImJmJbXCJjbGFzc1wiXT9kLmFkZENsYXNzKGJbXCJjbGFzc1wiXSk6ZC5hZGRDbGFzcyhnLmNsYXNzZXMudG9vbGJhckJ1dHRvbiksZC5hdHRyKFwibmFtZVwiLGMubmFtZSksZC5hdHRyKFwidGEtYnV0dG9uXCIsXCJ0YS1idXR0b25cIiksZC5hdHRyKFwibmctZGlzYWJsZWRcIixcImlzRGlzYWJsZWQoKVwiKSxkLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIiksZC5hdHRyKFwibmctY2xpY2tcIixcImV4ZWN1dGVBY3Rpb24oKVwiKSxkLmF0dHIoXCJuZy1jbGFzc1wiLFwiZGlzcGxheUFjdGl2ZVRvb2xDbGFzcyhhY3RpdmUpXCIpLGImJmIudG9vbHRpcHRleHQmJmQuYXR0cihcInRpdGxlXCIsYi50b29sdGlwdGV4dCksYiYmIWIuZGlzcGxheSYmIWMuX2Rpc3BsYXkmJihkWzBdLmlubmVySFRNTD1cIlwiLGIuYnV0dG9udGV4dCYmKGRbMF0uaW5uZXJIVE1MPWIuYnV0dG9udGV4dCksYi5pY29uY2xhc3MpKXt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoXCI8aT5cIiksZj1kWzBdLmlubmVySFRNTDtlLmFkZENsYXNzKGIuaWNvbmNsYXNzKSxkWzBdLmlubmVySFRNTD1cIlwiLGQuYXBwZW5kKGUpLGYmJlwiXCIhPT1mJiZkLmFwcGVuZChcIiZuYnNwO1wiK2YpfXJldHVybiBjLl9sYXN0VG9vbERlZmluaXRpb249YW5ndWxhci5jb3B5KGIpLGEoZCkoYyl9O2cudG9vbHM9e30sZy5fcGFyZW50PXtkaXNhYmxlZDohMCxzaG93SHRtbDohMSxxdWVyeUZvcm1hdEJsb2NrU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19O3ZhciBrPXskd2luZG93OmYsJGVkaXRvcjpmdW5jdGlvbigpe3JldHVybiBnLl9wYXJlbnR9LGlzRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLiRldmFsKFwiZGlzYWJsZWRcIikmJnRoaXMuJGV2YWwoXCJkaXNhYmxlZFwiKXx8dGhpcy4kZXZhbChcImRpc2FibGVkKClcIil8fFwiaHRtbFwiIT09dGhpcy5uYW1lJiZ0aGlzLiRlZGl0b3IoKS5zaG93SHRtbHx8dGhpcy4kcGFyZW50LmRpc2FibGVkfHx0aGlzLiRlZGl0b3IoKS5kaXNhYmxlZH0sZGlzcGxheUFjdGl2ZVRvb2xDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gYT9nLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZTpcIlwifSxleGVjdXRlQWN0aW9uOmV9O2FuZ3VsYXIuZm9yRWFjaChnLnRvb2xiYXIsZnVuY3Rpb24oYSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIik7Yi5hZGRDbGFzcyhnLmNsYXNzZXMudG9vbGJhckdyb3VwKSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtnLnRvb2xzW2FdPWFuZ3VsYXIuZXh0ZW5kKGcuJG5ldyghMCksZFthXSxrLHtuYW1lOmF9KSxnLnRvb2xzW2FdLiRlbGVtZW50PWooZFthXSxnLnRvb2xzW2FdKSxiLmFwcGVuZChnLnRvb2xzW2FdLiRlbGVtZW50KX0pLGguYXBwZW5kKGIpfSksZy51cGRhdGVUb29sRGlzcGxheT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zy50b29sc1thXTtpZihkKXtpZihkLl9sYXN0VG9vbERlZmluaXRpb24mJiFjJiYoYj1hbmd1bGFyLmV4dGVuZCh7fSxkLl9sYXN0VG9vbERlZmluaXRpb24sYikpLG51bGw9PT1iLmJ1dHRvbnRleHQmJm51bGw9PT1iLmljb25jbGFzcyYmbnVsbD09PWIuZGlzcGxheSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciB1cGRhdGluZyBcIicrYSsnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO251bGw9PT1iLmJ1dHRvbnRleHQmJmRlbGV0ZSBiLmJ1dHRvbnRleHQsbnVsbD09PWIuaWNvbmNsYXNzJiZkZWxldGUgYi5pY29uY2xhc3MsbnVsbD09PWIuZGlzcGxheSYmZGVsZXRlIGIuZGlzcGxheTt2YXIgZT1qKGIsZCk7ZC4kZWxlbWVudC5yZXBsYWNlV2l0aChlKSxkLiRlbGVtZW50PWV9fSxnLmFkZFRvb2w9ZnVuY3Rpb24oYSxiLGMsZSl7Zy50b29sc1thXT1hbmd1bGFyLmV4dGVuZChnLiRuZXcoITApLGRbYV0sayx7bmFtZTphfSksZy50b29sc1thXS4kZWxlbWVudD1qKGRbYV0sZy50b29sc1thXSk7dmFyIGY7dm9pZCAwPT09YyYmKGM9Zy50b29sYmFyLmxlbmd0aC0xKSxmPWFuZ3VsYXIuZWxlbWVudChoLmNoaWxkcmVuKClbY10pLHZvaWQgMD09PWU/KGYuYXBwZW5kKGcudG9vbHNbYV0uJGVsZW1lbnQpLGcudG9vbGJhcltjXVtnLnRvb2xiYXJbY10ubGVuZ3RoLTFdPWEpOihmLmNoaWxkcmVuKCkuZXEoZSkuYWZ0ZXIoZy50b29sc1thXS4kZWxlbWVudCksZy50b29sYmFyW2NdW2VdPWEpfSxiLnJlZ2lzdGVyVG9vbGJhcihnKSxnLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiLnVucmVnaXN0ZXJUb29sYmFyKGcubmFtZSl9KX19fV0pfSgpfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXIgVUkgVHJlZSB2Mi45LjBcbiAqIChjKSAyMDEwLTIwMTUuIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpLXRyZWUvYW5ndWxhci11aS10cmVlXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIsW10pLmNvbnN0YW50KFwidHJlZUNvbmZpZ1wiLHt0cmVlQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWVcIixlbXB0eVRyZWVDbGFzczpcImFuZ3VsYXItdWktdHJlZS1lbXB0eVwiLGhpZGRlbkNsYXNzOlwiYW5ndWxhci11aS10cmVlLWhpZGRlblwiLG5vZGVzQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtbm9kZXNcIixub2RlQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtbm9kZVwiLGhhbmRsZUNsYXNzOlwiYW5ndWxhci11aS10cmVlLWhhbmRsZVwiLHBsYWNlaG9sZGVyQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtcGxhY2Vob2xkZXJcIixkcmFnQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtZHJhZ1wiLGRyYWdUaHJlc2hvbGQ6MyxsZXZlbFRocmVzaG9sZDozMH0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmNvbnRyb2xsZXIoXCJUcmVlSGFuZGxlQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihlLG4pe3RoaXMuc2NvcGU9ZSxlLiRlbGVtZW50PW4sZS4kbm9kZVNjb3BlPW51bGwsZS4kdHlwZT1cInVpVHJlZUhhbmRsZVwifV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmNvbnRyb2xsZXIoXCJUcmVlTm9kZUNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUpe3ZhciBuLGwscj0wLGk9ZS5jaGlsZE5vZGVzKCk7Zm9yKG49MDtuPGkubGVuZ3RoO24rKylsPWlbbl0uJGNoaWxkTm9kZXNTY29wZSxsJiZsLmNoaWxkTm9kZXNDb3VudCgpPjAmJihyPTEsdChsKSk7bys9cn10aGlzLnNjb3BlPWUsZS4kZWxlbWVudD1uLGUuJG1vZGVsVmFsdWU9bnVsbCxlLiRwYXJlbnROb2RlU2NvcGU9bnVsbCxlLiRjaGlsZE5vZGVzU2NvcGU9bnVsbCxlLiRwYXJlbnROb2Rlc1Njb3BlPW51bGwsZS4kdHJlZVNjb3BlPW51bGwsZS4kaGFuZGxlU2NvcGU9bnVsbCxlLiR0eXBlPVwidWlUcmVlTm9kZVwiLGUuJCRhcHBseT0hMSxlLmNvbGxhcHNlZD0hMSxlLmluaXQ9ZnVuY3Rpb24odCl7dmFyIG89dFswXTtlLiR0cmVlU2NvcGU9dFsxXT90WzFdLnNjb3BlOm51bGwsZS4kcGFyZW50Tm9kZVNjb3BlPW8uc2NvcGUuJG5vZGVTY29wZSxlLiRtb2RlbFZhbHVlPW8uc2NvcGUuJG1vZGVsVmFsdWVbZS4kaW5kZXhdLGUuJHBhcmVudE5vZGVzU2NvcGU9by5zY29wZSxvLnNjb3BlLmluaXRTdWJOb2RlKGUpLG4ub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7by5zY29wZS5kZXN0cm95U3ViTm9kZShlKX0pfSxlLmluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGUuJHBhcmVudE5vZGVzU2NvcGUuJG1vZGVsVmFsdWUuaW5kZXhPZihlLiRtb2RlbFZhbHVlKX0sZS5kcmFnRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEoZS4kdHJlZVNjb3BlJiYhZS4kdHJlZVNjb3BlLmRyYWdFbmFibGVkKX0sZS5pc1NpYmxpbmc9ZnVuY3Rpb24obil7cmV0dXJuIGUuJHBhcmVudE5vZGVzU2NvcGU9PW4uJHBhcmVudE5vZGVzU2NvcGV9LGUuaXNDaGlsZD1mdW5jdGlvbihuKXt2YXIgdD1lLmNoaWxkTm9kZXMoKTtyZXR1cm4gdCYmdC5pbmRleE9mKG4pPi0xfSxlLnByZXY9ZnVuY3Rpb24oKXt2YXIgbj1lLmluZGV4KCk7cmV0dXJuIG4+MD9lLnNpYmxpbmdzKClbbi0xXTpudWxsfSxlLnNpYmxpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuJHBhcmVudE5vZGVzU2NvcGUuY2hpbGROb2RlcygpfSxlLmNoaWxkTm9kZXNDb3VudD1mdW5jdGlvbigpe3JldHVybiBlLmNoaWxkTm9kZXMoKT9lLmNoaWxkTm9kZXMoKS5sZW5ndGg6MH0sZS5oYXNDaGlsZD1mdW5jdGlvbigpe3JldHVybiBlLmNoaWxkTm9kZXNDb3VudCgpPjB9LGUuY2hpbGROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBlLiRjaGlsZE5vZGVzU2NvcGUmJmUuJGNoaWxkTm9kZXNTY29wZS4kbW9kZWxWYWx1ZT9lLiRjaGlsZE5vZGVzU2NvcGUuY2hpbGROb2RlcygpOm51bGx9LGUuYWNjZXB0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuIGUuJGNoaWxkTm9kZXNTY29wZSYmZS4kY2hpbGROb2Rlc1Njb3BlLiRtb2RlbFZhbHVlJiZlLiRjaGlsZE5vZGVzU2NvcGUuYWNjZXB0KG4sdCl9LGUucmVtb3ZlTm9kZT1mdW5jdGlvbigpe3ZhciBuPWUucmVtb3ZlKCk7cmV0dXJuIGUuJGNhbGxiYWNrcy5yZW1vdmVkKG4pLG59LGUucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuIGUuJHBhcmVudE5vZGVzU2NvcGUucmVtb3ZlTm9kZShlKX0sZS50b2dnbGU9ZnVuY3Rpb24oKXtlLmNvbGxhcHNlZD0hZS5jb2xsYXBzZWR9LGUuY29sbGFwc2U9ZnVuY3Rpb24oKXtlLmNvbGxhcHNlZD0hMH0sZS5leHBhbmQ9ZnVuY3Rpb24oKXtlLmNvbGxhcHNlZD0hMX0sZS5kZXB0aD1mdW5jdGlvbigpe3ZhciBuPWUuJHBhcmVudE5vZGVTY29wZTtyZXR1cm4gbj9uLmRlcHRoKCkrMToxfTt2YXIgbz0wO2UubWF4U3ViRGVwdGg9ZnVuY3Rpb24oKXtyZXR1cm4gbz0wLGUuJGNoaWxkTm9kZXNTY29wZSYmdChlLiRjaGlsZE5vZGVzU2NvcGUpLG99fV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmNvbnRyb2xsZXIoXCJUcmVlTm9kZXNDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkZWxlbWVudFwiLGZ1bmN0aW9uKGUsbil7dGhpcy5zY29wZT1lLGUuJGVsZW1lbnQ9bixlLiRtb2RlbFZhbHVlPW51bGwsZS4kbm9kZVNjb3BlPW51bGwsZS4kdHJlZVNjb3BlPW51bGwsZS4kdHlwZT1cInVpVHJlZU5vZGVzXCIsZS4kbm9kZXNNYXA9e30sZS5ub2Ryb3BFbmFibGVkPSExLGUubWF4RGVwdGg9MCxlLmNsb25lRW5hYmxlZD0hMSxlLmluaXRTdWJOb2RlPWZ1bmN0aW9uKG4pe3JldHVybiBuLiRtb2RlbFZhbHVlP3ZvaWQoZS4kbm9kZXNNYXBbbi4kbW9kZWxWYWx1ZS4kJGhhc2hLZXldPW4pOm51bGx9LGUuZGVzdHJveVN1Yk5vZGU9ZnVuY3Rpb24obil7cmV0dXJuIG4uJG1vZGVsVmFsdWU/dm9pZChlLiRub2Rlc01hcFtuLiRtb2RlbFZhbHVlLiQkaGFzaEtleV09bnVsbCk6bnVsbH0sZS5hY2NlcHQ9ZnVuY3Rpb24obix0KXtyZXR1cm4gZS4kdHJlZVNjb3BlLiRjYWxsYmFja3MuYWNjZXB0KG4sZSx0KX0sZS5iZWZvcmVEcmFnPWZ1bmN0aW9uKG4pe3JldHVybiBlLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5iZWZvcmVEcmFnKG4pfSxlLmlzUGFyZW50PWZ1bmN0aW9uKG4pe3JldHVybiBuLiRwYXJlbnROb2Rlc1Njb3BlPT1lfSxlLmhhc0NoaWxkPWZ1bmN0aW9uKCl7cmV0dXJuIGUuJG1vZGVsVmFsdWUubGVuZ3RoPjB9LGUuc2FmZUFwcGx5PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuJHJvb3QuJCRwaGFzZTtcIiRhcHBseVwiPT1ufHxcIiRkaWdlc3RcIj09bj9lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlKCk6dGhpcy4kYXBwbHkoZSl9LGUucmVtb3ZlTm9kZT1mdW5jdGlvbihuKXt2YXIgdD1lLiRtb2RlbFZhbHVlLmluZGV4T2Yobi4kbW9kZWxWYWx1ZSk7cmV0dXJuIHQ+LTE/KGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCl7ZS4kbW9kZWxWYWx1ZS5zcGxpY2UodCwxKVswXX0pLG4pOm51bGx9LGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbihuLHQpe2Uuc2FmZUFwcGx5KGZ1bmN0aW9uKCl7ZS4kbW9kZWxWYWx1ZS5zcGxpY2UobiwwLHQpfSl9LGUuY2hpbGROb2Rlcz1mdW5jdGlvbigpe3ZhciBuLHQ9W107aWYoZS4kbW9kZWxWYWx1ZSlmb3Iobj0wO248ZS4kbW9kZWxWYWx1ZS5sZW5ndGg7bisrKXQucHVzaChlLiRub2Rlc01hcFtlLiRtb2RlbFZhbHVlW25dLiQkaGFzaEtleV0pO3JldHVybiB0fSxlLmRlcHRoPWZ1bmN0aW9uKCl7cmV0dXJuIGUuJG5vZGVTY29wZT9lLiRub2RlU2NvcGUuZGVwdGgoKTowfSxlLm91dE9mRGVwdGg9ZnVuY3Rpb24obil7dmFyIHQ9ZS5tYXhEZXB0aHx8ZS4kdHJlZVNjb3BlLm1heERlcHRoO3JldHVybiB0PjA/ZS5kZXB0aCgpK24ubWF4U3ViRGVwdGgoKSsxPnQ6ITF9fV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmNvbnRyb2xsZXIoXCJUcmVlQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihlLG4pe3RoaXMuc2NvcGU9ZSxlLiRlbGVtZW50PW4sZS4kbm9kZXNTY29wZT1udWxsLGUuJHR5cGU9XCJ1aVRyZWVcIixlLiRlbXB0eUVsbT1udWxsLGUuJGNhbGxiYWNrcz1udWxsLGUuZHJhZ0VuYWJsZWQ9ITAsZS5lbXB0eVBsYWNlaG9sZGVyRW5hYmxlZD0hMCxlLm1heERlcHRoPTAsZS5kcmFnRGVsYXk9MCxlLmNsb25lRW5hYmxlZD0hMSxlLm5vZHJvcEVuYWJsZWQ9ITEsZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIGUuJG5vZGVzU2NvcGUmJmUuJG5vZGVzU2NvcGUuJG1vZGVsVmFsdWUmJjA9PT1lLiRub2Rlc1Njb3BlLiRtb2RlbFZhbHVlLmxlbmd0aH0sZS5wbGFjZT1mdW5jdGlvbihuKXtlLiRub2Rlc1Njb3BlLiRlbGVtZW50LmFwcGVuZChuKSxlLiRlbXB0eUVsbS5yZW1vdmUoKX0sdGhpcy5yZXNldEVtcHR5RWxlbWVudD1mdW5jdGlvbigpe2UuJG5vZGVzU2NvcGUuJG1vZGVsVmFsdWUmJjAhPT1lLiRub2Rlc1Njb3BlLiRtb2RlbFZhbHVlLmxlbmd0aHx8IWUuZW1wdHlQbGFjZWhvbGRlckVuYWJsZWQ/ZS4kZW1wdHlFbG0ucmVtb3ZlKCk6bi5hcHBlbmQoZS4kZW1wdHlFbG0pfSxlLnJlc2V0RW1wdHlFbGVtZW50PXRoaXMucmVzZXRFbXB0eUVsZW1lbnQ7dmFyIHQ9ZnVuY3Rpb24oZSxuKXt2YXIgbyxsLHI9ZS5jaGlsZE5vZGVzKCk7Zm9yKG89MDtvPHIubGVuZ3RoO28rKyluP3Jbb10uY29sbGFwc2UoKTpyW29dLmV4cGFuZCgpLGw9cltvXS4kY2hpbGROb2Rlc1Njb3BlLGwmJnQobCxuKX07ZS5jb2xsYXBzZUFsbD1mdW5jdGlvbigpe3QoZS4kbm9kZXNTY29wZSwhMCl9LGUuZXhwYW5kQWxsPWZ1bmN0aW9uKCl7dChlLiRub2Rlc1Njb3BlLCExKX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZGlyZWN0aXZlKFwidWlUcmVlXCIsW1widHJlZUNvbmZpZ1wiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6XCJUcmVlQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24odCxvLGwscil7dmFyIGk9e2FjY2VwdDpudWxsLGJlZm9yZURyYWc6bnVsbH0sYT17fTthbmd1bGFyLmV4dGVuZChhLGUpLGEudHJlZUNsYXNzJiZvLmFkZENsYXNzKGEudHJlZUNsYXNzKSx0LiRlbXB0eUVsbT1hbmd1bGFyLmVsZW1lbnQobi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxhLmVtcHR5VHJlZUNsYXNzJiZ0LiRlbXB0eUVsbS5hZGRDbGFzcyhhLmVtcHR5VHJlZUNsYXNzKSx0LiR3YXRjaChcIiRub2Rlc1Njb3BlLiRtb2RlbFZhbHVlLmxlbmd0aFwiLGZ1bmN0aW9uKCl7dC4kbm9kZXNTY29wZS4kbW9kZWxWYWx1ZSYmci5yZXNldEVtcHR5RWxlbWVudCgpfSwhMCksdC4kd2F0Y2gobC5kcmFnRW5hYmxlZCxmdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0LmRyYWdFbmFibGVkPWUpfSksdC4kd2F0Y2gobC5lbXB0eVBsYWNlaG9sZGVyRW5hYmxlZCxmdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0LmVtcHR5UGxhY2Vob2xkZXJFbmFibGVkPWUsci5yZXNldEVtcHR5RWxlbWVudCgpKX0pLHQuJHdhdGNoKGwubm9kcm9wRW5hYmxlZCxmdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0Lm5vZHJvcEVuYWJsZWQ9ZSl9KSx0LiR3YXRjaChsLmNsb25lRW5hYmxlZCxmdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0LmNsb25lRW5hYmxlZD1lKX0pLHQuJHdhdGNoKGwubWF4RGVwdGgsZnVuY3Rpb24oZSl7XCJudW1iZXJcIj09dHlwZW9mIGUmJih0Lm1heERlcHRoPWUpfSksdC4kd2F0Y2gobC5kcmFnRGVsYXksZnVuY3Rpb24oZSl7XCJudW1iZXJcIj09dHlwZW9mIGUmJih0LmRyYWdEZWxheT1lKX0pLGkuYWNjZXB0PWZ1bmN0aW9uKGUsbix0KXtyZXR1cm4hKG4ubm9kcm9wRW5hYmxlZHx8bi5vdXRPZkRlcHRoKGUpKX0saS5iZWZvcmVEcmFnPWZ1bmN0aW9uKGUpe3JldHVybiEwfSxpLnJlbW92ZWQ9ZnVuY3Rpb24oZSl7fSxpLmRyb3BwZWQ9ZnVuY3Rpb24oZSl7fSxpLmRyYWdTdGFydD1mdW5jdGlvbihlKXt9LGkuZHJhZ01vdmU9ZnVuY3Rpb24oZSl7fSxpLmRyYWdTdG9wPWZ1bmN0aW9uKGUpe30saS5iZWZvcmVEcm9wPWZ1bmN0aW9uKGUpe30sdC4kd2F0Y2gobC51aVRyZWUsZnVuY3Rpb24oZSxuKXthbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLG4pe2lbbl0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihpW25dPWUpfSksdC4kY2FsbGJhY2tzPWl9LCEwKX19fV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmRpcmVjdGl2ZShcInVpVHJlZUhhbmRsZVwiLFtcInRyZWVDb25maWdcIixmdW5jdGlvbihlKXtyZXR1cm57cmVxdWlyZTpcIl51aVRyZWVOb2RlXCIscmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITAsY29udHJvbGxlcjpcIlRyZWVIYW5kbGVDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihuLHQsbyxsKXt2YXIgcj17fTthbmd1bGFyLmV4dGVuZChyLGUpLHIuaGFuZGxlQ2xhc3MmJnQuYWRkQ2xhc3Moci5oYW5kbGVDbGFzcyksbiE9bC5zY29wZSYmKG4uJG5vZGVTY29wZT1sLnNjb3BlLGwuc2NvcGUuJGhhbmRsZVNjb3BlPW4pfX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZGlyZWN0aXZlKFwidWlUcmVlTm9kZVwiLFtcInRyZWVDb25maWdcIixcIlVpVHJlZUhlbHBlclwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGUsbix0LG8sbCl7cmV0dXJue3JlcXVpcmU6W1wiXnVpVHJlZU5vZGVzXCIsXCJedWlUcmVlXCJdLHJlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6XCJUcmVlTm9kZUNvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKHIsaSxhLGQpe3ZhciBjLHMsdSxwLGYsaCwkLG0sZyxiLHksdixTLE4sRSx4LEMsdyxULEQsWD17fSxZPVwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3csQT1udWxsLFY9ZG9jdW1lbnQuYm9keSxrPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDthbmd1bGFyLmV4dGVuZChYLGUpLFgubm9kZUNsYXNzJiZpLmFkZENsYXNzKFgubm9kZUNsYXNzKSxyLmluaXQoZCksci5jb2xsYXBzZWQ9ISFuLmdldE5vZGVBdHRyaWJ1dGUocixcImNvbGxhcHNlZFwiKSxyLnNvdXJjZU9ubHk9ci5ub2Ryb3BFbmFibGVkfHxyLiR0cmVlU2NvcGUubm9kcm9wRW5hYmxlZCxyLiR3YXRjaChhLmNvbGxhcHNlZCxmdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJihyLmNvbGxhcHNlZD1lKX0pLHIuJHdhdGNoKFwiY29sbGFwc2VkXCIsZnVuY3Rpb24oZSl7bi5zZXROb2RlQXR0cmlidXRlKHIsXCJjb2xsYXBzZWRcIixlKSxhLiRzZXQoXCJjb2xsYXBzZWRcIixlKX0pLGI9ZnVuY3Rpb24oZSl7aWYoKFl8fDIhPWUuYnV0dG9uJiYzIT1lLndoaWNoKSYmIShlLnVpVHJlZURyYWdnaW5nfHxlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC51aVRyZWVEcmFnZ2luZykpe3ZhciBsLGEsZCxiLHksdj1hbmd1bGFyLmVsZW1lbnQoZS50YXJnZXQpLFM9di5zY29wZSgpLEM9aS5jbG9uZSgpO2lmKFMmJlMuJHR5cGUmJiEoXCJ1aVRyZWVOb2RlXCIhPVMuJHR5cGUmJlwidWlUcmVlSGFuZGxlXCIhPVMuJHR5cGV8fFwidWlUcmVlTm9kZVwiPT1TLiR0eXBlJiZTLiRoYW5kbGVTY29wZXx8KGw9di5wcm9wKFwidGFnTmFtZVwiKS50b0xvd2VyQ2FzZSgpLFwiaW5wdXRcIj09bHx8XCJ0ZXh0YXJlYVwiPT1sfHxcImJ1dHRvblwiPT1sfHxcInNlbGVjdFwiPT1sKSkpe2Zvcig7diYmdlswXSYmdlswXSE9aTspe2lmKG4ubm9kcmFnKHYpKXJldHVybjt2PXYucGFyZW50KCl9ci5iZWZvcmVEcmFnKHIpJiYoZS51aVRyZWVEcmFnZ2luZz0hMCxlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQudWlUcmVlRHJhZ2dpbmc9ITApLGUucHJldmVudERlZmF1bHQoKSxkPW4uZXZlbnRPYmooZSksYz0hMCxzPW4uZHJhZ0luZm8ociksci4kYXBwbHkoZnVuY3Rpb24oKXtyLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5kcmFnU3RhcnQocy5ldmVudEFyZ3MoJCx1KSl9KSxhPXIuJGVsZW1lbnQucHJvcChcInRhZ05hbWVcIiksXCJ0clwiPT09YS50b0xvd2VyQ2FzZSgpPyhwPWFuZ3VsYXIuZWxlbWVudCh0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSkpLGI9YW5ndWxhci5lbGVtZW50KHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpKS5hZGRDbGFzcyhYLnBsYWNlaG9sZGVyQ2xhc3MpLHAuYXBwZW5kKGIpKTpwPWFuZ3VsYXIuZWxlbWVudCh0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSkpLmFkZENsYXNzKFgucGxhY2Vob2xkZXJDbGFzcyksZj1hbmd1bGFyLmVsZW1lbnQodC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpKSxYLmhpZGRlbkNsYXNzJiZmLmFkZENsYXNzKFguaGlkZGVuQ2xhc3MpLHU9bi5wb3NpdGlvblN0YXJ0ZWQoZCxyLiRlbGVtZW50KSxwLmNzcyhcImhlaWdodFwiLG4uaGVpZ2h0KHIuJGVsZW1lbnQpK1wicHhcIikscC5jc3MoXCJ3aWR0aFwiLG4ud2lkdGgoci4kZWxlbWVudCkrXCJweFwiKSxoPWFuZ3VsYXIuZWxlbWVudCh0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoci4kcGFyZW50Tm9kZXNTY29wZS4kZWxlbWVudC5wcm9wKFwidGFnTmFtZVwiKSkpLmFkZENsYXNzKHIuJHBhcmVudE5vZGVzU2NvcGUuJGVsZW1lbnQuYXR0cihcImNsYXNzXCIpKS5hZGRDbGFzcyhYLmRyYWdDbGFzcyksaC5jc3MoXCJ3aWR0aFwiLG4ud2lkdGgoci4kZWxlbWVudCkrXCJweFwiKSxoLmNzcyhcInotaW5kZXhcIiw5OTk5KSx5PShyLiRlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoXCIuYW5ndWxhci11aS10cmVlLWhhbmRsZVwiKXx8ci4kZWxlbWVudFswXSkuY3VycmVudFN0eWxlLHkmJihkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZShcInVpLXRyZWUtY3Vyc29yXCIsby5maW5kKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIil8fFwiXCIpLG8uZmluZChcImJvZHlcIikuY3NzKHtjdXJzb3I6eS5jdXJzb3IrXCIhaW1wb3J0YW50XCJ9KSksci5zb3VyY2VPbmx5JiZwLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksci4kZWxlbWVudC5hZnRlcihwKSxyLiRlbGVtZW50LmFmdGVyKGYpLGguYXBwZW5kKHMuaXNDbG9uZSgpJiZyLnNvdXJjZU9ubHk/QzpyLiRlbGVtZW50KSxvLmZpbmQoXCJib2R5XCIpLmFwcGVuZChoKSxoLmNzcyh7bGVmdDpkLnBhZ2VYLXUub2Zmc2V0WCtcInB4XCIsdG9wOmQucGFnZVktdS5vZmZzZXRZK1wicHhcIn0pLCQ9e3BsYWNlaG9sZGVyOnAsZHJhZ2dpbmc6aH0sYW5ndWxhci5lbGVtZW50KG8pLmJpbmQoXCJ0b3VjaGVuZFwiLEUpLGFuZ3VsYXIuZWxlbWVudChvKS5iaW5kKFwidG91Y2hjYW5jZWxcIixFKSxhbmd1bGFyLmVsZW1lbnQobykuYmluZChcInRvdWNobW92ZVwiLE4pLGFuZ3VsYXIuZWxlbWVudChvKS5iaW5kKFwibW91c2V1cFwiLEUpLGFuZ3VsYXIuZWxlbWVudChvKS5iaW5kKFwibW91c2Vtb3ZlXCIsTiksYW5ndWxhci5lbGVtZW50KG8pLmJpbmQoXCJtb3VzZWxlYXZlXCIseCksbT1NYXRoLm1heChWLnNjcm9sbEhlaWdodCxWLm9mZnNldEhlaWdodCxrLmNsaWVudEhlaWdodCxrLnNjcm9sbEhlaWdodCxrLm9mZnNldEhlaWdodCksZz1NYXRoLm1heChWLnNjcm9sbFdpZHRoLFYub2Zmc2V0V2lkdGgsay5jbGllbnRXaWR0aCxrLnNjcm9sbFdpZHRoLGsub2Zmc2V0V2lkdGgpKX19fSx5PWZ1bmN0aW9uKGUpe3ZhciBvLGwsaSxhLGQsZixiLHksdixTLE4sRSx4LEMsdyxULFk9bi5ldmVudE9iaihlKTtpZihoKXtpZihlLnByZXZlbnREZWZhdWx0KCksdC5nZXRTZWxlY3Rpb24/dC5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTp0LmRvY3VtZW50LnNlbGVjdGlvbiYmdC5kb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKSxpPVkucGFnZVgtdS5vZmZzZXRYLGE9WS5wYWdlWS11Lm9mZnNldFksMD5pJiYoaT0wKSwwPmEmJihhPTApLGErMTA+bSYmKGE9bS0xMCksaSsxMD5nJiYoaT1nLTEwKSxoLmNzcyh7bGVmdDppK1wicHhcIix0b3A6YStcInB4XCJ9KSxkPXdpbmRvdy5wYWdlWU9mZnNldHx8dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLGY9ZCsod2luZG93LmlubmVySGVpZ2h0fHx0LmRvY3VtZW50LmNsaWVudEhlaWdodHx8dC5kb2N1bWVudC5jbGllbnRIZWlnaHQpLGY8WS5wYWdlWSYmbT49ZiYmd2luZG93LnNjcm9sbEJ5KDAsMTApLGQ+WS5wYWdlWSYmd2luZG93LnNjcm9sbEJ5KDAsLTEwKSxuLnBvc2l0aW9uTW92ZWQoZSx1LGMpLGMpcmV0dXJuIHZvaWQoYz0hMSk7aWYoeT1uLm9mZnNldChoKS5sZWZ0LW4ub2Zmc2V0KHApLmxlZnQ+PVgudGhyZXNob2xkLHY9WS5wYWdlWC10LmRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCxTPVkucGFnZVktKHdpbmRvdy5wYWdlWU9mZnNldHx8dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSxhbmd1bGFyLmlzRnVuY3Rpb24oaC5oaWRlKT9oLmhpZGUoKTooTj1oWzBdLnN0eWxlLmRpc3BsYXksaFswXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSx0LmRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodixTKSx4PWFuZ3VsYXIuZWxlbWVudCh0LmRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodixTKSksYW5ndWxhci5pc0Z1bmN0aW9uKGguc2hvdyk/aC5zaG93KCk6aFswXS5zdHlsZS5kaXNwbGF5PU4sRD0heC5zY29wZSgpLiR0eXBlLEQmJihwLnJlbW92ZSgpLEEmJihBLnJlc2V0RW1wdHlFbGVtZW50KCksQT1udWxsKSksdS5kaXJBeCYmdS5kaXN0QXhYPj1YLmxldmVsVGhyZXNob2xkJiYodS5kaXN0QXhYPTAsdS5kaXN0WD4wJiYobz1zLnByZXYoKSxvJiYhby5jb2xsYXBzZWQmJm8uYWNjZXB0KHIsby5jaGlsZE5vZGVzQ291bnQoKSkmJihvLiRjaGlsZE5vZGVzU2NvcGUuJGVsZW1lbnQuYXBwZW5kKHApLHMubW92ZVRvKG8uJGNoaWxkTm9kZXNTY29wZSxvLmNoaWxkTm9kZXMoKSxvLmNoaWxkTm9kZXNDb3VudCgpKSkpLHUuZGlzdFg8MCYmKGw9cy5uZXh0KCksbHx8KGI9cy5wYXJlbnROb2RlKCksYiYmYi4kcGFyZW50Tm9kZXNTY29wZS5hY2NlcHQocixiLmluZGV4KCkrMSkmJihiLiRlbGVtZW50LmFmdGVyKHApLHMubW92ZVRvKGIuJHBhcmVudE5vZGVzU2NvcGUsYi5zaWJsaW5ncygpLGIuaW5kZXgoKSsxKSkpKSksIXUuZGlyQXgpe2lmKEU9eC5zY29wZSgpLEM9ITEsIUUpcmV0dXJuO2lmKCFFLiR0cmVlU2NvcGV8fEUuJHBhcmVudC5ub2Ryb3BFbmFibGVkfHxFLiR0cmVlU2NvcGUubm9kcm9wRW5hYmxlZHx8cC5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxcInVpVHJlZVwiPT1FLiR0eXBlJiZFLmRyYWdFbmFibGVkJiYoQz1FLmlzRW1wdHkoKSksXCJ1aVRyZWVIYW5kbGVcIj09RS4kdHlwZSYmKEU9RS4kbm9kZVNjb3BlKSxcInVpVHJlZU5vZGVcIiE9RS4kdHlwZSYmIUMpcmV0dXJuO0EmJnAucGFyZW50KClbMF0hPUEuJGVsZW1lbnRbMF0mJihBLnJlc2V0RW1wdHlFbGVtZW50KCksQT1udWxsKSxDPyhBPUUsRS4kbm9kZXNTY29wZS5hY2NlcHQociwwKSYmKEUucGxhY2UocCkscy5tb3ZlVG8oRS4kbm9kZXNTY29wZSxFLiRub2Rlc1Njb3BlLmNoaWxkTm9kZXMoKSwwKSkpOkUuZHJhZ0VuYWJsZWQoKSYmKHg9RS4kZWxlbWVudCx3PW4ub2Zmc2V0KHgpLFQ9RS5ob3Jpem9udGFsP1kucGFnZVg8dy5sZWZ0K24ud2lkdGgoeCkvMjpZLnBhZ2VZPHcudG9wK24uaGVpZ2h0KHgpLzIsRS4kcGFyZW50Tm9kZXNTY29wZS5hY2NlcHQocixFLmluZGV4KCkpP1Q/KHhbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocFswXSx4WzBdKSxzLm1vdmVUbyhFLiRwYXJlbnROb2Rlc1Njb3BlLEUuc2libGluZ3MoKSxFLmluZGV4KCkpKTooeC5hZnRlcihwKSxzLm1vdmVUbyhFLiRwYXJlbnROb2Rlc1Njb3BlLEUuc2libGluZ3MoKSxFLmluZGV4KCkrMSkpOiFUJiZFLmFjY2VwdChyLEUuY2hpbGROb2Rlc0NvdW50KCkpPyhFLiRjaGlsZE5vZGVzU2NvcGUuJGVsZW1lbnQuYXBwZW5kKHApLHMubW92ZVRvKEUuJGNoaWxkTm9kZXNTY29wZSxFLmNoaWxkTm9kZXMoKSxFLmNoaWxkTm9kZXNDb3VudCgpKSk6RD0hMCl9ci4kYXBwbHkoZnVuY3Rpb24oKXtyLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5kcmFnTW92ZShzLmV2ZW50QXJncygkLHUpKX0pfX0sdj1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksaCYmKHIuJHRyZWVTY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtyLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5iZWZvcmVEcm9wKHMuZXZlbnRBcmdzKCQsdSkpfSksZi5yZXBsYWNlV2l0aChyLiRlbGVtZW50KSxwLnJlbW92ZSgpLGgucmVtb3ZlKCksaD1udWxsLHIuJCRhcHBseSYmIUQ/ci4kdHJlZVNjb3BlLiRhcHBseShmdW5jdGlvbigpe3MuYXBwbHkoKSxyLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5kcm9wcGVkKHMuZXZlbnRBcmdzKCQsdSkpfSk6dygpLHIuJHRyZWVTY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtyLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5kcmFnU3RvcChzLmV2ZW50QXJncygkLHUpKX0pLHIuJCRhcHBseT0hMSxzPW51bGwpO3ZhciBuPWRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKFwidWktdHJlZS1jdXJzb3JcIik7bnVsbCE9PW4mJihvLmZpbmQoXCJib2R5XCIpLmNzcyh7Y3Vyc29yOm59KSxkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZShcInVpLXRyZWUtY3Vyc29yXCIpKSxhbmd1bGFyLmVsZW1lbnQobykudW5iaW5kKFwidG91Y2hlbmRcIixFKSxhbmd1bGFyLmVsZW1lbnQobykudW5iaW5kKFwidG91Y2hjYW5jZWxcIixFKSxhbmd1bGFyLmVsZW1lbnQobykudW5iaW5kKFwidG91Y2htb3ZlXCIsTiksYW5ndWxhci5lbGVtZW50KG8pLnVuYmluZChcIm1vdXNldXBcIixFKSxhbmd1bGFyLmVsZW1lbnQobykudW5iaW5kKFwibW91c2Vtb3ZlXCIsTiksYW5ndWxhci5lbGVtZW50KHQuZG9jdW1lbnQuYm9keSkudW5iaW5kKFwibW91c2VsZWF2ZVwiLHgpfSxTPWZ1bmN0aW9uKGUpe3IuZHJhZ0VuYWJsZWQoKSYmYihlKX0sTj1mdW5jdGlvbihlKXt5KGUpfSxFPWZ1bmN0aW9uKGUpe3IuJCRhcHBseT0hMCx2KGUpfSx4PWZ1bmN0aW9uKGUpe3YoZSl9LEM9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm57ZXhlYzpmdW5jdGlvbihuLHQpe3R8fCh0PTApLHRoaXMuY2FuY2VsKCksZT1sKG4sdCl9LGNhbmNlbDpmdW5jdGlvbigpe2wuY2FuY2VsKGUpfX19KCksdz1mdW5jdGlvbigpe2kuYmluZChcInRvdWNoc3RhcnQgbW91c2Vkb3duXCIsZnVuY3Rpb24oZSl7Qy5leGVjKGZ1bmN0aW9uKCl7UyhlKX0sci5kcmFnRGVsYXl8fDApfSksaS5iaW5kKFwidG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cFwiLGZ1bmN0aW9uKCl7Qy5jYW5jZWwoKX0pfSx3KCksVD1mdW5jdGlvbihlKXsyNz09ZS5rZXlDb2RlJiYoci4kJGFwcGx5PSExLHYoZSkpfSxhbmd1bGFyLmVsZW1lbnQodC5kb2N1bWVudC5ib2R5KS5iaW5kKFwia2V5ZG93blwiLFQpLHIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2FuZ3VsYXIuZWxlbWVudCh0LmRvY3VtZW50LmJvZHkpLnVuYmluZChcImtleWRvd25cIixUKX0pfX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZGlyZWN0aXZlKFwidWlUcmVlTm9kZXNcIixbXCJ0cmVlQ29uZmlnXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oZSl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiP151aVRyZWVOb2RlXCIsXCJedWlUcmVlXCJdLHJlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6XCJUcmVlTm9kZXNDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihuLHQsbyxsKXt2YXIgcj17fSxpPWxbMF0sYT1sWzFdLGQ9bFsyXTthbmd1bGFyLmV4dGVuZChyLGUpLHIubm9kZXNDbGFzcyYmdC5hZGRDbGFzcyhyLm5vZGVzQ2xhc3MpLGE/KGEuc2NvcGUuJGNoaWxkTm9kZXNTY29wZT1uLG4uJG5vZGVTY29wZT1hLnNjb3BlKTpkLnNjb3BlLiRub2Rlc1Njb3BlPW4sbi4kdHJlZVNjb3BlPWQuc2NvcGUsaSYmKGkuJHJlbmRlcj1mdW5jdGlvbigpe24uJG1vZGVsVmFsdWU9aS4kbW9kZWxWYWx1ZX0pLG4uJHdhdGNoKG8ubWF4RGVwdGgsZnVuY3Rpb24oZSl7XCJudW1iZXJcIj09dHlwZW9mIGUmJihuLm1heERlcHRoPWUpfSksbi4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gby5ub2Ryb3BFbmFibGVkfSxmdW5jdGlvbihlKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmKG4ubm9kcm9wRW5hYmxlZD0hMCl9LCEwKSxvLiRvYnNlcnZlKFwiaG9yaXpvbnRhbFwiLGZ1bmN0aW9uKGUpe24uaG9yaXpvbnRhbD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZX0pfX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZmFjdG9yeShcIlVpVHJlZUhlbHBlclwiLFtcIiRkb2N1bWVudFwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGUsbil7cmV0dXJue25vZGVzRGF0YTp7fSxzZXROb2RlQXR0cmlidXRlOmZ1bmN0aW9uKGUsbix0KXtpZighZS4kbW9kZWxWYWx1ZSlyZXR1cm4gbnVsbDt2YXIgbz10aGlzLm5vZGVzRGF0YVtlLiRtb2RlbFZhbHVlLiQkaGFzaEtleV07b3x8KG89e30sdGhpcy5ub2Rlc0RhdGFbZS4kbW9kZWxWYWx1ZS4kJGhhc2hLZXldPW8pLG9bbl09dH0sZ2V0Tm9kZUF0dHJpYnV0ZTpmdW5jdGlvbihlLG4pe2lmKCFlLiRtb2RlbFZhbHVlKXJldHVybiBudWxsO3ZhciB0PXRoaXMubm9kZXNEYXRhW2UuJG1vZGVsVmFsdWUuJCRoYXNoS2V5XTtyZXR1cm4gdD90W25dOm51bGx9LG5vZHJhZzpmdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5hdHRyKFwiZGF0YS1ub2RyYWdcIik/XCJmYWxzZVwiIT09ZS5hdHRyKFwiZGF0YS1ub2RyYWdcIik6ITF9LGV2ZW50T2JqOmZ1bmN0aW9uKGUpe3ZhciBuPWU7cmV0dXJuIHZvaWQgMCE9PWUudGFyZ2V0VG91Y2hlcz9uPWUudGFyZ2V0VG91Y2hlcy5pdGVtKDApOnZvaWQgMCE9PWUub3JpZ2luYWxFdmVudCYmdm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXMmJihuPWUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzLml0ZW0oMCkpLG59LGRyYWdJbmZvOmZ1bmN0aW9uKGUpe3JldHVybntzb3VyY2U6ZSxzb3VyY2VJbmZvOntjbG9uZU1vZGVsOmUuJHRyZWVTY29wZS5jbG9uZUVuYWJsZWQ9PT0hMD9hbmd1bGFyLmNvcHkoZS4kbW9kZWxWYWx1ZSk6dm9pZCAwLG5vZGVTY29wZTplLGluZGV4OmUuaW5kZXgoKSxub2Rlc1Njb3BlOmUuJHBhcmVudE5vZGVzU2NvcGV9LGluZGV4OmUuaW5kZXgoKSxzaWJsaW5nczplLnNpYmxpbmdzKCkuc2xpY2UoMCkscGFyZW50OmUuJHBhcmVudE5vZGVzU2NvcGUsbW92ZVRvOmZ1bmN0aW9uKGUsbix0KXt0aGlzLnBhcmVudD1lLHRoaXMuc2libGluZ3M9bi5zbGljZSgwKTt2YXIgbz10aGlzLnNpYmxpbmdzLmluZGV4T2YodGhpcy5zb3VyY2UpO28+LTEmJih0aGlzLnNpYmxpbmdzLnNwbGljZShvLDEpLHRoaXMuc291cmNlLmluZGV4KCk8dCYmdC0tKSx0aGlzLnNpYmxpbmdzLnNwbGljZSh0LDAsdGhpcy5zb3VyY2UpLHRoaXMuaW5kZXg9dH0scGFyZW50Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudC4kbm9kZVNjb3BlfSxwcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXg+MD90aGlzLnNpYmxpbmdzW3RoaXMuaW5kZXgtMV06bnVsbH0sbmV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4PHRoaXMuc2libGluZ3MubGVuZ3RoLTE/dGhpcy5zaWJsaW5nc1t0aGlzLmluZGV4KzFdOm51bGx9LGlzQ2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3VyY2UuJHRyZWVTY29wZS5jbG9uZUVuYWJsZWQ9PT0hMH0sY2xvbmVkTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gYW5ndWxhci5jb3B5KGUpfSxpc0RpcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlLiRwYXJlbnROb2Rlc1Njb3BlIT10aGlzLnBhcmVudHx8dGhpcy5zb3VyY2UuaW5kZXgoKSE9dGhpcy5pbmRleH0saXNGb3JlaWduOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlLiR0cmVlU2NvcGUhPT10aGlzLnBhcmVudC4kdHJlZVNjb3BlfSxldmVudEFyZ3M6ZnVuY3Rpb24oZSxuKXtyZXR1cm57c291cmNlOnRoaXMuc291cmNlSW5mbyxkZXN0OntpbmRleDp0aGlzLmluZGV4LG5vZGVzU2NvcGU6dGhpcy5wYXJlbnR9LGVsZW1lbnRzOmUscG9zOm59fSxhcHBseTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc291cmNlLiRtb2RlbFZhbHVlO3RoaXMucGFyZW50Lm5vZHJvcEVuYWJsZWR8fHRoaXMucGFyZW50LiR0cmVlU2NvcGUubm9kcm9wRW5hYmxlZHx8dGhpcy5pc0RpcnR5KCkmJih0aGlzLmlzQ2xvbmUoKSYmdGhpcy5pc0ZvcmVpZ24oKT90aGlzLnBhcmVudC5pbnNlcnROb2RlKHRoaXMuaW5kZXgsYW5ndWxhci5jb3B5KGUpKToodGhpcy5zb3VyY2UucmVtb3ZlKCksdGhpcy5wYXJlbnQuaW5zZXJ0Tm9kZSh0aGlzLmluZGV4LGUpKSl9fX0saGVpZ2h0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnByb3AoXCJzY3JvbGxIZWlnaHRcIil9LHdpZHRoOmZ1bmN0aW9uKGUpe3JldHVybiBlLnByb3AoXCJzY3JvbGxXaWR0aFwiKX0sb2Zmc2V0OmZ1bmN0aW9uKHQpe3ZhciBvPXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOnQucHJvcChcIm9mZnNldFdpZHRoXCIpLGhlaWdodDp0LnByb3AoXCJvZmZzZXRIZWlnaHRcIiksdG9wOm8udG9wKyhuLnBhZ2VZT2Zmc2V0fHxlWzBdLmJvZHkuc2Nyb2xsVG9wfHxlWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLGxlZnQ6by5sZWZ0KyhuLnBhZ2VYT2Zmc2V0fHxlWzBdLmJvZHkuc2Nyb2xsTGVmdHx8ZVswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCl9fSxwb3NpdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oZSxuKXt2YXIgdD17fSxvPWUucGFnZVgsbD1lLnBhZ2VZO3JldHVybiBlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC50b3VjaGVzJiZlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGg+MCYmKG89ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsbD1lLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSksdC5vZmZzZXRYPW8tdGhpcy5vZmZzZXQobikubGVmdCx0Lm9mZnNldFk9bC10aGlzLm9mZnNldChuKS50b3AsdC5zdGFydFg9dC5sYXN0WD1vLHQuc3RhcnRZPXQubGFzdFk9bCx0Lm5vd1g9dC5ub3dZPXQuZGlzdFg9dC5kaXN0WT10LmRpckF4PTAsdC5kaXJYPXQuZGlyWT10Lmxhc3REaXJYPXQubGFzdERpclk9dC5kaXN0QXhYPXQuZGlzdEF4WT0wLHR9LHBvc2l0aW9uTW92ZWQ6ZnVuY3Rpb24oZSxuLHQpe3ZhciBvLGw9ZS5wYWdlWCxyPWUucGFnZVk7cmV0dXJuIGUub3JpZ2luYWxFdmVudCYmZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aD4wJiYobD1lLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWCxyPWUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZKSxuLmxhc3RYPW4ubm93WCxuLmxhc3RZPW4ubm93WSxuLm5vd1g9bCxuLm5vd1k9cixuLmRpc3RYPW4ubm93WC1uLmxhc3RYLG4uZGlzdFk9bi5ub3dZLW4ubGFzdFksbi5sYXN0RGlyWD1uLmRpclgsbi5sYXN0RGlyWT1uLmRpclksbi5kaXJYPTA9PT1uLmRpc3RYPzA6bi5kaXN0WD4wPzE6LTEsbi5kaXJZPTA9PT1uLmRpc3RZPzA6bi5kaXN0WT4wPzE6LTEsbz1NYXRoLmFicyhuLmRpc3RYKT5NYXRoLmFicyhuLmRpc3RZKT8xOjAsdD8obi5kaXJBeD1vLHZvaWQobi5tb3Zpbmc9ITApKToobi5kaXJBeCE9PW8/KG4uZGlzdEF4WD0wLG4uZGlzdEF4WT0wKToobi5kaXN0QXhYKz1NYXRoLmFicyhuLmRpc3RYKSwwIT09bi5kaXJYJiZuLmRpclghPT1uLmxhc3REaXJYJiYobi5kaXN0QXhYPTApLG4uZGlzdEF4WSs9TWF0aC5hYnMobi5kaXN0WSksMCE9PW4uZGlyWSYmbi5kaXJZIT09bi5sYXN0RGlyWSYmKG4uZGlzdEF4WT0wKSksdm9pZChuLmRpckF4PW8pKX19fV0pfSgpOyIsIi8qISBuZ1RhZ3NJbnB1dCB2Mi4xLjEgTGljZW5zZTogTUlUICovIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYSgpe3ZhciBhPXt9O3JldHVybntvbjpmdW5jdGlvbihiLGMpe3JldHVybiBiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2FbYl18fChhW2JdPVtdKSxhW2JdLnB1c2goYyl9KSx0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChhW2JdLGZ1bmN0aW9uKGEpe2EuY2FsbChudWxsLGMpfSksdGhpc319fWZ1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYT1hfHxbXSxhLmxlbmd0aD4wJiYhYW5ndWxhci5pc09iamVjdChhWzBdKSYmYS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YVtkXT17fSxhW2RdW2JdPWN9KSxhfWZ1bmN0aW9uIGMoYSxiLGMpe2Zvcih2YXIgZD1udWxsLGY9MDtmPGEubGVuZ3RoO2YrKylpZihlKGFbZl1bY10pLnRvTG93ZXJDYXNlKCk9PT1lKGJbY10pLnRvTG93ZXJDYXNlKCkpe2Q9YVtmXTticmVha31yZXR1cm4gZH1mdW5jdGlvbiBkKGEsYixjKXtpZighYilyZXR1cm4gYTt2YXIgZD1iLnJlcGxhY2UoLyhbLj8qK14kW1xcXVxcXFwoKXt9fC1dKS9nLFwiXFxcXCQxXCIpO3JldHVybiBhLnJlcGxhY2UobmV3IFJlZ0V4cChkLFwiZ2lcIiksYyl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYW5ndWxhci5pc1VuZGVmaW5lZChhKXx8bnVsbD09YT9cIlwiOmEudG9TdHJpbmcoKS50cmltKCl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5yZXBsYWNlKC8mL2csXCImYW1wO1wiKS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9dmFyIGc9e2JhY2tzcGFjZTo4LHRhYjo5LGVudGVyOjEzLGVzY2FwZToyNyxzcGFjZTozMix1cDozOCxkb3duOjQwLGNvbW1hOjE4OH0saD05MDA3MTk5MjU0NzQwOTkxLGk9W1widGV4dFwiLFwiZW1haWxcIixcInVybFwiXSxqPWFuZ3VsYXIubW9kdWxlKFwibmdUYWdzSW5wdXRcIixbXSk7ai5kaXJlY3RpdmUoXCJ0YWdzSW5wdXRcIixbXCIkdGltZW91dFwiLFwiJGRvY3VtZW50XCIsXCJ0YWdzSW5wdXRDb25maWdcIixmdW5jdGlvbihkLGYsail7ZnVuY3Rpb24gayhhLGIpe3ZhciBkLGYsZyxoPXt9O3JldHVybiBkPWZ1bmN0aW9uKGIpe3JldHVybiBlKGJbYS5kaXNwbGF5UHJvcGVydHldKX0sZj1mdW5jdGlvbihiLGMpe2JbYS5kaXNwbGF5UHJvcGVydHldPWN9LGc9ZnVuY3Rpb24oYil7dmFyIGU9ZChiKTtyZXR1cm4gZSYmZS5sZW5ndGg+PWEubWluTGVuZ3RoJiZlLmxlbmd0aDw9YS5tYXhMZW5ndGgmJmEuYWxsb3dlZFRhZ3NQYXR0ZXJuLnRlc3QoZSkmJiFjKGguaXRlbXMsYixhLmRpc3BsYXlQcm9wZXJ0eSl9LGguaXRlbXM9W10saC5hZGRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBmKGIsYSksaC5hZGQoYil9LGguYWRkPWZ1bmN0aW9uKGMpe3ZhciBlPWQoYyk7cmV0dXJuIGEucmVwbGFjZVNwYWNlc1dpdGhEYXNoZXMmJihlPWUucmVwbGFjZSgvXFxzL2csXCItXCIpKSxmKGMsZSksZyhjKT8oaC5pdGVtcy5wdXNoKGMpLGIudHJpZ2dlcihcInRhZy1hZGRlZFwiLHskdGFnOmN9KSk6ZSYmYi50cmlnZ2VyKFwiaW52YWxpZC10YWdcIix7JHRhZzpjfSksY30saC5yZW1vdmU9ZnVuY3Rpb24oYSl7dmFyIGM9aC5pdGVtcy5zcGxpY2UoYSwxKVswXTtyZXR1cm4gYi50cmlnZ2VyKFwidGFnLXJlbW92ZWRcIix7JHRhZzpjfSksY30saC5yZW1vdmVMYXN0PWZ1bmN0aW9uKCl7dmFyIGIsYz1oLml0ZW1zLmxlbmd0aC0xO3JldHVybiBhLmVuYWJsZUVkaXRpbmdMYXN0VGFnfHxoLnNlbGVjdGVkPyhoLnNlbGVjdGVkPW51bGwsYj1oLnJlbW92ZShjKSk6aC5zZWxlY3RlZHx8KGguc2VsZWN0ZWQ9aC5pdGVtc1tjXSksYn0saH1mdW5jdGlvbiBsKGEpe3JldHVybi0xIT09aS5pbmRleE9mKGEpfXJldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOlwibmdNb2RlbFwiLHNjb3BlOnt0YWdzOlwiPW5nTW9kZWxcIixvblRhZ0FkZGVkOlwiJlwiLG9uVGFnUmVtb3ZlZDpcIiZcIn0scmVwbGFjZTohMSx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOlwibmdUYWdzSW5wdXQvdGFncy1pbnB1dC5odG1sXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihiLGMsZCl7Yi5ldmVudHM9bmV3IGEsai5sb2FkKFwidGFnc0lucHV0XCIsYixjLHt0eXBlOltTdHJpbmcsXCJ0ZXh0XCIsbF0scGxhY2Vob2xkZXI6W1N0cmluZyxcIkFkZCBhIHRhZ1wiXSx0YWJpbmRleDpbTnVtYmVyLG51bGxdLHJlbW92ZVRhZ1N5bWJvbDpbU3RyaW5nLFN0cmluZy5mcm9tQ2hhckNvZGUoMjE1KV0scmVwbGFjZVNwYWNlc1dpdGhEYXNoZXM6W0Jvb2xlYW4sITBdLG1pbkxlbmd0aDpbTnVtYmVyLDNdLG1heExlbmd0aDpbTnVtYmVyLGhdLGFkZE9uRW50ZXI6W0Jvb2xlYW4sITBdLGFkZE9uU3BhY2U6W0Jvb2xlYW4sITFdLGFkZE9uQ29tbWE6W0Jvb2xlYW4sITBdLGFkZE9uQmx1cjpbQm9vbGVhbiwhMF0sYWxsb3dlZFRhZ3NQYXR0ZXJuOltSZWdFeHAsLy4rL10sZW5hYmxlRWRpdGluZ0xhc3RUYWc6W0Jvb2xlYW4sITFdLG1pblRhZ3M6W051bWJlciwwXSxtYXhUYWdzOltOdW1iZXIsaF0sZGlzcGxheVByb3BlcnR5OltTdHJpbmcsXCJ0ZXh0XCJdLGFsbG93TGVmdG92ZXJUZXh0OltCb29sZWFuLCExXSxhZGRGcm9tQXV0b2NvbXBsZXRlT25seTpbQm9vbGVhbiwhMV19KSxiLnRhZ0xpc3Q9bmV3IGsoYi5vcHRpb25zLGIuZXZlbnRzKSx0aGlzLnJlZ2lzdGVyQXV0b2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGE9ZC5maW5kKFwiaW5wdXRcIik7cmV0dXJuIGEub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7Yi5ldmVudHMudHJpZ2dlcihcImlucHV0LWtleWRvd25cIixhKX0pLHthZGRUYWc6ZnVuY3Rpb24oYSl7cmV0dXJuIGIudGFnTGlzdC5hZGQoYSl9LGZvY3VzSW5wdXQ6ZnVuY3Rpb24oKXthWzBdLmZvY3VzKCl9LGdldFRhZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gYi50YWdzfSxnZXRDdXJyZW50VGFnVGV4dDpmdW5jdGlvbigpe3JldHVybiBiLm5ld1RhZy50ZXh0fSxnZXRPcHRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIGIub3B0aW9uc30sb246ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYi5ldmVudHMub24oYSxjKSx0aGlzfX19fV0sbGluazpmdW5jdGlvbihhLGMsaCxpKXt2YXIgaixrPVtnLmVudGVyLGcuY29tbWEsZy5zcGFjZSxnLmJhY2tzcGFjZV0sbD1hLnRhZ0xpc3QsbT1hLmV2ZW50cyxuPWEub3B0aW9ucyxvPWMuZmluZChcImlucHV0XCIpLHA9W1wibWluVGFnc1wiLFwibWF4VGFnc1wiLFwiYWxsb3dMZWZ0b3ZlclRleHRcIl07aj1mdW5jdGlvbigpe2kuJHNldFZhbGlkaXR5KFwibWF4VGFnc1wiLGEudGFncy5sZW5ndGg8PW4ubWF4VGFncyksaS4kc2V0VmFsaWRpdHkoXCJtaW5UYWdzXCIsYS50YWdzLmxlbmd0aD49bi5taW5UYWdzKSxpLiRzZXRWYWxpZGl0eShcImxlZnRvdmVyVGV4dFwiLG4uYWxsb3dMZWZ0b3ZlclRleHQ/ITA6IWEubmV3VGFnLnRleHQpfSxtLm9uKFwidGFnLWFkZGVkXCIsYS5vblRhZ0FkZGVkKS5vbihcInRhZy1yZW1vdmVkXCIsYS5vblRhZ1JlbW92ZWQpLm9uKFwidGFnLWFkZGVkXCIsZnVuY3Rpb24oKXthLm5ld1RhZy50ZXh0PVwiXCJ9KS5vbihcInRhZy1hZGRlZCB0YWctcmVtb3ZlZFwiLGZ1bmN0aW9uKCl7aS4kc2V0Vmlld1ZhbHVlKGEudGFncyl9KS5vbihcImludmFsaWQtdGFnXCIsZnVuY3Rpb24oKXthLm5ld1RhZy5pbnZhbGlkPSEwfSkub24oXCJpbnB1dC1jaGFuZ2VcIixmdW5jdGlvbigpe2wuc2VsZWN0ZWQ9bnVsbCxhLm5ld1RhZy5pbnZhbGlkPW51bGx9KS5vbihcImlucHV0LWZvY3VzXCIsZnVuY3Rpb24oKXtpLiRzZXRWYWxpZGl0eShcImxlZnRvdmVyVGV4dFwiLCEwKX0pLm9uKFwiaW5wdXQtYmx1clwiLGZ1bmN0aW9uKCl7bi5hZGRGcm9tQXV0b2NvbXBsZXRlT25seXx8KG4uYWRkT25CbHVyJiZsLmFkZFRleHQoYS5uZXdUYWcudGV4dCksaigpKX0pLm9uKFwib3B0aW9uLWNoYW5nZVwiLGZ1bmN0aW9uKGEpey0xIT09cC5pbmRleE9mKGEubmFtZSkmJmooKX0pLGEubmV3VGFnPXt0ZXh0OlwiXCIsaW52YWxpZDpudWxsfSxhLmdldERpc3BsYXlUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiBlKGFbbi5kaXNwbGF5UHJvcGVydHldKX0sYS50cmFjaz1mdW5jdGlvbihhKXtyZXR1cm4gYVtuLmRpc3BsYXlQcm9wZXJ0eV19LGEubmV3VGFnQ2hhbmdlPWZ1bmN0aW9uKCl7bS50cmlnZ2VyKFwiaW5wdXQtY2hhbmdlXCIsYS5uZXdUYWcudGV4dCl9LGEuJHdhdGNoKFwidGFnc1wiLGZ1bmN0aW9uKGMpe2EudGFncz1iKGMsbi5kaXNwbGF5UHJvcGVydHkpLGwuaXRlbXM9YS50YWdzfSksYS4kd2F0Y2goXCJ0YWdzLmxlbmd0aFwiLGZ1bmN0aW9uKCl7aigpfSksby5vbihcImtleWRvd25cIixmdW5jdGlvbihiKXtpZighYi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZHx8IWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl7dmFyIGMsZCxlPWIua2V5Q29kZSxmPWIuc2hpZnRLZXl8fGIuYWx0S2V5fHxiLmN0cmxLZXl8fGIubWV0YUtleSxoPXt9O2lmKCFmJiYtMSE9PWsuaW5kZXhPZihlKSlpZihoW2cuZW50ZXJdPW4uYWRkT25FbnRlcixoW2cuY29tbWFdPW4uYWRkT25Db21tYSxoW2cuc3BhY2VdPW4uYWRkT25TcGFjZSxjPSFuLmFkZEZyb21BdXRvY29tcGxldGVPbmx5JiZoW2VdLGQ9IWMmJmU9PT1nLmJhY2tzcGFjZSYmMD09PWEubmV3VGFnLnRleHQubGVuZ3RoLGMpbC5hZGRUZXh0KGEubmV3VGFnLnRleHQpLGEuJGFwcGx5KCksYi5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoZCl7dmFyIGk9bC5yZW1vdmVMYXN0KCk7aSYmbi5lbmFibGVFZGl0aW5nTGFzdFRhZyYmKGEubmV3VGFnLnRleHQ9aVtuLmRpc3BsYXlQcm9wZXJ0eV0pLGEuJGFwcGx5KCksYi5wcmV2ZW50RGVmYXVsdCgpfX19KS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXthLmhhc0ZvY3VzfHwoYS5oYXNGb2N1cz0hMCxtLnRyaWdnZXIoXCJpbnB1dC1mb2N1c1wiKSxhLiRhcHBseSgpKX0pLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7ZChmdW5jdGlvbigpe3ZhciBiPWYucHJvcChcImFjdGl2ZUVsZW1lbnRcIiksZD1iPT09b1swXSxlPWNbMF0uY29udGFpbnMoYik7KGR8fCFlKSYmKGEuaGFzRm9jdXM9ITEsbS50cmlnZ2VyKFwiaW5wdXQtYmx1clwiKSl9KX0pLGMuZmluZChcImRpdlwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtvWzBdLmZvY3VzKCl9KX19fV0pLGouZGlyZWN0aXZlKFwiYXV0b0NvbXBsZXRlXCIsW1wiJGRvY3VtZW50XCIsXCIkdGltZW91dFwiLFwiJHNjZVwiLFwidGFnc0lucHV0Q29uZmlnXCIsZnVuY3Rpb24oYSxoLGksail7ZnVuY3Rpb24gayhhLGQpe3ZhciBlLGYsZyxpPXt9O3JldHVybiBmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFjKGIsYSxkLnRhZ3NJbnB1dC5kaXNwbGF5UHJvcGVydHkpfSl9LGkucmVzZXQ9ZnVuY3Rpb24oKXtnPW51bGwsaS5pdGVtcz1bXSxpLnZpc2libGU9ITEsaS5pbmRleD0tMSxpLnNlbGVjdGVkPW51bGwsaS5xdWVyeT1udWxsLGguY2FuY2VsKGUpfSxpLnNob3c9ZnVuY3Rpb24oKXtpLnNlbGVjdGVkPW51bGwsaS52aXNpYmxlPSEwfSxpLmxvYWQ9ZnVuY3Rpb24oYyxqKXtoLmNhbmNlbChlKSxlPWgoZnVuY3Rpb24oKXtpLnF1ZXJ5PWM7dmFyIGU9YSh7JHF1ZXJ5OmN9KTtnPWUsZS50aGVuKGZ1bmN0aW9uKGEpe2U9PT1nJiYoYT1iKGEuZGF0YXx8YSxkLnRhZ3NJbnB1dC5kaXNwbGF5UHJvcGVydHkpLGE9ZihhLGopLGkuaXRlbXM9YS5zbGljZSgwLGQubWF4UmVzdWx0c1RvU2hvdyksaS5pdGVtcy5sZW5ndGg+MD9pLnNob3coKTppLnJlc2V0KCkpfSl9LGQuZGVib3VuY2VEZWxheSwhMSl9LGkuc2VsZWN0TmV4dD1mdW5jdGlvbigpe2kuc2VsZWN0KCsraS5pbmRleCl9LGkuc2VsZWN0UHJpb3I9ZnVuY3Rpb24oKXtpLnNlbGVjdCgtLWkuaW5kZXgpfSxpLnNlbGVjdD1mdW5jdGlvbihhKXswPmE/YT1pLml0ZW1zLmxlbmd0aC0xOmE+PWkuaXRlbXMubGVuZ3RoJiYoYT0wKSxpLmluZGV4PWEsaS5zZWxlY3RlZD1pLml0ZW1zW2FdfSxpLnJlc2V0KCksaX1yZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpcIl50YWdzSW5wdXRcIixzY29wZTp7c291cmNlOlwiJlwifSx0ZW1wbGF0ZVVybDpcIm5nVGFnc0lucHV0L2F1dG8tY29tcGxldGUuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsaCl7dmFyIGwsbSxuLG8scCxxLHI9W2cuZW50ZXIsZy50YWIsZy5lc2NhcGUsZy51cCxnLmRvd25dO2oubG9hZChcImF1dG9Db21wbGV0ZVwiLGEsYyx7ZGVib3VuY2VEZWxheTpbTnVtYmVyLDEwMF0sbWluTGVuZ3RoOltOdW1iZXIsM10saGlnaGxpZ2h0TWF0Y2hlZFRleHQ6W0Jvb2xlYW4sITBdLG1heFJlc3VsdHNUb1Nob3c6W051bWJlciwxMF0sbG9hZE9uRG93bkFycm93OltCb29sZWFuLCExXSxsb2FkT25FbXB0eTpbQm9vbGVhbiwhMV0sbG9hZE9uRm9jdXM6W0Jvb2xlYW4sITFdfSksbj1hLm9wdGlvbnMsbT1oLnJlZ2lzdGVyQXV0b2NvbXBsZXRlKCksbi50YWdzSW5wdXQ9bS5nZXRPcHRpb25zKCksbD1uZXcgayhhLnNvdXJjZSxuKSxvPWZ1bmN0aW9uKGEpe3JldHVybiBhW24udGFnc0lucHV0LmRpc3BsYXlQcm9wZXJ0eV19LHA9ZnVuY3Rpb24oYSl7cmV0dXJuIGUobyhhKSl9LHE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEubGVuZ3RoPj1uLm1pbkxlbmd0aHx8IWEmJm4ubG9hZE9uRW1wdHl9LGEuc3VnZ2VzdGlvbkxpc3Q9bCxhLmFkZFN1Z2dlc3Rpb25CeUluZGV4PWZ1bmN0aW9uKGIpe2wuc2VsZWN0KGIpLGEuYWRkU3VnZ2VzdGlvbigpfSxhLmFkZFN1Z2dlc3Rpb249ZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gbC5zZWxlY3RlZCYmKG0uYWRkVGFnKGwuc2VsZWN0ZWQpLGwucmVzZXQoKSxtLmZvY3VzSW5wdXQoKSxhPSEwKSxhfSxhLmhpZ2hsaWdodD1mdW5jdGlvbihhKXt2YXIgYj1wKGEpO3JldHVybiBiPWYoYiksbi5oaWdobGlnaHRNYXRjaGVkVGV4dCYmKGI9ZChiLGYobC5xdWVyeSksXCI8ZW0+JCY8L2VtPlwiKSksaS50cnVzdEFzSHRtbChiKX0sYS50cmFjaz1mdW5jdGlvbihhKXtyZXR1cm4gbyhhKX0sbS5vbihcInRhZy1hZGRlZCB0YWctcmVtb3ZlZCBpbnZhbGlkLXRhZyBpbnB1dC1ibHVyXCIsZnVuY3Rpb24oKXtsLnJlc2V0KCl9KS5vbihcImlucHV0LWNoYW5nZVwiLGZ1bmN0aW9uKGEpe3EoYSk/bC5sb2FkKGEsbS5nZXRUYWdzKCkpOmwucmVzZXQoKX0pLm9uKFwiaW5wdXQtZm9jdXNcIixmdW5jdGlvbigpe3ZhciBhPW0uZ2V0Q3VycmVudFRhZ1RleHQoKTtuLmxvYWRPbkZvY3VzJiZxKGEpJiZsLmxvYWQoYSxtLmdldFRhZ3MoKSl9KS5vbihcImlucHV0LWtleWRvd25cIixmdW5jdGlvbihiKXt2YXIgYz0hMTtiLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2M9ITAsYi5zdG9wUHJvcGFnYXRpb24oKX0sYi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiBjfTt2YXIgZD1iLmtleUNvZGUsZT0hMTstMSE9PXIuaW5kZXhPZihkKSYmKGwudmlzaWJsZT9kPT09Zy5kb3duPyhsLnNlbGVjdE5leHQoKSxlPSEwKTpkPT09Zy51cD8obC5zZWxlY3RQcmlvcigpLGU9ITApOmQ9PT1nLmVzY2FwZT8obC5yZXNldCgpLGU9ITApOihkPT09Zy5lbnRlcnx8ZD09PWcudGFiKSYmKGU9YS5hZGRTdWdnZXN0aW9uKCkpOmQ9PT1nLmRvd24mJmEub3B0aW9ucy5sb2FkT25Eb3duQXJyb3cmJihsLmxvYWQobS5nZXRDdXJyZW50VGFnVGV4dCgpLG0uZ2V0VGFncygpKSxlPSEwKSxlJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYS4kYXBwbHkoKSkpfSl9fX1dKSxqLmRpcmVjdGl2ZShcInRpVHJhbnNjbHVkZUFwcGVuZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7ZShmdW5jdGlvbihhKXtiLmFwcGVuZChhKX0pfX0pLGouZGlyZWN0aXZlKFwidGlBdXRvc2l6ZVwiLFtcInRhZ3NJbnB1dENvbmZpZ1wiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoPWEuZ2V0VGV4dEF1dG9zaXplVGhyZXNob2xkKCk7Zj1hbmd1bGFyLmVsZW1lbnQoJzxzcGFuIGNsYXNzPVwiaW5wdXRcIj48L3NwYW4+JyksZi5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKS5jc3MoXCJ3aWR0aFwiLFwiYXV0b1wiKS5jc3MoXCJ3aGl0ZS1zcGFjZVwiLFwicHJlXCIpLGMucGFyZW50KCkuYXBwZW5kKGYpLGc9ZnVuY3Rpb24oYSl7dmFyIGIsZT1hO3JldHVybiBhbmd1bGFyLmlzU3RyaW5nKGUpJiYwPT09ZS5sZW5ndGgmJihlPWQucGxhY2Vob2xkZXIpLGUmJihmLnRleHQoZSksZi5jc3MoXCJkaXNwbGF5XCIsXCJcIiksYj1mLnByb3AoXCJvZmZzZXRXaWR0aFwiKSxmLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIikpLGMuY3NzKFwid2lkdGhcIixiP2IraCtcInB4XCI6XCJcIiksYX0sZS4kcGFyc2Vycy51bnNoaWZ0KGcpLGUuJGZvcm1hdHRlcnMudW5zaGlmdChnKSxkLiRvYnNlcnZlKFwicGxhY2Vob2xkZXJcIixmdW5jdGlvbihhKXtlLiRtb2RlbFZhbHVlfHxnKGEpfSl9fX1dKSxqLmRpcmVjdGl2ZShcInRpQmluZEF0dHJzXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2EuJHdhdGNoKGMudGlCaW5kQXR0cnMsZnVuY3Rpb24oYSl7YW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxiKXtjLiRzZXQoYixhKX0pfSwhMCl9fSksai5wcm92aWRlcihcInRhZ3NJbnB1dENvbmZpZ1wiLGZ1bmN0aW9uKCl7dmFyIGE9e30sYj17fSxjPTM7dGhpcy5zZXREZWZhdWx0cz1mdW5jdGlvbihiLGMpe3JldHVybiBhW2JdPWMsdGhpc30sdGhpcy5zZXRBY3RpdmVJbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJbYV09Yyx0aGlzfSx0aGlzLnNldFRleHRBdXRvc2l6ZVRocmVzaG9sZD1mdW5jdGlvbihhKXtyZXR1cm4gYz1hLHRoaXN9LHRoaXMuJGdldD1bXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihkKXt2YXIgZT17fTtyZXR1cm4gZVtTdHJpbmddPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxlW051bWJlcl09ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfSxlW0Jvb2xlYW5dPWZ1bmN0aW9uKGEpe3JldHVyblwidHJ1ZVwiPT09YS50b0xvd2VyQ2FzZSgpfSxlW1JlZ0V4cF09ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBSZWdFeHAoYSl9LHtsb2FkOmZ1bmN0aW9uKGMsZixnLGgpe3ZhciBpPWZ1bmN0aW9uKCl7cmV0dXJuITB9O2Yub3B0aW9ucz17fSxhbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihoLGope3ZhciBrLGwsbSxuLG8scDtrPWhbMF0sbD1oWzFdLG09aFsyXXx8aSxuPWVba10sbz1mdW5jdGlvbigpe3ZhciBiPWFbY10mJmFbY11bal07cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGIpP2I6bH0scD1mdW5jdGlvbihhKXtmLm9wdGlvbnNbal09YSYmbShhKT9uKGEpOm8oKX0sYltjXSYmYltjXVtqXT9nLiRvYnNlcnZlKGosZnVuY3Rpb24oYSl7cChhKSxmLmV2ZW50cy50cmlnZ2VyKFwib3B0aW9uLWNoYW5nZVwiLHtuYW1lOmosbmV3VmFsdWU6YX0pfSk6cChnW2pdJiZkKGdbal0pKGYuJHBhcmVudCkpfSl9LGdldFRleHRBdXRvc2l6ZVRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiBjfX19XX0pLGoucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJuZ1RhZ3NJbnB1dC90YWdzLWlucHV0Lmh0bWxcIiwnPGRpdiBjbGFzcz1cImhvc3RcIiB0YWJpbmRleD1cIi0xXCIgdGktdHJhbnNjbHVkZS1hcHBlbmQ9XCJcIj48ZGl2IGNsYXNzPVwidGFnc1wiIG5nLWNsYXNzPVwie2ZvY3VzZWQ6IGhhc0ZvY3VzfVwiPjx1bCBjbGFzcz1cInRhZy1saXN0XCI+PGxpIGNsYXNzPVwidGFnLWl0ZW1cIiBuZy1yZXBlYXQ9XCJ0YWcgaW4gdGFnTGlzdC5pdGVtcyB0cmFjayBieSB0cmFjayh0YWcpXCIgbmctY2xhc3M9XCJ7IHNlbGVjdGVkOiB0YWcgPT0gdGFnTGlzdC5zZWxlY3RlZCB9XCI+PHNwYW4gbmctYmluZD1cImdldERpc3BsYXlUZXh0KHRhZylcIj48L3NwYW4+IDxhIGNsYXNzPVwicmVtb3ZlLWJ1dHRvblwiIG5nLWNsaWNrPVwidGFnTGlzdC5yZW1vdmUoJGluZGV4KVwiIG5nLWJpbmQ9XCJvcHRpb25zLnJlbW92ZVRhZ1N5bWJvbFwiPjwvYT48L2xpPjwvdWw+PGlucHV0IGNsYXNzPVwiaW5wdXRcIiBuZy1tb2RlbD1cIm5ld1RhZy50ZXh0XCIgbmctY2hhbmdlPVwibmV3VGFnQ2hhbmdlKClcIiBuZy10cmltPVwiZmFsc2VcIiBuZy1jbGFzcz1cIntcXCdpbnZhbGlkLXRhZ1xcJzogbmV3VGFnLmludmFsaWR9XCIgdGktYmluZC1hdHRycz1cInt0eXBlOiBvcHRpb25zLnR5cGUsIHBsYWNlaG9sZGVyOiBvcHRpb25zLnBsYWNlaG9sZGVyLCB0YWJpbmRleDogb3B0aW9ucy50YWJpbmRleH1cIiB0aS1hdXRvc2l6ZT1cIlwiPjwvZGl2PjwvZGl2PicpLGEucHV0KFwibmdUYWdzSW5wdXQvYXV0by1jb21wbGV0ZS5odG1sXCIsJzxkaXYgY2xhc3M9XCJhdXRvY29tcGxldGVcIiBuZy1zaG93PVwic3VnZ2VzdGlvbkxpc3QudmlzaWJsZVwiPjx1bCBjbGFzcz1cInN1Z2dlc3Rpb24tbGlzdFwiPjxsaSBjbGFzcz1cInN1Z2dlc3Rpb24taXRlbVwiIG5nLXJlcGVhdD1cIml0ZW0gaW4gc3VnZ2VzdGlvbkxpc3QuaXRlbXMgdHJhY2sgYnkgdHJhY2soaXRlbSlcIiBuZy1jbGFzcz1cIntzZWxlY3RlZDogaXRlbSA9PSBzdWdnZXN0aW9uTGlzdC5zZWxlY3RlZH1cIiBuZy1jbGljaz1cImFkZFN1Z2dlc3Rpb25CeUluZGV4KCRpbmRleClcIiBuZy1tb3VzZWVudGVyPVwic3VnZ2VzdGlvbkxpc3Quc2VsZWN0KCRpbmRleClcIiBuZy1iaW5kLWh0bWw9XCJoaWdobGlnaHQoaXRlbSlcIj48L2xpPjwvdWw+PC9kaXY+Jyl9XSl9KCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9